/*! For license information please see bagon_desktop-55cb6c689ca14b0a1b0b.js.LICENSE.txt */
!function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=1809)}([function(t,e,n){"use strict";var r=n(13),i=n(609),o=n(74),a=n(611),s=function(){function t(t){this._isScalar=!1,t&&(this._subscribe=t)}return t.prototype.lift=function(e){var n=new t;return n.source=this,n.operator=e,n},t.prototype.subscribe=function(t,e,n){var r=this.operator,o=i.toSubscriber(t,e,n);if(r?r.call(o,this.source):o.add(this.source||!o.syncErrorThrowable?this._subscribe(o):this._trySubscribe(o)),o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){t.syncErrorThrown=!0,t.syncErrorValue=e,t.error(e)}},t.prototype.forEach=function(t,e){var n=this;if(e||(r.root.Rx&&r.root.Rx.config&&r.root.Rx.config.Promise?e=r.root.Rx.config.Promise:r.root.Promise&&(e=r.root.Promise)),!e)throw new Error("no Promise impl found");return new e((function(e,r){var i;i=n.subscribe((function(e){if(i)try{t(e)}catch(t){r(t),i.unsubscribe()}else t(e)}),r,e)}))},t.prototype._subscribe=function(t){return this.source.subscribe(t)},t.prototype[o.observable]=function(){return this},t.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return 0===t.length?this:a.pipeFromArray(t)(this)},t.prototype.toPromise=function(t){var e=this;if(t||(r.root.Rx&&r.root.Rx.config&&r.root.Rx.config.Promise?t=r.root.Rx.config.Promise:r.root.Promise&&(t=r.root.Promise)),!t)throw new Error("no Promise impl found");return new t((function(t,n){var r;e.subscribe((function(t){return r=t}),(function(t){return n(t)}),(function(){return t(r)}))}))},t.create=function(e){return new t(e)},t}();e.Observable=s},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){t.exports=n(87)},,,,function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},i=n(71),o=n(18),a=n(123),s=n(73),c=function(t){function e(e,n,r){switch(t.call(this),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=a.empty;break;case 1:if(!e){this.destination=a.empty;break}if("object"==typeof e){if(u(e)){var i=e[s.rxSubscriber]();this.syncErrorThrowable=i.syncErrorThrowable,this.destination=i,i.add(this)}else this.syncErrorThrowable=!0,this.destination=new l(this,e);break}default:this.syncErrorThrowable=!0,this.destination=new l(this,e,n,r)}}return r(e,t),e.prototype[s.rxSubscriber]=function(){return this},e.create=function(t,n,r){var i=new e(t,n,r);return i.syncErrorThrowable=!1,i},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},e.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},e.prototype._unsubscribeAndRecycle=function(){var t=this._parent,e=this._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=t,this._parents=e,this},e}(o.Subscription);e.Subscriber=c;var l=function(t){function e(e,n,r,o){var s;t.call(this),this._parentSubscriber=e;var c=this;i.isFunction(n)?s=n:n&&(s=n.next,r=n.error,o=n.complete,n!==a.empty&&(c=Object.create(n),i.isFunction(c.unsubscribe)&&this.add(c.unsubscribe.bind(c)),c.unsubscribe=this.unsubscribe.bind(this))),this._context=c,this._next=s,this._error=r,this._complete=o}return r(e,t),e.prototype.next=function(t){if(!this.isStopped&&this._next){var e=this._parentSubscriber;e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},e.prototype.error=function(t){if(!this.isStopped){var e=this._parentSubscriber;if(this._error)e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else{if(!e.syncErrorThrowable)throw this.unsubscribe(),t;e.syncErrorValue=t,e.syncErrorThrown=!0,this.unsubscribe()}}},e.prototype.complete=function(){var t=this;if(!this.isStopped){var e=this._parentSubscriber;if(this._complete){var n=function(){return t._complete.call(t._context)};e.syncErrorThrowable?(this.__tryOrSetError(e,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}},e.prototype.__tryOrUnsub=function(t,e){try{t.call(this._context,e)}catch(t){throw this.unsubscribe(),t}},e.prototype.__tryOrSetError=function(t,e,n){try{e.call(this._context,n)}catch(e){return t.syncErrorValue=e,t.syncErrorThrown=!0,!0}return!1},e.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},e}(c);function u(t){return t instanceof c||"syncErrorThrowable"in t&&t[s.rxSubscriber]}},function(t,e,n){(function(e){t.exports=e.$=n(199)}).call(this,n(1))},,,,,,function(t,e,n){"use strict";(function(t){var n="undefined"!=typeof window&&window,r="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,i=n||void 0!==t&&t||r;e.root=i,function(){if(!i)throw new Error("RxJS could not find any global context (window, self, global)")}()}).call(this,n(1))},,,,function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,n){"use strict";var r=n(34),i=n(122),o=n(71),a=n(72),s=n(46),c=n(610),l=function(){function t(t){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}var e;return t.prototype.unsubscribe=function(){var t,e=!1;if(!this.closed){var n=this,l=n._parent,d=n._parents,p=n._unsubscribe,f=n._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var _=-1,h=d?d.length:0;l;)l.remove(this),l=++_<h&&d[_]||null;if(o.isFunction(p))a.tryCatch(p).call(this)===s.errorObject&&(e=!0,t=t||(s.errorObject.e instanceof c.UnsubscriptionError?u(s.errorObject.e.errors):[s.errorObject.e]));if(r.isArray(f))for(_=-1,h=f.length;++_<h;){var m=f[_];if(i.isObject(m))if(a.tryCatch(m.unsubscribe).call(m)===s.errorObject){e=!0,t=t||[];var g=s.errorObject.e;g instanceof c.UnsubscriptionError?t=t.concat(u(g.errors)):t.push(g)}}if(e)throw new c.UnsubscriptionError(t)}},t.prototype.add=function(e){if(!e||e===t.EMPTY)return t.EMPTY;if(e===this)return this;var n=e;switch(typeof e){case"function":n=new t(e);case"object":if(n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if("function"!=typeof n._addParent){var r=n;(n=new t)._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}return(this._subscriptions||(this._subscriptions=[])).push(n),n._addParent(this),n},t.prototype.remove=function(t){var e=this._subscriptions;if(e){var n=e.indexOf(t);-1!==n&&e.splice(n,1)}},t.prototype._addParent=function(t){var e=this._parent,n=this._parents;e&&e!==t?n?-1===n.indexOf(t)&&n.push(t):this._parents=[t]:this._parent=t},t.EMPTY=((e=new t).closed=!0,e),t}();function u(t){return t.reduce((function(t,e){return t.concat(e instanceof c.UnsubscriptionError?e.errors:e)}),[])}e.Subscription=l},function(t,e,n){"use strict";e.isScheduler=function(t){return t&&"function"==typeof t.schedule}},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},i=n(0),o=n(75),a=n(76),s=n(19),c=function(t){function e(e,n){t.call(this),this.array=e,this.scheduler=n,n||1!==e.length||(this._isScalar=!0,this.value=e[0])}return r(e,t),e.create=function(t,n){return new e(t,n)},e.of=function(){for(var t=[],n=0;n<arguments.length;n++)t[n-0]=arguments[n];var r=t[t.length-1];s.isScheduler(r)?t.pop():r=null;var i=t.length;return i>1?new e(t,r):1===i?new o.ScalarObservable(t[0],r):new a.EmptyObservable(r)},e.dispatch=function(t){var e=t.array,n=t.index,r=t.count,i=t.subscriber;n>=r?i.complete():(i.next(e[n]),i.closed||(t.index=n+1,this.schedule(t)))},e.prototype._subscribe=function(t){var n=this.array,r=n.length,i=this.scheduler;if(i)return i.schedule(e.dispatch,0,{array:n,index:0,count:r,subscriber:t});for(var o=0;o<r&&!t.closed;o++)t.next(n[o]);t.complete()},e}(i.Observable);e.ArrayObservable=c},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},i=function(t){function e(){t.apply(this,arguments)}return r(e,t),e.prototype.notifyNext=function(t,e,n,r,i){this.destination.next(e)},e.prototype.notifyError=function(t,e){this.destination.error(t)},e.prototype.notifyComplete=function(t){this.destination.complete()},e}(n(6).Subscriber);e.OuterSubscriber=i},function(t,e,n){"use strict";var r=n(13),i=n(126),o=n(127),a=n(122),s=n(0),c=n(77),l=n(617),u=n(74);e.subscribeToResult=function(t,e,n,d){var p=new l.InnerSubscriber(t,n,d);if(p.closed)return null;if(e instanceof s.Observable)return e._isScalar?(p.next(e.value),p.complete(),null):(p.syncErrorThrowable=!0,e.subscribe(p));if(i.isArrayLike(e)){for(var f=0,_=e.length;f<_&&!p.closed;f++)p.next(e[f]);p.closed||p.complete()}else{if(o.isPromise(e))return e.then((function(t){p.closed||(p.next(t),p.complete())}),(function(t){return p.error(t)})).then(null,(function(t){r.root.setTimeout((function(){throw t}))})),p;if(e&&"function"==typeof e[c.iterator])for(var h=e[c.iterator]();;){var m=h.next();if(m.done){p.complete();break}if(p.next(m.value),p.closed)break}else if(e&&"function"==typeof e[u.observable]){var g=e[u.observable]();if("function"==typeof g.subscribe)return g.subscribe(new l.InnerSubscriber(t,n,d));p.error(new TypeError("Provided object does not correctly implement Symbol.observable"))}else{var v="You provided "+(a.isObject(e)?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.";p.error(new TypeError(v))}}return null}},,,,,,,,,,,,function(t,e,n){"use strict";e.isArray=Array.isArray||function(t){return t&&"number"==typeof t.length}},,,,,,,,,,,function(t,e){var n,r;n=this,r=function(){"use strict";var e;function n(){return e.apply(null,arguments)}function r(t){return"[object Array]"===Object.prototype.toString.call(t)}function i(t){return t instanceof Date||"[object Date]"===Object.prototype.toString.call(t)}function o(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function a(t,e){for(var n in e)o(e,n)&&(t[n]=e[n]);return o(e,"toString")&&(t.toString=e.toString),o(e,"valueOf")&&(t.valueOf=e.valueOf),t}function s(t,e,n,r){return Pt(t,e,n,r,!0).utc()}function c(t){return null==t._pf&&(t._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}),t._pf}function l(t){if(null==t._isValid){var e=c(t);t._isValid=!(isNaN(t._d.getTime())||!(e.overflow<0)||e.empty||e.invalidMonth||e.invalidWeekday||e.nullInput||e.invalidFormat||e.userInvalidated),t._strict&&(t._isValid=t._isValid&&0===e.charsLeftOver&&0===e.unusedTokens.length&&void 0===e.bigHour)}return t._isValid}function u(t){var e=s(NaN);return null!=t?a(c(e),t):c(e).userInvalidated=!0,e}var d=n.momentProperties=[];function p(t,e){var n,r,i;if(void 0!==e._isAMomentObject&&(t._isAMomentObject=e._isAMomentObject),void 0!==e._i&&(t._i=e._i),void 0!==e._f&&(t._f=e._f),void 0!==e._l&&(t._l=e._l),void 0!==e._strict&&(t._strict=e._strict),void 0!==e._tzm&&(t._tzm=e._tzm),void 0!==e._isUTC&&(t._isUTC=e._isUTC),void 0!==e._offset&&(t._offset=e._offset),void 0!==e._pf&&(t._pf=c(e)),void 0!==e._locale&&(t._locale=e._locale),d.length>0)for(n in d)void 0!==(i=e[r=d[n]])&&(t[r]=i);return t}var f=!1;function _(t){p(this,t),this._d=new Date(null!=t._d?t._d.getTime():NaN),!1===f&&(f=!0,n.updateOffset(this),f=!1)}function h(t){return t instanceof _||null!=t&&null!=t._isAMomentObject}function m(t){return t<0?Math.ceil(t):Math.floor(t)}function g(t){var e=+t,n=0;return 0!==e&&isFinite(e)&&(n=m(e)),n}function v(t,e,n){var r,i=Math.min(t.length,e.length),o=Math.abs(t.length-e.length),a=0;for(r=0;r<i;r++)(n&&t[r]!==e[r]||!n&&g(t[r])!==g(e[r]))&&a++;return a+o}function b(){}var y,w={};function $(t){return t?t.toLowerCase().replace("_","-"):t}function x(e){var n=null;if(!w[e]&&void 0!==t&&t&&t.exports)try{n=y._abbr,require("./locale/"+e),k(n)}catch(t){}return w[e]}function k(t,e){var n;return t&&(n=void 0===e?S(t):C(t,e))&&(y=n),y._abbr}function C(t,e){return null!==e?(e.abbr=t,w[t]=w[t]||new b,w[t].set(e),k(t),w[t]):(delete w[t],null)}function S(t){var e;if(t&&t._locale&&t._locale._abbr&&(t=t._locale._abbr),!t)return y;if(!r(t)){if(e=x(t))return e;t=[t]}return function(t){for(var e,n,r,i,o=0;o<t.length;){for(e=(i=$(t[o]).split("-")).length,n=(n=$(t[o+1]))?n.split("-"):null;e>0;){if(r=x(i.slice(0,e).join("-")))return r;if(n&&n.length>=e&&v(i,n,!0)>=e-1)break;e--}o++}return null}(t)}var A={};function E(t,e){var n=t.toLowerCase();A[n]=A[n+"s"]=A[e]=t}function j(t){return"string"==typeof t?A[t]||A[t.toLowerCase()]:void 0}function O(t){var e,n,r={};for(n in t)o(t,n)&&(e=j(n))&&(r[e]=t[n]);return r}function T(t,e){return function(r){return null!=r?(P(this,t,r),n.updateOffset(this,e),this):q(this,t)}}function q(t,e){return t._d["get"+(t._isUTC?"UTC":"")+e]()}function P(t,e,n){return t._d["set"+(t._isUTC?"UTC":"")+e](n)}function M(t,e){var n;if("object"==typeof t)for(n in t)this.set(n,t[n]);else if("function"==typeof this[t=j(t)])return this[t](e);return this}function I(t,e,n){var r=""+Math.abs(t),i=e-r.length;return(t>=0?n?"+":"":"-")+Math.pow(10,Math.max(0,i)).toString().substr(1)+r}var R=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,D=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,z={},L={};function N(t,e,n,r){var i=r;"string"==typeof r&&(i=function(){return this[r]()}),t&&(L[t]=i),e&&(L[e[0]]=function(){return I(i.apply(this,arguments),e[1],e[2])}),n&&(L[n]=function(){return this.localeData().ordinal(i.apply(this,arguments),t)})}function F(t,e){return t.isValid()?(e=U(e,t.localeData()),z[e]=z[e]||function(t){var e,n,r,i=t.match(R);for(e=0,n=i.length;e<n;e++)L[i[e]]?i[e]=L[i[e]]:i[e]=(r=i[e]).match(/\[[\s\S]/)?r.replace(/^\[|\]$/g,""):r.replace(/\\/g,"");return function(r){var o="";for(e=0;e<n;e++)o+=i[e]instanceof Function?i[e].call(r,t):i[e];return o}}(e),z[e](t)):t.localeData().invalidDate()}function U(t,e){var n=5;function r(t){return e.longDateFormat(t)||t}for(D.lastIndex=0;n>=0&&D.test(t);)t=t.replace(D,r),D.lastIndex=0,n-=1;return t}var V=/\d/,H=/\d\d/,B=/\d{3}/,W=/\d{4}/,G=/[+-]?\d{6}/,Y=/\d\d?/,K=/\d{1,3}/,J=/\d{1,4}/,Q=/[+-]?\d{1,6}/,X=/\d+/,Z=/[+-]?\d+/,tt=/Z|[+-]\d\d:?\d\d/gi,et=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,nt={};function rt(t,e,n){var r;nt[t]="function"==typeof(r=e)&&"[object Function]"===Object.prototype.toString.call(r)?e:function(t){return t&&n?n:e}}function it(t,e){return o(nt,t)?nt[t](e._strict,e._locale):new RegExp(t.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,(function(t,e,n,r,i){return e||n||r||i})).replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"))}var ot={};function at(t,e){var n,r=e;for("string"==typeof t&&(t=[t]),"number"==typeof e&&(r=function(t,n){n[e]=g(t)}),n=0;n<t.length;n++)ot[t[n]]=r}function st(t,e){at(t,(function(t,n,r,i){r._w=r._w||{},e(t,r._w,r,i)}))}function ct(t,e,n){null!=e&&o(ot,t)&&ot[t](e,n._a,n,t)}function lt(t,e){return new Date(Date.UTC(t,e+1,0)).getUTCDate()}N("M",["MM",2],"Mo",(function(){return this.month()+1})),N("MMM",0,0,(function(t){return this.localeData().monthsShort(this,t)})),N("MMMM",0,0,(function(t){return this.localeData().months(this,t)})),E("month","M"),rt("M",Y),rt("MM",Y,H),rt("MMM",et),rt("MMMM",et),at(["M","MM"],(function(t,e){e[1]=g(t)-1})),at(["MMM","MMMM"],(function(t,e,n,r){var i=n._locale.monthsParse(t,r,n._strict);null!=i?e[1]=i:c(n).invalidMonth=t}));var ut="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),dt="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_");function pt(t,e){var n;return"string"==typeof e&&"number"!=typeof(e=t.localeData().monthsParse(e))||(n=Math.min(t.date(),lt(t.year(),e)),t._d["set"+(t._isUTC?"UTC":"")+"Month"](e,n)),t}function ft(t){return null!=t?(pt(this,t),n.updateOffset(this,!0),this):q(this,"Month")}function _t(t){var e,n=t._a;return n&&-2===c(t).overflow&&(e=n[1]<0||n[1]>11?1:n[2]<1||n[2]>lt(n[0],n[1])?2:n[3]<0||n[3]>24||24===n[3]&&(0!==n[4]||0!==n[5]||0!==n[6])?3:n[4]<0||n[4]>59?4:n[5]<0||n[5]>59?5:n[6]<0||n[6]>999?6:-1,c(t)._overflowDayOfYear&&(e<0||e>2)&&(e=2),c(t).overflow=e),t}function ht(t){!1===n.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+t)}function mt(t,e){var n=!0;return a((function(){return n&&(ht(t+"\n"+(new Error).stack),n=!1),e.apply(this,arguments)}),e)}var gt={};n.suppressDeprecationWarnings=!1;var vt=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,bt=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],yt=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],wt=/^\/?Date\((\-?\d+)/i;function $t(t){var e,n,r=t._i,i=vt.exec(r);if(i){for(c(t).iso=!0,e=0,n=bt.length;e<n;e++)if(bt[e][1].exec(r)){t._f=bt[e][0];break}for(e=0,n=yt.length;e<n;e++)if(yt[e][1].exec(r)){t._f+=(i[6]||" ")+yt[e][0];break}r.match(tt)&&(t._f+="Z"),Tt(t)}else t._isValid=!1}function xt(t,e,n,r,i,o,a){var s=new Date(t,e,n,r,i,o,a);return t<1970&&s.setFullYear(t),s}function kt(t){var e=new Date(Date.UTC.apply(null,arguments));return t<1970&&e.setUTCFullYear(t),e}function Ct(t){return St(t)?366:365}function St(t){return t%4==0&&t%100!=0||t%400==0}n.createFromInputFallback=mt("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",(function(t){t._d=new Date(t._i+(t._useUTC?" UTC":""))})),N(0,["YY",2],0,(function(){return this.year()%100})),N(0,["YYYY",4],0,"year"),N(0,["YYYYY",5],0,"year"),N(0,["YYYYYY",6,!0],0,"year"),E("year","y"),rt("Y",Z),rt("YY",Y,H),rt("YYYY",J,W),rt("YYYYY",Q,G),rt("YYYYYY",Q,G),at(["YYYYY","YYYYYY"],0),at("YYYY",(function(t,e){e[0]=2===t.length?n.parseTwoDigitYear(t):g(t)})),at("YY",(function(t,e){e[0]=n.parseTwoDigitYear(t)})),n.parseTwoDigitYear=function(t){return g(t)+(g(t)>68?1900:2e3)};var At=T("FullYear",!1);function Et(t,e,n){var r,i=n-e,o=n-t.day();return o>i&&(o-=7),o<i-7&&(o+=7),r=Mt(t).add(o,"d"),{week:Math.ceil(r.dayOfYear()/7),year:r.year()}}function jt(t,e,n){return null!=t?t:null!=e?e:n}function Ot(t){var e,n,r,i,o=[];if(!t._d){for(r=function(t){var e=new Date;return t._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()]}(t),t._w&&null==t._a[2]&&null==t._a[1]&&function(t){var e,n,r,i,o,a,s;null!=(e=t._w).GG||null!=e.W||null!=e.E?(o=1,a=4,n=jt(e.GG,t._a[0],Et(Mt(),1,4).year),r=jt(e.W,1),i=jt(e.E,1)):(o=t._locale._week.dow,a=t._locale._week.doy,n=jt(e.gg,t._a[0],Et(Mt(),o,a).year),r=jt(e.w,1),null!=e.d?(i=e.d)<o&&++r:i=null!=e.e?e.e+o:o),s=function(t,e,n,r,i){var o,a=6+i-r,s=kt(t,0,1+a).getUTCDay();return s<i&&(s+=7),{year:(o=1+a+7*(e-1)-s+(n=null!=n?1*n:i))>0?t:t-1,dayOfYear:o>0?o:Ct(t-1)+o}}(n,r,i,a,o),t._a[0]=s.year,t._dayOfYear=s.dayOfYear}(t),t._dayOfYear&&(i=jt(t._a[0],r[0]),t._dayOfYear>Ct(i)&&(c(t)._overflowDayOfYear=!0),n=kt(i,0,t._dayOfYear),t._a[1]=n.getUTCMonth(),t._a[2]=n.getUTCDate()),e=0;e<3&&null==t._a[e];++e)t._a[e]=o[e]=r[e];for(;e<7;e++)t._a[e]=o[e]=null==t._a[e]?2===e?1:0:t._a[e];24===t._a[3]&&0===t._a[4]&&0===t._a[5]&&0===t._a[6]&&(t._nextDay=!0,t._a[3]=0),t._d=(t._useUTC?kt:xt).apply(null,o),null!=t._tzm&&t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),t._nextDay&&(t._a[3]=24)}}function Tt(t){if(t._f!==n.ISO_8601){t._a=[],c(t).empty=!0;var e,r,i,o,a,s=""+t._i,l=s.length,u=0;for(i=U(t._f,t._locale).match(R)||[],e=0;e<i.length;e++)o=i[e],(r=(s.match(it(o,t))||[])[0])&&((a=s.substr(0,s.indexOf(r))).length>0&&c(t).unusedInput.push(a),s=s.slice(s.indexOf(r)+r.length),u+=r.length),L[o]?(r?c(t).empty=!1:c(t).unusedTokens.push(o),ct(o,r,t)):t._strict&&!r&&c(t).unusedTokens.push(o);c(t).charsLeftOver=l-u,s.length>0&&c(t).unusedInput.push(s),!0===c(t).bigHour&&t._a[3]<=12&&t._a[3]>0&&(c(t).bigHour=void 0),t._a[3]=function(t,e,n){var r;return null==n?e:null!=t.meridiemHour?t.meridiemHour(e,n):null!=t.isPM?((r=t.isPM(n))&&e<12&&(e+=12),r||12!==e||(e=0),e):e}(t._locale,t._a[3],t._meridiem),Ot(t),_t(t)}else $t(t)}function qt(t){var e=t._i,o=t._f;return t._locale=t._locale||S(t._l),null===e||void 0===o&&""===e?u({nullInput:!0}):("string"==typeof e&&(t._i=e=t._locale.preparse(e)),h(e)?new _(_t(e)):(r(o)?function(t){var e,n,r,i,o;if(0===t._f.length)return c(t).invalidFormat=!0,void(t._d=new Date(NaN));for(i=0;i<t._f.length;i++)o=0,e=p({},t),null!=t._useUTC&&(e._useUTC=t._useUTC),e._f=t._f[i],Tt(e),l(e)&&(o+=c(e).charsLeftOver,o+=10*c(e).unusedTokens.length,c(e).score=o,(null==r||o<r)&&(r=o,n=e));a(t,n||e)}(t):o?Tt(t):i(e)?t._d=e:function(t){var e=t._i;void 0===e?t._d=new Date:i(e)?t._d=new Date(+e):"string"==typeof e?function(t){var e=wt.exec(t._i);null===e?($t(t),!1===t._isValid&&(delete t._isValid,n.createFromInputFallback(t))):t._d=new Date(+e[1])}(t):r(e)?(t._a=function(t,e){var n,r=[];for(n=0;n<t.length;++n)r.push(e(t[n],n));return r}(e.slice(0),(function(t){return parseInt(t,10)})),Ot(t)):"object"==typeof e?function(t){if(!t._d){var e=O(t._i);t._a=[e.year,e.month,e.day||e.date,e.hour,e.minute,e.second,e.millisecond],Ot(t)}}(t):"number"==typeof e?t._d=new Date(e):n.createFromInputFallback(t)}(t),t))}function Pt(t,e,n,r,i){var o,a={};return"boolean"==typeof n&&(r=n,n=void 0),a._isAMomentObject=!0,a._useUTC=a._isUTC=i,a._l=n,a._i=t,a._f=e,a._strict=r,(o=new _(_t(qt(a))))._nextDay&&(o.add(1,"d"),o._nextDay=void 0),o}function Mt(t,e,n,r){return Pt(t,e,n,r,!1)}N("w",["ww",2],"wo","week"),N("W",["WW",2],"Wo","isoWeek"),E("week","w"),E("isoWeek","W"),rt("w",Y),rt("ww",Y,H),rt("W",Y),rt("WW",Y,H),st(["w","ww","W","WW"],(function(t,e,n,r){e[r.substr(0,1)]=g(t)})),N("DDD",["DDDD",3],"DDDo","dayOfYear"),E("dayOfYear","DDD"),rt("DDD",K),rt("DDDD",B),at(["DDD","DDDD"],(function(t,e,n){n._dayOfYear=g(t)})),n.ISO_8601=function(){};var It=mt("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",(function(){var t=Mt.apply(null,arguments);return t<this?this:t})),Rt=mt("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",(function(){var t=Mt.apply(null,arguments);return t>this?this:t}));function Dt(t,e){var n,i;if(1===e.length&&r(e[0])&&(e=e[0]),!e.length)return Mt();for(n=e[0],i=1;i<e.length;++i)e[i].isValid()&&!e[i][t](n)||(n=e[i]);return n}function zt(t){var e=O(t),n=e.year||0,r=e.quarter||0,i=e.month||0,o=e.week||0,a=e.day||0,s=e.hour||0,c=e.minute||0,l=e.second||0,u=e.millisecond||0;this._milliseconds=+u+1e3*l+6e4*c+36e5*s,this._days=+a+7*o,this._months=+i+3*r+12*n,this._data={},this._locale=S(),this._bubble()}function Lt(t){return t instanceof zt}function Nt(t,e){N(t,0,0,(function(){var t=this.utcOffset(),n="+";return t<0&&(t=-t,n="-"),n+I(~~(t/60),2)+e+I(~~t%60,2)}))}Nt("Z",":"),Nt("ZZ",""),rt("Z",tt),rt("ZZ",tt),at(["Z","ZZ"],(function(t,e,n){n._useUTC=!0,n._tzm=Ut(t)}));var Ft=/([\+\-]|\d\d)/gi;function Ut(t){var e=(t||"").match(tt)||[],n=((e[e.length-1]||[])+"").match(Ft)||["-",0,0],r=60*n[1]+g(n[2]);return"+"===n[0]?r:-r}function Vt(t,e){var r,o;return e._isUTC?(r=e.clone(),o=(h(t)||i(t)?+t:+Mt(t))-+r,r._d.setTime(+r._d+o),n.updateOffset(r,!1),r):Mt(t).local()}function Ht(t){return 15*-Math.round(t._d.getTimezoneOffset()/15)}function Bt(){return this._isUTC&&0===this._offset}n.updateOffset=function(){};var Wt=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,Gt=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/;function Yt(t,e){var n,r,i,a,s,c,l=t,u=null;return Lt(t)?l={ms:t._milliseconds,d:t._days,M:t._months}:"number"==typeof t?(l={},e?l[e]=t:l.milliseconds=t):(u=Wt.exec(t))?(n="-"===u[1]?-1:1,l={y:0,d:g(u[2])*n,h:g(u[3])*n,m:g(u[4])*n,s:g(u[5])*n,ms:g(u[6])*n}):(u=Gt.exec(t))?(n="-"===u[1]?-1:1,l={y:Kt(u[2],n),M:Kt(u[3],n),d:Kt(u[4],n),h:Kt(u[5],n),m:Kt(u[6],n),s:Kt(u[7],n),w:Kt(u[8],n)}):null==l?l={}:"object"==typeof l&&("from"in l||"to"in l)&&(a=Mt(l.from),s=Vt(s=Mt(l.to),a),a.isBefore(s)?c=Jt(a,s):((c=Jt(s,a)).milliseconds=-c.milliseconds,c.months=-c.months),(l={}).ms=(i=c).milliseconds,l.M=i.months),r=new zt(l),Lt(t)&&o(t,"_locale")&&(r._locale=t._locale),r}function Kt(t,e){var n=t&&parseFloat(t.replace(",","."));return(isNaN(n)?0:n)*e}function Jt(t,e){var n={milliseconds:0,months:0};return n.months=e.month()-t.month()+12*(e.year()-t.year()),t.clone().add(n.months,"M").isAfter(e)&&--n.months,n.milliseconds=+e-+t.clone().add(n.months,"M"),n}function Qt(t,e){return function(n,r){var i;return null===r||isNaN(+r)||(function(t,e){gt[t]||(ht(e),gt[t]=!0)}(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period)."),i=n,n=r,r=i),Xt(this,Yt(n="string"==typeof n?+n:n,r),t),this}}function Xt(t,e,r,i){var o=e._milliseconds,a=e._days,s=e._months;i=null==i||i,o&&t._d.setTime(+t._d+o*r),a&&P(t,"Date",q(t,"Date")+a*r),s&&pt(t,q(t,"Month")+s*r),i&&n.updateOffset(t,a||s)}Yt.fn=zt.prototype;var Zt=Qt(1,"add"),te=Qt(-1,"subtract");function ee(){var t=this.clone().utc();return 0<t.year()&&t.year()<=9999?"function"==typeof Date.prototype.toISOString?this.toDate().toISOString():F(t,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):F(t,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}function ne(t){var e;return void 0===t?this._locale._abbr:(null!=(e=S(t))&&(this._locale=e),this)}n.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";var re=mt("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",(function(t){return void 0===t?this.localeData():this.locale(t)}));function ie(){return this._locale}function oe(t,e){N(0,[t,t.length],0,e)}function ae(t,e,n){return Et(Mt([t,11,31+e-n]),e,n).week}N(0,["gg",2],0,(function(){return this.weekYear()%100})),N(0,["GG",2],0,(function(){return this.isoWeekYear()%100})),oe("gggg","weekYear"),oe("ggggg","weekYear"),oe("GGGG","isoWeekYear"),oe("GGGGG","isoWeekYear"),E("weekYear","gg"),E("isoWeekYear","GG"),rt("G",Z),rt("g",Z),rt("GG",Y,H),rt("gg",Y,H),rt("GGGG",J,W),rt("gggg",J,W),rt("GGGGG",Q,G),rt("ggggg",Q,G),st(["gggg","ggggg","GGGG","GGGGG"],(function(t,e,n,r){e[r.substr(0,2)]=g(t)})),st(["gg","GG"],(function(t,e,r,i){e[i]=n.parseTwoDigitYear(t)})),N("Q",0,0,"quarter"),E("quarter","Q"),rt("Q",V),at("Q",(function(t,e){e[1]=3*(g(t)-1)})),N("D",["DD",2],"Do","date"),E("date","D"),rt("D",Y),rt("DD",Y,H),rt("Do",(function(t,e){return t?e._ordinalParse:e._ordinalParseLenient})),at(["D","DD"],2),at("Do",(function(t,e){e[2]=g(t.match(Y)[0])}));var se=T("Date",!0);N("d",0,"do","day"),N("dd",0,0,(function(t){return this.localeData().weekdaysMin(this,t)})),N("ddd",0,0,(function(t){return this.localeData().weekdaysShort(this,t)})),N("dddd",0,0,(function(t){return this.localeData().weekdays(this,t)})),N("e",0,0,"weekday"),N("E",0,0,"isoWeekday"),E("day","d"),E("weekday","e"),E("isoWeekday","E"),rt("d",Y),rt("e",Y),rt("E",Y),rt("dd",et),rt("ddd",et),rt("dddd",et),st(["dd","ddd","dddd"],(function(t,e,n){var r=n._locale.weekdaysParse(t);null!=r?e.d=r:c(n).invalidWeekday=t})),st(["d","e","E"],(function(t,e,n,r){e[r]=g(t)}));var ce="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),le="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),ue="Su_Mo_Tu_We_Th_Fr_Sa".split("_");function de(t,e){N(t,0,0,(function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)}))}function pe(t,e){return e._meridiemParse}N("H",["HH",2],0,"hour"),N("h",["hh",2],0,(function(){return this.hours()%12||12})),de("a",!0),de("A",!1),E("hour","h"),rt("a",pe),rt("A",pe),rt("H",Y),rt("h",Y),rt("HH",Y,H),rt("hh",Y,H),at(["H","HH"],3),at(["a","A"],(function(t,e,n){n._isPm=n._locale.isPM(t),n._meridiem=t})),at(["h","hh"],(function(t,e,n){e[3]=g(t),c(n).bigHour=!0}));var fe=T("Hours",!0);N("m",["mm",2],0,"minute"),E("minute","m"),rt("m",Y),rt("mm",Y,H),at(["m","mm"],4);var _e=T("Minutes",!1);N("s",["ss",2],0,"second"),E("second","s"),rt("s",Y),rt("ss",Y,H),at(["s","ss"],5);var he,me=T("Seconds",!1);for(N("S",0,0,(function(){return~~(this.millisecond()/100)})),N(0,["SS",2],0,(function(){return~~(this.millisecond()/10)})),N(0,["SSS",3],0,"millisecond"),N(0,["SSSS",4],0,(function(){return 10*this.millisecond()})),N(0,["SSSSS",5],0,(function(){return 100*this.millisecond()})),N(0,["SSSSSS",6],0,(function(){return 1e3*this.millisecond()})),N(0,["SSSSSSS",7],0,(function(){return 1e4*this.millisecond()})),N(0,["SSSSSSSS",8],0,(function(){return 1e5*this.millisecond()})),N(0,["SSSSSSSSS",9],0,(function(){return 1e6*this.millisecond()})),E("millisecond","ms"),rt("S",K,V),rt("SS",K,H),rt("SSS",K,B),he="SSSS";he.length<=9;he+="S")rt(he,X);function ge(t,e){e[6]=g(1e3*("0."+t))}for(he="S";he.length<=9;he+="S")at(he,ge);var ve=T("Milliseconds",!1);N("z",0,0,"zoneAbbr"),N("zz",0,0,"zoneName");var be=_.prototype;be.add=Zt,be.calendar=function(t,e){var n=t||Mt(),r=Vt(n,this).startOf("day"),i=this.diff(r,"days",!0),o=i<-6?"sameElse":i<-1?"lastWeek":i<0?"lastDay":i<1?"sameDay":i<2?"nextDay":i<7?"nextWeek":"sameElse";return this.format(e&&e[o]||this.localeData().calendar(o,this,Mt(n)))},be.clone=function(){return new _(this)},be.diff=function(t,e,n){var r,i,o,a,s,c,l,u=Vt(t,this),d=6e4*(u.utcOffset()-this.utcOffset());return"year"===(e=j(e))||"month"===e||"quarter"===e?(o=this,c=12*((a=u).year()-o.year())+(a.month()-o.month()),l=o.clone().add(c,"months"),s=a-l<0?(a-l)/(l-o.clone().add(c-1,"months")):(a-l)/(o.clone().add(c+1,"months")-l),i=-(c+s),"quarter"===e?i/=3:"year"===e&&(i/=12)):(r=this-u,i="second"===e?r/1e3:"minute"===e?r/6e4:"hour"===e?r/36e5:"day"===e?(r-d)/864e5:"week"===e?(r-d)/6048e5:r),n?i:m(i)},be.endOf=function(t){return void 0===(t=j(t))||"millisecond"===t?this:this.startOf(t).add(1,"isoWeek"===t?"week":t).subtract(1,"ms")},be.format=function(t){var e=F(this,t||n.defaultFormat);return this.localeData().postformat(e)},be.from=function(t,e){return this.isValid()?Yt({to:this,from:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()},be.fromNow=function(t){return this.from(Mt(),t)},be.to=function(t,e){return this.isValid()?Yt({from:this,to:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()},be.toNow=function(t){return this.to(Mt(),t)},be.get=M,be.invalidAt=function(){return c(this).overflow},be.isAfter=function(t,e){return"millisecond"===(e=j(void 0!==e?e:"millisecond"))?+this>+(t=h(t)?t:Mt(t)):(h(t)?+t:+Mt(t))<+this.clone().startOf(e)},be.isBefore=function(t,e){var n;return"millisecond"===(e=j(void 0!==e?e:"millisecond"))?+this<+(t=h(t)?t:Mt(t)):(n=h(t)?+t:+Mt(t),+this.clone().endOf(e)<n)},be.isBetween=function(t,e,n){return this.isAfter(t,n)&&this.isBefore(e,n)},be.isSame=function(t,e){var n;return"millisecond"===(e=j(e||"millisecond"))?+this==+(t=h(t)?t:Mt(t)):(n=+Mt(t),+this.clone().startOf(e)<=n&&n<=+this.clone().endOf(e))},be.isValid=function(){return l(this)},be.lang=re,be.locale=ne,be.localeData=ie,be.max=Rt,be.min=It,be.parsingFlags=function(){return a({},c(this))},be.set=M,be.startOf=function(t){switch(t=j(t)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===t&&this.weekday(0),"isoWeek"===t&&this.isoWeekday(1),"quarter"===t&&this.month(3*Math.floor(this.month()/3)),this},be.subtract=te,be.toArray=function(){var t=this;return[t.year(),t.month(),t.date(),t.hour(),t.minute(),t.second(),t.millisecond()]},be.toObject=function(){var t=this;return{years:t.year(),months:t.month(),date:t.date(),hours:t.hours(),minutes:t.minutes(),seconds:t.seconds(),milliseconds:t.milliseconds()}},be.toDate=function(){return this._offset?new Date(+this):this._d},be.toISOString=ee,be.toJSON=ee,be.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},be.unix=function(){return Math.floor(+this/1e3)},be.valueOf=function(){return+this._d-6e4*(this._offset||0)},be.year=At,be.isLeapYear=function(){return St(this.year())},be.weekYear=function(t){var e=Et(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return null==t?e:this.add(t-e,"y")},be.isoWeekYear=function(t){var e=Et(this,1,4).year;return null==t?e:this.add(t-e,"y")},be.quarter=be.quarters=function(t){return null==t?Math.ceil((this.month()+1)/3):this.month(3*(t-1)+this.month()%3)},be.month=ft,be.daysInMonth=function(){return lt(this.year(),this.month())},be.week=be.weeks=function(t){var e=this.localeData().week(this);return null==t?e:this.add(7*(t-e),"d")},be.isoWeek=be.isoWeeks=function(t){var e=Et(this,1,4).week;return null==t?e:this.add(7*(t-e),"d")},be.weeksInYear=function(){var t=this.localeData()._week;return ae(this.year(),t.dow,t.doy)},be.isoWeeksInYear=function(){return ae(this.year(),1,4)},be.date=se,be.day=be.days=function(t){var e=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=t?(t=function(t,e){return"string"!=typeof t?t:isNaN(t)?"number"==typeof(t=e.weekdaysParse(t))?t:null:parseInt(t,10)}(t,this.localeData()),this.add(t-e,"d")):e},be.weekday=function(t){var e=(this.day()+7-this.localeData()._week.dow)%7;return null==t?e:this.add(t-e,"d")},be.isoWeekday=function(t){return null==t?this.day()||7:this.day(this.day()%7?t:t-7)},be.dayOfYear=function(t){var e=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==t?e:this.add(t-e,"d")},be.hour=be.hours=fe,be.minute=be.minutes=_e,be.second=be.seconds=me,be.millisecond=be.milliseconds=ve,be.utcOffset=function(t,e){var r,i=this._offset||0;return null!=t?("string"==typeof t&&(t=Ut(t)),Math.abs(t)<16&&(t*=60),!this._isUTC&&e&&(r=Ht(this)),this._offset=t,this._isUTC=!0,null!=r&&this.add(r,"m"),i!==t&&(!e||this._changeInProgress?Xt(this,Yt(t-i,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,n.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?i:Ht(this)},be.utc=function(t){return this.utcOffset(0,t)},be.local=function(t){return this._isUTC&&(this.utcOffset(0,t),this._isUTC=!1,t&&this.subtract(Ht(this),"m")),this},be.parseZone=function(){return this._tzm?this.utcOffset(this._tzm):"string"==typeof this._i&&this.utcOffset(Ut(this._i)),this},be.hasAlignedHourOffset=function(t){return t=t?Mt(t).utcOffset():0,(this.utcOffset()-t)%60==0},be.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},be.isDSTShifted=function(){if(void 0!==this._isDSTShifted)return this._isDSTShifted;var t={};if(p(t,this),(t=qt(t))._a){var e=t._isUTC?s(t._a):Mt(t._a);this._isDSTShifted=this.isValid()&&v(t._a,e.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted},be.isLocal=function(){return!this._isUTC},be.isUtcOffset=function(){return this._isUTC},be.isUtc=Bt,be.isUTC=Bt,be.zoneAbbr=function(){return this._isUTC?"UTC":""},be.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""},be.dates=mt("dates accessor is deprecated. Use date instead.",se),be.months=mt("months accessor is deprecated. Use month instead",ft),be.years=mt("years accessor is deprecated. Use year instead",At),be.zone=mt("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779",(function(t,e){return null!=t?("string"!=typeof t&&(t=-t),this.utcOffset(t,e),this):-this.utcOffset()}));var ye=be;function we(t){return t}var $e=b.prototype;function xe(t,e,n,r){var i=S(),o=s().set(r,e);return i[n](o,t)}function ke(t,e,n,r,i){if("number"==typeof t&&(e=t,t=void 0),t=t||"",null!=e)return xe(t,e,n,i);var o,a=[];for(o=0;o<r;o++)a[o]=xe(t,o,n,i);return a}$e._calendar={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},$e.calendar=function(t,e,n){var r=this._calendar[t];return"function"==typeof r?r.call(e,n):r},$e._longDateFormat={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},$e.longDateFormat=function(t){var e=this._longDateFormat[t],n=this._longDateFormat[t.toUpperCase()];return e||!n?e:(this._longDateFormat[t]=n.replace(/MMMM|MM|DD|dddd/g,(function(t){return t.slice(1)})),this._longDateFormat[t])},$e._invalidDate="Invalid date",$e.invalidDate=function(){return this._invalidDate},$e._ordinal="%d",$e.ordinal=function(t){return this._ordinal.replace("%d",t)},$e._ordinalParse=/\d{1,2}/,$e.preparse=we,$e.postformat=we,$e._relativeTime={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},$e.relativeTime=function(t,e,n,r){var i=this._relativeTime[n];return"function"==typeof i?i(t,e,n,r):i.replace(/%d/i,t)},$e.pastFuture=function(t,e){var n=this._relativeTime[t>0?"future":"past"];return"function"==typeof n?n(e):n.replace(/%s/i,e)},$e.set=function(t){var e,n;for(n in t)"function"==typeof(e=t[n])?this[n]=e:this["_"+n]=e;this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)},$e.months=function(t){return this._months[t.month()]},$e._months=ut,$e.monthsShort=function(t){return this._monthsShort[t.month()]},$e._monthsShort=dt,$e.monthsParse=function(t,e,n){var r,i,o;for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),r=0;r<12;r++){if(i=s([2e3,r]),n&&!this._longMonthsParse[r]&&(this._longMonthsParse[r]=new RegExp("^"+this.months(i,"").replace(".","")+"$","i"),this._shortMonthsParse[r]=new RegExp("^"+this.monthsShort(i,"").replace(".","")+"$","i")),n||this._monthsParse[r]||(o="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[r]=new RegExp(o.replace(".",""),"i")),n&&"MMMM"===e&&this._longMonthsParse[r].test(t))return r;if(n&&"MMM"===e&&this._shortMonthsParse[r].test(t))return r;if(!n&&this._monthsParse[r].test(t))return r}},$e.week=function(t){return Et(t,this._week.dow,this._week.doy).week},$e._week={dow:0,doy:6},$e.firstDayOfYear=function(){return this._week.doy},$e.firstDayOfWeek=function(){return this._week.dow},$e.weekdays=function(t){return this._weekdays[t.day()]},$e._weekdays=ce,$e.weekdaysMin=function(t){return this._weekdaysMin[t.day()]},$e._weekdaysMin=ue,$e.weekdaysShort=function(t){return this._weekdaysShort[t.day()]},$e._weekdaysShort=le,$e.weekdaysParse=function(t){var e,n,r;for(this._weekdaysParse=this._weekdaysParse||[],e=0;e<7;e++)if(this._weekdaysParse[e]||(n=Mt([2e3,1]).day(e),r="^"+this.weekdays(n,"")+"|^"+this.weekdaysShort(n,"")+"|^"+this.weekdaysMin(n,""),this._weekdaysParse[e]=new RegExp(r.replace(".",""),"i")),this._weekdaysParse[e].test(t))return e},$e.isPM=function(t){return"p"===(t+"").toLowerCase().charAt(0)},$e._meridiemParse=/[ap]\.?m?\.?/i,$e.meridiem=function(t,e,n){return t>11?n?"pm":"PM":n?"am":"AM"},k("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var e=t%10;return t+(1===g(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th")}}),n.lang=mt("moment.lang is deprecated. Use moment.locale instead.",k),n.langData=mt("moment.langData is deprecated. Use moment.localeData instead.",S);var Ce=Math.abs;function Se(t,e,n,r){var i=Yt(e,n);return t._milliseconds+=r*i._milliseconds,t._days+=r*i._days,t._months+=r*i._months,t._bubble()}function Ae(t){return t<0?Math.floor(t):Math.ceil(t)}function Ee(t){return 4800*t/146097}function je(t){return 146097*t/4800}function Oe(t){return function(){return this.as(t)}}var Te=Oe("ms"),qe=Oe("s"),Pe=Oe("m"),Me=Oe("h"),Ie=Oe("d"),Re=Oe("w"),De=Oe("M"),ze=Oe("y");function Le(t){return function(){return this._data[t]}}var Ne=Le("milliseconds"),Fe=Le("seconds"),Ue=Le("minutes"),Ve=Le("hours"),He=Le("days"),Be=Le("months"),We=Le("years"),Ge=Math.round,Ye={s:45,m:45,h:22,d:26,M:11};function Ke(t,e,n,r,i){return i.relativeTime(e||1,!!n,t,r)}var Je=Math.abs;function Qe(){var t,e,n=Je(this._milliseconds)/1e3,r=Je(this._days),i=Je(this._months);t=m(n/60),e=m(t/60),n%=60,t%=60;var o=m(i/12),a=i%=12,s=r,c=e,l=t,u=n,d=this.asSeconds();return d?(d<0?"-":"")+"P"+(o?o+"Y":"")+(a?a+"M":"")+(s?s+"D":"")+(c||l||u?"T":"")+(c?c+"H":"")+(l?l+"M":"")+(u?u+"S":""):"P0D"}var Xe=zt.prototype;return Xe.abs=function(){var t=this._data;return this._milliseconds=Ce(this._milliseconds),this._days=Ce(this._days),this._months=Ce(this._months),t.milliseconds=Ce(t.milliseconds),t.seconds=Ce(t.seconds),t.minutes=Ce(t.minutes),t.hours=Ce(t.hours),t.months=Ce(t.months),t.years=Ce(t.years),this},Xe.add=function(t,e){return Se(this,t,e,1)},Xe.subtract=function(t,e){return Se(this,t,e,-1)},Xe.as=function(t){var e,n,r=this._milliseconds;if("month"===(t=j(t))||"year"===t)return e=this._days+r/864e5,n=this._months+Ee(e),"month"===t?n:n/12;switch(e=this._days+Math.round(je(this._months)),t){case"week":return e/7+r/6048e5;case"day":return e+r/864e5;case"hour":return 24*e+r/36e5;case"minute":return 1440*e+r/6e4;case"second":return 86400*e+r/1e3;case"millisecond":return Math.floor(864e5*e)+r;default:throw new Error("Unknown unit "+t)}},Xe.asMilliseconds=Te,Xe.asSeconds=qe,Xe.asMinutes=Pe,Xe.asHours=Me,Xe.asDays=Ie,Xe.asWeeks=Re,Xe.asMonths=De,Xe.asYears=ze,Xe.valueOf=function(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*g(this._months/12)},Xe._bubble=function(){var t,e,n,r,i,o=this._milliseconds,a=this._days,s=this._months,c=this._data;return o>=0&&a>=0&&s>=0||o<=0&&a<=0&&s<=0||(o+=864e5*Ae(je(s)+a),a=0,s=0),c.milliseconds=o%1e3,t=m(o/1e3),c.seconds=t%60,e=m(t/60),c.minutes=e%60,n=m(e/60),c.hours=n%24,a+=m(n/24),s+=i=m(Ee(a)),a-=Ae(je(i)),r=m(s/12),s%=12,c.days=a,c.months=s,c.years=r,this},Xe.get=function(t){return this[(t=j(t))+"s"]()},Xe.milliseconds=Ne,Xe.seconds=Fe,Xe.minutes=Ue,Xe.hours=Ve,Xe.days=He,Xe.weeks=function(){return m(this.days()/7)},Xe.months=Be,Xe.years=We,Xe.humanize=function(t){var e=this.localeData(),n=function(t,e,n){var r=Yt(t).abs(),i=Ge(r.as("s")),o=Ge(r.as("m")),a=Ge(r.as("h")),s=Ge(r.as("d")),c=Ge(r.as("M")),l=Ge(r.as("y")),u=i<Ye.s&&["s",i]||1===o&&["m"]||o<Ye.m&&["mm",o]||1===a&&["h"]||a<Ye.h&&["hh",a]||1===s&&["d"]||s<Ye.d&&["dd",s]||1===c&&["M"]||c<Ye.M&&["MM",c]||1===l&&["y"]||["yy",l];return u[2]=e,u[3]=+t>0,u[4]=n,Ke.apply(null,u)}(this,!t,e);return t&&(n=e.pastFuture(+this,n)),e.postformat(n)},Xe.toISOString=Qe,Xe.toString=Qe,Xe.toJSON=Qe,Xe.locale=ne,Xe.localeData=ie,Xe.toIsoString=mt("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Qe),Xe.lang=re,N("X",0,0,"unix"),N("x",0,0,"valueOf"),rt("x",Z),rt("X",/[+-]?\d+(\.\d{1,3})?/),at("X",(function(t,e,n){n._d=new Date(1e3*parseFloat(t,10))})),at("x",(function(t,e,n){n._d=new Date(g(t))})),n.version="2.10.6",e=Mt,n.fn=ye,n.min=function(){var t=[].slice.call(arguments,0);return Dt("isBefore",t)},n.max=function(){var t=[].slice.call(arguments,0);return Dt("isAfter",t)},n.utc=s,n.unix=function(t){return Mt(1e3*t)},n.months=function(t,e){return ke(t,e,"months",12,"month")},n.isDate=i,n.locale=k,n.invalid=u,n.duration=Yt,n.isMoment=h,n.weekdays=function(t,e){return ke(t,e,"weekdays",7,"day")},n.parseZone=function(){return Mt.apply(null,arguments).parseZone()},n.localeData=S,n.isDuration=Lt,n.monthsShort=function(t,e){return ke(t,e,"monthsShort",12,"month")},n.weekdaysMin=function(t,e){return ke(t,e,"weekdaysMin",7,"day")},n.defineLocale=C,n.weekdaysShort=function(t,e){return ke(t,e,"weekdaysShort",7,"day")},n.normalizeUnits=j,n.relativeTimeThreshold=function(t,e){return void 0!==Ye[t]&&(void 0===e?Ye[t]:(Ye[t]=e,!0))},n},"object"==typeof e&&void 0!==t?t.exports=r():"function"==typeof define&&define.amd?define(r):n.moment=r()},function(t,e,n){"use strict";e.errorObject={e:{}}},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},i=n(0),o=n(6),a=n(18),s=n(125),c=n(612),l=n(73),u=function(t){function e(e){t.call(this,e),this.destination=e}return r(e,t),e}(o.Subscriber);e.SubjectSubscriber=u;var d=function(t){function e(){t.call(this),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}return r(e,t),e.prototype[l.rxSubscriber]=function(){return new u(this)},e.prototype.lift=function(t){var e=new p(this,this);return e.operator=t,e},e.prototype.next=function(t){if(this.closed)throw new s.ObjectUnsubscribedError;if(!this.isStopped)for(var e=this.observers,n=e.length,r=e.slice(),i=0;i<n;i++)r[i].next(t)},e.prototype.error=function(t){if(this.closed)throw new s.ObjectUnsubscribedError;this.hasError=!0,this.thrownError=t,this.isStopped=!0;for(var e=this.observers,n=e.length,r=e.slice(),i=0;i<n;i++)r[i].error(t);this.observers.length=0},e.prototype.complete=function(){if(this.closed)throw new s.ObjectUnsubscribedError;this.isStopped=!0;for(var t=this.observers,e=t.length,n=t.slice(),r=0;r<e;r++)n[r].complete();this.observers.length=0},e.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},e.prototype._trySubscribe=function(e){if(this.closed)throw new s.ObjectUnsubscribedError;return t.prototype._trySubscribe.call(this,e)},e.prototype._subscribe=function(t){if(this.closed)throw new s.ObjectUnsubscribedError;return this.hasError?(t.error(this.thrownError),a.Subscription.EMPTY):this.isStopped?(t.complete(),a.Subscription.EMPTY):(this.observers.push(t),new c.SubjectSubscription(this,t))},e.prototype.asObservable=function(){var t=new i.Observable;return t.source=this,t},e.create=function(t,e){return new p(t,e)},e}(i.Observable);e.Subject=d;var p=function(t){function e(e,n){t.call(this),this.destination=e,this.source=n}return r(e,t),e.prototype.next=function(t){var e=this.destination;e&&e.next&&e.next(t)},e.prototype.error=function(t){var e=this.destination;e&&e.error&&this.destination.error(t)},e.prototype.complete=function(){var t=this.destination;t&&t.complete&&this.destination.complete()},e.prototype._subscribe=function(t){return this.source?this.source.subscribe(t):a.Subscription.EMPTY},e}(d);e.AnonymousSubject=p},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},i=n(47),o=n(0),a=n(6),s=n(18),c=n(613),l=function(t){function e(e,n){t.call(this),this.source=e,this.subjectFactory=n,this._refCount=0,this._isComplete=!1}return r(e,t),e.prototype._subscribe=function(t){return this.getSubject().subscribe(t)},e.prototype.getSubject=function(){var t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject},e.prototype.connect=function(){var t=this._connection;return t||(this._isComplete=!1,(t=this._connection=new s.Subscription).add(this.source.subscribe(new d(this.getSubject(),this))),t.closed?(this._connection=null,t=s.Subscription.EMPTY):this._connection=t),t},e.prototype.refCount=function(){return c.refCount()(this)},e}(o.Observable);e.ConnectableObservable=l;var u=l.prototype;e.connectableObservableDescriptor={operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:u._subscribe},_isComplete:{value:u._isComplete,writable:!0},getSubject:{value:u.getSubject},connect:{value:u.connect},refCount:{value:u.refCount}};var d=function(t){function e(e,n){t.call(this,e),this.connectable=n}return r(e,t),e.prototype._error=function(e){this._unsubscribe(),t.prototype._error.call(this,e)},e.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){var t=this.connectable;if(t){this.connectable=null;var e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}},e}(i.SubjectSubscriber),p=(function(){function t(t){this.connectable=t}t.prototype.call=function(t,e){var n=this.connectable;n._refCount++;var r=new p(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i}}(),function(t){function e(e,n){t.call(this,e),this.connectable=n}return r(e,t),e.prototype._unsubscribe=function(){var t=this.connectable;if(t){this.connectable=null;var e=t._refCount;if(e<=0)this.connection=null;else if(t._refCount=e-1,e>1)this.connection=null;else{var n=this.connection,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}else this.connection=null},e}(a.Subscriber))},,,,,,,,,,,function(t,e,n){n(69),t.exports=angular},,,,,,,,,,function(t,e){!function(t){"use strict";var e={objectMaxDepth:5};function n(t){if(!N(t))return e;L(t.objectMaxDepth)&&(e.objectMaxDepth=r(t.objectMaxDepth)?t.objectMaxDepth:NaN)}function r(t){return V(t)&&t>0}function i(t,n){return n=n||Error,function(){var r,i,o=arguments[0],a=arguments[1],s="["+(t?t+":":"")+o+"] ",c=pt(arguments,2).map((function(t){return Ht(t,e.objectMaxDepth)}));for(s+=a.replace(/\{\d+\}/g,(function(t){var e=+t.slice(1,-1);return e<c.length?c[e]:t})),s+="\nhttp://errors.angularjs.org/1.6.6/"+(t?t+"/":"")+o,i=0,r="?";i<c.length;i++,r="&")s+=r+"p"+i+"="+encodeURIComponent(c[i]);return new n(s)}}var o=/^\/(.+)\/([a-z]*)$/,a="validity",s=Object.prototype.hasOwnProperty,c=function(t){return U(t)?t.toLowerCase():t},l=function(t){return U(t)?t.toUpperCase():t};"i"!=="I".toLowerCase()&&(c=function(t){return U(t)?t.replace(/[A-Z]/g,(function(t){return String.fromCharCode(32|t.charCodeAt(0))})):t},l=function(t){return U(t)?t.replace(/[a-z]/g,(function(t){return String.fromCharCode(-33&t.charCodeAt(0))})):t});var u,d,p,f,_=[].slice,h=[].splice,m=[].push,g=Object.prototype.toString,v=Object.getPrototypeOf,b=i("ng"),y=t.angular||(t.angular={}),w=0;function $(t){if(null==t||K(t))return!1;if(B(t)||U(t)||d&&t instanceof d)return!0;var e="length"in Object(t)&&t.length;return V(e)&&(e>=0&&(e-1 in t||t instanceof Array)||"function"==typeof t.item)}function x(t,e,n){var r,i;if(t)if(G(t))for(r in t)"prototype"!==r&&"length"!==r&&"name"!==r&&t.hasOwnProperty(r)&&e.call(n,t[r],r,t);else if(B(t)||$(t)){var o="object"!=typeof t;for(r=0,i=t.length;r<i;r++)(o||r in t)&&e.call(n,t[r],r,t)}else if(t.forEach&&t.forEach!==x)t.forEach(e,n,t);else if(F(t))for(r in t)e.call(n,t[r],r,t);else if("function"==typeof t.hasOwnProperty)for(r in t)t.hasOwnProperty(r)&&e.call(n,t[r],r,t);else for(r in t)s.call(t,r)&&e.call(n,t[r],r,t);return t}function k(t,e,n){for(var r=Object.keys(t).sort(),i=0;i<r.length;i++)e.call(n,t[r[i]],r[i]);return r}function C(t){return function(e,n){t(n,e)}}function S(){return++w}function A(t,e){e?t.$$hashKey=e:delete t.$$hashKey}function E(t,e,n){for(var r=t.$$hashKey,i=0,o=e.length;i<o;++i){var a=e[i];if(N(a)||G(a))for(var s=Object.keys(a),c=0,l=s.length;c<l;c++){var u=s[c],d=a[u];n&&N(d)?H(d)?t[u]=new Date(d.valueOf()):Y(d)?t[u]=new RegExp(d):d.nodeName?t[u]=d.cloneNode(!0):nt(d)?t[u]=d.clone():(N(t[u])||(t[u]=B(d)?[]:{}),E(t[u],[d],!0)):t[u]=d}}return A(t,r),t}function j(t){return E(t,_.call(arguments,1),!1)}function O(t){return E(t,_.call(arguments,1),!0)}function T(t){return parseInt(t,10)}u=t.document.documentMode;var q=Number.isNaN||function(t){return t!=t};function P(t,e){return j(Object.create(t),e)}function M(){}function I(t){return t}function R(t){return function(){return t}}function D(t){return G(t.toString)&&t.toString!==g}function z(t){return void 0===t}function L(t){return void 0!==t}function N(t){return null!==t&&"object"==typeof t}function F(t){return null!==t&&"object"==typeof t&&!v(t)}function U(t){return"string"==typeof t}function V(t){return"number"==typeof t}function H(t){return"[object Date]"===g.call(t)}M.$inject=[],I.$inject=[];var B=Array.isArray;function W(t){switch(g.call(t)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return t instanceof Error}}function G(t){return"function"==typeof t}function Y(t){return"[object RegExp]"===g.call(t)}function K(t){return t&&t.window===t}function J(t){return t&&t.$evalAsync&&t.$watch}function Q(t){return"boolean"==typeof t}function X(t){return t&&G(t.then)}var Z=/^\[object (?:Uint8|Uint8Clamped|Uint16|Uint32|Int8|Int16|Int32|Float32|Float64)Array]$/;var tt=function(t){return U(t)?t.trim():t},et=function(t){return t.replace(/([-()[\]{}+?*.$^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")};function nt(t){return!(!t||!(t.nodeName||t.prop&&t.attr&&t.find))}function rt(t){return c(t.nodeName||t[0]&&t[0].nodeName)}function it(t,e){return-1!==Array.prototype.indexOf.call(t,e)}function ot(t,e){var n=t.indexOf(e);return n>=0&&t.splice(n,1),n}function at(t,e,n){var i,o=[],a=[];if(n=r(n)?n:NaN,e){if(function(t){return t&&V(t.length)&&Z.test(g.call(t))}(e)||(i=e,"[object ArrayBuffer]"===g.call(i)))throw b("cpta","Can't copy! TypedArray destination cannot be mutated.");if(t===e)throw b("cpi","Can't copy! Source and destination are identical.");return B(e)?e.length=0:x(e,(function(t,n){"$$hashKey"!==n&&delete e[n]})),o.push(t),a.push(e),c(t,e,n)}return l(t,n);function c(t,e,n){if(--n<0)return"...";var r,i=e.$$hashKey;if(B(t))for(var o=0,a=t.length;o<a;o++)e.push(l(t[o],n));else if(F(t))for(r in t)e[r]=l(t[r],n);else if(t&&"function"==typeof t.hasOwnProperty)for(r in t)t.hasOwnProperty(r)&&(e[r]=l(t[r],n));else for(r in t)s.call(t,r)&&(e[r]=l(t[r],n));return A(e,i),e}function l(t,e){if(!N(t))return t;var n=o.indexOf(t);if(-1!==n)return a[n];if(K(t)||J(t))throw b("cpws","Can't copy! Making copies of Window or Scope instances is not supported.");var r=!1,i=function(t){switch(g.call(t)){case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Float32Array]":case"[object Float64Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return new t.constructor(l(t.buffer),t.byteOffset,t.length);case"[object ArrayBuffer]":if(!t.slice){var e=new ArrayBuffer(t.byteLength);return new Uint8Array(e).set(new Uint8Array(t)),e}return t.slice(0);case"[object Boolean]":case"[object Number]":case"[object String]":case"[object Date]":return new t.constructor(t.valueOf());case"[object RegExp]":var n=new RegExp(t.source,t.toString().match(/[^/]*$/)[0]);return n.lastIndex=t.lastIndex,n;case"[object Blob]":return new t.constructor([t],{type:t.type})}if(G(t.cloneNode))return t.cloneNode(!0)}(t);return void 0===i&&(i=B(t)?[]:Object.create(v(t)),r=!0),o.push(t),a.push(i),r?c(t,i,e):i}}function st(t,e){return t===e||t!=t&&e!=e}function ct(t,e){if(t===e)return!0;if(null===t||null===e)return!1;if(t!=t&&e!=e)return!0;var n,r,i,o=typeof t;if(o===typeof e&&"object"===o){if(!B(t)){if(H(t))return!!H(e)&&st(t.getTime(),e.getTime());if(Y(t))return!!Y(e)&&t.toString()===e.toString();if(J(t)||J(e)||K(t)||K(e)||B(e)||H(e)||Y(e))return!1;for(r in i=Nt(),t)if("$"!==r.charAt(0)&&!G(t[r])){if(!ct(t[r],e[r]))return!1;i[r]=!0}for(r in e)if(!(r in i)&&"$"!==r.charAt(0)&&L(e[r])&&!G(e[r]))return!1;return!0}if(!B(e))return!1;if((n=t.length)===e.length){for(r=0;r<n;r++)if(!ct(t[r],e[r]))return!1;return!0}}return!1}var lt=function(){if(!L(lt.rules)){var e=t.document.querySelector("[ng-csp]")||t.document.querySelector("[data-ng-csp]");if(e){var n=e.getAttribute("ng-csp")||e.getAttribute("data-ng-csp");lt.rules={noUnsafeEval:!n||-1!==n.indexOf("no-unsafe-eval"),noInlineStyle:!n||-1!==n.indexOf("no-inline-style")}}else lt.rules={noUnsafeEval:function(){try{return new Function(""),!1}catch(t){return!0}}(),noInlineStyle:!1}}return lt.rules},ut=function(){if(L(ut.name_))return ut.name_;var e,n,r,i,o=St.length;for(n=0;n<o;++n)if(r=St[n],e=t.document.querySelector("["+r.replace(":","\\:")+"jq]")){i=e.getAttribute(r+"jq");break}return ut.name_=i};function dt(t,e,n){return t.concat(_.call(e,n))}function pt(t,e){return _.call(t,e||0)}function ft(t,e){var n=arguments.length>2?pt(arguments,2):[];return!G(e)||e instanceof RegExp?e:n.length?function(){return arguments.length?e.apply(t,dt(n,arguments,0)):e.apply(t,n)}:function(){return arguments.length?e.apply(t,arguments):e.call(t)}}function _t(e,n){var r=n;return"string"==typeof e&&"$"===e.charAt(0)&&"$"===e.charAt(1)?r=void 0:K(n)?r="$WINDOW":n&&t.document===n?r="$DOCUMENT":J(n)&&(r="$SCOPE"),r}function ht(t,e){if(!z(t))return V(e)||(e=e?2:null),JSON.stringify(t,_t,e)}function mt(t){return U(t)?JSON.parse(t):t}var gt=/:/g;function vt(t,e){t=t.replace(gt,"");var n=Date.parse("Jan 01, 1970 00:00:00 "+t)/6e4;return q(n)?e:n}function bt(t,e,n){n=n?-1:1;var r=t.getTimezoneOffset();return function(t,e){return(t=new Date(t.getTime())).setMinutes(t.getMinutes()+e),t}(t,n*(vt(e,r)-r))}function yt(t){t=d(t).clone().empty();var e=d("<div>").append(t).html();try{return t[0].nodeType===Ut?c(e):e.match(/^(<[^>]+>)/)[1].replace(/^<([\w-]+)/,(function(t,e){return"<"+c(e)}))}catch(t){return c(e)}}function wt(t){try{return decodeURIComponent(t)}catch(t){}}function $t(t){var e={};return x((t||"").split("&"),(function(t){var n,r,i;t&&(r=t=t.replace(/\+/g,"%20"),-1!==(n=t.indexOf("="))&&(r=t.substring(0,n),i=t.substring(n+1)),L(r=wt(r))&&(i=!L(i)||wt(i),s.call(e,r)?B(e[r])?e[r].push(i):e[r]=[e[r],i]:e[r]=i))})),e}function xt(t){var e=[];return x(t,(function(t,n){B(t)?x(t,(function(t){e.push(Ct(n,!0)+(!0===t?"":"="+Ct(t,!0)))})):e.push(Ct(n,!0)+(!0===t?"":"="+Ct(t,!0)))})),e.length?e.join("&"):""}function kt(t){return Ct(t,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function Ct(t,e){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,e?"%20":"+")}var St=["ng-","data-ng-","ng:","x-ng-"];var At=function(e){var n=e.currentScript;if(!n)return!0;if(!(n instanceof t.HTMLScriptElement||n instanceof t.SVGScriptElement))return!1;var r=n.attributes;return[r.getNamedItem("src"),r.getNamedItem("href"),r.getNamedItem("xlink:href")].every((function(t){if(!t)return!0;if(!t.value)return!1;var n=e.createElement("a");if(n.href=t.value,e.location.origin===n.origin)return!0;switch(n.protocol){case"http:":case"https:":case"ftp:":case"blob:":case"file:":case"data:":return!0;default:return!1}}))}(t.document);function Et(e,n){var r,i,o={};if(x(St,(function(t){var n=t+"app";!r&&e.hasAttribute&&e.hasAttribute(n)&&(r=e,i=e.getAttribute(n))})),x(St,(function(t){var n,o=t+"app";!r&&(n=e.querySelector("["+o.replace(":","\\:")+"]"))&&(r=n,i=n.getAttribute(o))})),r){if(!At)return void t.console.error("Angular: disabling automatic bootstrap. <script> protocol indicates an extension, document.location.href does not match.");o.strictDi=null!==function(t,e){var n,r,i=St.length;for(r=0;r<i;++r)if(n=St[r]+e,U(n=t.getAttribute(n)))return n;return null}(r,"strict-di"),n(r,i?[i]:[],o)}}function jt(e,n,r){N(r)||(r={});r=j({strictDi:!1},r);var i=function(){if((e=d(e)).injector()){var i=e[0]===t.document?"document":yt(e);throw b("btstrpd","App already bootstrapped with this element '{0}'",i.replace(/</,"&lt;").replace(/>/,"&gt;"))}(n=n||[]).unshift(["$provide",function(t){t.value("$rootElement",e)}]),r.debugInfoEnabled&&n.push(["$compileProvider",function(t){t.debugInfoEnabled(!0)}]),n.unshift("ng");var o=We(n,r.strictDi);return o.invoke(["$rootScope","$rootElement","$compile","$injector",function(t,e,n,r){t.$apply((function(){e.data("$injector",r),n(e)(t)}))}]),o},o=/^NG_ENABLE_DEBUG_INFO!/,a=/^NG_DEFER_BOOTSTRAP!/;if(t&&o.test(t.name)&&(r.debugInfoEnabled=!0,t.name=t.name.replace(o,"")),t&&!a.test(t.name))return i();t.name=t.name.replace(a,""),y.resumeBootstrap=function(t){return x(t,(function(t){n.push(t)})),i()},G(y.resumeDeferredBootstrap)&&y.resumeDeferredBootstrap()}function Ot(){t.name="NG_ENABLE_DEBUG_INFO!"+t.name,t.location.reload()}function Tt(t){var e=y.element(t).injector();if(!e)throw b("test","no injector found for element argument to getTestability");return e.get("$$testability")}var qt=/[A-Z]/g;function Pt(t,e){return e=e||"_",t.replace(qt,(function(t,n){return(n?e:"")+t.toLowerCase()}))}var Mt=!1;function It(t,e,n){if(!t)throw b("areq","Argument '{0}' is {1}",e||"?",n||"required");return t}function Rt(t,e,n){return n&&B(t)&&(t=t[t.length-1]),It(G(t),e,"not a function, got "+(t&&"object"==typeof t?t.constructor.name||"Object":typeof t)),t}function Dt(t,e){if("hasOwnProperty"===t)throw b("badname","hasOwnProperty is not a valid {0} name",e)}function zt(t,e,n){if(!e)return t;for(var r,i=e.split("."),o=t,a=i.length,s=0;s<a;s++)r=i[s],t&&(t=(o=t)[r]);return!n&&G(t)?ft(o,t):t}function Lt(t){for(var e,n=t[0],r=t[t.length-1],i=1;n!==r&&(n=n.nextSibling);i++)(e||t[i]!==n)&&(e||(e=d(_.call(t,0,i))),e.push(n));return e||t}function Nt(){return Object.create(null)}function Ft(t){if(null==t)return"";switch(typeof t){case"string":break;case"number":t=""+t;break;default:t=!D(t)||B(t)||H(t)?ht(t):t.toString()}return t}var Ut=3;function Vt(t,e){if(B(t)){e=e||[];for(var n=0,r=t.length;n<r;n++)e[n]=t[n]}else if(N(t))for(var i in e=e||{},t)"$"===i.charAt(0)&&"$"===i.charAt(1)||(e[i]=t[i]);return e||t}function Ht(t,e){return"function"==typeof t?t.toString().replace(/ \{[\s\S]*$/,""):z(t)?"undefined":"string"!=typeof t?function(t,e){var n=[];return r(e)&&(t=y.copy(t,null,e)),JSON.stringify(t,(function(t,e){if(N(e=_t(t,e))){if(n.indexOf(e)>=0)return"...";n.push(e)}return e}))}(t,e):t}var Bt={full:"1.6.6",major:1,minor:6,dot:6,codeName:"interdimensional-cable"};le.expando="ng339";var Wt=le.cache={},Gt=1;le._data=function(t){return this.cache[t[this.expando]]||{}};var Yt=/-([a-z])/g,Kt=/^-ms-/,Jt={mouseleave:"mouseout",mouseenter:"mouseover"},Qt=i("jqLite");function Xt(t,e){return e.toUpperCase()}function Zt(t){return t.replace(Yt,Xt)}var te=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,ee=/<|&#?\w+;/,ne=/<([\w:-]+)/,re=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,ie={option:[1,'<select multiple="multiple">',"</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function oe(t){return!ee.test(t)}function ae(t){var e=t.nodeType;return 1===e||!e||9===e}function se(t,e){var n,r,i,o,a=e.createDocumentFragment(),s=[];if(oe(t))s.push(e.createTextNode(t));else{for(n=a.appendChild(e.createElement("div")),r=(ne.exec(t)||["",""])[1].toLowerCase(),i=ie[r]||ie._default,n.innerHTML=i[1]+t.replace(re,"<$1></$2>")+i[2],o=i[0];o--;)n=n.lastChild;s=dt(s,n.childNodes),(n=a.firstChild).textContent=""}return a.textContent="",a.innerHTML="",x(s,(function(t){a.appendChild(t)})),a}ie.optgroup=ie.option,ie.tbody=ie.tfoot=ie.colgroup=ie.caption=ie.thead,ie.th=ie.td;var ce=t.Node.prototype.contains||function(t){return!!(16&this.compareDocumentPosition(t))};function le(e){if(e instanceof le)return e;var n,r,i,o;if(U(e)&&(e=tt(e),n=!0),!(this instanceof le)){if(n&&"<"!==e.charAt(0))throw Qt("nosel","Looking up elements via selectors is not supported by jqLite! See: http://docs.angularjs.org/api/angular.element");return new le(e)}n?be(this,(r=e,i=i||t.document,(o=te.exec(r))?[i.createElement(o[1])]:(o=se(r,i))?o.childNodes:[])):G(e)?ke(e):be(this,e)}function ue(t){return t.cloneNode(!0)}function de(t,e){!e&&ae(t)&&d.cleanData([t]),t.querySelectorAll&&d.cleanData(t.querySelectorAll("*"))}function pe(t,e,n,r){if(L(r))throw Qt("offargs","jqLite#off() does not support the `selector` argument");var i=_e(t),o=i&&i.events,a=i&&i.handle;if(a)if(e){var s=function(e){var r=o[e];L(n)&&ot(r||[],n),L(n)&&r&&r.length>0||(t.removeEventListener(e,a),delete o[e])};x(e.split(" "),(function(t){s(t),Jt[t]&&s(Jt[t])}))}else for(e in o)"$destroy"!==e&&t.removeEventListener(e,a),delete o[e]}function fe(t,e){var n=t.ng339,r=n&&Wt[n];if(r){if(e)return void delete r.data[e];r.handle&&(r.events.$destroy&&r.handle({},"$destroy"),pe(t)),delete Wt[n],t.ng339=void 0}}function _e(t,e){var n=t.ng339,r=n&&Wt[n];return e&&!r&&(t.ng339=n=++Gt,r=Wt[n]={events:{},data:{},handle:void 0}),r}function he(t,e,n){if(ae(t)){var r,i=L(n),o=!i&&e&&!N(e),a=!e,s=_e(t,!o),c=s&&s.data;if(i)c[Zt(e)]=n;else{if(a)return c;if(o)return c&&c[Zt(e)];for(r in e)c[Zt(r)]=e[r]}}}function me(t,e){return!!t.getAttribute&&(" "+(t.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+e+" ")>-1}function ge(t,e){e&&t.setAttribute&&x(e.split(" "),(function(e){t.setAttribute("class",tt((" "+(t.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").replace(" "+tt(e)+" "," ")))}))}function ve(t,e){if(e&&t.setAttribute){var n=(" "+(t.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ");x(e.split(" "),(function(t){t=tt(t),-1===n.indexOf(" "+t+" ")&&(n+=t+" ")})),t.setAttribute("class",tt(n))}}function be(t,e){if(e)if(e.nodeType)t[t.length++]=e;else{var n=e.length;if("number"==typeof n&&e.window!==e){if(n)for(var r=0;r<n;r++)t[t.length++]=e[r]}else t[t.length++]=e}}function ye(t,e){return we(t,"$"+(e||"ngController")+"Controller")}function we(t,e,n){9===t.nodeType&&(t=t.documentElement);for(var r=B(e)?e:[e];t;){for(var i=0,o=r.length;i<o;i++)if(L(n=d.data(t,r[i])))return n;t=t.parentNode||11===t.nodeType&&t.host}}function $e(t){for(de(t,!0);t.firstChild;)t.removeChild(t.firstChild)}function xe(t,e){e||de(t);var n=t.parentNode;n&&n.removeChild(t)}function ke(e){function n(){t.document.removeEventListener("DOMContentLoaded",n),t.removeEventListener("load",n),e()}"complete"===t.document.readyState?t.setTimeout(e):(t.document.addEventListener("DOMContentLoaded",n),t.addEventListener("load",n))}var Ce=le.prototype={ready:ke,toString:function(){var t=[];return x(this,(function(e){t.push(""+e)})),"["+t.join(", ")+"]"},eq:function(t){return d(t>=0?this[t]:this[this.length+t])},length:0,push:m,sort:[].sort,splice:[].splice},Se={};x("multiple,selected,checked,disabled,readOnly,required,open".split(","),(function(t){Se[c(t)]=t}));var Ae={};x("input,select,option,textarea,button,form,details".split(","),(function(t){Ae[t]=!0}));var Ee={ngMinlength:"minlength",ngMaxlength:"maxlength",ngMin:"min",ngMax:"max",ngPattern:"pattern",ngStep:"step"};function je(t,e){var n=Se[e.toLowerCase()];return n&&Ae[rt(t)]&&n}function Oe(t,e,n){n.call(t,e)}function Te(t,e,n){var r=e.relatedTarget;r&&(r===t||ce.call(t,r))||n.call(t,e)}function qe(){this.$get=function(){return j(le,{hasClass:function(t,e){return t.attr&&(t=t[0]),me(t,e)},addClass:function(t,e){return t.attr&&(t=t[0]),ve(t,e)},removeClass:function(t,e){return t.attr&&(t=t[0]),ge(t,e)}})}}function Pe(t,e){var n=t&&t.$$hashKey;if(n)return"function"==typeof n&&(n=t.$$hashKey()),n;var r=typeof t;return n="function"===r||"object"===r&&null!==t?t.$$hashKey=r+":"+(e||S)():r+":"+t}x({data:he,removeData:fe,hasData:function(t){for(var e in Wt[t.ng339])return!0;return!1},cleanData:function(t){for(var e=0,n=t.length;e<n;e++)fe(t[e])}},(function(t,e){le[e]=t})),x({data:he,inheritedData:we,scope:function(t){return d.data(t,"$scope")||we(t.parentNode||t,["$isolateScope","$scope"])},isolateScope:function(t){return d.data(t,"$isolateScope")||d.data(t,"$isolateScopeNoTemplate")},controller:ye,injector:function(t){return we(t,"$injector")},removeAttr:function(t,e){t.removeAttribute(e)},hasClass:me,css:function(t,e,n){if(e=function(t){return Zt(t.replace(Kt,"ms-"))}(e),!L(n))return t.style[e];t.style[e]=n},attr:function(t,e,n){var r,i=t.nodeType;if(i!==Ut&&2!==i&&8!==i&&t.getAttribute){var o=c(e),a=Se[o];if(!L(n))return r=t.getAttribute(e),a&&null!==r&&(r=o),null===r?void 0:r;null===n||!1===n&&a?t.removeAttribute(e):t.setAttribute(e,a?o:n)}},prop:function(t,e,n){if(!L(n))return t[e];t[e]=n},text:function(){return t.$dv="",t;function t(t,e){if(z(e)){var n=t.nodeType;return 1===n||n===Ut?t.textContent:""}t.textContent=e}}(),val:function(t,e){if(z(e)){if(t.multiple&&"select"===rt(t)){var n=[];return x(t.options,(function(t){t.selected&&n.push(t.value||t.text)})),n}return t.value}t.value=e},html:function(t,e){if(z(e))return t.innerHTML;de(t,!0),t.innerHTML=e},empty:$e},(function(t,e){le.prototype[e]=function(e,n){var r,i,o=this.length;if(t!==$e&&z(2===t.length&&t!==me&&t!==ye?e:n)){if(N(e)){for(r=0;r<o;r++)if(t===he)t(this[r],e);else for(i in e)t(this[r],i,e[i]);return this}for(var a=t.$dv,s=z(a)?Math.min(o,1):o,c=0;c<s;c++){var l=t(this[c],e,n);a=a?a+l:l}return a}for(r=0;r<o;r++)t(this[r],e,n);return this}})),x({removeData:fe,on:function(t,e,n,r){if(L(r))throw Qt("onargs","jqLite#on() does not support the `selector` or `eventData` parameters");if(ae(t)){var i=_e(t,!0),o=i.events,a=i.handle;a||(a=i.handle=function(t,e){var n=function(n,r){n.isDefaultPrevented=function(){return n.defaultPrevented};var i=e[r||n.type],o=i?i.length:0;if(o){if(z(n.immediatePropagationStopped)){var a=n.stopImmediatePropagation;n.stopImmediatePropagation=function(){n.immediatePropagationStopped=!0,n.stopPropagation&&n.stopPropagation(),a&&a.call(n)}}n.isImmediatePropagationStopped=function(){return!0===n.immediatePropagationStopped};var s=i.specialHandlerWrapper||Oe;o>1&&(i=Vt(i));for(var c=0;c<o;c++)n.isImmediatePropagationStopped()||s(t,n,i[c])}};return n.elem=t,n}(t,o));for(var s=e.indexOf(" ")>=0?e.split(" "):[e],c=s.length,l=function(e,r,i){var s=o[e];s||((s=o[e]=[]).specialHandlerWrapper=r,"$destroy"===e||i||t.addEventListener(e,a)),s.push(n)};c--;)e=s[c],Jt[e]?(l(Jt[e],Te),l(e,void 0,!0)):l(e)}},off:pe,one:function(t,e,n){(t=d(t)).on(e,(function r(){t.off(e,n),t.off(e,r)})),t.on(e,n)},replaceWith:function(t,e){var n,r=t.parentNode;de(t),x(new le(e),(function(e){n?r.insertBefore(e,n.nextSibling):r.replaceChild(e,t),n=e}))},children:function(t){var e=[];return x(t.childNodes,(function(t){1===t.nodeType&&e.push(t)})),e},contents:function(t){return t.contentDocument||t.childNodes||[]},append:function(t,e){var n=t.nodeType;if(1===n||11===n)for(var r=0,i=(e=new le(e)).length;r<i;r++){var o=e[r];t.appendChild(o)}},prepend:function(t,e){if(1===t.nodeType){var n=t.firstChild;x(new le(e),(function(e){t.insertBefore(e,n)}))}},wrap:function(t,e){var n,r,i;n=t,r=d(e).eq(0).clone()[0],(i=n.parentNode)&&i.replaceChild(r,n),r.appendChild(n)},remove:xe,detach:function(t){xe(t,!0)},after:function(t,e){var n=t,r=t.parentNode;if(r)for(var i=0,o=(e=new le(e)).length;i<o;i++){var a=e[i];r.insertBefore(a,n.nextSibling),n=a}},addClass:ve,removeClass:ge,toggleClass:function(t,e,n){e&&x(e.split(" "),(function(e){var r=n;z(r)&&(r=!me(t,e)),(r?ve:ge)(t,e)}))},parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},next:function(t){return t.nextElementSibling},find:function(t,e){return t.getElementsByTagName?t.getElementsByTagName(e):[]},clone:ue,triggerHandler:function(t,e,n){var r,i,o,a=e.type||e,s=_e(t),c=s&&s.events,l=c&&c[a];l&&(r={preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return!0===this.defaultPrevented},stopImmediatePropagation:function(){this.immediatePropagationStopped=!0},isImmediatePropagationStopped:function(){return!0===this.immediatePropagationStopped},stopPropagation:M,type:a,target:t},e.type&&(r=j(r,e)),i=Vt(l),o=n?[r].concat(n):[r],x(i,(function(e){r.isImmediatePropagationStopped()||e.apply(t,o)})))}},(function(t,e){le.prototype[e]=function(e,n,r){for(var i,o=0,a=this.length;o<a;o++)z(i)?L(i=t(this[o],e,n,r))&&(i=d(i)):be(i,t(this[o],e,n,r));return L(i)?i:this}})),le.prototype.bind=le.prototype.on,le.prototype.unbind=le.prototype.off;var Me=Object.create(null);function Ie(){this._keys=[],this._values=[],this._lastKey=NaN,this._lastIndex=-1}Ie.prototype={_idx:function(t){return t===this._lastKey||(this._lastKey=t,this._lastIndex=this._keys.indexOf(t)),this._lastIndex},_transformKey:function(t){return q(t)?Me:t},get:function(t){t=this._transformKey(t);var e=this._idx(t);if(-1!==e)return this._values[e]},set:function(t,e){t=this._transformKey(t);var n=this._idx(t);-1===n&&(n=this._lastIndex=this._keys.length),this._keys[n]=t,this._values[n]=e},delete:function(t){t=this._transformKey(t);var e=this._idx(t);return-1!==e&&(this._keys.splice(e,1),this._values.splice(e,1),this._lastKey=NaN,this._lastIndex=-1,!0)}};var Re=Ie,De=[function(){this.$get=[function(){return Re}]}],ze=/^([^(]+?)=>/,Le=/^[^(]*\(\s*([^)]*)\)/m,Ne=/,/,Fe=/^\s*(_?)(\S+?)\1\s*$/,Ue=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,Ve=i("$injector");function He(t){return Function.prototype.toString.call(t)}function Be(t){var e=He(t).replace(Ue,"");return e.match(ze)||e.match(Le)}function We(t,e){e=!0===e;var n={},r="Provider",i=[],o=new Re,a={$provide:{provider:_(h),factory:_(g),service:_((function(t,e){return g(t,["$injector",function(t){return t.instantiate(e)}])})),value:_((function(t,e){return g(t,R(e),!1)})),constant:_((function(t,e){Dt(t,"constant"),a[t]=e,c[t]=e})),decorator:function(t,e){var n=s.get(t+r),i=n.$get;n.$get=function(){var t=d.invoke(i,n);return d.invoke(e,null,{$delegate:t})}}}},s=a.$injector=v(a,(function(t,e){throw y.isString(e)&&i.push(e),Ve("unpr","Unknown provider: {0}",i.join(" <- "))})),c={},l=v(c,(function(t,e){var n=s.get(t+r,e);return d.invoke(n.$get,n,void 0,t)})),d=l;a.$injectorProvider={$get:R(l)},d.modules=s.modules=Nt();var p=function t(e){It(z(e)||B(e),"modulesToLoad","not an array");var n,r=[];return x(e,(function(e){if(!o.get(e)){o.set(e,!0);try{U(e)?(n=f(e),d.modules[e]=n,r=r.concat(t(n.requires)).concat(n._runBlocks),i(n._invokeQueue),i(n._configBlocks)):G(e)||B(e)?r.push(s.invoke(e)):Rt(e,"module")}catch(t){throw B(e)&&(e=e[e.length-1]),t.message&&t.stack&&-1===t.stack.indexOf(t.message)&&(t=t.message+"\n"+t.stack),Ve("modulerr","Failed to instantiate module {0} due to:\n{1}",e,t.stack||t.message||t)}}function i(t){var e,n;for(e=0,n=t.length;e<n;e++){var r=t[e],i=s.get(r[0]);i[r[1]].apply(i,r[2])}}})),r}(t);return(d=l.get("$injector")).strictDi=e,x(p,(function(t){t&&d.invoke(t)})),d;function _(t){return function(e,n){if(!N(e))return t(e,n);x(e,C(t))}}function h(t,e){if(Dt(t,"service"),(G(e)||B(e))&&(e=s.instantiate(e)),!e.$get)throw Ve("pget","Provider '{0}' must define $get factory method.",t);return a[t+r]=e}function m(t,e){return function(){var n=d.invoke(e,this);if(z(n))throw Ve("undef","Provider '{0}' must return a value from $get factory method.",t);return n}}function g(t,e,n){return h(t,{$get:!1!==n?m(t,e):e})}function v(t,o){function s(e,r){if(t.hasOwnProperty(e)){if(t[e]===n)throw Ve("cdep","Circular dependency found: {0}",e+" <- "+i.join(" <- "));return t[e]}try{return i.unshift(e),t[e]=n,t[e]=o(e,r),t[e]}catch(r){throw t[e]===n&&delete t[e],r}finally{i.shift()}}function c(t,n,r){for(var i=[],o=We.$$annotate(t,e,r),a=0,c=o.length;a<c;a++){var l=o[a];if("string"!=typeof l)throw Ve("itkn","Incorrect injection token! Expected service name as string, got {0}",l);i.push(n&&n.hasOwnProperty(l)?n[l]:s(l,r))}return i}return{invoke:function(t,e,n,r){"string"==typeof n&&(r=n,n=null);var i=c(t,n,r);return B(t)&&(t=t[t.length-1]),function(t){if(u||"function"!=typeof t)return!1;var e=t.$$ngIsClass;return Q(e)||(e=t.$$ngIsClass=/^(?:class\b|constructor\()/.test(He(t))),e}(t)?(i.unshift(null),new(Function.prototype.bind.apply(t,i))):t.apply(e,i)},instantiate:function(t,e,n){var r=B(t)?t[t.length-1]:t,i=c(t,e,n);return i.unshift(null),new(Function.prototype.bind.apply(r,i))},get:s,annotate:We.$$annotate,has:function(e){return a.hasOwnProperty(e+r)||t.hasOwnProperty(e)}}}}function Ge(){var e=!0;this.disableAutoScrolling=function(){e=!1},this.$get=["$window","$location","$rootScope",function(n,r,i){var o=n.document;function a(t){if(t){t.scrollIntoView();var e=function(){var t=s.yOffset;if(G(t))t=t();else if(nt(t)){var e=t[0];t="fixed"!==n.getComputedStyle(e).position?0:e.getBoundingClientRect().bottom}else V(t)||(t=0);return t}();if(e){var r=t.getBoundingClientRect().top;n.scrollBy(0,r-e)}}else n.scrollTo(0,0)}function s(t){var e,n,i;(t=U(t)?t:V(t)?t.toString():r.hash())?(e=o.getElementById(t))?a(e):(n=o.getElementsByName(t),i=null,Array.prototype.some.call(n,(function(t){if("a"===rt(t))return i=t,!0})),(e=i)?a(e):"top"===t&&a(null)):a(null)}return e&&i.$watch((function(){return r.hash()}),(function(e,n){var r,o;e===n&&""===e||(r=function(){i.$evalAsync(s)},"complete"===(o=o||t).document.readyState?o.setTimeout(r):d(o).on("load",r))})),s}]}We.$$annotate=function(t,e,n){var r,i;if("function"==typeof t){if(!(r=t.$inject)){if(r=[],t.length){if(e)throw U(n)&&n||(n=t.name||function(t){var e=Be(t);return e?"function("+(e[1]||"").replace(/[\s\r\n]+/," ")+")":"fn"}(t)),Ve("strictdi","{0} is not using explicit annotation and cannot be invoked in strict mode",n);x(Be(t)[1].split(Ne),(function(t){t.replace(Fe,(function(t,e,n){r.push(n)}))}))}t.$inject=r}}else B(t)?(Rt(t[i=t.length-1],"fn"),r=t.slice(0,i)):Rt(t,"fn",!0);return r};var Ye=i("$animate"),Ke="ng-animate";function Je(t,e){return t||e?t?e?(B(t)&&(t=t.join(" ")),B(e)&&(e=e.join(" ")),t+" "+e):t:e:""}function Qe(t){return N(t)?t:{}}var Xe=function(){this.$get=M},Ze=function(){var t=new Re,e=[];this.$get=["$$AnimateRunner","$rootScope",function(n,r){return{enabled:M,on:M,off:M,pin:M,push:function(a,s,c,l){l&&l(),(c=c||{}).from&&a.css(c.from),c.to&&a.css(c.to),(c.addClass||c.removeClass)&&function(n,a,s){var c=t.get(n)||{},l=i(c,a,!0),u=i(c,s,!1);(l||u)&&(t.set(n,c),e.push(n),1===e.length&&r.$$postDigest(o))}(a,c.addClass,c.removeClass);var u=new n;return u.complete(),u}};function i(t,e,n){var r=!1;return e&&x(e=U(e)?e.split(" "):B(e)?e:[],(function(e){e&&(r=!0,t[e]=n)})),r}function o(){x(e,(function(e){var n=t.get(e);if(n){var r=function(t){U(t)&&(t=t.split(" "));var e=Nt();return x(t,(function(t){t.length&&(e[t]=!0)})),e}(e.attr("class")),i="",o="";x(n,(function(t,e){t!==!!r[e]&&(t?i+=(i.length?" ":"")+e:o+=(o.length?" ":"")+e)})),x(e,(function(t){i&&ve(t,i),o&&ge(t,o)})),t.delete(e)}})),e.length=0}}]},tn=["$provide",function(t){var e=this,n=null,r=null;this.$$registeredAnimations=Object.create(null),this.register=function(n,r){if(n&&"."!==n.charAt(0))throw Ye("notcsel","Expecting class selector starting with '.' got '{0}'.",n);var i=n+"-animation";e.$$registeredAnimations[n.substr(1)]=i,t.factory(i,r)},this.customFilter=function(t){return 1===arguments.length&&(r=G(t)?t:null),r},this.classNameFilter=function(t){if(1===arguments.length&&(n=t instanceof RegExp?t:null)){var e=new RegExp("[(\\s|\\/)]ng-animate[(\\s|\\/)]");if(e.test(n.toString()))throw n=null,Ye("nongcls",'$animateProvider.classNameFilter(regex) prohibits accepting a regex value which matches/contains the "{0}" CSS class.',Ke)}return n},this.$get=["$$animateQueue",function(t){function e(t,e,n){if(n){var r=function(t){for(var e=0;e<t.length;e++){var n=t[e];if(1===n.nodeType)return n}}(n);!r||r.parentNode||r.previousElementSibling||(n=null)}n?n.after(t):e.prepend(t)}return{on:t.on,off:t.off,pin:t.pin,enabled:t.enabled,cancel:function(t){t.end&&t.end()},enter:function(n,r,i,o){return r=r&&d(r),i=i&&d(i),e(n,r=r||i.parent(),i),t.push(n,"enter",Qe(o))},move:function(n,r,i,o){return r=r&&d(r),i=i&&d(i),e(n,r=r||i.parent(),i),t.push(n,"move",Qe(o))},leave:function(e,n){return t.push(e,"leave",Qe(n),(function(){e.remove()}))},addClass:function(e,n,r){return(r=Qe(r)).addClass=Je(r.addclass,n),t.push(e,"addClass",r)},removeClass:function(e,n,r){return(r=Qe(r)).removeClass=Je(r.removeClass,n),t.push(e,"removeClass",r)},setClass:function(e,n,r,i){return(i=Qe(i)).addClass=Je(i.addClass,n),i.removeClass=Je(i.removeClass,r),t.push(e,"setClass",i)},animate:function(e,n,r,i,o){return(o=Qe(o)).from=o.from?j(o.from,n):n,o.to=o.to?j(o.to,r):r,i=i||"ng-inline-animate",o.tempClasses=Je(o.tempClasses,i),t.push(e,"animate",o)}}}]}],en=function(){this.$get=["$$rAF",function(t){var e=[];function n(n){e.push(n),e.length>1||t((function(){for(var t=0;t<e.length;t++)e[t]();e=[]}))}return function(){var t=!1;return n((function(){t=!0})),function(e){t?e():n(e)}}}]},nn=function(){this.$get=["$q","$sniffer","$$animateAsyncRun","$$isDocumentHidden","$timeout",function(t,e,n,r,i){function o(t){this.setHost(t);var e=n();this._doneCallbacks=[],this._tick=function(t){r()?function(t){i(t,0,!1)}(t):e(t)},this._state=0}return o.chain=function(t,e){var n=0;!function r(){if(n===t.length)return void e(!0);t[n]((function(t){!1!==t?(n++,r()):e(!1)}))}()},o.all=function(t,e){var n=0,r=!0;function i(i){r=r&&i,++n===t.length&&e(r)}x(t,(function(t){t.done(i)}))},o.prototype={setHost:function(t){this.host=t||{}},done:function(t){2===this._state?t():this._doneCallbacks.push(t)},progress:M,getPromise:function(){if(!this.promise){var e=this;this.promise=t((function(t,n){e.done((function(e){!1===e?n():t()}))}))}return this.promise},then:function(t,e){return this.getPromise().then(t,e)},catch:function(t){return this.getPromise().catch(t)},finally:function(t){return this.getPromise().finally(t)},pause:function(){this.host.pause&&this.host.pause()},resume:function(){this.host.resume&&this.host.resume()},end:function(){this.host.end&&this.host.end(),this._resolve(!0)},cancel:function(){this.host.cancel&&this.host.cancel(),this._resolve(!1)},complete:function(t){var e=this;0===e._state&&(e._state=1,e._tick((function(){e._resolve(t)})))},_resolve:function(t){2!==this._state&&(x(this._doneCallbacks,(function(e){e(t)})),this._doneCallbacks.length=0,this._state=2)}},o}]},rn=function(){this.$get=["$$rAF","$q","$$AnimateRunner",function(t,e,n){return function(e,r){var i=r||{};i.$$prepared||(i=at(i)),i.cleanupStyles&&(i.from=i.to=null),i.from&&(e.css(i.from),i.from=null);var o,a=new n;return{start:s,end:s};function s(){return t((function(){!function(){i.addClass&&(e.addClass(i.addClass),i.addClass=null);i.removeClass&&(e.removeClass(i.removeClass),i.removeClass=null);i.to&&(e.css(i.to),i.to=null)}(),o||a.complete(),o=!0})),a}}}]};function on(t,e,n,r){var i=this,o=t.location,a=t.history,s=t.setTimeout,c=t.clearTimeout,l={};i.isMock=!1;var u=0,p=[];function f(t){try{t.apply(null,pt(arguments,1))}finally{if(0===--u)for(;p.length;)try{p.pop()()}catch(t){n.error(t)}}}i.$$completeOutstandingRequest=f,i.$$incOutstandingRequestCount=function(){u++},i.notifyWhenNoOutstandingRequests=function(t){0===u?t():p.push(t)};var _,h,m=o.href,g=e.find("base"),v=null,b=r.history?function(){try{return a.state}catch(t){}}:M;C(),i.url=function(e,n,s){if(z(s)&&(s=null),o!==t.location&&(o=t.location),a!==t.history&&(a=t.history),e){var c=h===s;if(m===e&&(!r.history||c))return i;var l=m&&nr(m)===nr(e);return m=e,h=s,!r.history||l&&c?(l||(v=e),n?o.replace(e):l?o.hash=function(t){var e=t.indexOf("#");return-1===e?"":t.substr(e)}(e):o.href=e,o.href!==e&&(v=e)):(a[n?"replaceState":"pushState"](s,"",e),C()),v&&(v=e),i}return v||o.href.replace(/%27/g,"'")},i.state=function(){return _};var y=[],w=!1;function $(){v=null,S()}var k=null;function C(){ct(_=z(_=b())?null:_,k)&&(_=k),k=_,h=_}function S(){var t=h;C(),m===i.url()&&t===_||(m=i.url(),h=_,x(y,(function(t){t(i.url(),_)})))}i.onUrlChange=function(e){return w||(r.history&&d(t).on("popstate",$),d(t).on("hashchange",$),w=!0),y.push(e),e},i.$$applicationDestroyed=function(){d(t).off("hashchange popstate",$)},i.$$checkUrlChange=S,i.baseHref=function(){var t=g.attr("href");return t?t.replace(/^(https?:)?\/\/[^/]*/,""):""},i.defer=function(t,e){var n;return u++,n=s((function(){delete l[n],f(t)}),e||0),l[n]=!0,n},i.defer.cancel=function(t){return!!l[t]&&(delete l[t],c(t),f(M),!0)}}function an(){this.$get=["$window","$log","$sniffer","$document",function(t,e,n,r){return new on(t,r,e,n)}]}function sn(){this.$get=function(){var t={};function e(e,n){if(e in t)throw i("$cacheFactory")("iid","CacheId '{0}' is already taken!",e);var r=0,o=j({},n,{id:e}),a=Nt(),s=n&&n.capacity||Number.MAX_VALUE,c=Nt(),l=null,u=null;return t[e]={put:function(t,e){if(!z(e)){if(s<Number.MAX_VALUE)d(c[t]||(c[t]={key:t}));return t in a||r++,a[t]=e,r>s&&this.remove(u.key),e}},get:function(t){if(s<Number.MAX_VALUE){var e=c[t];if(!e)return;d(e)}return a[t]},remove:function(t){if(s<Number.MAX_VALUE){var e=c[t];if(!e)return;e===l&&(l=e.p),e===u&&(u=e.n),p(e.n,e.p),delete c[t]}t in a&&(delete a[t],r--)},removeAll:function(){a=Nt(),r=0,c=Nt(),l=u=null},destroy:function(){a=null,o=null,c=null,delete t[e]},info:function(){return j({},o,{size:r})}};function d(t){t!==l&&(u?u===t&&(u=t.n):u=t,p(t.n,t.p),p(t,l),(l=t).n=null)}function p(t,e){t!==e&&(t&&(t.p=e),e&&(e.n=t))}}return e.info=function(){var e={};return x(t,(function(t,n){e[n]=t.info()})),e},e.get=function(e){return t[e]},e}}function cn(){this.$get=["$cacheFactory",function(t){return t("templates")}]}var ln=i("$compile");var un=new function(){};function dn(e,n){var r={},i="Directive",o=/^\s*directive:\s*([\w-]+)\s+(.*)$/,a=/(([\w-]+)(?::([^;]+))?;?)/,l=function(t){var e,n={},r=t.split(",");for(e=0;e<r.length;e++)n[r[e]]=!0;return n}("ngSrc,ngSrcset,src,srcset"),p=/^(?:(\^\^?)?(\?)?(\^\^?)?)?/,f=/^(on[a-z]+|formaction)$/,_=Nt();function h(t,e,n){var r=/^\s*([@&<]|=(\*?))(\??)\s*([\w$]*)\s*$/,i=Nt();return x(t,(function(t,o){if(t in _)i[o]=_[t];else{var a=t.match(r);if(!a)throw ln("iscp","Invalid {3} for directive '{0}'. Definition: {... {1}: '{2}' ...}",e,o,t,n?"controller bindings definition":"isolate scope definition");i[o]={mode:a[1][0],collection:"*"===a[2],optional:"?"===a[3],attrName:a[4]||o},a[4]&&(_[t]=i[o])}})),i}function m(t,e){var n={isolateScope:null,bindToController:null};if(N(t.scope)&&(!0===t.bindToController?(n.bindToController=h(t.scope,e,!0),n.isolateScope={}):n.isolateScope=h(t.scope,e,!1)),N(t.bindToController)&&(n.bindToController=h(t.bindToController,e,!0)),n.bindToController&&!t.controller)throw ln("noctrl","Cannot bind to controller without directive '{0}'s controller.",e);return n}this.directive=function t(n,o){return It(n,"name"),Dt(n,"directive"),U(n)?(!function(t){var e=t.charAt(0);if(!e||e!==c(e))throw ln("baddir","Directive/Component name '{0}' is invalid. The first character must be a lowercase letter",t);if(t!==t.trim())throw ln("baddir","Directive/Component name '{0}' is invalid. The name should not contain leading or trailing whitespaces",t)}(n),It(o,"directiveFactory"),r.hasOwnProperty(n)||(r[n]=[],e.factory(n+i,["$injector","$exceptionHandler",function(t,e){var i=[];return x(r[n],(function(r,o){try{var a=t.invoke(r);G(a)?a={compile:R(a)}:!a.compile&&a.link&&(a.compile=R(a.link)),a.priority=a.priority||0,a.index=o,a.name=a.name||n,a.require=function(t){var e=t.require||t.controller&&t.name;return!B(e)&&N(e)&&x(e,(function(t,n){var r=t.match(p);t.substring(r[0].length)||(e[n]=r[0]+n)})),e}(a),a.restrict=function(t,e){if(t&&(!U(t)||!/[EACM]/.test(t)))throw ln("badrestrict","Restrict property '{0}' of directive '{1}' is invalid",t,e);return t||"EA"}(a.restrict,n),a.$$moduleName=r.$$moduleName,i.push(a)}catch(t){e(t)}})),i}])),r[n].push(o)):x(n,C(t)),this},this.component=function t(e,n){if(!U(e))return x(e,C(ft(this,t))),this;var r=n.controller||function(){};function i(t){function e(e){return G(e)||B(e)?function(n,r){return t.invoke(e,this,{$element:n,$attrs:r})}:e}var i=n.template||n.templateUrl?n.template:"",o={controller:r,controllerAs:yn(n.controller)||n.controllerAs||"$ctrl",template:e(i),templateUrl:e(n.templateUrl),transclude:n.transclude,scope:{},bindToController:n.bindings||{},restrict:"E",require:n.require};return x(n,(function(t,e){"$"===e.charAt(0)&&(o[e]=t)})),o}return x(n,(function(t,e){"$"===e.charAt(0)&&(i[e]=t,G(r)&&(r[e]=t))})),i.$inject=["$injector"],this.directive(e,i)},this.aHrefSanitizationWhitelist=function(t){return L(t)?(n.aHrefSanitizationWhitelist(t),this):n.aHrefSanitizationWhitelist()},this.imgSrcSanitizationWhitelist=function(t){return L(t)?(n.imgSrcSanitizationWhitelist(t),this):n.imgSrcSanitizationWhitelist()};var v=!0;this.debugInfoEnabled=function(t){return L(t)?(v=t,this):v};var b=!1;this.preAssignBindingsEnabled=function(t){return L(t)?(b=t,this):b};var y=!1;this.strictComponentBindingsEnabled=function(t){return L(t)?(y=t,this):y};var w=10;this.onChangesTtl=function(t){return arguments.length?(w=t,this):w};var $=!0;this.commentDirectivesEnabled=function(t){return arguments.length?($=t,this):$};var k=!0;this.cssClassDirectivesEnabled=function(t){return arguments.length?(k=t,this):k},this.$get=["$injector","$interpolate","$exceptionHandler","$templateRequest","$parse","$controller","$rootScope","$sce","$animate","$$sanitizeUri",function(e,n,_,h,C,S,A,E,O,T){var q,R=/^\w/,D=t.document.createElement("div"),F=$,V=k,H=w;function Y(){try{if(!--H)throw q=void 0,ln("infchng","{0} $onChanges() iterations reached. Aborting!\n",w);A.$apply((function(){for(var t=[],e=0,n=q.length;e<n;++e)try{q[e]()}catch(e){t.push(e)}if(q=void 0,t.length)throw t}))}finally{H++}}function K(t,e){if(e){var n,r,i,o=Object.keys(e);for(n=0,r=o.length;n<r;n++)this[i=o[n]]=e[i]}else this.$attr={};this.$$element=t}function X(t,e){try{t.addClass(e)}catch(t){}}K.prototype={$normalize:hn,$addClass:function(t){t&&t.length>0&&O.addClass(this.$$element,t)},$removeClass:function(t){t&&t.length>0&&O.removeClass(this.$$element,t)},$updateClass:function(t,e){var n=mn(t,e);n&&n.length&&O.addClass(this.$$element,n);var r=mn(e,t);r&&r.length&&O.removeClass(this.$$element,r)},$set:function(t,e,n,r){var i,o=je(this.$$element[0],t),a=Ee[t],s=t;if(o?(this.$$element.prop(t,e),r=o):a&&(this[a]=e,s=a),this[t]=e,r?this.$attr[t]=r:(r=this.$attr[t])||(this.$attr[t]=r=Pt(t,"-")),"a"===(i=rt(this.$$element))&&("href"===t||"xlinkHref"===t)||"img"===i&&"src"===t)this[t]=e=T(e,"src"===t);else if("img"===i&&"srcset"===t&&L(e)){for(var c="",l=tt(e),u=/\s/.test(l)?/(\s+\d+x\s*,|\s+\d+w\s*,|\s+,|,\s+)/:/(,)/,d=l.split(u),p=Math.floor(d.length/2),f=0;f<p;f++){var h=2*f;c+=T(tt(d[h]),!0),c+=" "+tt(d[h+1])}var m=tt(d[2*f]).split(/\s/);c+=T(tt(m[0]),!0),2===m.length&&(c+=" "+tt(m[1])),this[t]=e=c}!1!==n&&(null===e||z(e)?this.$$element.removeAttr(r):R.test(r)?this.$$element.attr(r,e):function(t,e,n){D.innerHTML="<span "+e+">";var r=D.firstChild.attributes,i=r[0];r.removeNamedItem(i.name),i.value=n,t.attributes.setNamedItem(i)}(this.$$element[0],r,e));var g=this.$$observers;g&&x(g[s],(function(t){try{t(e)}catch(t){_(t)}}))},$observe:function(t,e){var n=this,r=n.$$observers||(n.$$observers=Nt()),i=r[t]||(r[t]=[]);return i.push(e),A.$evalAsync((function(){i.$$inter||!n.hasOwnProperty(t)||z(n[t])||e(n[t])})),function(){ot(i,e)}}};var Z=n.startSymbol(),et=n.endSymbol(),nt="{{"===Z&&"}}"===et?I:function(t){return t.replace(/\{\{/g,Z).replace(/}}/g,et)},it=/^ngAttr[A-Z]/,at=/^(.+)Start$/;return lt.$$addBindingInfo=v?function(t,e){var n=t.data("$binding")||[];B(e)?n=n.concat(e):n.push(e),t.data("$binding",n)}:M,lt.$$addBindingClass=v?function(t){X(t,"ng-binding")}:M,lt.$$addScopeInfo=v?function(t,e,n,r){var i=n?r?"$isolateScopeNoTemplate":"$isolateScope":"$scope";t.data(i,e)}:M,lt.$$addScopeClass=v?function(t,e){X(t,e?"ng-isolate-scope":"ng-scope")}:M,lt.$$createComment=function(e,n){var r="";return v&&(r=" "+(e||"")+": ",n&&(r+=n+" ")),t.document.createComment(r)},lt;function lt(t,e,n,r,i){t instanceof d||(t=d(t));var o=ut(t,e,t,n,r,i);lt.$$addScopeClass(t);var a=null;return function(e,n,r){if(!t)throw ln("multilink","This element has already been linked.");It(e,"scope"),i&&i.needsNewScope&&(e=e.$parent.$new());var s,c,l,u=(r=r||{}).parentBoundTranscludeFn,p=r.transcludeControllers,f=r.futureParentElement;if(u&&u.$$boundTransclude&&(u=u.$$boundTransclude),a||(c=(s=f)&&s[0],a=c&&"foreignobject"!==rt(c)&&g.call(c).match(/SVG/)?"svg":"html"),l="html"!==a?d(jt(a,d("<div>").append(t).html())):n?Ce.clone.call(t):t,p)for(var _ in p)l.data("$"+_+"Controller",p[_].instance);return lt.$$addScopeInfo(l,e),n&&n(l,e),o&&o(e,l,l,u),n||(t=o=null),l}}function ut(t,e,n,r,i,o){for(var a,s,c,l,p,f,_,h=[],m=B(t)||t instanceof d,g=0;g<t.length;g++)a=new K,11===u&&dt(t,g,m),(c=(s=ht(t[g],[],a,0===g?r:void 0,i)).length?bt(s,t[g],a,e,n,null,[],[],o):null)&&c.scope&&lt.$$addScopeClass(a.$$element),p=c&&c.terminal||!(l=t[g].childNodes)||!l.length?null:ut(l,c?(c.transcludeOnThisElement||!c.templateOnThisElement)&&c.transclude:e),(c||p)&&(h.push(g,c,p),f=!0,_=_||c),o=null;return f?function(t,n,r,i){var o,a,s,c,l,u,p,f,m;if(_){var g=n.length;for(m=new Array(g),l=0;l<h.length;l+=3)p=h[l],m[p]=n[p]}else m=n;for(l=0,u=h.length;l<u;)s=m[h[l++]],o=h[l++],a=h[l++],o?(o.scope?(c=t.$new(),lt.$$addScopeInfo(d(s),c)):c=t,f=o.transcludeOnThisElement?_t(t,o.transclude,i):!o.templateOnThisElement&&i?i:!i&&e?_t(t,e):null,o(a,c,s,r,f)):a&&a(t,s.childNodes,void 0,i)}:null}function dt(t,e,n){var r,i=t[e],o=i.parentNode;if(i.nodeType===Ut)for(;(r=o?i.nextSibling:t[e+1])&&r.nodeType===Ut;)i.nodeValue=i.nodeValue+r.nodeValue,r.parentNode&&r.parentNode.removeChild(r),n&&r===t[e+1]&&t.splice(e+1,1)}function _t(t,e,n){function r(r,i,o,a,s){return r||((r=t.$new(!1,s)).$$transcluded=!0),e(r,i,{parentBoundTranscludeFn:n,transcludeControllers:o,futureParentElement:a})}var i=r.$$slots=Nt();for(var o in e.$$slots)e.$$slots[o]?i[o]=_t(t,e.$$slots[o],n):i[o]=null;return r}function ht(t,e,r,i,s){var c,l,u,d=t.nodeType,p=r.$attr;switch(d){case 1:xt(e,hn(l=rt(t)),"E",i,s);for(var f,_,h,m,g,v,b=t.attributes,y=0,w=b&&b.length;y<w;y++){var $=!1,x=!1;_=(f=b[y]).name,g=f.value,m=hn(_),(v=it.test(m))&&(_=_.replace(fn,"").substr(8).replace(/_(.)/g,(function(t,e){return e.toUpperCase()})));var k=m.match(at);k&&kt(k[1])&&($=_,x=_.substr(0,_.length-5)+"end",_=_.substr(0,_.length-6)),p[h=hn(_.toLowerCase())]=_,!v&&r.hasOwnProperty(h)||(r[h]=g,je(t,h)&&(r[h]=!0)),Ot(t,e,g,h,v),xt(e,h,"A",i,s,$,x)}if("input"===l&&"hidden"===t.getAttribute("type")&&t.setAttribute("autocomplete","off"),!V)break;if(N(u=t.className)&&(u=u.animVal),U(u)&&""!==u)for(;c=a.exec(u);)xt(e,h=hn(c[2]),"C",i,s)&&(r[h]=tt(c[3])),u=u.substr(c.index+c[0].length);break;case Ut:!function(t,e){var r=n(e,!0);r&&t.push({priority:0,compile:function(t){var e=t.parent(),n=!!e.length;return n&&lt.$$addBindingClass(e),function(t,e){var i=e.parent();n||lt.$$addBindingClass(i),lt.$$addBindingInfo(i,r.expressions),t.$watch(r,(function(t){e[0].nodeValue=t}))}}})}(e,t.nodeValue);break;case 8:if(!F)break;!function(t,e,n,r,i){try{var a=o.exec(t.nodeValue);if(a){var s=hn(a[1]);xt(e,s,"M",r,i)&&(n[s]=tt(a[2]))}}catch(t){}}(t,e,r,i,s)}return e.sort(At),e}function mt(t,e,n){var r=[],i=0;if(e&&t.hasAttribute&&t.hasAttribute(e))do{if(!t)throw ln("uterdir","Unterminated attribute, found '{0}' but no matching '{1}' found.",e,n);1===t.nodeType&&(t.hasAttribute(e)&&i++,t.hasAttribute(n)&&i--),r.push(t),t=t.nextSibling}while(i>0);else r.push(t);return d(r)}function gt(t,e,n){return function(r,i,o,a,s){return i=mt(i[0],e,n),t(r,i,o,a,s)}}function vt(t,e,n,r,i,o){var a;return t?lt(e,n,r,i,o):function(){return a||(a=lt(e,n,r,i,o),e=n=o=null),a.apply(this,arguments)}}function bt(t,e,n,r,i,o,a,s,c){c=c||{};for(var l,u,p,f,h,m=-Number.MAX_VALUE,g=c.newScopeDirective,v=c.controllerDirectives,y=c.newIsolateScopeDirective,w=c.templateDirective,$=c.nonTlbTranscludeDirective,k=!1,C=!1,A=c.hasElementTranscludeDirective,E=n.$$element=d(e),O=o,T=r,q=!1,P=!1,M=0,I=t.length;M<I;M++){var R=(l=t[M]).$$start,D=l.$$end;if(R&&(E=mt(e,R,D)),p=void 0,m>l.priority)break;if((h=l.scope)&&(l.templateUrl||(N(h)?(Et("new/isolated scope",y||g,l,E),y=l):Et("new/isolated scope",y,l,E)),g=g||l),u=l.name,!q&&(l.replace&&(l.templateUrl||l.template)||l.transclude&&!l.$$tlb)){for(var L,F=M+1;L=t[F++];)if(L.transclude&&!L.$$tlb||L.replace&&(L.templateUrl||L.template)){P=!0;break}q=!0}if(!l.templateUrl&&l.controller&&(v=v||Nt(),Et("'"+u+"' controller",v[u],l,E),v[u]=l),h=l.transclude)if(k=!0,l.$$tlb||(Et("transclusion",$,l,E),$=l),"element"===h)A=!0,m=l.priority,p=E,E=n.$$element=d(lt.$$createComment(u,n[u])),e=E[0],Tt(i,pt(p),e),p[0].$$parentNode=p[0].parentNode,T=vt(P,p,r,m,O&&O.name,{nonTlbTranscludeDirective:$});else{var U=Nt();if(N(h)){p=[];var V=Nt(),H=Nt();for(var W in x(h,(function(t,e){var n="?"===t.charAt(0);t=n?t.substring(1):t,V[t]=e,U[e]=null,H[e]=n})),x(E.contents(),(function(t){var e=V[hn(rt(t))];e?(H[e]=!0,U[e]=U[e]||[],U[e].push(t)):p.push(t)})),x(H,(function(t,e){if(!t)throw ln("reqslot","Required transclusion slot `{0}` was not filled.",e)})),U)U[W]&&(U[W]=vt(P,U[W],r))}else p=d(ue(e)).contents();E.empty(),(T=vt(P,p,r,void 0,void 0,{needsNewScope:l.$$isolateScope||l.$$newScope})).$$slots=U}if(l.template)if(C=!0,Et("template",w,l,E),w=l,h=G(l.template)?l.template(E,n):l.template,h=nt(h),l.replace){if(O=l,p=oe(h)?[]:gn(jt(l.templateNamespace,tt(h))),e=p[0],1!==p.length||1!==e.nodeType)throw ln("tplrt","Template for directive '{0}' must have exactly one root element. {1}",u,"");Tt(i,E,e);var Y={$attr:{}},Q=ht(e,[],Y),X=t.splice(M+1,t.length-(M+1));(y||g)&&$t(Q,y,g),t=t.concat(Q).concat(X),Ct(n,Y),I=t.length}else E.html(h);if(l.templateUrl)C=!0,Et("template",w,l,E),w=l,l.replace&&(O=l),it=St(t.splice(M,t.length-M),E,n,i,k&&T,a,s,{controllerDirectives:v,newScopeDirective:g!==l&&g,newIsolateScopeDirective:y,templateDirective:w,nonTlbTranscludeDirective:$}),I=t.length;else if(l.compile)try{f=l.compile(E,n,T);var Z=l.$$originalDirective||l;G(f)?et(null,ft(Z,f),R,D):f&&et(ft(Z,f.pre),ft(Z,f.post),R,D)}catch(t){_(t,yt(E))}l.terminal&&(it.terminal=!0,m=Math.max(m,l.priority))}return it.scope=g&&!0===g.scope,it.transcludeOnThisElement=k,it.templateOnThisElement=C,it.transclude=T,c.hasElementTranscludeDirective=A,it;function et(t,e,n,r){t&&(n&&(t=gt(t,n,r)),t.require=l.require,t.directiveName=u,(y===l||l.$$isolateScope)&&(t=qt(t,{isolateScope:!0})),a.push(t)),e&&(n&&(e=gt(e,n,r)),e.require=l.require,e.directiveName=u,(y===l||l.$$isolateScope)&&(e=qt(e,{isolateScope:!0})),s.push(e))}function it(t,r,i,o,c){var l,u,p,f,h,m,$,k,C,E;for(var O in e===i?(C=n,k=n.$$element):C=new K(k=d(i),n),h=r,y?f=r.$new(!0):g&&(h=r.$parent),c&&($=function(t,e,n,r){var i;J(t)||(r=n,n=e,e=t,t=void 0);A&&(i=m);n||(n=A?k.parent():k);if(!r)return c(t,e,i,n,I);var o=c.$$slots[r];if(o)return o(t,e,i,n,I);if(z(o))throw ln("noslot",'No parent directive that requires a transclusion with slot name "{0}". Element: {1}',r,yt(k))},$.$$boundTransclude=c,$.isSlotFilled=function(t){return!!c.$$slots[t]}),v&&(m=function(t,e,n,r,i,o,a){var s=Nt();for(var c in r){var l=r[c],u={$scope:l===a||l.$$isolateScope?i:o,$element:t,$attrs:e,$transclude:n},d=l.controller;"@"===d&&(d=e[l.name]);var p=S(d,u,!0,l.controllerAs);s[l.name]=p,t.data("$"+l.name+"Controller",p.instance)}return s}(k,C,$,v,f,r,y)),y&&(lt.$$addScopeInfo(k,f,!0,!(w&&(w===y||w===y.$$originalDirective))),lt.$$addScopeClass(k,!0),f.$$isolateBindings=y.$$isolateBindings,(E=Dt(r,C,f,f.$$isolateBindings,y)).removeWatches&&f.$on("$destroy",E.removeWatches)),m){var T=v[O],q=m[O],P=T.$$bindings.bindToController;if(b){q.bindingInfo=P?Dt(h,C,q.instance,P,T):{};var M=q();M!==q.instance&&(q.instance=M,k.data("$"+T.name+"Controller",M),q.bindingInfo.removeWatches&&q.bindingInfo.removeWatches(),q.bindingInfo=Dt(h,C,q.instance,P,T))}else q.instance=q(),k.data("$"+T.name+"Controller",q.instance),q.bindingInfo=Dt(h,C,q.instance,P,T)}for(x(v,(function(t,e){var n=t.require;t.bindToController&&!B(n)&&N(n)&&j(m[e].instance,wt(e,n,k,m))})),x(m,(function(t){var e=t.instance;if(G(e.$onChanges))try{e.$onChanges(t.bindingInfo.initialChanges)}catch(t){_(t)}if(G(e.$onInit))try{e.$onInit()}catch(t){_(t)}G(e.$doCheck)&&(h.$watch((function(){e.$doCheck()})),e.$doCheck()),G(e.$onDestroy)&&h.$on("$destroy",(function(){e.$onDestroy()}))})),l=0,u=a.length;l<u;l++)Mt(p=a[l],p.isolateScope?f:r,k,C,p.require&&wt(p.directiveName,p.require,k,m),$);var I=r;for(y&&(y.template||null===y.templateUrl)&&(I=f),t&&t(I,i.childNodes,void 0,c),l=s.length-1;l>=0;l--)Mt(p=s[l],p.isolateScope?f:r,k,C,p.require&&wt(p.directiveName,p.require,k,m),$);x(m,(function(t){var e=t.instance;G(e.$postLink)&&e.$postLink()}))}}function wt(t,e,n,r){var i;if(U(e)){var o=e.match(p),a=e.substring(o[0].length),s=o[1]||o[3],c="?"===o[2];if("^^"===s?n=n.parent():i=(i=r&&r[a])&&i.instance,!i){var l="$"+a+"Controller";i=s?n.inheritedData(l):n.data(l)}if(!i&&!c)throw ln("ctreq","Controller '{0}', required by directive '{1}', can't be found!",a,t)}else if(B(e)){i=[];for(var u=0,d=e.length;u<d;u++)i[u]=wt(t,e[u],n,r)}else N(e)&&(i={},x(e,(function(e,o){i[o]=wt(t,e,n,r)})));return i||null}function $t(t,e,n){for(var r=0,i=t.length;r<i;r++)t[r]=P(t[r],{$$isolateScope:e,$$newScope:n})}function xt(t,n,o,a,s,c,l){if(n===s)return null;var u=null;if(r.hasOwnProperty(n))for(var d,p=e.get(n+i),f=0,_=p.length;f<_;f++)if(d=p[f],(z(a)||a>d.priority)&&-1!==d.restrict.indexOf(o)){if(c&&(d=P(d,{$$start:c,$$end:l})),!d.$$bindings){var h=d.$$bindings=m(d,d.name);N(h.isolateScope)&&(d.$$isolateBindings=h.isolateScope)}t.push(d),u=d}return u}function kt(t){if(r.hasOwnProperty(t))for(var n=e.get(t+i),o=0,a=n.length;o<a;o++)if(n[o].multiElement)return!0;return!1}function Ct(t,e){var n=e.$attr,r=t.$attr;x(t,(function(r,i){"$"!==i.charAt(0)&&(e[i]&&e[i]!==r&&(r.length?r+=("style"===i?";":" ")+e[i]:r=e[i]),t.$set(i,r,!0,n[i]))})),x(e,(function(e,i){t.hasOwnProperty(i)||"$"===i.charAt(0)||(t[i]=e,"class"!==i&&"style"!==i&&(r[i]=n[i]))}))}function St(t,e,n,r,i,o,a,s){var c,l,u=[],p=e[0],f=t.shift(),m=P(f,{templateUrl:null,transclude:null,replace:null,$$originalDirective:f}),g=G(f.templateUrl)?f.templateUrl(e,n):f.templateUrl,v=f.templateNamespace;return e.empty(),h(g).then((function(_){var h,b,y,w;if(_=nt(_),f.replace){if(y=oe(_)?[]:gn(jt(v,tt(_))),h=y[0],1!==y.length||1!==h.nodeType)throw ln("tplrt","Template for directive '{0}' must have exactly one root element. {1}",f.name,g);b={$attr:{}},Tt(r,e,h);var $=ht(h,[],b);N(f.scope)&&$t($,!0),t=$.concat(t),Ct(n,b)}else h=p,e.html(_);for(t.unshift(m),c=bt(t,h,n,i,e,f,o,a,s),x(r,(function(t,n){t===h&&(r[n]=e[0])})),l=ut(e[0].childNodes,i);u.length;){var k=u.shift(),C=u.shift(),S=u.shift(),A=u.shift(),E=e[0];if(!k.$$destroyed){if(C!==p){var j=C.className;s.hasElementTranscludeDirective&&f.replace||(E=ue(h)),Tt(S,d(C),E),X(d(E),j)}w=c.transcludeOnThisElement?_t(k,c.transclude,A):A,c(l,k,E,r,w)}}u=null})).catch((function(t){W(t)&&_(t)})),function(t,e,n,r,i){var o=i;e.$$destroyed||(u?u.push(e,n,r,o):(c.transcludeOnThisElement&&(o=_t(e,c.transclude,i)),c(l,e,n,r,o)))}}function At(t,e){var n=e.priority-t.priority;return 0!==n?n:t.name!==e.name?t.name<e.name?-1:1:t.index-e.index}function Et(t,e,n,r){function i(t){return t?" (module: "+t+")":""}if(e)throw ln("multidir","Multiple directives [{0}{1}, {2}{3}] asking for {4} on: {5}",e.name,i(e.$$moduleName),n.name,i(n.$$moduleName),t,yt(r))}function jt(e,n){switch(e=c(e||"html")){case"svg":case"math":var r=t.document.createElement("div");return r.innerHTML="<"+e+">"+n+"</"+e+">",r.childNodes[0].childNodes;default:return n}}function Ot(t,e,r,i,o){var a=function(t,e){if("srcdoc"===e)return E.HTML;var n=rt(t);if("src"===e||"ngSrc"===e){if(-1===["img","video","audio","source","track"].indexOf(n))return E.RESOURCE_URL}else if("xlinkHref"===e||"form"===n&&"action"===e||"link"===n&&"href"===e)return E.RESOURCE_URL}(t,i),s=!o,c=l[i]||o,u=n(r,s,a,c);if(u){if("multiple"===i&&"select"===rt(t))throw ln("selmulti","Binding to the 'multiple' attribute is not supported. Element: {0}",yt(t));if(f.test(i))throw ln("nodomevents","Interpolations for HTML DOM event attributes are disallowed.  Please use the ng- versions (such as ng-click instead of onclick) instead.");e.push({priority:100,compile:function(){return{pre:function(t,e,o){var s=o.$$observers||(o.$$observers=Nt()),l=o[i];l!==r&&(u=l&&n(l,!0,a,c),r=l),u&&(o[i]=u(t),(s[i]||(s[i]=[])).$$inter=!0,(o.$$observers&&o.$$observers[i].$$scope||t).$watch(u,(function(t,e){"class"===i&&t!==e?o.$updateClass(t,e):o.$set(i,t)})))}}}})}}function Tt(e,n,r){var i,o,a=n[0],s=n.length,c=a.parentNode;if(e)for(i=0,o=e.length;i<o;i++)if(e[i]===a){e[i++]=r;for(var l=i,u=l+s-1,p=e.length;l<p;l++,u++)u<p?e[l]=e[u]:delete e[l];e.length-=s-1,e.context===a&&(e.context=r);break}c&&c.replaceChild(r,a);var f=t.document.createDocumentFragment();for(i=0;i<s;i++)f.appendChild(n[i]);for(d.hasData(a)&&(d.data(r,d.data(a)),d(a).off("$destroy")),d.cleanData(f.querySelectorAll("*")),i=1;i<s;i++)delete n[i];n[0]=r,n.length=1}function qt(t,e){return j((function(){return t.apply(null,arguments)}),t,e)}function Mt(t,e,n,r,i,o){try{t(e,n,r,i,o)}catch(t){_(t,yt(n))}}function Rt(t,e){if(y)throw ln("missingattr","Attribute '{0}' of '{1}' is non-optional and must be set!",t,e)}function Dt(t,e,r,i,o){var a,c=[],l={};function u(e,n,i){G(r.$onChanges)&&!st(n,i)&&(q||(t.$$postDigest(Y),q=[]),a||(a={},q.push(d)),a[e]&&(i=a[e].previousValue),a[e]=new pn(i,n))}function d(){r.$onChanges(a),a=void 0}return x(i,(function(i,a){var d,p,f,_,h,m=i.attrName,g=i.optional;switch(i.mode){case"@":g||s.call(e,m)||(Rt(m,o.name),r[a]=e[m]=void 0),h=e.$observe(m,(function(t){if(U(t)||Q(t)){var e=r[a];u(a,t,e),r[a]=t}})),e.$$observers[m].$$scope=t,U(d=e[m])?r[a]=n(d)(t):Q(d)&&(r[a]=d),l[a]=new pn(un,r[a]),c.push(h);break;case"=":if(!s.call(e,m)){if(g)break;Rt(m,o.name),e[m]=void 0}if(g&&!e[m])break;p=C(e[m]),_=p.literal?ct:st,f=p.assign||function(){throw d=r[a]=p(t),ln("nonassign","Expression '{0}' in attribute '{1}' used with directive '{2}' is non-assignable!",e[m],m,o.name)},d=r[a]=p(t);var v=function(e){return _(e,r[a])||(_(e,d)?f(t,e=r[a]):r[a]=e),d=e};v.$stateful=!0,h=i.collection?t.$watchCollection(e[m],v):t.$watch(C(e[m],v),null,p.literal),c.push(h);break;case"<":if(!s.call(e,m)){if(g)break;Rt(m,o.name),e[m]=void 0}if(g&&!e[m])break;var b=(p=C(e[m])).literal,y=r[a]=p(t);l[a]=new pn(un,r[a]),h=t.$watch(p,(function(t,e){if(e===t){if(e===y||b&&ct(e,y))return;e=y}u(a,t,e),r[a]=t}),b),c.push(h);break;case"&":if(g||s.call(e,m)||Rt(m,o.name),(p=e.hasOwnProperty(m)?C(e[m]):M)===M&&g)break;r[a]=function(e){return p(t,e)}}})),{initialChanges:l,removeWatches:c.length&&function(){for(var t=0,e=c.length;t<e;++t)c[t]()}}}}]}function pn(t,e){this.previousValue=t,this.currentValue=e}dn.$inject=["$provide","$$sanitizeUriProvider"],pn.prototype.isFirstChange=function(){return this.previousValue===un};var fn=/^((?:x|data)[:\-_])/i,_n=/[:\-_]+(.)/g;function hn(t){return t.replace(fn,"").replace(_n,Xt)}function mn(t,e){var n="",r=t.split(/\s+/),i=e.split(/\s+/);t:for(var o=0;o<r.length;o++){for(var a=r[o],s=0;s<i.length;s++)if(a===i[s])continue t;n+=(n.length>0?" ":"")+a}return n}function gn(t){var e=(t=d(t)).length;if(e<=1)return t;for(;e--;){var n=t[e];(8===n.nodeType||n.nodeType===Ut&&""===n.nodeValue.trim())&&h.call(t,e,1)}return t}var vn=i("$controller"),bn=/^(\S+)(\s+as\s+([\w$]+))?$/;function yn(t,e){if(e&&U(e))return e;if(U(t)){var n=bn.exec(t);if(n)return n[3]}}function wn(){var t={},e=!1;this.has=function(e){return t.hasOwnProperty(e)},this.register=function(e,n){Dt(e,"controller"),N(e)?j(t,e):t[e]=n},this.allowGlobals=function(){e=!0},this.$get=["$injector","$window",function(n,r){return function(i,a,s,c){var l,u,d,p;if(s=!0===s,c&&U(c)&&(p=c),U(i)){if(!(u=i.match(bn)))throw vn("ctrlfmt","Badly formed controller string '{0}'. Must match `__name__ as __id__` or `__name__`.",i);if(d=u[1],p=p||u[3],!(i=t.hasOwnProperty(d)?t[d]:zt(a.$scope,d,!0)||(e?zt(r,d,!0):void 0)))throw vn("ctrlreg","The controller with the name '{0}' is not registered.",d);Rt(i,d,!0)}if(s){var f=(B(i)?i[i.length-1]:i).prototype;return l=Object.create(f||null),p&&o(a,p,l,d||i.name),j((function(){var t=n.invoke(i,l,a,d);return t!==l&&(N(t)||G(t))&&(l=t,p&&o(a,p,l,d||i.name)),l}),{instance:l,identifier:p})}return l=n.instantiate(i,a,d),p&&o(a,p,l,d||i.name),l};function o(t,e,n,r){if(!t||!N(t.$scope))throw i("$controller")("noscp","Cannot export controller '{0}' as '{1}'! No $scope object provided via `locals`.",r,e);t.$scope[e]=n}}]}function $n(){this.$get=["$window",function(t){return d(t.document)}]}function xn(){this.$get=["$document","$rootScope",function(t,e){var n=t[0],r=n&&n.hidden;function i(){r=n.hidden}return t.on("visibilitychange",i),e.$on("$destroy",(function(){t.off("visibilitychange",i)})),function(){return r}}]}function kn(){this.$get=["$log",function(t){return function(e,n){t.error.apply(t,arguments)}}]}var Cn=function(){this.$get=["$document",function(t){return function(e){return e?!e.nodeType&&e instanceof d&&(e=e[0]):e=t[0].body,e.offsetWidth+1}}]},Sn="application/json",An={"Content-Type":"application/json;charset=utf-8"},En=/^\[|^\{(?!\{)/,jn={"[":/]$/,"{":/}$/},On=/^\)]\}',?\n/,Tn=i("$http");function qn(t){return N(t)?H(t)?t.toISOString():ht(t):t}function Pn(){this.$get=function(){return function(t){if(!t)return"";var e=[];return k(t,(function(t,n){null===t||z(t)||G(t)||(B(t)?x(t,(function(t){e.push(Ct(n)+"="+Ct(qn(t)))})):e.push(Ct(n)+"="+Ct(qn(t))))})),e.join("&")}}}function Mn(){this.$get=function(){return function(t){if(!t)return"";var e=[];return function t(n,r,i){if(null===n||z(n))return;B(n)?x(n,(function(e,n){t(e,r+"["+(N(e)?n:"")+"]")})):N(n)&&!H(n)?k(n,(function(e,n){t(e,r+(i?"":"[")+n+(i?"":"]"))})):e.push(Ct(r)+"="+Ct(qn(n)))}(t,"",!0),e.join("&")}}}function In(t,e){if(U(t)){var n=t.replace(On,"").trim();if(n){var r=e("Content-Type"),i=r&&0===r.indexOf(Sn);if(i||(a=(o=n).match(En))&&jn[a[0]].test(o))try{t=mt(n)}catch(e){if(!i)return t;throw Tn("baddata",'Data must be a valid JSON object. Received: "{0}". Parse error: "{1}"',t,e)}}}var o,a;return t}function Rn(t){var e,n=Nt();function r(t,e){t&&(n[t]=n[t]?n[t]+", "+e:e)}return U(t)?x(t.split("\n"),(function(t){e=t.indexOf(":"),r(c(tt(t.substr(0,e))),tt(t.substr(e+1)))})):N(t)&&x(t,(function(t,e){r(c(e),tt(t))})),n}function Dn(t){var e;return function(n){if(e||(e=Rn(t)),n){var r=e[c(n)];return void 0===r&&(r=null),r}return e}}function zn(t,e,n,r){return G(r)?r(t,e,n):(x(r,(function(r){t=r(t,e,n)})),t)}function Ln(t){return 200<=t&&t<300}function Nn(){var t=this.defaults={transformResponse:[In],transformRequest:[function(t){return!N(t)||(e=t,"[object File]"===g.call(e))||function(t){return"[object Blob]"===g.call(t)}(t)||function(t){return"[object FormData]"===g.call(t)}(t)?t:ht(t);var e}],headers:{common:{Accept:"application/json, text/plain, */*"},post:Vt(An),put:Vt(An),patch:Vt(An)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",paramSerializer:"$httpParamSerializer",jsonpCallbackParam:"callback"},e=!1;this.useApplyAsync=function(t){return L(t)?(e=!!t,this):e};var n=this.interceptors=[];this.$get=["$browser","$httpBackend","$$cookieReader","$cacheFactory","$rootScope","$q","$injector","$sce",function(r,o,a,s,u,d,p,f){var _=s("$http");t.paramSerializer=U(t.paramSerializer)?p.get(t.paramSerializer):t.paramSerializer;var h=[];function m(n){if(!N(n))throw i("$http")("badreq","Http request configuration must be an object.  Received: {0}",n);if(!U(f.valueOf(n.url)))throw i("$http")("badreq","Http request configuration url must be a string or a $sce trusted object.  Received: {0}",n.url);var s=j({method:"get",transformRequest:t.transformRequest,transformResponse:t.transformResponse,paramSerializer:t.paramSerializer,jsonpCallbackParam:t.jsonpCallbackParam},n);s.headers=function(e){var n,r,i,o=t.headers,a=j({},e.headers);o=j({},o.common,o[c(e.method)]);t:for(n in o){for(i in r=c(n),a)if(c(i)===r)continue t;a[n]=o[n]}return function(t,e){var n,r={};return x(t,(function(t,i){G(t)?null!=(n=t(e))&&(r[i]=n):r[i]=t})),r}(a,Vt(e))}(n),s.method=l(s.method),s.paramSerializer=U(s.paramSerializer)?p.get(s.paramSerializer):s.paramSerializer,r.$$incOutstandingRequestCount();var g=[],v=[],b=d.resolve(s);return x(h,(function(t){(t.request||t.requestError)&&g.unshift(t.request,t.requestError),(t.response||t.responseError)&&v.push(t.response,t.responseError)})),b=(b=y(b,g)).then((function(n){var r=n.headers,i=zn(n.data,Dn(r),void 0,n.transformRequest);z(i)&&x(r,(function(t,e){"content-type"===c(e)&&delete r[e]}));z(n.withCredentials)&&!z(t.withCredentials)&&(n.withCredentials=t.withCredentials);return function(n,r){var i,s,l=d.defer(),p=l.promise,h=n.headers,g="jsonp"===c(n.method),v=n.url;g?v=f.getTrustedResourceUrl(v):U(v)||(v=f.valueOf(v));v=function(t,e){e.length>0&&(t+=(-1===t.indexOf("?")?"?":"&")+e);return t}(v,n.paramSerializer(n.params)),g&&(v=function(t,e){if(/[&?][^=]+=JSON_CALLBACK/.test(t))throw Tn("badjsonp",'Illegal use of JSON_CALLBACK in url, "{0}"',t);if(new RegExp("[&?]"+e+"=").test(t))throw Tn("badjsonp",'Illegal use of callback param, "{0}", in url, "{1}"',e,t);return t+=(-1===t.indexOf("?")?"?":"&")+e+"=JSON_CALLBACK"}(v,n.jsonpCallbackParam));m.pendingRequests.push(n),p.then(C,C),!n.cache&&!t.cache||!1===n.cache||"GET"!==n.method&&"JSONP"!==n.method||(i=N(n.cache)?n.cache:N(t.cache)?t.cache:_);i&&(L(s=i.get(v))?X(s)?s.then(k,k):B(s)?$(s[1],s[0],Vt(s[2]),s[3],s[4]):$(s,200,{},"OK","complete"):i.put(v,p));if(z(s)){var b=ti(n.url)?a()[n.xsrfCookieName||t.xsrfCookieName]:void 0;b&&(h[n.xsrfHeaderName||t.xsrfHeaderName]=b),o(n.method,v,r,w,h,n.timeout,n.withCredentials,n.responseType,y(n.eventHandlers),y(n.uploadEventHandlers))}return p;function y(t){if(t){var n={};return x(t,(function(t,r){n[r]=function(n){function r(){t(n)}e?u.$applyAsync(r):u.$$phase?r():u.$apply(r)}})),n}}function w(t,n,r,o,a){function s(){$(n,t,r,o,a)}i&&(Ln(t)?i.put(v,[t,n,Rn(r),o,a]):i.remove(v)),e?u.$applyAsync(s):(s(),u.$$phase||u.$apply())}function $(t,e,r,i,o){(Ln(e=e>=-1?e:0)?l.resolve:l.reject)({data:t,status:e,headers:Dn(r),config:n,statusText:i,xhrStatus:o})}function k(t){$(t.data,t.status,Vt(t.headers()),t.statusText,t.xhrStatus)}function C(){var t=m.pendingRequests.indexOf(n);-1!==t&&m.pendingRequests.splice(t,1)}}(n,i).then(w,w)})),b=(b=y(b,v)).finally((function(){r.$$completeOutstandingRequest(M)}));function y(t,e){for(var n=0,r=e.length;n<r;){var i=e[n++],o=e[n++];t=t.then(i,o)}return e.length=0,t}function w(t){var e=j({},t);return e.data=zn(t.data,t.headers,t.status,s.transformResponse),Ln(t.status)?e:d.reject(e)}}return x(n,(function(t){h.unshift(U(t)?p.get(t):p.invoke(t))})),m.pendingRequests=[],function(t){x(arguments,(function(t){m[t]=function(e,n){return m(j({},n||{},{method:t,url:e}))}}))}("get","delete","head","jsonp"),function(t){x(arguments,(function(t){m[t]=function(e,n,r){return m(j({},r||{},{method:t,url:e,data:n}))}}))}("post","put","patch"),m.defaults=t,m}]}function Fn(){this.$get=function(){return function(){return new t.XMLHttpRequest}}}function Un(){this.$get=["$browser","$jsonpCallbacks","$document","$xhrFactory",function(t,e,n,r){return function(t,e,n,r,i){return function(i,a,s,l,u,d,p,f,_,h){if(a=a||t.url(),"jsonp"===c(i))var m=r.createCallback(a),g=o(a,m,(function(t,e){var n=200===t&&r.getResponse(m);C(l,t,n,"",e,"complete"),r.removeCallback(m)}));else{var v=e(i,a);v.open(i,a,!0),x(u,(function(t,e){L(t)&&v.setRequestHeader(e,t)})),v.onload=function(){var t=v.statusText||"",e="response"in v?v.response:v.responseText,n=1223===v.status?204:v.status;0===n&&(n=e?200:"file"===Zr(a).protocol?404:0),C(l,n,e,v.getAllResponseHeaders(),t,"complete")};var b=function(){C(l,-1,null,null,"","error")},y=function(){C(l,-1,null,null,"","abort")},w=function(){C(l,-1,null,null,"","timeout")};if(v.onerror=b,v.onabort=y,v.ontimeout=w,x(_,(function(t,e){v.addEventListener(e,t)})),x(h,(function(t,e){v.upload.addEventListener(e,t)})),p&&(v.withCredentials=!0),f)try{v.responseType=f}catch(t){if("json"!==f)throw t}v.send(z(s)?null:s)}if(d>0)var $=n(k,d);else X(d)&&d.then(k);function k(){g&&g(),v&&v.abort()}function C(t,e,r,i,o,a){L($)&&n.cancel($),g=v=null,t(e,r,i,o,a)}};function o(t,e,n){t=t.replace("JSON_CALLBACK",e);var o=i.createElement("script"),a=null;return o.type="text/javascript",o.src=t,o.async=!0,a=function(t){o.removeEventListener("load",a),o.removeEventListener("error",a),i.body.removeChild(o),o=null;var s=-1,c="unknown";t&&("load"!==t.type||r.wasCalled(e)||(t={type:"error"}),c=t.type,s="error"===t.type?404:200),n&&n(s,c)},o.addEventListener("load",a),o.addEventListener("error",a),i.body.appendChild(o),a}}(t,r,t.defer,e,n[0])}]}var Vn=y.$interpolateMinErr=i("$interpolate");function Hn(){var t="{{",e="}}";this.startSymbol=function(e){return e?(t=e,this):t},this.endSymbol=function(t){return t?(e=t,this):e},this.$get=["$parse","$exceptionHandler","$sce",function(n,r,i){var o=t.length,a=e.length,s=new RegExp(t.replace(/./g,l),"g"),c=new RegExp(e.replace(/./g,l),"g");function l(t){return"\\\\\\"+t}function u(n){return n.replace(s,t).replace(c,e)}function d(t,e,n,r){var i=t.$watch((function(t){return i(),r(t)}),e,n);return i}function p(s,c,l,p){if(!s.length||-1===s.indexOf(t)){var f;if(!c)(f=R(u(s))).exp=s,f.expressions=[],f.$$watchDelegate=d;return f}p=!!p;for(var _,h,m,g=0,v=[],b=[],y=s.length,w=[],$=[];g<y;){if(-1===(_=s.indexOf(t,g))||-1===(h=s.indexOf(e,_+o))){g!==y&&w.push(u(s.substring(g)));break}g!==_&&w.push(u(s.substring(g,_))),m=s.substring(_+o,h),v.push(m),b.push(n(m,C)),g=h+a,$.push(w.length),w.push("")}if(l&&w.length>1&&Vn.throwNoconcat(s),!c||v.length){var x=function(t){for(var e=0,n=v.length;e<n;e++){if(p&&z(t[e]))return;w[$[e]]=t[e]}return w.join("")},k=function(t){return l?i.getTrusted(l,t):i.valueOf(t)};return j((function(t){var e=0,n=v.length,i=new Array(n);try{for(;e<n;e++)i[e]=b[e](t);return x(i)}catch(t){r(Vn.interr(s,t))}}),{exp:s,expressions:v,$$watchDelegate:function(t,e){var n;return t.$watchGroup(b,(function(r,i){var o=x(r);G(e)&&e.call(this,o,r!==i?n:o,t),n=o}))}})}function C(t){try{return t=k(t),p&&!L(t)?t:Ft(t)}catch(t){r(Vn.interr(s,t))}}}return p.startSymbol=function(){return t},p.endSymbol=function(){return e},p}]}function Bn(){this.$get=["$rootScope","$window","$q","$$q","$browser",function(t,e,n,r,i){var o={};function a(a,s,c,l){var u=arguments.length>4,d=u?pt(arguments,4):[],p=e.setInterval,f=e.clearInterval,_=0,h=L(l)&&!l,m=(h?r:n).defer(),g=m.promise;return c=L(c)?c:0,g.$$intervalId=p((function(){h?i.defer(v):t.$evalAsync(v),m.notify(_++),c>0&&_>=c&&(m.resolve(_),f(g.$$intervalId),delete o[g.$$intervalId]),h||t.$apply()}),s),o[g.$$intervalId]=m,g;function v(){u?a.apply(null,d):a(_)}}return a.cancel=function(t){return!(!t||!(t.$$intervalId in o))&&(Ir(o[t.$$intervalId].promise),o[t.$$intervalId].reject("canceled"),e.clearInterval(t.$$intervalId),delete o[t.$$intervalId],!0)},a}]}Vn.throwNoconcat=function(t){throw Vn("noconcat","Error while interpolating: {0}\nStrict Contextual Escaping disallows interpolations that concatenate multiple expressions when a trusted value is required.  See http://docs.angularjs.org/api/ng.$sce",t)},Vn.interr=function(t,e){return Vn("interr","Can't interpolate: {0}\n{1}",t,e.toString())};var Wn=function(){this.$get=function(){var t=y.callbacks,e={};return{createCallback:function(n){var r="_"+(t.$$counter++).toString(36),i="angular.callbacks."+r,o=function(t){var e=function(t){e.data=t,e.called=!0};return e.id=t,e}(r);return e[i]=t[r]=o,i},wasCalled:function(t){return e[t].called},getResponse:function(t){return e[t].data},removeCallback:function(n){var r=e[n];delete t[r.id],delete e[n]}}}},Gn=/^([^?#]*)(\?([^#]*))?(#(.*))?$/,Yn={http:80,https:443,ftp:21},Kn=i("$location");function Jn(t){for(var e=t.split("/"),n=e.length;n--;)e[n]=kt(e[n]);return e.join("/")}function Qn(t,e){var n=Zr(t);e.$$protocol=n.protocol,e.$$host=n.hostname,e.$$port=T(n.port)||Yn[n.protocol]||null}var Xn=/^\s*[\\/]{2,}/;function Zn(t,e){if(Xn.test(t))throw Kn("badpath",'Invalid url "{0}".',t);var n="/"!==t.charAt(0);n&&(t="/"+t);var r=Zr(t);e.$$path=decodeURIComponent(n&&"/"===r.pathname.charAt(0)?r.pathname.substring(1):r.pathname),e.$$search=$t(r.search),e.$$hash=decodeURIComponent(r.hash),e.$$path&&"/"!==e.$$path.charAt(0)&&(e.$$path="/"+e.$$path)}function tr(t,e){return t.slice(0,e.length)===e}function er(t,e){if(tr(e,t))return e.substr(t.length)}function nr(t){var e=t.indexOf("#");return-1===e?t:t.substr(0,e)}function rr(t){return t.replace(/(#.+)|#$/,"$1")}function ir(t,e,n){this.$$html5=!0,n=n||"",Qn(t,this),this.$$parse=function(t){var n=er(e,t);if(!U(n))throw Kn("ipthprfx",'Invalid url "{0}", missing path prefix "{1}".',t,e);Zn(n,this),this.$$path||(this.$$path="/"),this.$$compose()},this.$$compose=function(){var t=xt(this.$$search),n=this.$$hash?"#"+kt(this.$$hash):"";this.$$url=Jn(this.$$path)+(t?"?"+t:"")+n,this.$$absUrl=e+this.$$url.substr(1),this.$$urlUpdatedByLocation=!0},this.$$parseLinkUrl=function(r,i){return i&&"#"===i[0]?(this.hash(i.slice(1)),!0):(L(o=er(t,r))?(a=o,s=n&&L(o=er(n,o))?e+(er("/",o)||o):t+a):L(o=er(e,r))?s=e+o:e===r+"/"&&(s=e),s&&this.$$parse(s),!!s);var o,a,s}}function or(t,e,n){Qn(t,this),this.$$parse=function(r){var i,o=er(t,r)||er(e,r);z(o)||"#"!==o.charAt(0)?this.$$html5?i=o:(i="",z(o)&&(t=r,this.replace())):z(i=er(n,o))&&(i=o),Zn(i,this),this.$$path=function(t,e,n){var r,i=/^\/[A-Z]:(\/.*)/;tr(e,n)&&(e=e.replace(n,""));if(i.exec(e))return t;return(r=i.exec(t))?r[1]:t}(this.$$path,i,t),this.$$compose()},this.$$compose=function(){var e=xt(this.$$search),r=this.$$hash?"#"+kt(this.$$hash):"";this.$$url=Jn(this.$$path)+(e?"?"+e:"")+r,this.$$absUrl=t+(this.$$url?n+this.$$url:""),this.$$urlUpdatedByLocation=!0},this.$$parseLinkUrl=function(e,n){return nr(t)===nr(e)&&(this.$$parse(e),!0)}}function ar(t,e,n){this.$$html5=!0,or.apply(this,arguments),this.$$parseLinkUrl=function(r,i){return i&&"#"===i[0]?(this.hash(i.slice(1)),!0):(t===nr(r)?o=r:(a=er(e,r))?o=t+n+a:e===r+"/"&&(o=e),o&&this.$$parse(o),!!o);var o,a},this.$$compose=function(){var e=xt(this.$$search),r=this.$$hash?"#"+kt(this.$$hash):"";this.$$url=Jn(this.$$path)+(e?"?"+e:"")+r,this.$$absUrl=t+n+this.$$url,this.$$urlUpdatedByLocation=!0}}var sr={$$absUrl:"",$$html5:!1,$$replace:!1,absUrl:cr("$$absUrl"),url:function(t){if(z(t))return this.$$url;var e=Gn.exec(t);return(e[1]||""===t)&&this.path(decodeURIComponent(e[1])),(e[2]||e[1]||""===t)&&this.search(e[3]||""),this.hash(e[5]||""),this},protocol:cr("$$protocol"),host:cr("$$host"),port:cr("$$port"),path:lr("$$path",(function(t){return"/"===(t=null!==t?t.toString():"").charAt(0)?t:"/"+t})),search:function(t,e){switch(arguments.length){case 0:return this.$$search;case 1:if(U(t)||V(t))t=t.toString(),this.$$search=$t(t);else{if(!N(t))throw Kn("isrcharg","The first argument of the `$location#search()` call must be a string or an object.");x(t=at(t,{}),(function(e,n){null==e&&delete t[n]})),this.$$search=t}break;default:z(e)||null===e?delete this.$$search[t]:this.$$search[t]=e}return this.$$compose(),this},hash:lr("$$hash",(function(t){return null!==t?t.toString():""})),replace:function(){return this.$$replace=!0,this}};function cr(t){return function(){return this[t]}}function lr(t,e){return function(n){return z(n)?this[t]:(this[t]=e(n),this.$$compose(),this)}}function ur(){var t="!",e={enabled:!1,requireBase:!0,rewriteLinks:!0};this.hashPrefix=function(e){return L(e)?(t=e,this):t},this.html5Mode=function(t){return Q(t)?(e.enabled=t,this):N(t)?(Q(t.enabled)&&(e.enabled=t.enabled),Q(t.requireBase)&&(e.requireBase=t.requireBase),(Q(t.rewriteLinks)||U(t.rewriteLinks))&&(e.rewriteLinks=t.rewriteLinks),this):e},this.$get=["$rootScope","$browser","$sniffer","$rootElement","$window",function(n,r,i,o,a){var s,c,l,u,p=r.baseHref(),f=r.url();if(e.enabled){if(!p&&e.requireBase)throw Kn("nobase","$location in HTML5 mode requires a <base> tag to be present!");l=(u=f).substring(0,u.indexOf("/",u.indexOf("//")+2))+(p||"/"),c=i.history?ir:ar}else l=nr(f),c=or;var _=function(t){return t.substr(0,nr(t).lastIndexOf("/")+1)}(l);(s=new c(l,_,"#"+t)).$$parseLinkUrl(f,f),s.$$state=r.state();var h=/^\s*(javascript|mailto):/i;function m(t,e,n){var i=s.url(),o=s.$$state;try{r.url(t,e,n),s.$$state=r.state()}catch(t){throw s.url(i),s.$$state=o,t}}o.on("click",(function(t){var i=e.rewriteLinks;if(i&&!t.ctrlKey&&!t.metaKey&&!t.shiftKey&&2!==t.which&&2!==t.button){for(var c=d(t.target);"a"!==rt(c[0]);)if(c[0]===o[0]||!(c=c.parent())[0])return;if(!U(i)||!z(c.attr(i))){var l=c.prop("href"),u=c.attr("href")||c.attr("xlink:href");N(l)&&"[object SVGAnimatedString]"===l.toString()&&(l=Zr(l.animVal).href),h.test(l)||!l||c.attr("target")||t.isDefaultPrevented()||s.$$parseLinkUrl(l,u)&&(t.preventDefault(),s.absUrl()!==r.url()&&(n.$apply(),a.angular["ff-684208-preventDefault"]=!0))}}})),rr(s.absUrl())!==rr(f)&&r.url(s.absUrl(),!0);var g=!0;return r.onUrlChange((function(t,e){tr(t,_)?(n.$evalAsync((function(){var r,i=s.absUrl(),o=s.$$state;t=rr(t),s.$$parse(t),s.$$state=e,r=n.$broadcast("$locationChangeStart",t,i,e,o).defaultPrevented,s.absUrl()===t&&(r?(s.$$parse(i),s.$$state=o,m(i,!1,o)):(g=!1,v(i,o)))})),n.$$phase||n.$digest()):a.location.href=t})),n.$watch((function(){if(g||s.$$urlUpdatedByLocation){s.$$urlUpdatedByLocation=!1;var t=rr(r.url()),e=rr(s.absUrl()),o=r.state(),a=s.$$replace,c=t!==e||s.$$html5&&i.history&&o!==s.$$state;(g||c)&&(g=!1,n.$evalAsync((function(){var e=s.absUrl(),r=n.$broadcast("$locationChangeStart",e,t,s.$$state,o).defaultPrevented;s.absUrl()===e&&(r?(s.$$parse(t),s.$$state=o):(c&&m(e,a,o===s.$$state?null:s.$$state),v(t,o)))})))}s.$$replace=!1})),s;function v(t,e){n.$broadcast("$locationChangeSuccess",s.absUrl(),t,s.$$state,e)}}]}function dr(){var t=!0,e=this;this.debugEnabled=function(e){return L(e)?(t=e,this):t},this.$get=["$window",function(n){var r,i=u||/\bEdge\//.test(n.navigator&&n.navigator.userAgent);return{log:a("log"),info:a("info"),warn:a("warn"),error:a("error"),debug:(r=a("debug"),function(){t&&r.apply(e,arguments)})};function o(t){return W(t)&&(t.stack&&i?t=t.message&&-1===t.stack.indexOf(t.message)?"Error: "+t.message+"\n"+t.stack:t.stack:t.sourceURL&&(t=t.message+"\n"+t.sourceURL+":"+t.line)),t}function a(t){var e=n.console||{},r=e[t]||e.log||M;return function(){var t=[];return x(arguments,(function(e){t.push(o(e))})),Function.prototype.apply.call(r,e,t)}}}]}x([ar,or,ir],(function(t){t.prototype=Object.create(sr),t.prototype.state=function(e){if(!arguments.length)return this.$$state;if(t!==ir||!this.$$html5)throw Kn("nostate","History API state support is available only in HTML5 mode and only in browsers supporting HTML5 History API");return this.$$state=z(e)?null:e,this.$$urlUpdatedByLocation=!0,this}}));var pr=i("$parse"),fr={}.constructor.prototype.valueOf;function _r(t){return t+""}var hr=Nt();x("+ - * / % === !== == != < > <= >= && || ! = |".split(" "),(function(t){hr[t]=!0}));var mr={n:"\n",f:"\f",r:"\r",t:"\t",v:"\v","'":"'",'"':'"'},gr=function(t){this.options=t};gr.prototype={constructor:gr,lex:function(t){for(this.text=t,this.index=0,this.tokens=[];this.index<this.text.length;){var e=this.text.charAt(this.index);if('"'===e||"'"===e)this.readString(e);else if(this.isNumber(e)||"."===e&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdentifierStart(this.peekMultichar()))this.readIdent();else if(this.is(e,"(){}[].,;:?"))this.tokens.push({index:this.index,text:e}),this.index++;else if(this.isWhitespace(e))this.index++;else{var n=e+this.peek(),r=n+this.peek(2),i=hr[e],o=hr[n],a=hr[r];if(i||o||a){var s=a?r:o?n:e;this.tokens.push({index:this.index,text:s,operator:!0}),this.index+=s.length}else this.throwError("Unexpected next character ",this.index,this.index+1)}}return this.tokens},is:function(t,e){return-1!==e.indexOf(t)},peek:function(t){var e=t||1;return this.index+e<this.text.length&&this.text.charAt(this.index+e)},isNumber:function(t){return"0"<=t&&t<="9"&&"string"==typeof t},isWhitespace:function(t){return" "===t||"\r"===t||"\t"===t||"\n"===t||"\v"===t||""===t},isIdentifierStart:function(t){return this.options.isIdentifierStart?this.options.isIdentifierStart(t,this.codePointAt(t)):this.isValidIdentifierStart(t)},isValidIdentifierStart:function(t){return"a"<=t&&t<="z"||"A"<=t&&t<="Z"||"_"===t||"$"===t},isIdentifierContinue:function(t){return this.options.isIdentifierContinue?this.options.isIdentifierContinue(t,this.codePointAt(t)):this.isValidIdentifierContinue(t)},isValidIdentifierContinue:function(t,e){return this.isValidIdentifierStart(t,e)||this.isNumber(t)},codePointAt:function(t){return 1===t.length?t.charCodeAt(0):(t.charCodeAt(0)<<10)+t.charCodeAt(1)-56613888},peekMultichar:function(){var t=this.text.charAt(this.index),e=this.peek();if(!e)return t;var n=t.charCodeAt(0),r=e.charCodeAt(0);return n>=55296&&n<=56319&&r>=56320&&r<=57343?t+e:t},isExpOperator:function(t){return"-"===t||"+"===t||this.isNumber(t)},throwError:function(t,e,n){n=n||this.index;var r=L(e)?"s "+e+"-"+this.index+" ["+this.text.substring(e,n)+"]":" "+n;throw pr("lexerr","Lexer Error: {0} at column{1} in expression [{2}].",t,r,this.text)},readNumber:function(){for(var t="",e=this.index;this.index<this.text.length;){var n=c(this.text.charAt(this.index));if("."===n||this.isNumber(n))t+=n;else{var r=this.peek();if("e"===n&&this.isExpOperator(r))t+=n;else if(this.isExpOperator(n)&&r&&this.isNumber(r)&&"e"===t.charAt(t.length-1))t+=n;else{if(!this.isExpOperator(n)||r&&this.isNumber(r)||"e"!==t.charAt(t.length-1))break;this.throwError("Invalid exponent")}}this.index++}this.tokens.push({index:e,text:t,constant:!0,value:Number(t)})},readIdent:function(){var t=this.index;for(this.index+=this.peekMultichar().length;this.index<this.text.length;){var e=this.peekMultichar();if(!this.isIdentifierContinue(e))break;this.index+=e.length}this.tokens.push({index:t,text:this.text.slice(t,this.index),identifier:!0})},readString:function(t){var e=this.index;this.index++;for(var n="",r=t,i=!1;this.index<this.text.length;){var o=this.text.charAt(this.index);if(r+=o,i){if("u"===o){var a=this.text.substring(this.index+1,this.index+5);a.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+a+"]"),this.index+=4,n+=String.fromCharCode(parseInt(a,16))}else{n+=mr[o]||o}i=!1}else if("\\"===o)i=!0;else{if(o===t)return this.index++,void this.tokens.push({index:e,text:r,constant:!0,value:n});n+=o}this.index++}this.throwError("Unterminated quote",e)}};var vr=function(t,e){this.lexer=t,this.options=e};function br(t,e){return void 0!==t?t:e}function yr(t,e){return void 0===t?e:void 0===e?t:t+e}vr.Program="Program",vr.ExpressionStatement="ExpressionStatement",vr.AssignmentExpression="AssignmentExpression",vr.ConditionalExpression="ConditionalExpression",vr.LogicalExpression="LogicalExpression",vr.BinaryExpression="BinaryExpression",vr.UnaryExpression="UnaryExpression",vr.CallExpression="CallExpression",vr.MemberExpression="MemberExpression",vr.Identifier="Identifier",vr.Literal="Literal",vr.ArrayExpression="ArrayExpression",vr.Property="Property",vr.ObjectExpression="ObjectExpression",vr.ThisExpression="ThisExpression",vr.LocalsExpression="LocalsExpression",vr.NGValueParameter="NGValueParameter",vr.prototype={ast:function(t){this.text=t,this.tokens=this.lexer.lex(t);var e=this.program();return 0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]),e},program:function(){for(var t=[];;)if(this.tokens.length>0&&!this.peek("}",")",";","]")&&t.push(this.expressionStatement()),!this.expect(";"))return{type:vr.Program,body:t}},expressionStatement:function(){return{type:vr.ExpressionStatement,expression:this.filterChain()}},filterChain:function(){for(var t=this.expression();this.expect("|");)t=this.filter(t);return t},expression:function(){return this.assignment()},assignment:function(){var t=this.ternary();if(this.expect("=")){if(!xr(t))throw pr("lval","Trying to assign a value to a non l-value");t={type:vr.AssignmentExpression,left:t,right:this.assignment(),operator:"="}}return t},ternary:function(){var t,e,n=this.logicalOR();return this.expect("?")&&(t=this.expression(),this.consume(":"))?(e=this.expression(),{type:vr.ConditionalExpression,test:n,alternate:t,consequent:e}):n},logicalOR:function(){for(var t=this.logicalAND();this.expect("||");)t={type:vr.LogicalExpression,operator:"||",left:t,right:this.logicalAND()};return t},logicalAND:function(){for(var t=this.equality();this.expect("&&");)t={type:vr.LogicalExpression,operator:"&&",left:t,right:this.equality()};return t},equality:function(){for(var t,e=this.relational();t=this.expect("==","!=","===","!==");)e={type:vr.BinaryExpression,operator:t.text,left:e,right:this.relational()};return e},relational:function(){for(var t,e=this.additive();t=this.expect("<",">","<=",">=");)e={type:vr.BinaryExpression,operator:t.text,left:e,right:this.additive()};return e},additive:function(){for(var t,e=this.multiplicative();t=this.expect("+","-");)e={type:vr.BinaryExpression,operator:t.text,left:e,right:this.multiplicative()};return e},multiplicative:function(){for(var t,e=this.unary();t=this.expect("*","/","%");)e={type:vr.BinaryExpression,operator:t.text,left:e,right:this.unary()};return e},unary:function(){var t;return(t=this.expect("+","-","!"))?{type:vr.UnaryExpression,operator:t.text,prefix:!0,argument:this.unary()}:this.primary()},primary:function(){var t,e;for(this.expect("(")?(t=this.filterChain(),this.consume(")")):this.expect("[")?t=this.arrayDeclaration():this.expect("{")?t=this.object():this.selfReferential.hasOwnProperty(this.peek().text)?t=at(this.selfReferential[this.consume().text]):this.options.literals.hasOwnProperty(this.peek().text)?t={type:vr.Literal,value:this.options.literals[this.consume().text]}:this.peek().identifier?t=this.identifier():this.peek().constant?t=this.constant():this.throwError("not a primary expression",this.peek());e=this.expect("(","[",".");)"("===e.text?(t={type:vr.CallExpression,callee:t,arguments:this.parseArguments()},this.consume(")")):"["===e.text?(t={type:vr.MemberExpression,object:t,property:this.expression(),computed:!0},this.consume("]")):"."===e.text?t={type:vr.MemberExpression,object:t,property:this.identifier(),computed:!1}:this.throwError("IMPOSSIBLE");return t},filter:function(t){for(var e=[t],n={type:vr.CallExpression,callee:this.identifier(),arguments:e,filter:!0};this.expect(":");)e.push(this.expression());return n},parseArguments:function(){var t=[];if(")"!==this.peekToken().text)do{t.push(this.filterChain())}while(this.expect(","));return t},identifier:function(){var t=this.consume();return t.identifier||this.throwError("is not a valid identifier",t),{type:vr.Identifier,name:t.text}},constant:function(){return{type:vr.Literal,value:this.consume().value}},arrayDeclaration:function(){var t=[];if("]"!==this.peekToken().text)do{if(this.peek("]"))break;t.push(this.expression())}while(this.expect(","));return this.consume("]"),{type:vr.ArrayExpression,elements:t}},object:function(){var t,e=[];if("}"!==this.peekToken().text)do{if(this.peek("}"))break;t={type:vr.Property,kind:"init"},this.peek().constant?(t.key=this.constant(),t.computed=!1,this.consume(":"),t.value=this.expression()):this.peek().identifier?(t.key=this.identifier(),t.computed=!1,this.peek(":")?(this.consume(":"),t.value=this.expression()):t.value=t.key):this.peek("[")?(this.consume("["),t.key=this.expression(),this.consume("]"),t.computed=!0,this.consume(":"),t.value=this.expression()):this.throwError("invalid key",this.peek()),e.push(t)}while(this.expect(","));return this.consume("}"),{type:vr.ObjectExpression,properties:e}},throwError:function(t,e){throw pr("syntax","Syntax Error: Token '{0}' {1} at column {2} of the expression [{3}] starting at [{4}].",e.text,t,e.index+1,this.text,this.text.substring(e.index))},consume:function(t){if(0===this.tokens.length)throw pr("ueoe","Unexpected end of expression: {0}",this.text);var e=this.expect(t);return e||this.throwError("is unexpected, expecting ["+t+"]",this.peek()),e},peekToken:function(){if(0===this.tokens.length)throw pr("ueoe","Unexpected end of expression: {0}",this.text);return this.tokens[0]},peek:function(t,e,n,r){return this.peekAhead(0,t,e,n,r)},peekAhead:function(t,e,n,r,i){if(this.tokens.length>t){var o=this.tokens[t],a=o.text;if(a===e||a===n||a===r||a===i||!e&&!n&&!r&&!i)return o}return!1},expect:function(t,e,n,r){var i=this.peek(t,e,n,r);return!!i&&(this.tokens.shift(),i)},selfReferential:{this:{type:vr.ThisExpression},$locals:{type:vr.LocalsExpression}}};function wr(t,e,n){var r,i,o,a=t.isPure=function(t,e){switch(t.type){case vr.MemberExpression:if(t.computed)return!1;break;case vr.UnaryExpression:return 1;case vr.BinaryExpression:return"+"!==t.operator&&1;case vr.CallExpression:return!1}return void 0===e?2:e}(t,n);switch(t.type){case vr.Program:r=!0,x(t.body,(function(t){wr(t.expression,e,a),r=r&&t.expression.constant})),t.constant=r;break;case vr.Literal:t.constant=!0,t.toWatch=[];break;case vr.UnaryExpression:wr(t.argument,e,a),t.constant=t.argument.constant,t.toWatch=t.argument.toWatch;break;case vr.BinaryExpression:wr(t.left,e,a),wr(t.right,e,a),t.constant=t.left.constant&&t.right.constant,t.toWatch=t.left.toWatch.concat(t.right.toWatch);break;case vr.LogicalExpression:wr(t.left,e,a),wr(t.right,e,a),t.constant=t.left.constant&&t.right.constant,t.toWatch=t.constant?[]:[t];break;case vr.ConditionalExpression:wr(t.test,e,a),wr(t.alternate,e,a),wr(t.consequent,e,a),t.constant=t.test.constant&&t.alternate.constant&&t.consequent.constant,t.toWatch=t.constant?[]:[t];break;case vr.Identifier:t.constant=!1,t.toWatch=[t];break;case vr.MemberExpression:wr(t.object,e,a),t.computed&&wr(t.property,e,a),t.constant=t.object.constant&&(!t.computed||t.property.constant),t.toWatch=t.constant?[]:[t];break;case vr.CallExpression:o=!!t.filter&&function(t,e){return!t(e).$stateful}(e,t.callee.name),r=o,i=[],x(t.arguments,(function(t){wr(t,e,a),r=r&&t.constant,i.push.apply(i,t.toWatch)})),t.constant=r,t.toWatch=o?i:[t];break;case vr.AssignmentExpression:wr(t.left,e,a),wr(t.right,e,a),t.constant=t.left.constant&&t.right.constant,t.toWatch=[t];break;case vr.ArrayExpression:r=!0,i=[],x(t.elements,(function(t){wr(t,e,a),r=r&&t.constant,i.push.apply(i,t.toWatch)})),t.constant=r,t.toWatch=i;break;case vr.ObjectExpression:r=!0,i=[],x(t.properties,(function(t){wr(t.value,e,a),r=r&&t.value.constant,i.push.apply(i,t.value.toWatch),t.computed&&(wr(t.key,e,!1),r=r&&t.key.constant,i.push.apply(i,t.key.toWatch))})),t.constant=r,t.toWatch=i;break;case vr.ThisExpression:case vr.LocalsExpression:t.constant=!1,t.toWatch=[]}}function $r(t){if(1===t.length){var e=t[0].expression,n=e.toWatch;return 1!==n.length||n[0]!==e?n:void 0}}function xr(t){return t.type===vr.Identifier||t.type===vr.MemberExpression}function kr(t){if(1===t.body.length&&xr(t.body[0].expression))return{type:vr.AssignmentExpression,left:t.body[0].expression,right:{type:vr.NGValueParameter},operator:"="}}function Cr(t){this.$filter=t}function Sr(t){this.$filter=t}function Ar(t,e,n){this.ast=new vr(t,n),this.astCompiler=n.csp?new Sr(e):new Cr(e)}function Er(t){return G(t.valueOf)?t.valueOf():fr.call(t)}function jr(){var t,e,n=Nt(),r={true:!0,false:!1,null:null,undefined:void 0};this.addLiteral=function(t,e){r[t]=e},this.setIdentifierFns=function(n,r){return t=n,e=r,this},this.$get=["$filter",function(i){var o={csp:lt().noUnsafeEval,literals:at(r),isIdentifierStart:G(t)&&t,isIdentifierContinue:G(e)&&e};return function(t,e){var r,a,p;switch(typeof t){case"string":if(t=t.trim(),!(r=n[p=t])){":"===t.charAt(0)&&":"===t.charAt(1)&&(a=!0,t=t.substring(2));var f=new Ar(new gr(o),i,o);(r=f.parse(t)).constant?r.$$watchDelegate=u:a?r.$$watchDelegate=r.literal?l:c:r.inputs&&(r.$$watchDelegate=s),n[p]=r}return d(r,e);case"function":return d(t,e);default:return d(M,e)}};function a(t,e,n){return null==t||null==e?t===e:!("object"==typeof t&&"object"==typeof(t=Er(t))&&!n)&&(t===e||t!=t&&e!=e)}function s(t,e,n,r,i){var o,s=r.inputs;if(1===s.length){var c=a;return s=s[0],t.$watch((function(t){var e=s(t);return a(e,c,s.isPure)||(o=r(t,void 0,void 0,[e]),c=e&&Er(e)),o}),e,n,i)}for(var l=[],u=[],d=0,p=s.length;d<p;d++)l[d]=a,u[d]=null;return t.$watch((function(t){for(var e=!1,n=0,i=s.length;n<i;n++){var c=s[n](t);(e||(e=!a(c,l[n],s[n].isPure)))&&(u[n]=c,l[n]=c&&Er(c))}return e&&(o=r(t,void 0,void 0,u)),o}),e,n,i)}function c(t,e,n,r,i){var o,a;return o=r.inputs?s(t,c,n,r,i):t.$watch((function(t){return r(t)}),c,n);function c(t,n,r){a=t,G(e)&&e(t,n,r),L(t)&&r.$$postDigest((function(){L(a)&&o()}))}}function l(t,e,n,r){var i,o;return i=t.$watch((function(t){return r(t)}),(function(t,n,r){o=t,G(e)&&e(t,n,r),a(t)&&r.$$postDigest((function(){a(o)&&i()}))}),n),i;function a(t){var e=!0;return x(t,(function(t){L(t)||(e=!1)})),e}}function u(t,e,n,r){var i=t.$watch((function(t){return i(),r(t)}),e,n);return i}function d(t,e){if(!e)return t;var n=t.$$watchDelegate,r=!1,i=n!==l&&n!==c?function(n,i,o,a){var s=r&&a?a[0]:t(n,i,o,a);return e(s,n,i)}:function(n,r,i,o){var a=t(n,r,i,o),s=e(a,n,r);return L(a)?s:a};return r=!t.inputs,n&&n!==s?(i.$$watchDelegate=n,i.inputs=t.inputs):e.$stateful||(i.$$watchDelegate=s,i.inputs=t.inputs?t.inputs:[t]),i.inputs&&(i.inputs=i.inputs.map((function(t){return 2===t.isPure?function(e){return t(e)}:t}))),i}}]}function Or(){var t=!0;this.$get=["$rootScope","$exceptionHandler",function(e,n){return qr((function(t){e.$evalAsync(t)}),n,t)}],this.errorOnUnhandledRejections=function(e){return L(e)?(t=e,this):t}}function Tr(){var t=!0;this.$get=["$browser","$exceptionHandler",function(e,n){return qr((function(t){e.defer(t)}),n,t)}],this.errorOnUnhandledRejections=function(e){return L(e)?(t=e,this):t}}function qr(t,e,n){var r=i("$q",TypeError),o=0,a=[];function s(){return new c}function c(){var t=this.promise=new l;this.resolve=function(e){p(t,e)},this.reject=function(e){_(t,e)},this.notify=function(e){m(t,e)}}function l(){this.$$state={status:0}}function u(){for(;!o&&a.length;){var t=a.shift();if(!Pr(t)){Mr(t);var n="Possibly unhandled rejection: "+Ht(t.value);W(t.value)?e(t.value,n):e(n)}}}function d(e){!n||e.pending||2!==e.status||Pr(e)||(0===o&&0===a.length&&t(u),a.push(e)),!e.processScheduled&&e.pending&&(e.processScheduled=!0,++o,t((function(){!function(e){var r,i,a;a=e.pending,e.processScheduled=!1,e.pending=void 0;try{for(var s=0,c=a.length;s<c;++s){Mr(e),i=a[s][0],r=a[s][e.status];try{G(r)?p(i,r(e.value)):1===e.status?p(i,e.value):_(i,e.value)}catch(t){_(i,t)}}}finally{--o,n&&0===o&&t(u)}}(e)})))}function p(t,e){t.$$state.status||(e===t?h(t,r("qcycle","Expected promise to be resolved with value other than itself '{0}'",e)):f(t,e))}function f(t,e){var n,r=!1;try{(N(e)||G(e))&&(n=e.then),G(n)?(t.$$state.status=-1,n.call(e,(function(e){if(r)return;r=!0,f(t,e)}),i,(function(e){m(t,e)}))):(t.$$state.value=e,t.$$state.status=1,d(t.$$state))}catch(t){i(t)}function i(e){r||(r=!0,h(t,e))}}function _(t,e){t.$$state.status||h(t,e)}function h(t,e){t.$$state.value=e,t.$$state.status=2,d(t.$$state)}function m(n,r){var i=n.$$state.pending;n.$$state.status<=0&&i&&i.length&&t((function(){for(var t,n,o=0,a=i.length;o<a;o++){n=i[o][0],t=i[o][3];try{m(n,G(t)?t(r):r)}catch(t){e(t)}}}))}function g(t){var e=new l;return _(e,t),e}function v(t,e,n){var r=null;try{G(n)&&(r=n())}catch(t){return g(t)}return X(r)?r.then((function(){return e(t)}),g):e(t)}function b(t,e,n,r){var i=new l;return p(i,t),i.then(e,n,r)}j(l.prototype,{then:function(t,e,n){if(z(t)&&z(e)&&z(n))return this;var r=new l;return this.$$state.pending=this.$$state.pending||[],this.$$state.pending.push([r,t,e,n]),this.$$state.status>0&&d(this.$$state),r},catch:function(t){return this.then(null,t)},finally:function(t,e){return this.then((function(e){return v(e,y,t)}),(function(e){return v(e,g,t)}),e)}});var y=b;function w(t){if(!G(t))throw r("norslvr","Expected resolverFn, got '{0}'",t);var e=new l;return t((function(t){p(e,t)}),(function(t){_(e,t)})),e}return w.prototype=l.prototype,w.defer=s,w.reject=g,w.when=b,w.resolve=y,w.all=function(t){var e=new l,n=0,r=B(t)?[]:{};return x(t,(function(t,i){n++,b(t).then((function(t){r[i]=t,--n||p(e,r)}),(function(t){_(e,t)}))})),0===n&&p(e,r),e},w.race=function(t){var e=s();return x(t,(function(t){b(t).then(e.resolve,e.reject)})),e.promise},w}function Pr(t){return!!t.pur}function Mr(t){t.pur=!0}function Ir(t){Mr(t.$$state)}function Rr(){this.$get=["$window","$timeout",function(t,e){var n=t.requestAnimationFrame||t.webkitRequestAnimationFrame,r=t.cancelAnimationFrame||t.webkitCancelAnimationFrame||t.webkitCancelRequestAnimationFrame,i=!!n,o=i?function(t){var e=n(t);return function(){r(e)}}:function(t){var n=e(t,16.66,!1);return function(){e.cancel(n)}};return o.supported=i,o}]}function Dr(){var t=10,e=i("$rootScope"),n=null,r=null;this.digestTtl=function(e){return arguments.length&&(t=e),t},this.$get=["$exceptionHandler","$parse","$browser",function(i,o,a){function c(t){t.currentScope.$$destroyed=!0}function l(t){9===u&&(t.$$childHead&&l(t.$$childHead),t.$$nextSibling&&l(t.$$nextSibling)),t.$parent=t.$$nextSibling=t.$$prevSibling=t.$$childHead=t.$$childTail=t.$root=t.$$watchers=null}function d(){this.$id=S(),this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null,this.$root=this,this.$$destroyed=!1,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$$isolateBindings=null}d.prototype={constructor:d,$new:function(t,e){var n;return e=e||this,t?(n=new d).$root=this.$root:(this.$$ChildScope||(this.$$ChildScope=function(t){function e(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$id=S(),this.$$ChildScope=null}return e.prototype=t,e}(this)),n=new this.$$ChildScope),n.$parent=e,n.$$prevSibling=e.$$childTail,e.$$childHead?(e.$$childTail.$$nextSibling=n,e.$$childTail=n):e.$$childHead=e.$$childTail=n,(t||e!==this)&&n.$on("$destroy",c),n},$watch:function(t,e,r,i){var a=o(t);if(a.$$watchDelegate)return a.$$watchDelegate(this,e,r,a,t);var s=this,c=s.$$watchers,l={fn:e,last:w,get:a,exp:i||t,eq:!!r};return n=null,G(e)||(l.fn=M),c||((c=s.$$watchers=[]).$$digestWatchIndex=-1),c.unshift(l),c.$$digestWatchIndex++,b(this,1),function(){var t=ot(c,l);t>=0&&(b(s,-1),t<c.$$digestWatchIndex&&c.$$digestWatchIndex--),n=null}},$watchGroup:function(t,e){var n=new Array(t.length),r=new Array(t.length),i=[],o=this,a=!1,s=!0;if(!t.length){var c=!0;return o.$evalAsync((function(){c&&e(r,r,o)})),function(){c=!1}}if(1===t.length)return this.$watch(t[0],(function(t,i,o){r[0]=t,n[0]=i,e(r,t===i?r:n,o)}));function l(){a=!1,s?(s=!1,e(r,r,o)):e(r,n,o)}return x(t,(function(t,e){var s=o.$watch(t,(function(t,i){r[e]=t,n[e]=i,a||(a=!0,o.$evalAsync(l))}));i.push(s)})),function(){for(;i.length;)i.shift()()}},$watchCollection:function(t,e){h.$stateful=!0;var n,r,i,a=this,c=e.length>1,l=0,u=o(t,h),d=[],p={},f=!0,_=0;function h(t){var e,i,o,a;if(!z(n=t)){if(N(n))if($(n)){r!==d&&(_=(r=d).length=0,l++),e=n.length,_!==e&&(l++,r.length=_=e);for(var c=0;c<e;c++)a=r[c],o=n[c],a!=a&&o!=o||a===o||(l++,r[c]=o)}else{for(i in r!==p&&(r=p={},_=0,l++),e=0,n)s.call(n,i)&&(e++,o=n[i],a=r[i],i in r?a!=a&&o!=o||a===o||(l++,r[i]=o):(_++,r[i]=o,l++));if(_>e)for(i in l++,r)s.call(n,i)||(_--,delete r[i])}else r!==n&&(r=n,l++);return l}}return this.$watch(u,(function(){if(f?(f=!1,e(n,n,a)):e(n,i,a),c)if(N(n))if($(n)){i=new Array(n.length);for(var t=0;t<n.length;t++)i[t]=n[t]}else for(var r in i={},n)s.call(n,r)&&(i[r]=n[r]);else i=n}))},$digest:function(){var o,s,c,l,u,d,h,b,y,$=t,x=this,C=[];g("$digest"),a.$$checkUrlChange(),this===p&&null!==r&&(a.defer.cancel(r),k()),n=null;do{u=!1,h=x;for(var S=0;S<f.length;S++){try{(0,(y=f[S]).fn)(y.scope,y.locals)}catch(t){i(t)}n=null}f.length=0;t:do{if(l=h.$$watchers)for(l.$$digestWatchIndex=l.length;l.$$digestWatchIndex--;)try{if(o=l[l.$$digestWatchIndex])if((s=(0,o.get)(h))===(c=o.last)||(o.eq?ct(s,c):q(s)&&q(c))){if(o===n){u=!1;break t}}else u=!0,n=o,o.last=o.eq?at(s,null):s,(0,o.fn)(s,c===w?s:c,h),$<5&&(C[b=4-$]||(C[b]=[]),C[b].push({msg:G(o.exp)?"fn: "+(o.exp.name||o.exp.toString()):o.exp,newVal:s,oldVal:c}))}catch(t){i(t)}if(!(d=h.$$watchersCount&&h.$$childHead||h!==x&&h.$$nextSibling))for(;h!==x&&!(d=h.$$nextSibling);)h=h.$parent}while(h=d);if((u||f.length)&&!$--)throw v(),e("infdig","{0} $digest() iterations reached. Aborting!\nWatchers fired in the last 5 iterations: {1}",t,C)}while(u||f.length);for(v();m<_.length;)try{_[m++]()}catch(t){i(t)}_.length=m=0,a.$$checkUrlChange()},$destroy:function(){if(!this.$$destroyed){var t=this.$parent;for(var e in this.$broadcast("$destroy"),this.$$destroyed=!0,this===p&&a.$$applicationDestroyed(),b(this,-this.$$watchersCount),this.$$listenerCount)y(this,this.$$listenerCount[e],e);t&&t.$$childHead===this&&(t.$$childHead=this.$$nextSibling),t&&t.$$childTail===this&&(t.$$childTail=this.$$prevSibling),this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling),this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling),this.$destroy=this.$digest=this.$apply=this.$evalAsync=this.$applyAsync=M,this.$on=this.$watch=this.$watchGroup=function(){return M},this.$$listeners={},this.$$nextSibling=null,l(this)}},$eval:function(t,e){return o(t)(this,e)},$evalAsync:function(t,e){p.$$phase||f.length||a.defer((function(){f.length&&p.$digest()})),f.push({scope:this,fn:o(t),locals:e})},$$postDigest:function(t){_.push(t)},$apply:function(t){try{g("$apply");try{return this.$eval(t)}finally{v()}}catch(t){i(t)}finally{try{p.$digest()}catch(t){throw i(t),t}}},$applyAsync:function(t){var e=this;t&&h.push((function(){e.$eval(t)})),t=o(t),null===r&&(r=a.defer((function(){p.$apply(k)})))},$on:function(t,e){var n=this.$$listeners[t];n||(this.$$listeners[t]=n=[]),n.push(e);var r=this;do{r.$$listenerCount[t]||(r.$$listenerCount[t]=0),r.$$listenerCount[t]++}while(r=r.$parent);var i=this;return function(){var r=n.indexOf(e);-1!==r&&(n[r]=null,y(i,1,t))}},$emit:function(t,e){var n,r,o,a=[],s=this,c=!1,l={name:t,targetScope:s,stopPropagation:function(){c=!0},preventDefault:function(){l.defaultPrevented=!0},defaultPrevented:!1},u=dt([l],arguments,1);do{for(n=s.$$listeners[t]||a,l.currentScope=s,r=0,o=n.length;r<o;r++)if(n[r])try{n[r].apply(null,u)}catch(t){i(t)}else n.splice(r,1),r--,o--;if(c)return l.currentScope=null,l;s=s.$parent}while(s);return l.currentScope=null,l},$broadcast:function(t,e){var n=this,r=n,o=n,a={name:t,targetScope:n,preventDefault:function(){a.defaultPrevented=!0},defaultPrevented:!1};if(!n.$$listenerCount[t])return a;for(var s,c,l,u=dt([a],arguments,1);r=o;){for(a.currentScope=r,c=0,l=(s=r.$$listeners[t]||[]).length;c<l;c++)if(s[c])try{s[c].apply(null,u)}catch(t){i(t)}else s.splice(c,1),c--,l--;if(!(o=r.$$listenerCount[t]&&r.$$childHead||r!==n&&r.$$nextSibling))for(;r!==n&&!(o=r.$$nextSibling);)r=r.$parent}return a.currentScope=null,a}};var p=new d,f=p.$$asyncQueue=[],_=p.$$postDigestQueue=[],h=p.$$applyAsyncQueue=[],m=0;return p;function g(t){if(p.$$phase)throw e("inprog","{0} already in progress",p.$$phase);p.$$phase=t}function v(){p.$$phase=null}function b(t,e){do{t.$$watchersCount+=e}while(t=t.$parent)}function y(t,e,n){do{t.$$listenerCount[n]-=e,0===t.$$listenerCount[n]&&delete t.$$listenerCount[n]}while(t=t.$parent)}function w(){}function k(){for(;h.length;)try{h.shift()()}catch(t){i(t)}r=null}}]}function zr(){var t=/^\s*(https?|ftp|mailto|tel|file):/,e=/^\s*((https?|ftp|file|blob):|data:image\/)/;this.aHrefSanitizationWhitelist=function(e){return L(e)?(t=e,this):t},this.imgSrcSanitizationWhitelist=function(t){return L(t)?(e=t,this):e},this.$get=function(){return function(n,r){var i,o=r?e:t;return""===(i=Zr(n).href)||i.match(o)?n:"unsafe:"+i}}}Cr.prototype={compile:function(t){var e=this;this.state={nextId:0,filters:{},fn:{vars:[],body:[],own:{}},assign:{vars:[],body:[],own:{}},inputs:[]},wr(t,e.$filter);var n,r="";if(this.stage="assign",n=kr(t)){this.state.computing="assign";var i=this.nextId();this.recurse(n,i),this.return_(i),r="fn.assign="+this.generateFunction("assign","s,v,l")}var o=$r(t.body);e.stage="inputs",x(o,(function(t,n){var r="fn"+n;e.state[r]={vars:[],body:[],own:{}},e.state.computing=r;var i=e.nextId();e.recurse(t,i),e.return_(i),e.state.inputs.push({name:r,isPure:t.isPure}),t.watchId=n})),this.state.computing="fn",this.stage="main",this.recurse(t);var a='"'+this.USE+" "+this.STRICT+'";\n'+this.filterPrefix()+"var fn="+this.generateFunction("fn","s,l,a,i")+r+this.watchFns()+"return fn;",s=new Function("$filter","getStringValue","ifDefined","plus",a)(this.$filter,_r,br,yr);return this.state=this.stage=void 0,s},USE:"use",STRICT:"strict",watchFns:function(){var t=[],e=this.state.inputs,n=this;return x(e,(function(e){t.push("var "+e.name+"="+n.generateFunction(e.name,"s")),e.isPure&&t.push(e.name,".isPure="+JSON.stringify(e.isPure)+";")})),e.length&&t.push("fn.inputs=["+e.map((function(t){return t.name})).join(",")+"];"),t.join("")},generateFunction:function(t,e){return"function("+e+"){"+this.varsPrefix(t)+this.body(t)+"};"},filterPrefix:function(){var t=[],e=this;return x(this.state.filters,(function(n,r){t.push(n+"=$filter("+e.escape(r)+")")})),t.length?"var "+t.join(",")+";":""},varsPrefix:function(t){return this.state[t].vars.length?"var "+this.state[t].vars.join(",")+";":""},body:function(t){return this.state[t].body.join("")},recurse:function(t,e,n,r,i,o){var a,s,c,l,u,d=this;if(r=r||M,!o&&L(t.watchId))return e=e||this.nextId(),void this.if_("i",this.lazyAssign(e,this.computedMember("i",t.watchId)),this.lazyRecurse(t,e,n,r,i,!0));switch(t.type){case vr.Program:x(t.body,(function(e,n){d.recurse(e.expression,void 0,void 0,(function(t){s=t})),n!==t.body.length-1?d.current().body.push(s,";"):d.return_(s)}));break;case vr.Literal:l=this.escape(t.value),this.assign(e,l),r(e||l);break;case vr.UnaryExpression:this.recurse(t.argument,void 0,void 0,(function(t){s=t})),l=t.operator+"("+this.ifDefined(s,0)+")",this.assign(e,l),r(l);break;case vr.BinaryExpression:this.recurse(t.left,void 0,void 0,(function(t){a=t})),this.recurse(t.right,void 0,void 0,(function(t){s=t})),l="+"===t.operator?this.plus(a,s):"-"===t.operator?this.ifDefined(a,0)+t.operator+this.ifDefined(s,0):"("+a+")"+t.operator+"("+s+")",this.assign(e,l),r(l);break;case vr.LogicalExpression:e=e||this.nextId(),d.recurse(t.left,e),d.if_("&&"===t.operator?e:d.not(e),d.lazyRecurse(t.right,e)),r(e);break;case vr.ConditionalExpression:e=e||this.nextId(),d.recurse(t.test,e),d.if_(e,d.lazyRecurse(t.alternate,e),d.lazyRecurse(t.consequent,e)),r(e);break;case vr.Identifier:e=e||this.nextId(),n&&(n.context="inputs"===d.stage?"s":this.assign(this.nextId(),this.getHasOwnProperty("l",t.name)+"?l:s"),n.computed=!1,n.name=t.name),d.if_("inputs"===d.stage||d.not(d.getHasOwnProperty("l",t.name)),(function(){d.if_("inputs"===d.stage||"s",(function(){i&&1!==i&&d.if_(d.isNull(d.nonComputedMember("s",t.name)),d.lazyAssign(d.nonComputedMember("s",t.name),"{}")),d.assign(e,d.nonComputedMember("s",t.name))}))}),e&&d.lazyAssign(e,d.nonComputedMember("l",t.name))),r(e);break;case vr.MemberExpression:a=n&&(n.context=this.nextId())||this.nextId(),e=e||this.nextId(),d.recurse(t.object,a,void 0,(function(){d.if_(d.notNull(a),(function(){t.computed?(s=d.nextId(),d.recurse(t.property,s),d.getStringValue(s),i&&1!==i&&d.if_(d.not(d.computedMember(a,s)),d.lazyAssign(d.computedMember(a,s),"{}")),l=d.computedMember(a,s),d.assign(e,l),n&&(n.computed=!0,n.name=s)):(i&&1!==i&&d.if_(d.isNull(d.nonComputedMember(a,t.property.name)),d.lazyAssign(d.nonComputedMember(a,t.property.name),"{}")),l=d.nonComputedMember(a,t.property.name),d.assign(e,l),n&&(n.computed=!1,n.name=t.property.name))}),(function(){d.assign(e,"undefined")})),r(e)}),!!i);break;case vr.CallExpression:e=e||this.nextId(),t.filter?(s=d.filter(t.callee.name),c=[],x(t.arguments,(function(t){var e=d.nextId();d.recurse(t,e),c.push(e)})),l=s+"("+c.join(",")+")",d.assign(e,l),r(e)):(s=d.nextId(),a={},c=[],d.recurse(t.callee,s,a,(function(){d.if_(d.notNull(s),(function(){x(t.arguments,(function(e){d.recurse(e,t.constant?void 0:d.nextId(),void 0,(function(t){c.push(t)}))})),l=a.name?d.member(a.context,a.name,a.computed)+"("+c.join(",")+")":s+"("+c.join(",")+")",d.assign(e,l)}),(function(){d.assign(e,"undefined")})),r(e)})));break;case vr.AssignmentExpression:s=this.nextId(),a={},this.recurse(t.left,void 0,a,(function(){d.if_(d.notNull(a.context),(function(){d.recurse(t.right,s),l=d.member(a.context,a.name,a.computed)+t.operator+s,d.assign(e,l),r(e||l)}))}),1);break;case vr.ArrayExpression:c=[],x(t.elements,(function(e){d.recurse(e,t.constant?void 0:d.nextId(),void 0,(function(t){c.push(t)}))})),l="["+c.join(",")+"]",this.assign(e,l),r(e||l);break;case vr.ObjectExpression:c=[],u=!1,x(t.properties,(function(t){t.computed&&(u=!0)})),u?(e=e||this.nextId(),this.assign(e,"{}"),x(t.properties,(function(t){t.computed?(a=d.nextId(),d.recurse(t.key,a)):a=t.key.type===vr.Identifier?t.key.name:""+t.key.value,s=d.nextId(),d.recurse(t.value,s),d.assign(d.member(e,a,t.computed),s)}))):(x(t.properties,(function(e){d.recurse(e.value,t.constant?void 0:d.nextId(),void 0,(function(t){c.push(d.escape(e.key.type===vr.Identifier?e.key.name:""+e.key.value)+":"+t)}))})),l="{"+c.join(",")+"}",this.assign(e,l)),r(e||l);break;case vr.ThisExpression:this.assign(e,"s"),r(e||"s");break;case vr.LocalsExpression:this.assign(e,"l"),r(e||"l");break;case vr.NGValueParameter:this.assign(e,"v"),r(e||"v")}},getHasOwnProperty:function(t,e){var n=t+"."+e,r=this.current().own;return r.hasOwnProperty(n)||(r[n]=this.nextId(!1,t+"&&("+this.escape(e)+" in "+t+")")),r[n]},assign:function(t,e){if(t)return this.current().body.push(t,"=",e,";"),t},filter:function(t){return this.state.filters.hasOwnProperty(t)||(this.state.filters[t]=this.nextId(!0)),this.state.filters[t]},ifDefined:function(t,e){return"ifDefined("+t+","+this.escape(e)+")"},plus:function(t,e){return"plus("+t+","+e+")"},return_:function(t){this.current().body.push("return ",t,";")},if_:function(t,e,n){if(!0===t)e();else{var r=this.current().body;r.push("if(",t,"){"),e(),r.push("}"),n&&(r.push("else{"),n(),r.push("}"))}},not:function(t){return"!("+t+")"},isNull:function(t){return t+"==null"},notNull:function(t){return t+"!=null"},nonComputedMember:function(t,e){return/^[$_a-zA-Z][$_a-zA-Z0-9]*$/.test(e)?t+"."+e:t+'["'+e.replace(/[^$_a-zA-Z0-9]/g,this.stringEscapeFn)+'"]'},computedMember:function(t,e){return t+"["+e+"]"},member:function(t,e,n){return n?this.computedMember(t,e):this.nonComputedMember(t,e)},getStringValue:function(t){this.assign(t,"getStringValue("+t+")")},lazyRecurse:function(t,e,n,r,i,o){var a=this;return function(){a.recurse(t,e,n,r,i,o)}},lazyAssign:function(t,e){var n=this;return function(){n.assign(t,e)}},stringEscapeRegex:/[^ a-zA-Z0-9]/g,stringEscapeFn:function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)},escape:function(t){if(U(t))return"'"+t.replace(this.stringEscapeRegex,this.stringEscapeFn)+"'";if(V(t))return t.toString();if(!0===t)return"true";if(!1===t)return"false";if(null===t)return"null";if(void 0===t)return"undefined";throw pr("esc","IMPOSSIBLE")},nextId:function(t,e){var n="v"+this.state.nextId++;return t||this.current().vars.push(n+(e?"="+e:"")),n},current:function(){return this.state[this.state.computing]}},Sr.prototype={compile:function(t){var e,n,r=this;wr(t,r.$filter),(e=kr(t))&&(n=this.recurse(e));var i,o=$r(t.body);o&&(i=[],x(o,(function(t,e){var n=r.recurse(t);n.isPure=t.isPure,t.input=n,i.push(n),t.watchId=e})));var a=[];x(t.body,(function(t){a.push(r.recurse(t.expression))}));var s=0===t.body.length?M:1===t.body.length?a[0]:function(t,e){var n;return x(a,(function(r){n=r(t,e)})),n};return n&&(s.assign=function(t,e,r){return n(t,r,e)}),i&&(s.inputs=i),s},recurse:function(t,e,n){var r,i,o,a=this;if(t.input)return this.inputs(t.input,t.watchId);switch(t.type){case vr.Literal:return this.value(t.value,e);case vr.UnaryExpression:return i=this.recurse(t.argument),this["unary"+t.operator](i,e);case vr.BinaryExpression:case vr.LogicalExpression:return r=this.recurse(t.left),i=this.recurse(t.right),this["binary"+t.operator](r,i,e);case vr.ConditionalExpression:return this["ternary?:"](this.recurse(t.test),this.recurse(t.alternate),this.recurse(t.consequent),e);case vr.Identifier:return a.identifier(t.name,e,n);case vr.MemberExpression:return r=this.recurse(t.object,!1,!!n),t.computed||(i=t.property.name),t.computed&&(i=this.recurse(t.property)),t.computed?this.computedMember(r,i,e,n):this.nonComputedMember(r,i,e,n);case vr.CallExpression:return o=[],x(t.arguments,(function(t){o.push(a.recurse(t))})),t.filter&&(i=this.$filter(t.callee.name)),t.filter||(i=this.recurse(t.callee,!0)),t.filter?function(t,n,r,a){for(var s=[],c=0;c<o.length;++c)s.push(o[c](t,n,r,a));var l=i.apply(void 0,s,a);return e?{context:void 0,name:void 0,value:l}:l}:function(t,n,r,a){var s,c=i(t,n,r,a);if(null!=c.value){for(var l=[],u=0;u<o.length;++u)l.push(o[u](t,n,r,a));s=c.value.apply(c.context,l)}return e?{value:s}:s};case vr.AssignmentExpression:return r=this.recurse(t.left,!0,1),i=this.recurse(t.right),function(t,n,o,a){var s=r(t,n,o,a),c=i(t,n,o,a);return s.context[s.name]=c,e?{value:c}:c};case vr.ArrayExpression:return o=[],x(t.elements,(function(t){o.push(a.recurse(t))})),function(t,n,r,i){for(var a=[],s=0;s<o.length;++s)a.push(o[s](t,n,r,i));return e?{value:a}:a};case vr.ObjectExpression:return o=[],x(t.properties,(function(t){t.computed?o.push({key:a.recurse(t.key),computed:!0,value:a.recurse(t.value)}):o.push({key:t.key.type===vr.Identifier?t.key.name:""+t.key.value,computed:!1,value:a.recurse(t.value)})})),function(t,n,r,i){for(var a={},s=0;s<o.length;++s)o[s].computed?a[o[s].key(t,n,r,i)]=o[s].value(t,n,r,i):a[o[s].key]=o[s].value(t,n,r,i);return e?{value:a}:a};case vr.ThisExpression:return function(t){return e?{value:t}:t};case vr.LocalsExpression:return function(t,n){return e?{value:n}:n};case vr.NGValueParameter:return function(t,n,r){return e?{value:r}:r}}},"unary+":function(t,e){return function(n,r,i,o){var a=t(n,r,i,o);return a=L(a)?+a:0,e?{value:a}:a}},"unary-":function(t,e){return function(n,r,i,o){var a=t(n,r,i,o);return a=L(a)?-a:-0,e?{value:a}:a}},"unary!":function(t,e){return function(n,r,i,o){var a=!t(n,r,i,o);return e?{value:a}:a}},"binary+":function(t,e,n){return function(r,i,o,a){var s=yr(t(r,i,o,a),e(r,i,o,a));return n?{value:s}:s}},"binary-":function(t,e,n){return function(r,i,o,a){var s=t(r,i,o,a),c=e(r,i,o,a),l=(L(s)?s:0)-(L(c)?c:0);return n?{value:l}:l}},"binary*":function(t,e,n){return function(r,i,o,a){var s=t(r,i,o,a)*e(r,i,o,a);return n?{value:s}:s}},"binary/":function(t,e,n){return function(r,i,o,a){var s=t(r,i,o,a)/e(r,i,o,a);return n?{value:s}:s}},"binary%":function(t,e,n){return function(r,i,o,a){var s=t(r,i,o,a)%e(r,i,o,a);return n?{value:s}:s}},"binary===":function(t,e,n){return function(r,i,o,a){var s=t(r,i,o,a)===e(r,i,o,a);return n?{value:s}:s}},"binary!==":function(t,e,n){return function(r,i,o,a){var s=t(r,i,o,a)!==e(r,i,o,a);return n?{value:s}:s}},"binary==":function(t,e,n){return function(r,i,o,a){var s=t(r,i,o,a)==e(r,i,o,a);return n?{value:s}:s}},"binary!=":function(t,e,n){return function(r,i,o,a){var s=t(r,i,o,a)!=e(r,i,o,a);return n?{value:s}:s}},"binary<":function(t,e,n){return function(r,i,o,a){var s=t(r,i,o,a)<e(r,i,o,a);return n?{value:s}:s}},"binary>":function(t,e,n){return function(r,i,o,a){var s=t(r,i,o,a)>e(r,i,o,a);return n?{value:s}:s}},"binary<=":function(t,e,n){return function(r,i,o,a){var s=t(r,i,o,a)<=e(r,i,o,a);return n?{value:s}:s}},"binary>=":function(t,e,n){return function(r,i,o,a){var s=t(r,i,o,a)>=e(r,i,o,a);return n?{value:s}:s}},"binary&&":function(t,e,n){return function(r,i,o,a){var s=t(r,i,o,a)&&e(r,i,o,a);return n?{value:s}:s}},"binary||":function(t,e,n){return function(r,i,o,a){var s=t(r,i,o,a)||e(r,i,o,a);return n?{value:s}:s}},"ternary?:":function(t,e,n,r){return function(i,o,a,s){var c=t(i,o,a,s)?e(i,o,a,s):n(i,o,a,s);return r?{value:c}:c}},value:function(t,e){return function(){return e?{context:void 0,name:void 0,value:t}:t}},identifier:function(t,e,n){return function(r,i,o,a){var s=i&&t in i?i:r;n&&1!==n&&s&&null==s[t]&&(s[t]={});var c=s?s[t]:void 0;return e?{context:s,name:t,value:c}:c}},computedMember:function(t,e,n,r){return function(i,o,a,s){var c,l,u=t(i,o,a,s);return null!=u&&(c=_r(c=e(i,o,a,s)),r&&1!==r&&u&&!u[c]&&(u[c]={}),l=u[c]),n?{context:u,name:c,value:l}:l}},nonComputedMember:function(t,e,n,r){return function(i,o,a,s){var c=t(i,o,a,s);r&&1!==r&&c&&null==c[e]&&(c[e]={});var l=null!=c?c[e]:void 0;return n?{context:c,name:e,value:l}:l}},inputs:function(t,e){return function(n,r,i,o){return o?o[e]:t(n,r,i)}}},Ar.prototype={constructor:Ar,parse:function(t){var e=this.ast.ast(t),n=this.astCompiler.compile(e);return n.literal=function(t){return 0===t.body.length||1===t.body.length&&(t.body[0].expression.type===vr.Literal||t.body[0].expression.type===vr.ArrayExpression||t.body[0].expression.type===vr.ObjectExpression)}(e),n.constant=function(t){return t.constant}(e),n}};var Lr=i("$sce"),Nr={HTML:"html",CSS:"css",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"},Fr=/_([a-z])/g;function Ur(t){return t.replace(Fr,Xt)}function Vr(t){var e=[];return L(t)&&x(t,(function(t){e.push(function(t){if("self"===t)return t;if(U(t)){if(t.indexOf("***")>-1)throw Lr("iwcard","Illegal sequence *** in string matcher.  String: {0}",t);return t=et(t).replace(/\\\*\\\*/g,".*").replace(/\\\*/g,"[^:/.?&;]*"),new RegExp("^"+t+"$")}if(Y(t))return new RegExp("^"+t.source+"$");throw Lr("imatcher",'Matchers may only be "self", string patterns or RegExp objects')}(t))})),e}function Hr(){this.SCE_CONTEXTS=Nr;var t=["self"],e=[];this.resourceUrlWhitelist=function(e){return arguments.length&&(t=Vr(e)),t},this.resourceUrlBlacklist=function(t){return arguments.length&&(e=Vr(t)),e},this.$get=["$injector",function(n){var r=function(t){throw Lr("unsafe","Attempting to use an unsafe value in a safe context.")};function i(t,e){return"self"===t?ti(e):!!t.exec(e.href)}function o(t){var e=function(t){this.$$unwrapTrustedValue=function(){return t}};return t&&(e.prototype=new t),e.prototype.valueOf=function(){return this.$$unwrapTrustedValue()},e.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()},e}n.has("$sanitize")&&(r=n.get("$sanitize"));var a=o(),s={};return s[Nr.HTML]=o(a),s[Nr.CSS]=o(a),s[Nr.URL]=o(a),s[Nr.JS]=o(a),s[Nr.RESOURCE_URL]=o(s[Nr.URL]),{trustAs:function(t,e){var n=s.hasOwnProperty(t)?s[t]:null;if(!n)throw Lr("icontext","Attempted to trust a value in invalid context. Context: {0}; Value: {1}",t,e);if(null===e||z(e)||""===e)return e;if("string"!=typeof e)throw Lr("itype","Attempted to trust a non-string value in a content requiring a string: Context: {0}",t);return new n(e)},getTrusted:function(n,o){if(null===o||z(o)||""===o)return o;var a=s.hasOwnProperty(n)?s[n]:null;if(a&&o instanceof a)return o.$$unwrapTrustedValue();if(n===Nr.RESOURCE_URL){if(function(n){var r,o,a=Zr(n.toString()),s=!1;for(r=0,o=t.length;r<o;r++)if(i(t[r],a)){s=!0;break}if(s)for(r=0,o=e.length;r<o;r++)if(i(e[r],a)){s=!1;break}return s}(o))return o;throw Lr("insecurl","Blocked loading resource from url not allowed by $sceDelegate policy.  URL: {0}",o.toString())}if(n===Nr.HTML)return r(o);throw Lr("unsafe","Attempting to use an unsafe value in a safe context.")},valueOf:function(t){return t instanceof a?t.$$unwrapTrustedValue():t}}}]}function Br(){var t=!0;this.enabled=function(e){return arguments.length&&(t=!!e),t},this.$get=["$parse","$sceDelegate",function(e,n){if(t&&u<8)throw Lr("iequirks","Strict Contextual Escaping does not support Internet Explorer version < 11 in quirks mode.  You can fix this by adding the text <!doctype html> to the top of your HTML document.  See http://docs.angularjs.org/api/ng.$sce for more information.");var r=Vt(Nr);r.isEnabled=function(){return t},r.trustAs=n.trustAs,r.getTrusted=n.getTrusted,r.valueOf=n.valueOf,t||(r.trustAs=r.getTrusted=function(t,e){return e},r.valueOf=I),r.parseAs=function(t,n){var i=e(n);return i.literal&&i.constant?i:e(n,(function(e){return r.getTrusted(t,e)}))};var i=r.parseAs,o=r.getTrusted,a=r.trustAs;return x(Nr,(function(t,e){var n=c(e);r[Ur("parse_as_"+n)]=function(e){return i(t,e)},r[Ur("get_trusted_"+n)]=function(e){return o(t,e)},r[Ur("trust_as_"+n)]=function(e){return a(t,e)}})),r}]}function Wr(){this.$get=["$window","$document",function(t,e){var n={},r=!(!(t.nw&&t.nw.process)&&t.chrome&&(t.chrome.app&&t.chrome.app.runtime||!t.chrome.app&&t.chrome.runtime&&t.chrome.runtime.id))&&t.history&&t.history.pushState,i=T((/android (\d+)/.exec(c((t.navigator||{}).userAgent))||[])[1]),o=/Boxee/i.test((t.navigator||{}).userAgent),a=e[0]||{},s=a.body&&a.body.style,l=!1,d=!1;return s&&(l=!(!("transition"in s)&&!("webkitTransition"in s)),d=!(!("animation"in s)&&!("webkitAnimation"in s))),{history:!(!r||i<4||o),hasEvent:function(t){if("input"===t&&u)return!1;if(z(n[t])){var e=a.createElement("div");n[t]="on"+t in e}return n[t]},csp:lt(),transitions:l,animations:d,android:i}}]}var Gr=i("$compile");function Yr(){var t;this.httpOptions=function(e){return e?(t=e,this):t},this.$get=["$exceptionHandler","$templateCache","$http","$q","$sce",function(e,n,r,i,o){function a(s,c){a.totalPendingRequests++,U(s)&&!z(n.get(s))||(s=o.getTrustedResourceUrl(s));var l=r.defaults&&r.defaults.transformResponse;return B(l)?l=l.filter((function(t){return t!==In})):l===In&&(l=null),r.get(s,j({cache:n,transformResponse:l},t)).finally((function(){a.totalPendingRequests--})).then((function(t){return n.put(s,t.data),t.data}),(function(t){c||(t=Gr("tpload","Failed to load template: {0} (HTTP status: {1} {2})",s,t.status,t.statusText),e(t));return i.reject(t)}))}return a.totalPendingRequests=0,a}]}function Kr(){this.$get=["$rootScope","$browser","$location",function(t,e,n){var r={findBindings:function(t,e,n){var r=t.getElementsByClassName("ng-binding"),i=[];return x(r,(function(t){var r=y.element(t).data("$binding");r&&x(r,(function(r){n?new RegExp("(^|\\s)"+et(e)+"(\\s|\\||$)").test(r)&&i.push(t):-1!==r.indexOf(e)&&i.push(t)}))})),i},findModels:function(t,e,n){for(var r=["ng-","data-ng-","ng\\:"],i=0;i<r.length;++i){var o="["+r[i]+"model"+(n?"=":"*=")+'"'+e+'"]',a=t.querySelectorAll(o);if(a.length)return a}},getLocation:function(){return n.url()},setLocation:function(e){e!==n.url()&&(n.url(e),t.$digest())},whenStable:function(t){e.notifyWhenNoOutstandingRequests(t)}};return r}]}function Jr(){this.$get=["$rootScope","$browser","$q","$$q","$exceptionHandler",function(t,e,n,r,i){var o={};function a(a,s,c){G(a)||(c=s,s=a,a=M);var l,u=pt(arguments,3),d=L(c)&&!c,p=(d?r:n).defer(),f=p.promise;return l=e.defer((function(){try{p.resolve(a.apply(null,u))}catch(t){p.reject(t),i(t)}finally{delete o[f.$$timeoutId]}d||t.$apply()}),s),f.$$timeoutId=l,o[l]=p,f}return a.cancel=function(t){return!(!t||!(t.$$timeoutId in o))&&(Ir(o[t.$$timeoutId].promise),o[t.$$timeoutId].reject("canceled"),delete o[t.$$timeoutId],e.defer.cancel(t.$$timeoutId))},a}]}var Qr=t.document.createElement("a"),Xr=Zr(t.location.href);function Zr(t){var e=t;return u&&(Qr.setAttribute("href",e),e=Qr.href),Qr.setAttribute("href",e),{href:Qr.href,protocol:Qr.protocol?Qr.protocol.replace(/:$/,""):"",host:Qr.host,search:Qr.search?Qr.search.replace(/^\?/,""):"",hash:Qr.hash?Qr.hash.replace(/^#/,""):"",hostname:Qr.hostname,port:Qr.port,pathname:"/"===Qr.pathname.charAt(0)?Qr.pathname:"/"+Qr.pathname}}function ti(t){var e=U(t)?Zr(t):t;return e.protocol===Xr.protocol&&e.host===Xr.host}function ei(){this.$get=R(t)}function ni(t){var e=t[0]||{},n={},r="";function i(t){try{return decodeURIComponent(t)}catch(e){return t}}return function(){var t,o,a,s,c,l=function(t){try{return t.cookie||""}catch(t){return""}}(e);if(l!==r)for(t=(r=l).split("; "),n={},a=0;a<t.length;a++)(s=(o=t[a]).indexOf("="))>0&&(c=i(o.substring(0,s)),z(n[c])&&(n[c]=i(o.substring(s+1))));return n}}function ri(){this.$get=ni}function ii(t){var e="Filter";function n(r,i){if(N(r)){var o={};return x(r,(function(t,e){o[e]=n(e,t)})),o}return t.factory(r+e,i)}this.register=n,this.$get=["$injector",function(t){return function(n){return t.get(n+e)}}],n("currency",ci),n("date",yi),n("filter",oi),n("json",wi),n("limitTo",ki),n("lowercase",$i),n("number",li),n("orderBy",Si),n("uppercase",xi)}function oi(){return function(t,e,n,r){if(!$(t)){if(null==t)return t;throw i("filter")("notarray","Expected array but received: {0}",t)}var o,a;switch(r=r||"$",si(e)){case"function":o=e;break;case"boolean":case"null":case"number":case"string":a=!0;case"object":o=function(t,e,n,r){var i=N(t)&&n in t;!0===e?e=ct:G(e)||(e=function(t,e){return!z(t)&&(null===t||null===e?t===e:!(N(e)||N(t)&&!D(t))&&(t=c(""+t),e=c(""+e),-1!==t.indexOf(e)))});return function(o){return i&&!N(o)?ai(o,t[n],e,n,!1):ai(o,t,e,n,r)}}(e,n,r,a);break;default:return t}return Array.prototype.filter.call(t,o)}}function ai(t,e,n,r,i,o){var a=si(t),s=si(e);if("string"===s&&"!"===e.charAt(0))return!ai(t,e.substring(1),n,r,i);if(B(t))return t.some((function(t){return ai(t,e,n,r,i)}));switch(a){case"object":var c;if(i){for(c in t)if(c.charAt&&"$"!==c.charAt(0)&&ai(t[c],e,n,r,!0))return!0;return!o&&ai(t,e,n,r,!1)}if("object"===s){for(c in e){var l=e[c];if(!G(l)&&!z(l)){var u=c===r;if(!ai(u?t:t[c],l,n,r,u,u))return!1}}return!0}return n(t,e);case"function":return!1;default:return n(t,e)}}function si(t){return null===t?"null":typeof t}ni.$inject=["$document"],ii.$inject=["$provide"];function ci(t){var e=t.NUMBER_FORMATS;return function(t,n,r){return z(n)&&(n=e.CURRENCY_SYM),z(r)&&(r=e.PATTERNS[1].maxFrac),null==t?t:ui(t,e.PATTERNS[1],e.GROUP_SEP,e.DECIMAL_SEP,r).replace(/\u00A4/g,n)}}function li(t){var e=t.NUMBER_FORMATS;return function(t,n){return null==t?t:ui(t,e.PATTERNS[0],e.GROUP_SEP,e.DECIMAL_SEP,n)}}function ui(t,e,n,r,i){if(!U(t)&&!V(t)||isNaN(t))return"";var o,a=!isFinite(t),s=!1,c=Math.abs(t)+"",l="";if(a)l="";else{o=function(t){var e,n,r,i,o,a=0;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),r=0;"0"===t.charAt(r);r++);if(r===(o=t.length))e=[0],n=1;else{for(o--;"0"===t.charAt(o);)o--;for(n-=r,e=[],i=0;r<=o;r++,i++)e[i]=+t.charAt(r)}return n>22&&(e=e.splice(0,21),a=n-1,n=1),{d:e,e:a,i:n}}(c),function(t,e,n,r){var i=t.d,o=i.length-t.i,a=(e=z(e)?Math.min(Math.max(n,o),r):+e)+t.i,s=i[a];if(a>0){i.splice(Math.max(t.i,a));for(var c=a;c<i.length;c++)i[c]=0}else{o=Math.max(0,o),t.i=1,i.length=Math.max(1,a=e+1),i[0]=0;for(var l=1;l<a;l++)i[l]=0}if(s>=5)if(a-1<0){for(var u=0;u>a;u--)i.unshift(0),t.i++;i.unshift(1),t.i++}else i[a-1]++;for(;o<Math.max(0,e);o++)i.push(0);var d=i.reduceRight((function(t,e,n,r){return e+=t,r[n]=e%10,Math.floor(e/10)}),0);d&&(i.unshift(d),t.i++)}(o,i,e.minFrac,e.maxFrac);var u=o.d,d=o.i,p=o.e,f=[];for(s=u.reduce((function(t,e){return t&&!e}),!0);d<0;)u.unshift(0),d++;d>0?f=u.splice(d,u.length):(f=u,u=[0]);var _=[];for(u.length>=e.lgSize&&_.unshift(u.splice(-e.lgSize,u.length).join(""));u.length>e.gSize;)_.unshift(u.splice(-e.gSize,u.length).join(""));u.length&&_.unshift(u.join("")),l=_.join(n),f.length&&(l+=r+f.join("")),p&&(l+="e+"+p)}return t<0&&!s?e.negPre+l+e.negSuf:e.posPre+l+e.posSuf}function di(t,e,n,r){var i="";for((t<0||r&&t<=0)&&(r?t=1-t:(t=-t,i="-")),t=""+t;t.length<e;)t="0"+t;return n&&(t=t.substr(t.length-e)),i+t}function pi(t,e,n,r,i){return n=n||0,function(o){var a=o["get"+t]();return(n>0||a>-n)&&(a+=n),0===a&&-12===n&&(a=12),di(a,e,r,i)}}function fi(t,e,n){return function(r,i){var o=r["get"+t]();return i[l((n?"STANDALONE":"")+(e?"SHORT":"")+t)][o]}}function _i(t){var e=new Date(t,0,1).getDay();return new Date(t,0,(e<=4?5:12)-e)}function hi(t){return function(e){var n,r=_i(e.getFullYear()),i=+(n=e,new Date(n.getFullYear(),n.getMonth(),n.getDate()+(4-n.getDay())))-+r;return di(1+Math.round(i/6048e5),t)}}function mi(t,e){return t.getFullYear()<=0?e.ERAS[0]:e.ERAS[1]}ci.$inject=["$locale"],li.$inject=["$locale"];var gi={yyyy:pi("FullYear",4,0,!1,!0),yy:pi("FullYear",2,0,!0,!0),y:pi("FullYear",1,0,!1,!0),MMMM:fi("Month"),MMM:fi("Month",!0),MM:pi("Month",2,1),M:pi("Month",1,1),LLLL:fi("Month",!1,!0),dd:pi("Date",2),d:pi("Date",1),HH:pi("Hours",2),H:pi("Hours",1),hh:pi("Hours",2,-12),h:pi("Hours",1,-12),mm:pi("Minutes",2),m:pi("Minutes",1),ss:pi("Seconds",2),s:pi("Seconds",1),sss:pi("Milliseconds",3),EEEE:fi("Day"),EEE:fi("Day",!0),a:function(t,e){return t.getHours()<12?e.AMPMS[0]:e.AMPMS[1]},Z:function(t,e,n){var r=-1*n,i=r>=0?"+":"";return i+=di(Math[r>0?"floor":"ceil"](r/60),2)+di(Math.abs(r%60),2)},ww:hi(2),w:hi(1),G:mi,GG:mi,GGG:mi,GGGG:function(t,e){return t.getFullYear()<=0?e.ERANAMES[0]:e.ERANAMES[1]}},vi=/((?:[^yMLdHhmsaZEwG']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|L+|d+|H+|h+|m+|s+|a|Z|G+|w+))([\s\S]*)/,bi=/^-?\d+$/;function yi(t){var e=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(n,r,i){var o,a,s="",c=[];if(r=r||"mediumDate",r=t.DATETIME_FORMATS[r]||r,U(n)&&(n=bi.test(n)?T(n):function(t){var n;if(n=t.match(e)){var r=new Date(0),i=0,o=0,a=n[8]?r.setUTCFullYear:r.setFullYear,s=n[8]?r.setUTCHours:r.setHours;n[9]&&(i=T(n[9]+n[10]),o=T(n[9]+n[11])),a.call(r,T(n[1]),T(n[2])-1,T(n[3]));var c=T(n[4]||0)-i,l=T(n[5]||0)-o,u=T(n[6]||0),d=Math.round(1e3*parseFloat("0."+(n[7]||0)));return s.call(r,c,l,u,d),r}return t}(n)),V(n)&&(n=new Date(n)),!H(n)||!isFinite(n.getTime()))return n;for(;r;)(a=vi.exec(r))?r=(c=dt(c,a,1)).pop():(c.push(r),r=null);var l=n.getTimezoneOffset();return i&&(l=vt(i,l),n=bt(n,i,!0)),x(c,(function(e){s+=(o=gi[e])?o(n,t.DATETIME_FORMATS,l):"''"===e?"'":e.replace(/(^'|'$)/g,"").replace(/''/g,"'")})),s}}function wi(){return function(t,e){return z(e)&&(e=2),ht(t,e)}}yi.$inject=["$locale"];var $i=R(c),xi=R(l);function ki(){return function(t,e,n){return e=Math.abs(Number(e))===1/0?Number(e):T(e),q(e)?t:(V(t)&&(t=t.toString()),$(t)?(n=(n=!n||isNaN(n)?0:T(n))<0?Math.max(0,t.length+n):n,e>=0?Ci(t,n,n+e):0===n?Ci(t,e,t.length):Ci(t,Math.max(0,n+e),n)):t)}}function Ci(t,e,n){return U(t)?t.slice(e,n):_.call(t,e,n)}function Si(t){return function(r,o,a,s){if(null==r)return r;if(!$(r))throw i("orderBy")("notarray","Expected array but received: {0}",r);B(o)||(o=[o]),0===o.length&&(o=["+"]);var c=o.map((function(e){var n=1,r=I;if(G(e))r=e;else if(U(e)&&("+"!==e.charAt(0)&&"-"!==e.charAt(0)||(n="-"===e.charAt(0)?-1:1,e=e.substring(1)),""!==e&&(r=t(e)).constant)){var i=r();r=function(t){return t[i]}}return{get:r,descending:n}})),l=a?-1:1,u=G(s)?s:n,d=Array.prototype.map.call(r,(function(t,n){return{value:t,tieBreaker:{value:n,type:"number",index:n},predicateValues:c.map((function(r){return function(t,n){var r=typeof t;null===t?(r="string",t="null"):"object"===r&&(t=function(t){if(G(t.valueOf)&&e(t=t.valueOf()))return t;if(D(t)&&e(t=t.toString()))return t;return t}(t));return{value:t,type:r,index:n}}(r.get(t),n)}))}}));return d.sort((function(t,e){for(var r=0,i=c.length;r<i;r++){var o=u(t.predicateValues[r],e.predicateValues[r]);if(o)return o*c[r].descending*l}return(u(t.tieBreaker,e.tieBreaker)||n(t.tieBreaker,e.tieBreaker))*l})),r=d.map((function(t){return t.value}))};function e(t){switch(typeof t){case"number":case"boolean":case"string":return!0;default:return!1}}function n(t,e){var n=0,r=t.type,i=e.type;if(r===i){var o=t.value,a=e.value;"string"===r?(o=o.toLowerCase(),a=a.toLowerCase()):"object"===r&&(N(o)&&(o=t.index),N(a)&&(a=e.index)),o!==a&&(n=o<a?-1:1)}else n=r<i?-1:1;return n}}function Ai(t){return G(t)&&(t={link:t}),t.restrict=t.restrict||"AC",R(t)}Si.$inject=["$parse"];var Ei=R({restrict:"E",compile:function(t,e){if(!e.href&&!e.xlinkHref)return function(t,e){if("a"===e[0].nodeName.toLowerCase()){var n="[object SVGAnimatedString]"===g.call(e.prop("href"))?"xlink:href":"href";e.on("click",(function(t){e.attr(n)||t.preventDefault()}))}}}}),ji={};x(Se,(function(t,e){if("multiple"!==t){var n=hn("ng-"+e),r=i;"checked"===t&&(r=function(t,e,r){r.ngModel!==r[n]&&i(t,0,r)}),ji[n]=function(){return{restrict:"A",priority:100,link:r}}}function i(t,r,i){t.$watch(i[n],(function(t){i.$set(e,!!t)}))}})),x(Ee,(function(t,e){ji[e]=function(){return{priority:100,link:function(t,n,r){if("ngPattern"===e&&"/"===r.ngPattern.charAt(0)){var i=r.ngPattern.match(o);if(i)return void r.$set("ngPattern",new RegExp(i[1],i[2]))}t.$watch(r[e],(function(t){r.$set(e,t)}))}}}})),x(["src","srcset","href"],(function(t){var e=hn("ng-"+t);ji[e]=function(){return{priority:99,link:function(n,r,i){var o=t,a=t;"href"===t&&"[object SVGAnimatedString]"===g.call(r.prop("href"))&&(a="xlinkHref",i.$attr[a]="xlink:href",o=null),i.$observe(e,(function(e){e?(i.$set(a,e),u&&o&&r.prop(o,i[a])):"href"===t&&i.$set(a,null)}))}}}}));var Oi={$addControl:M,$$renameControl:function(t,e){t.$name=e},$removeControl:M,$setValidity:M,$setDirty:M,$setPristine:M,$setSubmitted:M},Ti="ng-pending",qi="ng-submitted";function Pi(t,e,n,r,i){this.$$controls=[],this.$error={},this.$$success={},this.$pending=void 0,this.$name=i(e.name||e.ngForm||"")(n),this.$dirty=!1,this.$pristine=!0,this.$valid=!0,this.$invalid=!1,this.$submitted=!1,this.$$parentForm=Oi,this.$$element=t,this.$$animate=r,Di(this)}Pi.$inject=["$element","$attrs","$scope","$animate","$interpolate"],Pi.prototype={$rollbackViewValue:function(){x(this.$$controls,(function(t){t.$rollbackViewValue()}))},$commitViewValue:function(){x(this.$$controls,(function(t){t.$commitViewValue()}))},$addControl:function(t){Dt(t.$name,"input"),this.$$controls.push(t),t.$name&&(this[t.$name]=t),t.$$parentForm=this},$$renameControl:function(t,e){var n=t.$name;this[n]===t&&delete this[n],this[e]=t,t.$name=e},$removeControl:function(t){t.$name&&this[t.$name]===t&&delete this[t.$name],x(this.$pending,(function(e,n){this.$setValidity(n,null,t)}),this),x(this.$error,(function(e,n){this.$setValidity(n,null,t)}),this),x(this.$$success,(function(e,n){this.$setValidity(n,null,t)}),this),ot(this.$$controls,t),t.$$parentForm=Oi},$setDirty:function(){this.$$animate.removeClass(this.$$element,To),this.$$animate.addClass(this.$$element,qo),this.$dirty=!0,this.$pristine=!1,this.$$parentForm.$setDirty()},$setPristine:function(){this.$$animate.setClass(this.$$element,To,qo+" "+qi),this.$dirty=!1,this.$pristine=!0,this.$submitted=!1,x(this.$$controls,(function(t){t.$setPristine()}))},$setUntouched:function(){x(this.$$controls,(function(t){t.$setUntouched()}))},$setSubmitted:function(){this.$$animate.addClass(this.$$element,qi),this.$submitted=!0,this.$$parentForm.$setSubmitted()}},zi({clazz:Pi,set:function(t,e,n){var r=t[e];r?-1===r.indexOf(n)&&r.push(n):t[e]=[n]},unset:function(t,e,n){var r=t[e];r&&(ot(r,n),0===r.length&&delete t[e])}});var Mi=function(t){return["$timeout","$parse",function(e,n){return{name:"form",restrict:t?"EAC":"E",require:["form","^^?form"],controller:Pi,compile:function(n,i){n.addClass(To).addClass(jo);var o=i.name?"name":!(!t||!i.ngForm)&&"ngForm";return{pre:function(t,n,i,a){var s=a[0];if(!("action"in i)){var c=function(e){t.$apply((function(){s.$commitViewValue(),s.$setSubmitted()})),e.preventDefault()};n[0].addEventListener("submit",c),n.on("$destroy",(function(){e((function(){n[0].removeEventListener("submit",c)}),0,!1)}))}(a[1]||s.$$parentForm).$addControl(s);var l=o?r(s.$name):M;o&&(l(t,s),i.$observe(o,(function(e){s.$name!==e&&(l(t,void 0),s.$$parentForm.$$renameControl(s,e),(l=r(s.$name))(t,s))}))),n.on("$destroy",(function(){s.$$parentForm.$removeControl(s),l(t,void 0),j(s,Oi)}))}}}};function r(t){return""===t?n('this[""]').assign:n(t).assign||M}}]},Ii=Mi(),Ri=Mi(!0);function Di(t){t.$$classCache={},t.$$classCache[Oo]=!(t.$$classCache[jo]=t.$$element.hasClass(jo))}function zi(t){var e=t.clazz,n=t.set,r=t.unset;function i(t,e,n){n&&!t.$$classCache[e]?(t.$$animate.addClass(t.$$element,e),t.$$classCache[e]=!0):!n&&t.$$classCache[e]&&(t.$$animate.removeClass(t.$$element,e),t.$$classCache[e]=!1)}function o(t,e,n){e=e?"-"+Pt(e,"-"):"",i(t,jo+e,!0===n),i(t,Oo+e,!1===n)}e.prototype.$setValidity=function(t,e,a){var s;z(e)?function(t,e,r,i){t[e]||(t[e]={});n(t[e],r,i)}(this,"$pending",t,a):function(t,e,n,i){t[e]&&r(t[e],n,i);Li(t[e])&&(t[e]=void 0)}(this,"$pending",t,a),Q(e)?e?(r(this.$error,t,a),n(this.$$success,t,a)):(n(this.$error,t,a),r(this.$$success,t,a)):(r(this.$error,t,a),r(this.$$success,t,a)),this.$pending?(i(this,Ti,!0),this.$valid=this.$invalid=void 0,o(this,"",null)):(i(this,Ti,!1),this.$valid=Li(this.$error),this.$invalid=!this.$valid,o(this,"",this.$valid)),o(this,t,s=this.$pending&&this.$pending[t]?void 0:!this.$error[t]&&(!!this.$$success[t]||null)),this.$$parentForm.$setValidity(t,s,this)}}function Li(t){if(t)for(var e in t)if(t.hasOwnProperty(e))return!1;return!0}var Ni=/^\d{4,}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+(?:[+-][0-2]\d:[0-5]\d|Z)$/,Fi=/^[a-z][a-z\d.+-]*:\/*(?:[^:@]+(?::[^@]+)?@)?(?:[^\s:/?#]+|\[[a-f\d:]+])(?::\d+)?(?:\/[^?#]*)?(?:\?[^#]*)?(?:#.*)?$/i,Ui=/^(?=.{1,254}$)(?=.{1,64}@)[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+(\.[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+)*@[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?(\.[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?)*$/,Vi=/^\s*(-|\+)?(\d+|(\d*(\.\d*)))([eE][+-]?\d+)?\s*$/,Hi=/^(\d{4,})-(\d{2})-(\d{2})$/,Bi=/^(\d{4,})-(\d\d)-(\d\d)T(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,Wi=/^(\d{4,})-W(\d\d)$/,Gi=/^(\d{4,})-(\d\d)$/,Yi=/^(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,Ki=Nt();x("date,datetime-local,month,time,week".split(","),(function(t){Ki[t]=!0}));var Ji={text:function(t,e,n,r,i,o){Xi(t,e,n,r,i,o),Qi(r)},date:to("date",Hi,Zi(Hi,["yyyy","MM","dd"]),"yyyy-MM-dd"),"datetime-local":to("datetimelocal",Bi,Zi(Bi,["yyyy","MM","dd","HH","mm","ss","sss"]),"yyyy-MM-ddTHH:mm:ss.sss"),time:to("time",Yi,Zi(Yi,["HH","mm","ss","sss"]),"HH:mm:ss.sss"),week:to("week",Wi,(function(t,e){if(H(t))return t;if(U(t)){Wi.lastIndex=0;var n=Wi.exec(t);if(n){var r=+n[1],i=+n[2],o=0,a=0,s=0,c=0,l=_i(r),u=7*(i-1);return e&&(o=e.getHours(),a=e.getMinutes(),s=e.getSeconds(),c=e.getMilliseconds()),new Date(r,0,l.getDate()+u,o,a,s,c)}}return NaN}),"yyyy-Www"),month:to("month",Gi,Zi(Gi,["yyyy","MM"]),"yyyy-MM"),number:function(t,e,n,r,i,o){var a,s;eo(t,e,n,r),no(r),Xi(t,e,n,r,i,o),(L(n.min)||n.ngMin)&&(r.$validators.min=function(t){return r.$isEmpty(t)||z(a)||t>=a},n.$observe("min",(function(t){a=ro(t),r.$validate()})));(L(n.max)||n.ngMax)&&(r.$validators.max=function(t){return r.$isEmpty(t)||z(s)||t<=s},n.$observe("max",(function(t){s=ro(t),r.$validate()})));if(L(n.step)||n.ngStep){var c;r.$validators.step=function(t,e){return r.$isEmpty(e)||z(c)||ao(e,a||0,c)},n.$observe("step",(function(t){c=ro(t),r.$validate()}))}},url:function(t,e,n,r,i,o){Xi(t,e,n,r,i,o),Qi(r),r.$$parserName="url",r.$validators.url=function(t,e){var n=t||e;return r.$isEmpty(n)||Fi.test(n)}},email:function(t,e,n,r,i,o){Xi(t,e,n,r,i,o),Qi(r),r.$$parserName="email",r.$validators.email=function(t,e){var n=t||e;return r.$isEmpty(n)||Ui.test(n)}},radio:function(t,e,n,r){var i=!n.ngTrim||"false"!==tt(n.ngTrim);z(n.name)&&e.attr("name",S());e.on("click",(function(t){var o;e[0].checked&&(o=n.value,i&&(o=tt(o)),r.$setViewValue(o,t&&t.type))})),r.$render=function(){var t=n.value;i&&(t=tt(t)),e[0].checked=t===r.$viewValue},n.$observe("value",r.$render)},range:function(t,e,n,r,i,o){eo(t,e,n,r),no(r),Xi(t,e,n,r,i,o);var a=r.$$hasNativeValidators&&"range"===e[0].type,s=a?0:void 0,c=a?100:void 0,l=a?1:void 0,u=e[0].validity,d=L(n.min),p=L(n.max),f=L(n.step),_=r.$render;r.$render=a&&L(u.rangeUnderflow)&&L(u.rangeOverflow)?function(){_(),r.$setViewValue(e.val())}:_,d&&(r.$validators.min=a?function(){return!0}:function(t,e){return r.$isEmpty(e)||z(s)||e>=s},h("min",(function(t){if(s=ro(t),q(r.$modelValue))return;if(a){var n=e.val();s>n&&(n=s,e.val(n)),r.$setViewValue(n)}else r.$validate()})));p&&(r.$validators.max=a?function(){return!0}:function(t,e){return r.$isEmpty(e)||z(c)||e<=c},h("max",(function(t){if(c=ro(t),q(r.$modelValue))return;if(a){var n=e.val();c<n&&(e.val(c),n=c<s?s:c),r.$setViewValue(n)}else r.$validate()})));f&&(r.$validators.step=a?function(){return!u.stepMismatch}:function(t,e){return r.$isEmpty(e)||z(l)||ao(e,s||0,l)},h("step",(function(t){if(l=ro(t),q(r.$modelValue))return;a&&r.$viewValue!==e.val()?r.$setViewValue(e.val()):r.$validate()})));function h(t,r){e.attr(t,n[t]),n.$observe(t,r)}},checkbox:function(t,e,n,r,i,o,a,s){var c=so(s,t,"ngTrueValue",n.ngTrueValue,!0),l=so(s,t,"ngFalseValue",n.ngFalseValue,!1);e.on("click",(function(t){r.$setViewValue(e[0].checked,t&&t.type)})),r.$render=function(){e[0].checked=r.$viewValue},r.$isEmpty=function(t){return!1===t},r.$formatters.push((function(t){return ct(t,c)})),r.$parsers.push((function(t){return t?c:l}))},hidden:M,button:M,submit:M,reset:M,file:M};function Qi(t){t.$formatters.push((function(e){return t.$isEmpty(e)?e:e.toString()}))}function Xi(t,e,n,r,i,o){var a,s=c(e[0].type);if(!i.android){var l=!1;e.on("compositionstart",(function(){l=!0})),e.on("compositionend",(function(){l=!1,u()}))}var u=function(t){if(a&&(o.defer.cancel(a),a=null),!l){var i=e.val(),c=t&&t.type;"password"===s||n.ngTrim&&"false"===n.ngTrim||(i=tt(i)),(r.$viewValue!==i||""===i&&r.$$hasNativeValidators)&&r.$setViewValue(i,c)}};if(i.hasEvent("input"))e.on("input",u);else{var d=function(t,e,n){a||(a=o.defer((function(){a=null,e&&e.value===n||u(t)})))};e.on("keydown",(function(t){var e=t.keyCode;91===e||15<e&&e<19||37<=e&&e<=40||d(t,this,this.value)})),i.hasEvent("paste")&&e.on("paste cut",d)}e.on("change",u),Ki[s]&&r.$$hasNativeValidators&&s===n.type&&e.on("keydown wheel mousedown",(function(t){if(!a){var e=this.validity,n=e.badInput,r=e.typeMismatch;a=o.defer((function(){a=null,e.badInput===n&&e.typeMismatch===r||u(t)}))}})),r.$render=function(){var t=r.$isEmpty(r.$viewValue)?"":r.$viewValue;e.val()!==t&&e.val(t)}}function Zi(t,e){return function(n,r){var i,o;if(H(n))return n;if(U(n)){if('"'===n.charAt(0)&&'"'===n.charAt(n.length-1)&&(n=n.substring(1,n.length-1)),Ni.test(n))return new Date(n);if(t.lastIndex=0,i=t.exec(n))return i.shift(),o=r?{yyyy:r.getFullYear(),MM:r.getMonth()+1,dd:r.getDate(),HH:r.getHours(),mm:r.getMinutes(),ss:r.getSeconds(),sss:r.getMilliseconds()/1e3}:{yyyy:1970,MM:1,dd:1,HH:0,mm:0,ss:0,sss:0},x(i,(function(t,n){n<e.length&&(o[e[n]]=+t)})),new Date(o.yyyy,o.MM-1,o.dd,o.HH,o.mm,o.ss||0,1e3*o.sss||0)}return NaN}}function to(t,e,n,r){return function(i,o,a,s,c,l,u){eo(i,o,a,s),Xi(0,o,a,s,c,l);var d,p,f,_=s&&s.$options.getOption("timezone");(s.$$parserName=t,s.$parsers.push((function(t){if(s.$isEmpty(t))return null;if(e.test(t)){var r=n(t,d);return _&&(r=bt(r,_)),r}})),s.$formatters.push((function(t){if(t&&!H(t))throw Do("datefmt","Expected `{0}` to be a date",t);return h(t)?((d=t)&&_&&(d=bt(d,_,!0)),u("date")(t,r,_)):(d=null,"")})),L(a.min)||a.ngMin)&&(s.$validators.min=function(t){return!h(t)||z(p)||n(t)>=p},a.$observe("min",(function(t){p=m(t),s.$validate()})));(L(a.max)||a.ngMax)&&(s.$validators.max=function(t){return!h(t)||z(f)||n(t)<=f},a.$observe("max",(function(t){f=m(t),s.$validate()})));function h(t){return t&&!(t.getTime&&t.getTime()!=t.getTime())}function m(t){return L(t)&&!H(t)?n(t)||void 0:t}}}function eo(t,e,n,r){var i=e[0];(r.$$hasNativeValidators=N(i.validity))&&r.$parsers.push((function(t){var n=e.prop(a)||{};return n.badInput||n.typeMismatch?void 0:t}))}function no(t){t.$$parserName="number",t.$parsers.push((function(e){return t.$isEmpty(e)?null:Vi.test(e)?parseFloat(e):void 0})),t.$formatters.push((function(e){if(!t.$isEmpty(e)){if(!V(e))throw Do("numfmt","Expected `{0}` to be a number",e);e=e.toString()}return e}))}function ro(t){return L(t)&&!V(t)&&(t=parseFloat(t)),q(t)?void 0:t}function io(t){return(0|t)===t}function oo(t){var e=t.toString(),n=e.indexOf(".");if(-1===n){if(-1<t&&t<1){var r=/e-(\d+)$/.exec(e);if(r)return Number(r[1])}return 0}return e.length-n-1}function ao(t,e,n){var r=Number(t),i=!io(r),o=!io(e),a=!io(n);if(i||o||a){var s=i?oo(r):0,c=o?oo(e):0,l=a?oo(n):0,u=Math.max(s,c,l),d=Math.pow(10,u);r*=d,e*=d,n*=d,i&&(r=Math.round(r)),o&&(e=Math.round(e)),a&&(n=Math.round(n))}return(r-e)%n==0}function so(t,e,n,r,i){var o;if(L(r)){if(!(o=t(r)).constant)throw Do("constexpr","Expected constant expression for `{0}`, but saw `{1}`.",n,r);return o(e)}return i}var co=["$browser","$sniffer","$filter","$parse",function(t,e,n,r){return{restrict:"E",require:["?ngModel"],link:{pre:function(i,o,a,s){s[0]&&(Ji[c(a.type)]||Ji.text)(i,o,a,s[0],e,t,n,r)}}}}],lo=/^(true|false|\d+)$/,uo=function(){function t(t,e,n){var r=L(n)?n:9===u?"":null;t.prop("value",r),e.$set("value",n)}return{restrict:"A",priority:100,compile:function(e,n){return lo.test(n.ngValue)?function(e,n,r){t(n,r,e.$eval(r.ngValue))}:function(e,n,r){e.$watch(r.ngValue,(function(e){t(n,r,e)}))}}}},po=["$compile",function(t){return{restrict:"AC",compile:function(e){return t.$$addBindingClass(e),function(e,n,r){t.$$addBindingInfo(n,r.ngBind),n=n[0],e.$watch(r.ngBind,(function(t){n.textContent=Ft(t)}))}}}}],fo=["$interpolate","$compile",function(t,e){return{compile:function(n){return e.$$addBindingClass(n),function(n,r,i){var o=t(r.attr(i.$attr.ngBindTemplate));e.$$addBindingInfo(r,o.expressions),r=r[0],i.$observe("ngBindTemplate",(function(t){r.textContent=z(t)?"":t}))}}}}],_o=["$sce","$parse","$compile",function(t,e,n){return{restrict:"A",compile:function(r,i){var o=e(i.ngBindHtml),a=e(i.ngBindHtml,(function(e){return t.valueOf(e)}));return n.$$addBindingClass(r),function(e,r,i){n.$$addBindingInfo(r,i.ngBindHtml),e.$watch(a,(function(){var n=o(e);r.html(t.getTrustedHtml(n)||"")}))}}}}],ho=R({restrict:"A",require:"ngModel",link:function(t,e,n,r){r.$viewChangeListeners.push((function(){t.$eval(n.ngChange)}))}});function mo(t,e){var n;return t="ngClass"+t,["$parse",function(s){return{restrict:"AC",link:function(c,l,u){var d,p=u[t].trim(),f=":"===p.charAt(0)&&":"===p.charAt(1),_=s(p,f?a:o),h=f?function(t){var e=o(t);e!==d&&b(e)}:b,m=l.data("$classCounts"),g=!0;function v(t,e){var n=[];return x(t,(function(t){(e>0||m[t])&&(m[t]=(m[t]||0)+e,m[t]===+(e>0)&&n.push(t))})),n.join(" ")}function b(t){g===e&&function(t,e){var n=i(t),o=i(e),a=r(n,o),s=r(o,n),c=v(a,-1),l=v(s,1);u.$addClass(l),u.$removeClass(c)}(d,t),d=t}m||(m=Nt(),l.data("$classCounts",m)),"ngClass"!==t&&(n||(n=s("$index",(function(t){return 1&t}))),c.$watch(n,(function(t){t===e?(n=v(i(n=d),1),u.$addClass(n)):function(t){t=v(i(t),-1),u.$removeClass(t)}(d);var n;g=t}))),c.$watch(_,h,f)}}}];function r(t,e){if(!t||!t.length)return[];if(!e||!e.length)return t;var n=[];t:for(var r=0;r<t.length;r++){for(var i=t[r],o=0;o<e.length;o++)if(i===e[o])continue t;n.push(i)}return n}function i(t){return t&&t.split(" ")}function o(t){var e=t;return B(t)?e=t.map(o).join(" "):N(t)&&(e=Object.keys(t).filter((function(e){return t[e]})).join(" ")),e}function a(t){var e=t;if(B(t))e=t.map(a);else if(N(t)){var n=!1;e=Object.keys(t).filter((function(e){var r=t[e];return!n&&z(r)&&(n=!0),r})),n&&e.push(void 0)}return e}}var go=mo("",!0),vo=mo("Odd",0),bo=mo("Even",1),yo=Ai({compile:function(t,e){e.$set("ngCloak",void 0),t.removeClass("ng-cloak")}}),wo=[function(){return{restrict:"A",scope:!0,controller:"@",priority:500}}],$o={},xo={blur:!0,focus:!0};x("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),(function(t){var e=hn("ng-"+t);$o[e]=["$parse","$rootScope",function(n,r){return{restrict:"A",compile:function(i,o){var a=n(o[e]);return function(e,n){n.on(t,(function(n){var i=function(){a(e,{$event:n})};xo[t]&&r.$$phase?e.$evalAsync(i):e.$apply(i)}))}}}}]}));var ko=["$animate","$compile",function(t,e){return{multiElement:!0,transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function(n,r,i,o,a){var s,c,l;n.$watch(i.ngIf,(function(n){n?c||a((function(n,o){c=o,n[n.length++]=e.$$createComment("end ngIf",i.ngIf),s={clone:n},t.enter(n,r.parent(),r)})):(l&&(l.remove(),l=null),c&&(c.$destroy(),c=null),s&&(l=Lt(s.clone),t.leave(l).done((function(t){!1!==t&&(l=null)})),s=null))}))}}}],Co=["$templateRequest","$anchorScroll","$animate",function(t,e,n){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:y.noop,compile:function(r,i){var o=i.ngInclude||i.src,a=i.onload||"",s=i.autoscroll;return function(r,i,c,l,u){var d,p,f,_=0,h=function(){p&&(p.remove(),p=null),d&&(d.$destroy(),d=null),f&&(n.leave(f).done((function(t){!1!==t&&(p=null)})),p=f,f=null)};r.$watch(o,(function(o){var c=function(t){!1===t||!L(s)||s&&!r.$eval(s)||e()},p=++_;o?(t(o,!0).then((function(t){if(!r.$$destroyed&&p===_){var e=r.$new();l.template=t;var s=u(e,(function(t){h(),n.enter(t,null,i).done(c)}));f=s,(d=e).$emit("$includeContentLoaded",o),r.$eval(a)}}),(function(){r.$$destroyed||p===_&&(h(),r.$emit("$includeContentError",o))})),r.$emit("$includeContentRequested",o)):(h(),l.template=null)}))}}}}],So=["$compile",function(e){return{restrict:"ECA",priority:-400,require:"ngInclude",link:function(n,r,i,o){if(g.call(r[0]).match(/SVG/))return r.empty(),void e(se(o.template,t.document).childNodes)(n,(function(t){r.append(t)}),{futureParentElement:r});r.html(o.template),e(r.contents())(n)}}}],Ao=Ai({priority:450,compile:function(){return{pre:function(t,e,n){t.$eval(n.ngInit)}}}}),Eo=function(){return{restrict:"A",priority:100,require:"ngModel",link:function(t,e,n,r){var i=n.ngList||", ",o="false"!==n.ngTrim,a=o?tt(i):i;r.$parsers.push((function(t){if(!z(t)){var e=[];return t&&x(t.split(a),(function(t){t&&e.push(o?tt(t):t)})),e}})),r.$formatters.push((function(t){if(B(t))return t.join(i)})),r.$isEmpty=function(t){return!t||!t.length}}}},jo="ng-valid",Oo="ng-invalid",To="ng-pristine",qo="ng-dirty",Po="ng-untouched",Mo="ng-touched",Io="ng-empty",Ro="ng-not-empty",Do=i("ngModel");function zo(t,e,n,r,i,o,a,s,c){var l;this.$viewValue=Number.NaN,this.$modelValue=Number.NaN,this.$$rawModelValue=void 0,this.$validators={},this.$asyncValidators={},this.$parsers=[],this.$formatters=[],this.$viewChangeListeners=[],this.$untouched=!0,this.$touched=!1,this.$pristine=!0,this.$dirty=!1,this.$valid=!0,this.$invalid=!1,this.$error={},this.$$success={},this.$pending=void 0,this.$name=c(n.name||"",!1)(t),this.$$parentForm=Oi,this.$options=Lo,this.$$parsedNgModel=i(n.ngModel),this.$$parsedNgModelAssign=this.$$parsedNgModel.assign,this.$$ngModelGet=this.$$parsedNgModel,this.$$ngModelSet=this.$$parsedNgModelAssign,this.$$pendingDebounce=null,this.$$parserValid=void 0,this.$$currentValidationRunId=0,Object.defineProperty(this,"$$scope",{value:t}),this.$$attr=n,this.$$element=r,this.$$animate=o,this.$$timeout=a,this.$$parse=i,this.$$q=s,this.$$exceptionHandler=e,Di(this),(l=this).$$scope.$watch((function(t){var e=l.$$ngModelGet(t);if(e!==l.$modelValue&&(l.$modelValue==l.$modelValue||e==e)){l.$modelValue=l.$$rawModelValue=e,l.$$parserValid=void 0;for(var n=l.$formatters,r=n.length,i=e;r--;)i=n[r](i);l.$viewValue!==i&&(l.$$updateEmptyClasses(i),l.$viewValue=l.$$lastCommittedViewValue=i,l.$render(),l.$$runValidators(l.$modelValue,l.$viewValue,M))}return e}))}zo.$inject=["$scope","$exceptionHandler","$attrs","$element","$parse","$animate","$timeout","$q","$interpolate"],zo.prototype={$$initGetterSetters:function(){if(this.$options.getOption("getterSetter")){var t=this.$$parse(this.$$attr.ngModel+"()"),e=this.$$parse(this.$$attr.ngModel+"($$$p)");this.$$ngModelGet=function(e){var n=this.$$parsedNgModel(e);return G(n)&&(n=t(e)),n},this.$$ngModelSet=function(t,n){G(this.$$parsedNgModel(t))?e(t,{$$$p:n}):this.$$parsedNgModelAssign(t,n)}}else if(!this.$$parsedNgModel.assign)throw Do("nonassign","Expression '{0}' is non-assignable. Element: {1}",this.$$attr.ngModel,yt(this.$$element))},$render:M,$isEmpty:function(t){return z(t)||""===t||null===t||t!=t},$$updateEmptyClasses:function(t){this.$isEmpty(t)?(this.$$animate.removeClass(this.$$element,Ro),this.$$animate.addClass(this.$$element,Io)):(this.$$animate.removeClass(this.$$element,Io),this.$$animate.addClass(this.$$element,Ro))},$setPristine:function(){this.$dirty=!1,this.$pristine=!0,this.$$animate.removeClass(this.$$element,qo),this.$$animate.addClass(this.$$element,To)},$setDirty:function(){this.$dirty=!0,this.$pristine=!1,this.$$animate.removeClass(this.$$element,To),this.$$animate.addClass(this.$$element,qo),this.$$parentForm.$setDirty()},$setUntouched:function(){this.$touched=!1,this.$untouched=!0,this.$$animate.setClass(this.$$element,Po,Mo)},$setTouched:function(){this.$touched=!0,this.$untouched=!1,this.$$animate.setClass(this.$$element,Mo,Po)},$rollbackViewValue:function(){this.$$timeout.cancel(this.$$pendingDebounce),this.$viewValue=this.$$lastCommittedViewValue,this.$render()},$validate:function(){if(!q(this.$modelValue)){var t=this.$$lastCommittedViewValue,e=this.$$rawModelValue,n=this.$valid,r=this.$modelValue,i=this.$options.getOption("allowInvalid"),o=this;this.$$runValidators(e,t,(function(t){i||n===t||(o.$modelValue=t?e:void 0,o.$modelValue!==r&&o.$$writeModelToScope())}))}},$$runValidators:function(t,e,n){this.$$currentValidationRunId++;var r,i,o=this.$$currentValidationRunId,a=this;(function(){var t=a.$$parserName||"parse";if(!z(a.$$parserValid))return a.$$parserValid||(x(a.$validators,(function(t,e){s(e,null)})),x(a.$asyncValidators,(function(t,e){s(e,null)}))),s(t,a.$$parserValid),a.$$parserValid;s(t,null);return!0})()?!function(){var n=!0;if(x(a.$validators,(function(r,i){var o=Boolean(r(t,e));n=n&&o,s(i,o)})),!n)return x(a.$asyncValidators,(function(t,e){s(e,null)})),!1;return!0}()?c(!1):(r=[],i=!0,x(a.$asyncValidators,(function(n,o){var a=n(t,e);if(!X(a))throw Do("nopromise","Expected asynchronous validator to return a promise but got '{0}' instead.",a);s(o,void 0),r.push(a.then((function(){s(o,!0)}),(function(){i=!1,s(o,!1)})))})),r.length?a.$$q.all(r).then((function(){c(i)}),M):c(!0)):c(!1);function s(t,e){o===a.$$currentValidationRunId&&a.$setValidity(t,e)}function c(t){o===a.$$currentValidationRunId&&n(t)}},$commitViewValue:function(){var t=this.$viewValue;this.$$timeout.cancel(this.$$pendingDebounce),(this.$$lastCommittedViewValue!==t||""===t&&this.$$hasNativeValidators)&&(this.$$updateEmptyClasses(t),this.$$lastCommittedViewValue=t,this.$pristine&&this.$setDirty(),this.$$parseAndValidate())},$$parseAndValidate:function(){var t=this.$$lastCommittedViewValue,e=this;if(this.$$parserValid=!z(t)||void 0,this.$$parserValid)for(var n=0;n<this.$parsers.length;n++)if(z(t=this.$parsers[n](t))){this.$$parserValid=!1;break}q(this.$modelValue)&&(this.$modelValue=this.$$ngModelGet(this.$$scope));var r=this.$modelValue,i=this.$options.getOption("allowInvalid");function o(){e.$modelValue!==r&&e.$$writeModelToScope()}this.$$rawModelValue=t,i&&(this.$modelValue=t,o()),this.$$runValidators(t,this.$$lastCommittedViewValue,(function(n){i||(e.$modelValue=n?t:void 0,o())}))},$$writeModelToScope:function(){this.$$ngModelSet(this.$$scope,this.$modelValue),x(this.$viewChangeListeners,(function(t){try{t()}catch(t){this.$$exceptionHandler(t)}}),this)},$setViewValue:function(t,e){this.$viewValue=t,this.$options.getOption("updateOnDefault")&&this.$$debounceViewValueCommit(e)},$$debounceViewValueCommit:function(t){var e=this.$options.getOption("debounce");V(e[t])?e=e[t]:V(e.default)&&(e=e.default),this.$$timeout.cancel(this.$$pendingDebounce);var n=this;e>0?this.$$pendingDebounce=this.$$timeout((function(){n.$commitViewValue()}),e):this.$$scope.$root.$$phase?this.$commitViewValue():this.$$scope.$apply((function(){n.$commitViewValue()}))},$overrideModelOptions:function(t){this.$options=this.$options.createChild(t)}},zi({clazz:zo,set:function(t,e){t[e]=!0},unset:function(t,e){delete t[e]}});var Lo,No=["$rootScope",function(t){return{restrict:"A",require:["ngModel","^?form","^?ngModelOptions"],controller:zo,priority:1,compile:function(e){return e.addClass(To).addClass(Po).addClass(jo),{pre:function(t,e,n,r){var i=r[0],o=r[1]||i.$$parentForm,a=r[2];a&&(i.$options=a.$options),i.$$initGetterSetters(),o.$addControl(i),n.$observe("name",(function(t){i.$name!==t&&i.$$parentForm.$$renameControl(i,t)})),t.$on("$destroy",(function(){i.$$parentForm.$removeControl(i)}))},post:function(e,n,r,i){var o=i[0];function a(){o.$setTouched()}o.$options.getOption("updateOn")&&n.on(o.$options.getOption("updateOn"),(function(t){o.$$debounceViewValueCommit(t&&t.type)})),n.on("blur",(function(){o.$touched||(t.$$phase?e.$evalAsync(a):e.$apply(a))}))}}}}}],Fo=/(\s+|^)default(\s+|$)/;function Uo(t){this.$$options=t}Uo.prototype={getOption:function(t){return this.$$options[t]},createChild:function(t){var e=!1;return x(t=j({},t),(function(n,r){"$inherit"===n?"*"===r?e=!0:(t[r]=this.$$options[r],"updateOn"===r&&(t.updateOnDefault=this.$$options.updateOnDefault)):"updateOn"===r&&(t.updateOnDefault=!1,t[r]=tt(n.replace(Fo,(function(){return t.updateOnDefault=!0," "}))))}),this),e&&(delete t["*"],Ho(t,this.$$options)),Ho(t,Lo.$$options),new Uo(t)}},Lo=new Uo({updateOn:"",updateOnDefault:!0,debounce:0,getterSetter:!1,allowInvalid:!1,timezone:null});var Vo=function(){function t(t,e){this.$$attrs=t,this.$$scope=e}return t.$inject=["$attrs","$scope"],t.prototype={$onInit:function(){var t=this.parentCtrl?this.parentCtrl.$options:Lo,e=this.$$scope.$eval(this.$$attrs.ngModelOptions);this.$options=t.createChild(e)}},{restrict:"A",priority:10,require:{parentCtrl:"?^^ngModelOptions"},bindToController:!0,controller:t}};function Ho(t,e){x(e,(function(e,n){L(t[n])||(t[n]=e)}))}var Bo=Ai({terminal:!0,priority:1e3}),Wo=i("ngOptions"),Go=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?(?:\s+disable\s+when\s+([\s\S]+?))?\s+for\s+(?:([$\w][$\w]*)|(?:\(\s*([$\w][$\w]*)\s*,\s*([$\w][$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,Yo=["$compile","$document","$parse",function(e,n,r){var i=t.document.createElement("option"),o=t.document.createElement("optgroup");return{restrict:"A",terminal:!0,require:["select","ngModel"],link:{pre:function(t,e,n,r){r[0].registerOption=M},post:function(t,a,s,c){for(var l=c[0],u=c[1],p=s.multiple,f=0,_=a.children(),h=_.length;f<h;f++)if(""===_[f].value){l.hasEmptyOption=!0,l.emptyOption=_.eq(f);break}a.empty();var m,g=!!l.emptyOption;d(i.cloneNode(!1)).val("?");var v=function(t,e,n){var i=t.match(Go);if(!i)throw Wo("iexp","Expected expression in form of '_select_ (as _label_)? for (_key_,)?_value_ in _collection_' but got '{0}'. Element: {1}",t,yt(e));var o=i[5]||i[7],a=i[6],s=/ as /.test(i[0])&&i[1],c=i[9],l=r(i[2]?i[1]:o),u=s&&r(s)||l,d=c&&r(c),p=c?function(t,e){return d(n,e)}:function(t){return Pe(t)},f=function(t,e){return p(t,b(t,e))},_=r(i[2]||i[1]),h=r(i[3]||""),m=r(i[4]||""),g=r(i[8]),v={},b=a?function(t,e){return v[a]=e,v[o]=t,v}:function(t){return v[o]=t,v};function y(t,e,n,r,i){this.selectValue=t,this.viewValue=e,this.label=n,this.group=r,this.disabled=i}function w(t){var e;if(!a&&$(t))e=t;else for(var n in e=[],t)t.hasOwnProperty(n)&&"$"!==n.charAt(0)&&e.push(n);return e}return{trackBy:c,getTrackByValue:f,getWatchables:r(g,(function(t){for(var e=[],r=w(t=t||[]),o=r.length,a=0;a<o;a++){var s=t===r?a:r[a],c=t[s],l=b(c,s),u=p(c,l);if(e.push(u),i[2]||i[1]){var d=_(n,l);e.push(d)}if(i[4]){var f=m(n,l);e.push(f)}}return e})),getOptions:function(){for(var t=[],e={},r=g(n)||[],i=w(r),o=i.length,a=0;a<o;a++){var s=r===i?a:i[a],l=r[s],d=b(l,s),v=u(n,d),$=p(v,d),x=new y($,v,_(n,d),h(n,d),m(n,d));t.push(x),e[$]=x}return{items:t,selectValueMap:e,getOptionFromViewValue:function(t){return e[f(t)]},getViewValueFromOption:function(t){return c?at(t.viewValue):t.viewValue}}}}}(s.ngOptions,a,t),b=n[0].createDocumentFragment();function y(t,e){var n=i.cloneNode(!1);e.appendChild(n),function(t,e){t.element=e,e.disabled=t.disabled,t.label!==e.label&&(e.label=t.label,e.textContent=t.label);e.value=t.selectValue}(t,n)}function w(t){var e=m.getOptionFromViewValue(t),n=e&&e.element;return n&&!n.selected&&(n.selected=!0),e}l.generateUnknownOptionValue=function(t){return"?"},p?(l.writeValue=function(t){if(m){var e=t&&t.map(w)||[];m.items.forEach((function(t){t.element.selected&&!it(e,t)&&(t.element.selected=!1)}))}},l.readValue=function(){var t=a.val()||[],e=[];return x(t,(function(t){var n=m.selectValueMap[t];n&&!n.disabled&&e.push(m.getViewValueFromOption(n))})),e},v.trackBy&&t.$watchCollection((function(){if(B(u.$viewValue))return u.$viewValue.map((function(t){return v.getTrackByValue(t)}))}),(function(){u.$render()}))):(l.writeValue=function(t){if(m){var e=a[0].options[a[0].selectedIndex],n=m.getOptionFromViewValue(t);e&&e.removeAttribute("selected"),n?(a[0].value!==n.selectValue&&(l.removeUnknownOption(),a[0].value=n.selectValue,n.element.selected=!0),n.element.setAttribute("selected","selected")):l.selectUnknownOrEmptyOption(t)}},l.readValue=function(){var t=m.selectValueMap[a.val()];return t&&!t.disabled?(l.unselectEmptyOption(),l.removeUnknownOption(),m.getViewValueFromOption(t)):null},v.trackBy&&t.$watch((function(){return v.getTrackByValue(u.$viewValue)}),(function(){u.$render()}))),g&&(e(l.emptyOption)(t),a.prepend(l.emptyOption),8===l.emptyOption[0].nodeType?(l.hasEmptyOption=!1,l.registerOption=function(t,e){""===e.val()&&(l.hasEmptyOption=!0,l.emptyOption=e,l.emptyOption.removeClass("ng-scope"),u.$render(),e.on("$destroy",(function(){var t=l.$isEmptyOptionSelected();l.hasEmptyOption=!1,l.emptyOption=void 0,t&&u.$render()})))}):l.emptyOption.removeClass("ng-scope")),t.$watchCollection(v.getWatchables,(function(){var t=m&&l.readValue();if(m)for(var e=m.items.length-1;e>=0;e--){var n=m.items[e];L(n.group)?xe(n.element.parentNode):xe(n.element)}m=v.getOptions();var r={};if(m.items.forEach((function(t){var e;L(t.group)?((e=r[t.group])||(e=o.cloneNode(!1),b.appendChild(e),e.label=null===t.group?"null":t.group,r[t.group]=e),y(t,e)):y(t,b)})),a[0].appendChild(b),u.$render(),!u.$isEmpty(t)){var i=l.readValue();(v.trackBy||p?ct(t,i):t===i)||(u.$setViewValue(i),u.$render())}}))}}}}],Ko=["$locale","$interpolate","$log",function(t,e,n){var r=/{}/g,i=/^when(Minus)?(.+)$/;return{link:function(o,a,s){var l,u=s.count,d=s.$attr.when&&a.attr(s.$attr.when),p=s.offset||0,f=o.$eval(d)||{},_={},h=e.startSymbol(),m=e.endSymbol(),g=h+u+"-"+p+m,v=y.noop;function b(t){a.text(t||"")}x(s,(function(t,e){var n=i.exec(e);if(n){var r=(n[1]?"-":"")+c(n[2]);f[r]=a.attr(s.$attr[e])}})),x(f,(function(t,n){_[n]=e(t.replace(r,g))})),o.$watch(u,(function(e){var r=parseFloat(e),i=q(r);if(i||r in f||(r=t.pluralCat(r-p)),!(r===l||i&&q(l))){v();var a=_[r];z(a)?(null!=e&&n.debug("ngPluralize: no rule defined for '"+r+"' in "+d),v=M,b()):v=o.$watch(a,b),l=r}}))}}}],Jo=["$parse","$animate","$compile",function(t,e,n){var r="$$NG_REMOVED",o=i("ngRepeat"),a=function(t,e,n,r,i,o,a){t[n]=r,i&&(t[i]=o),t.$index=e,t.$first=0===e,t.$last=e===a-1,t.$middle=!(t.$first||t.$last),t.$odd=!(t.$even=0==(1&e))},c=function(t){return t.clone[0]},l=function(t){return t.clone[t.clone.length-1]};return{restrict:"A",multiElement:!0,transclude:"element",priority:1e3,terminal:!0,$$tlb:!0,compile:function(i,u){var d=u.ngRepeat,p=n.$$createComment("end ngRepeat",d),f=d.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);if(!f)throw o("iexp","Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.",d);var _=f[1],h=f[2],m=f[3],g=f[4];if(!(f=_.match(/^(?:(\s*[$\w]+)|\(\s*([$\w]+)\s*,\s*([$\w]+)\s*\))$/)))throw o("iidexp","'_item_' in '_item_ in _collection_' should be an identifier or '(_key_, _value_)' expression, but got '{0}'.",_);var v,b,y,w,k=f[3]||f[1],C=f[2];if(m&&(!/^[$a-zA-Z_][$a-zA-Z0-9_]*$/.test(m)||/^(null|undefined|this|\$index|\$first|\$middle|\$last|\$even|\$odd|\$parent|\$root|\$id)$/.test(m)))throw o("badident","alias '{0}' is invalid --- must be a valid JS identifier which is not a reserved name.",m);var S={$id:Pe};return g?v=t(g):(y=function(t,e){return Pe(e)},w=function(t){return t}),function(t,n,i,u,f){v&&(b=function(e,n,r){return C&&(S[C]=e),S[k]=n,S.$index=r,v(t,S)});var _=Nt();t.$watchCollection(h,(function(i){var u,h,g,v,S,A,E,j,O,T,q,P,M=n[0],I=Nt();if(m&&(t[m]=i),$(i))O=i,j=b||y;else for(var R in j=b||w,O=[],i)s.call(i,R)&&"$"!==R.charAt(0)&&O.push(R);for(v=O.length,q=new Array(v),u=0;u<v;u++)if(S=i===O?u:O[u],A=i[S],E=j(S,A,u),_[E])T=_[E],delete _[E],I[E]=T,q[u]=T;else{if(I[E])throw x(q,(function(t){t&&t.scope&&(_[t.id]=t)})),o("dupes","Duplicates in a repeater are not allowed. Use 'track by' expression to specify unique keys. Repeater: {0}, Duplicate key: {1}, Duplicate value: {2}",d,E,A);q[u]={id:E,scope:void 0,clone:void 0},I[E]=!0}for(var D in _){if(P=Lt((T=_[D]).clone),e.leave(P),P[0].parentNode)for(u=0,h=P.length;u<h;u++)P[u][r]=!0;T.scope.$destroy()}for(u=0;u<v;u++)if(S=i===O?u:O[u],A=i[S],(T=q[u]).scope){g=M;do{g=g.nextSibling}while(g&&g[r]);c(T)!==g&&e.move(Lt(T.clone),null,M),M=l(T),a(T.scope,u,k,A,C,S,v)}else f((function(t,n){T.scope=n;var r=p.cloneNode(!1);t[t.length++]=r,e.enter(t,null,M),M=r,T.clone=t,I[T.id]=T,a(T.scope,u,k,A,C,S,v)}));_=I}))}}}}],Qo="ng-hide",Xo="ng-hide-animate",Zo=["$animate",function(t){return{restrict:"A",multiElement:!0,link:function(e,n,r){e.$watch(r.ngShow,(function(e){t[e?"removeClass":"addClass"](n,Qo,{tempClasses:Xo})}))}}}],ta=["$animate",function(t){return{restrict:"A",multiElement:!0,link:function(e,n,r){e.$watch(r.ngHide,(function(e){t[e?"addClass":"removeClass"](n,Qo,{tempClasses:Xo})}))}}}],ea=Ai((function(t,e,n){t.$watch(n.ngStyle,(function(t,n){n&&t!==n&&x(n,(function(t,n){e.css(n,"")})),t&&e.css(t)}),!0)})),na=["$animate","$compile",function(t,e){return{require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(n,r,i,o){var a=i.ngSwitch||i.on,s=[],c=[],l=[],u=[],d=function(t,e){return function(n){!1!==n&&t.splice(e,1)}};n.$watch(a,(function(n){for(var r,i;l.length;)t.cancel(l.pop());for(r=0,i=u.length;r<i;++r){var a=Lt(c[r].clone);u[r].$destroy(),(l[r]=t.leave(a)).done(d(l,r))}c.length=0,u.length=0,(s=o.cases["!"+n]||o.cases["?"])&&x(s,(function(n){n.transclude((function(r,i){u.push(i);var o=n.element;r[r.length++]=e.$$createComment("end ngSwitchWhen");var a={clone:r};c.push(a),t.enter(r,o.parent(),o)}))}))}))}}}],ra=Ai({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(t,e,n,r,i){var o=n.ngSwitchWhen.split(n.ngSwitchWhenSeparator).sort().filter((function(t,e,n){return n[e-1]!==t}));x(o,(function(t){r.cases["!"+t]=r.cases["!"+t]||[],r.cases["!"+t].push({transclude:i,element:e})}))}}),ia=Ai({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(t,e,n,r,i){r.cases["?"]=r.cases["?"]||[],r.cases["?"].push({transclude:i,element:e})}}),oa=i("ngTransclude"),aa=["$compile",function(t){return{restrict:"EAC",terminal:!0,compile:function(e){var n=t(e.contents());return e.empty(),function(t,e,r,i,o){if(!o)throw oa("orphan","Illegal use of ngTransclude directive in the template! No parent directive that requires a transclusion found. Element: {0}",yt(e));r.ngTransclude===r.$attr.ngTransclude&&(r.ngTransclude="");var a=r.ngTransclude||r.ngTranscludeSlot;function s(){n(t,(function(t){e.append(t)}))}o((function(t,n){t.length&&function(t){for(var e=0,n=t.length;e<n;e++){var r=t[e];if(r.nodeType!==Ut||r.nodeValue.trim())return!0}}(t)?e.append(t):(s(),n.$destroy())}),null,a),a&&!o.isSlotFilled(a)&&s()}}}}],sa=["$templateCache",function(t){return{restrict:"E",terminal:!0,compile:function(e,n){if("text/ng-template"===n.type){var r=n.id,i=e[0].text;t.put(r,i)}}}}],ca={$setViewValue:M,$render:M};function la(t,e){t.prop("selected",e),t.attr("selected",e)}var ua=["$element","$scope",function(e,n){var r=this,i=new Re;r.selectValueMap={},r.ngModelCtrl=ca,r.multiple=!1,r.unknownOption=d(t.document.createElement("option")),r.hasEmptyOption=!1,r.emptyOption=void 0,r.renderUnknownOption=function(t){var n=r.generateUnknownOptionValue(t);r.unknownOption.val(n),e.prepend(r.unknownOption),la(r.unknownOption,!0),e.val(n)},r.updateUnknownOption=function(t){var n=r.generateUnknownOptionValue(t);r.unknownOption.val(n),la(r.unknownOption,!0),e.val(n)},r.generateUnknownOptionValue=function(t){return"? "+Pe(t)+" ?"},r.removeUnknownOption=function(){r.unknownOption.parent()&&r.unknownOption.remove()},r.selectEmptyOption=function(){r.emptyOption&&(e.val(""),la(r.emptyOption,!0))},r.unselectEmptyOption=function(){r.hasEmptyOption&&la(r.emptyOption,!1)},n.$on("$destroy",(function(){r.renderUnknownOption=M})),r.readValue=function(){var t=e.val(),n=t in r.selectValueMap?r.selectValueMap[t]:t;return r.hasOption(n)?n:null},r.writeValue=function(t){var n=e[0].options[e[0].selectedIndex];if(n&&la(d(n),!1),r.hasOption(t)){r.removeUnknownOption();var i=Pe(t);e.val(i in r.selectValueMap?i:t);var o=e[0].options[e[0].selectedIndex];la(d(o),!0)}else r.selectUnknownOrEmptyOption(t)},r.addOption=function(t,e){if(8!==e[0].nodeType){Dt(t,'"option value"'),""===t&&(r.hasEmptyOption=!0,r.emptyOption=e);var n=i.get(t)||0;i.set(t,n+1),a()}},r.removeOption=function(t){var e=i.get(t);e&&(1===e?(i.delete(t),""===t&&(r.hasEmptyOption=!1,r.emptyOption=void 0)):i.set(t,e-1))},r.hasOption=function(t){return!!i.get(t)},r.$hasEmptyOption=function(){return r.hasEmptyOption},r.$isUnknownOptionSelected=function(){return e[0].options[0]===r.unknownOption[0]},r.$isEmptyOptionSelected=function(){return r.hasEmptyOption&&e[0].options[e[0].selectedIndex]===r.emptyOption[0]},r.selectUnknownOrEmptyOption=function(t){null==t&&r.emptyOption?(r.removeUnknownOption(),r.selectEmptyOption()):r.unknownOption.parent().length?r.updateUnknownOption(t):r.renderUnknownOption(t)};var o=!1;function a(){o||(o=!0,n.$$postDigest((function(){o=!1,r.ngModelCtrl.$render()})))}var s=!1;function c(t){s||(s=!0,n.$$postDigest((function(){n.$$destroyed||(s=!1,r.ngModelCtrl.$setViewValue(r.readValue()),t&&r.ngModelCtrl.$render())})))}r.registerOption=function(t,e,n,i,o){if(n.$attr.ngValue){var s,l=NaN;n.$observe("value",(function(t){var n,i=e.prop("selected");L(l)&&(r.removeOption(s),delete r.selectValueMap[l],n=!0),l=Pe(t),s=t,r.selectValueMap[l]=t,r.addOption(t,e),e.attr("value",l),n&&i&&c()}))}else i?n.$observe("value",(function(t){var n;r.readValue();var i=e.prop("selected");L(s)&&(r.removeOption(s),n=!0),s=t,r.addOption(t,e),n&&i&&c()})):o?t.$watch(o,(function(t,i){n.$set("value",t);var o=e.prop("selected");i!==t&&r.removeOption(i),r.addOption(t,e),i&&o&&c()})):r.addOption(n.value,e);n.$observe("disabled",(function(t){("true"===t||t&&e.prop("selected"))&&(r.multiple?c(!0):(r.ngModelCtrl.$setViewValue(null),r.ngModelCtrl.$render()))})),e.on("$destroy",(function(){var t=r.readValue(),e=n.value;r.removeOption(e),a(),(r.multiple&&t&&-1!==t.indexOf(e)||t===e)&&c(!0)}))}}],da=function(){return{restrict:"E",require:["select","?ngModel"],controller:ua,priority:1,link:{pre:function(t,e,n,r){var i=r[0],o=r[1];if(!o)return void(i.registerOption=M);if(i.ngModelCtrl=o,e.on("change",(function(){i.removeUnknownOption(),t.$apply((function(){o.$setViewValue(i.readValue())}))})),n.multiple){i.multiple=!0,i.readValue=function(){var t=[];return x(e.find("option"),(function(e){if(e.selected&&!e.disabled){var n=e.value;t.push(n in i.selectValueMap?i.selectValueMap[n]:n)}})),t},i.writeValue=function(t){x(e.find("option"),(function(e){var n=!!t&&(it(t,e.value)||it(t,i.selectValueMap[e.value]));n!==e.selected&&la(d(e),n)}))};var a,s=NaN;t.$watch((function(){s!==o.$viewValue||ct(a,o.$viewValue)||(a=Vt(o.$viewValue),o.$render()),s=o.$viewValue})),o.$isEmpty=function(t){return!t||0===t.length}}},post:function(t,e,n,r){var i=r[1];if(!i)return;var o=r[0];i.$render=function(){o.writeValue(i.$viewValue)}}}}},pa=["$interpolate",function(t){return{restrict:"E",priority:100,compile:function(e,n){var r,i;return L(n.ngValue)||(L(n.value)?r=t(n.value,!0):(i=t(e.text(),!0))||n.$set("value",e.text())),function(t,e,n){var o="$selectController",a=e.parent(),s=a.data(o)||a.parent().data(o);s&&s.registerOption(t,e,n,r,i)}}}}],fa=function(){return{restrict:"A",require:"?ngModel",link:function(t,e,n,r){r&&(n.required=!0,r.$validators.required=function(t,e){return!n.required||!r.$isEmpty(e)},n.$observe("required",(function(){r.$validate()})))}}},_a=function(){return{restrict:"A",require:"?ngModel",link:function(t,e,n,r){if(r){var o,a=n.ngPattern||n.pattern;n.$observe("pattern",(function(t){if(U(t)&&t.length>0&&(t=new RegExp("^"+t+"$")),t&&!t.test)throw i("ngPattern")("noregexp","Expected {0} to be a RegExp but was {1}. Element: {2}",a,t,yt(e));o=t||void 0,r.$validate()})),r.$validators.pattern=function(t,e){return r.$isEmpty(e)||z(o)||o.test(e)}}}}},ha=function(){return{restrict:"A",require:"?ngModel",link:function(t,e,n,r){if(r){var i=-1;n.$observe("maxlength",(function(t){var e=T(t);i=q(e)?-1:e,r.$validate()})),r.$validators.maxlength=function(t,e){return i<0||r.$isEmpty(e)||e.length<=i}}}}},ma=function(){return{restrict:"A",require:"?ngModel",link:function(t,e,n,r){if(r){var i=0;n.$observe("minlength",(function(t){i=T(t)||0,r.$validate()})),r.$validators.minlength=function(t,e){return r.$isEmpty(e)||e.length>=i}}}}};t.angular.bootstrap?t.console&&console.log("WARNING: Tried to load angular more than once."):(!function(){var e;if(!Mt){var n=ut();(p=z(n)?t.jQuery:n?t[n]:void 0)&&p.fn.on?(d=p,j(p.fn,{scope:Ce.scope,isolateScope:Ce.isolateScope,controller:Ce.controller,injector:Ce.injector,inheritedData:Ce.inheritedData}),e=p.cleanData,p.cleanData=function(t){for(var n,r,i=0;null!=(r=t[i]);i++)(n=p._data(r,"events"))&&n.$destroy&&p(r).triggerHandler("$destroy");e(t)}):d=le,y.element=d,Mt=!0}}(),function(e){j(e,{errorHandlingConfig:n,bootstrap:jt,copy:at,extend:j,merge:O,equals:ct,element:d,forEach:x,injector:We,noop:M,bind:ft,toJson:ht,fromJson:mt,identity:I,isUndefined:z,isDefined:L,isString:U,isFunction:G,isObject:N,isNumber:V,isElement:nt,isArray:B,version:Bt,isDate:H,lowercase:c,uppercase:l,callbacks:{$$counter:0},getTestability:Tt,reloadWithDebugInfo:Ot,$$minErr:i,$$csp:lt,$$encodeUriSegment:kt,$$encodeUriQuery:Ct,$$stringify:Ft}),f=function(t){var e=i("$injector"),n=i("ng");function r(t,e,n){return t[e]||(t[e]=n())}var o=r(t,"angular",Object);return o.$$minErr=o.$$minErr||i,r(o,"module",(function(){var t={};return function(i,o,a){var s={};return function(t,e){if("hasOwnProperty"===t)throw n("badname","hasOwnProperty is not a valid {0} name","module")}(i),o&&t.hasOwnProperty(i)&&(t[i]=null),r(t,i,(function(){if(!o)throw e("nomod","Module '{0}' is not available! You either misspelled the module name or forgot to load it. If registering a module ensure that you specify the dependencies as the second argument.",i);var t=[],r=[],c=[],l=d("$injector","invoke","push",r),u={_invokeQueue:t,_configBlocks:r,_runBlocks:c,info:function(t){if(L(t)){if(!N(t))throw n("aobj","Argument '{0}' must be an object","value");return s=t,this}return s},requires:o,name:i,provider:p("$provide","provider"),factory:p("$provide","factory"),service:p("$provide","service"),value:d("$provide","value"),constant:d("$provide","constant","unshift"),decorator:p("$provide","decorator",r),animation:p("$animateProvider","register"),filter:p("$filterProvider","register"),controller:p("$controllerProvider","register"),directive:p("$compileProvider","directive"),component:p("$compileProvider","component"),config:l,run:function(t){return c.push(t),this}};return a&&l(a),u;function d(e,n,r,i){return i||(i=t),function(){return i[r||"push"]([e,n,arguments]),u}}function p(e,n,r){return r||(r=t),function(t,o){return o&&G(o)&&(o.$$moduleName=i),r.push([e,n,arguments]),u}}}))}}))}(t),f("ng",["ngLocale"],["$provide",function(t){t.provider({$$sanitizeUri:zr}),t.provider("$compile",dn).directive({a:Ei,input:co,textarea:co,form:Ii,script:sa,select:da,option:pa,ngBind:po,ngBindHtml:_o,ngBindTemplate:fo,ngClass:go,ngClassEven:bo,ngClassOdd:vo,ngCloak:yo,ngController:wo,ngForm:Ri,ngHide:ta,ngIf:ko,ngInclude:Co,ngInit:Ao,ngNonBindable:Bo,ngPluralize:Ko,ngRepeat:Jo,ngShow:Zo,ngStyle:ea,ngSwitch:na,ngSwitchWhen:ra,ngSwitchDefault:ia,ngOptions:Yo,ngTransclude:aa,ngModel:No,ngList:Eo,ngChange:ho,pattern:_a,ngPattern:_a,required:fa,ngRequired:fa,minlength:ma,ngMinlength:ma,maxlength:ha,ngMaxlength:ha,ngValue:uo,ngModelOptions:Vo}).directive({ngInclude:So}).directive(ji).directive($o),t.provider({$anchorScroll:Ge,$animate:tn,$animateCss:rn,$$animateJs:Xe,$$animateQueue:Ze,$$AnimateRunner:nn,$$animateAsyncRun:en,$browser:an,$cacheFactory:sn,$controller:wn,$document:$n,$$isDocumentHidden:xn,$exceptionHandler:kn,$filter:ii,$$forceReflow:Cn,$interpolate:Hn,$interval:Bn,$http:Nn,$httpParamSerializer:Pn,$httpParamSerializerJQLike:Mn,$httpBackend:Un,$xhrFactory:Fn,$jsonpCallbacks:Wn,$location:ur,$log:dr,$parse:jr,$rootScope:Dr,$q:Or,$$q:Tr,$sce:Br,$sceDelegate:Hr,$sniffer:Wr,$templateCache:cn,$templateRequest:Yr,$$testability:Kr,$timeout:Jr,$window:ei,$$rAF:Rr,$$jqLite:qe,$$Map:De,$$cookieReader:ri})}]).info({angularVersion:"1.6.6"})}(y),y.module("ngLocale",[],["$provide",function(t){var e="one",n="other";t.value("$locale",{DATETIME_FORMATS:{AMPMS:["AM","PM"],DAY:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],ERANAMES:["Before Christ","Anno Domini"],ERAS:["BC","AD"],FIRSTDAYOFWEEK:6,MONTH:["January","February","March","April","May","June","July","August","September","October","November","December"],SHORTDAY:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],SHORTMONTH:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],STANDALONEMONTH:["January","February","March","April","May","June","July","August","September","October","November","December"],WEEKENDRANGE:[5,6],fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",medium:"MMM d, y h:mm:ss a",mediumDate:"MMM d, y",mediumTime:"h:mm:ss a",short:"M/d/yy h:mm a",shortDate:"M/d/yy",shortTime:"h:mm a"},NUMBER_FORMATS:{CURRENCY_SYM:"$",DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""}]},id:"en-us",localeID:"en_US",pluralCat:function(t,r){var i=0|t,o=function(t,e){var n=e;void 0===n&&(n=Math.min(function(t){var e=(t+="").indexOf(".");return-1==e?0:t.length-e-1}(t),3));var r=Math.pow(10,n);return{v:n,f:(t*r|0)%r}}(t,r);return 1==i&&0==o.v?e:n}})}]),d((function(){Et(t.document,jt)})))}(window),!window.angular.$$csp().noInlineStyle&&window.angular.element(document.head).prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-hide-animate){display:none !important;}ng\\:form{display:block;}.ng-animate-shim{visibility:hidden;}.ng-anchor{position:absolute;}</style>')},,function(t,e,n){"use strict";e.isFunction=function(t){return"function"==typeof t}},function(t,e,n){"use strict";var r,i=n(46);function o(){try{return r.apply(this,arguments)}catch(t){return i.errorObject.e=t,i.errorObject}}e.tryCatch=function(t){return r=t,o}},function(t,e,n){"use strict";var r=n(13).root.Symbol;e.rxSubscriber="function"==typeof r&&"function"==typeof r.for?r.for("rxSubscriber"):"@@rxSubscriber",e.$$rxSubscriber=e.rxSubscriber},function(t,e,n){"use strict";var r=n(13);function i(t){var e,n=t.Symbol;return"function"==typeof n?n.observable?e=n.observable:(e=n("observable"),n.observable=e):e="@@observable",e}e.getSymbolObservable=i,e.observable=i(r.root),e.$$observable=e.observable},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},i=function(t){function e(e,n){t.call(this),this.value=e,this.scheduler=n,this._isScalar=!0,n&&(this._isScalar=!1)}return r(e,t),e.create=function(t,n){return new e(t,n)},e.dispatch=function(t){var e=t.done,n=t.value,r=t.subscriber;e?r.complete():(r.next(n),r.closed||(t.done=!0,this.schedule(t)))},e.prototype._subscribe=function(t){var n=this.value,r=this.scheduler;if(r)return r.schedule(e.dispatch,0,{done:!1,value:n,subscriber:t});t.next(n),t.closed||t.complete()},e}(n(0).Observable);e.ScalarObservable=i},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},i=function(t){function e(e){t.call(this),this.scheduler=e}return r(e,t),e.create=function(t){return new e(t)},e.dispatch=function(t){t.subscriber.complete()},e.prototype._subscribe=function(t){var n=this.scheduler;if(n)return n.schedule(e.dispatch,0,{subscriber:t});t.complete()},e}(n(0).Observable);e.EmptyObservable=i},function(t,e,n){"use strict";var r=n(13);function i(t){var e=t.Symbol;if("function"==typeof e)return e.iterator||(e.iterator=e("iterator polyfill")),e.iterator;var n=t.Set;if(n&&"function"==typeof(new n)["@@iterator"])return"@@iterator";var r=t.Map;if(r)for(var i=Object.getOwnPropertyNames(r.prototype),o=0;o<i.length;++o){var a=i[o];if("entries"!==a&&"size"!==a&&r.prototype[a]===r.prototype.entries)return a}return"@@iterator"}e.symbolIteratorPonyfill=i,e.iterator=i(r.root),e.$$iterator=e.iterator},function(t,e,n){"use strict";var r=n(632),i=n(634);e.async=new i.AsyncScheduler(r.AsyncAction)},function(t,e,n){var r,i;i=this,r=function(){return function(t){"use strict";var e=t&&t.I18n||{},n=Array.prototype.slice,r=function(t){return("0"+t.toString()).substr(-2)},i=function(t,e){return p("round",t,-e).toFixed(e)},o=function(t){var e=typeof t;return"function"===e||"object"===e},a=function(t){return"function"==typeof t},s=function(t){return null!=t},c=function(t){return Array.isArray?Array.isArray(t):"[object Array]"===Object.prototype.toString.call(t)},l=function(t){return"string"==typeof value||"[object String]"===Object.prototype.toString.call(t)},u=function(t){return"number"==typeof t||"[object Number]"===Object.prototype.toString.call(t)},d=function(t){return!0===t||!1===t},p=function(t,e,n){return void 0===n||0==+n?Math[t](e):(e=+e,n=+n,isNaN(e)||"number"!=typeof n||n%1!=0?NaN:(e=e.toString().split("e"),+((e=(e=Math[t](+(e[0]+"e"+(e[1]?+e[1]-n:-n)))).toString().split("e"))[0]+"e"+(e[1]?+e[1]+n:n))))},f=function(t,e){return a(t)?t(e):t},_=function(t,e){var n,r;for(n in e)e.hasOwnProperty(n)&&(r=e[n],l(r)||u(r)||d(r)?t[n]=r:(null==t[n]&&(t[n]={}),_(t[n],r)));return t},h={day_names:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],abbr_day_names:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],month_names:[null,"January","February","March","April","May","June","July","August","September","October","November","December"],abbr_month_names:[null,"Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],meridian:["AM","PM"]},m={precision:3,separator:".",delimiter:",",strip_insignificant_zeros:!1},g={unit:"$",precision:2,format:"%u%n",sign_first:!0,delimiter:",",separator:"."},v={unit:"%",precision:3,format:"%n%u",separator:".",delimiter:""},b=[null,"kb","mb","gb","tb"],y={defaultLocale:"en",locale:"en",defaultSeparator:".",placeholder:/(?:\{\{|%\{)(.*?)(?:\}\}?)/gm,fallbacks:!1,translations:{},missingBehaviour:"message",missingTranslationPrefix:""};return e.reset=function(){var t;for(t in y)this[t]=y[t]},e.initializeOptions=function(){var t;for(t in y)s(this[t])||(this[t]=y[t])},e.initializeOptions(),e.locales={},e.locales.get=function(t){var n=this[t]||this[e.locale]||this.default;return a(n)&&(n=n(t)),!1===c(n)&&(n=[n]),n},e.locales.default=function(t){var n,r=[],i=[];return t&&r.push(t),!t&&e.locale&&r.push(e.locale),e.fallbacks&&e.defaultLocale&&r.push(e.defaultLocale),r.forEach((function(t){n=t.split("-")[0],~i.indexOf(t)||i.push(t),e.fallbacks&&n&&n!==t&&!~i.indexOf(n)&&i.push(n)})),r.length||r.push("en"),i},e.pluralization={},e.pluralization.get=function(t){return this[t]||this[e.locale]||this.default},e.pluralization.default=function(t){switch(t){case 0:return["zero","other"];case 1:return["one"];default:return["other"]}},e.currentLocale=function(){return this.locale||this.defaultLocale},e.isSet=s,e.lookup=function(t,e){e=this.prepareOptions(e);var n,r,i,o,a=this.locales.get(e.locale).slice();for(a[0],i=this.getFullScope(t,e);a.length;)if(n=a.shift(),r=i.split(this.defaultSeparator),o=this.translations[n]){for(;r.length&&null!=(o=o[r.shift()]););if(null!=o)return o}if(s(e.defaultValue))return f(e.defaultValue,t)},e.pluralizationLookupWithoutFallback=function(t,e,n){var r,i,a=this.pluralization.get(e)(t);if(o(n))for(;a.length;)if(r=a.shift(),s(n[r])){i=n[r];break}return i},e.pluralizationLookup=function(t,e,n){n=this.prepareOptions(n);var r,i,a,c,l=this.locales.get(n.locale).slice();for(l[0],e=this.getFullScope(e,n);l.length;)if(r=l.shift(),i=e.split(this.defaultSeparator),a=this.translations[r]){for(;i.length&&(a=a[i.shift()],o(a));)0==i.length&&(c=this.pluralizationLookupWithoutFallback(t,r,a));if(null!=c&&null!=c)break}return null!=c&&null!=c||s(n.defaultValue)&&(c=o(n.defaultValue)?this.pluralizationLookupWithoutFallback(t,n.locale,n.defaultValue):n.defaultValue,a=n.defaultValue),{message:c,translations:a}},e.meridian=function(){var t=this.lookup("time"),e=this.lookup("date");return t&&t.am&&t.pm?[t.am,t.pm]:e&&e.meridian?e.meridian:h.meridian},e.prepareOptions=function(){for(var t,e=n.call(arguments),r={};e.length;)if("object"==typeof(t=e.shift()))for(var i in t)t.hasOwnProperty(i)&&(s(r[i])||(r[i]=t[i]));return r},e.createTranslationOptions=function(t,e){var n=[{scope:t}];return s(e.defaults)&&(n=n.concat(e.defaults)),s(e.defaultValue)&&(n.push({message:e.defaultValue}),delete e.defaultValue),n},e.translate=function(t,e){e=this.prepareOptions(e);var n,r=this.prepareOptions(e);return this.createTranslationOptions(t,e).some((function(r){if(s(r.scope)?n=this.lookup(r.scope,e):s(r.message)&&(n=f(r.message,t)),null!=n)return!0}),this)?("string"==typeof n?n=this.interpolate(n,e):o(n)&&s(e.count)&&(n=this.pluralize(e.count,t,r)),n):this.missingTranslation(t,e)},e.interpolate=function(t,e){e=this.prepareOptions(e);var n,r,i,o,a=t.match(this.placeholder);if(!a)return t;for(;a.length;)r=(n=a.shift()).replace(this.placeholder,"$1"),o=s(e[r])?e[r].toString().replace(/\$/gm,"_#$#_"):r in e?this.nullPlaceholder(n,t,e):this.missingPlaceholder(n,t,e),i=new RegExp(n.replace(/\{/gm,"\\{").replace(/\}/gm,"\\}")),t=t.replace(i,o);return t.replace(/_#\$#_/g,"$")},e.pluralize=function(t,e,n){var r,i;return n=this.prepareOptions(n),null==(i=this.pluralizationLookup(t,e,n)).translations||null==i.translations?this.missingTranslation(e,n):(n.count=String(t),null!=i.message&&null!=i.message?this.interpolate(i.message,n):(r=this.pluralization.get(n.locale),this.missingTranslation(e+"."+r(t)[0],n)))},e.missingTranslation=function(t,e){if("guess"==this.missingBehaviour){var n=t.split(".").slice(-1)[0];return(this.missingTranslationPrefix.length>0?this.missingTranslationPrefix:"")+n.replace("_"," ").replace(/([a-z])([A-Z])/g,(function(t,e,n){return e+" "+n.toLowerCase()}))}return'[missing "'+[null!=e&&null!=e.locale?e.locale:this.currentLocale(),this.getFullScope(t,e)].join(this.defaultSeparator)+'" translation]'},e.missingPlaceholder=function(t,e,n){return"[missing "+t+" value]"},e.nullPlaceholder=function(){return e.missingPlaceholder.apply(e,arguments)},e.toNumber=function(t,e){e=this.prepareOptions(e,this.lookup("number.format"),m);var n,r,o=t<0,a=i(Math.abs(t),e.precision).toString().split("."),s=[],c=e.format||"%n",l=o?"-":"";for(t=a[0],n=a[1];t.length>0;)s.unshift(t.substr(Math.max(0,t.length-3),3)),t=t.substr(0,t.length-3);return r=s.join(e.delimiter),e.strip_insignificant_zeros&&n&&(n=n.replace(/0+$/,"")),e.precision>0&&n&&(r+=e.separator+n),r=(c=e.sign_first?"%s"+c:c.replace("%n","%s%n")).replace("%u",e.unit).replace("%n",r).replace("%s",l)},e.toCurrency=function(t,e){return e=this.prepareOptions(e,this.lookup("number.currency.format"),this.lookup("number.format"),g),this.toNumber(t,e)},e.localize=function(t,e,n){switch(n||(n={}),t){case"currency":return this.toCurrency(e);case"number":return t=this.lookup("number.format"),this.toNumber(e,t);case"percentage":return this.toPercentage(e);default:var r;return r=t.match(/^(date|time)/)?this.toTime(t,e):e.toString(),this.interpolate(r,n)}},e.parseDate=function(t){var e,n,r;if("object"==typeof t)return t;if(e=t.toString().match(/(\d{4})-(\d{2})-(\d{2})(?:[ T](\d{2}):(\d{2}):(\d{2})([\.,]\d{1,3})?)?(Z|\+00:?00)?/)){for(var i=1;i<=6;i++)e[i]=parseInt(e[i],10)||0;e[2]-=1,r=e[7]?1e3*("0"+e[7]):null,n=e[8]?new Date(Date.UTC(e[1],e[2],e[3],e[4],e[5],e[6],r)):new Date(e[1],e[2],e[3],e[4],e[5],e[6],r)}else"number"==typeof t?(n=new Date).setTime(t):t.match(/([A-Z][a-z]{2}) ([A-Z][a-z]{2}) (\d+) (\d+:\d+:\d+) ([+-]\d+) (\d+)/)?(n=new Date).setTime(Date.parse([RegExp.$1,RegExp.$2,RegExp.$3,RegExp.$6,RegExp.$4,RegExp.$5].join(" "))):(t.match(/\d+ \d+:\d+:\d+ [+-]\d+ \d+/),(n=new Date).setTime(Date.parse(t)));return n},e.strftime=function(t,n){var i=this.lookup("date"),o=e.meridian();if(i||(i={}),i=this.prepareOptions(i,h),isNaN(t.getTime()))throw new Error("I18n.strftime() requires a valid date object, but received an invalid date.");var a=t.getDay(),s=t.getDate(),c=t.getFullYear(),l=t.getMonth()+1,u=t.getHours(),d=u,p=u>11?1:0,f=t.getSeconds(),_=t.getMinutes(),m=t.getTimezoneOffset(),g=Math.floor(Math.abs(m/60)),v=Math.abs(m)-60*g,b=(m>0?"-":"+")+(g.toString().length<2?"0"+g:g)+(v.toString().length<2?"0"+v:v);return d>12?d-=12:0===d&&(d=12),n=(n=(n=(n=(n=(n=(n=(n=(n=(n=(n=(n=(n=(n=(n=(n=(n=(n=(n=(n=(n=(n=(n=n.replace("%a",i.abbr_day_names[a])).replace("%A",i.day_names[a])).replace("%b",i.abbr_month_names[l])).replace("%B",i.month_names[l])).replace("%d",r(s))).replace("%e",s)).replace("%-d",s)).replace("%H",r(u))).replace("%-H",u)).replace("%I",r(d))).replace("%-I",d)).replace("%m",r(l))).replace("%-m",l)).replace("%M",r(_))).replace("%-M",_)).replace("%p",o[p])).replace("%S",r(f))).replace("%-S",f)).replace("%w",a)).replace("%y",r(c))).replace("%-y",r(c).replace(/^0+/,""))).replace("%Y",c)).replace("%z",b)},e.toTime=function(t,e){var n=this.parseDate(e),r=this.lookup(t);return n.toString().match(/invalid/i)?n.toString():r?this.strftime(n,r):n.toString()},e.toPercentage=function(t,e){return e=this.prepareOptions(e,this.lookup("number.percentage.format"),this.lookup("number.format"),v),this.toNumber(t,e)},e.toHumanSize=function(t,e){for(var n,r,i=1024,o=t,a=0;o>=i&&a<4;)o/=i,a+=1;return 0===a?(n=this.t("number.human.storage_units.units.byte",{count:o}),r=0):(n=this.t("number.human.storage_units.units."+b[a]),r=o-Math.floor(o)==0?0:1),e=this.prepareOptions(e,{unit:n,precision:r,format:"%n%u",delimiter:""}),this.toNumber(o,e)},e.getFullScope=function(t,e){return e=this.prepareOptions(e),c(t)&&(t=t.join(this.defaultSeparator)),e.scope&&(t=[e.scope,t].join(this.defaultSeparator)),t},e.extend=function(t,e){return void 0===t&&void 0===e?{}:_(t,e)},e.t=e.translate,e.l=e.localize,e.p=e.pluralize,e}(i)}.call(e,n,e,t),void 0===r||(t.exports=r)},,,,,,,function(t,e){var n,r,i=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(t){n=o}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(t){r=a}}();var c,l=[],u=!1,d=-1;function p(){u&&c&&(u=!1,c.length?l=c.concat(l):d=-1,l.length&&f())}function f(){if(!u){var t=s(p);u=!0;for(var e=l.length;e;){for(c=l,l=[];++d<e;)c&&c[d].run();d=-1,e=l.length}c=null,u=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function _(t,e){this.fun=t,this.array=e}function h(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];l.push(new _(t,e)),1!==l.length||u||s(f)},_.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=h,i.addListener=h,i.once=h,i.off=h,i.removeListener=h,i.removeAllListeners=h,i.emit=h,i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(t,e,n){var r=function(){return this||"object"==typeof self&&self}()||Function("return this")(),i=r.regeneratorRuntime&&Object.getOwnPropertyNames(r).indexOf("regeneratorRuntime")>=0,o=i&&r.regeneratorRuntime;if(r.regeneratorRuntime=void 0,t.exports=n(88),i)r.regeneratorRuntime=o;else try{delete r.regeneratorRuntime}catch(t){r.regeneratorRuntime=void 0}},function(t,e){!function(e){"use strict";var n,r=Object.prototype,i=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag",l="object"==typeof t,u=e.regeneratorRuntime;if(u)l&&(t.exports=u);else{(u=e.regeneratorRuntime=l?t.exports:{}).wrap=y;var d="suspendedStart",p="suspendedYield",f="executing",_="completed",h={},m={};m[a]=function(){return this};var g=Object.getPrototypeOf,v=g&&g(g(T([])));v&&v!==r&&i.call(v,a)&&(m=v);var b=k.prototype=$.prototype=Object.create(m);x.prototype=b.constructor=k,k.constructor=x,k[c]=x.displayName="GeneratorFunction",u.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===x||"GeneratorFunction"===(e.displayName||e.name))},u.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,k):(t.__proto__=k,c in t||(t[c]="GeneratorFunction")),t.prototype=Object.create(b),t},u.awrap=function(t){return{__await:t}},C(S.prototype),S.prototype[s]=function(){return this},u.AsyncIterator=S,u.async=function(t,e,n,r){var i=new S(y(t,e,n,r));return u.isGeneratorFunction(e)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},C(b),b[c]="Generator",b[a]=function(){return this},b.toString=function(){return"[object Generator]"},u.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},u.values=T,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(j),!t)for(var e in this)"t"===e.charAt(0)&&i.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=n)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(r,i){return s.type="throw",s.arg=t,e.next=r,i&&(e.method="next",e.arg=n),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=i.call(a,"catchLoc"),l=i.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),j(n),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;j(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:T(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=n),h}}}function y(t,e,n,r){var i=e&&e.prototype instanceof $?e:$,o=Object.create(i.prototype),a=new O(r||[]);return o._invoke=function(t,e,n){var r=d;return function(i,o){if(r===f)throw new Error("Generator is already running");if(r===_){if("throw"===i)throw o;return q()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=A(a,n);if(s){if(s===h)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===d)throw r=_,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=f;var c=w(t,e,n);if("normal"===c.type){if(r=n.done?_:p,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r=_,n.method="throw",n.arg=c.arg)}}}(t,n,a),o}function w(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}function $(){}function x(){}function k(){}function C(t){["next","throw","return"].forEach((function(e){t[e]=function(t){return this._invoke(e,t)}}))}function S(t){function e(n,r,o,a){var s=w(t[n],t,r);if("throw"!==s.type){var c=s.arg,l=c.value;return l&&"object"==typeof l&&i.call(l,"__await")?Promise.resolve(l.__await).then((function(t){e("next",t,o,a)}),(function(t){e("throw",t,o,a)})):Promise.resolve(l).then((function(t){c.value=t,o(c)}),(function(t){return e("throw",t,o,a)}))}a(s.arg)}var n;this._invoke=function(t,r){function i(){return new Promise((function(n,i){e(t,r,n,i)}))}return n=n?n.then(i,i):i()}}function A(t,e){var r=t.iterator[e.method];if(r===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=n,A(t,e),"throw"===e.method))return h;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var i=w(r,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,h;var o=i.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=n),e.delegate=null,h):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function T(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(i.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=n,e.done=!0,e};return o.next=o}}return{next:q}}function q(){return{value:n,done:!0}}}(function(){return this||"object"==typeof self&&self}()||Function("return this")())},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){(function(e){t.exports=e.bowser=n(275)}).call(this,n(1))},function(t,e){!function(t){t.fn.extend({autocomplete:function(e,n){var r="string"==typeof e;return(n=t.extend({},t.Autocompleter.defaults,{url:r?e:null,data:r?null:e,delay:r?t.Autocompleter.defaults.delay:10,max:n&&!n.scroll?10:150},n)).highlight=n.highlight||function(t){return t},n.formatMatch=n.formatMatch||n.formatItem,this.each((function(){new t.Autocompleter(this,n)}))},result:function(t){return this.bind("result",t)},search:function(t){return this.trigger("search",[t])},flushCache:function(){return this.trigger("flushCache")},setOptions:function(t){return this.trigger("setOptions",[t])},unautocomplete:function(){return this.trigger("unautocomplete")}}),t.Autocompleter=function(e,n){var r,i,o,a=38,s=40,c=46,l=9,u=13,d=27,p=188,f=33,_=34,h=8,m=t(e).attr("autocomplete","off").addClass(n.inputClass),g="",v=t.Autocompleter.Cache(n),b=0,y={mouseDownOnSelect:!1},w=t.Autocompleter.Select(n,e,$,y);function $(){var r=w.selected();if(!r)return!1;var i=r.result;if(g=i,n.multiple){var o=k(m.val());if(o.length>1){var a,s=n.multipleSeparator.length,c=t(e).selection().start,l=0;t.each(o,(function(t,e){if(l+=e.length,c<=l)return a=t,!1;l+=s})),o[a]=i,i=o.join(n.multipleSeparator)}i+=n.multipleSeparator}return m.val(i),S(),m.trigger("result",[r.data,r.value]),!0}function x(t,e){if(i!=c){var r=m.val();(e||r!=g)&&(g=r,(r=C(r)).length>=n.minChars?(m.addClass(n.loadingClass),E(r,A,S)):(j(),w.hide()))}else w.hide()}function k(e){return e?n.multiple?t.map(e.split(n.multipleSeparator),(function(n){return t.trim(e).length?t.trim(n):null})):[t.trim(e)]:[""]}function C(r){if(!n.multiple)return r;var i=k(r);if(1==i.length)return i[0];var o=t(e).selection().start;return(i=o==r.length?k(r):k(r.replace(r.substring(o),"")))[i.length-1]}function S(){w.visible();w.hide(),clearTimeout(r),j(),n.mustMatch&&m.search((function(t){if(!t)if(n.multiple){var e=k(m.val()).slice(0,-1);m.val(e.join(n.multipleSeparator)+(e.length?n.multipleSeparator:""))}else m.val(""),m.trigger("result",null)}))}function A(r,o){o&&o.length&&b?(j(),w.display(o,r),function(r,o){n.autoFill&&C(m.val()).toLowerCase()==r.toLowerCase()&&i!=h&&(m.val(m.val()+o.substring(C(g).length)),t(e).selection(g.length,g.length+o.length))}(r,o[0].value),w.show()):S()}function E(r,i,o){var a=r;n.matchCase||(r=r.toLowerCase());var s=v.load(r);if(s&&s.length)i(r,s);else if("string"==typeof n.url&&n.url.length>0){var c={timestamp:+new Date};t.each(n.extraParams,(function(t,e){c[t]="function"==typeof e?e():e})),t.ajax({mode:"abort",port:"autocomplete"+e.name,dataType:n.dataType,url:n.url,data:t.extend({q:C(r),limit:n.max},c),success:function(e){var o=n.parse&&n.parse(e,a)||function(e){for(var r=[],i=e.split("\n"),o=0;o<i.length;o++){var a=t.trim(i[o]);a&&(a=a.split("|"),r[r.length]={data:a,value:a[0],result:n.formatResult&&n.formatResult(a,a[0])||a[0]})}return r}(e);v.add(r,o),i(r,o)}})}else w.emptyList(),o(r)}function j(){m.removeClass(n.loadingClass)}t.browser.opera&&t(e.form).bind("submit.autocomplete",(function(){if(o)return o=!1,!1})),m.bind((t.browser.opera?"keypress":"keydown")+".autocomplete",(function(e){switch(b=1,i=e.keyCode,e.keyCode){case a:e.preventDefault(),w.visible()?w.prev():x(0,!0);break;case s:e.preventDefault(),w.visible()?w.next():x(0,!0);break;case f:e.preventDefault(),w.visible()?w.pageUp():x(0,!0);break;case _:e.preventDefault(),w.visible()?w.pageDown():x(0,!0);break;case n.multiple&&","==t.trim(n.multipleSeparator)&&p:case l:case u:if($())return e.preventDefault(),o=!0,!1;break;case d:w.hide();break;default:clearTimeout(r),r=setTimeout(x,n.delay)}})).focus((function(){b++})).blur((function(){b=0,y.mouseDownOnSelect||(clearTimeout(r),r=setTimeout(S,200))})).click((function(){b++>1&&!w.visible()&&x(0,!0)})).bind("search",(function(){var e=arguments.length>1?arguments[1]:null;function n(t,n){var r;if(n&&n.length)for(var i=0;i<n.length;i++)if(n[i].result.toLowerCase()==t.toLowerCase()){r=n[i];break}"function"==typeof e?e(r):m.trigger("result",r&&[r.data,r.value])}t.each(k(m.val()),(function(t,e){E(e,n,n)}))})).bind("flushCache",(function(){v.flush()})).bind("setOptions",(function(){t.extend(n,arguments[1]),"data"in arguments[1]&&v.populate()})).bind("unautocomplete",(function(){w.unbind(),m.unbind(),t(e.form).unbind(".autocomplete")}))},t.Autocompleter.defaults={inputClass:"ac_input",resultsClass:"ac_results",loadingClass:"ac_loading",minChars:1,delay:400,matchCase:!1,matchSubset:!0,matchContains:!1,cacheLength:10,max:100,mustMatch:!1,extraParams:{},selectFirst:!0,formatItem:function(t){return t[0]},formatMatch:null,autoFill:!1,width:0,multiple:!1,multipleSeparator:", ",highlight:function(t,e){return t.replace(new RegExp("(?![^&;]+;)(?!<[^<>]*)("+e.replace(/([\^\$\(\)\[\]\{\}\*\.\+\?\|\\])/gi,"\\$1")+")(?![^<>]*>)(?![^&;]+;)","gi"),"<strong>$1</strong>")},scroll:!0,scrollHeight:180},t.Autocompleter.Cache=function(e){var n={},r=0;function i(t,n){e.matchCase||(t=t.toLowerCase());var r=t.indexOf(n);return"word"==e.matchContains&&(r=t.toLowerCase().search("\\b"+n.toLowerCase())),-1!=r&&(0==r||e.matchContains)}function o(t,i){r>e.cacheLength&&s(),n[t]||r++,n[t]=i}function a(){if(!e.data)return!1;var n={},r=0;e.url||(e.cacheLength=1),n[""]=[];for(var i=0,a=e.data.length;i<a;i++){var s=e.data[i];s="string"==typeof s?[s]:s;var c=e.formatMatch(s,i+1,e.data.length);if(!1!==c){var l=c.charAt(0).toLowerCase();n[l]||(n[l]=[]);var u={value:c,data:s,result:e.formatResult&&e.formatResult(s)||c};n[l].push(u),r++<e.max&&n[""].push(u)}}t.each(n,(function(t,n){e.cacheLength++,o(t,n)}))}function s(){n={},r=0}return setTimeout(a,25),{flush:s,add:o,populate:a,load:function(o){if(!e.cacheLength||!r)return null;if(!e.url&&e.matchContains){var a=[];for(var s in n)if(s.length>0){var c=n[s];t.each(c,(function(t,e){i(e.value,o)&&a.push(e)}))}return a}if(n[o])return n[o];if(e.matchSubset)for(var l=o.length-1;l>=e.minChars;l--){if(c=n[o.substr(0,l)]){a=[];return t.each(c,(function(t,e){i(e.value,o)&&(a[a.length]=e)})),a}}return null}}},t.Autocompleter.Select=function(e,n,r,i){var o,a,s,c,l="ac_over",u=-1,d="",p=!0;function f(t){for(var e=t.target;e&&"LI"!=e.tagName;)e=e.parentNode;return e||[]}function _(t){o.slice(u,u+1).removeClass(l),function(t){(u+=t)<0?u=o.size()-1:u>=o.size()&&(u=0)}(t);var n=o.slice(u,u+1).addClass(l);if(e.scroll){var r=0;o.slice(0,u).each((function(){r+=this.offsetHeight})),r+n[0].offsetHeight-c.scrollTop()>c[0].clientHeight?c.scrollTop(r+n[0].offsetHeight-c.innerHeight()):r<c.scrollTop()&&c.scrollTop(r)}}function h(){c.empty();for(var n,r=(n=a.length,e.max&&e.max<n?e.max:n),i=0;i<r;i++)if(a[i]){var s=e.formatItem(a[i].data,i+1,r,a[i].value,d);if(!1!==s){var p=t("<li/>").html(e.highlight(s,d)).addClass(i%2==0?"ac_even":"ac_odd").appendTo(c)[0];t.data(p,"ac_data",a[i])}}o=c.find("li"),e.selectFirst&&(o.slice(0,1).addClass(l),u=0),t.fn.bgiframe&&c.bgiframe()}return{display:function(o,_){p&&(s=t("<div/>").hide().addClass(e.resultsClass).css("position","absolute").appendTo(document.body),c=t("<ul/>").appendTo(s).mouseover((function(e){f(e).nodeName&&"LI"==f(e).nodeName.toUpperCase()&&(u=t("li",c).removeClass(l).index(f(e)),t(f(e)).addClass(l))})).click((function(e){return t(f(e)).addClass(l),r(),n.focus(),!1})).mousedown((function(){i.mouseDownOnSelect=!0})).mouseup((function(){i.mouseDownOnSelect=!1})),e.width>0&&s.css("width",e.width),p=!1),a=o,d=_,h()},next:function(){_(1)},prev:function(){_(-1)},pageUp:function(){_(0!=u&&u-8<0?-u:-8)},pageDown:function(){u!=o.size()-1&&u+8>o.size()?_(o.size()-1-u):_(8)},hide:function(){s&&s.hide(),o&&o.removeClass(l),u=-1},visible:function(){return s&&s.is(":visible")},current:function(){return this.visible()&&(o.filter("."+l)[0]||e.selectFirst&&o[0])},show:function(){var r=t(n).offset();if(s.css({width:"string"==typeof e.width||e.width>0?e.width:t(n).width(),top:r.top+n.offsetHeight,left:r.left}).show(),e.scroll&&(c.scrollTop(0),c.css({maxHeight:e.scrollHeight,overflow:"auto"}),t.browser.msie&&void 0===document.body.style.maxHeight)){var i=0;o.each((function(){i+=this.offsetHeight}));var a=i>e.scrollHeight;c.css("height",a?e.scrollHeight:i),a||o.width(c.width()-parseInt(o.css("padding-left"))-parseInt(o.css("padding-right")))}},selected:function(){var e=o&&o.filter("."+l).removeClass(l);return e&&e.length&&t.data(e[0],"ac_data")},emptyList:function(){c&&c.empty()},unbind:function(){s&&s.remove()}}},t.fn.selection=function(t,e){if(void 0!==t)return this.each((function(){if(this.createTextRange){var n=this.createTextRange();void 0===e||t==e?(n.move("character",t),n.select()):(n.collapse(!0),n.moveStart("character",t),n.moveEnd("character",e),n.select())}else this.setSelectionRange?this.setSelectionRange(t,e):this.selectionStart&&(this.selectionStart=t,this.selectionEnd=e)}));var n=this[0];if(n.createTextRange){var r=document.selection.createRange(),i=n.value,o=r.text.length;r.text="<->";var a=n.value.indexOf("<->");return n.value=i,this.selection(a,a+o),{start:a,end:a+o}}return void 0!==n.selectionStart?{start:n.selectionStart,end:n.selectionEnd}:void 0}}(jQuery)},function(t,e,n){"use strict";n.r(e);var r=n(0);n.d(e,"Observable",(function(){return r.Observable}));var i=n(48);n.d(e,"ConnectableObservable",(function(){return i.ConnectableObservable}));var o=n(47);n.d(e,"Subject",(function(){return o.Subject}));n(614),n(618),n(621),n(623),n(626),n(629),n(630),n(642),n(645),n(648),n(651),n(655),n(658),n(661),n(666),n(669),n(672),n(683),n(686);Object.assign(r.Observable,{always:function(t){return r.Observable.never().startWith(t)},$watch:function(t,e,n){return r.Observable.create((function(r){return t.$on("$destroy",r.complete.bind(r)),t.$watch(e,r.next.bind(r),n)}))},fromPendingPromise:function(t){return r.Observable.create((function(e){e.next({pending:!0,value:null,error:null}),t.then((function(t){e.next({pending:!1,value:t,error:null}),e.complete()}),(function(t){e.next({pending:!1,value:null,error:t}),e.complete()}))}))}}),Object.assign(i.ConnectableObservable.prototype,{persist:function(){return this.connect(),this}}),Object.assign(r.Observable.prototype,{accumulate:function(){return this.scan((function(t,e){return t.concat(e)}),[])},accumulateLatest:function(){return this.accumulate().switchMap((function(t){return r.Observable.combineLatest(t)}))}})},function(t,e,n){"use strict";e.isObject=function(t){return null!=t&&"object"==typeof t}},function(t,e,n){"use strict";e.empty={closed:!0,next:function(t){},error:function(t){throw t},complete:function(){}}},function(t,e,n){"use strict";e.noop=function(){}},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},i=function(t){function e(){var e=t.call(this,"object unsubscribed");this.name=e.name="ObjectUnsubscribedError",this.stack=e.stack,this.message=e.message}return r(e,t),e}(Error);e.ObjectUnsubscribedError=i},function(t,e,n){"use strict";e.isArrayLike=function(t){return t&&"number"==typeof t.length}},function(t,e,n){"use strict";e.isPromise=function(t){return t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},i=n(13),o=function(t){function e(e,n){t.call(this),this.promise=e,this.scheduler=n}return r(e,t),e.create=function(t,n){return new e(t,n)},e.prototype._subscribe=function(t){var e=this,n=this.promise,r=this.scheduler;if(null==r)this._isScalar?t.closed||(t.next(this.value),t.complete()):n.then((function(n){e.value=n,e._isScalar=!0,t.closed||(t.next(n),t.complete())}),(function(e){t.closed||t.error(e)})).then(null,(function(t){i.root.setTimeout((function(){throw t}))}));else if(this._isScalar){if(!t.closed)return r.schedule(a,0,{value:this.value,subscriber:t})}else n.then((function(n){e.value=n,e._isScalar=!0,t.closed||t.add(r.schedule(a,0,{value:n,subscriber:t}))}),(function(e){t.closed||t.add(r.schedule(s,0,{err:e,subscriber:t}))})).then(null,(function(t){i.root.setTimeout((function(){throw t}))}))},e}(n(0).Observable);function a(t){var e=t.value,n=t.subscriber;n.closed||(n.next(e),n.complete())}function s(t){var e=t.err,n=t.subscriber;n.closed||n.error(e)}e.PromiseObservable=o},function(t,e,n){"use strict";var r=n(130),i=n(625);e.mergeAll=function(t){return void 0===t&&(t=Number.POSITIVE_INFINITY),r.mergeMap(i.identity,null,t)}},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},i=n(22),o=n(21);e.mergeMap=function(t,e,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),function(r){return"number"==typeof e&&(n=e,e=null),r.lift(new a(t,e,n))}};var a=function(){function t(t,e,n){void 0===n&&(n=Number.POSITIVE_INFINITY),this.project=t,this.resultSelector=e,this.concurrent=n}return t.prototype.call=function(t,e){return e.subscribe(new s(t,this.project,this.resultSelector,this.concurrent))},t}();e.MergeMapOperator=a;var s=function(t){function e(e,n,r,i){void 0===i&&(i=Number.POSITIVE_INFINITY),t.call(this,e),this.project=n,this.resultSelector=r,this.concurrent=i,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}return r(e,t),e.prototype._next=function(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)},e.prototype._tryNext=function(t){var e,n=this.index++;try{e=this.project(t,n)}catch(t){return void this.destination.error(t)}this.active++,this._innerSub(e,t,n)},e.prototype._innerSub=function(t,e,n){this.add(i.subscribeToResult(this,t,e,n))},e.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete()},e.prototype.notifyNext=function(t,e,n,r,i){this.resultSelector?this._notifyResultSelector(t,e,n,r):this.destination.next(e)},e.prototype._notifyResultSelector=function(t,e,n,r){var i;try{i=this.resultSelector(t,e,n,r)}catch(t){return void this.destination.error(t)}this.destination.next(i)},e.prototype.notifyComplete=function(t){var e=this.buffer;this.remove(t),this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},e}(o.OuterSubscriber);e.MergeMapSubscriber=s},function(t,e,n){"use strict";var r=n(20);e.of=r.ArrayObservable.of},function(t,e){angular.module("genius").factory("PlayerJS",["$window",function(t){return t.playerjs}])},function(t,e,n){var r,i;r=function(t,e,n){"use strict";var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=void 0;void 0===o&&(o={modules:[]});var a=null;function s(t){var e=(getComputedStyle(t)||{}).position,n=[];if("fixed"===e)return[t];for(var r=t;(r=r.parentNode)&&r&&1===r.nodeType;){var i=void 0;try{i=getComputedStyle(r)}catch(t){}if(null==i)return n.push(r),n;var o=i,a=o.overflow,s=o.overflowX,c=o.overflowY;/(auto|scroll)/.test(a+c+s)&&("absolute"!==e||["relative","absolute","fixed"].indexOf(i.position)>=0)&&n.push(r)}return n.push(document.body),n}var c,l=(c=0,function(){return++c}),u={},d=function(){var t=a;t||((t=document.createElement("div")).setAttribute("data-tether-id",l()),m(t.style,{top:0,left:0,position:"absolute"}),document.body.appendChild(t),a=t);var e=t.getAttribute("data-tether-id");if(void 0===u[e]){u[e]={};var n=t.getBoundingClientRect();for(var r in n)u[e][r]=n[r];k((function(){delete u[e]}))}return u[e]};function p(){a&&document.body.removeChild(a),a=null}function f(t){var e=void 0;t===document?(e=document,t=document.documentElement):e=t.ownerDocument;var n=e.documentElement,r={},i=t.getBoundingClientRect();for(var o in i)r[o]=i[o];var a=d();return r.top-=a.top,r.left-=a.left,void 0===r.width&&(r.width=document.body.scrollWidth-r.left-r.right),void 0===r.height&&(r.height=document.body.scrollHeight-r.top-r.bottom),r.top=r.top-n.clientTop,r.left=r.left-n.clientLeft,r.right=e.body.clientWidth-r.width-r.left,r.bottom=e.body.clientHeight-r.height-r.top,r}function _(t){return t.offsetParent||document.documentElement}function h(){var t=document.createElement("div");t.style.width="100%",t.style.height="200px";var e=document.createElement("div");m(e.style,{position:"absolute",top:0,left:0,pointerEvents:"none",visibility:"hidden",width:"200px",height:"150px",overflow:"hidden"}),e.appendChild(t),document.body.appendChild(e);var n=t.offsetWidth;e.style.overflow="scroll";var r=t.offsetWidth;n===r&&(r=e.clientWidth),document.body.removeChild(e);var i=n-r;return{width:i,height:i}}function m(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],e=[];return Array.prototype.push.apply(e,arguments),e.slice(1).forEach((function(e){if(e)for(var n in e)({}).hasOwnProperty.call(e,n)&&(t[n]=e[n])})),t}function g(t,e){if(void 0!==t.classList)e.split(" ").forEach((function(e){e.trim()&&t.classList.remove(e)}));else{var n=new RegExp("(^| )"+e.split(" ").join("|")+"( |$)","gi"),r=y(t).replace(n," ");w(t,r)}}function v(t,e){if(void 0!==t.classList)e.split(" ").forEach((function(e){e.trim()&&t.classList.add(e)}));else{g(t,e);var n=y(t)+" "+e;w(t,n)}}function b(t,e){if(void 0!==t.classList)return t.classList.contains(e);var n=y(t);return new RegExp("(^| )"+e+"( |$)","gi").test(n)}function y(t){return t.className instanceof SVGAnimatedString?t.className.baseVal:t.className}function w(t,e){t.setAttribute("class",e)}function $(t,e,n){n.forEach((function(n){-1===e.indexOf(n)&&b(t,n)&&g(t,n)})),e.forEach((function(e){b(t,e)||v(t,e)}))}var x=[],k=function(t){x.push(t)},C=function(){for(var t=void 0;t=x.pop();)t()},S=function(){function t(){i(this,t)}return r(t,[{key:"on",value:function(t,e,n){var r=!(arguments.length<=3||void 0===arguments[3])&&arguments[3];void 0===this.bindings&&(this.bindings={}),void 0===this.bindings[t]&&(this.bindings[t]=[]),this.bindings[t].push({handler:e,ctx:n,once:r})}},{key:"once",value:function(t,e,n){this.on(t,e,n,!0)}},{key:"off",value:function(t,e){if(void 0===this.bindings||void 0===this.bindings[t])if(void 0===e)delete this.bindings[t];else for(var n=0;n<this.bindings[t].length;)this.bindings[t][n].handler===e?this.bindings[t].splice(n,1):++n}},{key:"trigger",value:function(t){if(void 0!==this.bindings&&this.bindings[t]){for(var e=0,n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(;e<this.bindings[t].length;){var o=this.bindings[t][e],a=o.handler,s=o.ctx,c=o.once,l=s;void 0===l&&(l=this),a.apply(l,r),c?this.bindings[t].splice(e,1):++e}}}}]),t}();o.Utils={getScrollParents:s,getBounds:f,getOffsetParent:_,extend:m,addClass:v,removeClass:g,hasClass:b,updateClasses:$,defer:k,flush:C,uniqueId:l,Evented:S,getScrollBarSize:h,removeUtilElements:p};var A=function(){function t(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),E=(r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),function(t,e,n){for(var r=!0;r;){var i=t,o=e,a=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,o);if(void 0!==s){if("value"in s)return s.value;var c=s.get;if(void 0===c)return;return c.call(a)}var l=Object.getPrototypeOf(i);if(null===l)return;t=l,e=o,n=a,r=!0,s=l=void 0}});function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function j(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}if(void 0===o)throw new Error("You must include the utils.js file before tether.js");var s=(X=o.Utils).getScrollParents,_=(f=X.getBounds,X.getOffsetParent),v=(m=X.extend,X.addClass),g=X.removeClass,h=($=X.updateClasses,k=X.defer,C=X.flush,X.getScrollBarSize),p=X.removeUtilElements;function O(t,e){var n=arguments.length<=2||void 0===arguments[2]?1:arguments[2];return t+n>=e&&e>=t-n}var T,q,P,M,I=function(){if("undefined"==typeof document)return"";for(var t=document.createElement("div"),e=["transform","webkitTransform","OTransform","MozTransform","msTransform"],n=0;n<e.length;++n){var r=e[n];if(void 0!==t.style[r])return r}}(),R=[],D=function(){R.forEach((function(t){t.position(!1)})),C()};function z(){return"undefined"!=typeof performance&&void 0!==performance.now?performance.now():+new Date}T=null,q=null,P=null,M=function t(){if(void 0!==q&&q>16)return q=Math.min(q-16,250),void(P=setTimeout(t,250));void 0!==T&&z()-T<10||(null!=P&&(clearTimeout(P),P=null),T=z(),D(),q=z()-T)},"undefined"!=typeof window&&void 0!==window.addEventListener&&["resize","scroll","touchmove"].forEach((function(t){window.addEventListener(t,M)}));var L={center:"center",left:"right",right:"left"},N={middle:"middle",top:"bottom",bottom:"top"},F={top:0,left:0,middle:"50%",center:"50%",bottom:"100%",right:"100%"},U=function(t,e){var n=t.left,r=t.top;return"auto"===n&&(n=L[e.left]),"auto"===r&&(r=N[e.top]),{left:n,top:r}},V=function(t){var e=t.left,n=t.top;return void 0!==F[t.left]&&(e=F[t.left]),void 0!==F[t.top]&&(n=F[t.top]),{left:e,top:n}};function H(){for(var t={top:0,left:0},e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return n.forEach((function(e){var n=e.top,r=e.left;"string"==typeof n&&(n=parseFloat(n,10)),"string"==typeof r&&(r=parseFloat(r,10)),t.top+=n,t.left+=r})),t}function B(t,e){return"string"==typeof t.left&&-1!==t.left.indexOf("%")&&(t.left=parseFloat(t.left,10)/100*e.width),"string"==typeof t.top&&-1!==t.top.indexOf("%")&&(t.top=parseFloat(t.top,10)/100*e.height),t}var W=function(t){var e=t.split(" "),n=A(e,2);return{top:n[0],left:n[1]}},G=W,Y=function(t){function e(t){var n=this;i(this,e),E(Object.getPrototypeOf(e.prototype),"constructor",this).call(this),this.position=this.position.bind(this),R.push(this),this.history=[],this.setOptions(t,!1),o.modules.forEach((function(t){void 0!==t.initialize&&t.initialize.call(n)})),this.position()}return j(e,t),r(e,[{key:"getClass",value:function(){var t=arguments.length<=0||void 0===arguments[0]?"":arguments[0],e=this.options.classes;return void 0!==e&&e[t]?this.options.classes[t]:this.options.classPrefix?this.options.classPrefix+"-"+t:t}},{key:"setOptions",value:function(t){var e=this,n=arguments.length<=1||void 0===arguments[1]||arguments[1],r={offset:"0 0",targetOffset:"0 0",targetAttachment:"auto auto",classPrefix:"tether"};this.options=m(r,t);var i=this.options,o=i.element,a=i.target,c=i.targetModifier;if(this.element=o,this.target=a,this.targetModifier=c,"viewport"===this.target?(this.target=document.body,this.targetModifier="visible"):"scroll-handle"===this.target&&(this.target=document.body,this.targetModifier="scroll-handle"),["element","target"].forEach((function(t){if(void 0===e[t])throw new Error("Tether Error: Both element and target must be defined");void 0!==e[t].jquery?e[t]=e[t][0]:"string"==typeof e[t]&&(e[t]=document.querySelector(e[t]))})),v(this.element,this.getClass("element")),!1!==this.options.addTargetClasses&&v(this.target,this.getClass("target")),!this.options.attachment)throw new Error("Tether Error: You must provide an attachment");this.targetAttachment=G(this.options.targetAttachment),this.attachment=G(this.options.attachment),this.offset=W(this.options.offset),this.targetOffset=W(this.options.targetOffset),void 0!==this.scrollParents&&this.disable(),"scroll-handle"===this.targetModifier?this.scrollParents=[this.target]:this.scrollParents=s(this.target),!1!==this.options.enabled&&this.enable(n)}},{key:"getTargetBounds",value:function(){if(void 0===this.targetModifier)return f(this.target);if("visible"===this.targetModifier)return this.target===document.body?{top:pageYOffset,left:pageXOffset,height:innerHeight,width:innerWidth}:((o={height:(t=f(this.target)).height,width:t.width,top:t.top,left:t.left}).height=Math.min(o.height,t.height-(pageYOffset-t.top)),o.height=Math.min(o.height,t.height-(t.top+t.height-(pageYOffset+innerHeight))),o.height=Math.min(innerHeight,o.height),o.height-=2,o.width=Math.min(o.width,t.width-(pageXOffset-t.left)),o.width=Math.min(o.width,t.width-(t.left+t.width-(pageXOffset+innerWidth))),o.width=Math.min(innerWidth,o.width),o.width-=2,o.top<pageYOffset&&(o.top=pageYOffset),o.left<pageXOffset&&(o.left=pageXOffset),o);if("scroll-handle"===this.targetModifier){var t=void 0,e=this.target;e===document.body?(e=document.documentElement,t={left:pageXOffset,top:pageYOffset,height:innerHeight,width:innerWidth}):t=f(e);var n=getComputedStyle(e),r=0;(e.scrollWidth>e.clientWidth||[n.overflow,n.overflowX].indexOf("scroll")>=0||this.target!==document.body)&&(r=15);var i=t.height-parseFloat(n.borderTopWidth)-parseFloat(n.borderBottomWidth)-r,o={width:15,height:.975*i*(i/e.scrollHeight),left:t.left+t.width-parseFloat(n.borderLeftWidth)-15},a=0;i<408&&this.target===document.body&&(a=-11e-5*Math.pow(i,2)-.00727*i+22.58),this.target!==document.body&&(o.height=Math.max(o.height,24));var s=this.target.scrollTop/(e.scrollHeight-i);return o.top=s*(i-o.height-a)+t.top+parseFloat(n.borderTopWidth),this.target===document.body&&(o.height=Math.max(o.height,24)),o}}},{key:"clearCache",value:function(){this._cache={}}},{key:"cache",value:function(t,e){return void 0===this._cache&&(this._cache={}),void 0===this._cache[t]&&(this._cache[t]=e.call(this)),this._cache[t]}},{key:"enable",value:function(){var t=this,e=arguments.length<=0||void 0===arguments[0]||arguments[0];!1!==this.options.addTargetClasses&&v(this.target,this.getClass("enabled")),v(this.element,this.getClass("enabled")),this.enabled=!0,this.scrollParents.forEach((function(e){e!==document&&e.addEventListener("scroll",t.position)})),e&&this.position()}},{key:"disable",value:function(){var t=this;g(this.target,this.getClass("enabled")),g(this.element,this.getClass("enabled")),this.enabled=!1,void 0!==this.scrollParents&&this.scrollParents.forEach((function(e){e.removeEventListener("scroll",t.position)}))}},{key:"destroy",value:function(){var t=this;this.disable(),R.forEach((function(e,n){e===t&&R.splice(n,1)})),0===R.length&&p()}},{key:"updateAttachClasses",value:function(t,e){var n=this;t=t||this.attachment,e=e||this.targetAttachment;var r=["left","top","bottom","right","middle","center"];void 0!==this._addAttachClasses&&this._addAttachClasses.length&&this._addAttachClasses.splice(0,this._addAttachClasses.length),void 0===this._addAttachClasses&&(this._addAttachClasses=[]);var i=this._addAttachClasses;t.top&&i.push(this.getClass("element-attached")+"-"+t.top),t.left&&i.push(this.getClass("element-attached")+"-"+t.left),e.top&&i.push(this.getClass("target-attached")+"-"+e.top),e.left&&i.push(this.getClass("target-attached")+"-"+e.left);var o=[];r.forEach((function(t){o.push(n.getClass("element-attached")+"-"+t),o.push(n.getClass("target-attached")+"-"+t)})),k((function(){void 0!==n._addAttachClasses&&($(n.element,n._addAttachClasses,o),!1!==n.options.addTargetClasses&&$(n.target,n._addAttachClasses,o),delete n._addAttachClasses)}))}},{key:"position",value:function(){var t=this,e=arguments.length<=0||void 0===arguments[0]||arguments[0];if(this.enabled){this.clearCache();var n=U(this.targetAttachment,this.attachment);this.updateAttachClasses(this.attachment,n);var r=this.cache("element-bounds",(function(){return f(t.element)})),i=r.width,a=r.height;if(0===i&&0===a&&void 0!==this.lastSize){var s=this.lastSize;i=s.width,a=s.height}else this.lastSize={width:i,height:a};var c=this.cache("target-bounds",(function(){return t.getTargetBounds()})),l=c,u=B(V(this.attachment),{width:i,height:a}),d=B(V(n),l),p=B(this.offset,{width:i,height:a}),m=B(this.targetOffset,l);u=H(u,p),d=H(d,m);for(var g=c.left+d.left-u.left,v=c.top+d.top-u.top,b=0;b<o.modules.length;++b){var y=o.modules[b].position.call(this,{left:g,top:v,targetAttachment:n,targetPos:c,elementPos:r,offset:u,targetOffset:d,manualOffset:p,manualTargetOffset:m,scrollbarSize:$,attachment:this.attachment});if(!1===y)return!1;void 0!==y&&"object"==typeof y&&(v=y.top,g=y.left)}var w={page:{top:v,left:g},viewport:{top:v-pageYOffset,bottom:pageYOffset-v-a+innerHeight,left:g-pageXOffset,right:pageXOffset-g-i+innerWidth}},$=void 0;return document.body.scrollWidth>window.innerWidth&&($=this.cache("scrollbar-size",h),w.viewport.bottom-=$.height),document.body.scrollHeight>window.innerHeight&&($=this.cache("scrollbar-size",h),w.viewport.right-=$.width),-1!==["","static"].indexOf(document.body.style.position)&&-1!==["","static"].indexOf(document.body.parentElement.style.position)||(w.page.bottom=document.body.scrollHeight-v-a,w.page.right=document.body.scrollWidth-g-i),void 0!==this.options.optimizations&&!1!==this.options.optimizations.moveElement&&void 0===this.targetModifier&&function(){var e=t.cache("target-offsetparent",(function(){return _(t.target)})),n=t.cache("target-offsetparent-bounds",(function(){return f(e)})),r=getComputedStyle(e),i=n,o={};if(["Top","Left","Bottom","Right"].forEach((function(t){o[t.toLowerCase()]=parseFloat(r["border"+t+"Width"])})),n.right=document.body.scrollWidth-n.left-i.width+o.right,n.bottom=document.body.scrollHeight-n.top-i.height+o.bottom,w.page.top>=n.top+o.top&&w.page.bottom>=n.bottom&&w.page.left>=n.left+o.left&&w.page.right>=n.right){var a=e.scrollTop,s=e.scrollLeft;w.offset={top:w.page.top-n.top+a-o.top,left:w.page.left-n.left+s-o.left}}}(),this.move(w),this.history.unshift(w),this.history.length>3&&this.history.pop(),e&&C(),!0}}},{key:"move",value:function(t){var e=this;if(void 0!==this.element.parentNode){var n={};for(var r in t)for(var i in n[r]={},t[r]){for(var o=!1,a=0;a<this.history.length;++a){var s=this.history[a];if(void 0!==s[r]&&!O(s[r][i],t[r][i])){o=!0;break}}o||(n[r][i]=!0)}var c={top:"",left:"",right:"",bottom:""},l=function(t,n){if(!1!==(void 0!==e.options.optimizations?e.options.optimizations.gpu:null)){var r=void 0,i=void 0;t.top?(c.top=0,r=n.top):(c.bottom=0,r=-n.bottom),t.left?(c.left=0,i=n.left):(c.right=0,i=-n.right),c[I]="translateX("+Math.round(i)+"px) translateY("+Math.round(r)+"px)","msTransform"!==I&&(c[I]+=" translateZ(0)")}else t.top?c.top=n.top+"px":c.bottom=n.bottom+"px",t.left?c.left=n.left+"px":c.right=n.right+"px"},u=!1;if((n.page.top||n.page.bottom)&&(n.page.left||n.page.right)?(c.position="absolute",l(n.page,t.page)):(n.viewport.top||n.viewport.bottom)&&(n.viewport.left||n.viewport.right)?(c.position="fixed",l(n.viewport,t.viewport)):void 0!==n.offset&&n.offset.top&&n.offset.left?function(){c.position="absolute";var r=e.cache("target-offsetparent",(function(){return _(e.target)}));_(e.element)!==r&&k((function(){e.element.parentNode.removeChild(e.element),r.appendChild(e.element)})),l(n.offset,t.offset),u=!0}():(c.position="absolute",l({top:!0,left:!0},t.page)),!u){for(var d=!0,p=this.element.parentNode;p&&1===p.nodeType&&"BODY"!==p.tagName;){if("static"!==getComputedStyle(p).position){d=!1;break}p=p.parentNode}d||(this.element.parentNode.removeChild(this.element),document.body.appendChild(this.element))}var f={},h=!1;for(var i in c){var g=c[i];this.element.style[i]!==g&&(h=!0,f[i]=g)}h&&k((function(){m(e.element.style,f)}))}}}]),e}(S);Y.modules=[],o.position=D;var K=m(Y,o);A=function(){function t(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),f=(X=o.Utils).getBounds;var m=X.extend,J=($=X.updateClasses,k=X.defer,["left","top","right","bottom"]);function Q(t,e){var n,r,i;return"scrollParent"===e?e=t.scrollParents[0]:"window"===e&&(e=[pageXOffset,pageYOffset,innerWidth+pageXOffset,innerHeight+pageYOffset]),e===document&&(e=e.documentElement),void 0!==e.nodeType&&(n=f(e),r=n,i=getComputedStyle(e),e=[r.left,r.top,n.width+r.left,n.height+r.top],J.forEach((function(t,n){"Top"===(t=t[0].toUpperCase()+t.substr(1))||"Left"===t?e[n]+=parseFloat(i["border"+t+"Width"]):e[n]-=parseFloat(i["border"+t+"Width"])}))),e}o.modules.push({position:function(t){var e=this,n=t.top,r=t.left,i=t.targetAttachment;if(!this.options.constraints)return!0;var o=this.cache("element-bounds",(function(){return f(e.element)})),a=o.height,s=o.width;if(0===s&&0===a&&void 0!==this.lastSize){var c=this.lastSize;s=c.width,a=c.height}var l=this.cache("target-bounds",(function(){return e.getTargetBounds()})),u=l.height,d=l.width,p=[this.getClass("pinned"),this.getClass("out-of-bounds")];this.options.constraints.forEach((function(t){var e=t.outOfBoundsClass,n=t.pinnedClass;e&&p.push(e),n&&p.push(n)})),p.forEach((function(t){["left","top","right","bottom"].forEach((function(e){p.push(t+"-"+e)}))}));var _=[],h=m({},i),g=m({},this.attachment);return this.options.constraints.forEach((function(t){var o=t.to,c=t.attachment,l=t.pin;void 0===c&&(c="");var p=void 0,f=void 0;if(c.indexOf(" ")>=0){var m=c.split(" "),v=A(m,2);f=v[0],p=v[1]}else p=f=c;var b=Q(e,o);"target"!==f&&"both"!==f||(n<b[1]&&"top"===h.top&&(n+=u,h.top="bottom"),n+a>b[3]&&"bottom"===h.top&&(n-=u,h.top="top")),"together"===f&&("top"===h.top&&("bottom"===g.top&&n<b[1]?(n+=u,h.top="bottom",n+=a,g.top="top"):"top"===g.top&&n+a>b[3]&&n-(a-u)>=b[1]&&(n-=a-u,h.top="bottom",g.top="bottom")),"bottom"===h.top&&("top"===g.top&&n+a>b[3]?(n-=u,h.top="top",n-=a,g.top="bottom"):"bottom"===g.top&&n<b[1]&&n+(2*a-u)<=b[3]&&(n+=a-u,h.top="top",g.top="top")),"middle"===h.top&&(n+a>b[3]&&"top"===g.top?(n-=a,g.top="bottom"):n<b[1]&&"bottom"===g.top&&(n+=a,g.top="top"))),"target"!==p&&"both"!==p||(r<b[0]&&"left"===h.left&&(r+=d,h.left="right"),r+s>b[2]&&"right"===h.left&&(r-=d,h.left="left")),"together"===p&&(r<b[0]&&"left"===h.left?"right"===g.left?(r+=d,h.left="right",r+=s,g.left="left"):"left"===g.left&&(r+=d,h.left="right",r-=s,g.left="right"):r+s>b[2]&&"right"===h.left?"left"===g.left?(r-=d,h.left="left",r-=s,g.left="right"):"right"===g.left&&(r-=d,h.left="left",r+=s,g.left="left"):"center"===h.left&&(r+s>b[2]&&"left"===g.left?(r-=s,g.left="right"):r<b[0]&&"right"===g.left&&(r+=s,g.left="left"))),"element"!==f&&"both"!==f||(n<b[1]&&"bottom"===g.top&&(n+=a,g.top="top"),n+a>b[3]&&"top"===g.top&&(n-=a,g.top="bottom")),"element"!==p&&"both"!==p||(r<b[0]&&("right"===g.left?(r+=s,g.left="left"):"center"===g.left&&(r+=s/2,g.left="left")),r+s>b[2]&&("left"===g.left?(r-=s,g.left="right"):"center"===g.left&&(r-=s/2,g.left="right"))),"string"==typeof l?l=l.split(",").map((function(t){return t.trim()})):!0===l&&(l=["top","left","right","bottom"]),l=l||[];var y,w,$=[],x=[];n<b[1]&&(l.indexOf("top")>=0?(n=b[1],$.push("top")):x.push("top")),n+a>b[3]&&(l.indexOf("bottom")>=0?(n=b[3]-a,$.push("bottom")):x.push("bottom")),r<b[0]&&(l.indexOf("left")>=0?(r=b[0],$.push("left")):x.push("left")),r+s>b[2]&&(l.indexOf("right")>=0?(r=b[2]-s,$.push("right")):x.push("right")),$.length&&(y=void 0,y=void 0!==e.options.pinnedClass?e.options.pinnedClass:e.getClass("pinned"),_.push(y),$.forEach((function(t){_.push(y+"-"+t)}))),x.length&&(w=void 0,w=void 0!==e.options.outOfBoundsClass?e.options.outOfBoundsClass:e.getClass("out-of-bounds"),_.push(w),x.forEach((function(t){_.push(w+"-"+t)}))),($.indexOf("left")>=0||$.indexOf("right")>=0)&&(g.left=h.left=!1),($.indexOf("top")>=0||$.indexOf("bottom")>=0)&&(g.top=h.top=!1),h.top===i.top&&h.left===i.left&&g.top===e.attachment.top&&g.left===e.attachment.left||(e.updateAttachClasses(g,h),e.trigger("update",{attachment:g,targetAttachment:h}))})),k((function(){!1!==e.options.addTargetClasses&&$(e.target,_,p),$(e.element,_,p)})),{top:n,left:r}}});var X,f=(X=o.Utils).getBounds,$=X.updateClasses;return k=X.defer,o.modules.push({position:function(t){var e=this,n=t.top,r=t.left,i=this.cache("element-bounds",(function(){return f(e.element)})),o=i.height,a=i.width,s=this.getTargetBounds(),c=n+o,l=r+a,u=[];n<=s.bottom&&c>=s.top&&["left","right"].forEach((function(t){var e=s[t];e!==r&&e!==l||u.push(t)})),r<=s.right&&l>=s.left&&["top","bottom"].forEach((function(t){var e=s[t];e!==n&&e!==c||u.push(t)}));var d=[],p=[],_=["left","top","right","bottom"];return d.push(this.getClass("abutted")),_.forEach((function(t){d.push(e.getClass("abutted")+"-"+t)})),u.length&&p.push(this.getClass("abutted")),u.forEach((function(t){p.push(e.getClass("abutted")+"-"+t)})),k((function(){!1!==e.options.addTargetClasses&&$(e.target,p,d),$(e.element,p,d)})),!0}}),A=function(){function t(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o.modules.push({position:function(t){var e=t.top,n=t.left;if(this.options.shift){var r=this.options.shift;"function"==typeof this.options.shift&&(r=this.options.shift.call(this,{top:e,left:n}));var i=void 0,o=void 0;if("string"==typeof r){(r=r.split(" "))[1]=r[1]||r[0];var a=A(r,2);i=a[0],o=a[1],i=parseFloat(i,10),o=parseFloat(o,10)}else i=r.top,o=r.left;return{top:e+=i,left:n+=o}}}}),K},void 0===(i="function"==typeof r?r.call(e,n,e,t):r)||(t.exports=i)},,,,,,,,,function(t,e,n){(function(e){t.exports=e.Channel=n(197)}).call(this,n(1))},,function(t,e,n){(function(r,i){var o,a;o=function(){"use strict";var t,e=Function.call.bind(Function.apply),n=Function.call.bind(Function.call),o=Array.isArray,a=Object.keys,s=function(t){return function(){return!e(t,this,arguments)}},c=function(t){try{return t(),!1}catch(t){return!0}},l=function(t){try{return t()}catch(t){return!1}},u=s(c),d=function(){return!c((function(){Object.defineProperty({},"x",{get:function(){}})}))},p=!!Object.defineProperty&&d(),f="foo"===function(){}.name,_=Function.call.bind(Array.prototype.forEach),h=Function.call.bind(Array.prototype.reduce),m=Function.call.bind(Array.prototype.filter),g=Function.call.bind(Array.prototype.some),v=function(t,e,n,r){!r&&e in t||(p?Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:!0,value:n}):t[e]=n)},b=function(t,e,n){_(a(e),(function(r){var i=e[r];v(t,r,i,!!n)}))},y=Function.call.bind(Object.prototype.toString),w=function(t){return"function"==typeof t},$={getter:function(t,e,n){if(!p)throw new TypeError("getters require true ES5 support");Object.defineProperty(t,e,{configurable:!0,enumerable:!1,get:n})},proxy:function(t,e,n){if(!p)throw new TypeError("getters require true ES5 support");var r=Object.getOwnPropertyDescriptor(t,e);Object.defineProperty(n,e,{configurable:r.configurable,enumerable:r.enumerable,get:function(){return t[e]},set:function(n){t[e]=n}})},redefine:function(t,e,n){if(p){var r=Object.getOwnPropertyDescriptor(t,e);r.value=n,Object.defineProperty(t,e,r)}else t[e]=n},defineByDescriptor:function(t,e,n){p?Object.defineProperty(t,e,n):"value"in n&&(t[e]=n.value)},preserveToString:function(t,e){e&&w(e.toString)&&v(t,"toString",e.toString.bind(e),!0)}},x=Object.create||function(t,e){var n=function(){};n.prototype=t;var r=new n;return void 0!==e&&a(e).forEach((function(t){$.defineByDescriptor(r,t,e[t])})),r},k=function(t,e){return!!Object.setPrototypeOf&&l((function(){var n=function e(n){var r=new t(n);return Object.setPrototypeOf(r,e.prototype),r};return Object.setPrototypeOf(n,t),n.prototype=x(t.prototype,{constructor:{value:n}}),e(n)}))},C=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==r)return r;throw new Error("unable to locate global object")}(),S=C.isFinite,A=Function.call.bind(String.prototype.indexOf),E=Function.apply.bind(Array.prototype.indexOf),j=Function.call.bind(Array.prototype.concat),O=Function.call.bind(String.prototype.slice),T=Function.call.bind(Array.prototype.push),q=Function.apply.bind(Array.prototype.push),P=Function.call.bind(Array.prototype.shift),M=Math.max,I=Math.min,R=Math.floor,D=Math.abs,z=Math.exp,L=Math.log,N=Math.sqrt,F=Function.call.bind(Object.prototype.hasOwnProperty),U=function(){},V=C.Map,H=V&&V.prototype.delete,B=V&&V.prototype.get,W=V&&V.prototype.has,G=V&&V.prototype.set,Y=C.Symbol||{},K=Y.species||"@@species",J=Number.isNaN||function(t){return t!=t},Q=Number.isFinite||function(t){return"number"==typeof t&&S(t)},X=w(Math.sign)?Math.sign:function(t){var e=Number(t);return 0===e||J(e)?e:e<0?-1:1},Z=function(t){return"[object Arguments]"===y(t)},tt=function(t){return null!==t&&"object"==typeof t&&"number"==typeof t.length&&t.length>=0&&"[object Array]"!==y(t)&&"[object Function]"===y(t.callee)},et=Z(arguments)?Z:tt,nt={primitive:function(t){return null===t||"function"!=typeof t&&"object"!=typeof t},string:function(t){return"[object String]"===y(t)},regex:function(t){return"[object RegExp]"===y(t)},symbol:function(t){return"function"==typeof C.Symbol&&"symbol"==typeof t}},rt=function(t,e,n){var r=t[e];v(t,e,n,!0),$.preserveToString(t[e],r)},it="function"==typeof Y&&"function"==typeof Y.for&&nt.symbol(Y()),ot=nt.symbol(Y.iterator)?Y.iterator:"_es6-shim iterator_";C.Set&&"function"==typeof(new C.Set)["@@iterator"]&&(ot="@@iterator"),C.Reflect||v(C,"Reflect",{},!0);var at,st=C.Reflect,ct=String,lt="undefined"!=typeof document&&document?document.all:null,ut=null==lt?function(t){return null==t}:function(t){return null==t&&t!==lt},dt={Call:function(t,n){var r=arguments.length>2?arguments[2]:[];if(!dt.IsCallable(t))throw new TypeError(t+" is not a function");return e(t,n,r)},RequireObjectCoercible:function(t,e){if(ut(t))throw new TypeError(e||"Cannot call method on "+t);return t},TypeIsObject:function(t){return null!=t&&!0!==t&&!1!==t&&("function"==typeof t||"object"==typeof t||t===lt)},ToObject:function(t,e){return Object(dt.RequireObjectCoercible(t,e))},IsCallable:w,IsConstructor:function(t){return dt.IsCallable(t)},ToInt32:function(t){return dt.ToNumber(t)>>0},ToUint32:function(t){return dt.ToNumber(t)>>>0},ToNumber:function(t){if("[object Symbol]"===y(t))throw new TypeError("Cannot convert a Symbol value to a number");return+t},ToInteger:function(t){var e=dt.ToNumber(t);return J(e)?0:0!==e&&Q(e)?(e>0?1:-1)*R(D(e)):e},ToLength:function(t){var e=dt.ToInteger(t);return e<=0?0:e>Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e},SameValue:function(t,e){return t===e?0!==t||1/t==1/e:J(t)&&J(e)},SameValueZero:function(t,e){return t===e||J(t)&&J(e)},IsIterable:function(t){return dt.TypeIsObject(t)&&(void 0!==t[ot]||et(t))},GetIterator:function(e){if(et(e))return new t(e,"value");var n=dt.GetMethod(e,ot);if(!dt.IsCallable(n))throw new TypeError("value is not an iterable");var r=dt.Call(n,e);if(!dt.TypeIsObject(r))throw new TypeError("bad iterator");return r},GetMethod:function(t,e){var n=dt.ToObject(t)[e];if(!ut(n)){if(!dt.IsCallable(n))throw new TypeError("Method not callable: "+e);return n}},IteratorComplete:function(t){return!!t.done},IteratorClose:function(t,e){var n=dt.GetMethod(t,"return");if(void 0!==n){var r,i;try{r=dt.Call(n,t)}catch(t){i=t}if(!e){if(i)throw i;if(!dt.TypeIsObject(r))throw new TypeError("Iterator's return method returned a non-object.")}}},IteratorNext:function(t){var e=arguments.length>1?t.next(arguments[1]):t.next();if(!dt.TypeIsObject(e))throw new TypeError("bad iterator");return e},IteratorStep:function(t){var e=dt.IteratorNext(t);return!dt.IteratorComplete(e)&&e},Construct:function(t,e,n,r){var i=void 0===n?t:n;if(!r&&st.construct)return st.construct(t,e,i);var o=i.prototype;dt.TypeIsObject(o)||(o=Object.prototype);var a=x(o),s=dt.Call(t,a,e);return dt.TypeIsObject(s)?s:a},SpeciesConstructor:function(t,e){var n=t.constructor;if(void 0===n)return e;if(!dt.TypeIsObject(n))throw new TypeError("Bad constructor");var r=n[K];if(ut(r))return e;if(!dt.IsConstructor(r))throw new TypeError("Bad @@species");return r},CreateHTML:function(t,e,n,r){var i=dt.ToString(t),o="<"+e;return""!==n&&(o+=" "+n+'="'+dt.ToString(r).replace(/"/g,"&quot;")+'"'),o+">"+i+"</"+e+">"},IsRegExp:function(t){if(!dt.TypeIsObject(t))return!1;var e=t[Y.match];return void 0!==e?!!e:nt.regex(t)},ToString:function(t){return ct(t)}};if(p&&it){var pt=function(t){if(nt.symbol(Y[t]))return Y[t];var e=Y.for("Symbol."+t);return Object.defineProperty(Y,t,{configurable:!1,enumerable:!1,writable:!1,value:e}),e};if(!nt.symbol(Y.search)){var ft=pt("search"),_t=String.prototype.search;v(RegExp.prototype,ft,(function(t){return dt.Call(_t,t,[this])}));var ht=function(t){var e=dt.RequireObjectCoercible(this);if(!ut(t)){var n=dt.GetMethod(t,ft);if(void 0!==n)return dt.Call(n,t,[e])}return dt.Call(_t,e,[dt.ToString(t)])};rt(String.prototype,"search",ht)}if(!nt.symbol(Y.replace)){var mt=pt("replace"),gt=String.prototype.replace;v(RegExp.prototype,mt,(function(t,e){return dt.Call(gt,t,[this,e])}));var vt=function(t,e){var n=dt.RequireObjectCoercible(this);if(!ut(t)){var r=dt.GetMethod(t,mt);if(void 0!==r)return dt.Call(r,t,[n,e])}return dt.Call(gt,n,[dt.ToString(t),e])};rt(String.prototype,"replace",vt)}if(!nt.symbol(Y.split)){var bt=pt("split"),yt=String.prototype.split;v(RegExp.prototype,bt,(function(t,e){return dt.Call(yt,t,[this,e])}));var wt=function(t,e){var n=dt.RequireObjectCoercible(this);if(!ut(t)){var r=dt.GetMethod(t,bt);if(void 0!==r)return dt.Call(r,t,[n,e])}return dt.Call(yt,n,[dt.ToString(t),e])};rt(String.prototype,"split",wt)}var $t=nt.symbol(Y.match),xt=$t&&((at={})[Y.match]=function(){return 42},42!=="a".match(at));if(!$t||xt){var kt=pt("match"),Ct=String.prototype.match;v(RegExp.prototype,kt,(function(t){return dt.Call(Ct,t,[this])}));var St=function(t){var e=dt.RequireObjectCoercible(this);if(!ut(t)){var n=dt.GetMethod(t,kt);if(void 0!==n)return dt.Call(n,t,[e])}return dt.Call(Ct,e,[dt.ToString(t)])};rt(String.prototype,"match",St)}}var At=function(t,e,n){$.preserveToString(e,t),Object.setPrototypeOf&&Object.setPrototypeOf(t,e),p?_(Object.getOwnPropertyNames(t),(function(r){r in U||n[r]||$.proxy(t,r,e)})):_(Object.keys(t),(function(r){r in U||n[r]||(e[r]=t[r])})),e.prototype=t.prototype,$.redefine(t.prototype,"constructor",e)},Et=function(){return this},jt=function(t){p&&!F(t,K)&&$.getter(t,K,Et)},Ot=function(t,e){var n=e||function(){return this};v(t,ot,n),!t[ot]&&nt.symbol(ot)&&(t[ot]=n)},Tt=function(t,e,n){p?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,writable:!0,value:n}):t[e]=n},qt=function(t,e,n){if(Tt(t,e,n),!dt.SameValue(t[e],n))throw new TypeError("property is nonconfigurable")},Pt=function(t,e,n,r){if(!dt.TypeIsObject(t))throw new TypeError("Constructor requires `new`: "+e.name);var i=e.prototype;dt.TypeIsObject(i)||(i=n);var o=x(i);for(var a in r)if(F(r,a)){var s=r[a];v(o,a,s,!0)}return o};if(String.fromCodePoint&&1!==String.fromCodePoint.length){var Mt=String.fromCodePoint;rt(String,"fromCodePoint",(function(t){return dt.Call(Mt,this,arguments)}))}var It={fromCodePoint:function(t){for(var e,n=[],r=0,i=arguments.length;r<i;r++){if(e=Number(arguments[r]),!dt.SameValue(e,dt.ToInteger(e))||e<0||e>1114111)throw new RangeError("Invalid code point "+e);e<65536?T(n,String.fromCharCode(e)):(e-=65536,T(n,String.fromCharCode(55296+(e>>10))),T(n,String.fromCharCode(e%1024+56320)))}return n.join("")},raw:function(t){var e=dt.ToObject(t,"bad callSite"),n=dt.ToObject(e.raw,"bad raw value"),r=n.length,i=dt.ToLength(r);if(i<=0)return"";for(var o,a,s,c,l=[],u=0;u<i&&(o=dt.ToString(u),s=dt.ToString(n[o]),T(l,s),!(u+1>=i));)a=u+1<arguments.length?arguments[u+1]:"",c=dt.ToString(a),T(l,c),u+=1;return l.join("")}};String.raw&&"xy"!==String.raw({raw:{0:"x",1:"y",length:2}})&&rt(String,"raw",It.raw),b(String,It);var Rt=function t(e,n){if(n<1)return"";if(n%2)return t(e,n-1)+e;var r=t(e,n/2);return r+r},Dt=1/0,zt={repeat:function(t){var e=dt.ToString(dt.RequireObjectCoercible(this)),n=dt.ToInteger(t);if(n<0||n>=Dt)throw new RangeError("repeat count must be less than infinity and not overflow maximum string size");return Rt(e,n)},startsWith:function(t){var e=dt.ToString(dt.RequireObjectCoercible(this));if(dt.IsRegExp(t))throw new TypeError('Cannot call method "startsWith" with a regex');var n,r=dt.ToString(t);arguments.length>1&&(n=arguments[1]);var i=M(dt.ToInteger(n),0);return O(e,i,i+r.length)===r},endsWith:function(t){var e=dt.ToString(dt.RequireObjectCoercible(this));if(dt.IsRegExp(t))throw new TypeError('Cannot call method "endsWith" with a regex');var n,r=dt.ToString(t),i=e.length;arguments.length>1&&(n=arguments[1]);var o=void 0===n?i:dt.ToInteger(n),a=I(M(o,0),i);return O(e,a-r.length,a)===r},includes:function(t){if(dt.IsRegExp(t))throw new TypeError('"includes" does not accept a RegExp');var e,n=dt.ToString(t);return arguments.length>1&&(e=arguments[1]),-1!==A(this,n,e)},codePointAt:function(t){var e=dt.ToString(dt.RequireObjectCoercible(this)),n=dt.ToInteger(t),r=e.length;if(n>=0&&n<r){var i=e.charCodeAt(n);if(i<55296||i>56319||n+1===r)return i;var o=e.charCodeAt(n+1);return o<56320||o>57343?i:1024*(i-55296)+(o-56320)+65536}}};if(String.prototype.includes&&!1!=="a".includes("a",1/0)&&rt(String.prototype,"includes",zt.includes),String.prototype.startsWith&&String.prototype.endsWith){var Lt=c((function(){"/a/".startsWith(/a/)})),Nt=l((function(){return!1==="abc".startsWith("a",1/0)}));Lt&&Nt||(rt(String.prototype,"startsWith",zt.startsWith),rt(String.prototype,"endsWith",zt.endsWith))}it&&(l((function(){var t=/a/;return t[Y.match]=!1,"/a/".startsWith(t)}))||rt(String.prototype,"startsWith",zt.startsWith),l((function(){var t=/a/;return t[Y.match]=!1,"/a/".endsWith(t)}))||rt(String.prototype,"endsWith",zt.endsWith),l((function(){var t=/a/;return t[Y.match]=!1,"/a/".includes(t)}))||rt(String.prototype,"includes",zt.includes)),b(String.prototype,zt);var Ft=["\t\n\v\f\r ","\u2028","\u2029\ufeff"].join(""),Ut=new RegExp("(^["+Ft+"]+)|(["+Ft+"]+$)","g"),Vt=function(){return dt.ToString(dt.RequireObjectCoercible(this)).replace(Ut,"")},Ht=["","",""].join(""),Bt=new RegExp("["+Ht+"]","g"),Wt=/^[-+]0x[0-9a-f]+$/i,Gt=Ht.trim().length!==Ht.length;v(String.prototype,"trim",Vt,Gt);var Yt=function(t){return{value:t,done:0===arguments.length}},Kt=function(t){dt.RequireObjectCoercible(t),this._s=dt.ToString(t),this._i=0};Kt.prototype.next=function(){var t=this._s,e=this._i;if(void 0===t||e>=t.length)return this._s=void 0,Yt();var n,r,i=t.charCodeAt(e);return r=i<55296||i>56319||e+1===t.length||(n=t.charCodeAt(e+1))<56320||n>57343?1:2,this._i=e+r,Yt(t.substr(e,r))},Ot(Kt.prototype),Ot(String.prototype,(function(){return new Kt(this)}));var Jt={from:function(t){var e,r,i,o,a,s,c=this;if(arguments.length>1&&(e=arguments[1]),void 0===e)r=!1;else{if(!dt.IsCallable(e))throw new TypeError("Array.from: when provided, the second argument must be a function");arguments.length>2&&(i=arguments[2]),r=!0}if(void 0!==(et(t)||dt.GetMethod(t,ot))){a=dt.IsConstructor(c)?Object(new c):[];var l,u,d=dt.GetIterator(t);for(s=0;!1!==(l=dt.IteratorStep(d));){u=l.value;try{r&&(u=void 0===i?e(u,s):n(e,i,u,s)),a[s]=u}catch(t){throw dt.IteratorClose(d,!0),t}s+=1}o=s}else{var p,f=dt.ToObject(t);for(o=dt.ToLength(f.length),a=dt.IsConstructor(c)?Object(new c(o)):new Array(o),s=0;s<o;++s)p=f[s],r&&(p=void 0===i?e(p,s):n(e,i,p,s)),qt(a,s,p)}return a.length=o,a},of:function(){for(var t=arguments.length,e=this,n=o(e)||!dt.IsCallable(e)?new Array(t):dt.Construct(e,[t]),r=0;r<t;++r)qt(n,r,arguments[r]);return n.length=t,n}};b(Array,Jt),jt(Array),b((t=function(t,e){this.i=0,this.array=t,this.kind=e}).prototype,{next:function(){var e=this.i,n=this.array;if(!(this instanceof t))throw new TypeError("Not an ArrayIterator");if(void 0!==n)for(var r=dt.ToLength(n.length);e<r;e++){var i,o=this.kind;return"key"===o?i=e:"value"===o?i=n[e]:"entry"===o&&(i=[e,n[e]]),this.i=e+1,Yt(i)}return this.array=void 0,Yt()}}),Ot(t.prototype),Array.of===Jt.of||function(){var t=function(t){this.length=t};t.prototype=[];var e=Array.of.apply(t,[1,2]);return e instanceof t&&2===e.length}()||rt(Array,"of",Jt.of);var Qt={copyWithin:function(t,e){var n,r=dt.ToObject(this),i=dt.ToLength(r.length),o=dt.ToInteger(t),a=dt.ToInteger(e),s=o<0?M(i+o,0):I(o,i),c=a<0?M(i+a,0):I(a,i);arguments.length>2&&(n=arguments[2]);var l=void 0===n?i:dt.ToInteger(n),u=l<0?M(i+l,0):I(l,i),d=I(u-c,i-s),p=1;for(c<s&&s<c+d&&(p=-1,c+=d-1,s+=d-1);d>0;)c in r?r[s]=r[c]:delete r[s],c+=p,s+=p,d-=1;return r},fill:function(t){var e,n;arguments.length>1&&(e=arguments[1]),arguments.length>2&&(n=arguments[2]);var r=dt.ToObject(this),i=dt.ToLength(r.length);e=dt.ToInteger(void 0===e?0:e);for(var o=(n=dt.ToInteger(void 0===n?i:n))<0?i+n:n,a=e<0?M(i+e,0):I(e,i);a<i&&a<o;++a)r[a]=t;return r},find:function(t){var e=dt.ToObject(this),r=dt.ToLength(e.length);if(!dt.IsCallable(t))throw new TypeError("Array#find: predicate must be a function");for(var i,o=arguments.length>1?arguments[1]:null,a=0;a<r;a++)if(i=e[a],o){if(n(t,o,i,a,e))return i}else if(t(i,a,e))return i},findIndex:function(t){var e=dt.ToObject(this),r=dt.ToLength(e.length);if(!dt.IsCallable(t))throw new TypeError("Array#findIndex: predicate must be a function");for(var i=arguments.length>1?arguments[1]:null,o=0;o<r;o++)if(i){if(n(t,i,e[o],o,e))return o}else if(t(e[o],o,e))return o;return-1},keys:function(){return new t(this,"key")},values:function(){return new t(this,"value")},entries:function(){return new t(this,"entry")}};if(Array.prototype.keys&&!dt.IsCallable([1].keys().next)&&delete Array.prototype.keys,Array.prototype.entries&&!dt.IsCallable([1].entries().next)&&delete Array.prototype.entries,Array.prototype.keys&&Array.prototype.entries&&!Array.prototype.values&&Array.prototype[ot]&&(b(Array.prototype,{values:Array.prototype[ot]}),nt.symbol(Y.unscopables)&&(Array.prototype[Y.unscopables].values=!0)),f&&Array.prototype.values&&"values"!==Array.prototype.values.name){var Xt=Array.prototype.values;rt(Array.prototype,"values",(function(){return dt.Call(Xt,this,arguments)})),v(Array.prototype,ot,Array.prototype.values,!0)}b(Array.prototype,Qt),1/[!0].indexOf(!0,-0)<0&&v(Array.prototype,"indexOf",(function(t){var e=E(this,arguments);return 0===e&&1/e<0?0:e}),!0),Ot(Array.prototype,(function(){return this.values()})),Object.getPrototypeOf&&Ot(Object.getPrototypeOf([].values()));var Zt,te=l((function(){return 0===Array.from({length:-1}).length})),ee=1===(Zt=Array.from([0].entries())).length&&o(Zt[0])&&0===Zt[0][0]&&0===Zt[0][1];if(te&&ee||rt(Array,"from",Jt.from),!l((function(){return Array.from([0],void 0)}))){var ne=Array.from;rt(Array,"from",(function(t){return arguments.length>1&&void 0!==arguments[1]?dt.Call(ne,this,arguments):n(ne,this,t)}))}var re=-(Math.pow(2,32)-1),ie=function(t,e){var r={length:re};return r[e?(r.length>>>0)-1:0]=!0,l((function(){return n(t,r,(function(){throw new RangeError("should not reach here")}),[]),!0}))};if(!ie(Array.prototype.forEach)){var oe=Array.prototype.forEach;rt(Array.prototype,"forEach",(function(t){return dt.Call(oe,this.length>=0?this:[],arguments)}),!0)}if(!ie(Array.prototype.map)){var ae=Array.prototype.map;rt(Array.prototype,"map",(function(t){return dt.Call(ae,this.length>=0?this:[],arguments)}),!0)}if(!ie(Array.prototype.filter)){var se=Array.prototype.filter;rt(Array.prototype,"filter",(function(t){return dt.Call(se,this.length>=0?this:[],arguments)}),!0)}if(!ie(Array.prototype.some)){var ce=Array.prototype.some;rt(Array.prototype,"some",(function(t){return dt.Call(ce,this.length>=0?this:[],arguments)}),!0)}if(!ie(Array.prototype.every)){var le=Array.prototype.every;rt(Array.prototype,"every",(function(t){return dt.Call(le,this.length>=0?this:[],arguments)}),!0)}if(!ie(Array.prototype.reduce)){var ue=Array.prototype.reduce;rt(Array.prototype,"reduce",(function(t){return dt.Call(ue,this.length>=0?this:[],arguments)}),!0)}if(!ie(Array.prototype.reduceRight,!0)){var de=Array.prototype.reduceRight;rt(Array.prototype,"reduceRight",(function(t){return dt.Call(de,this.length>=0?this:[],arguments)}),!0)}var pe=8!==Number("0o10"),fe=2!==Number("0b10"),_e=g(Ht,(function(t){return 0===Number(t+0+t)}));if(pe||fe||_e){var he=Number,me=/^0b[01]+$/i,ge=/^0o[0-7]+$/i,ve=me.test.bind(me),be=ge.test.bind(ge),ye=function(t){var e;if("function"==typeof t.valueOf&&(e=t.valueOf(),nt.primitive(e)))return e;if("function"==typeof t.toString&&(e=t.toString(),nt.primitive(e)))return e;throw new TypeError("No default value")},we=Bt.test.bind(Bt),$e=Wt.test.bind(Wt),xe=function(){var t=function(e){var n;"string"==typeof(n=arguments.length>0?nt.primitive(e)?e:ye(e,"number"):0)&&(n=dt.Call(Vt,n),ve(n)?n=parseInt(O(n,2),2):be(n)?n=parseInt(O(n,2),8):(we(n)||$e(n))&&(n=NaN));var r=this,i=l((function(){return he.prototype.valueOf.call(r),!0}));return r instanceof t&&!i?new he(n):he(n)};return t}();At(he,xe,{}),b(xe,{NaN:he.NaN,MAX_VALUE:he.MAX_VALUE,MIN_VALUE:he.MIN_VALUE,NEGATIVE_INFINITY:he.NEGATIVE_INFINITY,POSITIVE_INFINITY:he.POSITIVE_INFINITY}),Number=xe,$.redefine(C,"Number",xe)}var ke=Math.pow(2,53)-1;b(Number,{MAX_SAFE_INTEGER:ke,MIN_SAFE_INTEGER:-ke,EPSILON:2220446049250313e-31,parseInt:C.parseInt,parseFloat:C.parseFloat,isFinite:Q,isInteger:function(t){return Q(t)&&dt.ToInteger(t)===t},isSafeInteger:function(t){return Number.isInteger(t)&&D(t)<=Number.MAX_SAFE_INTEGER},isNaN:J}),v(Number,"parseInt",C.parseInt,Number.parseInt!==C.parseInt),[,1].find((function(t,e){return 0===e}))||rt(Array.prototype,"find",Qt.find),0!==[,1].findIndex((function(t,e){return 0===e}))&&rt(Array.prototype,"findIndex",Qt.findIndex);var Ce,Se,Ae,Ee=Function.bind.call(Function.bind,Object.prototype.propertyIsEnumerable),je=function(t,e){p&&Ee(t,e)&&Object.defineProperty(t,e,{enumerable:!1})},Oe=function(){for(var t=Number(this),e=arguments.length,n=e-t,r=new Array(n<0?0:n),i=t;i<e;++i)r[i-t]=arguments[i];return r},Te=function(t){return function(e,n){return e[n]=t[n],e}},qe=function(t,e){var n,r=a(Object(e));return dt.IsCallable(Object.getOwnPropertySymbols)&&(n=m(Object.getOwnPropertySymbols(Object(e)),Ee(e))),h(j(r,n||[]),Te(e),t)},Pe={assign:function(t,e){var n=dt.ToObject(t,"Cannot convert undefined or null to object");return h(dt.Call(Oe,1,arguments),qe,n)},is:function(t,e){return dt.SameValue(t,e)}};if(Object.assign&&Object.preventExtensions&&function(){var t=Object.preventExtensions({1:2});try{Object.assign(t,"xy")}catch(e){return"y"===t[1]}}()&&rt(Object,"assign",Pe.assign),b(Object,Pe),p){var Me={setPrototypeOf:function(t,e){var r,i=function(t,e){if(!dt.TypeIsObject(t))throw new TypeError("cannot set prototype on a non-object");if(null!==e&&!dt.TypeIsObject(e))throw new TypeError("can only set prototype to an object or null"+e)},o=function(t,e){return i(t,e),n(r,t,e),t};try{r=t.getOwnPropertyDescriptor(t.prototype,e).set,n(r,{},null)}catch(n){if(t.prototype!=={}[e])return;r=function(t){this[e]=t},o.polyfill=o(o({},null),t.prototype)instanceof t}return o}(Object,"__proto__")};b(Object,Me)}if(Object.setPrototypeOf&&Object.getPrototypeOf&&null!==Object.getPrototypeOf(Object.setPrototypeOf({},null))&&null===Object.getPrototypeOf(Object.create(null))&&(Ce=Object.create(null),Se=Object.getPrototypeOf,Ae=Object.setPrototypeOf,Object.getPrototypeOf=function(t){var e=Se(t);return e===Ce?null:e},Object.setPrototypeOf=function(t,e){return Ae(t,null===e?Ce:e)},Object.setPrototypeOf.polyfill=!1),c((function(){Object.keys("foo")}))){var Ie=Object.keys;rt(Object,"keys",(function(t){return Ie(dt.ToObject(t))})),a=Object.keys}if(c((function(){Object.keys(/a/g)}))){var Re=Object.keys;rt(Object,"keys",(function(t){if(nt.regex(t)){var e=[];for(var n in t)F(t,n)&&T(e,n);return e}return Re(t)})),a=Object.keys}if(Object.getOwnPropertyNames&&c((function(){Object.getOwnPropertyNames("foo")}))){var De="object"==typeof window?Object.getOwnPropertyNames(window):[],ze=Object.getOwnPropertyNames;rt(Object,"getOwnPropertyNames",(function(t){var e=dt.ToObject(t);if("[object Window]"===y(e))try{return ze(e)}catch(t){return j([],De)}return ze(e)}))}if(Object.getOwnPropertyDescriptor&&c((function(){Object.getOwnPropertyDescriptor("foo","bar")}))){var Le=Object.getOwnPropertyDescriptor;rt(Object,"getOwnPropertyDescriptor",(function(t,e){return Le(dt.ToObject(t),e)}))}if(Object.seal&&c((function(){Object.seal("foo")}))){var Ne=Object.seal;rt(Object,"seal",(function(t){return dt.TypeIsObject(t)?Ne(t):t}))}if(Object.isSealed&&c((function(){Object.isSealed("foo")}))){var Fe=Object.isSealed;rt(Object,"isSealed",(function(t){return!dt.TypeIsObject(t)||Fe(t)}))}if(Object.freeze&&c((function(){Object.freeze("foo")}))){var Ue=Object.freeze;rt(Object,"freeze",(function(t){return dt.TypeIsObject(t)?Ue(t):t}))}if(Object.isFrozen&&c((function(){Object.isFrozen("foo")}))){var Ve=Object.isFrozen;rt(Object,"isFrozen",(function(t){return!dt.TypeIsObject(t)||Ve(t)}))}if(Object.preventExtensions&&c((function(){Object.preventExtensions("foo")}))){var He=Object.preventExtensions;rt(Object,"preventExtensions",(function(t){return dt.TypeIsObject(t)?He(t):t}))}if(Object.isExtensible&&c((function(){Object.isExtensible("foo")}))){var Be=Object.isExtensible;rt(Object,"isExtensible",(function(t){return!!dt.TypeIsObject(t)&&Be(t)}))}if(Object.getPrototypeOf&&c((function(){Object.getPrototypeOf("foo")}))){var We=Object.getPrototypeOf;rt(Object,"getPrototypeOf",(function(t){return We(dt.ToObject(t))}))}var Ge,Ye=p&&((Ge=Object.getOwnPropertyDescriptor(RegExp.prototype,"flags"))&&dt.IsCallable(Ge.get));if(p&&!Ye){var Ke=function(){if(!dt.TypeIsObject(this))throw new TypeError("Method called on incompatible type: must be an object.");var t="";return this.global&&(t+="g"),this.ignoreCase&&(t+="i"),this.multiline&&(t+="m"),this.unicode&&(t+="u"),this.sticky&&(t+="y"),t};$.getter(RegExp.prototype,"flags",Ke)}var Je,Qe=p&&l((function(){return"/a/i"===String(new RegExp(/a/g,"i"))})),Xe=it&&p&&((Je=/./)[Y.match]=!1,RegExp(Je)===Je),Ze=l((function(){return"/abc/"===RegExp.prototype.toString.call({source:"abc"})})),tn=Ze&&l((function(){return"/a/b"===RegExp.prototype.toString.call({source:"a",flags:"b"})}));if(!Ze||!tn){var en=RegExp.prototype.toString;v(RegExp.prototype,"toString",(function(){var t=dt.RequireObjectCoercible(this);return nt.regex(t)?n(en,t):"/"+ct(t.source)+"/"+ct(t.flags)}),!0),$.preserveToString(RegExp.prototype.toString,en)}if(p&&(!Qe||Xe)){var nn=Object.getOwnPropertyDescriptor(RegExp.prototype,"flags").get,rn=Object.getOwnPropertyDescriptor(RegExp.prototype,"source")||{},on=function(){return this.source},an=dt.IsCallable(rn.get)?rn.get:on,sn=RegExp,cn=function t(e,n){var r=dt.IsRegExp(e);return this instanceof t||!r||void 0!==n||e.constructor!==t?nt.regex(e)?new t(dt.Call(an,e),void 0===n?dt.Call(nn,e):n):(r&&(e.source,void 0===n&&e.flags),new sn(e,n)):e};At(sn,cn,{$input:!0}),RegExp=cn,$.redefine(C,"RegExp",cn)}if(p){var ln={input:"$_",lastMatch:"$&",lastParen:"$+",leftContext:"$`",rightContext:"$'"};_(a(ln),(function(t){t in RegExp&&!(ln[t]in RegExp)&&$.getter(RegExp,ln[t],(function(){return RegExp[t]}))}))}jt(RegExp);var un=1/Number.EPSILON,dn=function(t){return t+un-un},pn=Math.pow(2,-23),fn=Math.pow(2,127)*(2-pn),_n=Math.pow(2,-126),hn=Math.E,mn=Math.LOG2E,gn=Math.LOG10E,vn=Number.prototype.clz;delete Number.prototype.clz;var bn={acosh:function(t){var e=Number(t);return J(e)||t<1?NaN:1===e?0:e===1/0?e:L(e/hn+N(e+1)*N(e-1)/hn)+1},asinh:function t(e){var n=Number(e);return 0!==n&&S(n)?n<0?-t(-n):L(n+N(n*n+1)):n},atanh:function(t){var e=Number(t);return J(e)||e<-1||e>1?NaN:-1===e?-1/0:1===e?1/0:0===e?e:.5*L((1+e)/(1-e))},cbrt:function(t){var e=Number(t);if(0===e)return e;var n,r=e<0;return r&&(e=-e),n=e===1/0?1/0:(e/((n=z(L(e)/3))*n)+2*n)/3,r?-n:n},clz32:function(t){var e=Number(t),n=dt.ToUint32(e);return 0===n?32:vn?dt.Call(vn,n):31-R(L(n+.5)*mn)},cosh:function(t){var e=Number(t);return 0===e?1:J(e)?NaN:S(e)?(e<0&&(e=-e),e>21?z(e)/2:(z(e)+z(-e))/2):1/0},expm1:function(t){var e=Number(t);if(e===-1/0)return-1;if(!S(e)||0===e)return e;if(D(e)>.5)return z(e)-1;for(var n=e,r=0,i=1;r+n!==r;)r+=n,n*=e/(i+=1);return r},hypot:function(t,e){for(var n=0,r=0,i=0;i<arguments.length;++i){var o=D(Number(arguments[i]));r<o?(n*=r/o*(r/o),n+=1,r=o):n+=o>0?o/r*(o/r):o}return r===1/0?1/0:r*N(n)},log2:function(t){return L(t)*mn},log10:function(t){return L(t)*gn},log1p:function(t){var e=Number(t);return e<-1||J(e)?NaN:0===e||e===1/0?e:-1===e?-1/0:1+e-1==0?e:e*(L(1+e)/(1+e-1))},sign:X,sinh:function(t){var e=Number(t);return S(e)&&0!==e?D(e)<1?(Math.expm1(e)-Math.expm1(-e))/2:(z(e-1)-z(-e-1))*hn/2:e},tanh:function(t){var e=Number(t);return J(e)||0===e?e:e>=20?1:e<=-20?-1:(Math.expm1(e)-Math.expm1(-e))/(z(e)+z(-e))},trunc:function(t){var e=Number(t);return e<0?-R(-e):R(e)},imul:function(t,e){var n=dt.ToUint32(t),r=dt.ToUint32(e),i=65535&n,o=65535&r;return i*o+((n>>>16&65535)*o+i*(r>>>16&65535)<<16>>>0)|0},fround:function(t){var e=Number(t);if(0===e||e===1/0||e===-1/0||J(e))return e;var n=X(e),r=D(e);if(r<_n)return n*dn(r/_n/pn)*_n*pn;var i=(1+pn/Number.EPSILON)*r,o=i-(i-r);return o>fn||J(o)?n*(1/0):n*o}};b(Math,bn),v(Math,"log1p",bn.log1p,-1e-17!==Math.log1p(-1e-17)),v(Math,"asinh",bn.asinh,Math.asinh(-1e7)!==-Math.asinh(1e7)),v(Math,"tanh",bn.tanh,-2e-17!==Math.tanh(-2e-17)),v(Math,"acosh",bn.acosh,Math.acosh(Number.MAX_VALUE)===1/0),v(Math,"cbrt",bn.cbrt,Math.abs(1-Math.cbrt(1e-300)/1e-100)/Number.EPSILON>8),v(Math,"sinh",bn.sinh,-2e-17!==Math.sinh(-2e-17));var yn=Math.expm1(10);v(Math,"expm1",bn.expm1,yn>22025.465794806718||yn<22025.465794806718);var wn=Math.round,$n=0===Math.round(.5-Number.EPSILON/4)&&1===Math.round(Number.EPSILON/3.99-.5),xn=[un+1,2*un-1].every((function(t){return Math.round(t)===t}));v(Math,"round",(function(t){var e=R(t);return t-e<.5?e:-1===e?-0:e+1}),!$n||!xn),$.preserveToString(Math.round,wn);var kn=Math.imul;-5!==Math.imul(4294967295,5)&&(Math.imul=bn.imul,$.preserveToString(Math.imul,kn)),2!==Math.imul.length&&rt(Math,"imul",(function(t,e){return dt.Call(kn,Math,arguments)}));var Cn,Sn,An=function(){var t=C.setTimeout;if("function"==typeof t||"object"==typeof t){dt.IsPromise=function(t){return!!dt.TypeIsObject(t)&&void 0!==t._promise};var e,r=function(t){if(!dt.IsConstructor(t))throw new TypeError("Bad promise constructor");var e=this,n=function(t,n){if(void 0!==e.resolve||void 0!==e.reject)throw new TypeError("Bad Promise implementation!");e.resolve=t,e.reject=n};if(e.resolve=void 0,e.reject=void 0,e.promise=new t(n),!dt.IsCallable(e.resolve)||!dt.IsCallable(e.reject))throw new TypeError("Bad promise constructor")};"undefined"!=typeof window&&dt.IsCallable(window.postMessage)&&(e=function(){var t=[],e="zero-timeout-message",n=function(n){T(t,n),window.postMessage(e,"*")},r=function(n){if(n.source===window&&n.data===e){if(n.stopPropagation(),0===t.length)return;P(t)()}};return window.addEventListener("message",r,!0),n});var o,a,s=function(){var t=C.Promise,e=t&&t.resolve&&t.resolve();return e&&function(t){return e.then(t)}},c=dt.IsCallable(C.setImmediate)?C.setImmediate:"object"==typeof i&&i.nextTick?i.nextTick:s()||(dt.IsCallable(e)?e():function(e){t(e,0)}),l=function(t){return t},u=function(t){throw t},d=0,p=1,f=2,_=0,h=1,m=2,g={},v=function(t,e,n){c((function(){y(t,e,n)}))},y=function(t,e,n){var r,i;if(e===g)return t(n);try{r=t(n),i=e.resolve}catch(t){r=t,i=e.reject}i(r)},w=function(t,e){var n=t._promise,r=n.reactionLength;if(r>0&&(v(n.fulfillReactionHandler0,n.reactionCapability0,e),n.fulfillReactionHandler0=void 0,n.rejectReactions0=void 0,n.reactionCapability0=void 0,r>1))for(var i=1,o=0;i<r;i++,o+=3)v(n[o+_],n[o+m],e),t[o+_]=void 0,t[o+h]=void 0,t[o+m]=void 0;n.result=e,n.state=p,n.reactionLength=0},$=function(t,e){var n=t._promise,r=n.reactionLength;if(r>0&&(v(n.rejectReactionHandler0,n.reactionCapability0,e),n.fulfillReactionHandler0=void 0,n.rejectReactions0=void 0,n.reactionCapability0=void 0,r>1))for(var i=1,o=0;i<r;i++,o+=3)v(n[o+h],n[o+m],e),t[o+_]=void 0,t[o+h]=void 0,t[o+m]=void 0;n.result=e,n.state=f,n.reactionLength=0},x=function(t){var e=!1;return{resolve:function(n){var r;if(!e){if(e=!0,n===t)return $(t,new TypeError("Self resolution"));if(!dt.TypeIsObject(n))return w(t,n);try{r=n.then}catch(e){return $(t,e)}if(!dt.IsCallable(r))return w(t,n);c((function(){S(t,n,r)}))}},reject:function(n){if(!e)return e=!0,$(t,n)}}},k=function(t,e,r,i){t===a?n(t,e,r,i,g):n(t,e,r,i)},S=function(t,e,n){var r=x(t),i=r.resolve,o=r.reject;try{k(n,e,i,o)}catch(t){o(t)}},A=function(){var t=function(e){if(!(this instanceof t))throw new TypeError('Constructor Promise requires "new"');if(this&&this._promise)throw new TypeError("Bad construction");if(!dt.IsCallable(e))throw new TypeError("not a valid resolver");var n=Pt(this,t,o,{_promise:{result:void 0,state:d,reactionLength:0,fulfillReactionHandler0:void 0,rejectReactionHandler0:void 0,reactionCapability0:void 0}}),r=x(n),i=r.reject;try{e(r.resolve,i)}catch(t){i(t)}return n};return t}();o=A.prototype;var E=function(t,e,n,r){var i=!1;return function(o){i||(i=!0,e[t]=o,0==--r.count&&(0,n.resolve)(e))}},j=function(t,e,n){for(var r,i,o=t.iterator,a=[],s={count:1},c=0;;){try{if(!1===(r=dt.IteratorStep(o))){t.done=!0;break}i=r.value}catch(e){throw t.done=!0,e}a[c]=void 0;var l=e.resolve(i),u=E(c,a,n,s);s.count+=1,k(l.then,l,u,n.reject),c+=1}return 0==--s.count&&(0,n.resolve)(a),n.promise},O=function(t,e,n){for(var r,i,o,a=t.iterator;;){try{if(!1===(r=dt.IteratorStep(a))){t.done=!0;break}i=r.value}catch(e){throw t.done=!0,e}o=e.resolve(i),k(o.then,o,n.resolve,n.reject)}return n.promise};return b(A,{all:function(t){var e=this;if(!dt.TypeIsObject(e))throw new TypeError("Promise is not object");var n,i,o=new r(e);try{return n=dt.GetIterator(t),j(i={iterator:n,done:!1},e,o)}catch(t){var a=t;if(i&&!i.done)try{dt.IteratorClose(n,!0)}catch(t){a=t}return(0,o.reject)(a),o.promise}},race:function(t){var e=this;if(!dt.TypeIsObject(e))throw new TypeError("Promise is not object");var n,i,o=new r(e);try{return n=dt.GetIterator(t),O(i={iterator:n,done:!1},e,o)}catch(t){var a=t;if(i&&!i.done)try{dt.IteratorClose(n,!0)}catch(t){a=t}return(0,o.reject)(a),o.promise}},reject:function(t){var e=this;if(!dt.TypeIsObject(e))throw new TypeError("Bad promise constructor");var n=new r(e);return(0,n.reject)(t),n.promise},resolve:function(t){var e=this;if(!dt.TypeIsObject(e))throw new TypeError("Bad promise constructor");if(dt.IsPromise(t)&&t.constructor===e)return t;var n=new r(e);return(0,n.resolve)(t),n.promise}}),b(o,{catch:function(t){return this.then(null,t)},then:function(t,e){var n=this;if(!dt.IsPromise(n))throw new TypeError("not a promise");var i,o=dt.SpeciesConstructor(n,A);i=arguments.length>2&&arguments[2]===g&&o===A?g:new r(o);var a,s=dt.IsCallable(t)?t:l,c=dt.IsCallable(e)?e:u,b=n._promise;if(b.state===d){if(0===b.reactionLength)b.fulfillReactionHandler0=s,b.rejectReactionHandler0=c,b.reactionCapability0=i;else{var y=3*(b.reactionLength-1);b[y+_]=s,b[y+h]=c,b[y+m]=i}b.reactionLength+=1}else if(b.state===p)a=b.result,v(s,i,a);else{if(b.state!==f)throw new TypeError("unexpected Promise state");a=b.result,v(c,i,a)}return i.promise}}),g=new r(A),a=o.then,A}}();if(C.Promise&&(delete C.Promise.accept,delete C.Promise.defer,delete C.Promise.prototype.chain),"function"==typeof An){b(C,{Promise:An});var En=k(C.Promise,(function(t){return t.resolve(42).then((function(){}))instanceof t})),jn=!c((function(){C.Promise.reject(42).then(null,5).then(null,U)})),On=c((function(){C.Promise.call(3,U)})),Tn=function(t){var e=t.resolve(5);e.constructor={};var n=t.resolve(e);try{n.then(null,U).then(null,U)}catch(t){return!0}return e===n}(C.Promise),qn=p&&(Cn=0,Sn=Object.defineProperty({},"then",{get:function(){Cn+=1}}),Promise.resolve(Sn),1===Cn),Pn=function t(e){var n=new Promise(e);e(3,(function(){})),this.then=n.then,this.constructor=t};Pn.prototype=Promise.prototype,Pn.all=Promise.all;var Mn=l((function(){return!!Pn.all([1,2])}));if(En&&jn&&On&&!Tn&&qn&&!Mn||(Promise=An,rt(C,"Promise",An)),1!==Promise.all.length){var In=Promise.all;rt(Promise,"all",(function(t){return dt.Call(In,this,arguments)}))}if(1!==Promise.race.length){var Rn=Promise.race;rt(Promise,"race",(function(t){return dt.Call(Rn,this,arguments)}))}if(1!==Promise.resolve.length){var Dn=Promise.resolve;rt(Promise,"resolve",(function(t){return dt.Call(Dn,this,arguments)}))}if(1!==Promise.reject.length){var zn=Promise.reject;rt(Promise,"reject",(function(t){return dt.Call(zn,this,arguments)}))}je(Promise,"all"),je(Promise,"race"),je(Promise,"resolve"),je(Promise,"reject"),jt(Promise)}var Ln,Nn,Fn=function(t){var e=a(h(t,(function(t,e){return t[e]=!0,t}),{}));return t.join(":")===e.join(":")},Un=Fn(["z","a","bb"]),Vn=Fn(["z",1,"a","3",2]);if(p){var Hn=function(t,e){return e||Un?ut(t)?"^"+dt.ToString(t):"string"==typeof t?"$"+t:"number"==typeof t?Vn?t:"n"+t:"boolean"==typeof t?"b"+t:null:null},Bn=function(){return Object.create?Object.create(null):{}},Wn=function(t,e,r){if(o(r)||nt.string(r))_(r,(function(t){if(!dt.TypeIsObject(t))throw new TypeError("Iterator value "+t+" is not an entry object");e.set(t[0],t[1])}));else if(r instanceof t)n(t.prototype.forEach,r,(function(t,n){e.set(n,t)}));else{var i,a;if(!ut(r)){if(a=e.set,!dt.IsCallable(a))throw new TypeError("bad map");i=dt.GetIterator(r)}if(void 0!==i)for(;;){var s=dt.IteratorStep(i);if(!1===s)break;var c=s.value;try{if(!dt.TypeIsObject(c))throw new TypeError("Iterator value "+c+" is not an entry object");n(a,e,c[0],c[1])}catch(t){throw dt.IteratorClose(i,!0),t}}}},Gn=function(t,e,r){if(o(r)||nt.string(r))_(r,(function(t){e.add(t)}));else if(r instanceof t)n(t.prototype.forEach,r,(function(t){e.add(t)}));else{var i,a;if(!ut(r)){if(a=e.add,!dt.IsCallable(a))throw new TypeError("bad set");i=dt.GetIterator(r)}if(void 0!==i)for(;;){var s=dt.IteratorStep(i);if(!1===s)break;var c=s.value;try{n(a,e,c)}catch(t){throw dt.IteratorClose(i,!0),t}}}},Yn={Map:function(){var t={},e=function(t,e){this.key=t,this.value=e,this.next=null,this.prev=null};e.prototype.isRemoved=function(){return this.key===t};var r,i=function(t){return!!t._es6map},o=function(t,e){if(!dt.TypeIsObject(t)||!i(t))throw new TypeError("Method Map.prototype."+e+" called on incompatible receiver "+dt.ToString(t))},a=function(t,e){o(t,"[[MapIterator]]"),this.head=t._head,this.i=this.head,this.kind=e};a.prototype={next:function(){var t,e=this.i,n=this.kind,r=this.head;if(void 0===this.i)return Yt();for(;e.isRemoved()&&e!==r;)e=e.prev;for(;e.next!==r;)if(!(e=e.next).isRemoved())return t="key"===n?e.key:"value"===n?e.value:[e.key,e.value],this.i=e,Yt(t);return this.i=void 0,Yt()}},Ot(a.prototype);var s=function t(){if(!(this instanceof t))throw new TypeError('Constructor Map requires "new"');if(this&&this._es6map)throw new TypeError("Bad construction");var n=Pt(this,t,r,{_es6map:!0,_head:null,_map:V?new V:null,_size:0,_storage:Bn()}),i=new e(null,null);return i.next=i.prev=i,n._head=i,arguments.length>0&&Wn(t,n,arguments[0]),n};return r=s.prototype,$.getter(r,"size",(function(){if(void 0===this._size)throw new TypeError("size method called on incompatible Map");return this._size})),b(r,{get:function(t){var e;o(this,"get");var n=Hn(t,!0);if(null!==n)return(e=this._storage[n])?e.value:void 0;if(this._map)return(e=B.call(this._map,t))?e.value:void 0;for(var r=this._head,i=r;(i=i.next)!==r;)if(dt.SameValueZero(i.key,t))return i.value},has:function(t){o(this,"has");var e=Hn(t,!0);if(null!==e)return void 0!==this._storage[e];if(this._map)return W.call(this._map,t);for(var n=this._head,r=n;(r=r.next)!==n;)if(dt.SameValueZero(r.key,t))return!0;return!1},set:function(t,n){o(this,"set");var r,i=this._head,a=i,s=Hn(t,!0);if(null!==s){if(void 0!==this._storage[s])return this._storage[s].value=n,this;r=this._storage[s]=new e(t,n),a=i.prev}else this._map&&(W.call(this._map,t)?B.call(this._map,t).value=n:(r=new e(t,n),G.call(this._map,t,r),a=i.prev));for(;(a=a.next)!==i;)if(dt.SameValueZero(a.key,t))return a.value=n,this;return r=r||new e(t,n),dt.SameValue(-0,t)&&(r.key=0),r.next=this._head,r.prev=this._head.prev,r.prev.next=r,r.next.prev=r,this._size+=1,this},delete:function(e){o(this,"delete");var n=this._head,r=n,i=Hn(e,!0);if(null!==i){if(void 0===this._storage[i])return!1;r=this._storage[i].prev,delete this._storage[i]}else if(this._map){if(!W.call(this._map,e))return!1;r=B.call(this._map,e).prev,H.call(this._map,e)}for(;(r=r.next)!==n;)if(dt.SameValueZero(r.key,e))return r.key=r.value=t,r.prev.next=r.next,r.next.prev=r.prev,this._size-=1,!0;return!1},clear:function(){o(this,"clear"),this._map=V?new V:null,this._size=0,this._storage=Bn();for(var e=this._head,n=e,r=n.next;(n=r)!==e;)n.key=n.value=t,r=n.next,n.next=n.prev=e;e.next=e.prev=e},keys:function(){return o(this,"keys"),new a(this,"key")},values:function(){return o(this,"values"),new a(this,"value")},entries:function(){return o(this,"entries"),new a(this,"key+value")},forEach:function(t){o(this,"forEach");for(var e=arguments.length>1?arguments[1]:null,r=this.entries(),i=r.next();!i.done;i=r.next())e?n(t,e,i.value[1],i.value[0],this):t(i.value[1],i.value[0],this)}}),Ot(r,r.entries),s}(),Set:function(){var t,e=function(t){return t._es6set&&void 0!==t._storage},r=function(t,n){if(!dt.TypeIsObject(t)||!e(t))throw new TypeError("Set.prototype."+n+" called on incompatible receiver "+dt.ToString(t))},i=function e(){if(!(this instanceof e))throw new TypeError('Constructor Set requires "new"');if(this&&this._es6set)throw new TypeError("Bad construction");var n=Pt(this,e,t,{_es6set:!0,"[[SetData]]":null,_storage:Bn()});if(!n._es6set)throw new TypeError("bad set");return arguments.length>0&&Gn(e,n,arguments[0]),n};t=i.prototype;var o=function(t){var e=t;if("^null"===e)return null;if("^undefined"!==e){var n=e.charAt(0);return"$"===n?O(e,1):"n"===n?+O(e,1):"b"===n?"btrue"===e:+e}},s=function(t){if(!t["[[SetData]]"]){var e=t["[[SetData]]"]=new Yn.Map;_(a(t._storage),(function(t){var n=o(t);e.set(n,n)})),t["[[SetData]]"]=e}t._storage=null};return $.getter(i.prototype,"size",(function(){return r(this,"size"),this._storage?a(this._storage).length:(s(this),this["[[SetData]]"].size)})),b(i.prototype,{has:function(t){var e;return r(this,"has"),this._storage&&null!==(e=Hn(t))?!!this._storage[e]:(s(this),this["[[SetData]]"].has(t))},add:function(t){var e;return r(this,"add"),this._storage&&null!==(e=Hn(t))?(this._storage[e]=!0,this):(s(this),this["[[SetData]]"].set(t,t),this)},delete:function(t){var e;if(r(this,"delete"),this._storage&&null!==(e=Hn(t))){var n=F(this._storage,e);return delete this._storage[e]&&n}return s(this),this["[[SetData]]"].delete(t)},clear:function(){r(this,"clear"),this._storage&&(this._storage=Bn()),this["[[SetData]]"]&&this["[[SetData]]"].clear()},values:function(){return r(this,"values"),s(this),this["[[SetData]]"].values()},entries:function(){return r(this,"entries"),s(this),this["[[SetData]]"].entries()},forEach:function(t){r(this,"forEach");var e=arguments.length>1?arguments[1]:null,i=this;s(i),this["[[SetData]]"].forEach((function(r,o){e?n(t,e,o,o,i):t(o,o,i)}))}}),v(i.prototype,"keys",i.prototype.values,!0),Ot(i.prototype,i.prototype.values),i}()};if(C.Map||C.Set){l((function(){return 2===new Map([[1,2]]).get(1)}))||(C.Map=function t(){if(!(this instanceof t))throw new TypeError('Constructor Map requires "new"');var e=new V;return arguments.length>0&&Wn(t,e,arguments[0]),delete e.constructor,Object.setPrototypeOf(e,C.Map.prototype),e},C.Map.prototype=x(V.prototype),v(C.Map.prototype,"constructor",C.Map,!0),$.preserveToString(C.Map,V));var Kn=new Map,Jn=((Nn=new Map([[1,0],[2,0],[3,0],[4,0]])).set(-0,Nn),Nn.get(0)===Nn&&Nn.get(-0)===Nn&&Nn.has(0)&&Nn.has(-0)),Qn=Kn.set(1,2)===Kn;Jn&&Qn||rt(Map.prototype,"set",(function(t,e){return n(G,this,0===t?0:t,e),this})),Jn||(b(Map.prototype,{get:function(t){return n(B,this,0===t?0:t)},has:function(t){return n(W,this,0===t?0:t)}},!0),$.preserveToString(Map.prototype.get,B),$.preserveToString(Map.prototype.has,W));var Xn=new Set,Zn=((Ln=Xn).delete(0),Ln.add(-0),!Ln.has(0)),tr=Xn.add(1)===Xn;if(!Zn||!tr){var er=Set.prototype.add;Set.prototype.add=function(t){return n(er,this,0===t?0:t),this},$.preserveToString(Set.prototype.add,er)}if(!Zn){var nr=Set.prototype.has;Set.prototype.has=function(t){return n(nr,this,0===t?0:t)},$.preserveToString(Set.prototype.has,nr);var rr=Set.prototype.delete;Set.prototype.delete=function(t){return n(rr,this,0===t?0:t)},$.preserveToString(Set.prototype.delete,rr)}var ir=k(C.Map,(function(t){var e=new t([]);return e.set(42,42),e instanceof t})),or=Object.setPrototypeOf&&!ir,ar=function(){try{return!(C.Map()instanceof C.Map)}catch(t){return t instanceof TypeError}}();0===C.Map.length&&!or&&ar||(C.Map=function t(){if(!(this instanceof t))throw new TypeError('Constructor Map requires "new"');var e=new V;return arguments.length>0&&Wn(t,e,arguments[0]),delete e.constructor,Object.setPrototypeOf(e,t.prototype),e},C.Map.prototype=V.prototype,v(C.Map.prototype,"constructor",C.Map,!0),$.preserveToString(C.Map,V));var sr=k(C.Set,(function(t){var e=new t([]);return e.add(42,42),e instanceof t})),cr=Object.setPrototypeOf&&!sr,lr=function(){try{return!(C.Set()instanceof C.Set)}catch(t){return t instanceof TypeError}}();if(0!==C.Set.length||cr||!lr){var ur=C.Set;C.Set=function t(){if(!(this instanceof t))throw new TypeError('Constructor Set requires "new"');var e=new ur;return arguments.length>0&&Gn(t,e,arguments[0]),delete e.constructor,Object.setPrototypeOf(e,t.prototype),e},C.Set.prototype=ur.prototype,v(C.Set.prototype,"constructor",C.Set,!0),$.preserveToString(C.Set,ur)}var dr=new C.Map,pr=!l((function(){return dr.keys().next().done}));if(("function"!=typeof C.Map.prototype.clear||0!==(new C.Set).size||0!==dr.size||"function"!=typeof C.Map.prototype.keys||"function"!=typeof C.Set.prototype.keys||"function"!=typeof C.Map.prototype.forEach||"function"!=typeof C.Set.prototype.forEach||u(C.Map)||u(C.Set)||"function"!=typeof dr.keys().next||pr||!ir)&&b(C,{Map:Yn.Map,Set:Yn.Set},!0),C.Set.prototype.keys!==C.Set.prototype.values&&v(C.Set.prototype,"keys",C.Set.prototype.values,!0),Ot(Object.getPrototypeOf((new C.Map).keys())),Ot(Object.getPrototypeOf((new C.Set).keys())),f&&"has"!==C.Set.prototype.has.name){var fr=C.Set.prototype.has;rt(C.Set.prototype,"has",(function(t){return n(fr,this,t)}))}}b(C,Yn),jt(C.Map),jt(C.Set)}var _r=function(t){if(!dt.TypeIsObject(t))throw new TypeError("target must be an object")},hr={apply:function(){return dt.Call(dt.Call,null,arguments)},construct:function(t,e){if(!dt.IsConstructor(t))throw new TypeError("First argument must be a constructor.");var n=arguments.length>2?arguments[2]:t;if(!dt.IsConstructor(n))throw new TypeError("new.target must be a constructor.");return dt.Construct(t,e,n,"internal")},deleteProperty:function(t,e){if(_r(t),p){var n=Object.getOwnPropertyDescriptor(t,e);if(n&&!n.configurable)return!1}return delete t[e]},has:function(t,e){return _r(t),e in t}};Object.getOwnPropertyNames&&Object.assign(hr,{ownKeys:function(t){_r(t);var e=Object.getOwnPropertyNames(t);return dt.IsCallable(Object.getOwnPropertySymbols)&&q(e,Object.getOwnPropertySymbols(t)),e}});var mr=function(t){return!c(t)};if(Object.preventExtensions&&Object.assign(hr,{isExtensible:function(t){return _r(t),Object.isExtensible(t)},preventExtensions:function(t){return _r(t),mr((function(){Object.preventExtensions(t)}))}}),p){var gr=function(t,e,n){var r=Object.getOwnPropertyDescriptor(t,e);if(!r){var i=Object.getPrototypeOf(t);if(null===i)return;return gr(i,e,n)}return"value"in r?r.value:r.get?dt.Call(r.get,n):void 0},vr=function(t,e,r,i){var o=Object.getOwnPropertyDescriptor(t,e);if(!o){var a=Object.getPrototypeOf(t);if(null!==a)return vr(a,e,r,i);o={value:void 0,writable:!0,enumerable:!0,configurable:!0}}return"value"in o?!!o.writable&&!!dt.TypeIsObject(i)&&(Object.getOwnPropertyDescriptor(i,e)?st.defineProperty(i,e,{value:r}):st.defineProperty(i,e,{value:r,writable:!0,enumerable:!0,configurable:!0})):!!o.set&&(n(o.set,i,r),!0)};Object.assign(hr,{defineProperty:function(t,e,n){return _r(t),mr((function(){Object.defineProperty(t,e,n)}))},getOwnPropertyDescriptor:function(t,e){return _r(t),Object.getOwnPropertyDescriptor(t,e)},get:function(t,e){return _r(t),gr(t,e,arguments.length>2?arguments[2]:t)},set:function(t,e,n){return _r(t),vr(t,e,n,arguments.length>3?arguments[3]:t)}})}if(Object.getPrototypeOf){var br=Object.getPrototypeOf;hr.getPrototypeOf=function(t){return _r(t),br(t)}}if(Object.setPrototypeOf&&hr.getPrototypeOf){var yr=function(t,e){for(var n=e;n;){if(t===n)return!0;n=hr.getPrototypeOf(n)}return!1};Object.assign(hr,{setPrototypeOf:function(t,e){if(_r(t),null!==e&&!dt.TypeIsObject(e))throw new TypeError("proto must be an object or null");return e===st.getPrototypeOf(t)||!(st.isExtensible&&!st.isExtensible(t))&&!yr(t,e)&&(Object.setPrototypeOf(t,e),!0)}})}var wr=function(t,e){dt.IsCallable(C.Reflect[t])?l((function(){return C.Reflect[t](1),C.Reflect[t](NaN),C.Reflect[t](!0),!0}))&&rt(C.Reflect,t,e):v(C.Reflect,t,e)};Object.keys(hr).forEach((function(t){wr(t,hr[t])}));var $r=C.Reflect.getPrototypeOf;if(f&&$r&&"getPrototypeOf"!==$r.name&&rt(C.Reflect,"getPrototypeOf",(function(t){return n($r,C.Reflect,t)})),C.Reflect.setPrototypeOf&&l((function(){return C.Reflect.setPrototypeOf(1,{}),!0}))&&rt(C.Reflect,"setPrototypeOf",hr.setPrototypeOf),C.Reflect.defineProperty&&(l((function(){var t=!C.Reflect.defineProperty(1,"test",{value:1}),e="function"!=typeof Object.preventExtensions||!C.Reflect.defineProperty(Object.preventExtensions({}),"test",{});return t&&e}))||rt(C.Reflect,"defineProperty",hr.defineProperty)),C.Reflect.construct&&(l((function(){var t=function(){};return C.Reflect.construct((function(){}),[],t)instanceof t}))||rt(C.Reflect,"construct",hr.construct)),"Invalid Date"!==String(new Date(NaN))){var xr=Date.prototype.toString,kr=function(){var t=+this;return t!=t?"Invalid Date":dt.Call(xr,this)};rt(Date.prototype,"toString",kr)}var Cr={anchor:function(t){return dt.CreateHTML(this,"a","name",t)},big:function(){return dt.CreateHTML(this,"big","","")},blink:function(){return dt.CreateHTML(this,"blink","","")},bold:function(){return dt.CreateHTML(this,"b","","")},fixed:function(){return dt.CreateHTML(this,"tt","","")},fontcolor:function(t){return dt.CreateHTML(this,"font","color",t)},fontsize:function(t){return dt.CreateHTML(this,"font","size",t)},italics:function(){return dt.CreateHTML(this,"i","","")},link:function(t){return dt.CreateHTML(this,"a","href",t)},small:function(){return dt.CreateHTML(this,"small","","")},strike:function(){return dt.CreateHTML(this,"strike","","")},sub:function(){return dt.CreateHTML(this,"sub","","")},sup:function(){return dt.CreateHTML(this,"sup","","")}};_(Object.keys(Cr),(function(t){var e=String.prototype[t],r=!1;if(dt.IsCallable(e)){var i=n(e,"",' " '),o=j([],i.match(/"/g)).length;r=i!==i.toLowerCase()||o>2}else r=!0;r&&rt(String.prototype,t,Cr[t])}));var Sr=function(){if(!it)return!1;var t="object"==typeof JSON&&"function"==typeof JSON.stringify?JSON.stringify:null;if(!t)return!1;if(void 0!==t(Y()))return!0;if("[null]"!==t([Y()]))return!0;var e={a:Y()};return e[Y()]=!0,"{}"!==t(e)}(),Ar=l((function(){return!it||"{}"===JSON.stringify(Object(Y()))&&"[{}]"===JSON.stringify([Object(Y())])}));if(Sr||!Ar){var Er=JSON.stringify;rt(JSON,"stringify",(function(t){if("symbol"!=typeof t){var e;arguments.length>1&&(e=arguments[1]);var r=[t];if(o(e))r.push(e);else{var i=dt.IsCallable(e)?e:null,a=function(t,e){var r=i?n(i,this,t,e):e;if("symbol"!=typeof r)return nt.symbol(r)?Te({})(r):r};r.push(a)}return arguments.length>2&&r.push(arguments[2]),Er.apply(this,r)}}))}return C},void 0===(a="function"==typeof o?o.call(e,n,e,t):o)||(t.exports=a)}).call(this,n(1),n(86))},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){var r=function(){"use strict";var t=Math.floor(1000001*Math.random()),e={};function n(t){return Array.isArray?Array.isArray(t):-1!=t.constructor.toString().indexOf("Array")}var r={},i=function(t){try{var n=JSON.parse(t.data);if("object"!=typeof n||null===n)throw"malformed"}catch(t){return}var i,o,a,s=t.source,c=t.origin;if("string"==typeof n.method){var l=n.method.split("::");2==l.length?(i=l[0],a=l[1]):a=n.method}if(void 0!==n.id&&(o=n.id),"string"==typeof a){var u=!1;if(e[c]&&e[c][i])for(var d=0;d<e[c][i].length;d++)if(e[c][i][d].win===s){e[c][i][d].handler(c,a,n),u=!0;break}if(!u&&e["*"]&&e["*"][i])for(d=0;d<e["*"][i].length;d++)if(e["*"][i][d].win===s){e["*"][i][d].handler(c,a,n);break}}else void 0!==o&&r[o]&&r[o](c,a,n)};return window.addEventListener?window.addEventListener("message",i,!1):window.attachEvent&&window.attachEvent("onmessage",i),{build:function(i){var o=function(t){if(i.debugOutput&&window.console&&window.console.log){try{"string"!=typeof t&&(t=JSON.stringify(t))}catch(t){}console.log("["+c+"] "+t)}};if(!window.postMessage)throw"jschannel cannot run this browser, no postMessage";if(!window.JSON||!window.JSON.stringify||!window.JSON.parse)throw"jschannel cannot run this browser, no JSON parsing/serialization";if("object"!=typeof i)throw"Channel build invoked without a proper object argument";if(!i.window||!i.window.postMessage)throw"Channel.build() called without a valid window argument";if(window===i.window)throw"target window is same as present window -- not allowed";var a,s=!1;"string"==typeof i.origin&&("*"===i.origin?s=!0:null!==(a=i.origin.match(/^https?:\/\/(?:[-a-zA-Z0-9_\.])+(?::\d+)?/))&&(i.origin=a[0].toLowerCase(),s=!0));if(!s)throw"Channel.build() called with an invalid origin";if(void 0!==i.scope){if("string"!=typeof i.scope)throw"scope, when specified, must be a string";if(i.scope.split("::").length>1)throw"scope may not contain double colons: '::'"}var c=function(){for(var t="",e="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",n=0;n<5;n++)t+=e.charAt(Math.floor(Math.random()*e.length));return t}(),l={},u={},d={},p=!1,f=[],_=function(t,e,a){if("function"==typeof i.gotMessageObserver)try{i.gotMessageObserver(t,a)}catch(t){o("gotMessageObserver() raised an exception: "+t.toString())}if(a.id&&e){if(l[e]){var s=function(t,e,n){var r=!1,i=!1;return{origin:e,invoke:function(e,r){if(!d[t])throw"attempting to invoke a callback of a nonexistent transaction: "+t;for(var i=!1,o=0;o<n.length;o++)if(e===n[o]){i=!0;break}if(!i)throw"request supports no such callback '"+e+"'";m({id:t,callback:e,params:r})},error:function(e,n){if(i=!0,!d[t])throw"error called for nonexistent message: "+t;delete d[t],m({id:t,error:e,message:n})},complete:function(e){if(i=!0,!d[t])throw"complete called for nonexistent message: "+t;delete d[t],m({id:t,result:e})},delayReturn:function(t){return"boolean"==typeof t&&(r=!0===t),r},completed:function(){return i}}}(a.id,t,a.callbacks?a.callbacks:[]);d[a.id]={};try{if(a.callbacks&&n(a.callbacks)&&a.callbacks.length>0)for(var c=0;c<a.callbacks.length;c++){for(var p=a.callbacks[c],f=a.params,_=p.split("/"),h=0;h<_.length-1;h++){var g=_[h];"object"!=typeof f[g]&&(f[g]={}),f=f[g]}f[_[_.length-1]]=function(){var t=p;return function(e){return s.invoke(t,e)}}()}var v=l[e](s,a.params);s.delayReturn()||s.completed()||s.complete(v)}catch(t){var b="runtime_error",y=null;if("string"==typeof t?y=t:"object"==typeof t&&(t&&n(t)&&2==t.length?(b=t[0],y=t[1]):"string"==typeof t.error&&(b=t.error,t.message?"string"==typeof t.message?y=t.message:t=t.message:y="")),null===y)try{void 0===(y=JSON.stringify(t))&&(y=t.toString())}catch(e){y=t.toString()}s.error(b,y)}}}else a.id&&a.callback?u[a.id]&&u[a.id].callbacks&&u[a.id].callbacks[a.callback]?u[a.id].callbacks[a.callback](a.params):o("ignoring invalid callback, id:"+a.id+" ("+a.callback+")"):a.id?u[a.id]?(a.error?(0,u[a.id].error)(a.error,a.message):void 0!==a.result?(0,u[a.id].success)(a.result):(0,u[a.id].success)(),delete u[a.id],delete r[a.id]):o("ignoring invalid response: "+a.id):e&&l[e]&&l[e]({origin:t},a.params)};!function(t,n,r,i){function o(e){for(var n=0;n<e.length;n++)if(e[n].win===t)return!0;return!1}var a=!1;if("*"===n){for(var s in e)if(e.hasOwnProperty(s)&&"*"!==s&&"object"==typeof e[s][r]&&(a=o(e[s][r])))break}else e["*"]&&e["*"][r]&&(a=o(e["*"][r])),!a&&e[n]&&e[n][r]&&(a=o(e[n][r]));if(a)throw"A channel is already bound to the same window which overlaps with origin '"+n+"' and has scope '"+r+"'";"object"!=typeof e[n]&&(e[n]={}),"object"!=typeof e[n][r]&&(e[n][r]=[]),e[n][r].push({win:t,handler:i})}(i.window,i.origin,"string"==typeof i.scope?i.scope:"",_);var h=function(t){return"string"==typeof i.scope&&i.scope.length&&(t=[i.scope,t].join("::")),t},m=function(t,e){if(!t)throw"postMessage called with null message";if(o((p?"post  ":"queue ")+" message: "+JSON.stringify(t)),e||p){if("function"==typeof i.postMessageObserver)try{i.postMessageObserver(i.origin,t)}catch(t){o("postMessageObserver() raised an exception: "+t.toString())}i.window.postMessage(JSON.stringify(t),i.origin)}else f.push(t)},g={unbind:function(t){if(l[t]){if(!delete l[t])throw"can't delete method: "+t;return!0}return!1},bind:function(t,e){if(!t||"string"!=typeof t)throw"'method' argument to bind must be string";if(!e||"function"!=typeof e)throw"callback missing from bind params";if(l[t])throw"method '"+t+"' is already bound!";return l[t]=e,this},call:function(e){if(!e)throw"missing arguments to call function";if(!e.method||"string"!=typeof e.method)throw"'method' argument to call must be string";if(!e.success||"function"!=typeof e.success)throw"'success' callback missing from call";var n={},i=[],o=[],a=function(t,e){if(o.indexOf(e)>=0)throw"params cannot be a recursive data structure";if(o.push(e),"object"==typeof e)for(var r in e)if(e.hasOwnProperty(r)){var s=t+(t.length?"/":"")+r;"function"==typeof e[r]?(n[s]=e[r],i.push(s),delete e[r]):"object"==typeof e[r]&&null!==e[r]&&a(s,e[r])}};a("",e.params);var s,c,l,d={id:t,method:h(e.method),params:e.params};i.length&&(d.callbacks=i),e.timeout&&(s=t,c=e.timeout,l=h(e.method),window.setTimeout((function(){if(u[s]){var t="timeout ("+c+"ms) exceeded on method '"+l+"'";(0,u[s].error)("timeout_error",t),delete u[s],delete r[s]}}),c)),u[t]={callbacks:n,error:e.error,success:e.success},r[t]=_,t++,m(d)},notify:function(t){if(!t)throw"missing arguments to notify function";if(!t.method||"string"!=typeof t.method)throw"'method' argument to notify must be string";m({method:h(t.method),params:t.params})},destroy:function(){!function(t,n,r){for(var i=e[n][r],o=0;o<i.length;o++)i[o].win===t&&i.splice(o,1);0===e[n][r].length&&delete e[n][r]}(i.window,i.origin,"string"==typeof i.scope?i.scope:""),window.removeEventListener?window.removeEventListener("message",_,!1):window.detachEvent&&window.detachEvent("onmessage",_),p=!1,l={},d={},u={},i.origin=null,f=[],o("channel destroyed"),c=""}};return g.bind("__ready",(function(t,e){if(o("ready msg received"),p)throw"received ready message while in ready state.  help!";for(c+="ping"===e?"-R":"-L",g.unbind("__ready"),p=!0,o("ready msg accepted."),"ping"===e&&g.notify({method:"__ready",params:"pong"});f.length;)m(f.pop());"function"==typeof i.onReady&&i.onReady(g)})),setTimeout((function(){m({method:h("__ready"),params:"ping"},!0)}),0),g}}}();t.exports=r},,function(t,e){t.exports=window.jQuery},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e){window.performance&&performance.mark&&window.performance.mark("bundle_load_start")},function(t,e,n){(function(t){!function t(e,n,r){function i(a,s){if(!n[a]){if(!e[a]){if(o)return o(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[a]={exports:{}};e[a][0].call(l.exports,(function(t){var n=e[a][1][t];return i(n||t)}),l,l.exports,t,e,n,r)}return n[a].exports}for(var o=!1,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(t,e,n){"use strict";var r=t("./Array.prototype");e.exports={prototype:r,shim:function(){r.shim()}}},{"./Array.prototype":3}],2:[function(t,e,n){"use strict";e.exports=t("array-includes")},{"array-includes":14}],3:[function(t,e,n){"use strict";var r=t("./Array.prototype.includes");e.exports={includes:r,shim:function(){r.shim()}}},{"./Array.prototype.includes":2}],4:[function(t,e,n){"use strict";var r=t("object.getownpropertydescriptors"),i=t("object.entries"),o=t("object.values");e.exports={entries:i,getOwnPropertyDescriptors:r,shim:function(){r.shim(),i.shim(),o.shim()},values:o}},{"object.entries":38,"object.getownpropertydescriptors":64,"object.values":89}],5:[function(t,e,n){"use strict";var r=t("./String.prototype");e.exports={prototype:r,shim:function(){r.shim()}}},{"./String.prototype":7}],6:[function(t,e,n){"use strict";e.exports=t("string-at")},{"string-at":114}],7:[function(t,e,n){"use strict";var r=t("./String.prototype.at"),i=t("./String.prototype.padStart"),o=t("./String.prototype.padEnd"),a=t("./String.prototype.trimLeft"),s=t("./String.prototype.trimRight");e.exports={at:r,padStart:i,padEnd:o,trimLeft:a,trimRight:s,shim:function(){r.shim(),i.shim(),o.shim(),a.shim(),s.shim()}}},{"./String.prototype.at":6,"./String.prototype.padEnd":8,"./String.prototype.padStart":9,"./String.prototype.trimLeft":10,"./String.prototype.trimRight":11}],8:[function(t,e,n){"use strict";e.exports=t("string.prototype.padend")},{"string.prototype.padend":137}],9:[function(t,e,n){"use strict";e.exports=t("string.prototype.padstart")},{"string.prototype.padstart":162}],10:[function(t,e,n){"use strict";e.exports=t("string.prototype.trimleft")},{"string.prototype.trimleft":187}],11:[function(t,e,n){"use strict";e.exports=t("string.prototype.trimright")},{"string.prototype.trimright":197}],12:[function(t,e,n){"use strict";var r=t("./Array"),i=t("./Object"),o=t("./String");e.exports={Array:r,Object:i,String:o,shim:function(){r.shim(),i.shim(),o.shim()}}},{"./Array":1,"./Object":4,"./String":5}],13:[function(e,n,r){(function(t){"use strict";var r=e("es-abstract/es6"),i=Number.isNaN||function(t){return t!=t},o=Number.isFinite||function(e){return"number"==typeof e&&t.isFinite(e)},a=Array.prototype.indexOf;n.exports=function(t){var e=arguments.length>1?r.ToInteger(arguments[1]):0;if(a&&!i(t)&&o(e)&&void 0!==t)return a.apply(this,arguments)>-1;var n=r.ToObject(this),s=r.ToLength(n.length);if(0===s)return!1;for(var c=e>=0?e:Math.max(0,s+e);c<s;){if(r.SameValueZero(t,n[c]))return!0;c+=1}return!1}}).call(this,void 0!==t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"es-abstract/es6":17}],14:[function(t,e,n){"use strict";var r=t("define-properties"),i=t("es-abstract/es6"),o=t("./implementation"),a=t("./polyfill"),s=a(),c=t("./shim"),l=Array.prototype.slice,u=function(t,e){return i.RequireObjectCoercible(t),s.apply(t,l.call(arguments,1))};r(u,{implementation:o,getPolyfill:a,shim:c}),e.exports=u},{"./implementation":13,"./polyfill":35,"./shim":36,"define-properties":15,"es-abstract/es6":17}],15:[function(t,e,n){"use strict";var r=t("object-keys"),i=t("foreach"),o="function"==typeof Symbol&&"symbol"==typeof Symbol(),a=Object.prototype.toString,s=Object.defineProperty&&function(){var t={};try{for(var e in Object.defineProperty(t,"x",{enumerable:!1,value:t}),t)return!1;return t.x===t}catch(t){return!1}}(),c=function(t,e,n,r){var i;(!(e in t)||"function"==typeof(i=r)&&"[object Function]"===a.call(i)&&r())&&(s?Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:n,writable:!0}):t[e]=n)},l=function(t,e){var n=arguments.length>2?arguments[2]:{},a=r(e);o&&(a=a.concat(Object.getOwnPropertySymbols(e))),i(a,(function(r){c(t,r,e[r],n[r])}))};l.supportsDescriptors=!!s,e.exports=l},{foreach:26,"object-keys":33}],16:[function(t,e,n){"use strict";var r=Number.isNaN||function(t){return t!=t},i=t("./helpers/isFinite"),o=t("./helpers/sign"),a=t("./helpers/mod"),s=t("is-callable"),c={ToPrimitive:t("es-to-primitive/es5"),ToBoolean:function(t){return Boolean(t)},ToNumber:function(t){return Number(t)},ToInteger:function(t){var e=this.ToNumber(t);return r(e)?0:0!==e&&i(e)?o(e)*Math.floor(Math.abs(e)):e},ToInt32:function(t){return this.ToNumber(t)>>0},ToUint32:function(t){return this.ToNumber(t)>>>0},ToUint16:function(t){var e=this.ToNumber(t);if(r(e)||0===e||!i(e))return 0;var n=o(e)*Math.floor(Math.abs(e));return a(n,65536)},ToString:function(t){return String(t)},ToObject:function(t){return this.CheckObjectCoercible(t),Object(t)},CheckObjectCoercible:function(t,e){if(null==t)throw new TypeError(e||"Cannot call method on "+t);return t},IsCallable:s,SameValue:function(t,e){return t===e?0!==t||1/t==1/e:r(t)&&r(e)}};e.exports=c},{"./helpers/isFinite":19,"./helpers/mod":21,"./helpers/sign":22,"es-to-primitive/es5":23,"is-callable":29}],17:[function(t,e,n){"use strict";var r=Object.prototype.toString,i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator,o=i?Symbol.prototype.toString:r,a=Number.isNaN||function(t){return t!=t},s=t("./helpers/isFinite"),c=Number.MAX_SAFE_INTEGER||Math.pow(2,53)-1,l=t("./helpers/assign"),u=t("./helpers/sign"),d=t("./helpers/mod"),p=t("./helpers/isPrimitive"),f=t("es-to-primitive/es6"),_=parseInt,h=t("function-bind"),m=h.call(Function.call,String.prototype.slice),g=h.call(Function.call,RegExp.prototype.test,/^0b[01]+$/i),v=h.call(Function.call,RegExp.prototype.test,/^0o[0-7]+$/i),b=["","",""].join(""),y=new RegExp("["+b+"]","g"),w=h.call(Function.call,RegExp.prototype.test,y),$=h.call(Function.call,RegExp.prototype.test,/^[\-\+]0x[0-9a-f]+$/i),x=["\t\n\v\f\r ","\u2028","\u2029\ufeff"].join(""),k=new RegExp("(^["+x+"]+)|(["+x+"]+$)","g"),C=h.call(Function.call,String.prototype.replace),S=t("./es5"),A=t("is-regex"),E=l(l({},S),{Call:function(t,e){var n=arguments.length>2?arguments[2]:[];if(!this.IsCallable(t))throw new TypeError(t+" is not a function");return t.apply(e,n)},ToPrimitive:f,ToNumber:function(t){var e=p(t)?t:f(t,"number");if("symbol"==typeof e)throw new TypeError("Cannot convert a Symbol value to a number");if("string"==typeof e){if(g(e))return this.ToNumber(_(m(e,2),2));if(v(e))return this.ToNumber(_(m(e,2),8));if(w(e)||$(e))return NaN;var n=function(t){return C(t,k,"")}(e);if(n!==e)return this.ToNumber(n)}return Number(e)},ToInt16:function(t){var e=this.ToUint16(t);return e>=32768?e-65536:e},ToInt8:function(t){var e=this.ToUint8(t);return e>=128?e-256:e},ToUint8:function(t){var e=this.ToNumber(t);if(a(e)||0===e||!s(e))return 0;var n=u(e)*Math.floor(Math.abs(e));return d(n,256)},ToUint8Clamp:function(t){var e=this.ToNumber(t);if(a(e)||e<=0)return 0;if(e>=255)return 255;var n=Math.floor(t);return n+.5<e?n+1:e<n+.5?n:n%2!=0?n+1:n},ToString:function(t){if("symbol"==typeof t)throw new TypeError("Cannot convert a Symbol value to a string");return String(t)},ToObject:function(t){return this.RequireObjectCoercible(t),Object(t)},ToPropertyKey:function(t){var e=this.ToPrimitive(t,String);return"symbol"==typeof e?o.call(e):this.ToString(e)},ToLength:function(t){var e=this.ToInteger(t);return e<=0?0:e>c?c:e},CanonicalNumericIndexString:function(t){if("[object String]"!==r.call(t))throw new TypeError("must be a string");if("-0"===t)return-0;var e=this.ToNumber(t);return this.SameValue(this.ToString(e),t)?e:void 0},RequireObjectCoercible:S.CheckObjectCoercible,IsArray:Array.isArray||function(t){return"[object Array]"===r.call(t)},IsConstructor:function(t){return this.IsCallable(t)},IsExtensible:function(t){return!Object.preventExtensions||!p(t)&&Object.isExtensible(t)},IsInteger:function(t){if("number"!=typeof t||a(t)||!s(t))return!1;var e=Math.abs(t);return Math.floor(e)===e},IsPropertyKey:function(t){return"string"==typeof t||"symbol"==typeof t},IsRegExp:function(t){if(!t||"object"!=typeof t)return!1;if(i){var e=RegExp[Symbol.match];if(void 0!==e)return S.ToBoolean(e)}return A(t)},SameValueZero:function(t,e){return t===e||a(t)&&a(e)}});delete E.CheckObjectCoercible,e.exports=E},{"./es5":16,"./helpers/assign":18,"./helpers/isFinite":19,"./helpers/isPrimitive":20,"./helpers/mod":21,"./helpers/sign":22,"es-to-primitive/es6":24,"function-bind":28,"is-regex":31}],18:[function(t,e,n){var r=Object.prototype.hasOwnProperty;e.exports=Object.assign||function(t,e){for(var n in e)r.call(e,n)&&(t[n]=e[n]);return t}},{}],19:[function(t,e,n){var r=Number.isNaN||function(t){return t!=t};e.exports=Number.isFinite||function(t){return"number"==typeof t&&!r(t)&&t!==1/0&&t!==-1/0}},{}],20:[function(t,e,n){e.exports=function(t){return null===t||"function"!=typeof t&&"object"!=typeof t}},{}],21:[function(t,e,n){e.exports=function(t,e){var n=t%e;return Math.floor(n>=0?n:n+e)}},{}],22:[function(t,e,n){e.exports=function(t){return t>=0?1:-1}},{}],23:[function(t,e,n){"use strict";var r=Object.prototype.toString,i=t("./helpers/isPrimitive"),o=t("is-callable"),a=function(t,e){var n=e||("[object Date]"===r.call(t)?String:Number);if(n===String||n===Number){var a,s,c=n===String?["toString","valueOf"]:["valueOf","toString"];for(s=0;s<c.length;++s)if(o(t[c[s]])&&(a=t[c[s]](),i(a)))return a;throw new TypeError("No default value")}throw new TypeError("invalid [[DefaultValue]] hint supplied")};e.exports=function(t,e){return i(t)?t:a(t,e)}},{"./helpers/isPrimitive":25,"is-callable":29}],24:[function(t,e,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator,i=t("./helpers/isPrimitive"),o=t("is-callable"),a=t("is-date-object"),s=t("is-symbol"),c=function(t,e){if(null==t)throw new TypeError("Cannot call method on "+t);if("string"!=typeof e||"number"!==e&&"string"!==e)throw new TypeError('hint must be "string" or "number"');var n,r,a,s="string"===e?["toString","valueOf"]:["valueOf","toString"];for(a=0;a<s.length;++a)if(n=t[s[a]],o(n)&&(r=n.call(t),i(r)))return r;throw new TypeError("No default value")},l=function(t,e){var n=t[e];if(null!=n){if(!o(n))throw new TypeError(n+" returned for property "+e+" of object "+t+" is not a function");return n}};e.exports=function(t,e){if(i(t))return t;var n,o="default";if(arguments.length>1&&(e===String?o="string":e===Number&&(o="number")),r&&(Symbol.toPrimitive?n=l(t,Symbol.toPrimitive):s(t)&&(n=Symbol.prototype.valueOf)),void 0!==n){var u=n.call(t,o);if(i(u))return u;throw new TypeError("unable to convert exotic object to primitive")}return"default"===o&&(a(t)||s(t))&&(o="string"),c(t,"default"===o?"number":o)}},{"./helpers/isPrimitive":25,"is-callable":29,"is-date-object":30,"is-symbol":32}],25:[function(t,e,n){arguments[4][20][0].apply(n,arguments)},{dup:20}],26:[function(t,e,n){var r=Object.prototype.hasOwnProperty,i=Object.prototype.toString;e.exports=function(t,e,n){if("[object Function]"!==i.call(e))throw new TypeError("iterator must be a function");var o=t.length;if(o===+o)for(var a=0;a<o;a++)e.call(n,t[a],a,t);else for(var s in t)r.call(t,s)&&e.call(n,t[s],s,t)}},{}],27:[function(t,e,n){var r="Function.prototype.bind called on incompatible ",i=Array.prototype.slice,o=Object.prototype.toString,a="[object Function]";e.exports=function(t){var e=this;if("function"!=typeof e||o.call(e)!==a)throw new TypeError(r+e);for(var n,s=i.call(arguments,1),c=function(){if(this instanceof n){var r=e.apply(this,s.concat(i.call(arguments)));return Object(r)===r?r:this}return e.apply(t,s.concat(i.call(arguments)))},l=Math.max(0,e.length-s.length),u=[],d=0;d<l;d++)u.push("$"+d);if(n=Function("binder","return function ("+u.join(",")+"){ return binder.apply(this,arguments); }")(c),e.prototype){var p=function(){};p.prototype=e.prototype,n.prototype=new p,p.prototype=null}return n}},{}],28:[function(t,e,n){var r=t("./implementation");e.exports=Function.prototype.bind||r},{"./implementation":27}],29:[function(t,e,n){"use strict";var r=Function.prototype.toString,i=/^\s*class /,o=function(t){try{var e=r.call(t).replace(/\/\/.*\n/g,"").replace(/\/\*[.\s\S]*\*\//g,"").replace(/\n/gm," ").replace(/ {2}/g," ");return i.test(e)}catch(t){return!1}},a=Object.prototype.toString,s="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;e.exports=function(t){if(!t)return!1;if("function"!=typeof t&&"object"!=typeof t)return!1;if(s)return function(t){try{return!o(t)&&(r.call(t),!0)}catch(t){return!1}}(t);if(o(t))return!1;var e=a.call(t);return"[object Function]"===e||"[object GeneratorFunction]"===e}},{}],30:[function(t,e,n){"use strict";var r=Date.prototype.getDay,i=Object.prototype.toString,o="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;e.exports=function(t){return"object"==typeof t&&null!==t&&(o?function(t){try{return r.call(t),!0}catch(t){return!1}}(t):"[object Date]"===i.call(t))}},{}],31:[function(t,e,n){"use strict";var r=RegExp.prototype.exec,i=Object.prototype.toString,o="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;e.exports=function(t){return"object"==typeof t&&(o?function(t){try{return r.call(t),!0}catch(t){return!1}}(t):"[object RegExp]"===i.call(t))}},{}],32:[function(t,e,n){"use strict";var r=Object.prototype.toString;if("function"==typeof Symbol&&"symbol"==typeof Symbol()){var i=Symbol.prototype.toString,o=/^Symbol\(.*\)$/;e.exports=function(t){if("symbol"==typeof t)return!0;if("[object Symbol]"!==r.call(t))return!1;try{return function(t){return"symbol"==typeof t.valueOf()&&o.test(i.call(t))}(t)}catch(t){return!1}}}else e.exports=function(t){return!1}},{}],33:[function(t,e,n){"use strict";var r=Object.prototype.hasOwnProperty,i=Object.prototype.toString,o=Array.prototype.slice,a=t("./isArguments"),s=!{toString:null}.propertyIsEnumerable("toString"),c=function(){}.propertyIsEnumerable("prototype"),l=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],u=function(t){var e=t.constructor;return e&&e.prototype===t},d={$console:!0,$frame:!0,$frameElement:!0,$frames:!0,$parent:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},p=function(){if("undefined"==typeof window)return!1;for(var t in window)try{if(!d["$"+t]&&r.call(window,t)&&null!==window[t]&&"object"==typeof window[t])try{u(window[t])}catch(t){return!0}}catch(t){return!0}return!1}(),f=function(t){var e=null!==t&&"object"==typeof t,n="[object Function]"===i.call(t),o=a(t),d=e&&"[object String]"===i.call(t),f=[];if(!e&&!n&&!o)throw new TypeError("Object.keys called on a non-object");var _=c&&n;if(d&&t.length>0&&!r.call(t,0))for(var h=0;h<t.length;++h)f.push(String(h));if(o&&t.length>0)for(var m=0;m<t.length;++m)f.push(String(m));else for(var g in t)_&&"prototype"===g||!r.call(t,g)||f.push(String(g));if(s)for(var v=function(t){if("undefined"==typeof window||!p)return u(t);try{return u(t)}catch(t){return!1}}(t),b=0;b<l.length;++b)v&&"constructor"===l[b]||!r.call(t,l[b])||f.push(l[b]);return f};f.shim=function(){if(Object.keys){var t=function(){return 2===(Object.keys(arguments)||"").length}(1,2);if(!t){var e=Object.keys;Object.keys=function(t){return a(t)?e(o.call(t)):e(t)}}}else Object.keys=f;return Object.keys||f},e.exports=f},{"./isArguments":34}],34:[function(t,e,n){"use strict";var r=Object.prototype.toString;e.exports=function(t){var e=r.call(t),n="[object Arguments]"===e;return n||(n="[object Array]"!==e&&null!==t&&"object"==typeof t&&"number"==typeof t.length&&t.length>=0&&"[object Function]"===r.call(t.callee)),n}},{}],35:[function(t,e,n){"use strict";var r=t("./implementation");e.exports=function(){return Array.prototype.includes||r}},{"./implementation":13}],36:[function(t,e,n){"use strict";var r=t("define-properties"),i=t("./polyfill");e.exports=function(){var t=i();return Array.prototype.includes!==t&&r(Array.prototype,{includes:t}),t}},{"./polyfill":35,"define-properties":15}],37:[function(t,e,n){"use strict";var r=t("es-abstract/es7"),i=t("has"),o=t("function-bind").call(Function.call,Object.prototype.propertyIsEnumerable);e.exports=function(t){var e=r.RequireObjectCoercible(t),n=[];for(var a in e)i(e,a)&&o(e,a)&&n.push([a,e[a]]);return n}},{"es-abstract/es7":42,"function-bind":53,has:54}],38:[function(t,e,n){"use strict";var r=t("define-properties"),i=t("./implementation");r(i,{getPolyfill:t("./polyfill"),implementation:i,shim:t("./shim")}),e.exports=i},{"./implementation":37,"./polyfill":61,"./shim":62,"define-properties":39}],39:[function(t,e,n){arguments[4][15][0].apply(n,arguments)},{dup:15,foreach:51,"object-keys":59}],40:[function(t,e,n){arguments[4][16][0].apply(n,arguments)},{"./helpers/isFinite":44,"./helpers/mod":46,"./helpers/sign":47,dup:16,"es-to-primitive/es5":48,"is-callable":55}],41:[function(t,e,n){arguments[4][17][0].apply(n,arguments)},{"./es5":40,"./helpers/assign":43,"./helpers/isFinite":44,"./helpers/isPrimitive":45,"./helpers/mod":46,"./helpers/sign":47,dup:17,"es-to-primitive/es6":49,"function-bind":53,"is-regex":57}],42:[function(t,e,n){"use strict";var r=t("./es6"),i=t("./helpers/assign")(r,{SameValueNonNumber:function(t,e){if("number"==typeof t||typeof t!=typeof e)throw new TypeError("SameValueNonNumber requires two non-number values of the same type.");return this.SameValue(t,e)}});e.exports=i},{"./es6":41,"./helpers/assign":43}],43:[function(t,e,n){arguments[4][18][0].apply(n,arguments)},{dup:18}],44:[function(t,e,n){arguments[4][19][0].apply(n,arguments)},{dup:19}],45:[function(t,e,n){arguments[4][20][0].apply(n,arguments)},{dup:20}],46:[function(t,e,n){arguments[4][21][0].apply(n,arguments)},{dup:21}],47:[function(t,e,n){arguments[4][22][0].apply(n,arguments)},{dup:22}],48:[function(t,e,n){arguments[4][23][0].apply(n,arguments)},{"./helpers/isPrimitive":50,dup:23,"is-callable":55}],49:[function(t,e,n){arguments[4][24][0].apply(n,arguments)},{"./helpers/isPrimitive":50,dup:24,"is-callable":55,"is-date-object":56,"is-symbol":58}],50:[function(t,e,n){arguments[4][20][0].apply(n,arguments)},{dup:20}],51:[function(t,e,n){arguments[4][26][0].apply(n,arguments)},{dup:26}],52:[function(t,e,n){arguments[4][27][0].apply(n,arguments)},{dup:27}],53:[function(t,e,n){arguments[4][28][0].apply(n,arguments)},{"./implementation":52,dup:28}],54:[function(t,e,n){var r=t("function-bind");e.exports=r.call(Function.call,Object.prototype.hasOwnProperty)},{"function-bind":53}],55:[function(t,e,n){arguments[4][29][0].apply(n,arguments)},{dup:29}],56:[function(t,e,n){arguments[4][30][0].apply(n,arguments)},{dup:30}],57:[function(t,e,n){arguments[4][31][0].apply(n,arguments)},{dup:31}],58:[function(t,e,n){arguments[4][32][0].apply(n,arguments)},{dup:32}],59:[function(t,e,n){arguments[4][33][0].apply(n,arguments)},{"./isArguments":60,dup:33}],60:[function(t,e,n){arguments[4][34][0].apply(n,arguments)},{dup:34}],61:[function(t,e,n){"use strict";var r=t("./implementation");e.exports=function(){return"function"==typeof Object.entries?Object.entries:r}},{"./implementation":37}],62:[function(t,e,n){"use strict";var r=t("./polyfill"),i=t("define-properties");e.exports=function(){var t=r();return i(Object,{entries:t},{entries:function(){return Object.entries!==t}}),t}},{"./polyfill":61,"define-properties":39}],63:[function(t,e,n){"use strict";var r=t("es-abstract/es7"),i=Object.defineProperty,o=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,s=Object.getOwnPropertySymbols,c=Function.call.bind(Array.prototype.concat),l=Function.call.bind(Array.prototype.reduce),u=s?function(t){return c(a(t),s(t))}:a,d=r.IsCallable(o)&&r.IsCallable(a);e.exports=function(t){if(r.RequireObjectCoercible(t),!d)throw new TypeError("getOwnPropertyDescriptors requires Object.getOwnPropertyDescriptor");var e=r.ToObject(t);return l(u(e),(function(t,n){var r,a,s;return r=t,a=n,s=o(e,n),i&&a in r?i(r,a,{configurable:!0,enumerable:!0,value:s,writable:!0}):r[a]=s,t}),{})}},{"es-abstract/es7":68}],64:[function(t,e,n){arguments[4][38][0].apply(n,arguments)},{"./implementation":63,"./polyfill":86,"./shim":87,"define-properties":65,dup:38}],65:[function(t,e,n){arguments[4][15][0].apply(n,arguments)},{dup:15,foreach:77,"object-keys":84}],66:[function(t,e,n){arguments[4][16][0].apply(n,arguments)},{"./helpers/isFinite":70,"./helpers/mod":72,"./helpers/sign":73,dup:16,"es-to-primitive/es5":74,"is-callable":80}],67:[function(t,e,n){arguments[4][17][0].apply(n,arguments)},{"./es5":66,"./helpers/assign":69,"./helpers/isFinite":70,"./helpers/isPrimitive":71,"./helpers/mod":72,"./helpers/sign":73,dup:17,"es-to-primitive/es6":75,"function-bind":79,"is-regex":82}],68:[function(t,e,n){arguments[4][42][0].apply(n,arguments)},{"./es6":67,"./helpers/assign":69,dup:42}],69:[function(t,e,n){arguments[4][18][0].apply(n,arguments)},{dup:18}],70:[function(t,e,n){arguments[4][19][0].apply(n,arguments)},{dup:19}],71:[function(t,e,n){arguments[4][20][0].apply(n,arguments)},{dup:20}],72:[function(t,e,n){arguments[4][21][0].apply(n,arguments)},{dup:21}],73:[function(t,e,n){arguments[4][22][0].apply(n,arguments)},{dup:22}],74:[function(t,e,n){arguments[4][23][0].apply(n,arguments)},{"./helpers/isPrimitive":76,dup:23,"is-callable":80}],75:[function(t,e,n){arguments[4][24][0].apply(n,arguments)},{"./helpers/isPrimitive":76,dup:24,"is-callable":80,"is-date-object":81,"is-symbol":83}],76:[function(t,e,n){arguments[4][20][0].apply(n,arguments)},{dup:20}],77:[function(t,e,n){arguments[4][26][0].apply(n,arguments)},{dup:26}],78:[function(t,e,n){arguments[4][27][0].apply(n,arguments)},{dup:27}],79:[function(t,e,n){arguments[4][28][0].apply(n,arguments)},{"./implementation":78,dup:28}],80:[function(t,e,n){arguments[4][29][0].apply(n,arguments)},{dup:29}],81:[function(t,e,n){arguments[4][30][0].apply(n,arguments)},{dup:30}],82:[function(t,e,n){arguments[4][31][0].apply(n,arguments)},{dup:31}],83:[function(t,e,n){arguments[4][32][0].apply(n,arguments)},{dup:32}],84:[function(t,e,n){arguments[4][33][0].apply(n,arguments)},{"./isArguments":85,dup:33}],85:[function(t,e,n){arguments[4][34][0].apply(n,arguments)},{dup:34}],86:[function(t,e,n){"use strict";var r=t("./implementation");e.exports=function(){return"function"==typeof Object.getOwnPropertyDescriptors?Object.getOwnPropertyDescriptors:r}},{"./implementation":63}],87:[function(t,e,n){"use strict";var r=t("./polyfill"),i=t("define-properties");e.exports=function(){var t=r();return i(Object,{getOwnPropertyDescriptors:t},{getOwnPropertyDescriptors:function(){return Object.getOwnPropertyDescriptors!==t}}),t}},{"./polyfill":86,"define-properties":65}],88:[function(t,e,n){"use strict";var r=t("es-abstract/es7"),i=t("has"),o=t("function-bind").call(Function.call,Object.prototype.propertyIsEnumerable);e.exports=function(t){var e=r.RequireObjectCoercible(t),n=[];for(var a in e)i(e,a)&&o(e,a)&&n.push(e[a]);return n}},{"es-abstract/es7":93,"function-bind":104,has:105}],89:[function(t,e,n){arguments[4][38][0].apply(n,arguments)},{"./implementation":88,"./polyfill":112,"./shim":113,"define-properties":90,dup:38}],90:[function(t,e,n){arguments[4][15][0].apply(n,arguments)},{dup:15,foreach:102,"object-keys":110}],91:[function(t,e,n){arguments[4][16][0].apply(n,arguments)},{"./helpers/isFinite":95,"./helpers/mod":97,"./helpers/sign":98,dup:16,"es-to-primitive/es5":99,"is-callable":106}],92:[function(t,e,n){arguments[4][17][0].apply(n,arguments)},{"./es5":91,"./helpers/assign":94,"./helpers/isFinite":95,"./helpers/isPrimitive":96,"./helpers/mod":97,"./helpers/sign":98,dup:17,"es-to-primitive/es6":100,"function-bind":104,"is-regex":108}],93:[function(t,e,n){arguments[4][42][0].apply(n,arguments)},{"./es6":92,"./helpers/assign":94,dup:42}],94:[function(t,e,n){arguments[4][18][0].apply(n,arguments)},{dup:18}],95:[function(t,e,n){arguments[4][19][0].apply(n,arguments)},{dup:19}],96:[function(t,e,n){arguments[4][20][0].apply(n,arguments)},{dup:20}],97:[function(t,e,n){arguments[4][21][0].apply(n,arguments)},{dup:21}],98:[function(t,e,n){arguments[4][22][0].apply(n,arguments)},{dup:22}],99:[function(t,e,n){arguments[4][23][0].apply(n,arguments)},{"./helpers/isPrimitive":101,dup:23,"is-callable":106}],100:[function(t,e,n){arguments[4][24][0].apply(n,arguments)},{"./helpers/isPrimitive":101,dup:24,"is-callable":106,"is-date-object":107,"is-symbol":109}],101:[function(t,e,n){arguments[4][20][0].apply(n,arguments)},{dup:20}],102:[function(t,e,n){arguments[4][26][0].apply(n,arguments)},{dup:26}],103:[function(t,e,n){arguments[4][27][0].apply(n,arguments)},{dup:27}],104:[function(t,e,n){arguments[4][28][0].apply(n,arguments)},{"./implementation":103,dup:28}],105:[function(t,e,n){arguments[4][54][0].apply(n,arguments)},{dup:54,"function-bind":104}],106:[function(t,e,n){arguments[4][29][0].apply(n,arguments)},{dup:29}],107:[function(t,e,n){arguments[4][30][0].apply(n,arguments)},{dup:30}],108:[function(t,e,n){arguments[4][31][0].apply(n,arguments)},{dup:31}],109:[function(t,e,n){arguments[4][32][0].apply(n,arguments)},{dup:32}],110:[function(t,e,n){arguments[4][33][0].apply(n,arguments)},{"./isArguments":111,dup:33}],111:[function(t,e,n){arguments[4][34][0].apply(n,arguments)},{dup:34}],112:[function(t,e,n){"use strict";var r=t("./implementation");e.exports=function(){return"function"==typeof Object.values?Object.values:r}},{"./implementation":88}],113:[function(t,e,n){"use strict";var r=t("./polyfill"),i=t("define-properties");e.exports=function(){var t=r();return i(Object,{values:t},{values:function(){return Object.values!==t}}),t}},{"./polyfill":112,"define-properties":90}],114:[function(t,e,n){"use strict";var r=t("define-properties"),i=t("es-abstract/es7"),o=t("function-bind"),a=function(t){i.RequireObjectCoercible(this);var e=i.ToObject(this),n=i.ToString(e),r=i.ToInteger(t),o=n.length;if(r<0||r>=o)return"";var a,s=n.charCodeAt(r),c=r+1,l=1;return s>=55296&&s<=56319&&o>c&&(a=n.charCodeAt(c))>=56320&&a<=57343&&(l=2),n.slice(r,r+l)},s=o.call(Function.call,a);r(s,{method:a,shim:function(){return r(String.prototype,{at:a}),String.prototype.at}}),e.exports=s},{"define-properties":115,"es-abstract/es7":118,"function-bind":129}],115:[function(t,e,n){arguments[4][15][0].apply(n,arguments)},{dup:15,foreach:127,"object-keys":134}],116:[function(t,e,n){arguments[4][16][0].apply(n,arguments)},{"./helpers/isFinite":120,"./helpers/mod":122,"./helpers/sign":123,dup:16,"es-to-primitive/es5":124,"is-callable":130}],117:[function(t,e,n){arguments[4][17][0].apply(n,arguments)},{"./es5":116,"./helpers/assign":119,"./helpers/isFinite":120,"./helpers/isPrimitive":121,"./helpers/mod":122,"./helpers/sign":123,dup:17,"es-to-primitive/es6":125,"function-bind":129,"is-regex":132}],118:[function(t,e,n){arguments[4][42][0].apply(n,arguments)},{"./es6":117,"./helpers/assign":119,dup:42}],119:[function(t,e,n){arguments[4][18][0].apply(n,arguments)},{dup:18}],120:[function(t,e,n){arguments[4][19][0].apply(n,arguments)},{dup:19}],121:[function(t,e,n){arguments[4][20][0].apply(n,arguments)},{dup:20}],122:[function(t,e,n){arguments[4][21][0].apply(n,arguments)},{dup:21}],123:[function(t,e,n){arguments[4][22][0].apply(n,arguments)},{dup:22}],124:[function(t,e,n){arguments[4][23][0].apply(n,arguments)},{"./helpers/isPrimitive":126,dup:23,"is-callable":130}],125:[function(t,e,n){arguments[4][24][0].apply(n,arguments)},{"./helpers/isPrimitive":126,dup:24,"is-callable":130,"is-date-object":131,"is-symbol":133}],126:[function(t,e,n){arguments[4][20][0].apply(n,arguments)},{dup:20}],127:[function(t,e,n){arguments[4][26][0].apply(n,arguments)},{dup:26}],128:[function(t,e,n){arguments[4][27][0].apply(n,arguments)},{dup:27}],129:[function(t,e,n){arguments[4][28][0].apply(n,arguments)},{"./implementation":128,dup:28}],130:[function(t,e,n){arguments[4][29][0].apply(n,arguments)},{dup:29}],131:[function(t,e,n){arguments[4][30][0].apply(n,arguments)},{dup:30}],132:[function(t,e,n){arguments[4][31][0].apply(n,arguments)},{dup:31}],133:[function(t,e,n){arguments[4][32][0].apply(n,arguments)},{dup:32}],134:[function(t,e,n){arguments[4][33][0].apply(n,arguments)},{"./isArguments":135,dup:33}],135:[function(t,e,n){arguments[4][34][0].apply(n,arguments)},{dup:34}],136:[function(t,e,n){"use strict";var r=t("function-bind"),i=t("es-abstract/es7"),o=r.call(Function.call,String.prototype.slice);e.exports=function(t){var e,n=i.RequireObjectCoercible(this),r=i.ToString(n),a=i.ToLength(r.length);arguments.length>1&&(e=arguments[1]);var s=void 0===e?"":i.ToString(e);""===s&&(s=" ");var c=i.ToLength(t);if(c<=a)return r;for(var l=c-a;s.length<l;){var u=s.length,d=l-u;s+=u>d?o(s,0,d):s}var p=s.length>l?o(s,0,l):s;return r+p}},{"es-abstract/es7":141,"function-bind":152}],137:[function(t,e,n){"use strict";var r=t("function-bind"),i=t("define-properties"),o=t("es-abstract/es7"),a=t("./implementation"),s=t("./polyfill"),c=t("./shim"),l=r.call(Function.apply,a),u=function(t,e){o.RequireObjectCoercible(t);var n=[e];return arguments.length>2&&n.push(arguments[2]),l(t,n)};i(u,{getPolyfill:s,implementation:a,shim:c}),e.exports=u},{"./implementation":136,"./polyfill":159,"./shim":160,"define-properties":138,"es-abstract/es7":141,"function-bind":152}],138:[function(t,e,n){arguments[4][15][0].apply(n,arguments)},{dup:15,foreach:150,"object-keys":157}],139:[function(t,e,n){arguments[4][16][0].apply(n,arguments)},{"./helpers/isFinite":143,"./helpers/mod":145,"./helpers/sign":146,dup:16,"es-to-primitive/es5":147,"is-callable":153}],140:[function(t,e,n){arguments[4][17][0].apply(n,arguments)},{"./es5":139,"./helpers/assign":142,"./helpers/isFinite":143,"./helpers/isPrimitive":144,"./helpers/mod":145,"./helpers/sign":146,dup:17,"es-to-primitive/es6":148,"function-bind":152,"is-regex":155}],141:[function(t,e,n){arguments[4][42][0].apply(n,arguments)},{"./es6":140,"./helpers/assign":142,dup:42}],142:[function(t,e,n){arguments[4][18][0].apply(n,arguments)},{dup:18}],143:[function(t,e,n){arguments[4][19][0].apply(n,arguments)},{dup:19}],144:[function(t,e,n){arguments[4][20][0].apply(n,arguments)},{dup:20}],145:[function(t,e,n){arguments[4][21][0].apply(n,arguments)},{dup:21}],146:[function(t,e,n){arguments[4][22][0].apply(n,arguments)},{dup:22}],147:[function(t,e,n){arguments[4][23][0].apply(n,arguments)},{"./helpers/isPrimitive":149,dup:23,"is-callable":153}],148:[function(t,e,n){arguments[4][24][0].apply(n,arguments)},{"./helpers/isPrimitive":149,dup:24,"is-callable":153,"is-date-object":154,"is-symbol":156}],149:[function(t,e,n){arguments[4][20][0].apply(n,arguments)},{dup:20}],150:[function(t,e,n){arguments[4][26][0].apply(n,arguments)},{dup:26}],151:[function(t,e,n){arguments[4][27][0].apply(n,arguments)},{dup:27}],152:[function(t,e,n){arguments[4][28][0].apply(n,arguments)},{"./implementation":151,dup:28}],153:[function(t,e,n){arguments[4][29][0].apply(n,arguments)},{dup:29}],154:[function(t,e,n){arguments[4][30][0].apply(n,arguments)},{dup:30}],155:[function(t,e,n){arguments[4][31][0].apply(n,arguments)},{dup:31}],156:[function(t,e,n){arguments[4][32][0].apply(n,arguments)},{dup:32}],157:[function(t,e,n){arguments[4][33][0].apply(n,arguments)},{"./isArguments":158,dup:33}],158:[function(t,e,n){arguments[4][34][0].apply(n,arguments)},{dup:34}],159:[function(t,e,n){"use strict";var r=t("./implementation");e.exports=function(){return"function"==typeof String.prototype.padEnd?String.prototype.padEnd:r}},{"./implementation":136}],160:[function(t,e,n){"use strict";var r=t("./polyfill"),i=t("define-properties");e.exports=function(){var t=r();return i(String.prototype,{padEnd:t},{padEnd:function(){return String.prototype.padEnd!==t}}),t}},{"./polyfill":159,"define-properties":138}],161:[function(t,e,n){"use strict";var r=t("function-bind"),i=t("es-abstract/es7"),o=r.call(Function.call,String.prototype.slice);e.exports=function(t){var e,n=i.RequireObjectCoercible(this),r=i.ToString(n),a=i.ToLength(r.length);arguments.length>1&&(e=arguments[1]);var s=void 0===e?"":i.ToString(e);""===s&&(s=" ");var c=i.ToLength(t);if(c<=a)return r;for(var l=c-a;s.length<l;){var u=s.length,d=l-u;s+=u>d?o(s,0,d):s}var p=s.length>l?o(s,0,l):s;return p+r}},{"es-abstract/es7":166,"function-bind":177}],162:[function(t,e,n){"use strict";var r=t("function-bind"),i=t("define-properties"),o=t("es-abstract/es7"),a=t("./implementation"),s=t("./polyfill"),c=t("./shim"),l=r.call(Function.apply,a),u=function(t,e){o.RequireObjectCoercible(t);var n=[e];return arguments.length>2&&n.push(arguments[2]),l(t,n)};i(u,{getPolyfill:s,implementation:a,shim:c}),e.exports=u},{"./implementation":161,"./polyfill":184,"./shim":185,"define-properties":163,"es-abstract/es7":166,"function-bind":177}],163:[function(t,e,n){arguments[4][15][0].apply(n,arguments)},{dup:15,foreach:175,"object-keys":182}],164:[function(t,e,n){arguments[4][16][0].apply(n,arguments)},{"./helpers/isFinite":168,"./helpers/mod":170,"./helpers/sign":171,dup:16,"es-to-primitive/es5":172,"is-callable":178}],165:[function(t,e,n){arguments[4][17][0].apply(n,arguments)},{"./es5":164,"./helpers/assign":167,"./helpers/isFinite":168,"./helpers/isPrimitive":169,"./helpers/mod":170,"./helpers/sign":171,dup:17,"es-to-primitive/es6":173,"function-bind":177,"is-regex":180}],166:[function(t,e,n){arguments[4][42][0].apply(n,arguments)},{"./es6":165,"./helpers/assign":167,dup:42}],167:[function(t,e,n){arguments[4][18][0].apply(n,arguments)},{dup:18}],168:[function(t,e,n){arguments[4][19][0].apply(n,arguments)},{dup:19}],169:[function(t,e,n){arguments[4][20][0].apply(n,arguments)},{dup:20}],170:[function(t,e,n){arguments[4][21][0].apply(n,arguments)},{dup:21}],171:[function(t,e,n){arguments[4][22][0].apply(n,arguments)},{dup:22}],172:[function(t,e,n){arguments[4][23][0].apply(n,arguments)},{"./helpers/isPrimitive":174,dup:23,"is-callable":178}],173:[function(t,e,n){arguments[4][24][0].apply(n,arguments)},{"./helpers/isPrimitive":174,dup:24,"is-callable":178,"is-date-object":179,"is-symbol":181}],174:[function(t,e,n){arguments[4][20][0].apply(n,arguments)},{dup:20}],175:[function(t,e,n){arguments[4][26][0].apply(n,arguments)},{dup:26}],176:[function(t,e,n){arguments[4][27][0].apply(n,arguments)},{dup:27}],177:[function(t,e,n){arguments[4][28][0].apply(n,arguments)},{"./implementation":176,dup:28}],178:[function(t,e,n){arguments[4][29][0].apply(n,arguments)},{dup:29}],179:[function(t,e,n){arguments[4][30][0].apply(n,arguments)},{dup:30}],180:[function(t,e,n){arguments[4][31][0].apply(n,arguments)},{dup:31}],181:[function(t,e,n){arguments[4][32][0].apply(n,arguments)},{dup:32}],182:[function(t,e,n){arguments[4][33][0].apply(n,arguments)},{"./isArguments":183,dup:33}],183:[function(t,e,n){arguments[4][34][0].apply(n,arguments)},{dup:34}],184:[function(t,e,n){"use strict";var r=t("./implementation");e.exports=function(){return"function"==typeof String.prototype.padStart?String.prototype.padStart:r}},{"./implementation":161}],185:[function(t,e,n){"use strict";var r=t("./polyfill"),i=t("define-properties");e.exports=function(){var t=r();return i(String.prototype,{padStart:t},{padStart:function(){return String.prototype.padStart!==t}}),t}},{"./polyfill":184,"define-properties":163}],186:[function(t,e,n){"use strict";var r=t("function-bind").call(Function.call,String.prototype.replace),i=/^[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]*/;e.exports=function(){return r(this,i,"")}},{"function-bind":191}],187:[function(t,e,n){"use strict";var r=t("function-bind"),i=t("define-properties"),o=t("./implementation"),a=t("./polyfill"),s=t("./shim"),c=r.call(Function.call,a());i(c,{getPolyfill:a,implementation:o,shim:s}),e.exports=c},{"./implementation":186,"./polyfill":194,"./shim":195,"define-properties":188,"function-bind":191}],188:[function(t,e,n){arguments[4][15][0].apply(n,arguments)},{dup:15,foreach:189,"object-keys":192}],189:[function(t,e,n){arguments[4][26][0].apply(n,arguments)},{dup:26}],190:[function(t,e,n){arguments[4][27][0].apply(n,arguments)},{dup:27}],191:[function(t,e,n){arguments[4][28][0].apply(n,arguments)},{"./implementation":190,dup:28}],192:[function(t,e,n){arguments[4][33][0].apply(n,arguments)},{"./isArguments":193,dup:33}],193:[function(t,e,n){arguments[4][34][0].apply(n,arguments)},{dup:34}],194:[function(t,e,n){"use strict";var r=t("./implementation");e.exports=function(){if(!String.prototype.trimLeft)return r;return""!=="".trimLeft()?r:String.prototype.trimLeft}},{"./implementation":186}],195:[function(t,e,n){"use strict";var r=t("define-properties"),i=t("./polyfill");e.exports=function(){var t=i();return r(String.prototype,{trimLeft:t},{trimLeft:function(){return String.prototype.trimLeft!==t}}),t}},{"./polyfill":194,"define-properties":188}],196:[function(t,e,n){"use strict";var r=t("function-bind").call(Function.call,String.prototype.replace),i=/[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]*$/;e.exports=function(){return r(this,i,"")}},{"function-bind":201}],197:[function(t,e,n){arguments[4][187][0].apply(n,arguments)},{"./implementation":196,"./polyfill":204,"./shim":205,"define-properties":198,dup:187,"function-bind":201}],198:[function(t,e,n){arguments[4][15][0].apply(n,arguments)},{dup:15,foreach:199,"object-keys":202}],199:[function(t,e,n){arguments[4][26][0].apply(n,arguments)},{dup:26}],200:[function(t,e,n){arguments[4][27][0].apply(n,arguments)},{dup:27}],201:[function(t,e,n){arguments[4][28][0].apply(n,arguments)},{"./implementation":200,dup:28}],202:[function(t,e,n){arguments[4][33][0].apply(n,arguments)},{"./isArguments":203,dup:33}],203:[function(t,e,n){arguments[4][34][0].apply(n,arguments)},{dup:34}],204:[function(t,e,n){"use strict";var r=t("./implementation");e.exports=function(){if(!String.prototype.trimRight)return r;return""!=="".trimRight()?r:String.prototype.trimRight}},{"./implementation":196}],205:[function(t,e,n){"use strict";var r=t("define-properties"),i=t("./polyfill");e.exports=function(){var t=i();return r(String.prototype,{trimRight:t},{trimRight:function(){return String.prototype.trimRight!==t}}),t}},{"./polyfill":204,"define-properties":198}],206:[function(t,e,n){"use strict";e.exports=t("./es7-shim").shim()},{"./es7-shim":12}]},{},[206])}).call(this,n(1))},function(t,e){var n,r;n=function(){try{return!!Symbol.iterator}catch(t){return!1}}(),r=function(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return n&&(e[Symbol.iterator]=function(){return e}),e},"URLSearchParams"in window||function(){var t=function(e){if(Object.defineProperty(this,"_entries",{value:{}}),"string"==typeof e){if(""!==e)for(var n,r=(e=e.replace(/^\?/,"")).split("&"),i=0;i<r.length;i++)n=r[i].split("="),this.append(decodeURIComponent(n[0]),n.length>1?decodeURIComponent(n[1]):"")}else if(e instanceof t){var o=this;e.forEach((function(t,e){o.append(t,e)}))}},e=t.prototype;e.append=function(t,e){t in this._entries?this._entries[t].push(e.toString()):this._entries[t]=[e.toString()]},e.delete=function(t){delete this._entries[t]},e.get=function(t){return t in this._entries?this._entries[t][0]:null},e.getAll=function(t){return t in this._entries?this._entries[t].slice(0):[]},e.has=function(t){return t in this._entries},e.set=function(t,e){this._entries[t]=[e.toString()]},e.forEach=function(t,e){var n;for(var r in this._entries)if(this._entries.hasOwnProperty(r)){n=this._entries[r];for(var i=0;i<n.length;i++)t.call(e,n[i],r,this)}},e.keys=function(){var t=[];return this.forEach((function(e,n){t.push(n)})),r(t)},e.values=function(){var t=[];return this.forEach((function(e){t.push(e)})),r(t)},e.entries=function(){var t=[];return this.forEach((function(e,n){t.push([e,n])})),r(t)},n&&(e[Symbol.iterator]=e.entries),e.toString=function(){var t="";return this.forEach((function(e,n){t.length>0&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e)})),t},window.URLSearchParams=t}(),function(){if(function(){try{var t=new URL("b","http://a");return t.pathname="c%20d","http://a/c%20d"===t.href}catch(t){return!1}}()||function(){var t=window.URL,e=function(t,e){if("string"!=typeof t)throw new TypeError("Failed to construct 'URL': Invalid URL");var n=document.implementation.createHTMLDocument("");if(e){var r=n.createElement("base");r.href=e,n.head.appendChild(r)}var i=n.createElement("a");if(i.href=t,n.body.appendChild(i),":"===i.protocol||!/:/.test(i.href))throw new TypeError("Invalid URL");Object.defineProperty(this,"_anchorElement",{value:i})},n=e.prototype;["hash","host","hostname","href","port","protocol","search"].forEach((function(t){!function(t){Object.defineProperty(n,t,{get:function(){return this._anchorElement[t]},set:function(e){this._anchorElement[t]=e},enumerable:!0})}(t)})),Object.defineProperties(n,{toString:{get:function(){var t=this;return function(){return t.href}}},pathname:{get:function(){return this._anchorElement.pathname.replace(/(^\/?)/,"/")},set:function(t){this._anchorElement.pathname=t},enumerable:!0},origin:{get:function(){return this._anchorElement.protocol+"//"+this._anchorElement.hostname},enumerable:!0},password:{get:function(){return""},set:function(t){},enumerable:!0},username:{get:function(){return""},set:function(t){},enumerable:!0},searchParams:{get:function(){var t=new URLSearchParams(this.search),e=this;return["append","delete","set"].forEach((function(n){var r=t[n];t[n]=function(){r.apply(t,arguments),e.search=t.toString()}})),t},enumerable:!0}}),e.createObjectURL=function(e){return t.createObjectURL.apply(t,arguments)},e.revokeObjectURL=function(e){return t.revokeObjectURL.apply(t,arguments)},window.URL=e}(),!("origin"in window.location))try{Object.defineProperty(window.location,"origin",{get:function(){return window.location.protocol+"//"+window.location.hostname},enumerable:!0})}catch(t){setInterval((function(){window.location.origin=window.location.protocol+"//"+window.location.hostname}),100)}}()},function(t,e,n){var r,i,o;i=[n(7)],void 0===(o="function"==typeof(r=function(t){var e=/\+/g;function n(t){return s.raw?t:encodeURIComponent(t)}function r(t){return s.raw?t:decodeURIComponent(t)}function i(t){return n(s.json?JSON.stringify(t):String(t))}function o(t){0===t.indexOf('"')&&(t=t.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return t=decodeURIComponent(t.replace(e," ")),s.json?JSON.parse(t):t}catch(t){}}function a(e,n){var r=s.raw?e:o(e);return t.isFunction(n)?n(r):r}var s=t.cookie=function(e,o,c){if(void 0!==o&&!t.isFunction(o)){if("number"==typeof(c=t.extend({},s.defaults,c)).expires){var l=c.expires,u=c.expires=new Date;u.setTime(+u+864e5*l)}return document.cookie=[n(e),"=",i(o),c.expires?"; expires="+c.expires.toUTCString():"",c.path?"; path="+c.path:"",c.domain?"; domain="+c.domain:"",c.secure?"; secure":""].join("")}for(var d=e?void 0:{},p=document.cookie?document.cookie.split("; "):[],f=0,_=p.length;f<_;f++){var h=p[f].split("="),m=r(h.shift()),g=h.join("=");if(e&&e===m){d=a(g,o);break}e||void 0===(g=a(g))||(d[m]=g)}return d};s.defaults={},t.removeCookie=function(e,n){return void 0!==t.cookie(e)&&(t.cookie(e,"",t.extend({},n,{expires:-1})),!t.cookie(e))}})?r.apply(e,i):r)||(t.exports=o)},function(t,e,n){(function(e){t.exports=e.FastClick=n(254)}).call(this,n(1))},function(t,e,n){var r;!function(){"use strict";function i(t,e){var n;if(e=e||{},this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=e.touchBoundary||10,this.layer=t,this.tapDelay=e.tapDelay||200,this.tapTimeout=e.tapTimeout||700,!i.notNeeded(t)){for(var r=["onMouse","onClick","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel"],o=this,s=0,c=r.length;s<c;s++)o[r[s]]=l(o[r[s]],o);a&&(t.addEventListener("mouseover",this.onMouse,!0),t.addEventListener("mousedown",this.onMouse,!0),t.addEventListener("mouseup",this.onMouse,!0)),t.addEventListener("click",this.onClick,!0),t.addEventListener("touchstart",this.onTouchStart,!1),t.addEventListener("touchmove",this.onTouchMove,!1),t.addEventListener("touchend",this.onTouchEnd,!1),t.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(t.removeEventListener=function(e,n,r){var i=Node.prototype.removeEventListener;"click"===e?i.call(t,e,n.hijacked||n,r):i.call(t,e,n,r)},t.addEventListener=function(e,n,r){var i=Node.prototype.addEventListener;"click"===e?i.call(t,e,n.hijacked||(n.hijacked=function(t){t.propagationStopped||n(t)}),r):i.call(t,e,n,r)}),"function"==typeof t.onclick&&(n=t.onclick,t.addEventListener("click",(function(t){n(t)}),!1),t.onclick=null)}function l(t,e){return function(){return t.apply(e,arguments)}}}var o=navigator.userAgent.indexOf("Windows Phone")>=0,a=navigator.userAgent.indexOf("Android")>0&&!o,s=/iP(ad|hone|od)/.test(navigator.userAgent)&&!o,c=s&&/OS 4_\d(_\d)?/.test(navigator.userAgent),l=s&&/OS [6-7]_\d/.test(navigator.userAgent),u=navigator.userAgent.indexOf("BB10")>0;i.prototype.needsClick=function(t){switch(t.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(t.disabled)return!0;break;case"input":if(s&&"file"===t.type||t.disabled)return!0;break;case"label":case"iframe":case"video":return!0}return/\bneedsclick\b/.test(t.className)},i.prototype.needsFocus=function(t){switch(t.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!a;case"input":switch(t.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!t.disabled&&!t.readOnly;default:return/\bneedsfocus\b/.test(t.className)}},i.prototype.sendClick=function(t,e){var n,r;document.activeElement&&document.activeElement!==t&&document.activeElement.blur(),r=e.changedTouches[0],(n=document.createEvent("MouseEvents")).initMouseEvent(this.determineEventType(t),!0,!0,window,1,r.screenX,r.screenY,r.clientX,r.clientY,!1,!1,!1,!1,0,null),n.forwardedTouchEvent=!0,t.dispatchEvent(n)},i.prototype.determineEventType=function(t){return a&&"select"===t.tagName.toLowerCase()?"mousedown":"click"},i.prototype.focus=function(t){var e;s&&t.setSelectionRange&&0!==t.type.indexOf("date")&&"time"!==t.type&&"month"!==t.type?(e=t.value.length,t.setSelectionRange(e,e)):t.focus()},i.prototype.updateScrollParent=function(t){var e,n;if(!(e=t.fastClickScrollParent)||!e.contains(t)){n=t;do{if(n.scrollHeight>n.offsetHeight){e=n,t.fastClickScrollParent=n;break}n=n.parentElement}while(n)}e&&(e.fastClickLastScrollTop=e.scrollTop)},i.prototype.getTargetElementFromEventTarget=function(t){return t.nodeType===Node.TEXT_NODE?t.parentNode:t},i.prototype.onTouchStart=function(t){var e,n,r;if(t.targetTouches.length>1)return!0;if(e=this.getTargetElementFromEventTarget(t.target),n=t.targetTouches[0],s){if((r=window.getSelection()).rangeCount&&!r.isCollapsed)return!0;if(!c){if(n.identifier&&n.identifier===this.lastTouchIdentifier)return t.preventDefault(),!1;this.lastTouchIdentifier=n.identifier,this.updateScrollParent(e)}}return this.trackingClick=!0,this.trackingClickStart=t.timeStamp,this.targetElement=e,this.touchStartX=n.pageX,this.touchStartY=n.pageY,t.timeStamp-this.lastClickTime<this.tapDelay&&t.preventDefault(),!0},i.prototype.touchHasMoved=function(t){var e=t.changedTouches[0],n=this.touchBoundary;return Math.abs(e.pageX-this.touchStartX)>n||Math.abs(e.pageY-this.touchStartY)>n},i.prototype.onTouchMove=function(t){return!this.trackingClick||((this.targetElement!==this.getTargetElementFromEventTarget(t.target)||this.touchHasMoved(t))&&(this.trackingClick=!1,this.targetElement=null),!0)},i.prototype.findControl=function(t){return void 0!==t.control?t.control:t.htmlFor?document.getElementById(t.htmlFor):t.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},i.prototype.onTouchEnd=function(t){var e,n,r,i,o,u=this.targetElement;if(!this.trackingClick)return!0;if(t.timeStamp-this.lastClickTime<this.tapDelay)return this.cancelNextClick=!0,!0;if(t.timeStamp-this.trackingClickStart>this.tapTimeout)return!0;if(this.cancelNextClick=!1,this.lastClickTime=t.timeStamp,n=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,l&&(o=t.changedTouches[0],(u=document.elementFromPoint(o.pageX-window.pageXOffset,o.pageY-window.pageYOffset)||u).fastClickScrollParent=this.targetElement.fastClickScrollParent),"label"===(r=u.tagName.toLowerCase())){if(e=this.findControl(u)){if(this.focus(u),a)return!1;u=e}}else if(this.needsFocus(u))return t.timeStamp-n>100||s&&window.top!==window&&"input"===r?(this.targetElement=null,!1):(this.focus(u),this.sendClick(u,t),s&&"select"===r||(this.targetElement=null,t.preventDefault()),!1);return!(!s||c||!(i=u.fastClickScrollParent)||i.fastClickLastScrollTop===i.scrollTop)||(this.needsClick(u)||(t.preventDefault(),this.sendClick(u,t)),!1)},i.prototype.onTouchCancel=function(){this.trackingClick=!1,this.targetElement=null},i.prototype.onMouse=function(t){return!this.targetElement||(!!t.forwardedTouchEvent||(!t.cancelable||(!(!this.needsClick(this.targetElement)||this.cancelNextClick)||(t.stopImmediatePropagation?t.stopImmediatePropagation():t.propagationStopped=!0,t.stopPropagation(),t.preventDefault(),!1))))},i.prototype.onClick=function(t){var e;return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):"submit"===t.target.type&&0===t.detail||((e=this.onMouse(t))||(this.targetElement=null),e)},i.prototype.destroy=function(){var t=this.layer;a&&(t.removeEventListener("mouseover",this.onMouse,!0),t.removeEventListener("mousedown",this.onMouse,!0),t.removeEventListener("mouseup",this.onMouse,!0)),t.removeEventListener("click",this.onClick,!0),t.removeEventListener("touchstart",this.onTouchStart,!1),t.removeEventListener("touchmove",this.onTouchMove,!1),t.removeEventListener("touchend",this.onTouchEnd,!1),t.removeEventListener("touchcancel",this.onTouchCancel,!1)},i.notNeeded=function(t){var e,n,r;if(void 0===window.ontouchstart)return!0;if(n=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]){if(!a)return!0;if(e=document.querySelector("meta[name=viewport]")){if(-1!==e.content.indexOf("user-scalable=no"))return!0;if(n>31&&document.documentElement.scrollWidth<=window.outerWidth)return!0}}if(u&&(r=navigator.userAgent.match(/Version\/([0-9]*)\.([0-9]*)/))[1]>=10&&r[2]>=3&&(e=document.querySelector("meta[name=viewport]"))){if(-1!==e.content.indexOf("user-scalable=no"))return!0;if(document.documentElement.scrollWidth<=window.outerWidth)return!0}return"none"===t.style.msTouchAction||"manipulation"===t.style.touchAction||(!!(+(/Firefox\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]>=27&&(e=document.querySelector("meta[name=viewport]"))&&(-1!==e.content.indexOf("user-scalable=no")||document.documentElement.scrollWidth<=window.outerWidth))||("none"===t.style.touchAction||"manipulation"===t.style.touchAction))},i.attach=function(t,e){return new i(t,e)},void 0===(r=function(){return i}.call(e,n,e,t))||(t.exports=r)}()},function(t,e){!function(t,e){"use strict";var n,r,i,o,a,s,c,l,u,d=e.$$minErr("$sanitize");e.module("ngSanitize",[]).provider("$sanitize",(function(){var p=!1;this.$get=["$$sanitizeUri",function(t){return p&&r(x,w),function(e){var n=[];return l(e,u(n,(function(e,n){return!/^unsafe:/.test(t(e,n))}))),n.join("")}}],this.enableSvg=function(t){return o(t)?(p=t,this):p},n=e.bind,r=e.extend,i=e.forEach,o=e.isDefined,a=e.lowercase,s=e.noop,l=function(t,e){null==t?t="":"string"!=typeof t&&(t=""+t);var n=j(t);if(!n)return"";var r=5;do{if(0===r)throw d("uinput","Failed to sanitize html because the input is unstable");r--,t=n.innerHTML,n=j(t)}while(t!==n.innerHTML);var i=n.firstChild;for(;i;){switch(i.nodeType){case 1:e.start(i.nodeName.toLowerCase(),O(i.attributes));break;case 3:e.chars(i.textContent)}var o;if(!((o=i.firstChild)||(1===i.nodeType&&e.end(i.nodeName.toLowerCase()),o=P("nextSibling",i))))for(;null==o&&(i=P("parentNode",i))!==n;)o=P("nextSibling",i),1===i.nodeType&&e.end(i.nodeName.toLowerCase());i=o}for(;i=n.firstChild;)n.removeChild(i)},u=function(t,e){var r=!1,o=n(t,t.push);return{start:function(t,n){t=a(t),!r&&$[t]&&(r=t),r||!0!==x[t]||(o("<"),o(t),i(n,(function(n,r){var i=a(r),s="img"===t&&"src"===i||"background"===i;!0!==A[i]||!0===k[i]&&!e(n,s)||(o(" "),o(r),o('="'),o(T(n)),o('"'))})),o(">"))},end:function(t){t=a(t),r||!0!==x[t]||!0===h[t]||(o("</"),o(t),o(">")),t==r&&(r=!1)},chars:function(t){r||o(T(t))}}},c=t.Node.prototype.contains||function(t){return!!(16&this.compareDocumentPosition(t))};var f=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,_=/([^#-~ |!])/g,h=E("area,br,col,hr,img,wbr"),m=E("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),g=E("rp,rt"),v=r({},g,m),b=r({},m,E("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,section,table,ul")),y=r({},g,E("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var")),w=E("circle,defs,desc,ellipse,font-face,font-face-name,font-face-src,g,glyph,hkern,image,linearGradient,line,marker,metadata,missing-glyph,mpath,path,polygon,polyline,radialGradient,rect,stop,svg,switch,text,title,tspan"),$=E("script,style"),x=r({},h,b,y,v),k=E("background,cite,href,longdesc,src,xlink:href"),C=E("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,size,span,start,summary,tabindex,target,title,type,valign,value,vspace,width"),S=E("accent-height,accumulate,additive,alphabetic,arabic-form,ascent,baseProfile,bbox,begin,by,calcMode,cap-height,class,color,color-rendering,content,cx,cy,d,dx,dy,descent,display,dur,end,fill,fill-rule,font-family,font-size,font-stretch,font-style,font-variant,font-weight,from,fx,fy,g1,g2,glyph-name,gradientUnits,hanging,height,horiz-adv-x,horiz-origin-x,ideographic,k,keyPoints,keySplines,keyTimes,lang,marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mathematical,max,min,offset,opacity,orient,origin,overline-position,overline-thickness,panose-1,path,pathLength,points,preserveAspectRatio,r,refX,refY,repeatCount,repeatDur,requiredExtensions,requiredFeatures,restart,rotate,rx,ry,slope,stemh,stemv,stop-color,stop-opacity,strikethrough-position,strikethrough-thickness,stroke,stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,stroke-width,systemLanguage,target,text-anchor,to,transform,type,u1,u2,underline-position,underline-thickness,unicode,unicode-range,units-per-em,values,version,viewBox,visibility,width,widths,x,x-height,x1,x2,xlink:actuate,xlink:arcrole,xlink:role,xlink:show,xlink:title,xlink:type,xml:base,xml:lang,xml:space,xmlns,xmlns:xlink,y,y1,y2,zoomAndPan",!0),A=r({},k,S,C);function E(t,e){var n,r={},i=t.split(",");for(n=0;n<i.length;n++)r[e?a(i[n]):i[n]]=!0;return r}var j=function(t,e){var n;if(!e||!e.implementation)throw d("noinert","Can't create an inert html document");var r=((n=e.implementation.createHTMLDocument("inert")).documentElement||n.getDocumentElement()).querySelector("body");return r.innerHTML='<svg><g onload="this.parentNode.remove()"></g></svg>',r.querySelector("svg")?(r.innerHTML='<svg><p><style><img src="</style><img src=x onerror=alert(1)//">',r.querySelector("svg img")?function(e){e="<remove></remove>"+e;try{var n=(new t.DOMParser).parseFromString(e,"text/html").body;return n.firstChild.remove(),n}catch(t){return}}:function(t){r.innerHTML=t,e.documentMode&&q(r);return r}):function(e){e="<remove></remove>"+e;try{e=encodeURI(e)}catch(t){return}var n=new t.XMLHttpRequest;n.responseType="document",n.open("GET","data:text/html;charset=utf-8,"+e,!1),n.send(null);var r=n.response.body;return r.firstChild.remove(),r}}(t,t.document);function O(t){for(var e={},n=0,r=t.length;n<r;n++){var i=t[n];e[i.name]=i.value}return e}function T(t){return t.replace(/&/g,"&amp;").replace(f,(function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"})).replace(_,(function(t){return"&#"+t.charCodeAt(0)+";"})).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function q(e){for(;e;){if(e.nodeType===t.Node.ELEMENT_NODE)for(var n=e.attributes,r=0,i=n.length;r<i;r++){var o=n[r],a=o.name.toLowerCase();"xmlns:ns1"!==a&&0!==a.lastIndexOf("ns1:",0)||(e.removeAttributeNode(o),r--,i--)}var s=e.firstChild;s&&q(s),e=P("nextSibling",e)}}function P(t,e){var n=e[t];if(n&&c.call(e,n))throw d("elclob","Failed to sanitize html because the element is clobbered: {0}",e.outerHTML||e.outerText);return n}})).info({angularVersion:"1.6.6"}),e.module("ngSanitize").filter("linky",["$sanitize",function(t){var n=/((ftp|https?):\/\/|(www\.)|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>"\u201d\u2019]/i,r=/^mailto:/i,i=e.$$minErr("linky"),o=e.isDefined,a=e.isFunction,c=e.isObject,l=e.isString;return function(e,d,p){if(null==e||""===e)return e;if(!l(e))throw i("notstring","Expected string but received: {0}",e);for(var f,_,h,m=a(p)?p:c(p)?function(){return p}:function(){return{}},g=e,v=[];f=g.match(n);)_=f[0],f[2]||f[4]||(_=(f[3]?"http://":"mailto:")+_),h=f.index,b(g.substr(0,h)),y(_,f[0].replace(r,"")),g=g.substring(h+f[0].length);return b(g),t(v.join(""));function b(t){var e,n;t&&v.push((e=t,u(n=[],s).chars(e),n.join("")))}function y(t,e){var n,r=m(t);for(n in v.push("<a "),r)v.push(n+'="'+r[n]+'" ');o(d)&&!("target"in r)&&v.push('target="',d,'" '),v.push('href="',t.replace(/"/g,"&quot;"),'">'),b(e),v.push("</a>")}}}])}(window,window.angular)},function(t,e){!function(t,e){"use strict";var n,r,i,o,a="-add",s="-remove",c="ng-animate",l="$$ngAnimateChildren";void 0===t.ontransitionend&&void 0!==t.onwebkittransitionend?("-webkit-",n="WebkitTransition",r="webkitTransitionEnd transitionend"):(n="transition",r="transitionend"),void 0===t.onanimationend&&void 0!==t.onwebkitanimationend?("-webkit-",i="WebkitAnimation",o="webkitAnimationEnd animationend"):(i="animation",o="animationend");var u="Duration",d="Property",p="Delay",f="TimingFunction",_=i+p,h=i+u,m=n+p,g=n+u,v=e.$$minErr("ng");function b(t,e,n){if(!t)throw v("areq","Argument '{0}' is {1}",e||"?",n||"required");return t}function y(t,e){return t||e?t?e?(K(t)&&(t=t.join(" ")),K(e)&&(e=e.join(" ")),t+" "+e):t:e:""}function w(t,e,n){var r="";return t=K(t)?t:t&&tt(t)&&t.length?t.split(/\s+/):[],Y(t,(function(t,i){t&&t.length>0&&(r+=i>0?" ":"",r+=n?e+t:t+e)})),r}function $(t){if(t instanceof nt)switch(t.length){case 0:return t;case 1:if(1===t[0].nodeType)return t;break;default:return nt(x(t))}if(1===t.nodeType)return nt(t)}function x(t){if(!t[0])return t;for(var e=0;e<t.length;e++){var n=t[e];if(1===n.nodeType)return n}}function k(t){return function(e,n){n.addClass&&(!function(t,e,n){Y(e,(function(e){t.addClass(e,n)}))}(t,e,n.addClass),n.addClass=null),n.removeClass&&(!function(t,e,n){Y(e,(function(e){t.removeClass(e,n)}))}(t,e,n.removeClass),n.removeClass=null)}}function C(t){if(!(t=t||{}).$$prepared){var e=t.domOperation||rt;t.domOperation=function(){t.$$domOperationFired=!0,e(),e=rt},t.$$prepared=!0}return t}function S(t,e){A(t,e),E(t,e)}function A(t,e){e.from&&(t.css(e.from),e.from=null)}function E(t,e){e.to&&(t.css(e.to),e.to=null)}function j(t,e,n){var r=e.options||{},i=n.options||{},o=(r.addClass||"")+" "+(i.addClass||""),c=(r.removeClass||"")+" "+(i.removeClass||""),l=function(t,e,n){var r=1,i=-1,o={};t=l(t),e=l(e),Y(e,(function(t,e){o[e]=r})),n=l(n),Y(n,(function(t,e){o[e]=o[e]===r?null:i}));var c={addClass:"",removeClass:""};function l(t){tt(t)&&(t=t.split(" "));var e={};return Y(t,(function(t){t.length&&(e[t]=!0)})),e}return Y(o,(function(e,n){var o,l;e===r?(o="addClass",l=!t[n]||t[n+s]):e===i&&(o="removeClass",l=t[n]||t[n+a]),l&&(c[o].length&&(c[o]+=" "),c[o]+=n)})),c}(t.attr("class"),o,c);i.preparationClasses&&(r.preparationClasses=M(i.preparationClasses,r.preparationClasses),delete i.preparationClasses);var u=r.domOperation!==rt?r.domOperation:null;return G(r,i),u&&(r.domOperation=u),l.addClass?r.addClass=l.addClass:r.addClass=null,l.removeClass?r.removeClass=l.removeClass:r.removeClass=null,e.addClass=r.addClass,e.removeClass=r.removeClass,r}function O(t){return t instanceof nt?t[0]:t}function T(t,e){var n=e?"-"+e+"s":"";return P(t,[m,n]),[m,n]}function q(t,e){var n=e?"paused":"",r=i+"PlayState";return P(t,[r,n]),[r,n]}function P(t,e){var n=e[0],r=e[1];t.style[n]=r}function M(t,e){return t?e?t+" "+e:t:e}var I=["$interpolate",function(t){return{link:function(e,n,r){var i=r.ngAnimateChildren;function o(t){t="on"===t||"true"===t,n.data(l,t)}tt(i)&&0===i.length?n.data(l,!0):(o(t(i)(e)),r.$observe("ngAnimateChildren",o))}}}],R="$$animateCss",D=1e3,z={transitionDuration:g,transitionDelay:m,transitionProperty:n+d,animationDuration:h,animationDelay:_,animationIterationCount:i+"IterationCount"},L={transitionDuration:g,transitionDelay:m,animationDuration:h,animationDelay:_};function N(t,e){return[e?_:m,t+"s"]}function F(t,e,n){var r=Object.create(null),i=t.getComputedStyle(e)||{};return Y(n,(function(t,e){var n,o,a=i[t];if(a){var s=a.charAt(0);("-"===s||"+"===s||s>=0)&&(n=0,o=a.split(/\s*,\s*/),Y(o,(function(t){"s"===t.charAt(t.length-1)&&(t=t.substring(0,t.length-1)),t=parseFloat(t)||0,n=n?Math.max(t,n):t})),a=n),0===a&&(a=null),r[e]=a}})),r}function U(t){return 0===t||null!=t}function V(t,e){var r=n,i=t+"s";return e?r+=u:i+=" linear all",[r,i]}function H(){var t=Object.create(null);return{flush:function(){t=Object.create(null)},count:function(e){var n=t[e];return n?n.total:0},get:function(e){var n=t[e];return n&&n.value},put:function(e,n){t[e]?t[e].total++:t[e]={total:1,value:n}}}}function B(t,e,n){Y(n,(function(n){t[n]=J(t[n])?t[n]:e.style.getPropertyValue(n)}))}var W,G,Y,K,J,Q,X,Z,tt,et,nt,rt,it=["$animateProvider",function(t){var e=H(),c=H();this.$get=["$window","$$jqLite","$$AnimateRunner","$timeout","$$forceReflow","$sniffer","$$rAFScheduler","$$animateQueue",function(t,l,u,p,_,m,g,v){var b=k(l),y=0;function $(t,e){var n="$$ngAnimateParentKey",r=t.parentNode;return(r[n]||(r[n]=++y))+"-"+t.getAttribute("class")+"-"+e}var x=[];function j(t){x.push(t),g.waitUntilQuiet((function(){e.flush(),c.flush();for(var t=_(),n=0;n<x.length;n++)x[n](t);x.length=0}))}function M(n,r,i){var o=function(n,r,i,o){var a=e.get(i);return a||"infinite"===(a=F(t,n,o)).animationIterationCount&&(a.animationIterationCount=1),e.put(i,a),a}(n,0,i,z),a=o.animationDelay,s=o.transitionDelay;return o.maxDelay=a&&s?Math.max(a,s):a||s,o.maxDuration=Math.max(o.animationDuration*o.animationIterationCount,o.transitionDuration),o}return function(_,g){var y=g||{};y.$$prepared||(y=C(W(y)));var x={},k=O(_);if(!k||!k.parentNode||!v.enabled())return Tt();var I,z,H,G,J,Q,X,Z,tt,et,nt=[],it=_.attr("class"),ot=function(t){var e={};return t&&(t.to||t.from)&&(e.to=t.to,e.from=t.from),e}(y),at=[];if(0===y.duration||!m.animations&&!m.transitions)return Tt();var st=y.event&&K(y.event)?y.event.join(" "):y.event,ct="",lt="";st&&y.structural?ct=w(st,"ng-",!0):st&&(ct=st),y.addClass&&(lt+=w(y.addClass,a)),y.removeClass&&(lt.length&&(lt+=" "),lt+=w(y.removeClass,s)),y.applyClassesEarly&&lt.length&&b(_,y);var ut,dt,pt,ft=[ct,lt].join(" ").trim(),_t=it+" "+ft,ht=w(ft,"-active"),mt=ot.to&&Object.keys(ot.to).length>0;if(!((y.keyframeStyle||"").length>0)&&!mt&&!ft)return Tt();if(y.stagger>0){var gt=parseFloat(y.stagger);dt={transitionDelay:gt,animationDelay:gt,transitionDuration:0,animationDuration:0}}else ut=$(k,_t),dt=function(n,r,i,o){var a;if(e.count(i)>0&&!(a=c.get(i))){var s=w(r,"-stagger");l.addClass(n,s),(a=F(t,n,o)).animationDuration=Math.max(a.animationDuration,0),a.transitionDuration=Math.max(a.transitionDuration,0),l.removeClass(n,s),c.put(i,a)}return a||{}}(k,ft,ut,L);if(y.$$skipPreparationClasses||l.addClass(_,ft),y.transitionStyle){var vt=[n,y.transitionStyle];P(k,vt),nt.push(vt)}if(y.duration>=0){pt=k.style[n].length>0;var bt=V(y.duration,pt);P(k,bt),nt.push(bt)}if(y.keyframeStyle){var yt=[i,y.keyframeStyle];P(k,yt),nt.push(yt)}var wt=dt?y.staggerIndex>=0?y.staggerIndex:e.count(ut):0,$t=0===wt;$t&&!y.skipBlocking&&T(k,9999);var xt=M(k,0,ut),kt=xt.maxDelay;Q=Math.max(kt,0),Z=xt.maxDuration;var Ct,St={};if(St.hasTransitions=xt.transitionDuration>0,St.hasAnimations=xt.animationDuration>0,St.hasTransitionAll=St.hasTransitions&&"all"===xt.transitionProperty,St.applyTransitionDuration=mt&&(St.hasTransitions&&!St.hasTransitionAll||St.hasAnimations&&!St.hasTransitions),St.applyAnimationDuration=y.duration&&St.hasAnimations,St.applyTransitionDelay=U(y.delay)&&(St.applyTransitionDuration||St.hasTransitions),St.applyAnimationDelay=U(y.delay)&&St.hasAnimations,St.recalculateTimingStyles=lt.length>0,(St.applyTransitionDuration||St.applyAnimationDuration)&&(Z=y.duration?parseFloat(y.duration):Z,St.applyTransitionDuration&&(St.hasTransitions=!0,xt.transitionDuration=Z,pt=k.style[n+d].length>0,nt.push(V(Z,pt))),St.applyAnimationDuration&&(St.hasAnimations=!0,xt.animationDuration=Z,nt.push([h,Z+"s"]))),0===Z&&!St.recalculateTimingStyles)return Tt();null!=y.delay&&("boolean"!=typeof y.delay&&(Ct=parseFloat(y.delay),Q=Math.max(Ct,0)),St.applyTransitionDelay&&nt.push(N(Ct)),St.applyAnimationDelay&&nt.push(N(Ct,!0)));return null==y.duration&&xt.transitionDuration>0&&(St.recalculateTimingStyles=St.recalculateTimingStyles||$t),X=Q*D,tt=Z*D,y.skipBlocking||(St.blockTransition=xt.transitionDuration>0,St.blockKeyframeAnimation=xt.animationDuration>0&&dt.animationDelay>0&&0===dt.animationDuration),y.from&&(y.cleanupStyles&&B(x,k,Object.keys(y.from)),A(_,y)),St.blockTransition||St.blockKeyframeAnimation?Ot(Z):y.skipBlocking||T(k,!1),{$$willAnimate:!0,end:At,start:function(){if(!I)return G=new u(J={end:At,cancel:Et,resume:null,pause:null}),j(Pt),G}};function At(){jt()}function Et(){jt(!0)}function jt(t){if(!(I||H&&z)){I=!0,z=!1,y.$$skipPreparationClasses||l.removeClass(_,ft),l.removeClass(_,ht),q(k,!1),T(k,!1),Y(nt,(function(t){k.style[t[0]]=""})),b(_,y),S(_,y),Object.keys(x).length&&Y(x,(function(t,e){t?k.style.setProperty(e,t):k.style.removeProperty(e)})),y.onDone&&y.onDone(),at&&at.length&&_.off(at.join(" "),qt);var e=_.data(R);e&&(p.cancel(e[0].timer),_.removeData(R)),G&&G.complete(!t)}}function Ot(t){St.blockTransition&&T(k,t),St.blockKeyframeAnimation&&q(k,!!t)}function Tt(){return G=new u({end:At,cancel:Et}),j(rt),jt(),{$$willAnimate:!1,start:function(){return G},end:At}}function qt(t){t.stopPropagation();var e=t.originalEvent||t,n=e.$manualTimeStamp||Date.now(),r=parseFloat(e.elapsedTime.toFixed(3));Math.max(n-et,0)>=X&&r>=Z&&(H=!0,jt())}function Pt(){if(!I)if(k.parentNode){var t=function(t){if(H)z&&t&&(z=!1,jt());else if(z=!t,xt.animationDuration){var e=q(k,z);z?nt.push(e):(r=e,i=(n=nt).indexOf(r),r>=0&&n.splice(i,1))}var n,r,i},e=wt>0&&(xt.transitionDuration&&0===dt.transitionDuration||xt.animationDuration&&0===dt.animationDuration)&&Math.max(dt.animationDelay,dt.transitionDelay);e?p(a,Math.floor(e*wt*D),!1):a(),J.resume=function(){t(!0)},J.pause=function(){t(!1)}}else jt();function a(){if(!I){if(Ot(!1),Y(nt,(function(t){var e=t[0],n=t[1];k.style[e]=n})),b(_,y),l.addClass(_,ht),St.recalculateTimingStyles){if(_t=k.getAttribute("class")+" "+ft,ut=$(k,_t),xt=M(k,0,ut),kt=xt.maxDelay,Q=Math.max(kt,0),0===(Z=xt.maxDuration))return void jt();St.hasTransitions=xt.transitionDuration>0,St.hasAnimations=xt.animationDuration>0}if(St.applyAnimationDelay&&(kt="boolean"!=typeof y.delay&&U(y.delay)?parseFloat(y.delay):kt,Q=Math.max(kt,0),xt.animationDelay=kt,Ct=N(kt,!0),nt.push(Ct),k.style[Ct[0]]=Ct[1]),X=Q*D,tt=Z*D,y.easing){var t,e=y.easing;St.hasTransitions&&(t=n+f,nt.push([t,e]),k.style[t]=e),St.hasAnimations&&(t=i+f,nt.push([t,e]),k.style[t]=e)}xt.transitionDuration&&at.push(r),xt.animationDuration&&at.push(o),et=Date.now();var a=X+1.5*tt,c=et+a,u=_.data(R)||[],d=!0;if(u.length){var h=u[0];(d=c>h.expectedEndTime)?p.cancel(h.timer):u.push(jt)}if(d){var m=p(s,a,!1);u[0]={timer:m,expectedEndTime:c},u.push(jt),_.data(R,u)}at.length&&_.on(at.join(" "),qt),y.to&&(y.cleanupStyles&&B(x,k,Object.keys(y.to)),E(_,y))}}function s(){var t=_.data(R);if(t){for(var e=1;e<t.length;e++)t[e]();_.removeData(R)}}}}}]}],ot=["$$animationProvider",function(t){t.drivers.push("$$animateCssDriver");var e="ng-animate-shim",n="ng-anchor",r="ng-anchor-out";this.$get=["$animateCss","$rootScope","$$AnimateRunner","$rootElement","$sniffer","$$jqLite","$document",function(t,i,o,a,s,c,l){if(!s.animations&&!s.transitions)return rt;var u,d=l[0].body,p=O(a),f=nt((u=p).parentNode&&11===u.parentNode.nodeType||d.contains(p)?p:d);return function(i){return i.from&&i.to?function(i,a,s,c){var l=m(i),u=m(a),p=[];if(Y(c,(function(i){var a=function(i,a,s){var c=nt(O(a).cloneNode(!0)),l=_(b(c));a.addClass(e),s.addClass(e),c.addClass(n),f.append(c);var u,p=v();if(!p&&!(u=y()))return w();var m=p||u;return{start:function(){var t,e=m.start();return e.done((function(){if(e=null,!u&&(u=y()))return(e=u.start()).done((function(){e=null,w(),t.complete()})),e;w(),t.complete()})),t=new o({end:n,cancel:n});function n(){e&&e.end()}}};function g(t){var e={},n=O(t).getBoundingClientRect();return Y(["width","height","top","left"],(function(t){var r=n[t];switch(t){case"top":r+=d.scrollTop;break;case"left":r+=d.scrollLeft}e[t]=Math.floor(r)+"px"})),e}function v(){var e=t(c,{addClass:r,delay:!0,from:g(a)});return e.$$willAnimate?e:null}function b(t){return t.attr("class")||""}function y(){var e=_(b(s)),n=h(e,l),r=h(l,e),i=t(c,{to:g(s),addClass:"ng-anchor-in "+n,removeClass:"ng-anchor-out "+r,delay:!0});return i.$$willAnimate?i:null}function w(){c.remove(),a.removeClass(e),s.removeClass(e)}}(0,i.out,i.in);a&&p.push(a)})),!l&&!u&&0===p.length)return;return{start:function(){var t=[];l&&t.push(l.start()),u&&t.push(u.start()),Y(p,(function(e){t.push(e.start())}));var e=new o({end:n,cancel:n});return o.all(t,(function(t){e.complete(t)})),e;function n(){Y(t,(function(t){t.end()}))}}}}(i.from,i.to,i.classes,i.anchors):m(i)};function _(t){return t.replace(/\bng-\S+\b/g,"")}function h(t,e){return tt(t)&&(t=t.split(" ")),tt(e)&&(e=e.split(" ")),t.filter((function(t){return-1===e.indexOf(t)})).join(" ")}function m(e){var n=e.element,r=e.options||{};e.structural&&(r.event=e.event,r.structural=!0,r.applyClassesEarly=!0,"leave"===e.event&&(r.onDone=r.domOperation)),r.preparationClasses&&(r.event=M(r.event,r.preparationClasses));var i=t(n,r);return i.$$willAnimate?i:null}}]}],at=["$animateProvider",function(t){this.$get=["$injector","$$AnimateRunner","$$jqLite",function(e,n,r){var i=k(r);return function(t,e,r,a){var s=!1;3===arguments.length&&Z(r)&&(a=r,r=null),a=C(a),r||(r=t.attr("class")||"",a.addClass&&(r+=" "+a.addClass),a.removeClass&&(r+=" "+a.removeClass));var c,l,u,d,p,f=a.addClass,_=a.removeClass,h=o(r);h.length&&("leave"===e?(d="leave",u="afterLeave"):(d="before"+e.charAt(0).toUpperCase()+e.substr(1),u=e),"enter"!==e&&"move"!==e&&(c=y(t,e,a,h,d)),l=y(t,e,a,h,u));if(c||l)return{$$willAnimate:!0,end:function(){return p?p.end():(g(),(p=new n).complete(!0)),p},start:function(){if(p)return p;var t;p=new n;var e=[];return c&&e.push((function(e){t=c(e)})),e.length?e.push((function(t){m(),t(!0)})):m(),l&&e.push((function(e){t=l(e)})),p.setHost({end:function(){i()},cancel:function(){i(!0)}}),n.chain(e,r),p;function r(t){g(),p.complete(t)}function i(e){s||((t||rt)(e),r(e))}}};function m(){a.domOperation(),i(t,a)}function g(){s=!0,m(),S(t,a)}function v(t,e,r,i,o){var a;switch(r){case"animate":a=[e,i.from,i.to,o];break;case"setClass":a=[e,f,_,o];break;case"addClass":a=[e,f,o];break;case"removeClass":a=[e,_,o];break;default:a=[e,o]}a.push(i);var s=t.apply(t,a);if(s)if(X(s.start)&&(s=s.start()),s instanceof n)s.done(o);else if(X(s))return s;return rt}function b(t,e,r,i,o){var a=[];return Y(i,(function(i){var s=i[o];s&&a.push((function(){var i,o,a=!1,c=function(t){a||(a=!0,(o||rt)(t),i.complete(!t))};return i=new n({end:function(){c()},cancel:function(){c(!0)}}),o=v(s,t,e,r,(function(t){c(!1===t)})),i}))})),a}function y(t,e,r,i,o){var a,s,c=b(t,e,r,i,o);0===c.length&&("beforeSetClass"===o?(a=b(t,"removeClass",r,i,"beforeRemoveClass"),s=b(t,"addClass",r,i,"beforeAddClass")):"setClass"===o&&(a=b(t,"removeClass",r,i,"removeClass"),s=b(t,"addClass",r,i,"addClass")),a&&(c=c.concat(a)),s&&(c=c.concat(s)));if(0!==c.length)return function(t){var e=[];return c.length&&Y(c,(function(t){e.push(t())})),e.length?n.all(e,t):t(),function(t){Y(e,(function(e){t?e.cancel():e.end()}))}}}};function o(n){n=K(n)?n:n.split(" ");for(var r=[],i={},o=0;o<n.length;o++){var a=n[o],s=t.$$registeredAnimations[a];s&&!i[a]&&(r.push(e.get(s)),i[a]=!0)}return r}}]}],st=["$$animationProvider",function(t){t.drivers.push("$$animateJsDriver"),this.$get=["$$animateJs","$$AnimateRunner",function(t,e){return function(t){if(t.from&&t.to){var r=n(t.from),i=n(t.to);if(!r&&!i)return;return{start:function(){var t=[];r&&t.push(r.start()),i&&t.push(i.start()),e.all(t,(function(t){n.complete(t)}));var n=new e({end:o(),cancel:o()});return n;function o(){return function(){Y(t,(function(t){t.end()}))}}}}}return n(t)};function n(e){var n=e.element,r=e.event,i=e.options,o=e.classes;return t(n,r,o,i)}}]}],ct="data-ng-animate",lt="$ngAnimatePin",ut=["$animateProvider",function(e){var n=this.rules={skip:[],cancel:[],join:[]};function r(t,e){if(t&&e){var n=function(t){if(!t)return null;var e=t.split(" "),n=Object.create(null);return Y(e,(function(t){n[t]=!0})),n}(e);return t.split(" ").some((function(t){return n[t]}))}}function i(t,e,r){return n[t].some((function(t){return t(e,r)}))}function o(t,e){var n=(t.addClass||"").length>0,r=(t.removeClass||"").length>0;return e?n&&r:n||r}n.join.push((function(t,e){return!t.structural&&o(t)})),n.skip.push((function(t,e){return!t.structural&&!o(t)})),n.skip.push((function(t,e){return"leave"===e.event&&t.structural})),n.skip.push((function(t,e){return e.structural&&2===e.state&&!t.structural})),n.cancel.push((function(t,e){return e.structural&&t.structural})),n.cancel.push((function(t,e){return 2===e.state&&t.structural})),n.cancel.push((function(t,e){if(e.structural)return!1;var n=t.addClass,i=t.removeClass,o=e.addClass,a=e.removeClass;return!(et(n)&&et(i)||et(o)&&et(a))&&(r(n,a)||r(i,o))})),this.$get=["$$rAF","$rootScope","$rootElement","$document","$$Map","$$animation","$$AnimateRunner","$templateRequest","$$jqLite","$$forceReflow","$$isDocumentHidden",function(n,r,c,u,d,p,f,_,h,m,g){var v=new d,y=new d,A=null;var E=r.$watch((function(){return 0===_.totalPendingRequests}),(function(t){t&&(E(),r.$$postDigest((function(){r.$$postDigest((function(){null===A&&(A=!0)}))})))})),T=Object.create(null),q=e.customFilter(),P=e.classNameFilter(),I=function(){return!0},R=q||I,D=P?function(t,e){var n=[t.getAttribute("class"),e.addClass,e.removeClass].join(" ");return P.test(n)}:I,z=k(h);function L(t,e){return j(t,e,{})}var N=t.Node.prototype.contains||function(t){return this===t||!!(16&this.compareDocumentPosition(t))};function F(t,e,n){var r=x(e);return t.filter((function(t){return!(t.node===r&&(!n||t.callback===n))}))}function U(t,e){"close"!==t||e.parentNode||V.off(e)}var V={on:function(t,e,n){var r=x(e);T[t]=T[t]||[],T[t].push({node:r,callback:n}),nt(e).on("$destroy",(function(){v.get(r)||V.off(t,e,n)}))},off:function(t,e,n){if(1!==arguments.length||tt(arguments[0])){var r=T[t];r&&(T[t]=1===arguments.length?null:F(r,e,n))}else for(var i in e=arguments[0],T)T[i]=F(T[i],e)},pin:function(t,e){b(Q(t),"element","not an element"),b(Q(e),"parentElement","not an element"),t.data(lt,e)},push:function(t,e,d,_){return(d=d||{}).domOperation=_,function(t,e,d){var _=W(d),h=$(t),m=O(h),b=m&&m.parentNode;_=C(_);var x=new f,k=(E=!1,function(t){E?t():r.$$postDigest((function(){E=!0,t()}))});var E;K(_.addClass)&&(_.addClass=_.addClass.join(" "));_.addClass&&!tt(_.addClass)&&(_.addClass=null);K(_.removeClass)&&(_.removeClass=_.removeClass.join(" "));_.removeClass&&!tt(_.removeClass)&&(_.removeClass=null);_.from&&!Z(_.from)&&(_.from=null);_.to&&!Z(_.to)&&(_.to=null);if(!(A&&m&&R(m,e,d)&&D(m,_)))return it(),x;var q=["enter","move","leave"].indexOf(e)>=0,P=g(),I=P||y.get(m),F=!I&&v.get(m)||{},V=!!F.state;I||V&&1===F.state||(I=!function(t,e,n){var r,i=u[0].body,o=O(c),a=t===i||"HTML"===t.nodeName,s=t===o,d=!1,p=y.get(t),f=nt.data(t,lt);f&&(e=O(f));for(;e&&(s||(s=e===o),1===e.nodeType);){var _=v.get(e)||{};if(!d){var h=y.get(e);if(!0===h&&!1!==p){p=!0;break}!1===h&&(p=!1),d=_.structural}if(et(r)||!0===r){var m=nt.data(e,l);J(m)&&(r=m)}if(d&&!1===r)break;if(a||(a=e===i),a&&s)break;e=s||!(f=nt.data(e,lt))?e.parentNode:O(f)}return(!d||r)&&!0!==p&&s&&a}(m,b));if(I)return P&&rt(x,e,"start"),it(),P&&rt(x,e,"close"),x;q&&function(t){var e=t.querySelectorAll("[data-ng-animate]");Y(e,(function(t){var e=parseInt(t.getAttribute(ct),10),n=v.get(t);if(n)switch(e){case 2:n.runner.end();case 1:v.delete(t)}}))}(m);var G={structural:q,element:h,event:e,addClass:_.addClass,removeClass:_.removeClass,close:it,options:_,runner:x};if(V){if(i("skip",G,F))return 2===F.state?(it(),x):(j(h,F,G),F.runner);if(i("cancel",G,F))if(2===F.state)F.runner.end();else{if(!F.structural)return j(h,F,G),F.runner;F.close()}else if(i("join",G,F)){if(2!==F.state)return function(t,e,n){var r="";e&&(r=w(e,"ng-",!0)),n.addClass&&(r=M(r,w(n.addClass,a))),n.removeClass&&(r=M(r,w(n.removeClass,s))),r.length&&(n.preparationClasses=r,t.addClass(r))}(h,q?e:null,_),e=G.event=F.event,_=j(h,F,G),F.runner;L(h,G)}}else L(h,G);var Q=G.structural;Q||(Q="animate"===G.event&&Object.keys(G.options.to||{}).length>0||o(G));if(!Q)return it(),H(m),x;var X=(F.counter||0)+1;return G.counter=X,B(m,1,G),r.$$postDigest((function(){h=$(t);var n=v.get(m),r=!n;n=n||{};var i=(h.parent()||[]).length>0&&("animate"===n.event||n.structural||o(n));if(r||n.counter!==X||!i)return r&&(z(h,_),S(h,_)),(r||q&&n.event!==e)&&(_.domOperation(),x.end()),void(i||H(m));e=!n.structural&&o(n,!0)?"setClass":n.event,B(m,2);var a=p(h,e,n.options);x.setHost(a),rt(x,e,"start",{}),a.done((function(t){it(!t);var n=v.get(m);n&&n.counter===X&&H(m),rt(x,e,"close",{})}))})),x;function rt(t,e,r,i){k((function(){var t=function(t,e,n){var r=[],i=T[n];return i&&Y(i,(function(i){(N.call(i.node,e)||"leave"===n&&N.call(i.node,t))&&r.push(i.callback)})),r}(b,m,e);t.length?n((function(){Y(t,(function(t){t(h,r,i)})),U(r,m)})):U(r,m)})),t.progress(e,r,i)}function it(t){!function(t,e){e.preparationClasses&&(t.removeClass(e.preparationClasses),e.preparationClasses=null),e.activeClasses&&(t.removeClass(e.activeClasses),e.activeClasses=null)}(h,_),z(h,_),S(h,_),_.domOperation(),x.complete(!t)}}(t,e,d)},enabled:function(t,e){var n=arguments.length;if(0===n)e=!!A;else{var r=Q(t);if(r){var i=O(t);1===n?e=!y.get(i):y.set(i,!e)}else e=A=!!t}return e}};return V;function H(t){t.removeAttribute(ct),v.delete(t)}function B(t,e,n){(n=n||{}).state=e,t.setAttribute(ct,e);var r=v.get(t),i=r?G(r,n):n;v.set(t,i)}}]}],dt=["$animateProvider",function(t){var e="ng-animate-ref",n=this.drivers=[],r="$$animationRunner";function i(t){return t.data(r)}this.$get=["$$jqLite","$rootScope","$injector","$$AnimateRunner","$$Map","$$rAFScheduler",function(t,o,a,s,l,u){var d=[],p=k(t);return function(f,_,h){h=C(h);var m=["enter","move","leave"].indexOf(_)>=0,g=new s({end:function(){k()},cancel:function(){k(!0)}});if(!n.length)return k(),g;!function(t,e){t.data(r,e)}(f,g);var v,b=y(f.attr("class"),y(h.addClass,h.removeClass)),w=h.tempClasses;return w&&(b+=" "+w,h.tempClasses=null),m&&(v="ng-"+_+"-prepare",t.addClass(f,v)),d.push({element:f,classes:b,event:_,structural:m,options:h,beforeStart:function(){f.addClass(c),w&&t.addClass(f,w);v&&(t.removeClass(f,v),v=null)},close:k}),f.on("$destroy",x),d.length>1||o.$$postDigest((function(){var t=[];Y(d,(function(e){i(e.element)?t.push(e):e.close()})),d.length=0;var r=function(t){var n=[],r={};Y(t,(function(t,i){var o=O(t.element),a=t.event,s=["enter","move"].indexOf(a)>=0,c=t.structural?function(t){var n="[ng-animate-ref]",r=t.hasAttribute(e)?[t]:t.querySelectorAll(n),i=[];return Y(r,(function(t){var n=t.getAttribute(e);n&&n.length&&i.push(t)})),i}(o):[];if(c.length){var l=s?"to":"from";Y(c,(function(t){var n=t.getAttribute(e);r[n]=r[n]||{},r[n][l]={animationID:i,element:nt(t)}}))}else n.push(t)}));var i={},o={};return Y(r,(function(e,r){var a=e.from,s=e.to;if(a&&s){var c=t[a.animationID],l=t[s.animationID],u=a.animationID.toString();if(!o[u]){var d=o[u]={structural:!0,beforeStart:function(){c.beforeStart(),l.beforeStart()},close:function(){c.close(),l.close()},classes:$(c.classes,l.classes),from:c,to:l,anchors:[]};d.classes.length?n.push(d):(n.push(c),n.push(l))}o[u].anchors.push({out:a.element,in:s.element})}else{var p=a?a.animationID:s.animationID,f=p.toString();i[f]||(i[f]=!0,n.push(t[p]))}})),n}(t),o=[];Y(r,(function(t){o.push({domNode:O(t.from?t.from.element:t.element),fn:function(){t.beforeStart();var e,r=t.close;if(i(t.anchors?t.from.element||t.to.element:t.element)){var o=function(t){for(var e=n.length-1;e>=0;e--){var r=n[e],i=a.get(r)(t);if(i)return i}}(t);o&&(e=o.start)}if(e){var s=e();s.done((function(t){r(!t)})),function(t,e){t.from&&t.to?(n(t.from.element),n(t.to.element)):n(t.element);function n(t){var n=i(t);n&&n.setHost(e)}}(t,s)}else r()}})})),u(function(t){var e,n={children:[]},r=new l;for(e=0;e<t.length;e++){var i=t[e];r.set(i.domNode,t[e]={domNode:i.domNode,fn:i.fn,children:[]})}for(e=0;e<t.length;e++)o(t[e]);return function(t){var e,n=[],r=[];for(e=0;e<t.children.length;e++)r.push(t.children[e]);var i=r.length,o=0,a=[];for(e=0;e<r.length;e++){var s=r[e];i<=0&&(i=o,o=0,n.push(a),a=[]),a.push(s.fn),s.children.forEach((function(t){o++,r.push(t)})),i--}return a.length&&n.push(a),n}(n);function o(t){if(t.processed)return t;t.processed=!0;var e,i=t.domNode,a=i.parentNode;for(r.set(i,t);a;){if(e=r.get(a)){e.processed||(e=o(e));break}a=a.parentNode}return(e||n).children.push(t),t}}(o))})),g;function $(t,e){t=t.split(" "),e=e.split(" ");for(var n=[],r=0;r<t.length;r++){var i=t[r];if("ng-"!==i.substring(0,3))for(var o=0;o<e.length;o++)if(i===e[o]){n.push(i);break}}return n.join(" ")}function x(){var t=i(f);!t||"leave"===_&&h.$$domOperationFired||t.end()}function k(e){f.off("$destroy",x),function(t){t.removeData(r)}(f),p(f,h),S(f,h),h.domOperation(),w&&t.removeClass(f,w),f.removeClass(c),g.complete(!e)}}}]}];e.module("ngAnimate",[],(function(){rt=e.noop,W=e.copy,G=e.extend,nt=e.element,Y=e.forEach,K=e.isArray,tt=e.isString,Z=e.isObject,et=e.isUndefined,J=e.isDefined,X=e.isFunction,Q=e.isElement})).info({angularVersion:"1.6.6"}).directive("ngAnimateSwap",["$animate","$rootScope",function(t,e){return{restrict:"A",transclude:"element",terminal:!0,priority:600,link:function(e,n,r,i,o){var a,s;e.$watchCollection(r.ngAnimateSwap||r.for,(function(r){a&&t.leave(a),s&&(s.$destroy(),s=null),(r||0===r)&&(s=e.$new(),o(s,(function(e){a=e,t.enter(e,null,n)})))}))}}}]).directive("ngAnimateChildren",I).factory("$$rAFScheduler",["$$rAF",function(t){var e,n;function r(t){e=e.concat(t),i()}return e=r.queue=[],r.waitUntilQuiet=function(e){n&&n(),n=t((function(){n=null,e(),i()}))},r;function i(){if(e.length){for(var r=e.shift(),o=0;o<r.length;o++)r[o]();n||t((function(){n||i()}))}}}]).provider("$$animateQueue",ut).provider("$$animation",dt).provider("$animateCss",it).provider("$$animateCssDriver",ot).provider("$$animateJs",at).provider("$$animateJsDriver",st)}(window,window.angular)},function(t,e){!function(){"use strict";!function(){for(var t=0,e=["webkit","moz"],n=0;n<e.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[e[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[e[n]+"CancelAnimationFrame"]||window[e[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(e){var n=(new Date).getTime(),r=Math.max(0,16-(n-t)),i=window.setTimeout((function(){e(n+r)}),r);return t=n+r,i}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){window.clearTimeout(t)})}(),angular.module("angular-svg-round-progressbar",[]),angular.module("angular-svg-round-progressbar").constant("roundProgressConfig",{max:50,semi:!1,rounded:!1,responsive:!1,clockwise:!0,radius:100,color:"#45ccce",bgcolor:"#eaeaea",stroke:15,duration:800,animation:"easeOutCubic",animationDelay:0,offset:0}),angular.module("angular-svg-round-progressbar").service("roundProgressService",["$window",function(t){var e={},n=angular.isNumber,r=document.head.querySelector("base");function i(t,e,n,r){var i=(r-90)*Math.PI/180;return t+n*Math.cos(i)+" "+(e+n*Math.sin(i))}return e.isSupported=!(!document.createElementNS||!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect),e.resolveColor=r&&r.href?function(t){var e=t.indexOf("#");return e>-1&&t.indexOf("url")>-1?t.slice(0,e)+window.location.href+t.slice(e):t}:function(t){return t},e.toNumber=function(t){return n(t)?t:parseFloat((t+"").replace(",","."))},e.getOffset=function(t,e){var n=+e.offset||0;if("inherit"===e.offset)for(var r=t.$parent;r;){if(r.hasOwnProperty("$$getRoundProgressOptions")){var i=r.$$getRoundProgressOptions();n+=(+i.offset||0)+(+i.stroke||0)}r=r.$parent}return n},e.getTimestamp=t.performance&&t.performance.now&&angular.isNumber(t.performance.now())?function(){return t.performance.now()}:function(){return(new t.Date).getTime()},e.updateState=function(t,e,n,r,o,a){if(!o)return r;var s=t>0?Math.min(t,e):0,c=0===e?0:s/e*(a?180:359.9999),l="M "+i(o,o,n,c)+" A "+n+" "+n+" 0 "+(c<=180?0:1)+" 0 "+i(o,o,n,0);return r.attr("d",l)},e.animations={linearEase:function(t,e,n,r){return n*t/r+e},easeInQuad:function(t,e,n,r){return n*(t/=r)*t+e},easeOutQuad:function(t,e,n,r){return-n*(t/=r)*(t-2)+e},easeInOutQuad:function(t,e,n,r){return(t/=r/2)<1?n/2*t*t+e:-n/2*(--t*(t-2)-1)+e},easeInCubic:function(t,e,n,r){return n*(t/=r)*t*t+e},easeOutCubic:function(t,e,n,r){return n*((t=t/r-1)*t*t+1)+e},easeInOutCubic:function(t,e,n,r){return(t/=r/2)<1?n/2*t*t*t+e:n/2*((t-=2)*t*t+2)+e},easeInQuart:function(t,e,n,r){return n*(t/=r)*t*t*t+e},easeOutQuart:function(t,e,n,r){return-n*((t=t/r-1)*t*t*t-1)+e},easeInOutQuart:function(t,e,n,r){return(t/=r/2)<1?n/2*t*t*t*t+e:-n/2*((t-=2)*t*t*t-2)+e},easeInQuint:function(t,e,n,r){return n*(t/=r)*t*t*t*t+e},easeOutQuint:function(t,e,n,r){return n*((t=t/r-1)*t*t*t*t+1)+e},easeInOutQuint:function(t,e,n,r){return(t/=r/2)<1?n/2*t*t*t*t*t+e:n/2*((t-=2)*t*t*t*t+2)+e},easeInSine:function(t,e,n,r){return-n*Math.cos(t/r*(Math.PI/2))+n+e},easeOutSine:function(t,e,n,r){return n*Math.sin(t/r*(Math.PI/2))+e},easeInOutSine:function(t,e,n,r){return-n/2*(Math.cos(Math.PI*t/r)-1)+e},easeInExpo:function(t,e,n,r){return 0==t?e:n*Math.pow(2,10*(t/r-1))+e},easeOutExpo:function(t,e,n,r){return t==r?e+n:n*(1-Math.pow(2,-10*t/r))+e},easeInOutExpo:function(t,e,n,r){return 0==t?e:t==r?e+n:(t/=r/2)<1?n/2*Math.pow(2,10*(t-1))+e:n/2*(2-Math.pow(2,-10*--t))+e},easeInCirc:function(t,e,n,r){return-n*(Math.sqrt(1-(t/=r)*t)-1)+e},easeOutCirc:function(t,e,n,r){return n*Math.sqrt(1-(t=t/r-1)*t)+e},easeInOutCirc:function(t,e,n,r){return(t/=r/2)<1?-n/2*(Math.sqrt(1-t*t)-1)+e:n/2*(Math.sqrt(1-(t-=2)*t)+1)+e},easeInElastic:function(t,e,n,r){var i=1.70158,o=0,a=n;return 0==t?e:1==(t/=r)?e+n:(o||(o=.3*r),a<Math.abs(n)?(a=n,i=o/4):i=o/(2*Math.PI)*Math.asin(n/a),-a*Math.pow(2,10*(t-=1))*Math.sin((t*r-i)*(2*Math.PI)/o)+e)},easeOutElastic:function(t,e,n,r){var i=1.70158,o=0,a=n;return 0==t?e:1==(t/=r)?e+n:(o||(o=.3*r),a<Math.abs(n)?(a=n,i=o/4):i=o/(2*Math.PI)*Math.asin(n/a),a*Math.pow(2,-10*t)*Math.sin((t*r-i)*(2*Math.PI)/o)+n+e)},easeInOutElastic:function(t,e,n,r){var i=1.70158,o=0,a=n;return 0==t?e:2==(t/=r/2)?e+n:(o||(o=r*(.3*1.5)),a<Math.abs(n)?(a=n,i=o/4):i=o/(2*Math.PI)*Math.asin(n/a),t<1?a*Math.pow(2,10*(t-=1))*Math.sin((t*r-i)*(2*Math.PI)/o)*-.5+e:a*Math.pow(2,-10*(t-=1))*Math.sin((t*r-i)*(2*Math.PI)/o)*.5+n+e)},easeInBack:function(t,e,n,r,i){return null==i&&(i=1.70158),n*(t/=r)*t*((i+1)*t-i)+e},easeOutBack:function(t,e,n,r,i){return null==i&&(i=1.70158),n*((t=t/r-1)*t*((i+1)*t+i)+1)+e},easeInOutBack:function(t,e,n,r,i){return null==i&&(i=1.70158),(t/=r/2)<1?n/2*(t*t*((1+(i*=1.525))*t-i))+e:n/2*((t-=2)*t*((1+(i*=1.525))*t+i)+2)+e},easeInBounce:function(t,n,r,i){return r-e.animations.easeOutBounce(i-t,0,r,i)+n},easeOutBounce:function(t,e,n,r){return(t/=r)<1/2.75?n*(7.5625*t*t)+e:t<2/2.75?n*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?n*(7.5625*(t-=2.25/2.75)*t+.9375)+e:n*(7.5625*(t-=2.625/2.75)*t+.984375)+e},easeInOutBounce:function(t,n,r,i){return t<i/2?.5*e.animations.easeInBounce(2*t,0,r,i)+n:.5*e.animations.easeOutBounce(2*t-i,0,r,i)+.5*r+n}},e}]),angular.module("angular-svg-round-progressbar").directive("roundProgress",["$window","roundProgressService","roundProgressConfig",function(t,e,n){var r={restrict:"EA",replace:!0,transclude:!0,scope:{current:"=",max:"=",semi:"=",rounded:"=",clockwise:"=",responsive:"=",onRender:"=",radius:"@",color:"@",bgcolor:"@",stroke:"@",duration:"@",animation:"@",offset:"@",animationDelay:"@"}};return e.isSupported?angular.extend(r,{link:function(i,o,a){var s,c=!o.hasClass("round-progress-wrapper"),l=c?o:o.find("svg").eq(0),u=l.find("path").eq(0),d=l.find("circle").eq(0),p=angular.copy(n),f=0;i.$$getRoundProgressOptions=function(){return p};var _=function(){var t=p.semi,n=p.responsive,r=+p.radius||0,a=+p.stroke,s=2*r,f=r-a/2-e.getOffset(i,p);l.css({top:0,left:0,position:n?"absolute":"static",width:n?"100%":s+"px",height:n?"100%":(t?r:s)+"px",overflow:"hidden"}),c||l[0].setAttribute("viewBox","0 0 "+s+" "+(t?r:s)),o.css({width:n?"100%":"auto",position:"relative",paddingBottom:n?t?"50%":"100%":0}),u.css({stroke:e.resolveColor(p.color),strokeWidth:a,strokeLinecap:p.rounded?"round":"butt"}),t?u.attr("transform",p.clockwise?"translate(0, "+s+") rotate(-90)":"translate("+s+", "+s+") rotate(90) scale(-1, 1)"):u.attr("transform",p.clockwise?"":"scale(-1, 1) translate("+-s+" 0)"),d.attr({cx:r,cy:r,r:f>=0?f:0}).css({stroke:e.resolveColor(p.bgcolor),strokeWidth:a})},h=function(n,r,a){var s=e.toNumber(p.max||0),c=n>0?t.Math.min(n,s):0,d=r===c||r<0?0:r||0,_=c-d,h=e.animations[p.animation],m=+p.duration||0,g=a||n>s&&r>s||n<0&&r<0||m<25,v=e.toNumber(p.radius),b=v-p.stroke/2-e.getOffset(i,p),y=p.semi;l.attr({"aria-valuemax":s,"aria-valuenow":c});var w=function(){if(g)e.updateState(c,s,b,u,v,y),p.onRender&&p.onRender(c,p,o);else{var n=e.getTimestamp(),r=++f;t.requestAnimationFrame((function i(){var a=t.Math.min(e.getTimestamp()-n,m),c=h(a,d,_,m);e.updateState(c,s,b,u,v,y),p.onRender&&p.onRender(c,p,o),r===f&&a<m&&t.requestAnimationFrame(i)}))}};p.animationDelay>0?(t.clearTimeout(undefined),t.setTimeout(w,p.animationDelay)):w()},m=Object.keys(r.scope).filter((function(t){return g(t)&&"current"!==t}));function g(t){return a.hasOwnProperty(t)}i.$watchGroup(m,(function(t){for(var e=0;e<t.length;e++)void 0!==t[e]&&(p[m[e]]=t[e]);_(),i.$broadcast("$parentOffsetChanged"),"inherit"!==p.offset||s?"inherit"!==p.offset&&s&&s():s=i.$on("$parentOffsetChanged",(function(){h(i.current,i.current,!0),_()}))})),i.$watchGroup(["current","max","radius","stroke","semi","offset"].filter(g),(function(t,n){h(e.toNumber(t[0]),e.toNumber(n[0]))}))},template:function(t){for(var e=t.parent(),n="round-progress",r=['<svg class="round-progress" xmlns="http://www.w3.org/2000/svg" role="progressbar" aria-valuemin="0">','<circle fill="none"/>','<path fill="none"/>',"<g ng-transclude></g>","</svg>"];e.length&&e[0].nodeName.toLowerCase()!==n&&void 0===e.attr(n);)e=e.parent();return e&&e.length||(r.unshift('<div class="round-progress-wrapper">'),r.push("</div>")),r.join("\n")}}):angular.extend(r,{template:'<div class="round-progress" ng-transclude></div>'})}])}()},function(t,e){!function(){function t(t){return t.replace(/[A-Z]/g,(function(t){return"-"+t.toLowerCase()}))}angular.module("ngComponentRouter",[]).directive("ngOutlet",["$animate","$q","$rootRouter",function(e,n,r){var i=r;return{restrict:"AE",transclude:"element",terminal:!0,priority:400,require:["?^^ngOutlet","ngOutlet"],link:function(r,o,a,s,c){var l=function(){function i(t,e){this.controller=t,this.router=e}return i.prototype.cleanupLastView=function(){var t=this;this.previousLeaveAnimation&&(e.cancel(this.previousLeaveAnimation),this.previousLeaveAnimation=null),this.currentScope&&(this.currentScope.$destroy(),this.currentScope=null),this.currentElement&&(this.previousLeaveAnimation=e.leave(this.currentElement),this.previousLeaveAnimation.then((function(){return t.previousLeaveAnimation=null})),this.currentElement=null)},i.prototype.reuse=function(t){var e=n.when(!0),r=this.currentInstruction;return this.currentInstruction=t,this.currentController&&this.currentController.$routerOnReuse&&(e=n.when(this.currentController.$routerOnReuse(this.currentInstruction,r))),e},i.prototype.routerCanReuse=function(t){var e;return e=!(!this.currentInstruction||this.currentInstruction.componentType!==t.componentType)&&(this.currentController&&this.currentController.$routerCanReuse?this.currentController.$routerCanReuse(t,this.currentInstruction):t===this.currentInstruction||angular.equals(t.params,this.currentInstruction.params)),n.when(e)},i.prototype.routerCanDeactivate=function(t){return this.currentController&&this.currentController.$routerCanDeactivate?n.when(this.currentController.$routerCanDeactivate(t,this.currentInstruction)):n.when(!0)},i.prototype.deactivate=function(t){return this.currentController&&this.currentController.$routerOnDeactivate?n.when(this.currentController.$routerOnDeactivate(t,this.currentInstruction)):n.when()},i.prototype.activate=function(i){var a=this;this.previousInstruction=this.currentInstruction,this.currentInstruction=i;var s=this.controller.$$componentName=i.componentType;if("string"!=typeof s)throw new Error("Component is not a string for "+i.urlPath);this.controller.$$template="<"+t(s)+' $router="::$$router"></'+t(s)+">",this.controller.$$router=this.router.childRouter(i.componentType),this.controller.$$outlet=this;var l=r.$new();l.$$router=this.controller.$$router,this.deferredActivation=n.defer();var u=c(l,(function(t){e.enter(t,null,a.currentElement||o),a.cleanupLastView()}));return this.currentElement=u,this.currentScope=l,this.deferredActivation.promise},i}(),u=s[0],d=s[1],p=u&&u.$$router||i;d.$$currentComponent=null,p.registerPrimaryOutlet(new l(d,p))},controller:function(){},controllerAs:"$$ngOutlet"}}]).directive("ngOutlet",["$compile",function(t){return{restrict:"EA",priority:-400,require:"ngOutlet",link:function(e,n,r,i){var o=i.$$template;n.html(o),t(n.contents())(e)}}}]).directive("ngLink",["$rootRouter","$parse",function(t,e){return{require:"?^^ngOutlet",restrict:"A",link:function(n,r,i,o){var a=o&&o.$$router||t;if(!a)return;var s=null,c=i.ngLink||"";function l(e){s=a.generate(e),n.$watch((function(){return a.isRouteActive(s)}),(function(t){t?r.addClass("ng-link-active"):r.removeClass("ng-link-active")}));var i=s.toLinkUrl();return t._location.prepareExternalUrl(i)}var u=e(c);if(u.constant){var d=u();r.attr("href",l(d))}else n.$watch((function(){return u(n)}),(function(t){return r.attr("href",l(t))}),!0);r.on("click",(function(e){1===e.which&&s&&(t.navigateByInstruction(s),e.preventDefault())}))}}}]).directive("$router",["$q",function(t){return{require:"^ngOutlet",priority:-1e3,link:function(e,n,r,i){var o=t.when(),a=i.$$outlet,s=a.currentController=n.controller(i.$$componentName);s.$routerOnActivate&&(o=t.when(s.$routerOnActivate(a.currentInstruction,a.previousInstruction))),o.then(a.deferredActivation.resolve,a.deferredActivation.reject)}}}]),angular.module("ngComponentRouter").value("$route",null).value("$routerRootComponent",new Object).provider("$locationHashPrefix",["$locationProvider",function(t){var e=t.hashPrefix.bind(t),n=e();t.hashPrefix=function(t){return angular.isDefined(t)&&(n=t),e(t)},this.$get=function(){return n}}]).factory("$rootRouter",["$q","$location","$browser","$rootScope","$injector","$routerRootComponent","$locationHashPrefix",function(t,e,n,r,i,o,a){function s(t){return!!t}function c(t){return!t}function l(t){return"string"==typeof t}function u(t){return"function"==typeof t}function d(t){return Array.isArray(t)}function p(t){return t.name||"Root"}var f={resolve:function(e){return t.when(e)},reject:function(e){return t.reject(e)},catchError:function(t,e){return t.then(null,e)},all:function(e){return t.all(e)}},_={create:function(t,e){return e=e?e.replace(/g/g,""):"",new RegExp(t,e+"g")},firstMatch:function(t,e){return t.lastIndex=0,t.exec(e)},matcher:function(t,e){return t.lastIndex=0,{re:t,input:e}}},h={next:function(t){return t.re.exec(t.input)}},m={annotations:function(t){return t.annotations||[]}},g={create:function(){return{}},set:function(t,e,n){return t[e]=n},get:function(t,e){return t.hasOwnProperty(e)?t[e]:void 0},contains:function(t,e){return t.hasOwnProperty(e)},keys:function(t){return Object.keys(t)},isEmpty:function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0},delete:function(t,e){delete t[e]},forEach:function(t,e){for(var n in t)t.hasOwnProperty(n)&&e(t[n],n)},equals:function(t,e){var n,r=Object.keys(t),i=Object.keys(e);if(r.length!=i.length)return!1;for(var o=0;o<r.length;o++)if(t[n=r[o]]!==e[n])return!1;return!0},merge:function(t,e){var n={};for(var r in t)t.hasOwnProperty(r)&&(n[r]=t[r]);for(var r in e)e.hasOwnProperty(r)&&(n[r]=e[r]);return n}},v={toJSON:function(t){return JSON.stringify(t)},clear:function(t){t.length=0},create:function(){return[]},push:function(t,e){return t.push(e)},forEach:function(t,e){return t.forEach(e)},first:function(t){return t?t[0]:null},last:function(t){return(t&&t.length)>0?t[t.length-1]:null},map:function(t,e){return t.map(e)},join:function(t,e){return t.join(e)},reduce:function(t,e,n){return t.reduce(e,n)},filter:function(t,e){return t.filter(e)},concat:function(t,e){return t.concat(e)},slice:function(t){var e=void 0!==arguments[1]?arguments[1]:0,n=void 0!==arguments[2]?arguments[2]:null;return t.slice(e,null===n?void 0:n)},maximum:function(t,e){if(0==t.length)return null;for(var n=null,r=-1/0,i=0;i<t.length;i++){var o=t[i];if(!c(o)){var a=e(o);a>r&&(n=o,r=a)}}return n}},b={charCodeAt:function(t,e){return t.charCodeAt(e)},equals:function(t,e){return t===e},split:function(t,e){return t.split(e)},replaceAll:function(t,e,n){return t.replace(e,n)},replaceAllMapped:function(t,e,n){return t.replace(e,(function(t){return t.splice(-2,2),n.apply(null,t)}))},contains:function(t,e){return-1!=t.indexOf(e)}};function y(){}var w=Error,$={callNext:function(t,e){t.fn(e)},callEmit:function(t,e){t.fn(e)},subscribe:function(t,e){t.fn=e}};function x(){}x.prototype.subscribe=function(){},x.prototype.path=function(){return e.url()},x.prototype.go=function(t,n){return e.url(t+n)},x.prototype.prepareExternalUrl=function(t){return t.length>0&&!t.startsWith("/")&&(t="/"+t),e.$$html5?"."+t:"#"+a+t};var k={Injectable:function(){},OpaqueToken:function(){},Inject:function(){}},C=function(){return k},S=function(){function t(t){var e=this;this.map={},this.keys={},s(t)&&g.forEach(t,(function(t,n){e.map[n]=s(t)?t.toString():null,e.keys[n]=!0}))}return t.prototype.get=function(t){return g.delete(this.keys,t),this.map[t]},t.prototype.getUnused=function(){var t=this,e={};return g.keys(this.keys).forEach((function(n){return e[n]=g.get(t.map,n)})),e},t}();k.TouchMap=S,k.normalizeString=function(t){return c(t)?null:t.toString()};var A=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)};function E(t){var e=[];return c(t)?[]:(g.forEach(t,(function(t,n){e.push(!0===t?n:n+"="+t)})),e)}function j(t,e){return void 0===e&&(e="&"),E(t).join(e)}k.convertUrlParamsToArray=E,k.serializeParams=j;var O=function(){function t(t,e,n,r){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r={}),this.path=t,this.child=e,this.auxiliary=n,this.params=r}return t.prototype.toString=function(){return this.path+this._matrixParamsToString()+this._auxToString()+this._childString()},t.prototype.segmentToString=function(){return this.path+this._matrixParamsToString()},t.prototype._auxToString=function(){return this.auxiliary.length>0?"("+this.auxiliary.map((function(t){return t.toString()})).join("//")+")":""},t.prototype._matrixParamsToString=function(){var t=j(this.params,";");return t.length>0?";"+t:""},t.prototype._childString=function(){return s(this.child)?"/"+this.child.toString():""},t}();k.Url=O;var T=function(t){function e(e,n,r,i,o){void 0===n&&(n=null),void 0===r&&(r=[]),void 0===i&&(i=null),t.call(this,e,n,r,i),this.hash=o}return A(e,t),e.prototype.toString=function(){return this.path+this._auxToString()+this._childString()+this._queryParamsToString()+this._hashToString()},e.prototype.segmentToString=function(){return this.path+this._queryParamsToString()},e.prototype._queryParamsToString=function(){return c(this.params)?"":"?"+j(this.params)},e.prototype._hashToString=function(){return c(this.hash)?"":"#"+encodeURI(this.hash)},e}(O);k.RootUrl=T,k.pathSegmentsToUrl=function(t){for(var e=new O(t[t.length-1]),n=t.length-2;n>=0;n-=1)e=new O(t[n],e);return e};var q=_.create("^[^\\/\\(\\)\\?;=&#]+");function P(t){var e=_.firstMatch(q,t);return s(e)?e[0]:""}var M=_.create("^[^\\(\\)\\?;&#]+");var I=function(){function t(){}return t.prototype.peekStartsWith=function(t){return this._remaining.startsWith(t)},t.prototype.capture=function(t){if(!this._remaining.startsWith(t))throw new w('Expected "'+t+'".');this._remaining=this._remaining.substring(t.length)},t.prototype.parse=function(t){return this._remaining=t,""==t||"/"==t?new O(""):this.parseRoot()},t.prototype.parseRoot=function(){this.peekStartsWith("/")&&this.capture("/");var t=P(this._remaining);this.capture(t);var e=[];this.peekStartsWith("(")&&(e=this.parseAuxiliaryRoutes()),this.peekStartsWith(";")&&this.parseMatrixParams();var n=null;this.peekStartsWith("/")&&!this.peekStartsWith("//")&&(this.capture("/"),n=this.parseSegment());var r=null;this.peekStartsWith("?")&&(r=this.parseQueryParams());var i=null;return this.peekStartsWith("#")&&(this.capture("#"),i=decodeURI(this._remaining),this.capture(this._remaining)),new T(t,n,e,r,i)},t.prototype.parseSegment=function(){if(0==this._remaining.length)return null;this.peekStartsWith("/")&&this.capture("/");var t=P(this._remaining);this.capture(t);var e=null;this.peekStartsWith(";")&&(e=this.parseMatrixParams());var n=[];this.peekStartsWith("(")&&(n=this.parseAuxiliaryRoutes());var r=null;return this.peekStartsWith("/")&&!this.peekStartsWith("//")&&(this.capture("/"),r=this.parseSegment()),new O(t,r,n,e)},t.prototype.parseQueryParams=function(){var t={};for(this.capture("?"),this.parseQueryParam(t);this._remaining.length>0&&this.peekStartsWith("&");)this.capture("&"),this.parseQueryParam(t);return t},t.prototype.parseMatrixParams=function(){for(var t={};this._remaining.length>0&&this.peekStartsWith(";");)this.capture(";"),this.parseParam(t);return t},t.prototype.parseParam=function(t){var e=P(this._remaining);if(!c(e)){this.capture(e);var n=!0;if(this.peekStartsWith("=")){this.capture("=");var r=P(this._remaining);s(r)&&(n=r,this.capture(n))}t[e]=n}},t.prototype.parseQueryParam=function(t){var e=P(this._remaining);if(!c(e)){this.capture(e);var n,r,i=!0;if(this.peekStartsWith("=")){this.capture("=");var o=(n=this._remaining,s(r=_.firstMatch(M,n))?r[0]:"");s(o)&&(i=o,this.capture(i))}t[e]=i}},t.prototype.parseAuxiliaryRoutes=function(){var t=[];for(this.capture("(");!this.peekStartsWith(")")&&this._remaining.length>0;)t.push(this.parseSegment()),this.peekStartsWith("//")&&this.capture("//");return this.capture(")"),t},t}();k.UrlParser=I,k.parser=new I;var R=this&&this.__decorate||function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},D=function(){function t(t){this.name=t}return t=R([function(t){return t}],t)}();k.RouteLifecycleHook=D;var z=function(){function t(t){this.fn=t}return t=R([function(t){return t}],t)}();k.CanActivate=z,k.routerCanReuse=new D("routerCanReuse"),k.routerCanDeactivate=new D("routerCanDeactivate"),k.routerOnActivate=new D("routerOnActivate"),k.routerOnReuse=new D("routerOnReuse"),k.routerOnDeactivate=new D("routerOnDeactivate");var L=C();k.hasLifecycleHook=function(t,e){return e instanceof Type&&t.name in e.prototype},k.getCanActivateHook=function(t){for(var e=m.annotations(t),n=0;n<e.length;n+=1){var r=e[n];if(r instanceof L.CanActivate)return r.fn}return null};A=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},R=this&&this.__decorate||function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a};var N=C();k.RouteDefinition=N.RouteDefinition;var F=function(){function t(t){this.configs=t}return t=R([function(t){return t}],t)}();k.RouteConfig=F;var U=function(){function t(t){var e=t.name,n=t.useAsDefault,r=t.path,i=t.regex,o=t.serializer,a=t.data;this.name=e,this.useAsDefault=n,this.path=r,this.regex=i,this.serializer=o,this.data=a}return t=R([function(t){return t}],t)}();k.AbstractRoute=U;var V=function(t){function e(e){var n=e.name,r=e.useAsDefault,i=e.path,o=e.regex,a=e.serializer,s=e.data,c=e.component;t.call(this,{name:n,useAsDefault:r,path:i,regex:o,serializer:a,data:s}),this.aux=null,this.component=c}return A(e,t),e=R([function(t){return t}],e)}(U);k.Route=V;var H=function(t){function e(e){var n=e.name,r=e.useAsDefault,i=e.path,o=e.regex,a=e.serializer,s=e.data,c=e.component;t.call(this,{name:n,useAsDefault:r,path:i,regex:o,serializer:a,data:s}),this.component=c}return A(e,t),e=R([function(t){return t}],e)}(U);k.AuxRoute=H;var B=function(t){function e(e){var n=e.name,r=e.useAsDefault,i=e.path,o=e.regex,a=e.serializer,s=e.data,c=e.loader;t.call(this,{name:n,useAsDefault:r,path:i,regex:o,serializer:a,data:s}),this.aux=null,this.loader=c}return A(e,t),e=R([function(t){return t}],e)}(U);k.AsyncRoute=B;var W=function(t){function e(e){var n=e.name,r=e.useAsDefault,i=e.path,o=e.regex,a=e.serializer,s=e.data,c=e.redirectTo;t.call(this,{name:n,useAsDefault:r,path:i,regex:o,serializer:a,data:s}),this.redirectTo=c}return A(e,t),e=R([function(t){return t}],e)}(U);k.Redirect=W;var G=C();function Y(t,e){return function(){return t().then((function(t){return e.configFromComponent(t),t}))}}k.normalizeRouteConfig=function(t,e){if(t instanceof G.AsyncRoute){var n=Y(t.loader,e);return new G.AsyncRoute({path:t.path,loader:n,name:t.name,data:t.data,useAsDefault:t.useAsDefault})}if(t instanceof G.Route||t instanceof G.Redirect||t instanceof G.AuxRoute)return t;if(+!!t.component+ +!!t.redirectTo+ +!!t.loader!=1)throw new w('Route config should contain exactly one "component", "loader", or "redirectTo" property.');if(t.as&&t.name)throw new w('Route config should contain exactly one "as" or "name" property.');if(t.as&&(t.name=t.as),t.loader)return n=Y(t.loader,e),new G.AsyncRoute({path:t.path,loader:n,name:t.name,data:t.data,useAsDefault:t.useAsDefault});if(t.aux)return new G.AuxRoute({path:t.aux,component:t.component,name:t.name});if(t.component){if("object"==typeof t.component){var r=t.component;if("constructor"==r.type)return new G.Route({path:t.path,component:r.constructor,name:t.name,data:t.data,useAsDefault:t.useAsDefault});if("loader"==r.type)return new G.AsyncRoute({path:t.path,loader:r.loader,name:t.name,data:t.data,useAsDefault:t.useAsDefault});throw new w('Invalid component type "'+r.type+'". Valid types are "constructor" and "loader".')}return new G.Route(t)}return t.redirectTo?new G.Redirect({path:t.path,redirectTo:t.redirectTo}):t},k.assertComponentExists=function(t,e){if(!u(t))throw new w('Component for route "'+e+'" is not defined, or is not a class.')};var K=C(),J=function(){function t(t,e){void 0===e&&(e=null),this._loader=t,this._resolvedComponent=null,this.data=s(e)?new K.RouteData(e):K.BLANK_ROUTE_DATA}return t.prototype.resolveComponentType=function(){var t=this;return s(this._resolvedComponent)?this._resolvedComponent:this._resolvedComponent=this._loader().then((function(e){return t.componentType=e,e}))},t}();k.AsyncRouteHandler=J;K=C();var Q=function(){function t(t,e){this.componentType=t,this._resolvedComponent=null,this._resolvedComponent=f.resolve(t),this.data=s(e)?new K.RouteData(e):K.BLANK_ROUTE_DATA}return t.prototype.resolveComponentType=function(){return this._resolvedComponent},t}();k.SyncRouteHandler=Q;A=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)};var X=C(),Z=(K=C(),function(){});k.RouteMatch=Z;var tt=function(t){function e(e,n,r){t.call(this),this.instruction=e,this.remaining=n,this.remainingAux=r}return A(e,t),e}(Z);k.PathMatch=tt;var et=function(t){function e(e,n){t.call(this),this.redirectTo=e,this.specificity=n}return A(e,t),e}(Z);k.RedirectMatch=et;var nt=function(){function t(t,e){this._pathRecognizer=t,this.redirectTo=e,this.hash=this._pathRecognizer.hash}return Object.defineProperty(t.prototype,"path",{get:function(){return this._pathRecognizer.toString()},set:function(t){throw new w("you cannot set the path of a RedirectRule directly")},enumerable:!0,configurable:!0}),t.prototype.recognize=function(t){var e=null;return s(this._pathRecognizer.matchUrl(t))&&(e=new et(this.redirectTo,this._pathRecognizer.specificity)),f.resolve(e)},t.prototype.generate=function(t){throw new w("Tried to generate a redirect.")},t}();k.RedirectRule=nt;var rt=function(){function t(t,e,n){this._routePath=t,this.handler=e,this._routeName=n,this._cache=new Map,this.specificity=this._routePath.specificity,this.hash=this._routePath.hash,this.terminal=this._routePath.terminal}return Object.defineProperty(t.prototype,"path",{get:function(){return this._routePath.toString()},set:function(t){throw new w("you cannot set the path of a RouteRule directly")},enumerable:!0,configurable:!0}),t.prototype.recognize=function(t){var e=this,n=this._routePath.matchUrl(t);return c(n)?null:this.handler.resolveComponentType().then((function(t){var r=e._getInstruction(n.urlPath,n.urlParams,n.allParams);return new tt(r,n.rest,n.auxiliary)}))},t.prototype.generate=function(t){var e=this._routePath.generateUrl(t),n=e.urlPath,r=e.urlParams;return this._getInstruction(n,X.convertUrlParamsToArray(r),t)},t.prototype.generateComponentPathValues=function(t){return this._routePath.generateUrl(t)},t.prototype._getInstruction=function(t,e,n){if(c(this.handler.componentType))throw new w("Tried to get instruction before the type was loaded.");var r=t+"?"+e.join("&");if(this._cache.has(r))return this._cache.get(r);var i=new K.ComponentInstruction(t,e,this.handler.data,this.handler.componentType,this.terminal,this.specificity,n,this._routeName);return this._cache.set(r,i),i},t}();k.RouteRule=rt;var it=C(),ot=C(),at=C(),st=C(),ct=C(),lt=C(),ut=function(){function t(){this.rulesByName=new Map,this.auxRulesByName=new Map,this.auxRulesByPath=new Map,this.rules=[],this.defaultRule=null}return t.prototype.config=function(t){var e;if(s(t.name)&&t.name[0].toUpperCase()!=t.name[0]){var n=t.name[0].toUpperCase()+t.name.substring(1);throw new w('Route "'+t.path+'" with name "'+t.name+'" does not begin with an uppercase letter. Route names should be CamelCase like "'+n+'".')}if(t instanceof ot.AuxRoute){e=new st.SyncRouteHandler(t.component,t.data);var r=this._getRoutePath(t),i=new it.RouteRule(r,e,t.name);return this.auxRulesByPath.set(r.toString(),i),s(t.name)&&this.auxRulesByName.set(t.name,i),i.terminal}var o=!1;if(t instanceof ot.Redirect){var a=this._getRoutePath(t),c=new it.RedirectRule(a,t.redirectTo);return this._assertNoHashCollision(c.hash,t.path),this.rules.push(c),!0}t instanceof ot.Route?(e=new st.SyncRouteHandler(t.component,t.data),o=s(t.useAsDefault)&&t.useAsDefault):t instanceof ot.AsyncRoute&&(e=new at.AsyncRouteHandler(t.loader,t.data),o=s(t.useAsDefault)&&t.useAsDefault);var l=this._getRoutePath(t),u=new it.RouteRule(l,e,t.name);if(this._assertNoHashCollision(u.hash,t.path),o){if(s(this.defaultRule))throw new w("Only one route can be default");this.defaultRule=u}return this.rules.push(u),s(t.name)&&this.rulesByName.set(t.name,u),u.terminal},t.prototype.recognize=function(t){var e=[];return this.rules.forEach((function(n){var r=n.recognize(t);s(r)&&e.push(r)})),0==e.length&&s(t)&&t.auxiliary.length>0?[f.resolve(new it.PathMatch(null,null,t.auxiliary))]:e},t.prototype.recognizeAuxiliary=function(t){var e=this.auxRulesByPath.get(t.path);return s(e)?[e.recognize(t)]:[f.resolve(null)]},t.prototype.hasRoute=function(t){return this.rulesByName.has(t)},t.prototype.componentLoaded=function(t){return this.hasRoute(t)&&s(this.rulesByName.get(t).handler.componentType)},t.prototype.loadComponent=function(t){return this.rulesByName.get(t).handler.resolveComponentType()},t.prototype.generate=function(t,e){var n=this.rulesByName.get(t);return c(n)?null:n.generate(e)},t.prototype.generateAuxiliary=function(t,e){var n=this.auxRulesByName.get(t);return c(n)?null:n.generate(e)},t.prototype._assertNoHashCollision=function(t,e){this.rules.forEach((function(n){if(t==n.hash)throw new w("Configuration '"+e+"' conflicts with existing route '"+n.path+"'")}))},t.prototype._getRoutePath=function(t){if(s(t.regex)){if("function"==typeof t.serializer)return new lt.RegexRoutePath(t.regex,t.serializer);throw new w("Route provides a regex property, '"+t.regex+"', but no serializer property")}if(s(t.path)){var e=t instanceof ot.AuxRoute&&t.path.startsWith("/")?t.path.substring(1):t.path;return new ct.ParamRoutePath(e)}throw new w("Route must provide either a path or regex property")},t}();k.RuleSet=ut;var dt=function(t,e,n,r,i){this.urlPath=t,this.urlParams=e,this.allParams=n,this.auxiliary=r,this.rest=i};k.MatchedUrl=dt;var pt=function(t,e){this.urlPath=t,this.urlParams=e};k.GeneratedUrl=pt;var ft=C(),_t=(X=C(),C()),ht=function(){function t(){this.name="",this.specificity="",this.hash="..."}return t.prototype.generate=function(t){return""},t.prototype.match=function(t){return!0},t}(),mt=function(){function t(t){this.path=t,this.name="",this.specificity="2",this.hash=t}return t.prototype.match=function(t){return t==this.path},t.prototype.generate=function(t){return this.path},t}(),gt=function(){function t(t){this.name=t,this.specificity="1",this.hash=":"}return t.prototype.match=function(t){return t.length>0},t.prototype.generate=function(t){if(!g.contains(t.map,this.name))throw new w("Route generator for '"+this.name+"' was not included in parameters passed.");return function(t){if(c(t))return null;return t=b.replaceAll(t,yt,"%25"),t=b.replaceAll(t,wt,"%2F"),t=b.replaceAll(t,$t,"%28"),t=b.replaceAll(t,xt,"%29"),t=b.replaceAll(t,kt,"%3B")}(ft.normalizeString(t.get(this.name)))},t.paramMatcher=/^:([^\/]+)$/g,t}(),vt=function(){function t(t){this.name=t,this.specificity="0",this.hash="*"}return t.prototype.match=function(t){return!0},t.prototype.generate=function(t){return ft.normalizeString(t.get(this.name))},t.wildcardMatcher=/^\*([^\/]+)$/g,t}(),bt=function(){function t(t){this.routePath=t,this.terminal=!0,this._assertValidPath(t),this._parsePathString(t),this.specificity=this._calculateSpecificity(),this.hash=this._calculateHash();var e=this._segments[this._segments.length-1];this.terminal=!(e instanceof ht)}return t.prototype.matchUrl=function(t){for(var e,n=t,r={},i=[],o=0;o<this._segments.length;o+=1){var a=this._segments[o];if(e=n,a instanceof ht)break;if(s(e)){if(a instanceof vt){r[a.name]=e.toString(),i.push(e.toString()),n=null;break}if(i.push(e.path),a instanceof gt)r[a.name]=Ot(e.path);else if(!a.match(e.path))return null;n=e.child}else if(!a.match(""))return null}if(this.terminal&&s(n))return null;var c=i.join("/"),l=[],u=[],d=r;if(s(e)){var p=t instanceof X.RootUrl?t:e;s(p.params)?(d=g.merge(p.params,r),u=X.convertUrlParamsToArray(p.params)):d=r,l=e.auxiliary}return new _t.MatchedUrl(c,u,d,l,n)},t.prototype.generateUrl=function(t){for(var e=new ft.TouchMap(t),n=[],r=0;r<this._segments.length;r++){var i=this._segments[r];i instanceof ht||n.push(i.generate(e))}var o=n.join("/"),a=e.getUnused();return new _t.GeneratedUrl(o,a)},t.prototype.toString=function(){return this.routePath},t.prototype._parsePathString=function(t){t.startsWith("/")&&(t=t.substring(1));var e=t.split("/");this._segments=[];for(var n=e.length-1,r=0;r<=n;r++){var i,o=e[r];if(s(i=_.firstMatch(gt.paramMatcher,o)))this._segments.push(new gt(i[1]));else if(s(i=_.firstMatch(vt.wildcardMatcher,o)))this._segments.push(new vt(i[1]));else if("..."==o){if(r<n)throw new w('Unexpected "..." before the end of the path for "'+t+'".');this._segments.push(new ht)}else this._segments.push(new mt(o))}},t.prototype._calculateSpecificity=function(){var t,e,n=this._segments.length;if(0==n)e+="2";else for(e="",t=0;t<n;t++)e+=this._segments[t].specificity;return e},t.prototype._calculateHash=function(){var t,e=this._segments.length,n=[];for(t=0;t<e;t++)n.push(this._segments[t].hash);return n.join("/")},t.prototype._assertValidPath=function(e){if(b.contains(e,"#"))throw new w('Path "'+e+'" should not include "#". Use "HashLocationStrategy" instead.');var n=_.firstMatch(t.RESERVED_CHARS,e);if(s(n))throw new w('Path "'+e+'" contains "'+n[0]+'" which is not allowed in a route config.')},t.RESERVED_CHARS=_.create("//|\\(|\\)|;|\\?|="),t}();k.ParamRoutePath=bt;var yt=/%/g,wt=/\//g,$t=/\(/g,xt=/\)/g,kt=/;/g;var Ct=/%3B/gi,St=/%29/gi,At=/%28/gi,Et=/%2F/gi,jt=/%25/gi;function Ot(t){return c(t)?null:(t=b.replaceAll(t,Ct,";"),t=b.replaceAll(t,St,")"),t=b.replaceAll(t,At,"("),t=b.replaceAll(t,Et,"/"),t=b.replaceAll(t,jt,"%"))}_t=C();var Tt=function(){function t(t,e){this._reString=t,this._serializer=e,this.terminal=!0,this.specificity="2",this.hash=this._reString,this._regex=_.create(this._reString)}return t.prototype.matchUrl=function(t){var e=t.toString(),n={},r=_.matcher(this._regex,e),i=h.next(r);if(c(i))return null;for(var o=0;o<i.length;o+=1)n[o.toString()]=i[o];return new _t.MatchedUrl(e,[],n,[],null)},t.prototype.generateUrl=function(t){return this._serializer(t)},t.prototype.toString=function(){return this._reString},t}();k.RegexRoutePath=Tt;A=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)};var qt=function(){function t(t){this.params=t}return t.prototype.get=function(t){return normalizeBlank(g.get(this.params,t))},t}();k.RouteParams=qt;var Pt=function(){function t(t){void 0===t&&(t={}),this.data=t}return t.prototype.get=function(t){return normalizeBlank(g.get(this.data,t))},t}();k.RouteData=Pt,k.BLANK_ROUTE_DATA=new Pt;var Mt=function(){function t(t,e,n){this.component=t,this.child=e,this.auxInstruction=n}return Object.defineProperty(t.prototype,"urlPath",{get:function(){return s(this.component)?this.component.urlPath:""},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"urlParams",{get:function(){return s(this.component)?this.component.urlParams:[]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"specificity",{get:function(){var t="";return s(this.component)&&(t+=this.component.specificity),s(this.child)&&(t+=this.child.specificity),t},enumerable:!0,configurable:!0}),t.prototype.toRootUrl=function(){return this.toUrlPath()+this.toUrlQuery()},t.prototype._toNonRootUrl=function(){return this._stringifyPathMatrixAuxPrefixed()+(s(this.child)?this.child._toNonRootUrl():"")},t.prototype.toUrlQuery=function(){return this.urlParams.length>0?"?"+this.urlParams.join("&"):""},t.prototype.replaceChild=function(t){return new It(this.component,t,this.auxInstruction)},t.prototype.toUrlPath=function(){return this.urlPath+this._stringifyAux()+(s(this.child)?this.child._toNonRootUrl():"")},t.prototype.toLinkUrl=function(){return this.urlPath+this._stringifyAux()+(s(this.child)?this.child._toLinkUrl():"")+this.toUrlQuery()},t.prototype._toLinkUrl=function(){return this._stringifyPathMatrixAuxPrefixed()+(s(this.child)?this.child._toLinkUrl():"")},t.prototype._stringifyPathMatrixAuxPrefixed=function(){var t=this._stringifyPathMatrixAux();return t.length>0&&(t="/"+t),t},t.prototype._stringifyMatrixParams=function(){return this.urlParams.length>0?";"+this.urlParams.join(";"):""},t.prototype._stringifyPathMatrixAux=function(){return c(this.component)?"":this.urlPath+this._stringifyMatrixParams()+this._stringifyAux()},t.prototype._stringifyAux=function(){var t=[];return g.forEach(this.auxInstruction,(function(e,n){t.push(e._stringifyPathMatrixAux())})),t.length>0?"("+t.join("//")+")":""},t}();k.Instruction=Mt;var It=function(t){function e(e,n,r){t.call(this,e,n,r)}return A(e,t),e.prototype.resolveComponent=function(){return f.resolve(this.component)},e}(Mt);k.ResolvedInstruction=It;var Rt=function(t){function e(e,n){t.call(this,e,n,{})}return A(e,t),e.prototype.toLinkUrl=function(){return""},e.prototype._toLinkUrl=function(){return""},e}(It);k.DefaultInstruction=Rt;var Dt=function(t){function e(e,n,r){void 0===n&&(n=""),void 0===r&&(r=[]),t.call(this,null,null,{}),this._resolver=e,this._urlPath=n,this._urlParams=r}return A(e,t),Object.defineProperty(e.prototype,"urlPath",{get:function(){return s(this.component)?this.component.urlPath:s(this._urlPath)?this._urlPath:""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"urlParams",{get:function(){return s(this.component)?this.component.urlParams:s(this._urlParams)?this._urlParams:[]},enumerable:!0,configurable:!0}),e.prototype.resolveComponent=function(){var t=this;return s(this.component)?f.resolve(this.component):this._resolver().then((function(e){return t.child=s(e)?e.child:null,t.component=s(e)?e.component:null}))},e}(Mt);k.UnresolvedInstruction=Dt;var zt=function(t){function e(e,n,r,i){t.call(this,e,n,r),this._specificity=i}return A(e,t),Object.defineProperty(e.prototype,"specificity",{get:function(){return this._specificity},enumerable:!0,configurable:!0}),e}(It);k.RedirectInstruction=zt;var Lt=function(t,e,n,r,i,o,a,c){void 0===a&&(a=null),this.urlPath=t,this.urlParams=e,this.componentType=r,this.terminal=i,this.specificity=o,this.params=a,this.routeName=c,this.reuse=!1,this.routeData=s(n)?n:k.BLANK_ROUTE_DATA};k.ComponentInstruction=Lt;var Nt=C(),Ft=(ot=C(),it=C(),C()),Ut=(K=C(),C()),Vt=(X=C(),f.resolve(null));k.ROUTER_PRIMARY_COMPONENT=new Nt.OpaqueToken("RouterPrimaryComponent");var Ht=function(){function t(t){this._rootComponent=t,this._rules=new Map}return t.prototype.config=function(t,e){((e=Ut.normalizeRouteConfig(e,this))instanceof ot.Route||e instanceof ot.AuxRoute)&&Ut.assertComponentExists(e.component,e.path);var n=this._rules.get(t);c(n)&&(n=new Ft.RuleSet,this._rules.set(t,n));var r=n.config(e);e instanceof ot.Route&&(r?function(t,e){if(!u(t))return;var n=m.annotations(t);if(s(n))for(var r=0;r<n.length;r++){if(n[r]instanceof ot.RouteConfig)throw new w('Child routes are not allowed for "'+e+'". Use "..." on the parent\'s route path.')}}(e.component,e.path):this.configFromComponent(e.component))},t.prototype.configFromComponent=function(t){var e=this;if(u(t)&&!this._rules.has(t)){var n=m.annotations(t);if(s(n))for(var r=0;r<n.length;r++){var i=n[r];if(i instanceof ot.RouteConfig)i.configs.forEach((function(n){return e.config(t,n)}))}}},t.prototype.recognize=function(t,e){var n=X.parser.parse(t);return this._recognize(n,[])},t.prototype._recognize=function(t,e,n){var r=this;void 0===n&&(n=!1);var i=v.last(e),o=s(i)?i.component.componentType:this._rootComponent,a=this._rules.get(o);if(c(a))return Vt;var l=n?a.recognizeAuxiliary(t):a.recognize(t),u=l.map((function(t){return t.then((function(t){if(t instanceof it.PathMatch){var n=e.length>0?[v.last(e)]:[],i=r._auxRoutesToUnresolved(t.remainingAux,n),o=new K.ResolvedInstruction(t.instruction,null,i);if(c(t.instruction)||t.instruction.terminal)return o;var a=e.concat([o]);return r._recognize(t.remaining,a).then((function(t){return c(t)?null:t instanceof K.RedirectInstruction?t:(o.child=t,o)}))}if(t instanceof it.RedirectMatch){o=r.generate(t.redirectTo,e.concat([null]));return new K.RedirectInstruction(o.component,o.child,o.auxInstruction,t.specificity)}}))}));return!c(t)&&""!=t.path||0!=l.length?f.all(u).then(Bt):f.resolve(this.generateDefault(o))},t.prototype._auxRoutesToUnresolved=function(t,e){var n=this,r={};return t.forEach((function(t){r[t.path]=new K.UnresolvedInstruction((function(){return n._recognize(t,e,!0)}))})),r},t.prototype.generate=function(t,e,n){void 0===n&&(n=!1);var r,i=function(t){var e=[];return t.forEach((function(t){if(l(t)){var n=t;e=e.concat(n.split("/"))}else e.push(t)})),e}(t);if(""==v.first(i))i.shift(),r=v.first(e),e=[];else if(r=e.length>0?e.pop():null,"."==v.first(i))i.shift();else if(".."==v.first(i))for(;".."==v.first(i);){if(e.length<=0)throw new w('Link "'+v.toJSON(t)+'" has too many "../" segments.');r=e.pop(),i=v.slice(i,1)}else{var o=v.first(i),a=this._rootComponent,u=null;if(e.length>1){var d=e[e.length-1],p=e[e.length-2];a=d.component.componentType,u=p.component.componentType}else 1==e.length&&(a=e[0].component.componentType,u=this._rootComponent);var f=this.hasRoute(o,a),_=s(u)&&this.hasRoute(o,u);if(_&&f){var h='Link "'+v.toJSON(t)+'" is ambiguous, use "./" or "../" to disambiguate.';throw new w(h)}_&&(r=e.pop())}if(""==i[i.length-1]&&i.pop(),i.length>0&&""==i[0]&&i.shift(),i.length<1){h='Link "'+v.toJSON(t)+'" must include a route name.';throw new w(h)}for(var m=this._generate(i,e,r,n,t),g=e.length-1;g>=0;g--){var b=e[g];if(c(b))break;m=b.replaceChild(m)}return m},t.prototype._generate=function(t,e,n,r,i){var o=this;void 0===r&&(r=!1);var a=this._rootComponent,u=null,f={},_=v.last(e);if(s(_)&&s(_.component)&&(a=_.component.componentType),0==t.length){var h=this.generateDefault(a);if(c(h))throw new w('Link "'+v.toJSON(i)+'" does not resolve to a terminal instruction.');return h}s(n)&&!r&&(f=g.merge(n.auxInstruction,f),u=n.component);var m=this._rules.get(a);if(c(m))throw new w('Component "'+p(a)+'" has no route config.');var b,y=0,$={};if(y<t.length&&l(t[y])){var x=t[y];if(""==x||"."==x||".."==x)throw new w('"'+x+'/" is only allowed at the beginning of a link DSL.');if((y+=1)<t.length){var k=t[y];"object"!=typeof(b=k)||null===b||d(k)||($=k,y+=1)}var C=(r?m.auxRulesByName:m.rulesByName).get(x);if(c(C))throw new w('Component "'+p(a)+'" has no route named "'+x+'".');if(c(C.handler.componentType)){var S=C.generateComponentPathValues($);return new K.UnresolvedInstruction((function(){return C.handler.resolveComponentType().then((function(a){return o._generate(t,e,n,r,i)}))}),S.urlPath,X.convertUrlParamsToArray(S.urlParams))}u=r?m.generateAuxiliary(x,$):m.generate(x,$)}for(;y<t.length&&d(t[y]);){var A=[_],E=this._generate(t[y],A,null,!0,i);f[E.component.urlPath]=E,y+=1}var j=new K.ResolvedInstruction(u,null,f);if(s(u)&&s(u.componentType)){var O=null;if(u.terminal)t.length;else{var T=e.concat([j]),q=t.slice(y);O=this._generate(q,T,null,!1,i)}j.child=O}return j},t.prototype.hasRoute=function(t,e){var n=this._rules.get(e);return!c(n)&&n.hasRoute(t)},t.prototype.generateDefault=function(t){var e=this;if(c(t))return null;var n=this._rules.get(t);if(c(n)||c(n.defaultRule))return null;var r=null;if(s(n.defaultRule.handler.componentType)){var i=n.defaultRule.generate({});return n.defaultRule.terminal||(r=this.generateDefault(n.defaultRule.handler.componentType)),new K.DefaultInstruction(i,r)}return new K.UnresolvedInstruction((function(){return n.defaultRule.handler.resolveComponentType().then((function(n){return e.generateDefault(t)}))}))},t}();function Bt(t){if(0==(t=t.filter((function(t){return s(t)}))).length)return null;if(1==t.length)return t[0];var e=t[0];return t.slice(1).reduce((function(t,e){return-1==function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r+=1){var i=b.charCodeAt(t,r),o=b.charCodeAt(e,r)-i;if(0!=o)return o}return t.length-e.length}(e.specificity,t.specificity)?e:t}),e)}k.RouteRegistry=Ht;A=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)};var Wt=C(),Gt=f.resolve(!0),Yt=f.resolve(!1),Kt=function(){function t(t,e,n,r){this.registry=t,this.parent=e,this.hostComponent=n,this.root=r,this.navigating=!1,this.currentInstruction=null,this._currentNavigation=Gt,this._outlet=null,this._auxRouters=new Map,this._subject=new y}return t.prototype.childRouter=function(t){return this._childRouter=new Qt(this,t)},t.prototype.auxRouter=function(t){return new Qt(this,t)},t.prototype.registerPrimaryOutlet=function(t){if(s(t.name))throw new w("registerPrimaryOutlet expects to be called with an unnamed outlet.");if(s(this._outlet))throw new w("Primary outlet is already registered.");return this._outlet=t,s(this.currentInstruction)?this.commit(this.currentInstruction,!1):Gt},t.prototype.unregisterPrimaryOutlet=function(t){if(s(t.name))throw new w("registerPrimaryOutlet expects to be called with an unnamed outlet.");this._outlet=null},t.prototype.registerAuxOutlet=function(t){var e=t.name;if(c(e))throw new w("registerAuxOutlet expects to be called with an outlet with a name.");var n,r=this.auxRouter(this.hostComponent);return this._auxRouters.set(e,r),r._outlet=t,s(this.currentInstruction)&&s(n=this.currentInstruction.auxInstruction[e])?r.commit(n):Gt},t.prototype.isRouteActive=function(t){var e=this,n=this;if(c(this.currentInstruction))return!1;for(;s(n.parent)&&s(t.child);)n=n.parent,t=t.child;if(c(t.component)||c(this.currentInstruction.component)||this.currentInstruction.component.routeName!=t.component.routeName)return!1;var r=!0;return s(this.currentInstruction.component.params)&&g.forEach(t.component.params,(function(t,n){e.currentInstruction.component.params[n]!==t&&(r=!1)})),r},t.prototype.config=function(t){var e=this;return t.forEach((function(t){e.registry.config(e.hostComponent,t)})),this.renavigate()},t.prototype.navigate=function(t){var e=this.generate(t);return this.navigateByInstruction(e,!1)},t.prototype.navigateByUrl=function(t,e){var n=this;return void 0===e&&(e=!1),this._currentNavigation=this._currentNavigation.then((function(r){return n.lastNavigationAttempt=t,n._startNavigating(),n._afterPromiseFinishNavigating(n.recognize(t).then((function(t){return!c(t)&&n._navigate(t,e)})))}))},t.prototype.navigateByInstruction=function(t,e){var n=this;return void 0===e&&(e=!1),c(t)?Yt:this._currentNavigation=this._currentNavigation.then((function(r){return n._startNavigating(),n._afterPromiseFinishNavigating(n._navigate(t,e))}))},t.prototype._settleInstruction=function(t){var e=this;return t.resolveComponent().then((function(n){var r=[];return s(t.component)&&(t.component.reuse=!1),s(t.child)&&r.push(e._settleInstruction(t.child)),g.forEach(t.auxInstruction,(function(t,n){r.push(e._settleInstruction(t))})),f.all(r)}))},t.prototype._navigate=function(t,e){var n=this;return this._settleInstruction(t).then((function(e){return n._routerCanReuse(t)})).then((function(e){return n._canActivate(t)})).then((function(r){return!!r&&n._routerCanDeactivate(t).then((function(r){if(r)return n.commit(t,e).then((function(e){return n._emitNavigationFinish(t.toRootUrl()),!0}))}))}))},t.prototype._emitNavigationFinish=function(t){$.callEmit(this._subject,t)},t.prototype._emitNavigationFail=function(t){$.callError(this._subject,t)},t.prototype._afterPromiseFinishNavigating=function(t){var e=this;return f.catchError(t.then((function(t){return e._finishNavigating()})),(function(t){throw e._finishNavigating(),t}))},t.prototype._routerCanReuse=function(t){var e=this;return c(this._outlet)?Yt:c(t.component)?Gt:this._outlet.routerCanReuse(t.component).then((function(n){if(t.component.reuse=n,n&&s(e._childRouter)&&s(t.child))return e._childRouter._routerCanReuse(t.child)}))},t.prototype._canActivate=function(t){return Xt(t,this.currentInstruction)},t.prototype._routerCanDeactivate=function(t){var e=this;if(c(this._outlet))return Gt;var n=null,r=!1,i=null;return s(t)&&(n=t.child,i=t.component,r=c(t.component)||t.component.reuse),(r?Gt:this._outlet.routerCanDeactivate(i)).then((function(t){return 0!=t&&(!s(e._childRouter)||e._childRouter._routerCanDeactivate(n))}))},t.prototype.commit=function(t,e){var n=this;void 0===e&&(e=!1),this.currentInstruction=t;var r=Gt;if(s(this._outlet)&&s(t.component)){var i=t.component;r=i.reuse?this._outlet.reuse(i):this.deactivate(t).then((function(t){return n._outlet.activate(i)})),s(t.child)&&(r=r.then((function(e){if(s(n._childRouter))return n._childRouter.commit(t.child)})))}var o=[];return this._auxRouters.forEach((function(e,n){s(t.auxInstruction[n])&&o.push(e.commit(t.auxInstruction[n]))})),r.then((function(t){return f.all(o)}))},t.prototype._startNavigating=function(){this.navigating=!0},t.prototype._finishNavigating=function(){this.navigating=!1},t.prototype.subscribe=function(t,e){return $.subscribe(this._subject,t,e)},t.prototype.deactivate=function(t){var e=this,n=null,r=null;s(t)&&(n=t.child,r=t.component);var i=Gt;return s(this._childRouter)&&(i=this._childRouter.deactivate(n)),s(this._outlet)&&(i=i.then((function(t){return e._outlet.deactivate(r)}))),i},t.prototype.recognize=function(t){var e=this._getAncestorInstructions();return this.registry.recognize(t,e)},t.prototype._getAncestorInstructions=function(){for(var t=[this.currentInstruction],e=this;s(e=e.parent);)t.unshift(e.currentInstruction);return t},t.prototype.renavigate=function(){return c(this.lastNavigationAttempt)?this._currentNavigation:this.navigateByUrl(this.lastNavigationAttempt)},t.prototype.generate=function(t){var e=this._getAncestorInstructions();return this.registry.generate(t,e)},t}();k.Router=Kt;var Jt=function(t){function e(e,n,r){var i=this;t.call(this,e,null,r),this.root=this,this._location=n,this._locationSub=this._location.subscribe((function(t){i.recognize(t.url).then((function(e){s(e)?i.navigateByInstruction(e,s(t.pop)).then((function(n){if(!s(t.pop)||"hashchange"==t.type){var r=e.toUrlPath(),o=e.toUrlQuery();r.length>0&&"/"!=r[0]&&(r="/"+r),"hashchange"==t.type?e.toRootUrl()!=i._location.path()&&i._location.replaceState(r,o):i._location.go(r,o)}})):i._emitNavigationFail(t.url)}))})),this.registry.configFromComponent(r),this.navigateByUrl(n.path())}return A(e,t),e.prototype.commit=function(e,n){var r=this;void 0===n&&(n=!1);var i=e.toUrlPath(),o=e.toUrlQuery();i.length>0&&"/"!=i[0]&&(i="/"+i);var a=t.prototype.commit.call(this,e);return n||(a=a.then((function(t){r._location.go(i,o)}))),a},e.prototype.dispose=function(){s(this._locationSub)&&($.dispose(this._locationSub),this._locationSub=null)},e}(Kt);k.RootRouter=Jt;var Qt=function(t){function e(e,n){t.call(this,e.registry,e,n,e.root),this.parent=e}return A(e,t),e.prototype.navigateByUrl=function(t,e){return void 0===e&&(e=!1),this.parent.navigateByUrl(t,e)},e.prototype.navigateByInstruction=function(t,e){return void 0===e&&(e=!1),this.parent.navigateByInstruction(t,e)},e}(Kt);function Xt(t,e){var n=Gt;return c(t.component)?n:(s(t.child)&&(n=Xt(t.child,s(e)?e.child:null)),n.then((function(n){if(0==n)return!1;if(t.component.reuse)return!0;var r=Wt.getCanActivateHook(t.component.componentType);return!s(r)||r(t.component,s(e)?e.component:null)})))}function Zt(t){var e=t+"Directive";if(i.has(e)){var n=i.get(e);if(n.length>1)throw new w('too many directives named "'+t+'"');return n[0].controller}throw new w('directive "'+t+'" is not registered')}k.getCanActivateHook=function(t){var e=Zt(t);return e.$canActivate&&function(t,n){return i.invoke(e.$canActivate,null,{$nextInstruction:t,$prevInstruction:n})}},k.assertComponentExists=function(){},angular.stringifyInstruction=function(t){return t.toRootUrl()};Ht=k.RouteRegistry,Jt=k.RootRouter;Ht.prototype.configFromComponent=function(t){var e=this;if(l(t)){if(this._rules.has(t))return;var n=Zt(t);angular.isArray(n.$routeConfig)&&n.$routeConfig.forEach((function(n){var r=n.loader;s(r)&&(n=angular.extend({},n,{loader:function(){return i.invoke(r)}})),e.config(t,n)}))}};var te=new Ht(o),ee=new x,ne=new Jt(te,ee,o);return r.$watch((function(){return e.url()}),(function(t){ne.lastNavigationAttempt!==t&&ne.navigateByUrl(t)})),ne.subscribe((function(){r.$broadcast("$routeChangeSuccess",{})})),ne}])}()},function(t,e,n){var r,i,o;(function(){"use strict";var a,s,c,l,u,d,p,f,_,h,m,g,v,b,y,w,x,k,C,S=[].slice;u=angular.module("angular-inview",[]).directive("inView",["$parse",function(t){return{restrict:"A",require:"?^inViewContainer",link:function(e,n,r,i){var o,a,s,c,u,d;if(r.inView)return o=t(r.inView),a={element:n,wasInView:!1,offset:0,customDebouncedCheck:null,callback:function(t,r,i){return null==t&&(t={}),e.$evalAsync((function(){return t.inViewTarget=n[0],o(e,{$event:t,$inview:r,$inviewpart:i})}))}},null!=r.inViewOptions&&(s=e.$eval(r.inViewOptions))&&(a.offset=s.offset||[s.offsetTop||0,s.offsetBottom||0],s.debounce&&(a.customDebouncedCheck=f((function(t){return p([a],n[0],t)}),s.debounce))),c=null!=(u=null!=(d=a.customDebouncedCheck)?d:null!=i?i.checkInView:void 0)?u:k,null!=i?i.addItem(a):l(a),setTimeout(c),e.$on("$destroy",(function(){return null!=i&&i.removeItem(a),v(a)}))}}}]).directive("inViewContainer",(function(){return{restrict:"AC",controller:["$element",function(t){var e;return this.items=[],this.addItem=function(t){return this.items.push(t)},this.removeItem=function(t){var e;return this.items=function(){var n,r,i,o;for(o=[],n=0,r=(i=this.items).length;n<r;n++)(e=i[n])!==t&&o.push(e);return o}.call(this)},this.checkInView=(e=this,function(n){var r,i,o,a;for(i=0,o=(a=e.items).length;i<o;i++)null!=(r=a[i]).customDebouncedCheck&&r.customDebouncedCheck();return p(function(){var t,e,n,i;for(i=[],t=0,e=(n=this.items).length;t<e;t++)null==(r=n[t]).customDebouncedCheck&&i.push(r);return i}.call(e),t[0],n)}),this}],link:function(t,e,n,r){return e.bind("scroll",r.checkInView),b(r),t.$on("$destroy",(function(){return e.unbind("scroll",r.checkInView),x(r)}))}}})),c=[],l=function(t){return c.push(t),d()},v=function(t){var e;return c=function(){var n,r,i;for(i=[],n=0,r=c.length;n<r;n++)(e=c[n])!==t&&i.push(e);return i}(),w()},a=[],b=function(t){return a.push(t),d()},x=function(t){var e;return a=function(){var n,r,i;for(i=[],n=0,r=a.length;n<r;n++)(e=a[n])!==t&&i.push(e);return i}(),w()},s=!1,C=function(t){var e,n;for(e=0,n=a.length;e<n;e++)a[e].checkInView(t);if(c.length)return k(t)},d=function(){if(!s)return s=!0,angular.element(window).bind("checkInView click ready wheel mousewheel DomMouseScroll MozMousePixelScroll resize scroll touchmove mouseup",C)},w=function(){if(s&&!c.length&&!a.length)return s=!1,angular.element(window).unbind("checkInView click ready wheel mousewheel DomMouseScroll MozMousePixelScroll resize scroll touchmove mouseup",C)},y=function(t,e,n,r,i){var o,a;if(n){if(o=_(e.element[0]).top+window.pageYOffset,a=(r&&i?"neither":r&&"top")||i&&"bottom"||"both",!e.wasInView||e.wasInView!==a||o!==e.lastOffsetTop)return e.lastOffsetTop=o,e.wasInView=a,e.callback(t,!0,a)}else if(e.wasInView)return e.wasInView=!1,e.callback(t,!1)},p=function(t,e,n){var r,i,o,a,s,c,l,u,d,p,f,v,b,w,$;if($={top:0,bottom:m()},e&&e!==window){if((r=_(e)).top>$.bottom||r.bottom<$.top){for(c=0,u=t.length;c<u;c++)s=t[c],y(n,s,!1);return}r.top>$.top&&($.top=r.top),r.bottom<$.bottom&&($.bottom=r.bottom)}for(w=[],l=0,d=t.length;l<d;l++)a=(s=t[l]).element[0],o=(r=_(a)).top+(g(s.offset)?h(r,s.offset):parseInt(null!=(p=null!=(f=s.offset)?f[0]:void 0)?p:s.offset)),i=r.bottom+(g(s.offset)?h(r,s.offset):parseInt(null!=(v=null!=(b=s.offset)?b[1]:void 0)?v:s.offset)),o<$.bottom&&i>=$.top?w.push(y(n,s,!0,i>$.bottom,o<$.top)):w.push(y(n,s,!1));return w},g=function(t){return"string"==typeof t&&"%"===t.slice(-1)},h=function(t,e){var n;return n=e.substring(0,e.length-1),(t.bottom-t.top)*(n/100)},m=function(){var t,e,n;return(t=window.innerHeight)||!(e=document.compatMode)&&("undefined"!=typeof $&&null!==$&&null!=(n=$.support)?n.boxModel:void 0)||(t="CSS1Compat"===e?document.documentElement.clientHeight:document.body.clientHeight),t},_=function(t){var e,n,r;if(null!=t.getBoundingClientRect)return t.getBoundingClientRect();for(r=0,e=t;e;)r+=e.offsetTop,e=e.offsetParent;for(n=t.parentElement;n;)null!=n.scrollTop&&(r-=n.scrollTop),n=n.parentElement;return{top:r,bottom:r+t.offsetHeight}},f=function(t,e){var n;return n=null,function(){var r;return r=1<=arguments.length?S.call(arguments,0):[],null!=n&&clearTimeout(n),n=setTimeout((function(){return t.apply(null,r)}),null!=e?e:100)}},k=function(t){var e,n,r;for(n=0,r=c.length;n<r;n++)null!=(e=c[n]).customDebouncedCheck&&e.customDebouncedCheck();return p(function(){var t,n,r;for(r=[],t=0,n=c.length;t<n;t++)null==(e=c[t]).customDebouncedCheck&&r.push(e);return r}(),null,t)},i=[n(59)],void 0===(o="function"==typeof(r=u)?r.apply(e,i):r)||(t.exports=o)}).call(this)},function(t,e){!function(){"use strict";angular.module("angular-loading-bar",["cfp.loadingBarInterceptor"]),angular.module("chieffancypants.loadingBar",["cfp.loadingBarInterceptor"]),angular.module("cfp.loadingBarInterceptor",["cfp.loadingBar"]).config(["$httpProvider",function(t){var e=["$q","$cacheFactory","$timeout","$rootScope","$log","cfpLoadingBar",function(e,n,r,i,o,a){var s,c=0,l=0,u=a.latencyThreshold;function d(){r.cancel(s),a.complete(),l=0,c=0}function p(e){var r,i=n.get("$http"),o=t.defaults;!e.cache&&!o.cache||!1===e.cache||"GET"!==e.method&&"JSONP"!==e.method||(r=angular.isObject(e.cache)?e.cache:angular.isObject(o.cache)?o.cache:i);var a=void 0!==r&&void 0!==r.get(e.url);return void 0!==e.cached&&a!==e.cached?e.cached:(e.cached=a,a)}return{request:function(t){return t.ignoreLoadingBar||p(t)||(i.$broadcast("cfpLoadingBar:loading",{url:t.url}),0===c&&(s=r((function(){a.start()}),u)),c++,a.set(l/c)),t},response:function(t){return t&&t.config?(t.config.ignoreLoadingBar||p(t.config)||(l++,i.$broadcast("cfpLoadingBar:loaded",{url:t.config.url,result:t}),l>=c?d():a.set(l/c)),t):(o.error("Broken interceptor detected: Config object not supplied in response:\n https://github.com/chieffancypants/angular-loading-bar/pull/50"),t)},responseError:function(t){return t&&t.config?(t.config.ignoreLoadingBar||p(t.config)||(l++,i.$broadcast("cfpLoadingBar:loaded",{url:t.config.url,result:t}),l>=c?d():a.set(l/c)),e.reject(t)):(o.error("Broken interceptor detected: Config object not supplied in rejection:\n https://github.com/chieffancypants/angular-loading-bar/pull/50"),e.reject(t))}}}];t.interceptors.push(e)}]),angular.module("cfp.loadingBar",[]).provider("cfpLoadingBar",(function(){this.autoIncrement=!0,this.includeSpinner=!0,this.includeBar=!0,this.latencyThreshold=100,this.startSize=.02,this.parentSelector="body",this.spinnerTemplate='<div id="loading-bar-spinner"><div class="spinner-icon"></div></div>',this.loadingBarTemplate='<div id="loading-bar"><div class="bar"><div class="peg"></div></div></div>',this.$get=["$injector","$document","$timeout","$rootScope",function(t,e,n,r){var i,o,a,s=this.parentSelector,c=angular.element(this.loadingBarTemplate),l=c.find("div").eq(0),u=angular.element(this.spinnerTemplate),d=!1,p=0,f=this.autoIncrement,_=this.includeSpinner,h=this.includeBar,m=this.startSize;function g(t){if(d){var e=100*t+"%";l.css("width",e),p=t,f&&(n.cancel(o),o=n((function(){v()}),250))}}function v(){if(!(b()>=1)){var t=0,e=b();t=e>=0&&e<.25?(3*Math.random()+3)/100:e>=.25&&e<.65?3*Math.random()/100:e>=.65&&e<.9?2*Math.random()/100:e>=.9&&e<.99?.005:0,g(b()+t)}}function b(){return p}function y(){p=0,d=!1}return{start:function(){if(i||(i=t.get("$animate")),n.cancel(a),!d){var o=e[0],l=o.querySelector?o.querySelector(s):e.find(s)[0];l||(l=o.getElementsByTagName("body")[0]);var p=angular.element(l),f=l.lastChild&&angular.element(l.lastChild);r.$broadcast("cfpLoadingBar:started"),d=!0,h&&i.enter(c,p,f),_&&i.enter(u,p,c),g(m)}},set:g,status:b,inc:v,complete:function(){i||(i=t.get("$animate")),r.$broadcast("cfpLoadingBar:completed"),g(1),n.cancel(a),a=n((function(){var t=i.leave(c,y);t&&t.then&&t.then(y),i.leave(u)}),500)},autoIncrement:this.autoIncrement,includeSpinner:this.includeSpinner,latencyThreshold:this.latencyThreshold,parentSelector:this.parentSelector,startSize:this.startSize}}]}))}()},function(t,e){angular.module("youtube-embed",[]).service("youtubeEmbedUtils",["$window","$rootScope",function(t,e){function n(t,e){return t.indexOf(e)>-1}function r(){e.$apply((function(){i.ready=!0}))}var i={},o=/https?:\/\/(?:[0-9A-Z-]+\.)?(?:youtu\.be\/|youtube(?:-nocookie)?\.com\S*[^\w\s-])([\w-]{11})(?=[^\w-]|$)(?![?=&+%\w.-]*(?:['"][^<>]*>|<\/a>))[?=&+%\w.-]*/gi,a=/t=(\d+)[ms]?(\d+)?s?/;return i.getIdFromURL=function(t){var e=t.replace(o,"$1");if(n(e,";")){var r=e.split(";");if(n(r[1],"%"))e=("http://youtube.com"+decodeURIComponent(r[1])).replace(o,"$1");else e=r[0]}else n(e,"#")&&(e=e.split("#")[0]);return e},i.getTimeFromURL=function(t){var e=(t=t||"").match(a);if(!e)return 0;var r=e[0],i=e[1],o=e[2];return void 0!==o?(o=parseInt(o,10),i=parseInt(i,10)):n(r,"m")?(i=parseInt(i,10),o=0):(o=parseInt(i,10),i=0),o+60*i},i.ready=!1,"undefined"==typeof YT?(t.onYouTubeIframeAPIReady=r,console.log("Unable to find YouTube iframe library on this page.")):YT.loaded?i.ready=!0:YT.ready(r),i}]).directive("youtubeVideo",["$window","youtubeEmbedUtils",function(t,e){var n=1,r={"-1":"unstarted",0:"ended",1:"playing",2:"paused",3:"buffering",5:"queued"},i="youtube.player.";return t.YTConfig={host:"https://www.youtube.com"},{restrict:"EA",scope:{videoId:"=?",videoUrl:"=?",player:"=?",playerVars:"=?",playerHeight:"=?",playerWidth:"=?"},link:function(t,o,a){function s(){var e=Array.prototype.slice.call(arguments);t.$apply((function(){t.$emit.apply(t,e)}))}function c(e){var n=r[e.data];void 0!==n&&s(i+n,t.player,e),t.$apply((function(){t.player.currentState=n}))}function l(e){s(i+"ready",t.player,e)}function u(e){s(i+"error",t.player,e)}function d(){(t.videoId||t.playerVars.list)&&(t.player&&"function"==typeof t.player.destroy&&t.player.destroy(),t.player=function(){var e=angular.copy(t.playerVars);e.start=e.start||t.urlStartTime;var n=new YT.Player(p,{height:t.playerHeight,width:t.playerWidth,videoId:t.videoId,playerVars:e,events:{onReady:l,onStateChange:c,onError:u}});return n.id=p,n}())}t.utils=e;var p=a.playerId||o[0].id||"unique-youtube-embed-id-"+n++;o[0].id=p,t.playerHeight=t.playerHeight||390,t.playerWidth=t.playerWidth||640,t.playerVars=t.playerVars||{};var f=t.$watch((function(){return t.utils.ready&&(void 0!==t.videoUrl||void 0!==t.videoId||void 0!==t.playerVars.list)}),(function(e){e&&(f(),void 0!==t.videoUrl?t.$watch("videoUrl",(function(e){t.videoId=t.utils.getIdFromURL(e),t.urlStartTime=t.utils.getTimeFromURL(e),d()})):void 0!==t.videoId?t.$watch("videoId",(function(){t.urlStartTime=null,d()})):t.$watch("playerVars.list",(function(){t.urlStartTime=null,d()})))}));t.$watchCollection(["playerHeight","playerWidth"],(function(){t.player&&t.player.setSize(t.playerWidth,t.playerHeight)})),t.$on("$destroy",(function(){t.player&&t.player.destroy()}))}}}])},function(t,e){!function(t){"use strict";angular.module("fayzaan.gRecaptcha.v3",[])}(),function(t){"use strict";angular.module("fayzaan.gRecaptcha.v3").provider("gRecaptcha",(function(){this.$get=["$window","$q","$document","$interval",function(t,e,n,r){function i(){var t=document.createElement("script");t.src=c+"?render="+s+"&onload="+l+"&render=explicit",n.find("body")[0].appendChild(t)}function o(){return angular.isFunction((t.grecaptcha||{}).execute)}function a(){return!!d}var s=null,c="https://www.google.com/recaptcha/api.js",l="onGRecaptchaScriptLoaded",u=e.defer(),d=!1,p=!1;return{initialize:function(e){return setTimeout((function(){try{if(!e||!e.key)throw new Error("Missing required public key for reCaptcha.");if(s=e.key+"",o())p=!0,d=!1,u.resolve();else if(t.document.querySelector('script[src^="'+c+'"]')){d=!0;var n=r((function(){o()&&(r.cancel(n),p=!0,d=!1,u.resolve())}),50)}else d=!0,t[l]=function(){p=!0,d=!1,u.resolve()},i()}catch(t){u.reject(t)}})),u.promise},execute:function e(n){return a()?u.promise.then((function(){return e(n)})):t.grecaptcha.execute(s,n)},reset:function(){return t.grecaptcha.reset()},isInitialized:function(){return!!p},isInitializing:a}}]}))}()},function(t,e){!function(){"use strict";var t=8,e=9,n=13,r=27,i=32,o=38,a=40,s=37,c=39,l=46,u=188,d=9007199254740991,p=["text","email","url"],f=angular.module("ngTagsInput",[]);f.directive("tagsInput",["$timeout","$document","$window","tagsInputConfig","tiUtil",function(e,r,o,a,f){function _(t,e,n,r){var i,o,a,s={};return i=function(e){return f.safeToString(e[t.displayProperty])},o=function(e,n){e[t.displayProperty]=n},a=function(e){var r=i(e);return r&&r.length>=t.minLength&&r.length<=t.maxLength&&t.allowedTagsPattern.test(r)&&!f.findInObjectArray(s.items,e,t.keyProperty||t.displayProperty)&&n({$tag:e})},s.items=[],s.addText=function(t){var e={};return o(e,t),s.add(e)},s.add=function(n){var r=i(n);return t.replaceSpacesWithDashes&&(r=f.replaceSpacesWithDashes(r)),o(n,r),a(n)?(s.items.push(n),e.trigger("tag-added",{$tag:n})):r&&e.trigger("invalid-tag",{$tag:n}),n},s.remove=function(t){var n=s.items[t];if(r({$tag:n}))return s.items.splice(t,1),s.clearSelection(),e.trigger("tag-removed",{$tag:n}),n},s.select=function(t){t<0?t=s.items.length-1:t>=s.items.length&&(t=0),s.index=t,s.selected=s.items[t]},s.selectPrior=function(){s.select(--s.index)},s.selectNext=function(){s.select(++s.index)},s.removeSelected=function(){return s.remove(s.index)},s.clearSelection=function(){s.selected=null,s.index=-1},s.clearSelection(),s}function h(t){return-1!==p.indexOf(t)}return{restrict:"E",require:"ngModel",scope:{tags:"=ngModel",text:"=?",onTagAdding:"&",onTagAdded:"&",onInvalidTag:"&",onTagRemoving:"&",onTagRemoved:"&",onTagClicked:"&"},replace:!1,transclude:!0,templateUrl:"ngTagsInput/tags-input.html",controller:["$scope","$attrs","$element",function(t,e,n){t.events=f.simplePubSub(),a.load("tagsInput",t,e,{template:[String,"ngTagsInput/tag-item.html"],type:[String,"text",h],placeholder:[String,"Add a tag"],tabindex:[Number,null],removeTagSymbol:[String,String.fromCharCode(215)],replaceSpacesWithDashes:[Boolean,!0],minLength:[Number,3],maxLength:[Number,d],addOnEnter:[Boolean,!0],addOnSpace:[Boolean,!1],addOnComma:[Boolean,!0],addOnBlur:[Boolean,!0],addOnPaste:[Boolean,!1],pasteSplitPattern:[RegExp,/,/],allowedTagsPattern:[RegExp,/.+/],enableEditingLastTag:[Boolean,!1],minTags:[Number,0],maxTags:[Number,d],displayProperty:[String,"text"],keyProperty:[String,""],allowLeftoverText:[Boolean,!1],addFromAutocompleteOnly:[Boolean,!1],spellcheck:[Boolean,!0]}),t.tagList=new _(t.options,t.events,f.handleUndefinedResult(t.onTagAdding,!0),f.handleUndefinedResult(t.onTagRemoving,!0)),this.registerAutocomplete=function(){var e=n.find("input");return{addTag:function(e){return t.tagList.add(e)},focusInput:function(){e[0].focus()},getTags:function(){return t.tagList.items},getCurrentTagText:function(){return t.newTag.text()},getOptions:function(){return t.options},on:function(e,n){return t.events.on(e,n),this}}},this.registerTagItem=function(){return{getOptions:function(){return t.options},removeTag:function(e){t.disabled||t.tagList.remove(e)}}}}],link:function(a,d,p,_){var h,m=[n,u,i,t,l,s,c],g=a.tagList,v=a.events,b=a.options,y=d.find("input"),w=["minTags","maxTags","allowLeftoverText"];h=function(){_.$setValidity("maxTags",g.items.length<=b.maxTags),_.$setValidity("minTags",g.items.length>=b.minTags),_.$setValidity("leftoverText",!(!a.hasFocus&&!b.allowLeftoverText)||!a.newTag.text())},_.$isEmpty=function(t){return!t||!t.length},a.newTag={text:function(t){if(!angular.isDefined(t))return a.text||"";a.text=t,v.trigger("input-change",t)},invalid:null},a.track=function(t){return t[b.keyProperty||b.displayProperty]},a.$watch("tags",(function(t){t?(g.items=f.makeObjectArray(t,b.displayProperty),a.tags=g.items):g.items=[]})),a.$watch("tags.length",(function(){h(),_.$validate()})),p.$observe("disabled",(function(t){a.disabled=t})),a.eventHandlers={input:{keydown:function(t){v.trigger("input-keydown",t)},focus:function(){a.hasFocus||(a.hasFocus=!0,v.trigger("input-focus"))},blur:function(){e((function(){var t=r.prop("activeElement"),e=t===y[0],n=d[0].contains(t);!e&&n||(a.hasFocus=!1,v.trigger("input-blur"))}))},paste:function(t){t.getTextData=function(){var e=t.clipboardData||t.originalEvent&&t.originalEvent.clipboardData;return e?e.getData("text/plain"):o.clipboardData.getData("Text")},v.trigger("input-paste",t)}},host:{click:function(){a.disabled||y[0].focus()}},tag:{click:function(t){v.trigger("tag-clicked",{$tag:t})}}},v.on("tag-added",a.onTagAdded).on("invalid-tag",a.onInvalidTag).on("tag-removed",a.onTagRemoved).on("tag-clicked",a.onTagClicked).on("tag-added",(function(){a.newTag.text("")})).on("tag-added tag-removed",(function(){a.tags=g.items,_.$setDirty()})).on("invalid-tag",(function(){a.newTag.invalid=!0})).on("option-change",(function(t){-1!==w.indexOf(t.name)&&h()})).on("input-change",(function(){g.clearSelection(),a.newTag.invalid=null})).on("input-focus",(function(){d.triggerHandler("focus"),_.$setValidity("leftoverText",!0)})).on("input-blur",(function(){b.addOnBlur&&!b.addFromAutocompleteOnly&&g.addText(a.newTag.text()),d.triggerHandler("blur"),h()})).on("input-keydown",(function(e){var r,o,d,p,_=e.keyCode,h={};if(!f.isModifierOn(e)&&-1!==m.indexOf(_)){if(h[n]=b.addOnEnter,h[u]=b.addOnComma,h[i]=b.addOnSpace,r=!b.addFromAutocompleteOnly&&h[_],o=(_===t||_===l)&&g.selected,p=_===t&&0===a.newTag.text().length&&b.enableEditingLastTag,d=(_===t||_===s||_===c)&&0===a.newTag.text().length&&!b.enableEditingLastTag,r)g.addText(a.newTag.text());else if(p){var v;g.selectPrior(),(v=g.removeSelected())&&a.newTag.text(v[b.displayProperty])}else o?g.removeSelected():d&&(_===s||_===t?g.selectPrior():_===c&&g.selectNext());(r||d||o||p)&&e.preventDefault()}})).on("input-paste",(function(t){if(b.addOnPaste){var e=t.getTextData().split(b.pasteSplitPattern);e.length>1&&(e.forEach((function(t){g.addText(t)})),t.preventDefault())}}))}}}]),f.directive("tiTagItem",["tiUtil",function(t){return{restrict:"E",require:"^tagsInput",template:'<ng-include src="$$template"></ng-include>',scope:{data:"="},link:function(e,n,r,i){var o=i.registerTagItem(),a=o.getOptions();e.$$template=a.template,e.$$removeTagSymbol=a.removeTagSymbol,e.$getDisplayText=function(){return t.safeToString(e.data[a.displayProperty])},e.$removeTag=function(){o.removeTag(e.$index)},e.$watch("$parent.$index",(function(t){e.$index=t}))}}}]),f.directive("autoComplete",["$document","$timeout","$sce","$q","tagsInputConfig","tiUtil",function(t,i,s,c,l,u){function d(t,e,n){var r,i,o,a={};return o=function(){return e.tagsInput.keyProperty||e.tagsInput.displayProperty},r=function(t,n){return t.filter((function(t){return!u.findInObjectArray(n,t,o(),(function(t,n){return e.tagsInput.replaceSpacesWithDashes&&(t=u.replaceSpacesWithDashes(t),n=u.replaceSpacesWithDashes(n)),u.defaultComparer(t,n)}))}))},a.reset=function(){i=null,a.items=[],a.visible=!1,a.index=-1,a.selected=null,a.query=null},a.show=function(){e.selectFirstMatch?a.select(0):a.selected=null,a.visible=!0},a.load=u.debounce((function(n,s){a.query=n;var l=c.when(t({$query:n}));i=l,l.then((function(t){l===i&&(t=u.makeObjectArray(t.data||t,o()),t=r(t,s),a.items=t.slice(0,e.maxResultsToShow),a.items.length>0?a.show():a.reset())}))}),e.debounceDelay),a.selectNext=function(){a.select(++a.index)},a.selectPrior=function(){a.select(--a.index)},a.select=function(t){t<0?t=a.items.length-1:t>=a.items.length&&(t=0),a.index=t,a.selected=a.items[t],n.trigger("suggestion-selected",t)},a.reset(),a}return{restrict:"E",require:"^tagsInput",scope:{source:"&"},templateUrl:"ngTagsInput/auto-complete.html",controller:["$scope","$element","$attrs",function(t,e,n){t.events=u.simplePubSub(),l.load("autoComplete",t,n,{template:[String,"ngTagsInput/auto-complete-match.html"],debounceDelay:[Number,100],minLength:[Number,3],highlightMatchedText:[Boolean,!0],maxResultsToShow:[Number,10],loadOnDownArrow:[Boolean,!1],loadOnEmpty:[Boolean,!1],loadOnFocus:[Boolean,!1],selectFirstMatch:[Boolean,!0],displayProperty:[String,""]}),t.suggestionList=new d(t.source,t.options,t.events),this.registerAutocompleteMatch=function(){return{getOptions:function(){return t.options},getQuery:function(){return t.suggestionList.query}}}}],link:function(t,i,s,c){var l,d=[n,e,r,o,a],p=t.suggestionList,f=c.registerAutocomplete(),_=t.options,h=t.events;_.tagsInput=f.getOptions(),l=function(t){return t&&t.length>=_.minLength||!t&&_.loadOnEmpty},t.addSuggestionByIndex=function(e){p.select(e),t.addSuggestion()},t.addSuggestion=function(){var t=!1;return p.selected&&(f.addTag(angular.copy(p.selected)),p.reset(),f.focusInput(),t=!0),t},t.track=function(t){return t[_.tagsInput.keyProperty||_.tagsInput.displayProperty]},f.on("tag-added tag-removed invalid-tag input-blur",(function(){p.reset()})).on("input-change",(function(t){l(t)?p.load(t,f.getTags()):p.reset()})).on("input-focus",(function(){var t=f.getCurrentTagText();_.loadOnFocus&&l(t)&&p.load(t,f.getTags())})).on("input-keydown",(function(i){var s=i.keyCode,c=!1;if(!u.isModifierOn(i)&&-1!==d.indexOf(s))return p.visible?s===a?(p.selectNext(),c=!0):s===o?(p.selectPrior(),c=!0):s===r?(p.reset(),c=!0):s!==n&&s!==e||(c=t.addSuggestion()):s===a&&t.options.loadOnDownArrow&&(p.load(f.getCurrentTagText(),f.getTags()),c=!0),c?(i.preventDefault(),i.stopImmediatePropagation(),!1):void 0})),h.on("suggestion-selected",(function(t){!function(t,e){var n=t.find("li").eq(e),r=n.parent(),i=n.prop("offsetTop"),o=n.prop("offsetHeight"),a=r.prop("clientHeight"),s=r.prop("scrollTop");i<s?r.prop("scrollTop",i):i+o>a+s&&r.prop("scrollTop",i+o-a)}(i,t)}))}}}]),f.directive("tiAutocompleteMatch",["$sce","tiUtil",function(t,e){return{restrict:"E",require:"^autoComplete",template:'<ng-include src="$$template"></ng-include>',scope:{data:"="},link:function(n,r,i,o){var a=o.registerAutocompleteMatch(),s=a.getOptions();n.$$template=s.template,n.$index=n.$parent.$index,n.$highlight=function(n){return s.highlightMatchedText&&(n=e.safeHighlight(n,a.getQuery())),t.trustAsHtml(n)},n.$getDisplayText=function(){return e.safeToString(n.data[s.displayProperty||s.tagsInput.displayProperty])}}}}]),f.directive("tiTranscludeAppend",(function(){return function(t,e,n,r,i){i((function(t){e.append(t)}))}})),f.directive("tiAutosize",["tagsInputConfig",function(t){return{restrict:"A",require:"ngModel",link:function(e,n,r,i){var o,a,s=t.getTextAutosizeThreshold();(o=angular.element('<span class="input"></span>')).css("display","none").css("visibility","hidden").css("width","auto").css("white-space","pre"),n.parent().append(o),a=function(t){var e,i=t;return angular.isString(i)&&0===i.length&&(i=r.placeholder),i&&(o.text(i),o.css("display",""),e=o.prop("offsetWidth"),o.css("display","none")),n.css("width",e?e+s+"px":""),t},i.$parsers.unshift(a),i.$formatters.unshift(a),r.$observe("placeholder",(function(t){i.$modelValue||a(t)}))}}}]),f.directive("tiBindAttrs",(function(){return function(t,e,n){t.$watch(n.tiBindAttrs,(function(t){angular.forEach(t,(function(t,e){n.$set(e,t)}))}),!0)}})),f.provider("tagsInputConfig",(function(){var t={},e={},n=3;this.setDefaults=function(e,n){return t[e]=n,this},this.setActiveInterpolation=function(t,n){return e[t]=n,this},this.setTextAutosizeThreshold=function(t){return n=t,this},this.$get=["$interpolate",function(r){var i={};return i[String]=function(t){return t},i[Number]=function(t){return parseInt(t,10)},i[Boolean]=function(t){return"true"===t.toLowerCase()},i[RegExp]=function(t){return new RegExp(t)},{load:function(n,o,a,s){var c=function(){return!0};o.options={},angular.forEach(s,(function(s,l){var u,d,p,f,_,h;u=s[0],d=s[1],p=s[2]||c,f=i[u],_=function(){var e=t[n]&&t[n][l];return angular.isDefined(e)?e:d},h=function(t){o.options[l]=t&&p(t)?f(t):_()},e[n]&&e[n][l]?a.$observe(l,(function(t){h(t),o.events.trigger("option-change",{name:l,newValue:t})})):h(a[l]&&r(a[l])(o.$parent))}))},getTextAutosizeThreshold:function(){return n}}}]})),f.factory("tiUtil",["$timeout",function(t){var e={debounce:function(e,n){var r;return function(){var i=arguments;t.cancel(r),r=t((function(){e.apply(null,i)}),n)}},makeObjectArray:function(t,e){if(!angular.isArray(t)||0===t.length||angular.isObject(t[0]))return t;var n=[];return t.forEach((function(t){var r={};r[e]=t,n.push(r)})),n},findInObjectArray:function(t,n,r,i){var o=null;return i=i||e.defaultComparer,t.some((function(t){if(i(t[r],n[r]))return o=t,!0})),o},defaultComparer:function(t,n){return e.safeToString(t).toLowerCase()===e.safeToString(n).toLowerCase()},safeHighlight:function(t,n){if(!n)return t;t=e.encodeHTML(t),n=e.encodeHTML(n);var r=new RegExp("&[^;]+;|"+function(t){return t.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}(n),"gi");return t.replace(r,(function(t){return t.toLowerCase()===n.toLowerCase()?"<em>"+t+"</em>":t}))},safeToString:function(t){return angular.isUndefined(t)||null==t?"":t.toString().trim()},encodeHTML:function(t){return e.safeToString(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},handleUndefinedResult:function(t,e){return function(){var n=t.apply(null,arguments);return angular.isUndefined(n)?e:n}},replaceSpacesWithDashes:function(t){return e.safeToString(t).replace(/\s/g,"-")},isModifierOn:function(t){return t.shiftKey||t.ctrlKey||t.altKey||t.metaKey},simplePubSub:function(){var t={};return{on:function(e,n){return e.split(" ").forEach((function(e){t[e]||(t[e]=[]),t[e].push(n)})),this},trigger:function(n,r){return(t[n]||[]).every((function(t){return e.handleUndefinedResult(t,!0)(r)})),this}}}};return e}]),f.run(["$templateCache",function(t){t.put("ngTagsInput/tags-input.html",'<div class="host" tabindex="-1" ng-click="eventHandlers.host.click()" ti-transclude-append><div class="tags" ng-class="{focused: hasFocus}"><ul class="tag-list"><li class="tag-item" ng-repeat="tag in tagList.items track by track(tag)" ng-class="{ selected: tag == tagList.selected }" ng-click="eventHandlers.tag.click(tag)"><ti-tag-item data="::tag"></ti-tag-item></li></ul><input class="input" autocomplete="off" ng-model="newTag.text" ng-model-options="{getterSetter: true}" ng-keydown="eventHandlers.input.keydown($event)" ng-focus="eventHandlers.input.focus($event)" ng-blur="eventHandlers.input.blur($event)" ng-paste="eventHandlers.input.paste($event)" ng-trim="false" ng-class="{\'invalid-tag\': newTag.invalid}" ng-disabled="disabled" ti-bind-attrs="{type: options.type, placeholder: options.placeholder, tabindex: options.tabindex, spellcheck: options.spellcheck}" ti-autosize></div></div>'),t.put("ngTagsInput/tag-item.html",'<span ng-bind="$getDisplayText()"></span> <a class="remove-button" ng-click="$removeTag()" ng-bind="::$$removeTagSymbol"></a>'),t.put("ngTagsInput/auto-complete.html",'<div class="autocomplete" ng-if="suggestionList.visible"><ul class="suggestion-list"><li class="suggestion-item" ng-repeat="item in suggestionList.items track by track(item)" ng-class="{selected: item == suggestionList.selected}" ng-click="addSuggestionByIndex($index)" ng-mouseenter="suggestionList.select($index)"><ti-autocomplete-match data="::item"></ti-autocomplete-match></li></ul></div>'),t.put("ngTagsInput/auto-complete-match.html",'<span ng-bind-html="$highlight($getDisplayText())"></span>')}])}()},function(t,e,n){var r,i;r=[n(7)],i=function(t){return function(t){var e,n,r,i,o,a,s,c,l,u,d=[].slice,p=function(t,e){for(var n in e)f.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},f={}.hasOwnProperty;e=t,r=function(){function t(t){this.currentFlag=null,this.controllers={},this.aliasMaps={},this.$inputor=e(t),this.setupRootElement(),this.listen()}return t.prototype.createContainer=function(t){var n;return null!=(n=this.$el)&&n.remove(),e(t.body).append(this.$el=e("<div class='atwho-container'></div>"))},t.prototype.setupRootElement=function(t,n){var r;if(null==n&&(n=!1),t)this.window=t.contentWindow,this.document=t.contentDocument||this.window.document,this.iframe=t;else{this.document=this.$inputor[0].ownerDocument,this.window=this.document.defaultView||this.document.parentWindow;try{this.iframe=this.window.frameElement}catch(t){if(r=t,this.iframe=null,e.fn.atwho.debug)throw new Error("iframe auto-discovery is failed.\nPlease use `setIframe` to set the target iframe manually.\n"+r)}}return this.createContainer((this.iframeAsRoot=n)?this.document:document)},t.prototype.controller=function(t){var e,n,r,i;if(this.aliasMaps[t])n=this.controllers[this.aliasMaps[t]];else for(r in i=this.controllers)if(e=i[r],r===t){n=e;break}return n||this.controllers[this.currentFlag]},t.prototype.setContextFor=function(t){return this.currentFlag=t,this},t.prototype.reg=function(t,e){var n,r;return r=(n=this.controllers)[t]||(n[t]=this.$inputor.is("[contentEditable]")?new a(this,t):new l(this,t)),e.alias&&(this.aliasMaps[e.alias]=t),r.init(e),this},t.prototype.listen=function(){return this.$inputor.on("compositionstart",(t=this,function(e){var n;return null!=(n=t.controller())&&n.view.hide(),t.isComposing=!0,null})).on("compositionend",function(t){return function(e){return t.isComposing=!1,null}}(this)).on("keyup.atwhoInner",function(t){return function(e){return t.onKeyup(e)}}(this)).on("keydown.atwhoInner",function(t){return function(e){return t.onKeydown(e)}}(this)).on("blur.atwhoInner",function(t){return function(e){var n;if(n=t.controller())return n.expectedQueryCBId=null,n.view.hide(e,n.getOpt("displayTimeout"))}}(this)).on("click.atwhoInner",function(t){return function(e){return t.dispatch(e)}}(this)).on("scroll.atwhoInner",function(t){return function(){var e;return e=t.$inputor.scrollTop(),function(n){var r,i;return r=n.target.scrollTop,e!==r&&null!=(i=t.controller())&&i.view.hide(n),e=r,!0}}}(this)());var t},t.prototype.shutdown=function(){var t,e;for(t in e=this.controllers)e[t].destroy(),delete this.controllers[t];return this.$inputor.off(".atwhoInner"),this.$el.remove()},t.prototype.dispatch=function(t){var e,n,r,i;for(e in i=[],r=this.controllers)n=r[e],i.push(n.lookUp(t));return i},t.prototype.onKeyup=function(t){var n;switch(t.keyCode){case s.ESC:t.preventDefault(),null!=(n=this.controller())&&n.view.hide();break;case s.DOWN:case s.UP:case s.CTRL:case s.ENTER:e.noop();break;case s.P:case s.N:t.ctrlKey||this.dispatch(t);break;default:this.dispatch(t)}},t.prototype.onKeydown=function(t){var n,r;if((r=null!=(n=this.controller())?n.view:void 0)&&r.visible())switch(t.keyCode){case s.ESC:t.preventDefault(),r.hide(t);break;case s.UP:t.preventDefault(),r.prev();break;case s.DOWN:t.preventDefault(),r.next();break;case s.P:if(!t.ctrlKey)return;t.preventDefault(),r.prev();break;case s.N:if(!t.ctrlKey)return;t.preventDefault(),r.next();break;case s.TAB:case s.ENTER:case s.SPACE:if(!r.visible())return;if(!this.controller().getOpt("spaceSelectsMatch")&&t.keyCode===s.SPACE)return;if(!this.controller().getOpt("tabSelectsMatch")&&t.keyCode===s.TAB)return;r.highlighted()?(t.preventDefault(),r.choose(t)):r.hide(t);break;default:e.noop()}},t}(),i=function(){function t(t,n){this.app=t,this.at=n,this.$inputor=this.app.$inputor,this.id=this.$inputor[0].id||this.uid(),this.expectedQueryCBId=null,this.setting=null,this.query=null,this.pos=0,this.range=null,0===(this.$el=e("#atwho-ground-"+this.id,this.app.$el)).length&&this.app.$el.append(this.$el=e("<div id='atwho-ground-"+this.id+"'></div>")),this.model=new c(this),this.view=new u(this)}return t.prototype.uid=function(){return(Math.random().toString(16)+"000000000").substr(2,8)+(new Date).getTime()},t.prototype.init=function(t){return this.setting=e.extend({},this.setting||e.fn.atwho.default,t),this.view.init(),this.model.reload(this.setting.data)},t.prototype.destroy=function(){return this.trigger("beforeDestroy"),this.model.destroy(),this.view.destroy(),this.$el.remove()},t.prototype.callDefault=function(){var t,n,r;r=arguments[0],t=2<=arguments.length?d.call(arguments,1):[];try{return o[r].apply(this,t)}catch(t){return n=t,e.error(n+" Or maybe At.js doesn't have function "+r)}},t.prototype.trigger=function(t,e){var n,r;return null==e&&(e=[]),e.push(this),r=(n=this.getOpt("alias"))?t+"-"+n+".atwho":t+".atwho",this.$inputor.trigger(r,e)},t.prototype.callbacks=function(t){return this.getOpt("callbacks")[t]||o[t]},t.prototype.getOpt=function(t,e){try{return this.setting[t]}catch(t){return null}},t.prototype.insertContentFor=function(t){var n,r;return r=this.getOpt("insertTpl"),n=e.extend({},t.data("item-data"),{"atwho-at":this.at}),this.callbacks("tplEval").call(this,r,n,"onInsert")},t.prototype.renderView=function(t){var e;return e=this.getOpt("searchKey"),t=this.callbacks("sorter").call(this,this.query.text,t.slice(0,1001),e),this.view.render(t.slice(0,this.getOpt("limit")))},t.arrayToDefaultHash=function(t){var n,r,i,o;if(!e.isArray(t))return t;for(o=[],n=0,i=t.length;n<i;n++)r=t[n],e.isPlainObject(r)?o.push(r):o.push({name:r});return o},t.prototype.lookUp=function(t){var e,n;if((!t||"click"!==t.type||this.getOpt("lookUpOnClick"))&&(!this.getOpt("suspendOnComposing")||!this.app.isComposing))return(e=this.catchQuery(t))?(this.app.setContextFor(this.at),(n=this.getOpt("delay"))?this._delayLookUp(e,n):this._lookUp(e),e):(this.expectedQueryCBId=null,e)},t.prototype._delayLookUp=function(t,e){var n,r,i;return n=Date.now?Date.now():(new Date).getTime(),this.previousCallTime||(this.previousCallTime=n),0<(r=e-(n-this.previousCallTime))&&r<e?(this.previousCallTime=n,this._stopDelayedCall(),this.delayedCallTimeout=setTimeout((i=this,function(){return i.previousCallTime=0,i.delayedCallTimeout=null,i._lookUp(t)}),e)):(this._stopDelayedCall(),this.previousCallTime!==n&&(this.previousCallTime=0),this._lookUp(t))},t.prototype._stopDelayedCall=function(){if(this.delayedCallTimeout)return clearTimeout(this.delayedCallTimeout),this.delayedCallTimeout=null},t.prototype._generateQueryCBId=function(){return{}},t.prototype._lookUp=function(t){var n;return n=function(t,e){if(t===this.expectedQueryCBId)return e&&e.length>0?this.renderView(this.constructor.arrayToDefaultHash(e)):this.view.hide()},this.expectedQueryCBId=this._generateQueryCBId(),this.model.query(t.text,e.proxy(n,this,this.expectedQueryCBId))},t}(),l=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return p(n,t),n.prototype.catchQuery=function(){var t,e,n,r,i,o,a;if(e=this.$inputor.val(),t=this.$inputor.caret("pos",{iframe:this.app.iframe}),a=e.slice(0,t),!((r="string"==typeof(i=this.callbacks("matcher").call(this,this.at,a,this.getOpt("startWithSpace"))))&&i.length<this.getOpt("minLen",0)))return r&&i.length<=this.getOpt("maxLen",20)?(n=(o=t-i.length)+i.length,this.pos=o,i={text:i,headPos:o,endPos:n},this.trigger("matched",[this.at,i.text])):(i=null,this.view.hide()),this.query=i},n.prototype.rect=function(){var t,n,r;if(t=this.$inputor.caret("offset",this.pos-1,{iframe:this.app.iframe}))return this.app.iframe&&!this.app.iframeAsRoot&&(n=e(this.app.iframe).offset(),t.left+=n.left,t.top+=n.top),r=this.app.document.selection?0:2,{left:t.left,top:t.top,bottom:t.top+t.height+r}},n.prototype.insert=function(t,e){var n,r,i,o,a;return a=""+(i=(r=(n=this.$inputor).val()).slice(0,Math.max(this.query.headPos-this.at.length,0)))+(t+=o=""===(o=this.getOpt("suffix"))?o:o||" ")+r.slice(this.query.endPos||0),n.val(a),n.caret("pos",i.length+t.length,{iframe:this.app.iframe}),n.is(":focus")||n.focus(),n.change()},n}(i),a=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return p(n,t),n.prototype._getRange=function(){var t;if((t=this.app.window.getSelection()).rangeCount>0)return t.getRangeAt(0)},n.prototype._setRange=function(t,n,r){if(null==r&&(r=this._getRange()),r)return n=e(n)[0],"after"===t?(r.setEndAfter(n),r.setStartAfter(n)):(r.setEndBefore(n),r.setStartBefore(n)),r.collapse(!1),this._clearRange(r)},n.prototype._clearRange=function(t){var e;if(null==t&&(t=this._getRange()),e=this.app.window.getSelection(),null==this.ctrl_a_pressed)return e.removeAllRanges(),e.addRange(t)},n.prototype._movingEvent=function(t){var e;return"click"===t.type||(e=t.which)===s.RIGHT||e===s.LEFT||e===s.UP||e===s.DOWN},n.prototype._unwrap=function(t){var n;return(n=(t=e(t).unwrap().get(0)).nextSibling)&&n.nodeValue&&(t.nodeValue+=n.nodeValue,e(n).remove()),t},n.prototype.catchQuery=function(t){var n,r,i,o,a,c,l,u,d,p,f,_;if((_=this._getRange())&&_.collapsed){if(t.which===s.ENTER)return(r=e(_.startContainer).closest(".atwho-query")).contents().unwrap(),r.is(":empty")&&r.remove(),(r=e(".atwho-query",this.app.document)).text(r.text()).contents().last().unwrap(),void this._clearRange();if(/firefox/i.test(navigator.userAgent)){if(e(_.startContainer).is(this.$inputor))return void this._clearRange();t.which===s.BACKSPACE&&_.startContainer.nodeType===document.ELEMENT_NODE&&(d=_.startOffset-1)>=0?((i=_.cloneRange()).setStart(_.startContainer,d),e(i.cloneContents()).contents().last().is(".atwho-inserted")&&(a=e(_.startContainer).contents().get(d),this._setRange("after",e(a).contents().last()))):t.which===s.LEFT&&_.startContainer.nodeType===document.TEXT_NODE&&(n=e(_.startContainer.previousSibling)).is(".atwho-inserted")&&0===_.startOffset&&this._setRange("after",n.contents().last())}if(e(_.startContainer).closest(".atwho-inserted").addClass("atwho-query").siblings().removeClass("atwho-query"),(r=e(".atwho-query",this.app.document)).length>0&&r.is(":empty")&&0===r.text().length&&r.remove(),this._movingEvent(t)||r.removeClass("atwho-inserted"),r.length>0)switch(t.which){case s.LEFT:return this._setRange("before",r.get(0),_),void r.removeClass("atwho-query");case s.RIGHT:return this._setRange("after",r.get(0).nextSibling,_),void r.removeClass("atwho-query")}if(r.length>0&&(f=r.attr("data-atwho-at-query"))&&(r.empty().html(f).attr("data-atwho-at-query",null),this._setRange("after",r.get(0),_)),(i=_.cloneRange()).setStart(_.startContainer,0),c="string"==typeof(u=this.callbacks("matcher").call(this,this.at,i.toString(),this.getOpt("startWithSpace"))),0===r.length&&c&&(o=_.startOffset-this.at.length-u.length)>=0&&(_.setStart(_.startContainer,o),r=e("<span/>",this.app.document).attr(this.getOpt("editableAtwhoQueryAttrs")).addClass("atwho-query"),_.surroundContents(r.get(0)),l=r.contents().last().get(0),/firefox/i.test(navigator.userAgent)?(_.setStart(l,l.length),_.setEnd(l,l.length),this._clearRange(_)):this._setRange("after",l,_)),!(c&&u.length<this.getOpt("minLen",0)))return c&&u.length<=this.getOpt("maxLen",20)?(p={text:u,el:r},this.trigger("matched",[this.at,p.text]),this.query=p):(this.view.hide(),this.query={el:r},r.text().indexOf(this.at)>=0&&(this._movingEvent(t)&&r.hasClass("atwho-inserted")?r.removeClass("atwho-query"):!1!==this.callbacks("afterMatchFailed").call(this,this.at,r)&&this._setRange("after",this._unwrap(r.text(r.text()).contents().first()))),null)}},n.prototype.rect=function(){var t,n;return n=this.query.el.offset(),this.app.iframe&&!this.app.iframeAsRoot&&(t=e(this.app.iframe).offset(),n.left+=t.left-this.$inputor.scrollLeft(),n.top+=t.top-this.$inputor.scrollTop()),n.bottom=n.top+this.query.el.height(),n},n.prototype.insert=function(t,e){var n,r,i,o;return i=""===(i=this.getOpt("suffix"))?i:i||"",n=e.data("item-data"),this.query.el.removeClass("atwho-query").addClass("atwho-inserted").html(t).attr("data-atwho-at-query",""+n["atwho-at"]+this.query.text),(r=this._getRange())&&(r.setEndAfter(this.query.el[0]),r.collapse(!1),r.insertNode(o=this.app.document.createTextNode(""+i)),this._setRange("after",o,r)),this.$inputor.is(":focus")||this.$inputor.focus(),this.$inputor.change()},n}(i),c=function(){function t(t){this.context=t,this.at=this.context.at,this.storage=this.context.$inputor}return t.prototype.destroy=function(){return this.storage.data(this.at,null)},t.prototype.saved=function(){return this.fetch()>0},t.prototype.query=function(t,e){var n,r,i;return r=this.fetch(),i=this.context.getOpt("searchKey"),r=this.context.callbacks("filter").call(this.context,t,r,i)||[],n=this.context.callbacks("remoteFilter"),r.length>0||!n&&0===r.length?e(r):n.call(this.context,t,e)},t.prototype.fetch=function(){return this.storage.data(this.at)||[]},t.prototype.save=function(t){return this.storage.data(this.at,this.context.callbacks("beforeSave").call(this.context,t||[]))},t.prototype.load=function(t){if(!this.saved()&&t)return this._load(t)},t.prototype.reload=function(t){return this._load(t)},t.prototype._load=function(t){return"string"==typeof t?e.ajax(t,{dataType:"json"}).done((n=this,function(t){return n.save(t)})):this.save(t);var n},t}(),u=function(){function t(t){this.context=t,this.$el=e("<div class='atwho-view'><ul class='atwho-view-ul'></ul></div>"),this.timeoutID=null,this.context.$el.append(this.$el),this.bindEvent()}return t.prototype.init=function(){var t;return t=this.context.getOpt("alias")||this.context.at.charCodeAt(0),this.$el.attr({id:"at-view-"+t})},t.prototype.destroy=function(){return this.$el.remove()},t.prototype.bindEvent=function(){var t,n;return(t=this.$el.find("ul")).on("mouseenter.atwho-view","li",(function(n){return t.find(".cur").removeClass("cur"),e(n.currentTarget).addClass("cur")})).on("click.atwho-view","li",(n=this,function(r){return t.find(".cur").removeClass("cur"),e(r.currentTarget).addClass("cur"),n.choose(r),r.preventDefault()}))},t.prototype.visible=function(){return this.$el.is(":visible")},t.prototype.highlighted=function(){return this.$el.find(".cur").length>0},t.prototype.choose=function(t){var e,n;if((e=this.$el.find(".cur")).length&&(n=this.context.insertContentFor(e),this.context._stopDelayedCall(),this.context.insert(this.context.callbacks("beforeInsert").call(this.context,n,e),e),this.context.trigger("inserted",[e,t]),this.hide(t)),this.context.getOpt("hideWithoutSuffix"))return this.stopShowing=!0},t.prototype.reposition=function(t){var n,r,i,o;return n=this.context.app.iframeAsRoot?this.context.app.window:window,t.bottom+this.$el.height()-e(n).scrollTop()>e(n).height()&&(t.bottom=t.top-this.$el.height()),t.left>(i=e(n).width()-this.$el.width()-5)&&(t.left=i),r={left:t.left,top:t.bottom},null!=(o=this.context.callbacks("beforeReposition"))&&o.call(this.context,r),this.$el.offset(r),this.context.trigger("reposition",[r])},t.prototype.next=function(){var t,e;return(e=(t=this.$el.find(".cur").removeClass("cur")).next()).length||(e=this.$el.find("li:first")),e.addClass("cur"),this.scrollTop(Math.max(0,t.innerHeight()*(e.index()+2)-this.$el.height()))},t.prototype.prev=function(){var t,e;return(e=(t=this.$el.find(".cur").removeClass("cur")).prev()).length||(e=this.$el.find("li:last")),e.addClass("cur"),this.scrollTop(Math.max(0,t.innerHeight()*(e.index()+2)-this.$el.height()))},t.prototype.scrollTop=function(t){var e;return(e=this.context.getOpt("scrollDuration"))?this.$el.animate({scrollTop:t},e):this.$el.scrollTop(t)},t.prototype.show=function(){var t;if(!this.stopShowing)return this.visible()||(this.$el.show(),this.$el.scrollTop(0),this.context.trigger("shown")),(t=this.context.rect())?this.reposition(t):void 0;this.stopShowing=!1},t.prototype.hide=function(t,e){var n,r;if(this.visible())return isNaN(e)?(this.$el.hide(),this.context.trigger("hidden",[t])):(r=this,n=function(){return r.hide()},clearTimeout(this.timeoutID),this.timeoutID=setTimeout(n,e))},t.prototype.render=function(t){var n,r,i,o,a,s,c;if(e.isArray(t)&&t.length>0){for(this.$el.find("ul").empty(),r=this.$el.find("ul"),c=this.context.getOpt("displayTpl"),i=0,a=t.length;i<a;i++)o=t[i],o=e.extend({},o,{"atwho-at":this.context.at}),s=this.context.callbacks("tplEval").call(this.context,c,o,"onDisplay"),(n=e(this.context.callbacks("highlighter").call(this.context,s,this.context.query.text))).data("item-data",o),r.append(n);return this.show(),this.context.getOpt("highlightFirst")?r.find("li:first").addClass("cur"):void 0}this.hide()},t}(),s={DOWN:40,UP:38,ESC:27,TAB:9,ENTER:13,CTRL:17,A:65,P:80,N:78,LEFT:37,UP:38,RIGHT:39,DOWN:40,BACKSPACE:8,SPACE:32},o={beforeSave:function(t){return i.arrayToDefaultHash(t)},matcher:function(t,e,n,r){var i,o,a;return t=t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),n&&(t="(?:^|\\s)"+t),i=decodeURI("%C3%80"),o=decodeURI("%C3%BF"),(a=new RegExp(t+"([A-Za-z"+i+"-"+o+"0-9_"+(r?" ":"")+"'.+-]*)$|"+t+"([^\\x00-\\xff]*)$","gi").exec(e))?a[2]||a[1]:null},filter:function(t,e,n){var r,i,o,a;for(r=[],i=0,a=e.length;i<a;i++)o=e[i],~new String(o[n]).toLowerCase().indexOf(t.toLowerCase())&&r.push(o);return r},remoteFilter:null,sorter:function(t,e,n){var r,i,o,a;if(!t)return e;for(r=[],i=0,a=e.length;i<a;i++)(o=e[i]).atwho_order=new String(o[n]).toLowerCase().indexOf(t.toLowerCase()),o.atwho_order>-1&&r.push(o);return r.sort((function(t,e){return t.atwho_order-e.atwho_order}))},tplEval:function(t,e){var n;n=t;try{return"string"!=typeof t&&(n=t(e)),n.replace(/\$\{([^\}]*)\}/g,(function(t,n,r){return e[n]}))}catch(t){return""}},highlighter:function(t,e){var n;return e?(n=new RegExp(">\\s*(\\w*?)("+e.replace("+","\\+")+")(\\w*)\\s*<","ig"),t.replace(n,(function(t,e,n,r){return"> "+e+"<strong>"+n+"</strong>"+r+" <"}))):t},beforeInsert:function(t,e){return t},beforeReposition:function(t){return t},afterMatchFailed:function(t,e){}},n={load:function(t,e){var n;if(n=this.controller(t))return n.model.load(e)},isSelecting:function(){var t;return!!(null!=(t=this.controller())?t.view.visible():void 0)},hide:function(){var t;return null!=(t=this.controller())?t.view.hide():void 0},reposition:function(){var t;if(t=this.controller())return t.view.reposition(t.rect())},setIframe:function(t,e){return this.setupRootElement(t,e),null},run:function(){return this.dispatch()},destroy:function(){return this.shutdown(),this.$inputor.data("atwho",null)}},e.fn.atwho=function(t){var i,o;return i=arguments,o=null,this.filter('textarea, input, [contenteditable=""], [contenteditable=true]').each((function(){var a,s;return(s=(a=e(this)).data("atwho"))||a.data("atwho",s=new r(this)),"object"!=typeof t&&t?n[t]&&s?o=n[t].apply(s,Array.prototype.slice.call(i,1)):e.error("Method "+t+" does not exist on jQuery.atwho"):s.reg(t.at,t)})),null!=o?o:this},e.fn.atwho.default={at:void 0,alias:void 0,data:null,displayTpl:"<li>${name}</li>",insertTpl:"${atwho-at}${name}",callbacks:o,searchKey:"name",suffix:void 0,hideWithoutSuffix:!1,startWithSpace:!0,highlightFirst:!0,limit:5,maxLen:20,minLen:0,displayTimeout:300,delay:null,spaceSelectsMatch:!1,tabSelectsMatch:!0,editableAtwhoQueryAttrs:{},scrollDuration:150,suspendOnComposing:!0,lookUpOnClick:!0},e.fn.atwho.debug=!1}(t)}.apply(e,r),void 0===i||(t.exports=i)},function(t,e,n){var r,i,o;o=this,r=[n(7)],void 0===(i=function(t){return o.returnExportsGlobal=function(t){"use strict";var e,n,r,i,o,a,s,c;e=function(){function e(t){this.$inputor=t,this.domInputor=this.$inputor[0]}return e.prototype.setPos=function(t){return this.domInputor},e.prototype.getIEPosition=function(){return this.getPosition()},e.prototype.getPosition=function(){var t,e;return e=this.getOffset(),t=this.$inputor.offset(),e.left-=t.left,e.top-=t.top,e},e.prototype.getOldIEPos=function(){var t,e;return e=a.selection.createRange(),(t=a.body.createTextRange()).moveToElementText(this.domInputor),t.setEndPoint("EndToEnd",e),t.text.length},e.prototype.getPos=function(){var t,e,n;return(n=this.range())?((t=n.cloneRange()).selectNodeContents(this.domInputor),t.setEnd(n.endContainer,n.endOffset),e=t.toString().length,t.detach(),e):a.selection?this.getOldIEPos():void 0},e.prototype.getOldIEOffset=function(){var t,e;return(t=a.selection.createRange().duplicate()).moveStart("character",-1),{height:(e=t.getBoundingClientRect()).bottom-e.top,left:e.left,top:e.top}},e.prototype.getOffset=function(e){var n,r,i,o,c;return s.getSelection&&(i=this.range())?(i.endOffset-1>0&&i.endContainer===!this.domInputor&&((n=i.cloneRange()).setStart(i.endContainer,i.endOffset-1),n.setEnd(i.endContainer,i.endOffset),r={height:(o=n.getBoundingClientRect()).height,left:o.left+o.width,top:o.top},n.detach()),r&&0!==(null!=r?r.height:void 0)||(n=i.cloneRange(),c=t(a.createTextNode("|")),n.insertNode(c[0]),n.selectNode(c[0]),r={height:(o=n.getBoundingClientRect()).height,left:o.left,top:o.top},c.remove(),n.detach())):a.selection&&(r=this.getOldIEOffset()),r&&(r.top+=t(s).scrollTop(),r.left+=t(s).scrollLeft()),r},e.prototype.range=function(){var t;if(s.getSelection)return(t=s.getSelection()).rangeCount>0?t.getRangeAt(0):null},e}(),n=function(){function e(t){this.$inputor=t,this.domInputor=this.$inputor[0]}return e.prototype.getIEPos=function(){var t,e,n,r,i,o;return e=this.domInputor,r=0,(i=a.selection.createRange())&&i.parentElement()===e&&(n=e.value.replace(/\r\n/g,"\n").length,(o=e.createTextRange()).moveToBookmark(i.getBookmark()),(t=e.createTextRange()).collapse(!1),r=o.compareEndPoints("StartToEnd",t)>-1?n:-o.moveStart("character",-n)),r},e.prototype.getPos=function(){return a.selection?this.getIEPos():this.domInputor.selectionStart},e.prototype.setPos=function(t){var e,n;return e=this.domInputor,a.selection?((n=e.createTextRange()).move("character",t),n.select()):e.setSelectionRange&&e.setSelectionRange(t,t),e},e.prototype.getIEOffset=function(t){var e;return e=this.domInputor.createTextRange(),t||(t=this.getPos()),e.move("character",t),{left:e.boundingLeft,top:e.boundingTop,height:e.boundingHeight}},e.prototype.getOffset=function(e){var n,r,i;return n=this.$inputor,a.selection?((r=this.getIEOffset(e)).top+=t(s).scrollTop()+n.scrollTop(),r.left+=t(s).scrollLeft()+n.scrollLeft(),r):(r=n.offset(),i=this.getPosition(e),{left:r.left+i.left-n.scrollLeft(),top:r.top+i.top-n.scrollTop(),height:i.height})},e.prototype.getPosition=function(t){var e,n,i,o,a;return e=this.$inputor,i=function(t){return t=t.replace(/<|>|`|"|&/g,"?").replace(/\r\n|\r|\n/g,"<br/>"),/firefox/i.test(navigator.userAgent)&&(t=t.replace(/\s/g,"&nbsp;")),t},void 0===t&&(t=this.getPos()),a=e.val().slice(0,t),n=e.val().slice(t),o="<span style='position: relative; display: inline;'>"+i(a)+"</span>",o+="<span id='caret' style='position: relative; display: inline;'>|</span>",o+="<span style='position: relative; display: inline;'>"+i(n)+"</span>",new r(e).create(o).rect()},e.prototype.getIEPosition=function(t){var e,n;return n=this.getIEOffset(t),e=this.$inputor.offset(),{left:n.left-e.left,top:n.top-e.top,height:n.height}},e}(),r=function(){function e(t){this.$inputor=t}return e.prototype.css_attr=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopStyle","borderRightStyle","borderBottomStyle","borderLeftStyle","borderTopWidth","boxSizing","fontFamily","fontSize","fontWeight","height","letterSpacing","lineHeight","marginBottom","marginLeft","marginRight","marginTop","outlineWidth","overflow","overflowX","overflowY","paddingBottom","paddingLeft","paddingRight","paddingTop","textAlign","textOverflow","textTransform","whiteSpace","wordBreak","wordWrap"],e.prototype.mirrorCss=function(){var e,n=this;return e={position:"absolute",left:-9999,top:0,zIndex:-2e4},"TEXTAREA"===this.$inputor.prop("tagName")&&this.css_attr.push("width"),t.each(this.css_attr,(function(t,r){return e[r]=n.$inputor.css(r)})),e},e.prototype.create=function(e){return this.$mirror=t("<div></div>"),this.$mirror.css(this.mirrorCss()),this.$mirror.html(e),this.$inputor.after(this.$mirror),this},e.prototype.rect=function(){var t,e,n;return n={left:(e=(t=this.$mirror.find("#caret")).position()).left,top:e.top,height:t.height()},this.$mirror.remove(),n},e}(),i={contentEditable:function(t){return!(!t[0].contentEditable||"true"!==t[0].contentEditable)}},o={pos:function(t){return t||0===t?this.setPos(t):this.getPos()},position:function(t){return a.selection?this.getIEPosition(t):this.getPosition(t)},offset:function(t){return this.getOffset(t)}},a=null,s=null,c=function(t){var e;return(e=null!=t?t.iframe:void 0)?(s=e.contentWindow,a=e.contentDocument||s.document):(s=window,a=document)},t.fn.caret=function(r,a,s){var l;return o[r]?(t.isPlainObject(a)?(c(a),a=void 0):c(s),l=i.contentEditable(this)?new e(this):new n(this),o[r].apply(l,[a])):t.error("Method "+r+" does not exist on jQuery.caret")},t.fn.caret.EditableCaret=e,t.fn.caret.InputCaret=n,t.fn.caret.Utils=i,t.fn.caret.apis=o}(t)}.apply(e,r))||(t.exports=i)},function(t,e,n){var r,i,o;i=[n(7)],r=function(t){var e="waitForImages";t.waitForImages={hasImageProperties:["backgroundImage","listStyleImage","borderImage","borderCornerImage","cursor"],hasImageAttributes:["srcset"]},t.expr[":"]["has-src"]=function(e){return t(e).is('img[src][src!=""]')},t.expr[":"].uncached=function(e){return!!t(e).is(":has-src")&&!e.complete},t.fn.waitForImages=function(){var n,r,i,o=0,a=0,s=t.Deferred();if(t.isPlainObject(arguments[0])?(i=arguments[0].waitForAll,r=arguments[0].each,n=arguments[0].finished):1===arguments.length&&"boolean"===t.type(arguments[0])?i=arguments[0]:(n=arguments[0],r=arguments[1],i=arguments[2]),n=n||t.noop,r=r||t.noop,i=!!i,!t.isFunction(n)||!t.isFunction(r))throw new TypeError("An invalid callback was supplied.");return this.each((function(){var c=t(this),l=[],u=t.waitForImages.hasImageProperties||[],d=t.waitForImages.hasImageAttributes||[],p=/url\(\s*(['"]?)(.*?)\1\s*\)/g;i?c.find("*").addBack().each((function(){var e=t(this);e.is("img:has-src")&&l.push({src:e.attr("src"),element:e[0]}),t.each(u,(function(t,n){var r,i=e.css(n);if(!i)return!0;for(;r=p.exec(i);)l.push({src:r[2],element:e[0]})})),t.each(d,(function(n,r){var i,o=e.attr(r);if(!o)return!0;i=o.split(","),t.each(i,(function(n,r){r=t.trim(r).split(" ")[0],l.push({src:r,element:e[0]})}))}))})):c.find("img:has-src").each((function(){l.push({src:this.src,element:this})})),o=l.length,a=0,0===o&&(n.call(c[0]),s.resolveWith(c[0])),t.each(l,(function(i,l){var u=new Image,d="load."+e+" error."+e;t(u).one(d,(function e(i){var u=[a,o,"load"==i.type];if(a++,r.apply(l.element,u),s.notifyWith(l.element,u),t(this).off(d,e),a==o)return n.call(c[0]),s.resolveWith(c[0]),!1})),u.src=l.src}))})),s.promise()}},void 0===(o="function"==typeof r?r.apply(e,i):r)||(t.exports=o)},function(t,e,n){(function(e){t.exports=e._=n(268)}).call(this,n(1))},function(t,e,n){(function(t,r){var i;(function(){var o,a="Expected a function",s="__lodash_hash_undefined__",c="__lodash_placeholder__",l=16,u=32,d=64,p=128,f=256,_=1/0,h=9007199254740991,m=NaN,g=4294967295,v=[["ary",p],["bind",1],["bindKey",2],["curry",8],["curryRight",l],["flip",512],["partial",u],["partialRight",d],["rearg",f]],b="[object Arguments]",y="[object Array]",w="[object Boolean]",$="[object Date]",x="[object Error]",k="[object Function]",C="[object GeneratorFunction]",S="[object Map]",A="[object Number]",E="[object Object]",j="[object Promise]",O="[object RegExp]",T="[object Set]",q="[object String]",P="[object Symbol]",M="[object WeakMap]",I="[object ArrayBuffer]",R="[object DataView]",D="[object Float32Array]",z="[object Float64Array]",L="[object Int8Array]",N="[object Int16Array]",F="[object Int32Array]",U="[object Uint8Array]",V="[object Uint8ClampedArray]",H="[object Uint16Array]",B="[object Uint32Array]",W=/\b__p \+= '';/g,G=/\b(__p \+=) '' \+/g,Y=/(__e\(.*?\)|\b__t\)) \+\n'';/g,K=/&(?:amp|lt|gt|quot|#39);/g,J=/[&<>"']/g,Q=RegExp(K.source),X=RegExp(J.source),Z=/<%-([\s\S]+?)%>/g,tt=/<%([\s\S]+?)%>/g,et=/<%=([\s\S]+?)%>/g,nt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,rt=/^\w*$/,it=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ot=/[\\^$.*+?()[\]{}|]/g,at=RegExp(ot.source),st=/^\s+|\s+$/g,ct=/^\s+/,lt=/\s+$/,ut=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,dt=/\{\n\/\* \[wrapped with (.+)\] \*/,pt=/,? & /,ft=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,_t=/\\(\\)?/g,ht=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,mt=/\w*$/,gt=/^[-+]0x[0-9a-f]+$/i,vt=/^0b[01]+$/i,bt=/^\[object .+?Constructor\]$/,yt=/^0o[0-7]+$/i,wt=/^(?:0|[1-9]\d*)$/,$t=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,xt=/($^)/,kt=/['\n\r\u2028\u2029\\]/g,Ct="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",St="\\u2700-\\u27bf",At="a-z\\xdf-\\xf6\\xf8-\\xff",Et="A-Z\\xc0-\\xd6\\xd8-\\xde",jt="\\ufe0e\\ufe0f",Ot="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Tt="[']",qt="[\\ud800-\\udfff]",Pt="["+Ot+"]",Mt="["+Ct+"]",It="\\d+",Rt="[\\u2700-\\u27bf]",Dt="["+At+"]",zt="[^\\ud800-\\udfff"+Ot+It+St+At+Et+"]",Lt="\\ud83c[\\udffb-\\udfff]",Nt="[^\\ud800-\\udfff]",Ft="(?:\\ud83c[\\udde6-\\uddff]){2}",Ut="[\\ud800-\\udbff][\\udc00-\\udfff]",Vt="["+Et+"]",Ht="(?:"+Dt+"|"+zt+")",Bt="(?:"+Vt+"|"+zt+")",Wt="(?:['](?:d|ll|m|re|s|t|ve))?",Gt="(?:['](?:D|LL|M|RE|S|T|VE))?",Yt="(?:"+Mt+"|"+Lt+")"+"?",Kt="[\\ufe0e\\ufe0f]?",Jt=Kt+Yt+("(?:\\u200d(?:"+[Nt,Ft,Ut].join("|")+")"+Kt+Yt+")*"),Qt="(?:"+[Rt,Ft,Ut].join("|")+")"+Jt,Xt="(?:"+[Nt+Mt+"?",Mt,Ft,Ut,qt].join("|")+")",Zt=RegExp(Tt,"g"),te=RegExp(Mt,"g"),ee=RegExp(Lt+"(?="+Lt+")|"+Xt+Jt,"g"),ne=RegExp([Vt+"?"+Dt+"+"+Wt+"(?="+[Pt,Vt,"$"].join("|")+")",Bt+"+"+Gt+"(?="+[Pt,Vt+Ht,"$"].join("|")+")",Vt+"?"+Ht+"+"+Wt,Vt+"+"+Gt,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",It,Qt].join("|"),"g"),re=RegExp("[\\u200d\\ud800-\\udfff"+Ct+jt+"]"),ie=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,oe=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],ae=-1,se={};se[D]=se[z]=se[L]=se[N]=se[F]=se[U]=se[V]=se[H]=se[B]=!0,se[b]=se[y]=se[I]=se[w]=se[R]=se[$]=se[x]=se[k]=se[S]=se[A]=se[E]=se[O]=se[T]=se[q]=se[M]=!1;var ce={};ce[b]=ce[y]=ce[I]=ce[R]=ce[w]=ce[$]=ce[D]=ce[z]=ce[L]=ce[N]=ce[F]=ce[S]=ce[A]=ce[E]=ce[O]=ce[T]=ce[q]=ce[P]=ce[U]=ce[V]=ce[H]=ce[B]=!0,ce[x]=ce[k]=ce[M]=!1;var le={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ue=parseFloat,de=parseInt,pe="object"==typeof t&&t&&t.Object===Object&&t,fe="object"==typeof self&&self&&self.Object===Object&&self,_e=pe||fe||Function("return this")(),he=e&&!e.nodeType&&e,me=he&&"object"==typeof r&&r&&!r.nodeType&&r,ge=me&&me.exports===he,ve=ge&&pe.process,be=function(){try{var t=me&&me.require&&me.require("util").types;return t||ve&&ve.binding&&ve.binding("util")}catch(t){}}(),ye=be&&be.isArrayBuffer,we=be&&be.isDate,$e=be&&be.isMap,xe=be&&be.isRegExp,ke=be&&be.isSet,Ce=be&&be.isTypedArray;function Se(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function Ae(t,e,n,r){for(var i=-1,o=null==t?0:t.length;++i<o;){var a=t[i];e(r,a,n(a),t)}return r}function Ee(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}function je(t,e){for(var n=null==t?0:t.length;n--&&!1!==e(t[n],n,t););return t}function Oe(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}function Te(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var a=t[n];e(a,n,t)&&(o[i++]=a)}return o}function qe(t,e){return!!(null==t?0:t.length)&&Ue(t,e,0)>-1}function Pe(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}function Me(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}function Ie(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}function Re(t,e,n,r){var i=-1,o=null==t?0:t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n}function De(t,e,n,r){var i=null==t?0:t.length;for(r&&i&&(n=t[--i]);i--;)n=e(n,t[i],i,t);return n}function ze(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var Le=We("length");function Ne(t,e,n){var r;return n(t,(function(t,n,i){if(e(t,n,i))return r=n,!1})),r}function Fe(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1}function Ue(t,e,n){return e==e?function(t,e,n){var r=n-1,i=t.length;for(;++r<i;)if(t[r]===e)return r;return-1}(t,e,n):Fe(t,He,n)}function Ve(t,e,n,r){for(var i=n-1,o=t.length;++i<o;)if(r(t[i],e))return i;return-1}function He(t){return t!=t}function Be(t,e){var n=null==t?0:t.length;return n?Ke(t,e)/n:m}function We(t){return function(e){return null==e?o:e[t]}}function Ge(t){return function(e){return null==t?o:t[e]}}function Ye(t,e,n,r,i){return i(t,(function(t,i,o){n=r?(r=!1,t):e(n,t,i,o)})),n}function Ke(t,e){for(var n,r=-1,i=t.length;++r<i;){var a=e(t[r]);a!==o&&(n=n===o?a:n+a)}return n}function Je(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}function Qe(t){return function(e){return t(e)}}function Xe(t,e){return Me(e,(function(e){return t[e]}))}function Ze(t,e){return t.has(e)}function tn(t,e){for(var n=-1,r=t.length;++n<r&&Ue(e,t[n],0)>-1;);return n}function en(t,e){for(var n=t.length;n--&&Ue(e,t[n],0)>-1;);return n}function nn(t,e){for(var n=t.length,r=0;n--;)t[n]===e&&++r;return r}var rn=Ge({"":"A","":"A","":"A","":"A","":"A","":"A","":"a","":"a","":"a","":"a","":"a","":"a","":"C","":"c","":"D","":"d","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"N","":"n","":"O","":"O","":"O","":"O","":"O","":"O","":"o","":"o","":"o","":"o","":"o","":"o","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"Y","":"y","":"y","":"Ae","":"ae","":"Th","":"th","":"ss","":"A","":"A","":"A","":"a","":"a","":"a","":"C","":"C","":"C","":"C","":"c","":"c","":"c","":"c","":"D","":"D","":"d","":"d","":"E","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"e","":"G","":"G","":"G","":"G","":"g","":"g","":"g","":"g","":"H","":"H","":"h","":"h","":"I","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"i","":"J","":"j","":"K","":"k","":"k","":"L","":"L","":"L","":"L","":"L","":"l","":"l","":"l","":"l","":"l","":"N","":"N","":"N","":"N","":"n","":"n","":"n","":"n","":"O","":"O","":"O","":"o","":"o","":"o","":"R","":"R","":"R","":"r","":"r","":"r","":"S","":"S","":"S","":"S","":"s","":"s","":"s","":"s","":"T","":"T","":"T","":"t","":"t","":"t","":"U","":"U","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"u","":"u","":"W","":"w","":"Y","":"y","":"Y","":"Z","":"Z","":"Z","":"z","":"z","":"z","":"IJ","":"ij","":"Oe","":"oe","":"'n","":"s"}),on=Ge({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function an(t){return"\\"+le[t]}function sn(t){return re.test(t)}function cn(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n}function ln(t,e){return function(n){return t(e(n))}}function un(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var a=t[n];a!==e&&a!==c||(t[n]=c,o[i++]=n)}return o}function dn(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}function pn(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=[t,t]})),n}function fn(t){return sn(t)?function(t){var e=ee.lastIndex=0;for(;ee.test(t);)++e;return e}(t):Le(t)}function _n(t){return sn(t)?function(t){return t.match(ee)||[]}(t):function(t){return t.split("")}(t)}var hn=Ge({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var mn=function t(e){var n,r=(e=null==e?_e:mn.defaults(_e.Object(),e,mn.pick(_e,oe))).Array,i=e.Date,Ct=e.Error,St=e.Function,At=e.Math,Et=e.Object,jt=e.RegExp,Ot=e.String,Tt=e.TypeError,qt=r.prototype,Pt=St.prototype,Mt=Et.prototype,It=e["__core-js_shared__"],Rt=Pt.toString,Dt=Mt.hasOwnProperty,zt=0,Lt=(n=/[^.]+$/.exec(It&&It.keys&&It.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",Nt=Mt.toString,Ft=Rt.call(Et),Ut=_e._,Vt=jt("^"+Rt.call(Dt).replace(ot,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ht=ge?e.Buffer:o,Bt=e.Symbol,Wt=e.Uint8Array,Gt=Ht?Ht.allocUnsafe:o,Yt=ln(Et.getPrototypeOf,Et),Kt=Et.create,Jt=Mt.propertyIsEnumerable,Qt=qt.splice,Xt=Bt?Bt.isConcatSpreadable:o,ee=Bt?Bt.iterator:o,re=Bt?Bt.toStringTag:o,le=function(){try{var t=fo(Et,"defineProperty");return t({},"",{}),t}catch(t){}}(),pe=e.clearTimeout!==_e.clearTimeout&&e.clearTimeout,fe=i&&i.now!==_e.Date.now&&i.now,he=e.setTimeout!==_e.setTimeout&&e.setTimeout,me=At.ceil,ve=At.floor,be=Et.getOwnPropertySymbols,Le=Ht?Ht.isBuffer:o,Ge=e.isFinite,gn=qt.join,vn=ln(Et.keys,Et),bn=At.max,yn=At.min,wn=i.now,$n=e.parseInt,xn=At.random,kn=qt.reverse,Cn=fo(e,"DataView"),Sn=fo(e,"Map"),An=fo(e,"Promise"),En=fo(e,"Set"),jn=fo(e,"WeakMap"),On=fo(Et,"create"),Tn=jn&&new jn,qn={},Pn=No(Cn),Mn=No(Sn),In=No(An),Rn=No(En),Dn=No(jn),zn=Bt?Bt.prototype:o,Ln=zn?zn.valueOf:o,Nn=zn?zn.toString:o;function Fn(t){if(rs(t)&&!Wa(t)&&!(t instanceof Bn)){if(t instanceof Hn)return t;if(Dt.call(t,"__wrapped__"))return Fo(t)}return new Hn(t)}var Un=function(){function t(){}return function(e){if(!ns(e))return{};if(Kt)return Kt(e);t.prototype=e;var n=new t;return t.prototype=o,n}}();function Vn(){}function Hn(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=o}function Bn(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=g,this.__views__=[]}function Wn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Gn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Yn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Kn(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new Yn;++e<n;)this.add(t[e])}function Jn(t){var e=this.__data__=new Gn(t);this.size=e.size}function Qn(t,e){var n=Wa(t),r=!n&&Ba(t),i=!n&&!r&&Ja(t),o=!n&&!r&&!i&&ds(t),a=n||r||i||o,s=a?Je(t.length,Ot):[],c=s.length;for(var l in t)!e&&!Dt.call(t,l)||a&&("length"==l||i&&("offset"==l||"parent"==l)||o&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||yo(l,c))||s.push(l);return s}function Xn(t){var e=t.length;return e?t[Kr(0,e-1)]:o}function Zn(t,e){return Do(Oi(t),cr(e,0,t.length))}function tr(t){return Do(Oi(t))}function er(t,e,n){(n!==o&&!Ua(t[e],n)||n===o&&!(e in t))&&ar(t,e,n)}function nr(t,e,n){var r=t[e];Dt.call(t,e)&&Ua(r,n)&&(n!==o||e in t)||ar(t,e,n)}function rr(t,e){for(var n=t.length;n--;)if(Ua(t[n][0],e))return n;return-1}function ir(t,e,n,r){return fr(t,(function(t,i,o){e(r,t,n(t),o)})),r}function or(t,e){return t&&Ti(e,Ps(e),t)}function ar(t,e,n){"__proto__"==e&&le?le(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function sr(t,e){for(var n=-1,i=e.length,a=r(i),s=null==t;++n<i;)a[n]=s?o:Es(t,e[n]);return a}function cr(t,e,n){return t==t&&(n!==o&&(t=t<=n?t:n),e!==o&&(t=t>=e?t:e)),t}function lr(t,e,n,r,i,a){var s,c=1&e,l=2&e,u=4&e;if(n&&(s=i?n(t,r,i,a):n(t)),s!==o)return s;if(!ns(t))return t;var d=Wa(t);if(d){if(s=function(t){var e=t.length,n=new t.constructor(e);e&&"string"==typeof t[0]&&Dt.call(t,"index")&&(n.index=t.index,n.input=t.input);return n}(t),!c)return Oi(t,s)}else{var p=mo(t),f=p==k||p==C;if(Ja(t))return ki(t,c);if(p==E||p==b||f&&!i){if(s=l||f?{}:vo(t),!c)return l?function(t,e){return Ti(t,ho(t),e)}(t,function(t,e){return t&&Ti(e,Ms(e),t)}(s,t)):function(t,e){return Ti(t,_o(t),e)}(t,or(s,t))}else{if(!ce[p])return i?t:{};s=function(t,e,n){var r=t.constructor;switch(e){case I:return Ci(t);case w:case $:return new r(+t);case R:return function(t,e){var n=e?Ci(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,n);case D:case z:case L:case N:case F:case U:case V:case H:case B:return Si(t,n);case S:return new r;case A:case q:return new r(t);case O:return function(t){var e=new t.constructor(t.source,mt.exec(t));return e.lastIndex=t.lastIndex,e}(t);case T:return new r;case P:return i=t,Ln?Et(Ln.call(i)):{}}var i}(t,p,c)}}a||(a=new Jn);var _=a.get(t);if(_)return _;a.set(t,s),cs(t)?t.forEach((function(r){s.add(lr(r,e,n,r,t,a))})):is(t)&&t.forEach((function(r,i){s.set(i,lr(r,e,n,i,t,a))}));var h=d?o:(u?l?oo:io:l?Ms:Ps)(t);return Ee(h||t,(function(r,i){h&&(r=t[i=r]),nr(s,i,lr(r,e,n,i,t,a))})),s}function ur(t,e,n){var r=n.length;if(null==t)return!r;for(t=Et(t);r--;){var i=n[r],a=e[i],s=t[i];if(s===o&&!(i in t)||!a(s))return!1}return!0}function dr(t,e,n){if("function"!=typeof t)throw new Tt(a);return Po((function(){t.apply(o,n)}),e)}function pr(t,e,n,r){var i=-1,o=qe,a=!0,s=t.length,c=[],l=e.length;if(!s)return c;n&&(e=Me(e,Qe(n))),r?(o=Pe,a=!1):e.length>=200&&(o=Ze,a=!1,e=new Kn(e));t:for(;++i<s;){var u=t[i],d=null==n?u:n(u);if(u=r||0!==u?u:0,a&&d==d){for(var p=l;p--;)if(e[p]===d)continue t;c.push(u)}else o(e,d,r)||c.push(u)}return c}Fn.templateSettings={escape:Z,evaluate:tt,interpolate:et,variable:"",imports:{_:Fn}},Fn.prototype=Vn.prototype,Fn.prototype.constructor=Fn,Hn.prototype=Un(Vn.prototype),Hn.prototype.constructor=Hn,Bn.prototype=Un(Vn.prototype),Bn.prototype.constructor=Bn,Wn.prototype.clear=function(){this.__data__=On?On(null):{},this.size=0},Wn.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},Wn.prototype.get=function(t){var e=this.__data__;if(On){var n=e[t];return n===s?o:n}return Dt.call(e,t)?e[t]:o},Wn.prototype.has=function(t){var e=this.__data__;return On?e[t]!==o:Dt.call(e,t)},Wn.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=On&&e===o?s:e,this},Gn.prototype.clear=function(){this.__data__=[],this.size=0},Gn.prototype.delete=function(t){var e=this.__data__,n=rr(e,t);return!(n<0)&&(n==e.length-1?e.pop():Qt.call(e,n,1),--this.size,!0)},Gn.prototype.get=function(t){var e=this.__data__,n=rr(e,t);return n<0?o:e[n][1]},Gn.prototype.has=function(t){return rr(this.__data__,t)>-1},Gn.prototype.set=function(t,e){var n=this.__data__,r=rr(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this},Yn.prototype.clear=function(){this.size=0,this.__data__={hash:new Wn,map:new(Sn||Gn),string:new Wn}},Yn.prototype.delete=function(t){var e=uo(this,t).delete(t);return this.size-=e?1:0,e},Yn.prototype.get=function(t){return uo(this,t).get(t)},Yn.prototype.has=function(t){return uo(this,t).has(t)},Yn.prototype.set=function(t,e){var n=uo(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this},Kn.prototype.add=Kn.prototype.push=function(t){return this.__data__.set(t,s),this},Kn.prototype.has=function(t){return this.__data__.has(t)},Jn.prototype.clear=function(){this.__data__=new Gn,this.size=0},Jn.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},Jn.prototype.get=function(t){return this.__data__.get(t)},Jn.prototype.has=function(t){return this.__data__.has(t)},Jn.prototype.set=function(t,e){var n=this.__data__;if(n instanceof Gn){var r=n.__data__;if(!Sn||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new Yn(r)}return n.set(t,e),this.size=n.size,this};var fr=Mi(wr),_r=Mi($r,!0);function hr(t,e){var n=!0;return fr(t,(function(t,r,i){return n=!!e(t,r,i)})),n}function mr(t,e,n){for(var r=-1,i=t.length;++r<i;){var a=t[r],s=e(a);if(null!=s&&(c===o?s==s&&!us(s):n(s,c)))var c=s,l=a}return l}function gr(t,e){var n=[];return fr(t,(function(t,r,i){e(t,r,i)&&n.push(t)})),n}function vr(t,e,n,r,i){var o=-1,a=t.length;for(n||(n=bo),i||(i=[]);++o<a;){var s=t[o];e>0&&n(s)?e>1?vr(s,e-1,n,r,i):Ie(i,s):r||(i[i.length]=s)}return i}var br=Ii(),yr=Ii(!0);function wr(t,e){return t&&br(t,e,Ps)}function $r(t,e){return t&&yr(t,e,Ps)}function xr(t,e){return Te(e,(function(e){return Za(t[e])}))}function kr(t,e){for(var n=0,r=(e=yi(e,t)).length;null!=t&&n<r;)t=t[Lo(e[n++])];return n&&n==r?t:o}function Cr(t,e,n){var r=e(t);return Wa(t)?r:Ie(r,n(t))}function Sr(t){return null==t?t===o?"[object Undefined]":"[object Null]":re&&re in Et(t)?function(t){var e=Dt.call(t,re),n=t[re];try{t[re]=o;var r=!0}catch(t){}var i=Nt.call(t);r&&(e?t[re]=n:delete t[re]);return i}(t):function(t){return Nt.call(t)}(t)}function Ar(t,e){return t>e}function Er(t,e){return null!=t&&Dt.call(t,e)}function jr(t,e){return null!=t&&e in Et(t)}function Or(t,e,n){for(var i=n?Pe:qe,a=t[0].length,s=t.length,c=s,l=r(s),u=1/0,d=[];c--;){var p=t[c];c&&e&&(p=Me(p,Qe(e))),u=yn(p.length,u),l[c]=!n&&(e||a>=120&&p.length>=120)?new Kn(c&&p):o}p=t[0];var f=-1,_=l[0];t:for(;++f<a&&d.length<u;){var h=p[f],m=e?e(h):h;if(h=n||0!==h?h:0,!(_?Ze(_,m):i(d,m,n))){for(c=s;--c;){var g=l[c];if(!(g?Ze(g,m):i(t[c],m,n)))continue t}_&&_.push(m),d.push(h)}}return d}function Tr(t,e,n){var r=null==(t=jo(t,e=yi(e,t)))?t:t[Lo(Xo(e))];return null==r?o:Se(r,t,n)}function qr(t){return rs(t)&&Sr(t)==b}function Pr(t,e,n,r,i){return t===e||(null==t||null==e||!rs(t)&&!rs(e)?t!=t&&e!=e:function(t,e,n,r,i,a){var s=Wa(t),c=Wa(e),l=s?y:mo(t),u=c?y:mo(e),d=(l=l==b?E:l)==E,p=(u=u==b?E:u)==E,f=l==u;if(f&&Ja(t)){if(!Ja(e))return!1;s=!0,d=!1}if(f&&!d)return a||(a=new Jn),s||ds(t)?no(t,e,n,r,i,a):function(t,e,n,r,i,o,a){switch(n){case R:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case I:return!(t.byteLength!=e.byteLength||!o(new Wt(t),new Wt(e)));case w:case $:case A:return Ua(+t,+e);case x:return t.name==e.name&&t.message==e.message;case O:case q:return t==e+"";case S:var s=cn;case T:var c=1&r;if(s||(s=dn),t.size!=e.size&&!c)return!1;var l=a.get(t);if(l)return l==e;r|=2,a.set(t,e);var u=no(s(t),s(e),r,i,o,a);return a.delete(t),u;case P:if(Ln)return Ln.call(t)==Ln.call(e)}return!1}(t,e,l,n,r,i,a);if(!(1&n)){var _=d&&Dt.call(t,"__wrapped__"),h=p&&Dt.call(e,"__wrapped__");if(_||h){var m=_?t.value():t,g=h?e.value():e;return a||(a=new Jn),i(m,g,n,r,a)}}if(!f)return!1;return a||(a=new Jn),function(t,e,n,r,i,a){var s=1&n,c=io(t),l=c.length,u=io(e).length;if(l!=u&&!s)return!1;var d=l;for(;d--;){var p=c[d];if(!(s?p in e:Dt.call(e,p)))return!1}var f=a.get(t);if(f&&a.get(e))return f==e;var _=!0;a.set(t,e),a.set(e,t);var h=s;for(;++d<l;){var m=t[p=c[d]],g=e[p];if(r)var v=s?r(g,m,p,e,t,a):r(m,g,p,t,e,a);if(!(v===o?m===g||i(m,g,n,r,a):v)){_=!1;break}h||(h="constructor"==p)}if(_&&!h){var b=t.constructor,y=e.constructor;b==y||!("constructor"in t)||!("constructor"in e)||"function"==typeof b&&b instanceof b&&"function"==typeof y&&y instanceof y||(_=!1)}return a.delete(t),a.delete(e),_}(t,e,n,r,i,a)}(t,e,n,r,Pr,i))}function Mr(t,e,n,r){var i=n.length,a=i,s=!r;if(null==t)return!a;for(t=Et(t);i--;){var c=n[i];if(s&&c[2]?c[1]!==t[c[0]]:!(c[0]in t))return!1}for(;++i<a;){var l=(c=n[i])[0],u=t[l],d=c[1];if(s&&c[2]){if(u===o&&!(l in t))return!1}else{var p=new Jn;if(r)var f=r(u,d,l,t,e,p);if(!(f===o?Pr(d,u,3,r,p):f))return!1}}return!0}function Ir(t){return!(!ns(t)||(e=t,Lt&&Lt in e))&&(Za(t)?Vt:bt).test(No(t));var e}function Rr(t){return"function"==typeof t?t:null==t?oc:"object"==typeof t?Wa(t)?Ur(t[0],t[1]):Fr(t):_c(t)}function Dr(t){if(!Co(t))return vn(t);var e=[];for(var n in Et(t))Dt.call(t,n)&&"constructor"!=n&&e.push(n);return e}function zr(t){if(!ns(t))return function(t){var e=[];if(null!=t)for(var n in Et(t))e.push(n);return e}(t);var e=Co(t),n=[];for(var r in t)("constructor"!=r||!e&&Dt.call(t,r))&&n.push(r);return n}function Lr(t,e){return t<e}function Nr(t,e){var n=-1,i=Ya(t)?r(t.length):[];return fr(t,(function(t,r,o){i[++n]=e(t,r,o)})),i}function Fr(t){var e=po(t);return 1==e.length&&e[0][2]?Ao(e[0][0],e[0][1]):function(n){return n===t||Mr(n,t,e)}}function Ur(t,e){return $o(t)&&So(e)?Ao(Lo(t),e):function(n){var r=Es(n,t);return r===o&&r===e?js(n,t):Pr(e,r,3)}}function Vr(t,e,n,r,i){t!==e&&br(e,(function(a,s){if(i||(i=new Jn),ns(a))!function(t,e,n,r,i,a,s){var c=To(t,n),l=To(e,n),u=s.get(l);if(u)return void er(t,n,u);var d=a?a(c,l,n+"",t,e,s):o,p=d===o;if(p){var f=Wa(l),_=!f&&Ja(l),h=!f&&!_&&ds(l);d=l,f||_||h?Wa(c)?d=c:Ka(c)?d=Oi(c):_?(p=!1,d=ki(l,!0)):h?(p=!1,d=Si(l,!0)):d=[]:as(l)||Ba(l)?(d=c,Ba(c)?d=bs(c):ns(c)&&!Za(c)||(d=vo(l))):p=!1}p&&(s.set(l,d),i(d,l,r,a,s),s.delete(l));er(t,n,d)}(t,e,s,n,Vr,r,i);else{var c=r?r(To(t,s),a,s+"",t,e,i):o;c===o&&(c=a),er(t,s,c)}}),Ms)}function Hr(t,e){var n=t.length;if(n)return yo(e+=e<0?n:0,n)?t[e]:o}function Br(t,e,n){var r=-1;e=Me(e.length?e:[oc],Qe(lo()));var i=Nr(t,(function(t,n,i){var o=Me(e,(function(e){return e(t)}));return{criteria:o,index:++r,value:t}}));return function(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}(i,(function(t,e){return function(t,e,n){var r=-1,i=t.criteria,o=e.criteria,a=i.length,s=n.length;for(;++r<a;){var c=Ai(i[r],o[r]);if(c)return r>=s?c:c*("desc"==n[r]?-1:1)}return t.index-e.index}(t,e,n)}))}function Wr(t,e,n){for(var r=-1,i=e.length,o={};++r<i;){var a=e[r],s=kr(t,a);n(s,a)&&ti(o,yi(a,t),s)}return o}function Gr(t,e,n,r){var i=r?Ve:Ue,o=-1,a=e.length,s=t;for(t===e&&(e=Oi(e)),n&&(s=Me(t,Qe(n)));++o<a;)for(var c=0,l=e[o],u=n?n(l):l;(c=i(s,u,c,r))>-1;)s!==t&&Qt.call(s,c,1),Qt.call(t,c,1);return t}function Yr(t,e){for(var n=t?e.length:0,r=n-1;n--;){var i=e[n];if(n==r||i!==o){var o=i;yo(i)?Qt.call(t,i,1):pi(t,i)}}return t}function Kr(t,e){return t+ve(xn()*(e-t+1))}function Jr(t,e){var n="";if(!t||e<1||e>h)return n;do{e%2&&(n+=t),(e=ve(e/2))&&(t+=t)}while(e);return n}function Qr(t,e){return Mo(Eo(t,e,oc),t+"")}function Xr(t){return Xn(Us(t))}function Zr(t,e){var n=Us(t);return Do(n,cr(e,0,n.length))}function ti(t,e,n,r){if(!ns(t))return t;for(var i=-1,a=(e=yi(e,t)).length,s=a-1,c=t;null!=c&&++i<a;){var l=Lo(e[i]),u=n;if(i!=s){var d=c[l];(u=r?r(d,l,c):o)===o&&(u=ns(d)?d:yo(e[i+1])?[]:{})}nr(c,l,u),c=c[l]}return t}var ei=Tn?function(t,e){return Tn.set(t,e),t}:oc,ni=le?function(t,e){return le(t,"toString",{configurable:!0,enumerable:!1,value:nc(e),writable:!0})}:oc;function ri(t){return Do(Us(t))}function ii(t,e,n){var i=-1,o=t.length;e<0&&(e=-e>o?0:o+e),(n=n>o?o:n)<0&&(n+=o),o=e>n?0:n-e>>>0,e>>>=0;for(var a=r(o);++i<o;)a[i]=t[i+e];return a}function oi(t,e){var n;return fr(t,(function(t,r,i){return!(n=e(t,r,i))})),!!n}function ai(t,e,n){var r=0,i=null==t?r:t.length;if("number"==typeof e&&e==e&&i<=2147483647){for(;r<i;){var o=r+i>>>1,a=t[o];null!==a&&!us(a)&&(n?a<=e:a<e)?r=o+1:i=o}return i}return si(t,e,oc,n)}function si(t,e,n,r){e=n(e);for(var i=0,a=null==t?0:t.length,s=e!=e,c=null===e,l=us(e),u=e===o;i<a;){var d=ve((i+a)/2),p=n(t[d]),f=p!==o,_=null===p,h=p==p,m=us(p);if(s)var g=r||h;else g=u?h&&(r||f):c?h&&f&&(r||!_):l?h&&f&&!_&&(r||!m):!_&&!m&&(r?p<=e:p<e);g?i=d+1:a=d}return yn(a,4294967294)}function ci(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var a=t[n],s=e?e(a):a;if(!n||!Ua(s,c)){var c=s;o[i++]=0===a?0:a}}return o}function li(t){return"number"==typeof t?t:us(t)?m:+t}function ui(t){if("string"==typeof t)return t;if(Wa(t))return Me(t,ui)+"";if(us(t))return Nn?Nn.call(t):"";var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function di(t,e,n){var r=-1,i=qe,o=t.length,a=!0,s=[],c=s;if(n)a=!1,i=Pe;else if(o>=200){var l=e?null:Ji(t);if(l)return dn(l);a=!1,i=Ze,c=new Kn}else c=e?[]:s;t:for(;++r<o;){var u=t[r],d=e?e(u):u;if(u=n||0!==u?u:0,a&&d==d){for(var p=c.length;p--;)if(c[p]===d)continue t;e&&c.push(d),s.push(u)}else i(c,d,n)||(c!==s&&c.push(d),s.push(u))}return s}function pi(t,e){return null==(t=jo(t,e=yi(e,t)))||delete t[Lo(Xo(e))]}function fi(t,e,n,r){return ti(t,e,n(kr(t,e)),r)}function _i(t,e,n,r){for(var i=t.length,o=r?i:-1;(r?o--:++o<i)&&e(t[o],o,t););return n?ii(t,r?0:o,r?o+1:i):ii(t,r?o+1:0,r?i:o)}function hi(t,e){var n=t;return n instanceof Bn&&(n=n.value()),Re(e,(function(t,e){return e.func.apply(e.thisArg,Ie([t],e.args))}),n)}function mi(t,e,n){var i=t.length;if(i<2)return i?di(t[0]):[];for(var o=-1,a=r(i);++o<i;)for(var s=t[o],c=-1;++c<i;)c!=o&&(a[o]=pr(a[o]||s,t[c],e,n));return di(vr(a,1),e,n)}function gi(t,e,n){for(var r=-1,i=t.length,a=e.length,s={};++r<i;){var c=r<a?e[r]:o;n(s,t[r],c)}return s}function vi(t){return Ka(t)?t:[]}function bi(t){return"function"==typeof t?t:oc}function yi(t,e){return Wa(t)?t:$o(t,e)?[t]:zo(ys(t))}var wi=Qr;function $i(t,e,n){var r=t.length;return n=n===o?r:n,!e&&n>=r?t:ii(t,e,n)}var xi=pe||function(t){return _e.clearTimeout(t)};function ki(t,e){if(e)return t.slice();var n=t.length,r=Gt?Gt(n):new t.constructor(n);return t.copy(r),r}function Ci(t){var e=new t.constructor(t.byteLength);return new Wt(e).set(new Wt(t)),e}function Si(t,e){var n=e?Ci(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function Ai(t,e){if(t!==e){var n=t!==o,r=null===t,i=t==t,a=us(t),s=e!==o,c=null===e,l=e==e,u=us(e);if(!c&&!u&&!a&&t>e||a&&s&&l&&!c&&!u||r&&s&&l||!n&&l||!i)return 1;if(!r&&!a&&!u&&t<e||u&&n&&i&&!r&&!a||c&&n&&i||!s&&i||!l)return-1}return 0}function Ei(t,e,n,i){for(var o=-1,a=t.length,s=n.length,c=-1,l=e.length,u=bn(a-s,0),d=r(l+u),p=!i;++c<l;)d[c]=e[c];for(;++o<s;)(p||o<a)&&(d[n[o]]=t[o]);for(;u--;)d[c++]=t[o++];return d}function ji(t,e,n,i){for(var o=-1,a=t.length,s=-1,c=n.length,l=-1,u=e.length,d=bn(a-c,0),p=r(d+u),f=!i;++o<d;)p[o]=t[o];for(var _=o;++l<u;)p[_+l]=e[l];for(;++s<c;)(f||o<a)&&(p[_+n[s]]=t[o++]);return p}function Oi(t,e){var n=-1,i=t.length;for(e||(e=r(i));++n<i;)e[n]=t[n];return e}function Ti(t,e,n,r){var i=!n;n||(n={});for(var a=-1,s=e.length;++a<s;){var c=e[a],l=r?r(n[c],t[c],c,n,t):o;l===o&&(l=t[c]),i?ar(n,c,l):nr(n,c,l)}return n}function qi(t,e){return function(n,r){var i=Wa(n)?Ae:ir,o=e?e():{};return i(n,t,lo(r,2),o)}}function Pi(t){return Qr((function(e,n){var r=-1,i=n.length,a=i>1?n[i-1]:o,s=i>2?n[2]:o;for(a=t.length>3&&"function"==typeof a?(i--,a):o,s&&wo(n[0],n[1],s)&&(a=i<3?o:a,i=1),e=Et(e);++r<i;){var c=n[r];c&&t(e,c,r,a)}return e}))}function Mi(t,e){return function(n,r){if(null==n)return n;if(!Ya(n))return t(n,r);for(var i=n.length,o=e?i:-1,a=Et(n);(e?o--:++o<i)&&!1!==r(a[o],o,a););return n}}function Ii(t){return function(e,n,r){for(var i=-1,o=Et(e),a=r(e),s=a.length;s--;){var c=a[t?s:++i];if(!1===n(o[c],c,o))break}return e}}function Ri(t){return function(e){var n=sn(e=ys(e))?_n(e):o,r=n?n[0]:e.charAt(0),i=n?$i(n,1).join(""):e.slice(1);return r[t]()+i}}function Di(t){return function(e){return Re(Zs(Bs(e).replace(Zt,"")),t,"")}}function zi(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=Un(t.prototype),r=t.apply(n,e);return ns(r)?r:n}}function Li(t){return function(e,n,r){var i=Et(e);if(!Ya(e)){var a=lo(n,3);e=Ps(e),n=function(t){return a(i[t],t,i)}}var s=t(e,n,r);return s>-1?i[a?e[s]:s]:o}}function Ni(t){return ro((function(e){var n=e.length,r=n,i=Hn.prototype.thru;for(t&&e.reverse();r--;){var s=e[r];if("function"!=typeof s)throw new Tt(a);if(i&&!c&&"wrapper"==so(s))var c=new Hn([],!0)}for(r=c?r:n;++r<n;){var l=so(s=e[r]),u="wrapper"==l?ao(s):o;c=u&&xo(u[0])&&424==u[1]&&!u[4].length&&1==u[9]?c[so(u[0])].apply(c,u[3]):1==s.length&&xo(s)?c[l]():c.thru(s)}return function(){var t=arguments,r=t[0];if(c&&1==t.length&&Wa(r))return c.plant(r).value();for(var i=0,o=n?e[i].apply(this,t):r;++i<n;)o=e[i].call(this,o);return o}}))}function Fi(t,e,n,i,a,s,c,l,u,d){var f=e&p,_=1&e,h=2&e,m=24&e,g=512&e,v=h?o:zi(t);return function o(){for(var p=arguments.length,b=r(p),y=p;y--;)b[y]=arguments[y];if(m)var w=co(o),$=nn(b,w);if(i&&(b=Ei(b,i,a,m)),s&&(b=ji(b,s,c,m)),p-=$,m&&p<d){var x=un(b,w);return Yi(t,e,Fi,o.placeholder,n,b,x,l,u,d-p)}var k=_?n:this,C=h?k[t]:t;return p=b.length,l?b=Oo(b,l):g&&p>1&&b.reverse(),f&&u<p&&(b.length=u),this&&this!==_e&&this instanceof o&&(C=v||zi(C)),C.apply(k,b)}}function Ui(t,e){return function(n,r){return function(t,e,n,r){return wr(t,(function(t,i,o){e(r,n(t),i,o)})),r}(n,t,e(r),{})}}function Vi(t,e){return function(n,r){var i;if(n===o&&r===o)return e;if(n!==o&&(i=n),r!==o){if(i===o)return r;"string"==typeof n||"string"==typeof r?(n=ui(n),r=ui(r)):(n=li(n),r=li(r)),i=t(n,r)}return i}}function Hi(t){return ro((function(e){return e=Me(e,Qe(lo())),Qr((function(n){var r=this;return t(e,(function(t){return Se(t,r,n)}))}))}))}function Bi(t,e){var n=(e=e===o?" ":ui(e)).length;if(n<2)return n?Jr(e,t):e;var r=Jr(e,me(t/fn(e)));return sn(e)?$i(_n(r),0,t).join(""):r.slice(0,t)}function Wi(t){return function(e,n,i){return i&&"number"!=typeof i&&wo(e,n,i)&&(n=i=o),e=hs(e),n===o?(n=e,e=0):n=hs(n),function(t,e,n,i){for(var o=-1,a=bn(me((e-t)/(n||1)),0),s=r(a);a--;)s[i?a:++o]=t,t+=n;return s}(e,n,i=i===o?e<n?1:-1:hs(i),t)}}function Gi(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=vs(e),n=vs(n)),t(e,n)}}function Yi(t,e,n,r,i,a,s,c,l,p){var f=8&e;e|=f?u:d,4&(e&=~(f?d:u))||(e&=-4);var _=[t,e,i,f?a:o,f?s:o,f?o:a,f?o:s,c,l,p],h=n.apply(o,_);return xo(t)&&qo(h,_),h.placeholder=r,Io(h,t,e)}function Ki(t){var e=At[t];return function(t,n){if(t=vs(t),(n=null==n?0:yn(ms(n),292))&&Ge(t)){var r=(ys(t)+"e").split("e");return+((r=(ys(e(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return e(t)}}var Ji=En&&1/dn(new En([,-0]))[1]==_?function(t){return new En(t)}:uc;function Qi(t){return function(e){var n=mo(e);return n==S?cn(e):n==T?pn(e):function(t,e){return Me(e,(function(e){return[e,t[e]]}))}(e,t(e))}}function Xi(t,e,n,i,s,_,h,m){var g=2&e;if(!g&&"function"!=typeof t)throw new Tt(a);var v=i?i.length:0;if(v||(e&=-97,i=s=o),h=h===o?h:bn(ms(h),0),m=m===o?m:ms(m),v-=s?s.length:0,e&d){var b=i,y=s;i=s=o}var w=g?o:ao(t),$=[t,e,n,i,s,b,y,_,h,m];if(w&&function(t,e){var n=t[1],r=e[1],i=n|r,o=i<131,a=r==p&&8==n||r==p&&n==f&&t[7].length<=e[8]||384==r&&e[7].length<=e[8]&&8==n;if(!o&&!a)return t;1&r&&(t[2]=e[2],i|=1&n?0:4);var s=e[3];if(s){var l=t[3];t[3]=l?Ei(l,s,e[4]):s,t[4]=l?un(t[3],c):e[4]}(s=e[5])&&(l=t[5],t[5]=l?ji(l,s,e[6]):s,t[6]=l?un(t[5],c):e[6]);(s=e[7])&&(t[7]=s);r&p&&(t[8]=null==t[8]?e[8]:yn(t[8],e[8]));null==t[9]&&(t[9]=e[9]);t[0]=e[0],t[1]=i}($,w),t=$[0],e=$[1],n=$[2],i=$[3],s=$[4],!(m=$[9]=$[9]===o?g?0:t.length:bn($[9]-v,0))&&24&e&&(e&=-25),e&&1!=e)x=8==e||e==l?function(t,e,n){var i=zi(t);return function a(){for(var s=arguments.length,c=r(s),l=s,u=co(a);l--;)c[l]=arguments[l];var d=s<3&&c[0]!==u&&c[s-1]!==u?[]:un(c,u);return(s-=d.length)<n?Yi(t,e,Fi,a.placeholder,o,c,d,o,o,n-s):Se(this&&this!==_e&&this instanceof a?i:t,this,c)}}(t,e,m):e!=u&&33!=e||s.length?Fi.apply(o,$):function(t,e,n,i){var o=1&e,a=zi(t);return function e(){for(var s=-1,c=arguments.length,l=-1,u=i.length,d=r(u+c),p=this&&this!==_e&&this instanceof e?a:t;++l<u;)d[l]=i[l];for(;c--;)d[l++]=arguments[++s];return Se(p,o?n:this,d)}}(t,e,n,i);else var x=function(t,e,n){var r=1&e,i=zi(t);return function e(){return(this&&this!==_e&&this instanceof e?i:t).apply(r?n:this,arguments)}}(t,e,n);return Io((w?ei:qo)(x,$),t,e)}function Zi(t,e,n,r){return t===o||Ua(t,Mt[n])&&!Dt.call(r,n)?e:t}function to(t,e,n,r,i,a){return ns(t)&&ns(e)&&(a.set(e,t),Vr(t,e,o,to,a),a.delete(e)),t}function eo(t){return as(t)?o:t}function no(t,e,n,r,i,a){var s=1&n,c=t.length,l=e.length;if(c!=l&&!(s&&l>c))return!1;var u=a.get(t);if(u&&a.get(e))return u==e;var d=-1,p=!0,f=2&n?new Kn:o;for(a.set(t,e),a.set(e,t);++d<c;){var _=t[d],h=e[d];if(r)var m=s?r(h,_,d,e,t,a):r(_,h,d,t,e,a);if(m!==o){if(m)continue;p=!1;break}if(f){if(!ze(e,(function(t,e){if(!Ze(f,e)&&(_===t||i(_,t,n,r,a)))return f.push(e)}))){p=!1;break}}else if(_!==h&&!i(_,h,n,r,a)){p=!1;break}}return a.delete(t),a.delete(e),p}function ro(t){return Mo(Eo(t,o,Go),t+"")}function io(t){return Cr(t,Ps,_o)}function oo(t){return Cr(t,Ms,ho)}var ao=Tn?function(t){return Tn.get(t)}:uc;function so(t){for(var e=t.name+"",n=qn[e],r=Dt.call(qn,e)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==t)return i.name}return e}function co(t){return(Dt.call(Fn,"placeholder")?Fn:t).placeholder}function lo(){var t=Fn.iteratee||ac;return t=t===ac?Rr:t,arguments.length?t(arguments[0],arguments[1]):t}function uo(t,e){var n=t.__data__;return function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}(e)?n["string"==typeof e?"string":"hash"]:n.map}function po(t){for(var e=Ps(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,So(i)]}return e}function fo(t,e){var n=function(t,e){return null==t?o:t[e]}(t,e);return Ir(n)?n:o}var _o=be?function(t){return null==t?[]:(t=Et(t),Te(be(t),(function(e){return Jt.call(t,e)})))}:gc,ho=be?function(t){for(var e=[];t;)Ie(e,_o(t)),t=Yt(t);return e}:gc,mo=Sr;function go(t,e,n){for(var r=-1,i=(e=yi(e,t)).length,o=!1;++r<i;){var a=Lo(e[r]);if(!(o=null!=t&&n(t,a)))break;t=t[a]}return o||++r!=i?o:!!(i=null==t?0:t.length)&&es(i)&&yo(a,i)&&(Wa(t)||Ba(t))}function vo(t){return"function"!=typeof t.constructor||Co(t)?{}:Un(Yt(t))}function bo(t){return Wa(t)||Ba(t)||!!(Xt&&t&&t[Xt])}function yo(t,e){var n=typeof t;return!!(e=null==e?h:e)&&("number"==n||"symbol"!=n&&wt.test(t))&&t>-1&&t%1==0&&t<e}function wo(t,e,n){if(!ns(n))return!1;var r=typeof e;return!!("number"==r?Ya(n)&&yo(e,n.length):"string"==r&&e in n)&&Ua(n[e],t)}function $o(t,e){if(Wa(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!us(t))||(rt.test(t)||!nt.test(t)||null!=e&&t in Et(e))}function xo(t){var e=so(t),n=Fn[e];if("function"!=typeof n||!(e in Bn.prototype))return!1;if(t===n)return!0;var r=ao(n);return!!r&&t===r[0]}(Cn&&mo(new Cn(new ArrayBuffer(1)))!=R||Sn&&mo(new Sn)!=S||An&&mo(An.resolve())!=j||En&&mo(new En)!=T||jn&&mo(new jn)!=M)&&(mo=function(t){var e=Sr(t),n=e==E?t.constructor:o,r=n?No(n):"";if(r)switch(r){case Pn:return R;case Mn:return S;case In:return j;case Rn:return T;case Dn:return M}return e});var ko=It?Za:vc;function Co(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Mt)}function So(t){return t==t&&!ns(t)}function Ao(t,e){return function(n){return null!=n&&(n[t]===e&&(e!==o||t in Et(n)))}}function Eo(t,e,n){return e=bn(e===o?t.length-1:e,0),function(){for(var i=arguments,o=-1,a=bn(i.length-e,0),s=r(a);++o<a;)s[o]=i[e+o];o=-1;for(var c=r(e+1);++o<e;)c[o]=i[o];return c[e]=n(s),Se(t,this,c)}}function jo(t,e){return e.length<2?t:kr(t,ii(e,0,-1))}function Oo(t,e){for(var n=t.length,r=yn(e.length,n),i=Oi(t);r--;){var a=e[r];t[r]=yo(a,n)?i[a]:o}return t}function To(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}var qo=Ro(ei),Po=he||function(t,e){return _e.setTimeout(t,e)},Mo=Ro(ni);function Io(t,e,n){var r=e+"";return Mo(t,function(t,e){var n=e.length;if(!n)return t;var r=n-1;return e[r]=(n>1?"& ":"")+e[r],e=e.join(n>2?", ":" "),t.replace(ut,"{\n/* [wrapped with "+e+"] */\n")}(r,function(t,e){return Ee(v,(function(n){var r="_."+n[0];e&n[1]&&!qe(t,r)&&t.push(r)})),t.sort()}(function(t){var e=t.match(dt);return e?e[1].split(pt):[]}(r),n)))}function Ro(t){var e=0,n=0;return function(){var r=wn(),i=16-(r-n);if(n=r,i>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(o,arguments)}}function Do(t,e){var n=-1,r=t.length,i=r-1;for(e=e===o?r:e;++n<e;){var a=Kr(n,i),s=t[a];t[a]=t[n],t[n]=s}return t.length=e,t}var zo=function(t){var e=Ra(t,(function(t){return 500===n.size&&n.clear(),t})),n=e.cache;return e}((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(it,(function(t,n,r,i){e.push(r?i.replace(_t,"$1"):n||t)})),e}));function Lo(t){if("string"==typeof t||us(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function No(t){if(null!=t){try{return Rt.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function Fo(t){if(t instanceof Bn)return t.clone();var e=new Hn(t.__wrapped__,t.__chain__);return e.__actions__=Oi(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var Uo=Qr((function(t,e){return Ka(t)?pr(t,vr(e,1,Ka,!0)):[]})),Vo=Qr((function(t,e){var n=Xo(e);return Ka(n)&&(n=o),Ka(t)?pr(t,vr(e,1,Ka,!0),lo(n,2)):[]})),Ho=Qr((function(t,e){var n=Xo(e);return Ka(n)&&(n=o),Ka(t)?pr(t,vr(e,1,Ka,!0),o,n):[]}));function Bo(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:ms(n);return i<0&&(i=bn(r+i,0)),Fe(t,lo(e,3),i)}function Wo(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=r-1;return n!==o&&(i=ms(n),i=n<0?bn(r+i,0):yn(i,r-1)),Fe(t,lo(e,3),i,!0)}function Go(t){return(null==t?0:t.length)?vr(t,1):[]}function Yo(t){return t&&t.length?t[0]:o}var Ko=Qr((function(t){var e=Me(t,vi);return e.length&&e[0]===t[0]?Or(e):[]})),Jo=Qr((function(t){var e=Xo(t),n=Me(t,vi);return e===Xo(n)?e=o:n.pop(),n.length&&n[0]===t[0]?Or(n,lo(e,2)):[]})),Qo=Qr((function(t){var e=Xo(t),n=Me(t,vi);return(e="function"==typeof e?e:o)&&n.pop(),n.length&&n[0]===t[0]?Or(n,o,e):[]}));function Xo(t){var e=null==t?0:t.length;return e?t[e-1]:o}var Zo=Qr(ta);function ta(t,e){return t&&t.length&&e&&e.length?Gr(t,e):t}var ea=ro((function(t,e){var n=null==t?0:t.length,r=sr(t,e);return Yr(t,Me(e,(function(t){return yo(t,n)?+t:t})).sort(Ai)),r}));function na(t){return null==t?t:kn.call(t)}var ra=Qr((function(t){return di(vr(t,1,Ka,!0))})),ia=Qr((function(t){var e=Xo(t);return Ka(e)&&(e=o),di(vr(t,1,Ka,!0),lo(e,2))})),oa=Qr((function(t){var e=Xo(t);return e="function"==typeof e?e:o,di(vr(t,1,Ka,!0),o,e)}));function aa(t){if(!t||!t.length)return[];var e=0;return t=Te(t,(function(t){if(Ka(t))return e=bn(t.length,e),!0})),Je(e,(function(e){return Me(t,We(e))}))}function sa(t,e){if(!t||!t.length)return[];var n=aa(t);return null==e?n:Me(n,(function(t){return Se(e,o,t)}))}var ca=Qr((function(t,e){return Ka(t)?pr(t,e):[]})),la=Qr((function(t){return mi(Te(t,Ka))})),ua=Qr((function(t){var e=Xo(t);return Ka(e)&&(e=o),mi(Te(t,Ka),lo(e,2))})),da=Qr((function(t){var e=Xo(t);return e="function"==typeof e?e:o,mi(Te(t,Ka),o,e)})),pa=Qr(aa);var fa=Qr((function(t){var e=t.length,n=e>1?t[e-1]:o;return n="function"==typeof n?(t.pop(),n):o,sa(t,n)}));function _a(t){var e=Fn(t);return e.__chain__=!0,e}function ha(t,e){return e(t)}var ma=ro((function(t){var e=t.length,n=e?t[0]:0,r=this.__wrapped__,i=function(e){return sr(e,t)};return!(e>1||this.__actions__.length)&&r instanceof Bn&&yo(n)?((r=r.slice(n,+n+(e?1:0))).__actions__.push({func:ha,args:[i],thisArg:o}),new Hn(r,this.__chain__).thru((function(t){return e&&!t.length&&t.push(o),t}))):this.thru(i)}));var ga=qi((function(t,e,n){Dt.call(t,n)?++t[n]:ar(t,n,1)}));var va=Li(Bo),ba=Li(Wo);function ya(t,e){return(Wa(t)?Ee:fr)(t,lo(e,3))}function wa(t,e){return(Wa(t)?je:_r)(t,lo(e,3))}var $a=qi((function(t,e,n){Dt.call(t,n)?t[n].push(e):ar(t,n,[e])}));var xa=Qr((function(t,e,n){var i=-1,o="function"==typeof e,a=Ya(t)?r(t.length):[];return fr(t,(function(t){a[++i]=o?Se(e,t,n):Tr(t,e,n)})),a})),ka=qi((function(t,e,n){ar(t,n,e)}));function Ca(t,e){return(Wa(t)?Me:Nr)(t,lo(e,3))}var Sa=qi((function(t,e,n){t[n?0:1].push(e)}),(function(){return[[],[]]}));var Aa=Qr((function(t,e){if(null==t)return[];var n=e.length;return n>1&&wo(t,e[0],e[1])?e=[]:n>2&&wo(e[0],e[1],e[2])&&(e=[e[0]]),Br(t,vr(e,1),[])})),Ea=fe||function(){return _e.Date.now()};function ja(t,e,n){return e=n?o:e,e=t&&null==e?t.length:e,Xi(t,p,o,o,o,o,e)}function Oa(t,e){var n;if("function"!=typeof e)throw new Tt(a);return t=ms(t),function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=o),n}}var Ta=Qr((function(t,e,n){var r=1;if(n.length){var i=un(n,co(Ta));r|=u}return Xi(t,r,e,n,i)})),qa=Qr((function(t,e,n){var r=3;if(n.length){var i=un(n,co(qa));r|=u}return Xi(e,r,t,n,i)}));function Pa(t,e,n){var r,i,s,c,l,u,d=0,p=!1,f=!1,_=!0;if("function"!=typeof t)throw new Tt(a);function h(e){var n=r,a=i;return r=i=o,d=e,c=t.apply(a,n)}function m(t){return d=t,l=Po(v,e),p?h(t):c}function g(t){var n=t-u;return u===o||n>=e||n<0||f&&t-d>=s}function v(){var t=Ea();if(g(t))return b(t);l=Po(v,function(t){var n=e-(t-u);return f?yn(n,s-(t-d)):n}(t))}function b(t){return l=o,_&&r?h(t):(r=i=o,c)}function y(){var t=Ea(),n=g(t);if(r=arguments,i=this,u=t,n){if(l===o)return m(u);if(f)return xi(l),l=Po(v,e),h(u)}return l===o&&(l=Po(v,e)),c}return e=vs(e)||0,ns(n)&&(p=!!n.leading,s=(f="maxWait"in n)?bn(vs(n.maxWait)||0,e):s,_="trailing"in n?!!n.trailing:_),y.cancel=function(){l!==o&&xi(l),d=0,r=u=i=l=o},y.flush=function(){return l===o?c:b(Ea())},y}var Ma=Qr((function(t,e){return dr(t,1,e)})),Ia=Qr((function(t,e,n){return dr(t,vs(e)||0,n)}));function Ra(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new Tt(a);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=t.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(Ra.Cache||Yn),n}function Da(t){if("function"!=typeof t)throw new Tt(a);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}Ra.Cache=Yn;var za=wi((function(t,e){var n=(e=1==e.length&&Wa(e[0])?Me(e[0],Qe(lo())):Me(vr(e,1),Qe(lo()))).length;return Qr((function(r){for(var i=-1,o=yn(r.length,n);++i<o;)r[i]=e[i].call(this,r[i]);return Se(t,this,r)}))})),La=Qr((function(t,e){var n=un(e,co(La));return Xi(t,u,o,e,n)})),Na=Qr((function(t,e){var n=un(e,co(Na));return Xi(t,d,o,e,n)})),Fa=ro((function(t,e){return Xi(t,f,o,o,o,e)}));function Ua(t,e){return t===e||t!=t&&e!=e}var Va=Gi(Ar),Ha=Gi((function(t,e){return t>=e})),Ba=qr(function(){return arguments}())?qr:function(t){return rs(t)&&Dt.call(t,"callee")&&!Jt.call(t,"callee")},Wa=r.isArray,Ga=ye?Qe(ye):function(t){return rs(t)&&Sr(t)==I};function Ya(t){return null!=t&&es(t.length)&&!Za(t)}function Ka(t){return rs(t)&&Ya(t)}var Ja=Le||vc,Qa=we?Qe(we):function(t){return rs(t)&&Sr(t)==$};function Xa(t){if(!rs(t))return!1;var e=Sr(t);return e==x||"[object DOMException]"==e||"string"==typeof t.message&&"string"==typeof t.name&&!as(t)}function Za(t){if(!ns(t))return!1;var e=Sr(t);return e==k||e==C||"[object AsyncFunction]"==e||"[object Proxy]"==e}function ts(t){return"number"==typeof t&&t==ms(t)}function es(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=h}function ns(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function rs(t){return null!=t&&"object"==typeof t}var is=$e?Qe($e):function(t){return rs(t)&&mo(t)==S};function os(t){return"number"==typeof t||rs(t)&&Sr(t)==A}function as(t){if(!rs(t)||Sr(t)!=E)return!1;var e=Yt(t);if(null===e)return!0;var n=Dt.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&Rt.call(n)==Ft}var ss=xe?Qe(xe):function(t){return rs(t)&&Sr(t)==O};var cs=ke?Qe(ke):function(t){return rs(t)&&mo(t)==T};function ls(t){return"string"==typeof t||!Wa(t)&&rs(t)&&Sr(t)==q}function us(t){return"symbol"==typeof t||rs(t)&&Sr(t)==P}var ds=Ce?Qe(Ce):function(t){return rs(t)&&es(t.length)&&!!se[Sr(t)]};var ps=Gi(Lr),fs=Gi((function(t,e){return t<=e}));function _s(t){if(!t)return[];if(Ya(t))return ls(t)?_n(t):Oi(t);if(ee&&t[ee])return function(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}(t[ee]());var e=mo(t);return(e==S?cn:e==T?dn:Us)(t)}function hs(t){return t?(t=vs(t))===_||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}function ms(t){var e=hs(t),n=e%1;return e==e?n?e-n:e:0}function gs(t){return t?cr(ms(t),0,g):0}function vs(t){if("number"==typeof t)return t;if(us(t))return m;if(ns(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=ns(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(st,"");var n=vt.test(t);return n||yt.test(t)?de(t.slice(2),n?2:8):gt.test(t)?m:+t}function bs(t){return Ti(t,Ms(t))}function ys(t){return null==t?"":ui(t)}var ws=Pi((function(t,e){if(Co(e)||Ya(e))Ti(e,Ps(e),t);else for(var n in e)Dt.call(e,n)&&nr(t,n,e[n])})),$s=Pi((function(t,e){Ti(e,Ms(e),t)})),xs=Pi((function(t,e,n,r){Ti(e,Ms(e),t,r)})),ks=Pi((function(t,e,n,r){Ti(e,Ps(e),t,r)})),Cs=ro(sr);var Ss=Qr((function(t,e){t=Et(t);var n=-1,r=e.length,i=r>2?e[2]:o;for(i&&wo(e[0],e[1],i)&&(r=1);++n<r;)for(var a=e[n],s=Ms(a),c=-1,l=s.length;++c<l;){var u=s[c],d=t[u];(d===o||Ua(d,Mt[u])&&!Dt.call(t,u))&&(t[u]=a[u])}return t})),As=Qr((function(t){return t.push(o,to),Se(Rs,o,t)}));function Es(t,e,n){var r=null==t?o:kr(t,e);return r===o?n:r}function js(t,e){return null!=t&&go(t,e,jr)}var Os=Ui((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=Nt.call(e)),t[e]=n}),nc(oc)),Ts=Ui((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=Nt.call(e)),Dt.call(t,e)?t[e].push(n):t[e]=[n]}),lo),qs=Qr(Tr);function Ps(t){return Ya(t)?Qn(t):Dr(t)}function Ms(t){return Ya(t)?Qn(t,!0):zr(t)}var Is=Pi((function(t,e,n){Vr(t,e,n)})),Rs=Pi((function(t,e,n,r){Vr(t,e,n,r)})),Ds=ro((function(t,e){var n={};if(null==t)return n;var r=!1;e=Me(e,(function(e){return e=yi(e,t),r||(r=e.length>1),e})),Ti(t,oo(t),n),r&&(n=lr(n,7,eo));for(var i=e.length;i--;)pi(n,e[i]);return n}));var zs=ro((function(t,e){return null==t?{}:function(t,e){return Wr(t,e,(function(e,n){return js(t,n)}))}(t,e)}));function Ls(t,e){if(null==t)return{};var n=Me(oo(t),(function(t){return[t]}));return e=lo(e),Wr(t,n,(function(t,n){return e(t,n[0])}))}var Ns=Qi(Ps),Fs=Qi(Ms);function Us(t){return null==t?[]:Xe(t,Ps(t))}var Vs=Di((function(t,e,n){return e=e.toLowerCase(),t+(n?Hs(e):e)}));function Hs(t){return Xs(ys(t).toLowerCase())}function Bs(t){return(t=ys(t))&&t.replace($t,rn).replace(te,"")}var Ws=Di((function(t,e,n){return t+(n?"-":"")+e.toLowerCase()})),Gs=Di((function(t,e,n){return t+(n?" ":"")+e.toLowerCase()})),Ys=Ri("toLowerCase");var Ks=Di((function(t,e,n){return t+(n?"_":"")+e.toLowerCase()}));var Js=Di((function(t,e,n){return t+(n?" ":"")+Xs(e)}));var Qs=Di((function(t,e,n){return t+(n?" ":"")+e.toUpperCase()})),Xs=Ri("toUpperCase");function Zs(t,e,n){return t=ys(t),(e=n?o:e)===o?function(t){return ie.test(t)}(t)?function(t){return t.match(ne)||[]}(t):function(t){return t.match(ft)||[]}(t):t.match(e)||[]}var tc=Qr((function(t,e){try{return Se(t,o,e)}catch(t){return Xa(t)?t:new Ct(t)}})),ec=ro((function(t,e){return Ee(e,(function(e){e=Lo(e),ar(t,e,Ta(t[e],t))})),t}));function nc(t){return function(){return t}}var rc=Ni(),ic=Ni(!0);function oc(t){return t}function ac(t){return Rr("function"==typeof t?t:lr(t,1))}var sc=Qr((function(t,e){return function(n){return Tr(n,t,e)}})),cc=Qr((function(t,e){return function(n){return Tr(t,n,e)}}));function lc(t,e,n){var r=Ps(e),i=xr(e,r);null!=n||ns(e)&&(i.length||!r.length)||(n=e,e=t,t=this,i=xr(e,Ps(e)));var o=!(ns(n)&&"chain"in n&&!n.chain),a=Za(t);return Ee(i,(function(n){var r=e[n];t[n]=r,a&&(t.prototype[n]=function(){var e=this.__chain__;if(o||e){var n=t(this.__wrapped__),i=n.__actions__=Oi(this.__actions__);return i.push({func:r,args:arguments,thisArg:t}),n.__chain__=e,n}return r.apply(t,Ie([this.value()],arguments))})})),t}function uc(){}var dc=Hi(Me),pc=Hi(Oe),fc=Hi(ze);function _c(t){return $o(t)?We(Lo(t)):function(t){return function(e){return kr(e,t)}}(t)}var hc=Wi(),mc=Wi(!0);function gc(){return[]}function vc(){return!1}var bc=Vi((function(t,e){return t+e}),0),yc=Ki("ceil"),wc=Vi((function(t,e){return t/e}),1),$c=Ki("floor");var xc,kc=Vi((function(t,e){return t*e}),1),Cc=Ki("round"),Sc=Vi((function(t,e){return t-e}),0);return Fn.after=function(t,e){if("function"!=typeof e)throw new Tt(a);return t=ms(t),function(){if(--t<1)return e.apply(this,arguments)}},Fn.ary=ja,Fn.assign=ws,Fn.assignIn=$s,Fn.assignInWith=xs,Fn.assignWith=ks,Fn.at=Cs,Fn.before=Oa,Fn.bind=Ta,Fn.bindAll=ec,Fn.bindKey=qa,Fn.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return Wa(t)?t:[t]},Fn.chain=_a,Fn.chunk=function(t,e,n){e=(n?wo(t,e,n):e===o)?1:bn(ms(e),0);var i=null==t?0:t.length;if(!i||e<1)return[];for(var a=0,s=0,c=r(me(i/e));a<i;)c[s++]=ii(t,a,a+=e);return c},Fn.compact=function(t){for(var e=-1,n=null==t?0:t.length,r=0,i=[];++e<n;){var o=t[e];o&&(i[r++]=o)}return i},Fn.concat=function(){var t=arguments.length;if(!t)return[];for(var e=r(t-1),n=arguments[0],i=t;i--;)e[i-1]=arguments[i];return Ie(Wa(n)?Oi(n):[n],vr(e,1))},Fn.cond=function(t){var e=null==t?0:t.length,n=lo();return t=e?Me(t,(function(t){if("function"!=typeof t[1])throw new Tt(a);return[n(t[0]),t[1]]})):[],Qr((function(n){for(var r=-1;++r<e;){var i=t[r];if(Se(i[0],this,n))return Se(i[1],this,n)}}))},Fn.conforms=function(t){return function(t){var e=Ps(t);return function(n){return ur(n,t,e)}}(lr(t,1))},Fn.constant=nc,Fn.countBy=ga,Fn.create=function(t,e){var n=Un(t);return null==e?n:or(n,e)},Fn.curry=function t(e,n,r){var i=Xi(e,8,o,o,o,o,o,n=r?o:n);return i.placeholder=t.placeholder,i},Fn.curryRight=function t(e,n,r){var i=Xi(e,l,o,o,o,o,o,n=r?o:n);return i.placeholder=t.placeholder,i},Fn.debounce=Pa,Fn.defaults=Ss,Fn.defaultsDeep=As,Fn.defer=Ma,Fn.delay=Ia,Fn.difference=Uo,Fn.differenceBy=Vo,Fn.differenceWith=Ho,Fn.drop=function(t,e,n){var r=null==t?0:t.length;return r?ii(t,(e=n||e===o?1:ms(e))<0?0:e,r):[]},Fn.dropRight=function(t,e,n){var r=null==t?0:t.length;return r?ii(t,0,(e=r-(e=n||e===o?1:ms(e)))<0?0:e):[]},Fn.dropRightWhile=function(t,e){return t&&t.length?_i(t,lo(e,3),!0,!0):[]},Fn.dropWhile=function(t,e){return t&&t.length?_i(t,lo(e,3),!0):[]},Fn.fill=function(t,e,n,r){var i=null==t?0:t.length;return i?(n&&"number"!=typeof n&&wo(t,e,n)&&(n=0,r=i),function(t,e,n,r){var i=t.length;for((n=ms(n))<0&&(n=-n>i?0:i+n),(r=r===o||r>i?i:ms(r))<0&&(r+=i),r=n>r?0:gs(r);n<r;)t[n++]=e;return t}(t,e,n,r)):[]},Fn.filter=function(t,e){return(Wa(t)?Te:gr)(t,lo(e,3))},Fn.flatMap=function(t,e){return vr(Ca(t,e),1)},Fn.flatMapDeep=function(t,e){return vr(Ca(t,e),_)},Fn.flatMapDepth=function(t,e,n){return n=n===o?1:ms(n),vr(Ca(t,e),n)},Fn.flatten=Go,Fn.flattenDeep=function(t){return(null==t?0:t.length)?vr(t,_):[]},Fn.flattenDepth=function(t,e){return(null==t?0:t.length)?vr(t,e=e===o?1:ms(e)):[]},Fn.flip=function(t){return Xi(t,512)},Fn.flow=rc,Fn.flowRight=ic,Fn.fromPairs=function(t){for(var e=-1,n=null==t?0:t.length,r={};++e<n;){var i=t[e];r[i[0]]=i[1]}return r},Fn.functions=function(t){return null==t?[]:xr(t,Ps(t))},Fn.functionsIn=function(t){return null==t?[]:xr(t,Ms(t))},Fn.groupBy=$a,Fn.initial=function(t){return(null==t?0:t.length)?ii(t,0,-1):[]},Fn.intersection=Ko,Fn.intersectionBy=Jo,Fn.intersectionWith=Qo,Fn.invert=Os,Fn.invertBy=Ts,Fn.invokeMap=xa,Fn.iteratee=ac,Fn.keyBy=ka,Fn.keys=Ps,Fn.keysIn=Ms,Fn.map=Ca,Fn.mapKeys=function(t,e){var n={};return e=lo(e,3),wr(t,(function(t,r,i){ar(n,e(t,r,i),t)})),n},Fn.mapValues=function(t,e){var n={};return e=lo(e,3),wr(t,(function(t,r,i){ar(n,r,e(t,r,i))})),n},Fn.matches=function(t){return Fr(lr(t,1))},Fn.matchesProperty=function(t,e){return Ur(t,lr(e,1))},Fn.memoize=Ra,Fn.merge=Is,Fn.mergeWith=Rs,Fn.method=sc,Fn.methodOf=cc,Fn.mixin=lc,Fn.negate=Da,Fn.nthArg=function(t){return t=ms(t),Qr((function(e){return Hr(e,t)}))},Fn.omit=Ds,Fn.omitBy=function(t,e){return Ls(t,Da(lo(e)))},Fn.once=function(t){return Oa(2,t)},Fn.orderBy=function(t,e,n,r){return null==t?[]:(Wa(e)||(e=null==e?[]:[e]),Wa(n=r?o:n)||(n=null==n?[]:[n]),Br(t,e,n))},Fn.over=dc,Fn.overArgs=za,Fn.overEvery=pc,Fn.overSome=fc,Fn.partial=La,Fn.partialRight=Na,Fn.partition=Sa,Fn.pick=zs,Fn.pickBy=Ls,Fn.property=_c,Fn.propertyOf=function(t){return function(e){return null==t?o:kr(t,e)}},Fn.pull=Zo,Fn.pullAll=ta,Fn.pullAllBy=function(t,e,n){return t&&t.length&&e&&e.length?Gr(t,e,lo(n,2)):t},Fn.pullAllWith=function(t,e,n){return t&&t.length&&e&&e.length?Gr(t,e,o,n):t},Fn.pullAt=ea,Fn.range=hc,Fn.rangeRight=mc,Fn.rearg=Fa,Fn.reject=function(t,e){return(Wa(t)?Te:gr)(t,Da(lo(e,3)))},Fn.remove=function(t,e){var n=[];if(!t||!t.length)return n;var r=-1,i=[],o=t.length;for(e=lo(e,3);++r<o;){var a=t[r];e(a,r,t)&&(n.push(a),i.push(r))}return Yr(t,i),n},Fn.rest=function(t,e){if("function"!=typeof t)throw new Tt(a);return Qr(t,e=e===o?e:ms(e))},Fn.reverse=na,Fn.sampleSize=function(t,e,n){return e=(n?wo(t,e,n):e===o)?1:ms(e),(Wa(t)?Zn:Zr)(t,e)},Fn.set=function(t,e,n){return null==t?t:ti(t,e,n)},Fn.setWith=function(t,e,n,r){return r="function"==typeof r?r:o,null==t?t:ti(t,e,n,r)},Fn.shuffle=function(t){return(Wa(t)?tr:ri)(t)},Fn.slice=function(t,e,n){var r=null==t?0:t.length;return r?(n&&"number"!=typeof n&&wo(t,e,n)?(e=0,n=r):(e=null==e?0:ms(e),n=n===o?r:ms(n)),ii(t,e,n)):[]},Fn.sortBy=Aa,Fn.sortedUniq=function(t){return t&&t.length?ci(t):[]},Fn.sortedUniqBy=function(t,e){return t&&t.length?ci(t,lo(e,2)):[]},Fn.split=function(t,e,n){return n&&"number"!=typeof n&&wo(t,e,n)&&(e=n=o),(n=n===o?g:n>>>0)?(t=ys(t))&&("string"==typeof e||null!=e&&!ss(e))&&!(e=ui(e))&&sn(t)?$i(_n(t),0,n):t.split(e,n):[]},Fn.spread=function(t,e){if("function"!=typeof t)throw new Tt(a);return e=null==e?0:bn(ms(e),0),Qr((function(n){var r=n[e],i=$i(n,0,e);return r&&Ie(i,r),Se(t,this,i)}))},Fn.tail=function(t){var e=null==t?0:t.length;return e?ii(t,1,e):[]},Fn.take=function(t,e,n){return t&&t.length?ii(t,0,(e=n||e===o?1:ms(e))<0?0:e):[]},Fn.takeRight=function(t,e,n){var r=null==t?0:t.length;return r?ii(t,(e=r-(e=n||e===o?1:ms(e)))<0?0:e,r):[]},Fn.takeRightWhile=function(t,e){return t&&t.length?_i(t,lo(e,3),!1,!0):[]},Fn.takeWhile=function(t,e){return t&&t.length?_i(t,lo(e,3)):[]},Fn.tap=function(t,e){return e(t),t},Fn.throttle=function(t,e,n){var r=!0,i=!0;if("function"!=typeof t)throw new Tt(a);return ns(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),Pa(t,e,{leading:r,maxWait:e,trailing:i})},Fn.thru=ha,Fn.toArray=_s,Fn.toPairs=Ns,Fn.toPairsIn=Fs,Fn.toPath=function(t){return Wa(t)?Me(t,Lo):us(t)?[t]:Oi(zo(ys(t)))},Fn.toPlainObject=bs,Fn.transform=function(t,e,n){var r=Wa(t),i=r||Ja(t)||ds(t);if(e=lo(e,4),null==n){var o=t&&t.constructor;n=i?r?new o:[]:ns(t)&&Za(o)?Un(Yt(t)):{}}return(i?Ee:wr)(t,(function(t,r,i){return e(n,t,r,i)})),n},Fn.unary=function(t){return ja(t,1)},Fn.union=ra,Fn.unionBy=ia,Fn.unionWith=oa,Fn.uniq=function(t){return t&&t.length?di(t):[]},Fn.uniqBy=function(t,e){return t&&t.length?di(t,lo(e,2)):[]},Fn.uniqWith=function(t,e){return e="function"==typeof e?e:o,t&&t.length?di(t,o,e):[]},Fn.unset=function(t,e){return null==t||pi(t,e)},Fn.unzip=aa,Fn.unzipWith=sa,Fn.update=function(t,e,n){return null==t?t:fi(t,e,bi(n))},Fn.updateWith=function(t,e,n,r){return r="function"==typeof r?r:o,null==t?t:fi(t,e,bi(n),r)},Fn.values=Us,Fn.valuesIn=function(t){return null==t?[]:Xe(t,Ms(t))},Fn.without=ca,Fn.words=Zs,Fn.wrap=function(t,e){return La(bi(e),t)},Fn.xor=la,Fn.xorBy=ua,Fn.xorWith=da,Fn.zip=pa,Fn.zipObject=function(t,e){return gi(t||[],e||[],nr)},Fn.zipObjectDeep=function(t,e){return gi(t||[],e||[],ti)},Fn.zipWith=fa,Fn.entries=Ns,Fn.entriesIn=Fs,Fn.extend=$s,Fn.extendWith=xs,lc(Fn,Fn),Fn.add=bc,Fn.attempt=tc,Fn.camelCase=Vs,Fn.capitalize=Hs,Fn.ceil=yc,Fn.clamp=function(t,e,n){return n===o&&(n=e,e=o),n!==o&&(n=(n=vs(n))==n?n:0),e!==o&&(e=(e=vs(e))==e?e:0),cr(vs(t),e,n)},Fn.clone=function(t){return lr(t,4)},Fn.cloneDeep=function(t){return lr(t,5)},Fn.cloneDeepWith=function(t,e){return lr(t,5,e="function"==typeof e?e:o)},Fn.cloneWith=function(t,e){return lr(t,4,e="function"==typeof e?e:o)},Fn.conformsTo=function(t,e){return null==e||ur(t,e,Ps(e))},Fn.deburr=Bs,Fn.defaultTo=function(t,e){return null==t||t!=t?e:t},Fn.divide=wc,Fn.endsWith=function(t,e,n){t=ys(t),e=ui(e);var r=t.length,i=n=n===o?r:cr(ms(n),0,r);return(n-=e.length)>=0&&t.slice(n,i)==e},Fn.eq=Ua,Fn.escape=function(t){return(t=ys(t))&&X.test(t)?t.replace(J,on):t},Fn.escapeRegExp=function(t){return(t=ys(t))&&at.test(t)?t.replace(ot,"\\$&"):t},Fn.every=function(t,e,n){var r=Wa(t)?Oe:hr;return n&&wo(t,e,n)&&(e=o),r(t,lo(e,3))},Fn.find=va,Fn.findIndex=Bo,Fn.findKey=function(t,e){return Ne(t,lo(e,3),wr)},Fn.findLast=ba,Fn.findLastIndex=Wo,Fn.findLastKey=function(t,e){return Ne(t,lo(e,3),$r)},Fn.floor=$c,Fn.forEach=ya,Fn.forEachRight=wa,Fn.forIn=function(t,e){return null==t?t:br(t,lo(e,3),Ms)},Fn.forInRight=function(t,e){return null==t?t:yr(t,lo(e,3),Ms)},Fn.forOwn=function(t,e){return t&&wr(t,lo(e,3))},Fn.forOwnRight=function(t,e){return t&&$r(t,lo(e,3))},Fn.get=Es,Fn.gt=Va,Fn.gte=Ha,Fn.has=function(t,e){return null!=t&&go(t,e,Er)},Fn.hasIn=js,Fn.head=Yo,Fn.identity=oc,Fn.includes=function(t,e,n,r){t=Ya(t)?t:Us(t),n=n&&!r?ms(n):0;var i=t.length;return n<0&&(n=bn(i+n,0)),ls(t)?n<=i&&t.indexOf(e,n)>-1:!!i&&Ue(t,e,n)>-1},Fn.indexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:ms(n);return i<0&&(i=bn(r+i,0)),Ue(t,e,i)},Fn.inRange=function(t,e,n){return e=hs(e),n===o?(n=e,e=0):n=hs(n),function(t,e,n){return t>=yn(e,n)&&t<bn(e,n)}(t=vs(t),e,n)},Fn.invoke=qs,Fn.isArguments=Ba,Fn.isArray=Wa,Fn.isArrayBuffer=Ga,Fn.isArrayLike=Ya,Fn.isArrayLikeObject=Ka,Fn.isBoolean=function(t){return!0===t||!1===t||rs(t)&&Sr(t)==w},Fn.isBuffer=Ja,Fn.isDate=Qa,Fn.isElement=function(t){return rs(t)&&1===t.nodeType&&!as(t)},Fn.isEmpty=function(t){if(null==t)return!0;if(Ya(t)&&(Wa(t)||"string"==typeof t||"function"==typeof t.splice||Ja(t)||ds(t)||Ba(t)))return!t.length;var e=mo(t);if(e==S||e==T)return!t.size;if(Co(t))return!Dr(t).length;for(var n in t)if(Dt.call(t,n))return!1;return!0},Fn.isEqual=function(t,e){return Pr(t,e)},Fn.isEqualWith=function(t,e,n){var r=(n="function"==typeof n?n:o)?n(t,e):o;return r===o?Pr(t,e,o,n):!!r},Fn.isError=Xa,Fn.isFinite=function(t){return"number"==typeof t&&Ge(t)},Fn.isFunction=Za,Fn.isInteger=ts,Fn.isLength=es,Fn.isMap=is,Fn.isMatch=function(t,e){return t===e||Mr(t,e,po(e))},Fn.isMatchWith=function(t,e,n){return n="function"==typeof n?n:o,Mr(t,e,po(e),n)},Fn.isNaN=function(t){return os(t)&&t!=+t},Fn.isNative=function(t){if(ko(t))throw new Ct("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Ir(t)},Fn.isNil=function(t){return null==t},Fn.isNull=function(t){return null===t},Fn.isNumber=os,Fn.isObject=ns,Fn.isObjectLike=rs,Fn.isPlainObject=as,Fn.isRegExp=ss,Fn.isSafeInteger=function(t){return ts(t)&&t>=-9007199254740991&&t<=h},Fn.isSet=cs,Fn.isString=ls,Fn.isSymbol=us,Fn.isTypedArray=ds,Fn.isUndefined=function(t){return t===o},Fn.isWeakMap=function(t){return rs(t)&&mo(t)==M},Fn.isWeakSet=function(t){return rs(t)&&"[object WeakSet]"==Sr(t)},Fn.join=function(t,e){return null==t?"":gn.call(t,e)},Fn.kebabCase=Ws,Fn.last=Xo,Fn.lastIndexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=r;return n!==o&&(i=(i=ms(n))<0?bn(r+i,0):yn(i,r-1)),e==e?function(t,e,n){for(var r=n+1;r--;)if(t[r]===e)return r;return r}(t,e,i):Fe(t,He,i,!0)},Fn.lowerCase=Gs,Fn.lowerFirst=Ys,Fn.lt=ps,Fn.lte=fs,Fn.max=function(t){return t&&t.length?mr(t,oc,Ar):o},Fn.maxBy=function(t,e){return t&&t.length?mr(t,lo(e,2),Ar):o},Fn.mean=function(t){return Be(t,oc)},Fn.meanBy=function(t,e){return Be(t,lo(e,2))},Fn.min=function(t){return t&&t.length?mr(t,oc,Lr):o},Fn.minBy=function(t,e){return t&&t.length?mr(t,lo(e,2),Lr):o},Fn.stubArray=gc,Fn.stubFalse=vc,Fn.stubObject=function(){return{}},Fn.stubString=function(){return""},Fn.stubTrue=function(){return!0},Fn.multiply=kc,Fn.nth=function(t,e){return t&&t.length?Hr(t,ms(e)):o},Fn.noConflict=function(){return _e._===this&&(_e._=Ut),this},Fn.noop=uc,Fn.now=Ea,Fn.pad=function(t,e,n){t=ys(t);var r=(e=ms(e))?fn(t):0;if(!e||r>=e)return t;var i=(e-r)/2;return Bi(ve(i),n)+t+Bi(me(i),n)},Fn.padEnd=function(t,e,n){t=ys(t);var r=(e=ms(e))?fn(t):0;return e&&r<e?t+Bi(e-r,n):t},Fn.padStart=function(t,e,n){t=ys(t);var r=(e=ms(e))?fn(t):0;return e&&r<e?Bi(e-r,n)+t:t},Fn.parseInt=function(t,e,n){return n||null==e?e=0:e&&(e=+e),$n(ys(t).replace(ct,""),e||0)},Fn.random=function(t,e,n){if(n&&"boolean"!=typeof n&&wo(t,e,n)&&(e=n=o),n===o&&("boolean"==typeof e?(n=e,e=o):"boolean"==typeof t&&(n=t,t=o)),t===o&&e===o?(t=0,e=1):(t=hs(t),e===o?(e=t,t=0):e=hs(e)),t>e){var r=t;t=e,e=r}if(n||t%1||e%1){var i=xn();return yn(t+i*(e-t+ue("1e-"+((i+"").length-1))),e)}return Kr(t,e)},Fn.reduce=function(t,e,n){var r=Wa(t)?Re:Ye,i=arguments.length<3;return r(t,lo(e,4),n,i,fr)},Fn.reduceRight=function(t,e,n){var r=Wa(t)?De:Ye,i=arguments.length<3;return r(t,lo(e,4),n,i,_r)},Fn.repeat=function(t,e,n){return e=(n?wo(t,e,n):e===o)?1:ms(e),Jr(ys(t),e)},Fn.replace=function(){var t=arguments,e=ys(t[0]);return t.length<3?e:e.replace(t[1],t[2])},Fn.result=function(t,e,n){var r=-1,i=(e=yi(e,t)).length;for(i||(i=1,t=o);++r<i;){var a=null==t?o:t[Lo(e[r])];a===o&&(r=i,a=n),t=Za(a)?a.call(t):a}return t},Fn.round=Cc,Fn.runInContext=t,Fn.sample=function(t){return(Wa(t)?Xn:Xr)(t)},Fn.size=function(t){if(null==t)return 0;if(Ya(t))return ls(t)?fn(t):t.length;var e=mo(t);return e==S||e==T?t.size:Dr(t).length},Fn.snakeCase=Ks,Fn.some=function(t,e,n){var r=Wa(t)?ze:oi;return n&&wo(t,e,n)&&(e=o),r(t,lo(e,3))},Fn.sortedIndex=function(t,e){return ai(t,e)},Fn.sortedIndexBy=function(t,e,n){return si(t,e,lo(n,2))},Fn.sortedIndexOf=function(t,e){var n=null==t?0:t.length;if(n){var r=ai(t,e);if(r<n&&Ua(t[r],e))return r}return-1},Fn.sortedLastIndex=function(t,e){return ai(t,e,!0)},Fn.sortedLastIndexBy=function(t,e,n){return si(t,e,lo(n,2),!0)},Fn.sortedLastIndexOf=function(t,e){if(null==t?0:t.length){var n=ai(t,e,!0)-1;if(Ua(t[n],e))return n}return-1},Fn.startCase=Js,Fn.startsWith=function(t,e,n){return t=ys(t),n=null==n?0:cr(ms(n),0,t.length),e=ui(e),t.slice(n,n+e.length)==e},Fn.subtract=Sc,Fn.sum=function(t){return t&&t.length?Ke(t,oc):0},Fn.sumBy=function(t,e){return t&&t.length?Ke(t,lo(e,2)):0},Fn.template=function(t,e,n){var r=Fn.templateSettings;n&&wo(t,e,n)&&(e=o),t=ys(t),e=xs({},e,r,Zi);var i,a,s=xs({},e.imports,r.imports,Zi),c=Ps(s),l=Xe(s,c),u=0,d=e.interpolate||xt,p="__p += '",f=jt((e.escape||xt).source+"|"+d.source+"|"+(d===et?ht:xt).source+"|"+(e.evaluate||xt).source+"|$","g"),_="//# sourceURL="+(Dt.call(e,"sourceURL")?(e.sourceURL+"").replace(/[\r\n]/g," "):"lodash.templateSources["+ ++ae+"]")+"\n";t.replace(f,(function(e,n,r,o,s,c){return r||(r=o),p+=t.slice(u,c).replace(kt,an),n&&(i=!0,p+="' +\n__e("+n+") +\n'"),s&&(a=!0,p+="';\n"+s+";\n__p += '"),r&&(p+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),u=c+e.length,e})),p+="';\n";var h=Dt.call(e,"variable")&&e.variable;h||(p="with (obj) {\n"+p+"\n}\n"),p=(a?p.replace(W,""):p).replace(G,"$1").replace(Y,"$1;"),p="function("+(h||"obj")+") {\n"+(h?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(i?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+p+"return __p\n}";var m=tc((function(){return St(c,_+"return "+p).apply(o,l)}));if(m.source=p,Xa(m))throw m;return m},Fn.times=function(t,e){if((t=ms(t))<1||t>h)return[];var n=g,r=yn(t,g);e=lo(e),t-=g;for(var i=Je(r,e);++n<t;)e(n);return i},Fn.toFinite=hs,Fn.toInteger=ms,Fn.toLength=gs,Fn.toLower=function(t){return ys(t).toLowerCase()},Fn.toNumber=vs,Fn.toSafeInteger=function(t){return t?cr(ms(t),-9007199254740991,h):0===t?t:0},Fn.toString=ys,Fn.toUpper=function(t){return ys(t).toUpperCase()},Fn.trim=function(t,e,n){if((t=ys(t))&&(n||e===o))return t.replace(st,"");if(!t||!(e=ui(e)))return t;var r=_n(t),i=_n(e);return $i(r,tn(r,i),en(r,i)+1).join("")},Fn.trimEnd=function(t,e,n){if((t=ys(t))&&(n||e===o))return t.replace(lt,"");if(!t||!(e=ui(e)))return t;var r=_n(t);return $i(r,0,en(r,_n(e))+1).join("")},Fn.trimStart=function(t,e,n){if((t=ys(t))&&(n||e===o))return t.replace(ct,"");if(!t||!(e=ui(e)))return t;var r=_n(t);return $i(r,tn(r,_n(e))).join("")},Fn.truncate=function(t,e){var n=30,r="...";if(ns(e)){var i="separator"in e?e.separator:i;n="length"in e?ms(e.length):n,r="omission"in e?ui(e.omission):r}var a=(t=ys(t)).length;if(sn(t)){var s=_n(t);a=s.length}if(n>=a)return t;var c=n-fn(r);if(c<1)return r;var l=s?$i(s,0,c).join(""):t.slice(0,c);if(i===o)return l+r;if(s&&(c+=l.length-c),ss(i)){if(t.slice(c).search(i)){var u,d=l;for(i.global||(i=jt(i.source,ys(mt.exec(i))+"g")),i.lastIndex=0;u=i.exec(d);)var p=u.index;l=l.slice(0,p===o?c:p)}}else if(t.indexOf(ui(i),c)!=c){var f=l.lastIndexOf(i);f>-1&&(l=l.slice(0,f))}return l+r},Fn.unescape=function(t){return(t=ys(t))&&Q.test(t)?t.replace(K,hn):t},Fn.uniqueId=function(t){var e=++zt;return ys(t)+e},Fn.upperCase=Qs,Fn.upperFirst=Xs,Fn.each=ya,Fn.eachRight=wa,Fn.first=Yo,lc(Fn,(xc={},wr(Fn,(function(t,e){Dt.call(Fn.prototype,e)||(xc[e]=t)})),xc),{chain:!1}),Fn.VERSION="4.17.13",Ee(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(t){Fn[t].placeholder=Fn})),Ee(["drop","take"],(function(t,e){Bn.prototype[t]=function(n){n=n===o?1:bn(ms(n),0);var r=this.__filtered__&&!e?new Bn(this):this.clone();return r.__filtered__?r.__takeCount__=yn(n,r.__takeCount__):r.__views__.push({size:yn(n,g),type:t+(r.__dir__<0?"Right":"")}),r},Bn.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}})),Ee(["filter","map","takeWhile"],(function(t,e){var n=e+1,r=1==n||3==n;Bn.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:lo(t,3),type:n}),e.__filtered__=e.__filtered__||r,e}})),Ee(["head","last"],(function(t,e){var n="take"+(e?"Right":"");Bn.prototype[t]=function(){return this[n](1).value()[0]}})),Ee(["initial","tail"],(function(t,e){var n="drop"+(e?"":"Right");Bn.prototype[t]=function(){return this.__filtered__?new Bn(this):this[n](1)}})),Bn.prototype.compact=function(){return this.filter(oc)},Bn.prototype.find=function(t){return this.filter(t).head()},Bn.prototype.findLast=function(t){return this.reverse().find(t)},Bn.prototype.invokeMap=Qr((function(t,e){return"function"==typeof t?new Bn(this):this.map((function(n){return Tr(n,t,e)}))})),Bn.prototype.reject=function(t){return this.filter(Da(lo(t)))},Bn.prototype.slice=function(t,e){t=ms(t);var n=this;return n.__filtered__&&(t>0||e<0)?new Bn(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==o&&(n=(e=ms(e))<0?n.dropRight(-e):n.take(e-t)),n)},Bn.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},Bn.prototype.toArray=function(){return this.take(g)},wr(Bn.prototype,(function(t,e){var n=/^(?:filter|find|map|reject)|While$/.test(e),r=/^(?:head|last)$/.test(e),i=Fn[r?"take"+("last"==e?"Right":""):e],a=r||/^find/.test(e);i&&(Fn.prototype[e]=function(){var e=this.__wrapped__,s=r?[1]:arguments,c=e instanceof Bn,l=s[0],u=c||Wa(e),d=function(t){var e=i.apply(Fn,Ie([t],s));return r&&p?e[0]:e};u&&n&&"function"==typeof l&&1!=l.length&&(c=u=!1);var p=this.__chain__,f=!!this.__actions__.length,_=a&&!p,h=c&&!f;if(!a&&u){e=h?e:new Bn(this);var m=t.apply(e,s);return m.__actions__.push({func:ha,args:[d],thisArg:o}),new Hn(m,p)}return _&&h?t.apply(this,s):(m=this.thru(d),_?r?m.value()[0]:m.value():m)})})),Ee(["pop","push","shift","sort","splice","unshift"],(function(t){var e=qt[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",r=/^(?:pop|shift)$/.test(t);Fn.prototype[t]=function(){var t=arguments;if(r&&!this.__chain__){var i=this.value();return e.apply(Wa(i)?i:[],t)}return this[n]((function(n){return e.apply(Wa(n)?n:[],t)}))}})),wr(Bn.prototype,(function(t,e){var n=Fn[e];if(n){var r=n.name+"";Dt.call(qn,r)||(qn[r]=[]),qn[r].push({name:e,func:n})}})),qn[Fi(o,2).name]=[{name:"wrapper",func:o}],Bn.prototype.clone=function(){var t=new Bn(this.__wrapped__);return t.__actions__=Oi(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=Oi(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=Oi(this.__views__),t},Bn.prototype.reverse=function(){if(this.__filtered__){var t=new Bn(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},Bn.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,n=Wa(t),r=e<0,i=n?t.length:0,o=function(t,e,n){var r=-1,i=n.length;for(;++r<i;){var o=n[r],a=o.size;switch(o.type){case"drop":t+=a;break;case"dropRight":e-=a;break;case"take":e=yn(e,t+a);break;case"takeRight":t=bn(t,e-a)}}return{start:t,end:e}}(0,i,this.__views__),a=o.start,s=o.end,c=s-a,l=r?s:a-1,u=this.__iteratees__,d=u.length,p=0,f=yn(c,this.__takeCount__);if(!n||!r&&i==c&&f==c)return hi(t,this.__actions__);var _=[];t:for(;c--&&p<f;){for(var h=-1,m=t[l+=e];++h<d;){var g=u[h],v=g.iteratee,b=g.type,y=v(m);if(2==b)m=y;else if(!y){if(1==b)continue t;break t}}_[p++]=m}return _},Fn.prototype.at=ma,Fn.prototype.chain=function(){return _a(this)},Fn.prototype.commit=function(){return new Hn(this.value(),this.__chain__)},Fn.prototype.next=function(){this.__values__===o&&(this.__values__=_s(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?o:this.__values__[this.__index__++]}},Fn.prototype.plant=function(t){for(var e,n=this;n instanceof Vn;){var r=Fo(n);r.__index__=0,r.__values__=o,e?i.__wrapped__=r:e=r;var i=r;n=n.__wrapped__}return i.__wrapped__=t,e},Fn.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof Bn){var e=t;return this.__actions__.length&&(e=new Bn(this)),(e=e.reverse()).__actions__.push({func:ha,args:[na],thisArg:o}),new Hn(e,this.__chain__)}return this.thru(na)},Fn.prototype.toJSON=Fn.prototype.valueOf=Fn.prototype.value=function(){return hi(this.__wrapped__,this.__actions__)},Fn.prototype.first=Fn.prototype.head,ee&&(Fn.prototype[ee]=function(){return this}),Fn}();_e._=mn,(i=function(){return mn}.call(e,n,e,r))===o||(r.exports=i)}).call(this)}).call(this,n(1),n(17)(t))},function(module,exports,__webpack_require__){"use strict";!function(){var t,e,n,r=(t={},e=function(e,n,r){for(var i=e.split("."),o=0;o<i.length-1;o++)r[i[o]]||(r[i[o]]={}),r=r[i[o]];"function"==typeof n?n.isClass?r[i[o]]=n:r[i[o]]=function(){return n.apply(t,arguments)}:r[i[o]]=n},n=function(n,r,i){e(n,r,t),i&&e(n,r,window.filepicker)},{extend:function(e,r,i){"function"==typeof e&&(i=r,r=e,e=""),e&&(e+=".");var o=r.call(t);for(var a in o)n(e+a,o[a],i)},internal:function(e){e.apply(t,arguments)}});if(window.filepicker)for(var i in r)window.filepicker[i]=r[i];else window.filepicker=r}(),filepicker.extend("comm",(function(){var t=this,e="filepicker_comm_iframe",n="fpapi_comm_iframe",r=function(e){if(e.origin===t.urls.BASE||e.origin===t.urls.DIALOG_BASE){var n=t.json.parse(e.data);t.handlers.run(n)}},i=!1,o=function(){if(!i)if(i=!0,window.addEventListener)window.addEventListener("message",r,!1);else{if(!window.attachEvent)throw new t.FilepickerException("Unsupported browser");window.attachEvent("onmessage",r)}};return{openChannel:function(){var r,i;void 0===window.frames[e]&&(o(),(r=document.createElement("iframe")).id=r.name=e,r.src=t.urls.COMM,r.style.display="none",document.body.appendChild(r));void 0===window.frames[n]&&(o(),(i=document.createElement("iframe")).id=i.name=n,i.src=t.urls.API_COMM,i.style.display="none",document.body.appendChild(i))},closeChannel:function(){if(window.removeEventListener)window.removeEventListener("message",r,!1);else{if(!window.attachEvent)throw new t.FilepickerException("Unsupported browser");window.detachEvent("onmessage",r)}if(i){i=!1;for(var o=document.getElementsByName(e),a=0;a<o.length;a++)o[a].parentNode.removeChild(o[a]);try{delete window.frames[e]}catch(t){}for(var s=document.getElementsByName(n),c=0;c<s.length;c++)s[c].parentNode.removeChild(s[c]);try{delete window.frames[n]}catch(t){}}}}})),filepicker.extend("comm_fallback",(function(){var t,e=this,n="filepicker_comm_iframe",r="host_comm_iframe",i="",o=function(){a()},a=function(){if(void 0===window.frames.host_comm_iframe){var t;(t=document.createElement("iframe")).id=t.name=r,i=t.src=e.urls.constructHostCommFallback(),t.style.display="none";var n=function(){i=t.contentWindow.location.href,s()};t.attachEvent?t.attachEvent("onload",n):t.onload=n,document.body.appendChild(t)}},s=function(){var t;void 0===window.frames[n]&&((t=document.createElement("iframe")).id=t.name=n,t.src=e.urls.FP_COMM_FALLBACK+"?host_url="+encodeURIComponent(i),t.style.display="none",document.body.appendChild(t));d()},c=!1,l="",u=function(){var t=window.frames[n];if(t){var r=t.frames.host_comm_iframe;if(r){var i=r.location.hash;if(i&&"#"===i.charAt(0)&&(i=i.substr(1)),i!==l&&(l=i)){var o;try{o=e.json.parse(i)}catch(t){}o&&e.handlers.run(o)}}}},d=function(){c||(c=!0,t=window.setInterval(u,200))},p=function(){if(window.clearInterval(t),c){c=!1;for(var e=document.getElementsByName(n),i=0;i<e.length;i++)e[i].parentNode.removeChild(e[i]);try{delete window.frames[n]}catch(t){}for(e=document.getElementsByName(r),i=0;i<e.length;i++)e[i].parentNode.removeChild(e[i]);try{delete window.frames.host_comm_iframe}catch(t){}}},f=!("postMessage"in window),_=function(){e.comm,e.comm={openChannel:o,closeChannel:p}};return f&&_(),{openChannel:o,closeChannel:p,isEnabled:f}})),filepicker.extend("cookies",(function(){var t=this;return{checkThirdParty:function(e){var n=function(e){return function(n){"ThirdPartyCookies"===n.type&&(t.cookies.THIRD_PARTY_COOKIES=!!n.payload,e&&"function"==typeof e&&e(!!n.payload))}}(e);t.handlers.attach("cookies",n),t.comm.openChannel()}}})),filepicker.extend("handlers",(function(){var t={};return{attach:function(e,n){return t.hasOwnProperty(e)?t[e].push(n):t[e]=[n],n},detach:function(e,n){var r=t[e];if(r)if(n){for(var i=0;i<r.length;i++)if(r[i]===n){r.splice(i,1);break}0===r.length&&delete t[e]}else delete t[e]},run:function(e){var n=e.id;if(t.hasOwnProperty(n)){for(var r=t[n],i=0;i<r.length;i++)r[i](e);return!0}return!1}}})),filepicker.extend("exporter",(function(){var t=this,e=function(n,r,i,o){!function(e){var n,r,i;if(e.mimetype&&e.extension)throw t.FilepickerException("Error: Cannot pass in both mimetype and extension parameters to the export function");if(n="service",e[r="services"]&&!t.util.isArray(e[r])?e[r]=[e[r]]:e[n]?e[r]=[e[n]]:i&&(e[r]=i),e.services)for(var o=0;o<e.services.length;o++){var a=(""+e.services[o]).replace(" ",""),s=t.services[a];e.services[o]=void 0===s?a:s}e.openTo&&(e.openTo=t.services[e.openTo]||e.openTo),t.util.setDefault(e,"container",t.browser.openInModal()?"modal":"window")}(r);var a={close:function(){t.modal.close()}};if(r.debug)return setTimeout((function(){i({id:1,url:"https://www.filepicker.io/api/file/-nBq2onTSemLBxlcBWn1",filename:"test.png",mimetype:"image/png",size:58979,client:"computer"})}),1),a;if(void 0===t.cookies.THIRD_PARTY_COOKIES){var s=!1;return t.cookies.checkThirdParty((function(){s||(e(n,r,i,o),s=!0)})),a}var c=t.util.getId(),l=!1;return t.window.open(r.container,t.urls.constructExportUrl(n,r,c),(function(){l||(l=!0,o(t.errors.FPError(131)))})),t.handlers.attach(c,function(e,n){return function(r){if("filepickerUrl"===r.type){if(r.error)t.util.console.error(r.error),n(t.errors.FPError(132));else{var i={};i.url=r.payload.url,i.filename=r.payload.data.filename,i.mimetype=r.payload.data.type,i.size=r.payload.data.size,i.client=r.payload.data.client,i.isWriteable=!0,e(i)}t.modal.close()}}}((function(t){l=!0,i(t)}),(function(t){l=!0,o(t)}))),a};return{createExporter:e}})),filepicker.extend("modal",(function(){var t=this,e="filepicker_shade",n="filepicker_dialog_container",r=u();if(r)var i=r.style.overflow;var o=function(t){var n=document.createElement("div");return n.id=e,n.className="fp__overlay",n.onclick=c(t),n},a=function(){var t=document.createElement("div");return t.id=n,t.className="fp__container",t},s=function(t){var e=document.createElement("div");e.className="fp__close";var n=document.createElement("a");return n.appendChild(document.createTextNode("X")),e.appendChild(n),n.onclick=c(t),document.onkeydown=function(e){27===(e=e||window.event).keyCode&&c(t)()},e},c=function(r,i){return i=!!i,function(){if(!t.uploading||i||window.confirm('You are currently uploading. If you choose "OK", the window will close and your upload will not finish. Do you want to stop uploading and close the window?')){t.uploading=!1,document.onkeydown=null,l();var o=document.getElementById(e);o&&document.body.removeChild(o);var a=document.getElementById(n);a&&document.body.removeChild(a);try{delete window.frames[t.window.WINDOW_NAME]}catch(t){}r&&r()}}};function l(){var t=u();t&&(t.style.overflow=i)}function u(){try{return document.getElementsByTagName("html")[0]}catch(t){return null}}return{generate:function(e,n){!function(){var t=".fp__overlay {top: 0;right: 0;bottom: 0;left: 0;z-index: 1000;background: rgba(0, 0, 0, 0.8);}.fp__close {top: 104px; right: 108px; width: 35px; height: 35px; z-index: 20; cursor: pointer}@media screen and (max-width: 768px), screen and (max-height: 500px) {.fp__close {top: 15px; right: 12px;}}.fp__close a {text-indent: -9999px; overflow: hidden; display: block; width: 100%; height: 100%; background: url(https://d1zyh3sbxittvg.cloudfront.net/close.png) 50% 50% no-repeat;}.fp__close a:hover {background-color: rgba(0,0,0, .02); opacity: .8;}@media screen and (max-width: 768px), screen and (max-height: 500px) {top: 14px; right: 14px;}.fp__copy {display: none;}.fp__container {-webkit-overflow-scrolling: touch; overflow: hidden; min-height: 300px; top: 100px;right: 100px;bottom: 100px;left: 100px;background: #eee; box-sizing:content-box; -webkit-box-sizing:content-box; -moz-box-sizing:content-box;}@media screen and (max-width: 768px), screen and (max-height: 500px) {.fp__copy {bottom: 0; left: 0; right: 0; height: 20px; background: #333;}}@media screen and (max-width: 768px), screen and (max-height: 500px) {.fp__copy a {margin-left: 5px;}}@media screen and (max-width: 768px), screen and (max-height: 500px) {.fp__container {top: 0;right: 0;bottom: 0;left: 0;}}.fp__overlay, .fp__close, .fp__copy, .fp__container {position: fixed;}",e=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t));e.appendChild(n)}();var r=o(n),i=a(),c=s(n),l=document.createElement("iframe");l.name=t.window.WINDOW_NAME,l.id=t.window.WINDOW_NAME,l.style.width="100%",l.style.height="100%",l.style.border="none",l.style.position="relative",l.setAttribute("border",0),l.setAttribute("frameborder",0),l.setAttribute("frameBorder",0),l.setAttribute("marginwidth",0),l.setAttribute("marginheight",0),l.src=e,i.appendChild(l),r.appendChild(c),r.appendChild(i),document.body.appendChild(r);var d=u();return d&&(d.style.overflow="hidden"),l},close:c((function(){})),hide:function(){var t=document.getElementById(e);t&&(t.hidden=!0);var r=document.getElementById(n);r&&(r.hidden=!0),l()}}})),filepicker.extend("picker",(function(){var t=this,e=function(e,n,i){return function(a){if(!o(a,i))if(t.uploading=!1,a.error)t.util.console.error(a.error),a.error.code?n(t.errors.FPError(a.error.code)):(n(t.errors.FPError(102)),t.modal.close());else{var s=r(a.payload);e(s),t.modal.close()}}},n=function(t,e,n){t[n]&&(e[n]=t[n])},r=function(t){var e={},r=t.url;r&&r.url&&(r=r.url),e.url=r;var i=t.url.data||t.data;return e.filename=i.filename,e.mimetype=i.type,e.size=i.size,void 0!==i.cropped&&(e.cropped=i.cropped),void 0!==i.rotated&&(e.rotated=i.rotated),void 0!==i.converted&&(e.converted=i.converted),n(i,e,"id"),n(i,e,"key"),n(i,e,"container"),n(i,e,"path"),n(i,e,"client"),e.isWriteable=!0,e},i=function(n,a,s,c,l,u,d){!function(e){var n=function(n,r,i){e[r]?t.util.isArray(e[r])||(e[r]=[e[r]]):e[n]?e[r]=[e[n]]:i&&(e[r]=i)};if(n("service","services"),n("mimetype","mimetypes"),n("extension","extensions"),e.services)for(var r=0;r<e.services.length;r++){var i=(""+e.services[r]).replace(" ","");void 0!==t.services[i]&&(i=t.services[i]),e.services[r]=i}if(e.mimetypes&&e.extensions)throw t.FilepickerException("Error: Cannot pass in both mimetype and extension parameters to the pick function");e.mimetypes||e.extensions||(e.mimetypes=["*/*"]),e.openTo&&(e.openTo=t.services[e.openTo]||e.openTo),t.util.setDefault(e,"container",t.browser.openInModal()?"modal":"window")}(n);var p={close:function(){t.modal.close()}};if(n.debug){var f,_={id:1,url:"https://www.filepicker.io/api/file/-nBq2onTSemLBxlcBWn1",filename:"test.png",mimetype:"image/png",size:58979,client:"computer"};return f=c||n.storeLocation?[_,_,_]:_,setTimeout((function(){a(f)}),1),p}if(void 0===t.cookies.THIRD_PARTY_COOKIES){var h=!1;return t.cookies.checkThirdParty((function(){h||(i(n,a,s,!!c,l,u),h=!0)})),p}var m,g,v=t.util.getId(),b=!1,y=function(t){"window"===n.container&&(window.onbeforeunload=null),b=!0,a(t)},w=function(t){b=!0,s(t)};d?(m=t.urls.constructConvertUrl(n,v),g=e(y,w,u)):c?(m=t.urls.constructPickUrl(n,v,!0),g=function(e,n,i){return function(a){if(!o(a,i)){if(t.uploading=!1,a.error)t.util.console.error(a.error),n(t.errors.FPError(102));else{var s=[];t.util.isArray(a.payload)||(a.payload=[a.payload]);for(var c=0;c<a.payload.length;c++){var l=r(a.payload[c]);s.push(l)}e(s)}t.modal.close()}}}(y,w,u)):l?(m=t.urls.constructPickFolderUrl(n,v),g=function(e,n,r){return function(i){o(i,r)||(t.uploading=!1,i.error?(t.util.console.error(i.error),n(t.errors.FPError(102))):(i.payload.data.url=i.payload.url,e(i.payload.data)),t.modal.close())}}(y,w,u)):(m=t.urls.constructPickUrl(n,v,!1),g=e(y,w,u)),t.window.open(n.container,m,(function(){b||(b=!0,s(t.errors.FPError(101)))})),t.handlers.attach(v,g);var $,x=v+"-upload";return t.handlers.attach(x,($=($=function(){t.handlers.detach(x)})||function(){},function(e){"uploading"===e.type&&(t.uploading=!!e.payload,$(t.uploading))})),p};function o(e,n){if("filepickerProgress"===e.type)t.uploading=!0,n&&n(e.payload.data);else if("notUploading"===e.type)t.uploading=!1;else if("closeModal"===e.type)t.modal.close();else if("hideModal"===e.type)t.modal.hide();else if("filepickerUrl"===e.type||"serverHttpError"===e.type)return!1;return!0}return{createPicker:i}})),filepicker.extend("window",(function(){var t=this,e="filepicker_dialog";return{open:function(n,r,i){if(i=i||function(){},!n&&t.browser.openInModal()?n="modal":n||(n="window"),"window"===n){var o=e+t.util.getId();window.onbeforeunload=function(){return"Filepicker upload does not complete."};var a=window.open(r,o,"left=100,top=100,height=600,width=800,menubar=no,toolbar=no,location=no,personalbar=no,status=no,resizable=yes,scrollbars=yes,dependent=yes,dialog=yes");a||(window.onbeforeunload=null,window.alert("Please disable your popup blocker to upload files."));var s=window.setInterval((function(){a&&!a.closed||(window.onbeforeunload=null,window.clearInterval(s),i())}),100)}else if("modal"===n)t.modal.generate(r,i);else{var c=document.getElementById(n);if(!c)throw new t.FilepickerException('Container "'+n+'" not found. This should either be set to "window","modal", or the ID of an iframe that is currently in the document.');c.src=r}},WINDOW_NAME:e}})),filepicker.extend("conversions",(function(){var t=this,e={align:"string",blurAmount:"number",crop:"string or array",crop_first:"boolean",compress:"boolean",exif:"string or boolean",filter:"string",fit:"string",format:"string",height:"number",policy:"string",quality:"number",page:"number",rotate:"string or number",secure:"boolean",sharpenAmount:"number",signature:"string",storeAccess:"string",storeContainer:"string",storeRegion:"string",storeLocation:"string",storePath:"string",text:"string",text_align:"string",text_color:"string",text_font:"string",text_padding:"number",text_size:"number",watermark:"string",watermark_position:"string",watermark_size:"number",width:"number"},n={w:"width",h:"height"};return{convert:function(n,r,i,o,a){!function(n){var r;for(var i in n){for(var o in r=!1,e)if(i===o&&(r=!0,-1===e[o].indexOf(t.util.typeOf(n[i]))))throw new t.FilepickerException("Conversion parameter "+i+" is not the right type: "+n[i]+". Should be a "+e[o]);if(!r)throw new t.FilepickerException("Conversion parameter "+i+" is not a valid parameter.")}}(r),r.crop&&t.util.isArray(r.crop)&&(r.crop=r.crop.join(",")),t.ajax.post(n+"/convert",{data:r,json:!0,success:function(e){i(t.util.standardizeFPFile(e))},error:function(e,n,r){o("not_found"===e?new t.errors.FPError(141):"bad_params"===e?new t.errors.FPError(142):"not_authorized"===e?new t.errors.FPError(403):new t.errors.FPError(143))},progress:a})},mapRestParams:function(t){var r={};for(var i in t)r[n[i]||i]=t[i],"number"===e[n[i]||i]&&(r[n[i]||i]=Number(t[i]));return r}}})),filepicker.extend("errors",(function(){var t=this,e=function(t){if(this===window)return new e(t);if(this.code=t,filepicker.debug){var n=filepicker.error_map[this.code];this.message=n.message,this.moreInfo=n.moreInfo,this.toString=function(){return"FPError "+this.code+": "+this.message+". For help, see "+this.moreInfo}}else this.toString=function(){return"FPError "+this.code+". Include filepicker_debug.js for more info"};return this};e.isClass=!0;return{FPError:e,handleError:function(e){filepicker.debug&&t.util.console.error(e.toString())}}}),!0),filepicker.extend((function(){var t=this;t.API_VERSION="v2";var e=function(t){return this.text=t,this.toString=function(){return"FilepickerException: "+this.text},this};e.isClass=!0;var n=function(e,n,r,i,o){o(10),t.store(e,(function(e){o(50),t.read(e,n,r,i,(function(t){o(50+t/2)}))}),i)},r=function(e,n,r,i){var o;if(t.util.checkApiKey(),"function"==typeof n&&(i=r,r=n,n={}),n=n?t.util.clone(n):{},r=r||function(){},i=i||t.errors.handleError,"string"==typeof e&&t.util.isUrl(e))o=e;else{if(!e.url)throw new t.FilepickerException("Invalid file to export: "+e+". Not a valid url or FPFile object. You may want to use filepicker.store() to get an FPFile to export");o=e.url,n.mimetype||n.extension||(n.mimetype=e.mimetype),n.suggestedFilename||(n.suggestedFilename=e.filename)}return n.suggestedFilename&&(n.suggestedFilename=encodeURI(n.suggestedFilename)),t.exporter.createExporter(o,n,r,i)},i=function(e,n,r,i){var o;if(t.util.checkApiKey(),"function"==typeof n&&(i=r,r=n,n={}),n=n||{},r=r||function(){},i=i||t.errors.handleError,t.util.isFPUrl(t.util.getFPUrl(e)))o=e;else{if(!e.url)throw new t.FilepickerException("Invalid file to get metadata for: "+e+". Not a filepicker url or FPFile object.");o=e.url}o=t.util.getFPUrl(o),t.files.stat(t.util.trimConvert(o),n,r,i)};return{setKey:function(e){t.apikey=e},setResponsiveOptions:function(e){return t.responsiveImages.setResponsiveOptions(e)},pick:function(e,n,r,i){return t.util.checkApiKey(),"function"==typeof e&&(r=n,n=e,e={}),e=e||{},n=n||function(){},r=r||t.errors.handleError,t.picker.createPicker(e,n,r,!1,!1,i)},pickFolder:function(e,n,r,i){return t.util.checkApiKey(),"function"==typeof e&&(r=n,n=e,e={}),e=e||{},n=n||function(){},r=r||t.errors.handleError,t.picker.createPicker(e,n,r,!1,!0,i)},pickMultiple:function(e,n,r,i){return t.util.checkApiKey(),"function"==typeof e&&(i=r,r=n,n=e,e={}),e=e||{},n=n||function(){},r=r||t.errors.handleError,t.picker.createPicker(e,n,r,!0,!1,i)},pickAndStore:function(e,n,r,i,o){if(t.util.checkApiKey(),!e||!n||"function"==typeof e||"function"==typeof e)throw new t.FilepickerException("Not all required parameters given, missing picker or store options");i=i||t.errors.handleError;var a=!!e.multiple,s=e?t.util.clone(e):{};if(s.storeLocation=n.location||"S3",s.storePath=n.path,s.storeContainer=n.storeContainer||n.container,s.storeRegion=n.storeRegion,s.storeAccess=n.access||"private",a&&s.storePath&&"/"!==s.storePath.charAt(s.storePath.length-1))throw new t.FilepickerException(NaN);var c=r;return a||(c=function(t){r([t])}),t.picker.createPicker(s,c,i,a,!1,o)},read:function(e,r,i,o,a){if(t.util.checkApiKey(),!e)throw new t.FilepickerException("No input given - nothing to read!");if("function"==typeof r&&(a=o,o=i,i=r,r={}),r=r||{},i=i||function(){},o=o||t.errors.handleError,a=a||function(){},"string"==typeof e)t.util.isFPUrl(e)?t.files.readFromFPUrl(e,r,i,o,a):t.files.readFromUrl(e,r,i,o,a);else if(t.util.isFileInputElement(e))e.files?0===e.files.length?o(new t.errors.FPError(115)):t.files.readFromFile(e.files[0],r,i,o,a):n(e,r,i,o,a);else if(t.util.isFile(e))t.files.readFromFile(e,r,i,o,a);else{if(!e.url)throw new t.FilepickerException("Cannot read given input: "+e+". Not a url, file input, DOM File, or FPFile object.");t.files.readFromFPUrl(e.url,r,i,o,a)}},write:function(e,n,r,i,o,a){if(t.util.checkApiKey(),!e)throw new t.FilepickerException("No fpfile given - nothing to write to!");if(null==n)throw new t.FilepickerException("No input given - nothing to write!");var s;if("function"==typeof r&&(a=o,o=i,i=r,r={}),r=r||{},i=i||function(){},o=o||t.errors.handleError,a=a||function(){},t.util.isFPUrl(t.util.getFPUrl(e)))s=e;else{if(!e.url)throw new t.FilepickerException("Invalid file to write to: "+e+". Not a filepicker url or FPFile object.");s=e.url}if(s=t.util.trimConvert(t.util.getFPUrl(s)),"string"==typeof n)t.files.writeDataToFPUrl(s,n,r,i,o,a);else if(t.util.isFileInputElement(n))n.files?0===n.files.length?o(new t.errors.FPError(115)):t.files.writeFileToFPUrl(s,n.files[0],r,i,o,a):t.files.writeFileInputToFPUrl(s,n,r,i,o,a);else if(t.util.isFile(n))t.files.writeFileToFPUrl(s,n,r,i,o,a);else{if(!n.url)throw new t.FilepickerException("Cannot read from given input: "+n+". Not a string, file input, DOM File, or FPFile object.");t.files.writeUrlToFPUrl(s,n.url,r,i,o,a)}},writeUrl:function(e,n,r,i,o,a){if(t.util.checkApiKey(),!e)throw new t.FilepickerException("No fpfile given - nothing to write to!");if(null==n)throw new t.FilepickerException("No input given - nothing to write!");var s;if("function"==typeof r&&(a=o,o=i,i=r,r={}),r=r||{},i=i||function(){},o=o||t.errors.handleError,a=a||function(){},t.util.isFPUrl(t.util.getFPUrl(e)))s=e;else{if(!e.url)throw new t.FilepickerException("Invalid file to write to: "+e+". Not a filepicker url or FPFile object.");s=e.url}s=t.util.getFPUrl(s),t.files.writeUrlToFPUrl(t.util.trimConvert(s),n,r,i,o,a)},export:r,exportFile:r,processImage:function(e,n,r,i,o){var a;if(t.util.checkApiKey(),"function"==typeof n&&(i=r,r=n,n={}),n=n||{},r=r||function(){},i=i||t.errors.handleError,"string"==typeof e)a=e;else{if(!e.url)throw new t.FilepickerException("Invalid file to convert: "+e+". Not a valid url or FPFile object or not filepicker url. You can convert only filepicker url images.");a=e.url,n.filename||(n.filename=e.filename)}return n.convertUrl=a,n.multiple=!1,n.services=["CONVERT","COMPUTER"],n.backgroundUpload=!0,n.hide=!1,t.picker.createPicker(n,r,i,!1,!1,o,!0)},store:function(e,n,r,i,o){if(t.util.checkApiKey(),"function"==typeof n&&(o=i,i=r,r=n,n={}),n=n?t.util.clone(n):{},r=r||function(){},i=i||t.errors.handleError,o=o||function(){},"string"==typeof e)t.files.storeData(e,n,r,i,o);else if(t.util.isFileInputElement(e))e.files?0===e.files.length?i(new t.errors.FPError(115)):t.files.storeFile(e.files[0],n,r,i,o):t.files.storeFileInput(e,n,r,i,o);else if(t.util.isFile(e))t.files.storeFile(e,n,r,i,o);else{if(!e.url)throw new t.FilepickerException("Cannot store given input: "+e+". Not a string, file input, DOM File, or FPFile object.");n.filename||(n.filename=e.filename),t.files.storeUrl(e.url,n,r,i,o)}},storeUrl:function(e,n,r,i,o){t.util.checkApiKey(),"function"==typeof n&&(o=i,i=r,r=n,n={}),n=n||{},r=r||function(){},i=i||t.errors.handleError,o=o||function(){},t.files.storeUrl(e,n,r,i,o)},stat:i,metadata:i,remove:function(e,n,r,i){var o;if(t.util.checkApiKey(),"function"==typeof n&&(i=r,r=n,n={}),n=n||{},r=r||function(){},i=i||t.errors.handleError,t.util.isFPUrl(t.util.getFPUrl(e)))o=e;else{if(!e.url)throw new t.FilepickerException("Invalid file to remove: "+e+". Not a filepicker url or FPFile object.");o=e.url}o=t.util.getFPUrl(o),t.files.remove(t.util.trimConvert(o),n,r,i)},convert:function(e,n,r,i,o,a){if(t.util.checkApiKey(),!e)throw new t.FilepickerException("No fpfile given - nothing to convert!");"function"==typeof r&&(a=o,o=i,i=r,r={});var s,c=n?t.util.clone(n):{};if(r=r||{},i=i||function(){},o=o||t.errors.handleError,a=a||function(){},r.location&&(c.storeLocation=r.location),r.path&&(c.storePath=r.path),r.container&&(c.storeContainer=r.container),c.storeAccess=r.access||"private",t.util.isFPUrl(t.util.getFPUrl(e)))s=e;else{if(!e.url)throw new t.FilepickerException("Invalid file to convert: "+e+". Not a filepicker url or FPFile object.");if(s=e.url,!t.mimetypes.matchesMimetype(e.mimetype,"image/*")&&!t.mimetypes.matchesMimetype(e.mimetype,"application/pdf"))return void o(new t.errors.FPError(142))}if((s=t.util.getFPUrl(s)).indexOf("/convert")>-1){var l=t.util.parseUrl(s).params;for(var u in(l=t.conversions.mapRestParams(l)).crop&&t.util.setDefault(l,"crop_first",!0),l)t.util.setDefault(c,u,l[u])}t.conversions.convert(t.util.trimConvert(s),c,i,o,a)},constructWidget:function(e){return t.widgets.constructWidget(e)},makeDropPane:function(e,n){return t.dragdrop.makeDropPane(e,n)},FilepickerException:e,responsive:function(){t.responsiveImages.update.apply(null,arguments)},version:"2.4.11"}}),!0),filepicker.extend("mimetypes",(function(){var t=this,e={".stl":"application/sla",".hbs":"text/html",".pdf":"application/pdf",".jpg":"image/jpeg",".jpeg":"image/jpeg",".jpe":"image/jpeg",".imp":"application/x-impressionist",".vob":"video/dvd"},n=["application/octet-stream","application/download","application/force-download","octet/stream","application/unknown","application/x-download","application/x-msdownload","application/x-secure-download"];return{getMimetype:function(t){if(t.type){var r=t.type;r=r.toLowerCase();for(var i=!1,o=0;o<n.length;o++)i=i||r===n[o];if(!i)return t.type}var a=(t.name||t.fileName).match(/\.\w*$/);return a?e[a[0].toLowerCase()]||"":t.type?t.type:""},matchesMimetype:function(e,r){if(!e)return"*/*"===r;e=t.util.trim(e).toLowerCase(),r=t.util.trim(r).toLowerCase();for(var i=0;i<n.length;i++)if(e===n[i])return!0;var o=e.split("/"),a=r.split("/");return"*"===a[0]||a[0]===o[0]&&("*"===a[1]||a[1]===o[1])}}})),filepicker.extend("services",(function(){return{COMPUTER:1,DROPBOX:2,FACEBOOK:3,GITHUB:4,GMAIL:5,IMAGE_SEARCH:6,URL:7,WEBCAM:8,GOOGLE_DRIVE:9,SEND_EMAIL:10,INSTAGRAM:11,FLICKR:12,VIDEO:13,EVERNOTE:14,PICASA:15,WEBDAV:16,FTP:17,ALFRESCO:18,BOX:19,SKYDRIVE:20,GDRIVE:21,CUSTOMSOURCE:22,CLOUDDRIVE:23,GENERIC:24,CONVERT:25,AUDIO:26}}),!0),filepicker.extend("urls",(function(){var t=this,e="https://www.filepicker.io";window.filepicker.hostname&&(e=window.filepicker.hostname);var n=e.replace("www","dialog"),r=n+"/dialog/open/",i=n+"/dialog/save/",o=n+"/dialog/process/",a=n+"/dialog/folder/",s=e+"/api/store/",c=["crop","rotate","filter"];function l(e,n){return"?key="+t.apikey+"&id="+n+"&referrer="+window.location.hostname+"&iframe="+("window"!==e.container)+"&version="+t.API_VERSION+(e.services?"&s="+e.services.join(","):"")+(void 0!==e.container?"&container="+e.container:"modal")+(e.openTo?"&loc="+e.openTo:"")+"&language="+(e.language||t.browser.getLanguage())+(void 0!==e.mobile?"&mobile="+e.mobile:"")+(void 0!==e.backgroundUpload?"&bu="+e.backgroundUpload:"")+(e.cropRatio?"&cratio="+e.cropRatio:"")+(e.cropDim?"&cdim="+e.cropDim.join(","):"")+(e.cropMax?"&cmax="+e.cropMax.join(","):"")+(e.cropMin?"&cmin="+e.cropMin.join(","):"")+(void 0!==e.cropForce?"&cforce="+e.cropForce:"")+(void 0!==e.hide?"&hide="+e.hide:"")+(e.customCss?"&css="+encodeURIComponent(e.customCss):"")+(e.customText?"&text="+encodeURIComponent(e.customText):"")+(e.imageMin?"&imin="+e.imageMin.join(","):"")+(e.imageMax?"&imax="+e.imageMax.join(","):"")+(e.imageDim?"&idim="+e.imageDim.join(","):"")+(e.imageQuality?"&iq="+e.imageQuality:"")+(e.noFileReader?"&nfl="+e.noFileReader:"")+(t.util.isCanvasSupported()?"":"&canvas=false")+(e.redirectUrl?"&redirect_url="+e.redirectUrl:"")+(e.showClose&&"modal"!==e.container?"&showClose="+e.showClose:"")+u(e)+"&plugin="+d()}function u(t){return(t.signature?"&signature="+t.signature:"")+(t.policy?"&policy="+t.policy:"")}function d(){return filepicker.plugin||"js_lib"}function p(t){t=t||[];var e,n,r=[];for(e in t)for(n in c)t[e]===c[n]&&t.hasOwnProperty(e)&&r.push(t[e]);return r.length||r.push("crop"),"&co="+r.join(",")}return{BASE:e,DIALOG_BASE:n,API_COMM:e+"/dialog/comm_iframe/",COMM:n+"/dialog/comm_iframe/",FP_COMM_FALLBACK:n+"/dialog/comm_hash_iframe/",STORE:s,PICK:r,EXPORT:i,constructPickUrl:function(t,e,n){return r+l(t,e)+(n?"&multi="+!!n:"")+(void 0!==t.mimetypes?"&m="+t.mimetypes.join(","):"")+(void 0!==t.extensions?"&ext="+t.extensions.join(","):"")+(t.maxSize?"&maxSize="+t.maxSize:"")+(t.customSourceContainer?"&customSourceContainer="+t.customSourceContainer:"")+(t.customSourcePath?"&customSourcePath="+t.customSourcePath:"")+(t.maxFiles?"&maxFiles="+t.maxFiles:"")+(void 0!==t.folders?"&folders="+t.folders:"")+(t.storeLocation?"&storeLocation="+t.storeLocation:"")+(t.storePath?"&storePath="+t.storePath:"")+(t.storeContainer?"&storeContainer="+t.storeContainer:"")+(t.storeRegion?"&storeRegion="+t.storeRegion:"")+(t.storeAccess?"&storeAccess="+t.storeAccess:"")+(t.webcam&&t.webcam.webcamDim?"&wdim="+t.webcam.webcamDim.join(","):"")+(t.webcamDim?"&wdim="+t.webcamDim.join(","):"")+(t.webcam&&t.webcam.videoRes?"&videoRes="+t.webcam.videoRes:"")+(t.webcam&&t.webcam.videoLen?"&videoLen="+t.webcam.videoLen:"")+(t.webcam&&t.webcam.audioLen?"&audioLen="+t.webcam.audioLen:"")+p(t.conversions)},constructConvertUrl:function(t,e){var n=t.convertUrl;return(n.indexOf("&")>=0||n.indexOf("?")>=0)&&(n=encodeURIComponent(n)),o+l(t,e)+"&curl="+n+p(t.conversions)},constructPickFolderUrl:function(t,e){return a+l(t,e)},constructExportUrl:function(t,e,n){return(t.indexOf("&")>=0||t.indexOf("?")>=0)&&(t=encodeURIComponent(t)),i+l(e,n)+"&url="+t+(void 0!==e.mimetype?"&m="+e.mimetype:"")+(void 0!==e.extension?"&ext="+e.extension:"")+(e.suggestedFilename?"&defaultSaveasName="+e.suggestedFilename:"")},constructWriteUrl:function(t,e){return t+"?nonce=fp"+(e.base64decode?"&base64decode=true":"")+(e.mimetype?"&mimetype="+e.mimetype:"")+u(e)+"&plugin="+d()},constructStoreUrl:function(e){return s+e.location+"?key="+t.apikey+(e.base64decode?"&base64decode=true":"")+(e.mimetype?"&mimetype="+e.mimetype:"")+(e.filename?"&filename="+encodeURIComponent(e.filename):"")+(e.path?"&path="+e.path:"")+(e.container?"&container="+e.container:"")+(e.access?"&access="+e.access:"")+u(e)+"&plugin="+d()},constructHostCommFallback:function(){return t.util.parseUrl(window.location.href).origin+"/404"},getPlugin:d}})),filepicker.extend("ajax",(function(){var t=this,e=function(n,r){var i=[];for(var o in n){var a,s=n[o];switch(r&&(o=r+". + key + "),t.util.typeOf(s)){case"object":a=e(s,o);break;case"array":for(var c={},l=0;l<s.length;l++)c[l]=s[l];a=e(c,o);break;default:a=o+"="+encodeURIComponent(s)}null!==s&&i.push(a)}return i.join("&")},n=function(n,i){n=n||"";var o,a=i.method?i.method.toUpperCase():"POST",s=i.success||function(){},c=i.error||function(){},l=void 0===i.async||i.async,u=i.data||null,d=void 0===i.processData||i.processData,p=i.headers||{},f=t.util.parseUrl(n),_=window.location.protocol+"//"+window.location.host!==f.origin,h=!1;if(n+=(n.indexOf("?")>=0?"&":"?")+"plugin="+t.urls.getPlugin(),u&&d&&(u=e(i.data)),i.xhr)o=i.xhr;else if(!(o=function(){try{return new window.XMLHttpRequest}catch(t){try{return new window.ActiveXObject("Msxml2.XMLHTTP")}catch(t){try{return new window.ActiveXObject("Microsoft.XMLHTTP")}catch(t){return null}}}}()))return i.error("Ajax not allowed"),o;if(_&&window.XDomainRequest&&!("withCredentials"in o))return new r(n,i);i.progress&&o.upload&&o.upload.addEventListener("progress",(function(t){t.lengthComputable&&i.progress(Math.round(95*t.loaded/t.total))}),!1);o.onreadystatechange=function(){if(4==o.readyState&&!h)if(i.progress&&i.progress(100),o.status>=200&&o.status<300){var e=o.responseText;if(i.json)try{e=t.json.decode(e)}catch(t){return void m.call(o,"Invalid json: "+e)}s(e,o.status,o),h=!0}else m.call(o,o.responseText),h=!0};var m=function(t){if(!h)if(i.progress&&i.progress(100),h=!0,400!=this.status)if(403!=this.status){if(404!=this.status)return _?4==this.readyState&&0===this.status?void c("CORS_not_allowed",this.status,this):void c("CORS_error",this.status,this):void c(t,this.status,this);c("not_found",this.status,this)}else c("not_authorized",this.status,this);else c("bad_params",this.status,this)};o.onerror=m,u&&"GET"==a&&(n+=(-1!==n.indexOf("?")?"&":"?")+u,u=null),o.open(a,n,l),i.json?o.setRequestHeader("Accept","application/json, text/javascript"):o.setRequestHeader("Accept","text/javascript, text/html, application/xml, text/xml, */*");var g=p["Content-Type"]||p["content-type"];if(u&&d&&("POST"==a||"PUT"==a)&&void 0===g&&o.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=utf-8"),p)for(var v in p)o.setRequestHeader(v,p[v]);return o.send(u),o},r=function(n,r){if(!window.XDomainRequest)return null;var i=r.method?r.method.toUpperCase():"POST",o=r.success||function(){},a=r.error||function(){},s=r.data||{};if("http:"==window.location.protocol?n=n.replace("https:","http:"):"https:"==window.location.protocol&&(n=n.replace("http:","https:")),r.async)throw new t.FilepickerException("Asyncronous Cross-domain requests are not supported");"GET"!==i&&"POST"!==i&&(s._method=i,i="POST"),!1!==r.processData&&(s=s?e(s):null),s&&"GET"==i&&(n+=(n.indexOf("?")>=0?"&":"?")+s,s=null),n+=(n.indexOf("?")>=0?"&":"?")+"_xdr=true&_cacheBust="+t.util.getId();var c=new window.XDomainRequest;return c.onload=function(){var e=c.responseText;if(r.progress&&r.progress(100),r.json)try{e=t.json.decode(e)}catch(t){return void a("Invalid json: "+e,200,c)}o(e,200,c)},c.onerror=function(){r.progress&&r.progress(100),a(c.responseText||"CORS_error",this.status||500,this)},c.onprogress=function(){},c.ontimeout=function(){},c.timeout=3e4,c.open(i,n,!0),c.send(s),c};return{get:function(t,e){e.method="GET",n(t,e)},post:function(e,r){r.method="POST",e+=(e.indexOf("?")>=0?"&":"?")+"_cacheBust="+t.util.getId(),n(e,r)},request:n}})),filepicker.extend("files",(function(){var t=this,e=function(e,n,r,i,o){!0!==n.cache&&(n._cacheBust=t.util.getId()),t.ajax.get(e,{data:n,headers:{"X-NO-STREAM":!0},success:r,error:function(e,n,r){i("CORS_not_allowed"===e?new t.errors.FPError(113):"CORS_error"===e?new t.errors.FPError(114):"not_found"===e?new t.errors.FPError(115):"bad_params"===e?new t.errors.FPError(400):"not_authorized"===e?new t.errors.FPError(403):new t.errors.FPError(118))},progress:o})},n=function(e,n,i,o,a){t.util.setDefault(n,"location","S3");n.filename||(n.filename=e.name||e.fileName),r(e,t.urls.constructStoreUrl(n),(function(e){i(t.util.standardizeFPFile(e))}),(function(e,n,r){"not_found"===e?o(new t.errors.FPError(121)):"bad_params"===e?o(new t.errors.FPError(122)):"not_authorized"===e?o(new t.errors.FPError(403)):(t.util.console.error(e),o(new t.errors.FPError(123)))}),a)},r=function(e,n,r,i,o){if(e.files&&(e=e.files[0]),!!window.FormData&&!!window.XMLHttpRequest){var a=new window.FormData;a.append("fileUpload",e),t.ajax.post(n,{json:!0,processData:!1,data:a,success:r,error:i,progress:o})}else t.iframeAjax.post(n,{data:e,json:!0,success:r,error:i})};return{readFromUrl:e,readFromFile:function(e,n,r,i,o){if(!(window.File&&window.FileReader&&window.FileList&&window.Blob))return o(10),void t.files.storeFile(e,{},(function(e){o(50),t.files.readFromFPUrl(e.url,n,r,i,(function(t){o(50+t/2)}))}),i,(function(t){o(t/2)}));var a=!!n.base64encode,s=!!n.asText,c=new FileReader;c.onprogress=function(t){t.lengthComputable&&o(Math.round(t.loaded/t.total*100))},c.onload=function(e){o(100),r(a?t.base64.encode(e.target.result,s):e.target.result)},c.onerror=function(e){switch(e.target.error.code){case e.target.error.NOT_FOUND_ERR:i(new t.errors.FPError(115));break;case e.target.error.NOT_READABLE_ERR:i(new t.errors.FPError(116));break;case e.target.error.ABORT_ERR:i(new t.errors.FPError(117));break;default:i(new t.errors.FPError(118))}},s||!c.readAsBinaryString?c.readAsText(e):c.readAsBinaryString(e)},readFromFPUrl:function(n,r,i,o,a){var s=void 0===r.base64encode;s&&(r.base64encode=!0),r.base64encode=!1!==r.base64encode;e.call(this,n,r,(function(e){s&&(e=t.base64.decode(e,!!r.asText)),i(e)}),o,a)},writeDataToFPUrl:function(e,n,r,i,o,a){var s=r.mimetype||"text/plain";t.ajax.post(t.urls.constructWriteUrl(e,r),{headers:{"Content-Type":s},data:n,processData:!1,json:!0,success:function(e){i(t.util.standardizeFPFile(e))},error:function(e,n,r){o("not_found"===e?new t.errors.FPError(121):"bad_params"===e?new t.errors.FPError(122):"not_authorized"===e?new t.errors.FPError(403):new t.errors.FPError(123))},progress:a})},writeFileToFPUrl:function(e,n,i,o,a,s){i.mimetype=n.type,r(n,t.urls.constructWriteUrl(e,i),(function(e){o(t.util.standardizeFPFile(e))}),(function(e,n,r){a("not_found"===e?new t.errors.FPError(121):"bad_params"===e?new t.errors.FPError(122):"not_authorized"===e?new t.errors.FPError(403):new t.errors.FPError(123))}),s)},writeFileInputToFPUrl:function(e,n,i,o,a,s){r(n,t.urls.constructWriteUrl(e,i),(function(e){o(t.util.standardizeFPFile(e))}),(function(e,n,r){a("not_found"===e?new t.errors.FPError(121):"bad_params"===e?new t.errors.FPError(122):"not_authorized"===e?new t.errors.FPError(403):new t.errors.FPError(123))}),s)},writeUrlToFPUrl:function(e,n,r,i,o,a){t.ajax.post(t.urls.constructWriteUrl(e,r),{data:{url:n},json:!0,success:function(e){i(t.util.standardizeFPFile(e))},error:function(e,n,r){o("not_found"===e?new t.errors.FPError(121):"bad_params"===e?new t.errors.FPError(122):"not_authorized"===e?new t.errors.FPError(403):new t.errors.FPError(123))},progress:a})},storeFileInput:function(e,r,i,o,a){if(e.files)0===e.files.length?o(new t.errors.FPError(115)):n(e.files[0],r,i,o,a);else{t.util.setDefault(r,"location","S3"),r.filename||(r.filename=e.value.replace("C:\\fakepath\\","")||e.name);var s=e.name;e.name="fileUpload",t.iframeAjax.post(t.urls.constructStoreUrl(r),{data:e,processData:!1,json:!0,success:function(n){e.name=s,i(t.util.standardizeFPFile(n))},error:function(e,n,r){o("not_found"===e?new t.errors.FPError(121):"bad_params"===e?new t.errors.FPError(122):"not_authorized"===e?new t.errors.FPError(403):new t.errors.FPError(123))}})}},storeFile:n,storeUrl:function(e,n,r,i,o){t.util.setDefault(n,"location","S3"),t.ajax.post(t.urls.constructStoreUrl(n),{data:{url:t.util.getFPUrl(e)},json:!0,success:function(e){r(t.util.standardizeFPFile(e))},error:function(e,n,r){i("not_found"===e?new t.errors.FPError(151):"bad_params"===e?new t.errors.FPError(152):"not_authorized"===e?new t.errors.FPError(403):new t.errors.FPError(153))},progress:o})},storeData:function(e,n,r,i,o){t.util.setDefault(n,"location","S3"),t.util.setDefault(n,"mimetype","text/plain"),t.ajax.post(t.urls.constructStoreUrl(n),{headers:{"Content-Type":n.mimetype},data:e,processData:!1,json:!0,success:function(e){r(t.util.standardizeFPFile(e))},error:function(e,n,r){i("not_found"===e?new t.errors.FPError(121):"bad_params"===e?new t.errors.FPError(122):"not_authorized"===e?new t.errors.FPError(403):new t.errors.FPError(123))},progress:o})},stat:function(e,n,r,i){var o=["uploaded","modified","created"];!0!==n.cache&&(n._cacheBust=t.util.getId()),t.ajax.get(e+"/metadata",{json:!0,data:n,success:function(t){for(var e=0;e<o.length;e++)t[o[e]]&&(t[o[e]]=new Date(t[o[e]]));r(t)},error:function(e,n,r){i("not_found"===e?new t.errors.FPError(161):"bad_params"===e?new t.errors.FPError(400):"not_authorized"===e?new t.errors.FPError(403):new t.errors.FPError(162))}})},remove:function(e,n,r,i){n.key=t.apikey,t.ajax.post(e+"/remove",{data:n,success:function(t){r()},error:function(e,n,r){i("not_found"===e?new t.errors.FPError(171):"bad_params"===e?new t.errors.FPError(400):"not_authorized"===e?new t.errors.FPError(403):new t.errors.FPError(172))}})}}})),filepicker.extend("iframeAjax",(function(){var t=this,e="ajax_iframe",n=[],r=!1,i=function(i,s){if(r)n.push({url:i,options:s});else{var c;i+=(i.indexOf("?")>=0?"&":"?")+"plugin="+t.urls.getPlugin()+"&_cacheBust="+t.util.getId(),i+="&Content-Type=text%2Fhtml",t.comm.openChannel();try{c=document.createElement('<iframe name="ajax_iframe">')}catch(t){c=document.createElement("iframe")}c.id=c.name=e,c.style.display="none";var l=function(){r=!1};c.attachEvent?(c.attachEvent("onload",l),c.attachEvent("onerror",l)):c.onerror=c.onload=l,c.id=e,c.name=e,c.style.display="none",c.onerror=c.onload=function(){r=!1},document.body.appendChild(c),t.handlers.attach("upload",o(s));var u=document.createElement("form");u.method=s.method||"GET",u.action=i,u.target=e;var d,p=s.data;if((t.util.isFileInputElement(p)||t.util.isFile(p))&&(u.encoding=u.enctype="multipart/form-data"),document.body.appendChild(u),t.util.isFile(p)){var f=a(p);if(!f)throw t.FilepickerException("Couldn't find corresponding file input.");p={fileUpload:f}}else t.util.isFileInputElement(p)?(d=p,(p={}).fileUpload=d):p&&t.util.isElement(p)&&"INPUT"===p.tagName?(d=p,(p={})[d.name]=d):!1!==s.processData&&(p={data:p});p.format="iframe";var _={};for(var h in p){var m=p[h];if(t.util.isElement(m)&&"INPUT"===m.tagName)_[h]={par:m.parentNode,sib:m.nextSibling,name:m.name,input:m,focused:m===document.activeElement},m.name=h,u.appendChild(m);else{var g=document.createElement("input");g.name=h,g.value=m,u.appendChild(g)}}r=!0,window.setTimeout((function(){for(var t in u.submit(),_){var e=_[t];e.par.insertBefore(e.input,e.sib),e.input.name=e.name,e.focused&&e.input.focus()}u.parentNode.removeChild(u)}),1)}},o=function(e){var o=e.success||function(){},a=e.error||function(){};return function(e){if("Upload"===e.type){r=!1;var s=e.payload;s.error?a(s.error):o(s),t.handlers.detach("upload"),function(){if(n.length>0){var t=n.shift();i(t.url,t.options)}}()}}},a=function(t){for(var e=document.getElementsByTagName("input"),n=0;n<e.length;n++){var r=e[0];if("file"===r.type&&r.files&&r.files.length)for(var i=0;i<r.files.length;i++)if(r.files[i]===t)return r}return null};return{get:function(t,e){e.method="GET",i(t,e)},post:function(e,n){n.method="POST",e+=(e.indexOf("?")>=0?"&":"?")+"_cacheBust="+t.util.getId(),i(e,n)},request:i}})),filepicker.extend("base64",(function(){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",e=function(t){t=t.replace(/\r\n/g,"\n");for(var e="",n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e+=String.fromCharCode(r):r>127&&r<2048?(e+=String.fromCharCode(r>>6|192),e+=String.fromCharCode(63&r|128)):(e+=String.fromCharCode(r>>12|224),e+=String.fromCharCode(r>>6&63|128),e+=String.fromCharCode(63&r|128))}return e},n=function(t){for(var e="",n=0,r=0,i=0;n<t.length;)(r=t.charCodeAt(n))<128?(e+=String.fromCharCode(r),n++):r>191&&r<224?(i=t.charCodeAt(n+1),e+=String.fromCharCode((31&r)<<6|63&i),n+=2):(i=t.charCodeAt(n+1),c3=t.charCodeAt(n+2),e+=String.fromCharCode((15&r)<<12|(63&i)<<6|63&c3),n+=3);return e};return{encode:function(n,r){var i,o,a,s,c,l,u,d="",p=0;for((r=r||void 0===r)&&(n=e(n));p<n.length;)i=n.charCodeAt(p),o=n.charCodeAt(p+1),a=n.charCodeAt(p+2),p+=3,s=i>>2,c=(3&i)<<4|o>>4,l=(15&o)<<2|a>>6,u=63&a,isNaN(o)?l=u=64:isNaN(a)&&(u=64),d=d+t.charAt(s)+t.charAt(c)+t.charAt(l)+t.charAt(u);return d},decode:function(e,r){r=r||void 0===r;var i,o,a,s,c,l,u,d="",p=0;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");p<e.length;)s=t.indexOf(e.charAt(p)),c=t.indexOf(e.charAt(p+1)),l=t.indexOf(e.charAt(p+2)),u=t.indexOf(e.charAt(p+3)),p+=4,i=s<<2|c>>4,o=(15&c)<<4|l>>2,a=(3&l)<<6|u,d+=String.fromCharCode(i),64!=l&&(d+=String.fromCharCode(o)),64!=u&&(d+=String.fromCharCode(a));return r&&(d=n(d)),d}}}),!0),filepicker.extend("browser",(function(){var t=function(){return!!(navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/iPad/i))},e=function(){return!!navigator.userAgent.match(/Android/i)};return{getLanguage:function(){var t=window.navigator.userLanguage||window.navigator.language;return void 0===t&&(t="en"),t=t.replace("-","_").toLowerCase()},openInModal:function(){return!(t()||e())||!!window.navigator.standalone},isMobile:function(){return t()||e()}}})),filepicker.extend("conversionsUtil",(function(){var t=this,e=t.urls.BASE.replace("www","process")+"/";return{CONVERSION_DOMAIN:e,parseUrl:function(t){if(!t)return{url:null,optionsDict:{}};var n,r,i,o,a,s=(t=t.replace(e,"")).substring(t.indexOf("/http")+1),c=(t=t.replace("/"+s,"")).substring(0,t.indexOf("/")),l=(t=t.replace(c+"/","")).split("/"),u={};for(o in l)if((n=l[o].split("=")).length>1)for(a in u[n[0]]={},r=n[1].split(","))(i=r[a].split(":")).length>1&&(u[n[0]][i[0]]=i[1]);else l[o]&&(u[l[o]]=null);return{url:s,apikey:c,optionsDict:u}},buildUrl:function(n,r,i){var o,a,s,c=e+i;for(o in r=r||{})for(a in c+="/"+o,(s=t.util.objectKeys(r[o]||{}).length)&&(c+="="),r[o])c+=a+":"+r[o][a],0!=--s&&(c+=",");return c+="/"+n}}})),filepicker.extend("json",(function(){var fp=this,special={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},escape=function(t){return special[t]||"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)},validate=function(t){return t=t.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""),/^[\],:{}\s]*$/.test(t)},encode=function(t){if(window.JSON&&window.JSON.stringify)return window.JSON.stringify(t);t&&t.toJSON&&(t=t.toJSON());var e=[];switch(fp.util.typeOf(t)){case"string":return'"'+t.replace(/[\x00-\x1f\\"]/g,escape)+'"';case"array":for(var n=0;n<t.length;n++)e.push(encode(t[n]));return"["+e+"]";case"object":case"hash":var r,i;for(i in t)(r=encode(t[i]))&&e.push(encode(i)+":"+r),r=null;return"{"+e+"}";case"number":case"boolean":return""+t;default:return"null"}return null},decode=function(string,secure){if(!string||"string"!==fp.util.typeOf(string))return null;if(window.JSON&&window.JSON.parse)return window.JSON.parse(string);if(secure&&!validate(string))throw new Error("JSON could not decode the input; security is enabled and the value is not secure.");return eval("("+string+")")};return{validate:validate,encode:encode,stringify:encode,decode:decode,parse:decode}})),filepicker.extend("util",(function(){var t=/^(http|https)\:.*\/\//i;return{trim:function(t){return t.replace(/^\s+|\s+$/g,"")},trimConvert:function(t){return t.replace(/\/convert\b.*/,"")},parseUrl:function(t){t&&"/"!==t.charAt(0)||(t=window.location.protocol+"//"+window.location.host+t);var e=document.createElement("a");e.href=t;var n=-1===e.hostname.indexOf(":")?e.hostname:e.host,r={source:t,protocol:e.protocol.replace(":",""),host:n,port:e.port,query:e.search,params:function(){for(var t,n={},r=e.search.replace(/^\?/,"").split("&"),i=r.length,o=0;o<i;o++)r[o]&&(n[(t=r[o].split("="))[0]]=t[1]);return n}(),file:(e.pathname.match(/\/([^\/?#]+)$/i)||[void 0,""])[1],hash:e.hash.replace("#",""),path:e.pathname.replace(/^([^\/])/,"/$1"),relative:(e.href.match(/tps?:\/\/[^\/]+(.+)/)||[void 0,""])[1],segments:e.pathname.replace(/^\//,"").split("/")};return r.origin=r.protocol+"://"+r.host+(r.port?":"+r.port:""),r.rawUrl=(r.origin+r.path).replace("/convert",""),r},isUrl:function(e){return!!e.match(t)},endsWith:function(t,e){return-1!==t.indexOf(e,t.length-e.length)},appendQueryToUrl:function(t,e,n){return t+(t.indexOf("?")>=0?"&":"?")+e+"="+n}}})),filepicker.extend("util",(function(){var t=this,e=function(t){return t&&"[object Array]"===Object.prototype.toString.call(t)},n=function(t){return t&&"[object File]"===Object.prototype.toString.call(t)},r=function(t){return"object"==typeof window.HTMLElement?t instanceof window.HTMLElement:t&&"object"==typeof t&&1===t.nodeType&&"string"==typeof t.nodeName},i=function(t){return function(){if(window.console&&"function"==typeof window.console[t])try{window.console[t].apply(window.console,arguments)}catch(t){window.alert(Array.prototype.join.call(arguments,","))}}},o={};o.log=i("log"),o.error=i("error");return{isArray:e,isFile:n,isElement:r,isFileInputElement:function(t){return r(t)&&"INPUT"===t.tagName&&"file"===t.type},getId:function(){return(new Date).getTime().toString()},setDefault:function(t,e,n){void 0===t[e]&&(t[e]=n)},typeOf:function(t){return null===t?"null":e(t)?"array":n(t)?"file":typeof t},addOnLoad:function(t){if(window.jQuery)window.jQuery((function(){t()}));else{var e="load";if(window.addEventListener)window.addEventListener(e,t,!1);else if(window.attachEvent)window.attachEvent("onload",t);else if(window.onload){var n=window.onload;window.onload=function(){n(),t()}}else window.onload=t}},isFPUrl:function(e){return"string"==typeof e&&e.match(t.urls.BASE+"/api/file/")},getFPUrl:function(e){if("string"==typeof e){var n=e.match(/(?:cdn.filestackcontent.com|cdn.filepicker.io)[\S]*\/([\S]{20,})/);if(n&&n.length>1)return t.urls.BASE+"/api/file/"+n[1]}return e},isFPUrlCdn:function(t){return"string"==typeof t&&t.match("/api/file/")},console:o,clone:function(t){var e={};for(var n in t)e[n]=t[n];return e},standardizeFPFile:function(t){var e={};return e.url=t.url,e.filename=t.filename||t.name,e.mimetype=t.mimetype||t.type,e.size=t.size,e.key=t.key||t.s3_key,e.isWriteable=!(!t.isWriteable&&!t.writeable),e},isCanvasSupported:function(){try{var t=document.createElement("canvas");return!(!t.getContext||!t.getContext("2d"))}catch(t){return!1}},extend:function(t,e){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},checkApiKey:function(){if(!t.apikey)throw new t.FilepickerException("API Key not found")},objectKeys:function(t){return"function"!=typeof Object.keys?function(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(n);return e}:Object.keys(t)}}})),filepicker.extend("windowUtils",(function(){return{getWidth:function(){return document.documentElement.clientWidth||document.body&&document.body.clientWidth||1024},getHeight:function(){return document.documentElement.clientHeight||document.body&&document.body.clientHeight||768}}})),filepicker.extend("dragdrop",(function(){var t=this,e=function(){return(!!window.FileReader||navigator.userAgent.indexOf("Safari")>=0)&&"draggable"in document.createElement("span")};return{enabled:e,makeDropPane:function(n,r){var i="No DOM element found to create drop pane";if(!n)throw new t.FilepickerException(i);if(n.jquery){if(0===n.length)throw new t.FilepickerException(i);n=n[0]}if(!e())return t.util.console.error("Your browser doesn't support drag-drop functionality"),!1;var o=(r=r||{}).dragEnter||function(){},a=r.dragLeave||function(){},s=r.onStart||function(){},c=r.onSuccess||function(){},l=r.onError||function(){},u=r.onProgress||function(){},d=r.mimetypes;d||(d=r.mimetype?[r.mimetype]:["*/*"]),"string"===t.util.typeOf(d)&&(d=d.split(","));var p=r.extensions;if(p||r.extension&&(p=[r.extension]),"string"===t.util.typeOf(p)&&(p=p.replace(/ /g,"").split(",")),p)for(var f=0;f<p.length;f++)p[f]=p[f].toLowerCase();var _={location:r.location,path:r.path,container:r.container,access:r.access,policy:r.policy,signature:r.signature},h=function(){return n&&"disabled"!==(n.getAttribute("disabled")||"enabled")};n.addEventListener("dragenter",(function(t){return h()&&o(),t.stopPropagation(),t.preventDefault(),!1}),!1),n.addEventListener("dragleave",(function(t){return h()&&a(),t.stopPropagation(),t.preventDefault(),!1}),!1),n.addEventListener("dragover",(function(t){return t.dataTransfer.dropEffect="copy",t.preventDefault(),!1}),!1),n.addEventListener("drop",(function(e){if(e.stopPropagation(),e.preventDefault(),!h())return!1;if(function(t){var e,n,r;if(t.dataTransfer.items)for(n=t.dataTransfer.items,r=0;r<n.length;r++)if((e=n[r]&&n[r].webkitGetAsEntry?n[r].webkitGetAsEntry():void 0)&&e.isDirectory)return l("WrongType","Uploading a folder is not allowed"),!0;return!1}(e))return!1;var r=e.dataTransfer.files,i=k(e.dataTransfer);return r.length?function(e){var r,i=e.length;if(x(e))for(s(e),n.setAttribute("disabled","disabled"),r=0;r<e.length;r++)t.store(e[r],_,b(r,i),y,w(r,i))}(r):i?function(e){var n=w(0,1);t.storeUrl(e,C,y,n)}(i):l("NoFilesFound","No files uploaded"),!1}));var m=function(){n.setAttribute("disabled","enabled"),window.$&&window.$(n).prop("disabled",!1)},g={},v=[],b=function(t,e){return function(n){r.multiple?(v.push(n),v.length===e?(c(v),v=[],g={}):(g[t]=100,$(e))):c([n]),m()}},y=function(t){l("UploadError",t.toString()),m()},w=function(t,e){return function(n){g[t]=n,$(e)}},$=function(t){var e=0;for(var n in g)e+=g[n];u(e/t)},x=function(e){if(e.length>0){if(e.length>1&&!r.multiple)return l("TooManyFiles","Only one file at a time"),!1;if(r.maxFiles>0&&e.length>r.maxFiles)return l("TooManyFiles","Only "+r.maxFiles+" files at a time"),!1;for(var n,i,o,a=0;a<e.length;a++){n=!1,o=(i=e[a]).name||i.fileName||"Unknown file";for(var s=0;s<d.length;s++){var c=t.mimetypes.getMimetype(i);n=n||t.mimetypes.matchesMimetype(c,d[s])}if(!n)return l("WrongType",o+" isn't the right type of file"),!1;if(p){for(n=!1,s=0;s<p.length;s++)n=n||t.util.endsWith(o,p[s]);if(!n)return l("WrongType",o+" isn't the right type of file"),!1}if(i.size&&r.maxSize&&i.size>r.maxSize)return l("WrongSize",o+" is too large ("+i.size+" Bytes)"),!1}return!0}return l("NoFilesFound","No files uploaded"),!1},k=function(e){var n,r;if(e&&"function"==typeof e.getData){n=e.getData("text");try{n=n||e.getData("text/html")}catch(e){t.util.console.error(e)}n&&!t.util.isUrl(n)&&(r=n.match(/<img.*?src="(.*?)"/i),n=r&&r.length>1?r[1]:null)}return n};return!0;function C(e){var n=b(0,1),r=t.util.clone(e);r.name=r.filename,x([r])?n(e):t.files.remove(e.url,_,(function(){}),(function(){}))}}}})),filepicker.extend("responsiveImages",(function(){var t,e,n,r=this,i=(t=function(){o()},e=200,function(){var r=this,i=arguments,o=function(){n=null,t.apply(r,i)};clearTimeout(n),n=setTimeout(o,e)});return{activate:function(){o(),h(i)},deactivate:function(){m(i)},update:function(t){if(void 0!==t){if("IMG"!==t.nodeName)throw new r.FilepickerException("Passed object is not an image");f(t)}else o(!0)},setResponsiveOptions:function(t){if("object"!=typeof(t=t||{}))throw new r.FilepickerException("Responsive options must be an object.");r.responsiveOptions=t},getResponsiveOptions:g,getElementDims:s,replaceSrc:c,getCurrentResizeParams:p,construct:f,constructParams:_,shouldConstruct:a,roundWithStep:v,addWindowResizeEvent:h,removeWindowResizeEvent:m};function o(t){var e,n,r=document.querySelectorAll("img[data-fp-src]");for(n=0;n<r.length;n++)(a(e=r[n])||!0===t)&&f(e)}function a(t){var e=l(t),n=t.getAttribute("data-fp-on-resize")||g().onResize||"all";if(!e||"all"===n)return!0;if("none"===n)return!1;var r=p(e).width<s(t).width;return!!(r&&"up"===n||!r&&"down"===n)}function s(t){var e={};return null===t.parentNode?(e.width=r.windowUtils.getWidth(),e.height=r.windowUtils.getWidth(),e):t.alt&&!t.fpAltCheck?(t.parentNode.fpAltCheck=!0,s(t.parentNode)):(e.width=t.offsetWidth,e.height=t.offsetHeight,e.width?e:s(t.parentNode))}function c(t,e){var n=l(t)||u(t);n!==e&&(t.src=e,n&&(t.onerror=function(){t.src=n,t.onerror=null}))}function l(t){return t.getAttribute("src")}function u(t){return t.getAttribute("data-fp-src")}function d(t){return t.getAttribute("data-fp-policy")}function p(t){return r.conversionsUtil.parseUrl(t).optionsDict.resize||{}}function f(t){var e=u(t)||l(t),n=function(t){return t.getAttribute("data-fp-apikey")}(t)||r.apikey,i=g();r.apikey||(r.setKey(n),r.util.checkApiKey()),c(t,r.conversionsUtil.buildUrl(e,_(t,i),n))}function _(t,e){e=e||{};var n=s(t),r=function(t){return t.getAttribute("data-fp-pixel-round")}(t)||e.pixelRound||10,i={resize:{width:v(n.width,r)}},o=e.signature||function(t){return t.getAttribute("data-fp-signature")}(t);return o&&(i.security={signature:o,policy:e.policy||d(t)}),i}function h(t){window.addEventListener?window.addEventListener("resize",t,!1):window.attachEvent&&window.attachEvent("onresize",t)}function m(t){window.removeEventListener?window.removeEventListener("resize",t,!1):window.detachEvent&&window.detachEvent("onresize",t)}function g(){return r.responsiveOptions||{}}function v(t,e){var n=0===e?1:e;return Math.ceil(t/n)*n}})),filepicker.extend("widgets",(function(){var t=this,e=function(t,e,n,r){var i=r.getAttribute(n);i&&(e[t]=i)},n=function(t,e){var n;document.createEvent?((n=document.createEvent("Event")).initEvent("change",!0,!1),n.fpfile=e?e[0]:void 0,n.fpfiles=e,t.dispatchEvent(n)):document.createEventObject?((n=document.createEventObject("Event")).eventPhase=2,n.currentTarget=n.srcElement=n.target=t,n.fpfile=e?e[0]:void 0,n.fpfiles=e,t.fireEvent("onchange",n)):t.onchange&&t.onchange(e)},r=function(t,e){e[t]&&(e[t]=e[t].split(","))},i=function(t,n,r){for(var i in r)e(r[i],t,i,n)},o=function(n,o){o=o||"pick";var a={};i(a,n,{"data-fp-container":"container","data-fp-mimetype":"mimetype","data-fp-extension":"extension","data-fp-openTo":"openTo","data-fp-debug":"debug","data-fp-signature":"signature","data-fp-policy":"policy","data-fp-language":"language","data-fp-background-upload":"backgroundUpload","data-fp-hide":"hide","data-fp-custom-css":"customCss","data-fp-crop-force":"cropForce","data-fp-crop-ratio":"cropRatio","data-fp-crop-dim":"cropDim","data-fp-crop-max":"cropMax","data-fp-crop-min":"cropMin","data-fp-show-close":"showClose","data-fp-conversions":"conversions","data-fp-custom-text":"customText","data-fp-custom-source-container":"customSourceContainer","data-fp-custom-source-path":"customSourcePath"}),"export"===o?e("suggestedFilename",a,"data-fp-suggestedFilename",n):"pick"===o&&(i(a,n,{"data-fp-mimetypes":"mimetypes","data-fp-extensions":"extensions","data-fp-maxSize":"maxSize","data-fp-maxFiles":"maxFiles","data-fp-store-location":"storeLocation","data-fp-store-path":"storePath","data-fp-store-container":"storeContainer","data-fp-store-region":"storeRegion","data-fp-store-access":"storeAccess","data-fp-image-quality":"imageQuality","data-fp-image-dim":"imageDim","data-fp-image-max":"imageMax","data-fp-image-min":"imageMin"}),a.webcam={},i(a.webcam,n,{"data-fp-video-recording-resolution":"videoRes","data-fp-webcam-dim":"webcamDim","data-fp-video-length":"videoLen","data-fp-audio-length":"audioLen"}));var s=n.getAttribute("data-fp-services");if(s){s=s.split(",");for(var c=0;c<s.length;c++)s[c]=t.services[s[c].replace(" ","")]||s[c];a.services=s}var l=n.getAttribute("data-fp-service");l&&(a.service=t.services[l.replace(" ","")]||l);var u=["extensions","mimetypes","imageDim","imageMin","imageMax","cropDim","cropMax","cropMin","webcamDim","conversions"];for(var d in u)r(u[d],a);var p=n.getAttribute("data-fp-apikey");return p&&t.setKey(p),a.folders="true"===n.getAttribute("data-fp-folders"),a},a=function(t){return"true"===t.getAttribute("data-fp-multiple")},s=function(e){var r=document.createElement("button");r.setAttribute("type","button"),r.innerHTML=e.getAttribute("data-fp-button-text")||"Pick File",r.className=e.getAttribute("data-fp-button-class")||e.className||"fp__btn",e.style.display="none";var i=o(e);a(e)?r.onclick=function(){return r.blur(),t.pickMultiple(i,(function(t){for(var r=[],i=0;i<t.length;i++)r.push(t[i].url);e.value=r.join(),n(e,t)})),!1}:r.onclick=function(){return r.blur(),t.pick(i,(function(t){e.value=t.url,n(e,[t])})),!1},e.parentNode.insertBefore(r,e.nextSibling)},c=function(e){var r=e.getAttribute("data-fp-url");if(!r)return!0;var i=document.createElement("button");i.setAttribute("type","button"),i.innerHTML=e.getAttribute("data-fp-button-text")||"Convert File",i.className=e.getAttribute("data-fp-button-class")||e.className||"fp__btn",e.style.display="none";var a=o(e,"convert");i.onclick=function(){return i.blur(),t.processImage(r,a,(function(t){e.value=t.url,n(e,[t])})),!1},e.parentNode.insertBefore(i,e.nextSibling)},l=function(e){var r=document.createElement("div");r.className=e.getAttribute("data-fp-class")||e.className,r.style.padding="1px",e.style.display="none",e.parentNode.insertBefore(r,e.nextSibling);var i=document.createElement("button");i.setAttribute("type","button"),i.innerHTML=e.getAttribute("data-fp-button-text")||"Pick File",i.className=e.getAttribute("data-fp-button-class")||"fp__btn",r.appendChild(i);var s=document.createElement("div");d(s),s.innerHTML=e.getAttribute("data-fp-drag-text")||"Or drop files here",s.className=e.getAttribute("data-fp-drag-class")||"",r.appendChild(s);var c=o(e),l=a(e);t.dragdrop.enabled()?p(s,l,c,e):s.innerHTML="&nbsp;",s.onclick=i.onclick=l?function(){return i.blur(),t.pickMultiple(c,(function(t){for(var r=[],i=[],o=0;o<t.length;o++)r.push(t[o].url),i.push(t[o].filename);e.value=r.join(),u(e,s,i.join(", ")),n(e,t)})),!1}:function(){return i.blur(),t.pick(c,(function(t){e.value=t.url,u(e,s,t.filename),n(e,[t])})),!1}},u=function(e,r,i){r.innerHTML=i,r.style.padding="2px 4px",r.style.cursor="default",r.style.width="";var o=document.createElement("span");o.innerHTML="X",o.style.borderRadius="8px",o.style.fontSize="14px",o.style.cssFloat="right",o.style.padding="0 3px",o.style.color="#600",o.style.cursor="pointer";var a=function(i){return i||(i=window.event),i.cancelBubble=!0,i.stopPropagation&&i.stopPropagation(),d(r),t.dragdrop.enabled?r.innerHTML=e.getAttribute("data-fp-drag-text")||"Or drop files here":r.innerHTML="&nbsp;",e.value="",n(e),!1};o.addEventListener?o.addEventListener("click",a,!1):o.attachEvent&&o.attachEvent("onclick",a),r.appendChild(o)},d=function(t){t.style.border="1px dashed #AAA",t.style.display="inline-block",t.style.margin="0 0 0 4px",t.style.borderRadius="3px",t.style.backgroundColor="#F3F3F3",t.style.color="#333",t.style.fontSize="14px",t.style.lineHeight="22px",t.style.padding="2px 4px",t.style.verticalAlign="middle",t.style.cursor="pointer",t.style.overflow="hidden"},p=function(e,r,i,o){var a,s=e.innerHTML;t.dragdrop.makeDropPane(e,{multiple:r,maxSize:i.maxSize,mimetypes:i.mimetypes,mimetype:i.mimetype,extensions:i.extensions,extension:i.extension,location:i.storeLocation,path:i.storePath,container:i.storeContainer,region:i.storeRegion,access:i.storeAccess,policy:i.policy,signature:i.signature,dragEnter:function(){e.innerHTML="Drop to upload",e.style.backgroundColor="#E0E0E0",e.style.border="1px solid #000"},dragLeave:function(){e.innerHTML=s,e.style.backgroundColor="#F3F3F3",e.style.border="1px dashed #AAA"},onError:function(t,n){"TooManyFiles"===t||"WrongType"===t||"NoFilesFound"===t?e.innerHTML=n:"UploadError"===t&&(e.innerHTML="Oops! Had trouble uploading.")},onStart:function(t){a=f(e)},onProgress:function(t){a&&(a.style.width=t+"%")},onSuccess:function(t){for(var r=[],i=[],a=0;a<t.length;a++)r.push(t[a].url),i.push(t[a].filename);o.value=r.join(),u(o,e,i.join(", ")),n(o,t)}})},f=function(t){var e=document.createElement("div"),n=t.offsetHeight-2;return e.style.height=n+"px",e.style.backgroundColor="#0E90D2",e.style.width="2%",e.style.borderRadius="3px",t.style.width=t.offsetWidth+"px",t.style.padding="0",t.style.border="1px solid #AAA",t.style.backgroundColor="#F3F3F3",t.style.boxShadow="inset 0 1px 2px rgba(0, 0, 0, 0.1)",t.innerHTML="",t.appendChild(e),e},_=function(e){e.onclick=function(){var n=e.getAttribute("data-fp-url");if(!n)return!0;var r=o(e,"export");return t.exportFile(n,r),!1}},h=function(e){var n=e.getAttribute("data-fp-url"),r=e.getAttribute("data-fp-custom-css");if(!(n=t.util.getFPUrl(n))||!t.util.isFPUrl(n))return!0;n=n.replace("api/file/","api/preview/");var i=document.createElement("iframe");r&&(n=t.util.appendQueryToUrl(n,"css",r)),i.src=n,i.width="100%",i.height="100%",e.appendChild(i)};return{constructPickWidget:s,constructDragWidget:l,constructExportWidget:_,buildWidgets:function(){if(document.querySelectorAll){var t,e=document.querySelectorAll('input[type="filepicker"]');for(t=0;t<e.length;t++)s(e[t]);var n=document.querySelectorAll('input[type="filepicker-dragdrop"]');for(t=0;t<n.length;t++)l(n[t]);var r=document.querySelectorAll('input[type="filepicker-convert"]');for(t=0;t<r.length;t++)c(r[t]);var i=[],o=document.querySelectorAll("button[data-fp-url]");for(t=0;t<o.length;t++)i.push(o[t]);for(o=document.querySelectorAll("a[data-fp-url]"),t=0;t<o.length;t++)i.push(o[t]);for(o=document.querySelectorAll('input[type="button"][data-fp-url]'),t=0;t<o.length;t++)i.push(o[t]);for(t=0;t<i.length;t++)_(i[t]);var a=document.querySelectorAll('[type="filepicker-preview"][data-fp-url]');for(t=0;t<a.length;t++)h(a[t]);!function(){try{var t='.fp__btn{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:inline-block;height:34px;padding:4px 30px 5px 40px;position:relative;margin-bottom:0;vertical-align:middle;-ms-touch-action:manipulation;touch-action:manipulation;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;font-family:"Open Sans", sans-serif;font-size:12px;font-weight:600;line-height:1.42857143;color:#fff;text-align:center;white-space:nowrap;background:#ef4925;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAAVCAYAAABLy77vAAAABGdBTUEAALGPC/xhBQAAAJRJREFUOBHNUcEWgCAIy14fbl9egK5MRarHQS7ocANmOCgWh1gdNERig1CgwPlLxkZuE80ndHlU+4Lda1zz0m01dSKtcz0h7qpQb7WR+HyrqRPxahzwwMqqkEVs6qnv+86NQAbcJlK/X+vMeMe7XcBOYaRzcbItUR7/8QgcykmElQrQPErnmxNxl2yyiwcgEvQUocIJaE6yERwqXDIAAAAASUVORK5CYII=");background-repeat:no-repeat;background-position:15px 6px;border:1px solid transparent;border-radius:17px}.fp__btn:hover{background-color:#d64533}.fp__btn::after{position:absolute;content:"";top:15px;right:14px;width:7px;height:4px;background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAAICAYAAAA1BOUGAAAABGdBTUEAALGPC/xhBQAAAGlJREFUCB1j/P//vw4DA4MiEKOD+0xAkatA/AJNBsS/ysTIyPgfyDgHxO+hCkD0Oag4RAhoPDsQm4NoqCIGBiBnAhBjAxNAkkxAvBZNFsQHuQesmxPIOQZVAKI54UZDFYgABbcBsQhMAgDIVGYSqZsn6wAAAABJRU5ErkJggg==");}.fp__btn:hover::after{background-position:0 -4px;}.fp__btn:active,.fp__btn:focus{outline:none}@media only screen and (min--moz-device-pixel-ratio: 2), only screen and (-o-min-device-pixel-ratio: 2 / 1), only screen and (-webkit-min-device-pixel-ratio: 2), only screen and (min-device-pixel-ratio: 2){.fp__btn{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAqCAYAAADbCvnoAAAABGdBTUEAALGPC/xhBQAAAQFJREFUWAntWEESwjAIbBwfHl+upNoRNjKUJhk5kIvZQGG7bHOwPGltgdYtEJedShKyJnLHhEILz1Zi9HCOzFI7FUqFLAWseDgPdfeQ9QZ4b1j53nstnEJJyBqx20NeT1gEMB5uZG6Fzn5lV5UMp1ASQhMjdnvoqjewsYbDjcytEH5lsxULp1AS0sx8nJfVnjganf3NkVlKhVPIfQ9Zb6jF0atK3mNriXwpicPHvIeyr3sTDA53VgpgH8BvMu1ZCCz7ew/7MPwlE4CQJPNnQj2ZX4SYlEPbVpsvKFZ5TOwhcRoUTQiwwhVjArPEqVvRhMCneMXzDk9lwYphIwrZZOihF32oehMAa1qSAAAAAElFTkSuQmCC");background-size:18px 21px}.fp__btn::after{background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAQCAYAAAAmlE46AAAABGdBTUEAALGPC/xhBQAAANpJREFUKBWVkU8KglAYxJ/u3HuBwmUX8BqepKN4ka4RguDOVYu2QVCrhIJ6/caekqLiGxi+PzPD58PAWrszxmygD84h7hpePFLy1mEQBJamgvcVYXkqZXTR0LwpJWw0z0Ba6bymDcrI4kkp4EvzCNoVztNKfVATwoOiyx/NDup1SVqPQVBbDDeK3txBb9JuHfhNW3HWjZhDX+SGRAgPHkl5f0+kieBxRVieaPD5LGJ4WghLiwehbkBI4HUirF3S+SYrhhQ2f2H16aR5vMSYwbdjNtYXZ0J7cc70BXnFMHIGznzEAAAAAElFTkSuQmCC");background-size:7px 8px;}}',e=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t)),e.appendChild(n)}catch(t){}}()}},constructWidget:function(e){e.jquery&&(e=e[0]);var n=e.getAttribute("type");"filepicker"===n?s(e):"filepicker-dragdrop"===n?l(e):"filepicker-preview"===n?h(e):e.getAttribute("data-fp-src")?t.responsiveImages.construct(e):_(e)}}})),function(){filepicker.internal((function(){var t=this;t.util.addOnLoad(t.cookies.checkThirdParty),t.util.addOnLoad(t.widgets.buildWidgets),t.util.addOnLoad(t.responsiveImages.activate)})),delete filepicker.internal,delete filepicker.extend;var t,e=filepicker._queue||[],n=e.length;if(n)for(var r=0;r<n;r++)t=e[r],filepicker[t[0]].apply(filepicker,t[1]);filepicker._queue&&delete filepicker._queue}()},function(t,e,n){var r,i,o;!function(){"use strict";function a(t){return angular.isUndefined(t)||null===t}i=[n(59),n(45)],void 0===(o="function"==typeof(r=function(t,e){return void 0===e&&(e=function(){try{return n(45)}catch(t){throw new Error("Please install moment via npm. Please reference to: https://github.com/urish/angular-moment")}}()),t.module("angularMoment",[]).constant("angularMomentConfig",{preprocess:null,timezone:null,format:null,statefulFilters:!0}).constant("moment",e).constant("amTimeAgoConfig",{withoutSuffix:!1,serverTime:null,titleFormat:null,fullDateThreshold:null,fullDateFormat:null}).directive("amTimeAgo",["$window","moment","amMoment","amTimeAgoConfig",function(e,n,r,i){return function(o,s,c){var l,u,d=null,p=i.withoutSuffix,f=i.titleFormat,_=i.fullDateThreshold,h=i.fullDateFormat,m=(new Date).getTime(),g=c.amTimeAgo,v="TIME"===s[0].nodeName.toUpperCase(),b=!s.attr("title");function y(){var t;if(u)t=u;else if(i.serverTime){var e=(new Date).getTime()-m+i.serverTime;t=n(e)}else t=n();return t}function w(){d&&(e.clearTimeout(d),d=null)}function $(t){var n=y().diff(t,"day"),r=_&&n>=_;if(r?s.text(t.format(h)):s.text(t.from(y(),p)),f&&b&&s.attr("title",t.local().format(f)),!r){var i=Math.abs(y().diff(t,"minute")),o=3600;i<1?o=1:i<60?o=30:i<180&&(o=300),d=e.setTimeout((function(){$(t)}),1e3*o)}}function x(t){v&&s.attr("datetime",t)}function k(){if(w(),l){var t=r.preprocessDate(l);$(t),x(t.toISOString())}}o.$watch(g,(function(t){if(a(t)||""===t)return w(),void(l&&(s.text(""),x(""),l=null));l=t,k()})),t.isDefined(c.amFrom)&&o.$watch(c.amFrom,(function(t){u=a(t)||""===t?null:n(t),k()})),t.isDefined(c.amWithoutSuffix)&&o.$watch(c.amWithoutSuffix,(function(t){"boolean"==typeof t?(p=t,k()):p=i.withoutSuffix})),c.$observe("amFullDateThreshold",(function(t){_=t,k()})),c.$observe("amFullDateFormat",(function(t){h=t,k()})),o.$on("$destroy",(function(){w()})),o.$on("amMoment:localeChanged",(function(){k()}))}}]).service("amMoment",["moment","$rootScope","$log","angularMomentConfig",function(e,n,r,i){var o=null;this.changeLocale=function(r,i){var o=e.locale(r,i);return t.isDefined(r)&&n.$broadcast("amMoment:localeChanged"),o},this.changeTimezone=function(t){e.tz&&e.tz.setDefault?(e.tz.setDefault(t),n.$broadcast("amMoment:timezoneChanged")):r.warn("angular-moment: changeTimezone() works only with moment-timezone.js v0.3.0 or greater."),i.timezone=t,o=t},this.preprocessDate=function(t){return o!==i.timezone&&this.changeTimezone(i.timezone),i.preprocess?i.preprocess(t):!isNaN(parseFloat(t))&&isFinite(t)?e(parseInt(t,10)):e(t)}}]).filter("amParse",["moment",function(t){return function(e,n){return t(e,n)}}]).filter("amFromUnix",["moment",function(t){return function(e){return t.unix(e)}}]).filter("amUtc",["moment",function(t){return function(e){return t.utc(e)}}]).filter("amUtcOffset",["amMoment",function(t){return function(e,n){return t.preprocessDate(e).utcOffset(n)}}]).filter("amLocal",["moment",function(t){return function(e){return t.isMoment(e)?e.local():null}}]).filter("amTimezone",["amMoment","angularMomentConfig","$log",function(t,e,n){return function(e,r){var i=t.preprocessDate(e);return r?i.tz?i.tz(r):(n.warn("angular-moment: named timezone specified but moment.tz() is undefined. Did you forget to include moment-timezone.js ?"),i):i}}]).filter("amCalendar",["moment","amMoment","angularMomentConfig",function(t,e,n){function r(t){if(a(t))return"";var n=e.preprocessDate(t);return n.isValid()?n.calendar():""}return r.$stateful=n.statefulFilters,r}]).filter("amDifference",["moment","amMoment","angularMomentConfig",function(t,e,n){function r(n,r,i,o){if(a(n))return"";var s=e.preprocessDate(n),c=a(r)?t():e.preprocessDate(r);return s.isValid()&&c.isValid()?s.diff(c,i,o):""}return r.$stateful=n.statefulFilters,r}]).filter("amDateFormat",["moment","amMoment","angularMomentConfig",function(t,e,n){function r(t,n){if(a(t))return"";var r=e.preprocessDate(t);return r.isValid()?r.format(n):""}return r.$stateful=n.statefulFilters,r}]).filter("amDurationFormat",["moment","angularMomentConfig",function(t,e){function n(e,n,r){return a(e)?"":t.duration(e,n).humanize(r)}return n.$stateful=e.statefulFilters,n}]).filter("amTimeAgo",["moment","amMoment","angularMomentConfig",function(t,e,n){function r(n,r,i){var o,s;return a(n)?"":(n=e.preprocessDate(n),(o=t(n)).isValid()?(s=t(i),!a(i)&&s.isValid()?o.from(s,r):o.fromNow(r)):"")}return r.$stateful=n.statefulFilters,r}]).filter("amSubtract",["moment","angularMomentConfig",function(t,e){function n(e,n,r){return a(e)?"":t(e).subtract(parseInt(n,10),r)}return n.$stateful=e.statefulFilters,n}]).filter("amAdd",["moment","angularMomentConfig",function(t,e){function n(e,n,r){return a(e)?"":t(e).add(parseInt(n,10),r)}return n.$stateful=e.statefulFilters,n}]).filter("amStartOf",["moment","angularMomentConfig",function(t,e){function n(e,n){return a(e)?"":t(e).startOf(n)}return n.$stateful=e.statefulFilters,n}]).filter("amEndOf",["moment","angularMomentConfig",function(t,e){function n(e,n){return a(e)?"":t(e).endOf(n)}return n.$stateful=e.statefulFilters,n}])})?r.apply(e,i):r)||(t.exports=o)}()},function(t,e){!function(){"use strict";var t=0,e=!0,n="message".length,r="[iFrameSizer]",i=r.length,o=null,a=window.requestAnimationFrame,s={max:1,scroll:1,bodyScroll:1,documentElementScroll:1},c={},l={autoResize:!0,bodyBackground:null,bodyMargin:null,bodyMarginV1:8,bodyPadding:null,checkOrigin:!0,enablePublicMethods:!1,heightCalculationMethod:"offset",interval:32,log:!1,maxHeight:1/0,maxWidth:1/0,minHeight:0,minWidth:0,scrolling:!1,sizeHeight:!0,sizeWidth:!1,tolerance:0,closedCallback:function(){},initCallback:function(){},messageCallback:function(){},resizedCallback:function(){}},u=[];function d(t,e,n){"addEventListener"in window?t.addEventListener(e,n,!1):"attachEvent"in window&&t.attachEvent("on"+e,n)}function p(t){c.log&&"object"==typeof console&&console.log(r+"[Host page]"+t)}function f(){null===o&&p(" Get position: "+(o={x:void 0!==window.pageXOffset?window.pageXOffset:document.documentElement.scrollLeft,y:void 0!==window.pageYOffset?window.pageYOffset:document.documentElement.scrollTop}).x+","+o.y)}function _(){null!==o&&(window.scrollTo(o.x,o.y),p(" Set position: "+o.x+","+o.y),o=null)}function h(t){p(" Size reset requested by "+("init"===t.type?"host page":"iFrame")),f(),g((function(){m(t),v("reset","reset",t.iframe)}),t,"init")}function m(t){function e(e){t.iframe.style[e]=t[e]+"px",p(" IFrame ("+t.iframe.id+") "+e+" set to "+t[e]+"px")}c.sizeHeight&&e("height"),c.sizeWidth&&e("width")}function g(t,e,n){n!==e.type&&a?(p(" Requesting animation frame"),a(t)):t()}function v(t,e,n){p("["+t+"] Sending msg to iframe ("+e+")"),n.contentWindow.postMessage(r+e,"*")}function b(){var n,r=this,i=function(e){return""===e&&(r.id=e="iFrameResizer"+t++,p(" Added missing iframe ID: "+e+" ("+r.src+")")),e}(r.id);p(" IFrame scrolling "+(c.scrolling?"enabled":"disabled")+" for "+i),r.style.overflow=!1===c.scrolling?"hidden":"auto",r.scrolling=!1===c.scrolling?"no":"yes",function(){function t(t){1/0!==c[t]&&0!==c[t]&&(r.style[t]=c[t]+"px",p(" Set "+t+" = "+c[t]+"px"))}t("maxHeight"),t("minHeight"),t("maxWidth"),t("minWidth")}(),"number"!=typeof c.bodyMargin&&"0"!==c.bodyMargin||(c.bodyMarginV1=c.bodyMargin,c.bodyMargin=c.bodyMargin+"px"),u.push(r),n=i+":"+c.bodyMarginV1+":"+c.sizeWidth+":"+c.log+":"+c.interval+":"+c.enablePublicMethods+":"+c.autoResize+":"+c.bodyMargin+":"+c.heightCalculationMethod+":"+c.bodyBackground+":"+c.bodyPadding+":"+c.tolerance,d(r,"load",(function(){var t=e;v("iFrame.onload",n,r),!t&&c.heightCalculationMethod in s&&h({iframe:r,height:0,width:0,type:"init"})})),v("init",n,r)}function y(t){if("object"!=typeof t)throw new TypeError("Options is not an object.")}!function(){var t,e=["moz","webkit","o","ms"];for(t=0;t<e.length&&!a;t+=1)a=window[e[t]+"RequestAnimationFrame"];a||p(" RequestAnimationFrame not supported")}(),d(window,"message",(function(t){function a(){s("Height"),s("Width"),g((function(){m(y),_(),c.resizedCallback(y)}),y,"resetPage")}function s(t){var e=Number(c["max"+t]),n=Number(c["min"+t]),r=t.toLowerCase(),i=Number(y[r]);if(n>e)throw new Error("Value for min"+t+" can not be greater than max"+t);p(" Checking "+r+" is in range "+n+"-"+e),i<n&&(i=n,p(" Set "+r+" to min value")),i>e&&(i=e,p(" Set "+r+" to max value")),y[r]=""+i}function l(t){var e,n=t?(e=y.iframe.getBoundingClientRect(),f(),{x:Number(e.left)+Number(o.x),y:Number(e.top)+Number(o.y)}):{x:0,y:0};p(" Reposition requested from iFrame (offset x:"+n.x+" y:"+n.y+")"),o={x:Number(y.width)+n.x,y:Number(y.height)+n.y},_()}var d,v,b=t.data,y={};r===(""+b).substr(0,i)&&(p(" Received: "+b),v=b.substr(i).split(":"),y={iframe:document.getElementById(v[0]),id:v[0],height:v[1],width:v[2],type:v[3]},(d=y.type in{true:1,false:1})&&p(" Ignoring init message from meta parent page"),!d&&function(){if(null===y.iframe)throw new Error("iFrame ("+y.id+") does not exist on ");return!0}()&&function(){var e=t.origin,n=y.iframe.src.split("/").slice(0,3).join("/");if(-1===u.indexOf(y.iframe))return!1;if(c.checkOrigin&&(p(" Checking connection is from: "+n),""+e!="null"&&e!==n))throw new Error("Unexpected message received from: "+e+" for "+y.iframe.id+". Message was: "+t.data+". This error can be disabled by adding the checkOrigin: false option.");return!0}()&&(!function(){switch(y.type){case"close":p(" Removing iFrame: "+(r=(e=y.iframe).id)),e.parentNode.removeChild(e),c.closedCallback(r),p(" --"),c.resizedCallback(y);break;case"message":t=b.substr(b.indexOf(":")+n+6),p(" MessageCallback passed: {iframe: "+y.iframe.id+", message: "+t+"}"),c.messageCallback({iframe:y.iframe,message:JSON.parse(t)}),p(" --");break;case"scrollTo":l(!1);break;case"scrollToOffset":l(!0);break;case"reset":h(y);break;case"init":a(),c.initCallback(y.iframe);break;default:a()}var t,e,r}(),e=!1))})),window.jQuery&&function(t){t.fn.iFrameResize=function(e){return y(e=e||{}),c=t.extend({},l,e),this.filter("iframe").each(b).end()}}(jQuery)}()},function(t,e){var n;!function(t){"use strict";var e=function(){function t(t,e){var n=this;this.$scope=t,this.$sce=e,this.unicodeRangeStart=57344,t.$watch("left",(function(){n.doDiff()})),t.$watch("right",(function(){n.doDiff()})),this.tagMap={},this.mapLength=0;var r=String.fromCharCode(this.unicodeRangeStart+this.mapLength);this.tagMap["&nbsp;"]=r,this.tagMap[r]="&nbsp;",this.mapLength++,this.dmp=new diff_match_patch,this.doDiff()}return t.prototype.doDiff=function(){var t=this.convertHtmlToDiffableString(this.$scope.left),e=this.convertHtmlToDiffableString(this.$scope.right),n=this.dmp.diff_main(t,e);this.dmp.diff_cleanupSemantic(n);for(var r="",i=0;i<n.length;i++)n[i][1]=this.insertTagsForOperation(n[i][1],n[i][0]),r+=this.convertDiffableBackToHtml(n[i][1]);this.$scope.diffOutput=this.$sce.trustAsHtml(r)},t.prototype.insertTagsForOperation=function(t,e){var n=-1;do{n++}while(t.charCodeAt(n)>=this.unicodeRangeStart+1);if(n>=t.length)return t;var r="",i="";if(1===e)r="<ins>",i="</ins>";else{if(-1!==e)return t;r="<del>",i="</del>"}for(var o=r,a=!0,s=0;s<t.length;s++)t.charCodeAt(s)<this.unicodeRangeStart?(a||(o+=r,a=!0),o+=t[s]):(a&&(o+=i,a=!1),o+=t[s]);return a&&(o+=i),o},t.prototype.convertHtmlToDiffableString=function(t){t=t.replace(/&nbsp;/g,this.tagMap["&nbsp;"]);for(var e="",n=0;n<t.length;){var r=t.indexOf("<",n);if(r<0){e+=t.substr(n);break}var i=t.indexOf(">",r);if(i<0){console.log("Invalid HTML. String will be truncated."),e+=t.substr(n,r-n);break}var o=t.substr(r,i+1-r),a=this.tagMap[o];void 0===a&&(a=String.fromCharCode(this.unicodeRangeStart+this.mapLength),this.tagMap[o]=a,this.tagMap[a]=o,this.mapLength++),e+=t.substr(n,r-n),e+=a,n=i+1}return e},t.prototype.convertDiffableBackToHtml=function(t){for(var e="",n=0;n<t.length;n++){if(t.charCodeAt(n)<this.unicodeRangeStart)e+=t[n];else{var r=this.tagMap[t[n]];e+=void 0===r?t[n]:r}}return e},t.$inject=["$scope","$sce"],t}();angular.module("angular-rich-text-diff",["ngSanitize"]),angular.module("angular-rich-text-diff").directive("richTextDiff",(function(){return{restrict:"E",scope:{left:"=left",right:"=right"},template:'<div ng-bind-html="diffOutput"></div>',controller:e}}))}(n||(n={}))},function(t,e,n){(function(e){t.exports=e.diff_match_patch=n(274)}).call(this,n(1))},function(t,e){(function(){"use strict";function e(){this.Diff_Timeout=1,this.Diff_EditCost=4,this.Match_Threshold=.5,this.Match_Distance=1e3,this.Patch_DeleteThreshold=.5,this.Patch_Margin=4,this.Match_MaxBits=32}var n=-1;e.Diff,e.prototype.diff_main=function(t,e,n,r){void 0===r&&(r=this.Diff_Timeout<=0?Number.MAX_VALUE:(new Date).getTime()+1e3*this.Diff_Timeout);var i=r;if(null==t||null==e)throw new Error("Null input. (diff_main)");if(t==e)return t?[[0,t]]:[];void 0===n&&(n=!0);var o=n,a=this.diff_commonPrefix(t,e),s=t.substring(0,a);t=t.substring(a),e=e.substring(a),a=this.diff_commonSuffix(t,e);var c=t.substring(t.length-a);t=t.substring(0,t.length-a),e=e.substring(0,e.length-a);var l=this.diff_compute_(t,e,o,i);return s&&l.unshift([0,s]),c&&l.push([0,c]),this.diff_cleanupMerge(l),l},e.prototype.diff_compute_=function(t,e,r,i){var o;if(!t)return[[1,e]];if(!e)return[[n,t]];var a=t.length>e.length?t:e,s=t.length>e.length?e:t,c=a.indexOf(s);if(-1!=c)return o=[[1,a.substring(0,c)],[0,s],[1,a.substring(c+s.length)]],t.length>e.length&&(o[0][0]=o[2][0]=n),o;if(1==s.length)return[[n,t],[1,e]];var l=this.diff_halfMatch_(t,e);if(l){var u=l[0],d=l[1],p=l[2],f=l[3],_=l[4],h=this.diff_main(u,p,r,i),m=this.diff_main(d,f,r,i);return h.concat([[0,_]],m)}return r&&t.length>100&&e.length>100?this.diff_lineMode_(t,e,i):this.diff_bisect_(t,e,i)},e.prototype.diff_lineMode_=function(t,e,r){t=(d=this.diff_linesToChars_(t,e)).chars1,e=d.chars2;var i=d.lineArray,o=this.diff_main(t,e,!1,r);this.diff_charsToLines_(o,i),this.diff_cleanupSemantic(o),o.push([0,""]);for(var a=0,s=0,c=0,l="",u="";a<o.length;){switch(o[a][0]){case 1:c++,u+=o[a][1];break;case n:s++,l+=o[a][1];break;case 0:if(s>=1&&c>=1){o.splice(a-s-c,s+c),a=a-s-c;for(var d,p=(d=this.diff_main(l,u,!1,r)).length-1;p>=0;p--)o.splice(a,0,d[p]);a+=d.length}c=0,s=0,l="",u=""}a++}return o.pop(),o},e.prototype.diff_bisect_=function(t,e,r){for(var i=t.length,o=e.length,a=Math.ceil((i+o)/2),s=a,c=2*a,l=new Array(c),u=new Array(c),d=0;d<c;d++)l[d]=-1,u[d]=-1;l[s+1]=0,u[s+1]=0;for(var p=i-o,f=p%2!=0,_=0,h=0,m=0,g=0,v=0;v<a&&!((new Date).getTime()>r);v++){for(var b=-v+_;b<=v-h;b+=2){for(var y=s+b,w=(S=b==-v||b!=v&&l[y-1]<l[y+1]?l[y+1]:l[y-1]+1)-b;S<i&&w<o&&t.charAt(S)==e.charAt(w);)S++,w++;if(l[y]=S,S>i)h+=2;else if(w>o)_+=2;else if(f){if((k=s+p-b)>=0&&k<c&&-1!=u[k])if(S>=(x=i-u[k]))return this.diff_bisectSplit_(t,e,S,w,r)}}for(var $=-v+m;$<=v-g;$+=2){for(var x,k=s+$,C=(x=$==-v||$!=v&&u[k-1]<u[k+1]?u[k+1]:u[k-1]+1)-$;x<i&&C<o&&t.charAt(i-x-1)==e.charAt(o-C-1);)x++,C++;if(u[k]=x,x>i)g+=2;else if(C>o)m+=2;else if(!f){if((y=s+p-$)>=0&&y<c&&-1!=l[y]){var S;w=s+(S=l[y])-y;if(S>=(x=i-x))return this.diff_bisectSplit_(t,e,S,w,r)}}}}return[[n,t],[1,e]]},e.prototype.diff_bisectSplit_=function(t,e,n,r,i){var o=t.substring(0,n),a=e.substring(0,r),s=t.substring(n),c=e.substring(r),l=this.diff_main(o,a,!1,i),u=this.diff_main(s,c,!1,i);return l.concat(u)},e.prototype.diff_linesToChars_=function(t,e){var n=[],r={};function i(t){for(var e="",i=0,o=-1,a=n.length;o<t.length-1;){-1==(o=t.indexOf("\n",i))&&(o=t.length-1);var s=t.substring(i,o+1);i=o+1,(r.hasOwnProperty?r.hasOwnProperty(s):void 0!==r[s])?e+=String.fromCharCode(r[s]):(e+=String.fromCharCode(a),r[s]=a,n[a++]=s)}return e}return n[0]="",{chars1:i(t),chars2:i(e),lineArray:n}},e.prototype.diff_charsToLines_=function(t,e){for(var n=0;n<t.length;n++){for(var r=t[n][1],i=[],o=0;o<r.length;o++)i[o]=e[r.charCodeAt(o)];t[n][1]=i.join("")}},e.prototype.diff_commonPrefix=function(t,e){if(!t||!e||t.charAt(0)!=e.charAt(0))return 0;for(var n=0,r=Math.min(t.length,e.length),i=r,o=0;n<i;)t.substring(o,i)==e.substring(o,i)?o=n=i:r=i,i=Math.floor((r-n)/2+n);return i},e.prototype.diff_commonSuffix=function(t,e){if(!t||!e||t.charAt(t.length-1)!=e.charAt(e.length-1))return 0;for(var n=0,r=Math.min(t.length,e.length),i=r,o=0;n<i;)t.substring(t.length-i,t.length-o)==e.substring(e.length-i,e.length-o)?o=n=i:r=i,i=Math.floor((r-n)/2+n);return i},e.prototype.diff_commonOverlap_=function(t,e){var n=t.length,r=e.length;if(0==n||0==r)return 0;n>r?t=t.substring(n-r):n<r&&(e=e.substring(0,n));var i=Math.min(n,r);if(t==e)return i;for(var o=0,a=1;;){var s=t.substring(i-a),c=e.indexOf(s);if(-1==c)return o;a+=c,0!=c&&t.substring(i-a)!=e.substring(0,a)||(o=a,a++)}},e.prototype.diff_halfMatch_=function(t,e){if(this.Diff_Timeout<=0)return null;var n=t.length>e.length?t:e,r=t.length>e.length?e:t;if(n.length<4||2*r.length<n.length)return null;var i=this;function o(t,e,n){for(var r,o,a,s,c=t.substring(n,n+Math.floor(t.length/4)),l=-1,u="";-1!=(l=e.indexOf(c,l+1));){var d=i.diff_commonPrefix(t.substring(n),e.substring(l)),p=i.diff_commonSuffix(t.substring(0,n),e.substring(0,l));u.length<p+d&&(u=e.substring(l-p,l)+e.substring(l,l+d),r=t.substring(0,n-p),o=t.substring(n+d),a=e.substring(0,l-p),s=e.substring(l+d))}return 2*u.length>=t.length?[r,o,a,s,u]:null}var a,s,c,l,u,d=o(n,r,Math.ceil(n.length/4)),p=o(n,r,Math.ceil(n.length/2));return d||p?(a=p?d&&d[4].length>p[4].length?d:p:d,t.length>e.length?(s=a[0],c=a[1],l=a[2],u=a[3]):(l=a[0],u=a[1],s=a[2],c=a[3]),[s,c,l,u,a[4]]):null},e.prototype.diff_cleanupSemantic=function(t){for(var e=!1,r=[],i=0,o=null,a=0,s=0,c=0,l=0,u=0;a<t.length;)0==t[a][0]?(r[i++]=a,s=l,c=u,l=0,u=0,o=t[a][1]):(1==t[a][0]?l+=t[a][1].length:u+=t[a][1].length,o&&o.length<=Math.max(s,c)&&o.length<=Math.max(l,u)&&(t.splice(r[i-1],0,[n,o]),t[r[i-1]+1][0]=1,i--,a=--i>0?r[i-1]:-1,s=0,c=0,l=0,u=0,o=null,e=!0)),a++;for(e&&this.diff_cleanupMerge(t),this.diff_cleanupSemanticLossless(t),a=1;a<t.length;){if(t[a-1][0]==n&&1==t[a][0]){var d=t[a-1][1],p=t[a][1],f=this.diff_commonOverlap_(d,p),_=this.diff_commonOverlap_(p,d);f>=_?(f>=d.length/2||f>=p.length/2)&&(t.splice(a,0,[0,p.substring(0,f)]),t[a-1][1]=d.substring(0,d.length-f),t[a+1][1]=p.substring(f),a++):(_>=d.length/2||_>=p.length/2)&&(t.splice(a,0,[0,d.substring(0,_)]),t[a-1][0]=1,t[a-1][1]=p.substring(0,p.length-_),t[a+1][0]=n,t[a+1][1]=d.substring(_),a++),a++}a++}},e.prototype.diff_cleanupSemanticLossless=function(t){function n(t,n){if(!t||!n)return 6;var r=t.charAt(t.length-1),i=n.charAt(0),o=r.match(e.nonAlphaNumericRegex_),a=i.match(e.nonAlphaNumericRegex_),s=o&&r.match(e.whitespaceRegex_),c=a&&i.match(e.whitespaceRegex_),l=s&&r.match(e.linebreakRegex_),u=c&&i.match(e.linebreakRegex_),d=l&&t.match(e.blanklineEndRegex_),p=u&&n.match(e.blanklineStartRegex_);return d||p?5:l||u?4:o&&!s&&c?3:s||c?2:o||a?1:0}for(var r=1;r<t.length-1;){if(0==t[r-1][0]&&0==t[r+1][0]){var i=t[r-1][1],o=t[r][1],a=t[r+1][1],s=this.diff_commonSuffix(i,o);if(s){var c=o.substring(o.length-s);i=i.substring(0,i.length-s),o=c+o.substring(0,o.length-s),a=c+a}for(var l=i,u=o,d=a,p=n(i,o)+n(o,a);o.charAt(0)===a.charAt(0);){i+=o.charAt(0),o=o.substring(1)+a.charAt(0),a=a.substring(1);var f=n(i,o)+n(o,a);f>=p&&(p=f,l=i,u=o,d=a)}t[r-1][1]!=l&&(l?t[r-1][1]=l:(t.splice(r-1,1),r--),t[r][1]=u,d?t[r+1][1]=d:(t.splice(r+1,1),r--))}r++}},e.nonAlphaNumericRegex_=/[^a-zA-Z0-9]/,e.whitespaceRegex_=/\s/,e.linebreakRegex_=/[\r\n]/,e.blanklineEndRegex_=/\n\r?\n$/,e.blanklineStartRegex_=/^\r?\n\r?\n/,e.prototype.diff_cleanupEfficiency=function(t){for(var e=!1,r=[],i=0,o=null,a=0,s=!1,c=!1,l=!1,u=!1;a<t.length;)0==t[a][0]?(t[a][1].length<this.Diff_EditCost&&(l||u)?(r[i++]=a,s=l,c=u,o=t[a][1]):(i=0,o=null),l=u=!1):(t[a][0]==n?u=!0:l=!0,o&&(s&&c&&l&&u||o.length<this.Diff_EditCost/2&&s+c+l+u==3)&&(t.splice(r[i-1],0,[n,o]),t[r[i-1]+1][0]=1,i--,o=null,s&&c?(l=u=!0,i=0):(a=--i>0?r[i-1]:-1,l=u=!1),e=!0)),a++;e&&this.diff_cleanupMerge(t)},e.prototype.diff_cleanupMerge=function(t){t.push([0,""]);for(var e,r=0,i=0,o=0,a="",s="";r<t.length;)switch(t[r][0]){case 1:o++,s+=t[r][1],r++;break;case n:i++,a+=t[r][1],r++;break;case 0:i+o>1?(0!==i&&0!==o&&(0!==(e=this.diff_commonPrefix(s,a))&&(r-i-o>0&&0==t[r-i-o-1][0]?t[r-i-o-1][1]+=s.substring(0,e):(t.splice(0,0,[0,s.substring(0,e)]),r++),s=s.substring(e),a=a.substring(e)),0!==(e=this.diff_commonSuffix(s,a))&&(t[r][1]=s.substring(s.length-e)+t[r][1],s=s.substring(0,s.length-e),a=a.substring(0,a.length-e))),0===i?t.splice(r-o,i+o,[1,s]):0===o?t.splice(r-i,i+o,[n,a]):t.splice(r-i-o,i+o,[n,a],[1,s]),r=r-i-o+(i?1:0)+(o?1:0)+1):0!==r&&0==t[r-1][0]?(t[r-1][1]+=t[r][1],t.splice(r,1)):r++,o=0,i=0,a="",s=""}""===t[t.length-1][1]&&t.pop();var c=!1;for(r=1;r<t.length-1;)0==t[r-1][0]&&0==t[r+1][0]&&(t[r][1].substring(t[r][1].length-t[r-1][1].length)==t[r-1][1]?(t[r][1]=t[r-1][1]+t[r][1].substring(0,t[r][1].length-t[r-1][1].length),t[r+1][1]=t[r-1][1]+t[r+1][1],t.splice(r-1,1),c=!0):t[r][1].substring(0,t[r+1][1].length)==t[r+1][1]&&(t[r-1][1]+=t[r+1][1],t[r][1]=t[r][1].substring(t[r+1][1].length)+t[r+1][1],t.splice(r+1,1),c=!0)),r++;c&&this.diff_cleanupMerge(t)},e.prototype.diff_xIndex=function(t,e){var r,i=0,o=0,a=0,s=0;for(r=0;r<t.length&&(1!==t[r][0]&&(i+=t[r][1].length),t[r][0]!==n&&(o+=t[r][1].length),!(i>e));r++)a=i,s=o;return t.length!=r&&t[r][0]===n?s:s+(e-a)},e.prototype.diff_prettyHtml=function(t){for(var e=[],r=/&/g,i=/</g,o=/>/g,a=/\n/g,s=0;s<t.length;s++){var c=t[s][0],l=t[s][1].replace(r,"&amp;").replace(i,"&lt;").replace(o,"&gt;").replace(a,"&para;<br>");switch(c){case 1:e[s]='<ins style="background:#e6ffe6;">'+l+"</ins>";break;case n:e[s]='<del style="background:#ffe6e6;">'+l+"</del>";break;case 0:e[s]="<span>"+l+"</span>"}}return e.join("")},e.prototype.diff_text1=function(t){for(var e=[],n=0;n<t.length;n++)1!==t[n][0]&&(e[n]=t[n][1]);return e.join("")},e.prototype.diff_text2=function(t){for(var e=[],r=0;r<t.length;r++)t[r][0]!==n&&(e[r]=t[r][1]);return e.join("")},e.prototype.diff_levenshtein=function(t){for(var e=0,r=0,i=0,o=0;o<t.length;o++){var a=t[o][0],s=t[o][1];switch(a){case 1:r+=s.length;break;case n:i+=s.length;break;case 0:e+=Math.max(r,i),r=0,i=0}}return e+=Math.max(r,i)},e.prototype.diff_toDelta=function(t){for(var e=[],r=0;r<t.length;r++)switch(t[r][0]){case 1:e[r]="+"+encodeURI(t[r][1]);break;case n:e[r]="-"+t[r][1].length;break;case 0:e[r]="="+t[r][1].length}return e.join("\t").replace(/%20/g," ")},e.prototype.diff_fromDelta=function(t,e){for(var r=[],i=0,o=0,a=e.split(/\t/g),s=0;s<a.length;s++){var c=a[s].substring(1);switch(a[s].charAt(0)){case"+":try{r[i++]=[1,decodeURI(c)]}catch(t){throw new Error("Illegal escape in diff_fromDelta: "+c)}break;case"-":case"=":var l=parseInt(c,10);if(isNaN(l)||l<0)throw new Error("Invalid number in diff_fromDelta: "+c);var u=t.substring(o,o+=l);"="==a[s].charAt(0)?r[i++]=[0,u]:r[i++]=[n,u];break;default:if(a[s])throw new Error("Invalid diff operation in diff_fromDelta: "+a[s])}}if(o!=t.length)throw new Error("Delta length ("+o+") does not equal source text length ("+t.length+").");return r},e.prototype.match_main=function(t,e,n){if(null==t||null==e||null==n)throw new Error("Null input. (match_main)");return n=Math.max(0,Math.min(n,t.length)),t==e?0:t.length?t.substring(n,n+e.length)==e?n:this.match_bitap_(t,e,n):-1},e.prototype.match_bitap_=function(t,e,n){if(e.length>this.Match_MaxBits)throw new Error("Pattern too long for this browser.");var r=this.match_alphabet_(e),i=this;function o(t,r){var o=t/e.length,a=Math.abs(n-r);return i.Match_Distance?o+a/i.Match_Distance:a?1:o}var a=this.Match_Threshold,s=t.indexOf(e,n);-1!=s&&(a=Math.min(o(0,s),a),-1!=(s=t.lastIndexOf(e,n+e.length))&&(a=Math.min(o(0,s),a)));var c,l,u=1<<e.length-1;s=-1;for(var d,p=e.length+t.length,f=0;f<e.length;f++){for(c=0,l=p;c<l;)o(f,n+l)<=a?c=l:p=l,l=Math.floor((p-c)/2+c);p=l;var _=Math.max(1,n-l+1),h=Math.min(n+l,t.length)+e.length,m=Array(h+2);m[h+1]=(1<<f)-1;for(var g=h;g>=_;g--){var v=r[t.charAt(g-1)];if(m[g]=0===f?(m[g+1]<<1|1)&v:(m[g+1]<<1|1)&v|(d[g+1]|d[g])<<1|1|d[g+1],m[g]&u){var b=o(f,g-1);if(b<=a){if(a=b,!((s=g-1)>n))break;_=Math.max(1,2*n-s)}}}if(o(f+1,n)>a)break;d=m}return s},e.prototype.match_alphabet_=function(t){for(var e={},n=0;n<t.length;n++)e[t.charAt(n)]=0;for(n=0;n<t.length;n++)e[t.charAt(n)]|=1<<t.length-n-1;return e},e.prototype.patch_addContext_=function(t,e){if(0!=e.length){for(var n=e.substring(t.start2,t.start2+t.length1),r=0;e.indexOf(n)!=e.lastIndexOf(n)&&n.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin;)r+=this.Patch_Margin,n=e.substring(t.start2-r,t.start2+t.length1+r);r+=this.Patch_Margin;var i=e.substring(t.start2-r,t.start2);i&&t.diffs.unshift([0,i]);var o=e.substring(t.start2+t.length1,t.start2+t.length1+r);o&&t.diffs.push([0,o]),t.start1-=i.length,t.start2-=i.length,t.length1+=i.length+o.length,t.length2+=i.length+o.length}},e.prototype.patch_make=function(t,r,i){var o,a;if("string"==typeof t&&"string"==typeof r&&void 0===i)o=t,(a=this.diff_main(o,r,!0)).length>2&&(this.diff_cleanupSemantic(a),this.diff_cleanupEfficiency(a));else if(t&&"object"==typeof t&&void 0===r&&void 0===i)a=t,o=this.diff_text1(a);else if("string"==typeof t&&r&&"object"==typeof r&&void 0===i)o=t,a=r;else{if("string"!=typeof t||"string"!=typeof r||!i||"object"!=typeof i)throw new Error("Unknown call format to patch_make.");o=t,a=i}if(0===a.length)return[];for(var s=[],c=new e.patch_obj,l=0,u=0,d=0,p=o,f=o,_=0;_<a.length;_++){var h=a[_][0],m=a[_][1];switch(l||0===h||(c.start1=u,c.start2=d),h){case 1:c.diffs[l++]=a[_],c.length2+=m.length,f=f.substring(0,d)+m+f.substring(d);break;case n:c.length1+=m.length,c.diffs[l++]=a[_],f=f.substring(0,d)+f.substring(d+m.length);break;case 0:m.length<=2*this.Patch_Margin&&l&&a.length!=_+1?(c.diffs[l++]=a[_],c.length1+=m.length,c.length2+=m.length):m.length>=2*this.Patch_Margin&&l&&(this.patch_addContext_(c,p),s.push(c),c=new e.patch_obj,l=0,p=f,u=d)}1!==h&&(u+=m.length),h!==n&&(d+=m.length)}return l&&(this.patch_addContext_(c,p),s.push(c)),s},e.prototype.patch_deepCopy=function(t){for(var n=[],r=0;r<t.length;r++){var i=t[r],o=new e.patch_obj;o.diffs=[];for(var a=0;a<i.diffs.length;a++)o.diffs[a]=i.diffs[a].slice();o.start1=i.start1,o.start2=i.start2,o.length1=i.length1,o.length2=i.length2,n[r]=o}return n},e.prototype.patch_apply=function(t,e){if(0==t.length)return[e,[]];t=this.patch_deepCopy(t);var r=this.patch_addPadding(t);e=r+e+r,this.patch_splitMax(t);for(var i=0,o=[],a=0;a<t.length;a++){var s,c,l=t[a].start2+i,u=this.diff_text1(t[a].diffs),d=-1;if(u.length>this.Match_MaxBits?-1!=(s=this.match_main(e,u.substring(0,this.Match_MaxBits),l))&&(-1==(d=this.match_main(e,u.substring(u.length-this.Match_MaxBits),l+u.length-this.Match_MaxBits))||s>=d)&&(s=-1):s=this.match_main(e,u,l),-1==s)o[a]=!1,i-=t[a].length2-t[a].length1;else if(o[a]=!0,i=s-l,u==(c=-1==d?e.substring(s,s+u.length):e.substring(s,d+this.Match_MaxBits)))e=e.substring(0,s)+this.diff_text2(t[a].diffs)+e.substring(s+u.length);else{var p=this.diff_main(u,c,!1);if(u.length>this.Match_MaxBits&&this.diff_levenshtein(p)/u.length>this.Patch_DeleteThreshold)o[a]=!1;else{this.diff_cleanupSemanticLossless(p);for(var f,_=0,h=0;h<t[a].diffs.length;h++){var m=t[a].diffs[h];0!==m[0]&&(f=this.diff_xIndex(p,_)),1===m[0]?e=e.substring(0,s+f)+m[1]+e.substring(s+f):m[0]===n&&(e=e.substring(0,s+f)+e.substring(s+this.diff_xIndex(p,_+m[1].length))),m[0]!==n&&(_+=m[1].length)}}}}return[e=e.substring(r.length,e.length-r.length),o]},e.prototype.patch_addPadding=function(t){for(var e=this.Patch_Margin,n="",r=1;r<=e;r++)n+=String.fromCharCode(r);for(r=0;r<t.length;r++)t[r].start1+=e,t[r].start2+=e;var i=t[0],o=i.diffs;if(0==o.length||0!=o[0][0])o.unshift([0,n]),i.start1-=e,i.start2-=e,i.length1+=e,i.length2+=e;else if(e>o[0][1].length){var a=e-o[0][1].length;o[0][1]=n.substring(o[0][1].length)+o[0][1],i.start1-=a,i.start2-=a,i.length1+=a,i.length2+=a}if(0==(o=(i=t[t.length-1]).diffs).length||0!=o[o.length-1][0])o.push([0,n]),i.length1+=e,i.length2+=e;else if(e>o[o.length-1][1].length){a=e-o[o.length-1][1].length;o[o.length-1][1]+=n.substring(0,a),i.length1+=a,i.length2+=a}return n},e.prototype.patch_splitMax=function(t){for(var r=this.Match_MaxBits,i=0;i<t.length;i++)if(!(t[i].length1<=r)){var o=t[i];t.splice(i--,1);for(var a=o.start1,s=o.start2,c="";0!==o.diffs.length;){var l=new e.patch_obj,u=!0;for(l.start1=a-c.length,l.start2=s-c.length,""!==c&&(l.length1=l.length2=c.length,l.diffs.push([0,c]));0!==o.diffs.length&&l.length1<r-this.Patch_Margin;){var d=o.diffs[0][0],p=o.diffs[0][1];1===d?(l.length2+=p.length,s+=p.length,l.diffs.push(o.diffs.shift()),u=!1):d===n&&1==l.diffs.length&&0==l.diffs[0][0]&&p.length>2*r?(l.length1+=p.length,a+=p.length,u=!1,l.diffs.push([d,p]),o.diffs.shift()):(p=p.substring(0,r-l.length1-this.Patch_Margin),l.length1+=p.length,a+=p.length,0===d?(l.length2+=p.length,s+=p.length):u=!1,l.diffs.push([d,p]),p==o.diffs[0][1]?o.diffs.shift():o.diffs[0][1]=o.diffs[0][1].substring(p.length))}c=(c=this.diff_text2(l.diffs)).substring(c.length-this.Patch_Margin);var f=this.diff_text1(o.diffs).substring(0,this.Patch_Margin);""!==f&&(l.length1+=f.length,l.length2+=f.length,0!==l.diffs.length&&0===l.diffs[l.diffs.length-1][0]?l.diffs[l.diffs.length-1][1]+=f:l.diffs.push([0,f])),u||t.splice(++i,0,l)}}},e.prototype.patch_toText=function(t){for(var e=[],n=0;n<t.length;n++)e[n]=t[n];return e.join("")},e.prototype.patch_fromText=function(t){var r=[];if(!t)return r;for(var i=t.split("\n"),o=0,a=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;o<i.length;){var s=i[o].match(a);if(!s)throw new Error("Invalid patch string: "+i[o]);var c=new e.patch_obj;for(r.push(c),c.start1=parseInt(s[1],10),""===s[2]?(c.start1--,c.length1=1):"0"==s[2]?c.length1=0:(c.start1--,c.length1=parseInt(s[2],10)),c.start2=parseInt(s[3],10),""===s[4]?(c.start2--,c.length2=1):"0"==s[4]?c.length2=0:(c.start2--,c.length2=parseInt(s[4],10)),o++;o<i.length;){var l=i[o].charAt(0);try{var u=decodeURI(i[o].substring(1))}catch(t){throw new Error("Illegal escape in patch_fromText: "+u)}if("-"==l)c.diffs.push([n,u]);else if("+"==l)c.diffs.push([1,u]);else if(" "==l)c.diffs.push([0,u]);else{if("@"==l)break;if(""!==l)throw new Error('Invalid patch mode "'+l+'" in: '+u)}o++}}return r},e.patch_obj=function(){this.diffs=[],this.start1=null,this.start2=null,this.length1=0,this.length2=0},e.patch_obj.prototype.toString=function(){for(var t,e=["@@ -"+(0===this.length1?this.start1+",0":1==this.length1?this.start1+1:this.start1+1+","+this.length1)+" +"+(0===this.length2?this.start2+",0":1==this.length2?this.start2+1:this.start2+1+","+this.length2)+" @@\n"],r=0;r<this.diffs.length;r++){switch(this.diffs[r][0]){case 1:t="+";break;case n:t="-";break;case 0:t=" "}e[r+1]=t+encodeURI(this.diffs[r][1])+"\n"}return e.join("").replace(/%20/g," ")},t.exports=e,t.exports.diff_match_patch=e,t.exports.DIFF_DELETE=n,t.exports.DIFF_INSERT=1,t.exports.DIFF_EQUAL=0}).call({})},function(t,e,n){var r,i,o;o=function(){var t=!0;function e(e){function n(t){var n=e.match(t);return n&&n.length>1&&n[1]||""}var r,i,o,a=n(/(ipod|iphone|ipad)/i).toLowerCase(),s=!/like android/i.test(e)&&/android/i.test(e),c=/CrOS/.test(e),l=/silk/i.test(e),u=/sailfish/i.test(e),d=/tizen/i.test(e),p=/(web|hpw)os/i.test(e),f=/windows phone/i.test(e),_=!f&&/windows/i.test(e),h=!a&&!l&&/macintosh/i.test(e),m=!s&&!u&&!d&&!p&&/linux/i.test(e),g=n(/edge\/(\d+(\.\d+)?)/i),v=n(/version\/(\d+(\.\d+)?)/i),b=/tablet/i.test(e),y=!b&&/[^-]mobi/i.test(e);/opera|opr/i.test(e)?r={name:"Opera",opera:t,version:v||n(/(?:opera|opr)[\s\/](\d+(\.\d+)?)/i)}:/yabrowser/i.test(e)?r={name:"Yandex Browser",yandexbrowser:t,version:v||n(/(?:yabrowser)[\s\/](\d+(\.\d+)?)/i)}:f?(r={name:"Windows Phone",windowsphone:t},g?(r.msedge=t,r.version=g):(r.msie=t,r.version=n(/iemobile\/(\d+(\.\d+)?)/i))):/msie|trident/i.test(e)?r={name:"Internet Explorer",msie:t,version:n(/(?:msie |rv:)(\d+(\.\d+)?)/i)}:c?r={name:"Chrome",chromeos:t,chromeBook:t,chrome:t,version:n(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:/chrome.+? edge/i.test(e)?r={name:"Microsoft Edge",msedge:t,version:g}:/chrome|crios|crmo/i.test(e)?r={name:"Chrome",chrome:t,version:n(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:a?(r={name:"iphone"==a?"iPhone":"ipad"==a?"iPad":"iPod"},v&&(r.version=v)):u?r={name:"Sailfish",sailfish:t,version:n(/sailfish\s?browser\/(\d+(\.\d+)?)/i)}:/seamonkey\//i.test(e)?r={name:"SeaMonkey",seamonkey:t,version:n(/seamonkey\/(\d+(\.\d+)?)/i)}:/firefox|iceweasel/i.test(e)?(r={name:"Firefox",firefox:t,version:n(/(?:firefox|iceweasel)[ \/](\d+(\.\d+)?)/i)},/\((mobile|tablet);[^\)]*rv:[\d\.]+\)/i.test(e)&&(r.firefoxos=t)):l?r={name:"Amazon Silk",silk:t,version:n(/silk\/(\d+(\.\d+)?)/i)}:s?r={name:"Android",version:v}:/phantom/i.test(e)?r={name:"PhantomJS",phantom:t,version:n(/phantomjs\/(\d+(\.\d+)?)/i)}:/blackberry|\bbb\d+/i.test(e)||/rim\stablet/i.test(e)?r={name:"BlackBerry",blackberry:t,version:v||n(/blackberry[\d]+\/(\d+(\.\d+)?)/i)}:p?(r={name:"WebOS",webos:t,version:v||n(/w(?:eb)?osbrowser\/(\d+(\.\d+)?)/i)},/touchpad\//i.test(e)&&(r.touchpad=t)):r=/bada/i.test(e)?{name:"Bada",bada:t,version:n(/dolfin\/(\d+(\.\d+)?)/i)}:d?{name:"Tizen",tizen:t,version:n(/(?:tizen\s?)?browser\/(\d+(\.\d+)?)/i)||v}:/safari/i.test(e)?{name:"Safari",safari:t,version:v}:{name:n(/^(.*)\/(.*) /),version:(i=/^(.*)\/(.*) /,o=e.match(i),o&&o.length>1&&o[2]||"")},!r.msedge&&/(apple)?webkit/i.test(e)?(r.name=r.name||"Webkit",r.webkit=t,!r.version&&v&&(r.version=v)):!r.opera&&/gecko\//i.test(e)&&(r.name=r.name||"Gecko",r.gecko=t,r.version=r.version||n(/gecko\/(\d+(\.\d+)?)/i)),r.msedge||!s&&!r.silk?a?(r[a]=t,r.ios=t):_?r.windows=t:h?r.mac=t:m&&(r.linux=t):r.android=t;var w="";r.windowsphone?w=n(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i):a?w=(w=n(/os (\d+([_\s]\d+)*) like mac os x/i)).replace(/[_\s]/g,"."):s?w=n(/android[ \/-](\d+(\.\d+)*)/i):r.webos?w=n(/(?:web|hpw)os\/(\d+(\.\d+)*)/i):r.blackberry?w=n(/rim\stablet\sos\s(\d+(\.\d+)*)/i):r.bada?w=n(/bada\/(\d+(\.\d+)*)/i):r.tizen&&(w=n(/tizen[\/\s](\d+(\.\d+)*)/i)),w&&(r.osversion=w);var $=w.split(".")[0];return b||"ipad"==a||s&&(3==$||4==$&&!y)||r.silk?r.tablet=t:(y||"iphone"==a||"ipod"==a||s||r.blackberry||r.webos||r.bada)&&(r.mobile=t),r.msedge||r.msie&&r.version>=10||r.yandexbrowser&&r.version>=15||r.chrome&&r.version>=20||r.firefox&&r.version>=20||r.safari&&r.version>=6||r.opera&&r.version>=10||r.ios&&r.osversion&&r.osversion.split(".")[0]>=6||r.blackberry&&r.version>=10.1?r.a=t:r.msie&&r.version<10||r.chrome&&r.version<20||r.firefox&&r.version<20||r.safari&&r.version<6||r.opera&&r.version<10||r.ios&&r.osversion&&r.osversion.split(".")[0]<6?r.c=t:r.x=t,r}var n=e("undefined"!=typeof navigator?navigator.userAgent:"");return n.test=function(t){for(var e=0;e<t.length;++e){var r=t[e];if("string"==typeof r&&r in n)return!0}return!1},n._detect=e,n},t.exports?t.exports=o():void 0===(i="function"==typeof(r=o)?r.call(e,n,e,t):r)||(t.exports=i)},function(t,e){window.GeniusShimInnerHtml=function(){var t=function(e,n){var r=e.nodeType;if(3==r)n.push(e.textContent.replace(/&/,"&amp;").replace(/</,"&lt;").replace(">","&gt;"));else if(1==r){if(n.push("<",e.tagName),e.hasAttributes())for(var i=e.attributes,o=0,a=i.length;o<a;++o){var s=i.item(o);n.push(" ",s.name,"='",s.value,"'")}if(e.hasChildNodes()){n.push(">");var c=e.childNodes;for(o=0,a=c.length;o<a;++o)t(c.item(o),n);n.push("</",e.tagName,">")}else n.push("/>")}else{if(8!=r)throw"Error serializing XML. Unhandled node of type: "+r;n.push("\x3c!--",e.nodeValue,"--\x3e")}};Object.defineProperty(SVGElement.prototype,"innerHTML",{get:function(){for(var e=[],n=this.firstChild;n;)t(n,e),n=n.nextSibling;return e.join("")},set:function(t){for(;this.firstChild;)this.removeChild(this.firstChild);try{var e=new DOMParser;e.async=!1,sXML="<svg xmlns='http://www.w3.org/2000/svg'>"+t+"</svg>";for(var n=e.parseFromString(sXML,"text/xml").documentElement.firstChild;n;)this.appendChild(this.ownerDocument.importNode(n,!0)),n=n.nextSibling}catch(t){throw new Error("Error parsing XML string")}}}),Object.defineProperty(SVGElement.prototype,"innerSVG",{get:function(){return this.innerHTML},set:function(t){this.innerHTML=t}})}},function(t,e){!function(t){"use strict";var e=["$compile","$timeout","$window",function(e,n,r){return{restrict:"A",scope:{scrollingElem:"=?",superSticky:"=?",css:"=?",listenResize:"=?"},link:function(e,i){n((function(){var n,o=!1,a=i.css("display"),s=i.css("position"),c=i.css("top"),l=i.css("left"),u=i.css("width"),d=e.scrollingElem||document;i.addClass("sticky"),e.superSticky&&i.addClass("sticky-keep-visible"),e.listenResize&&t.element(r).on("resize",(function(){o&&(i.css("width",e.listenResize.offsetWidth+"px"),n.css("width",e.listenResize.offsetWidth+"px"),u&&(u=e.listenResize.offsetWidth+"px"))})),t.element(d).on("scroll",(function(){var e=(o?n:i)[0].getBoundingClientRect().top,r=0;if(t.forEach(t.element(document.querySelectorAll(".sticky.sticky-is-visible.sticky-keep-visible")),(function(t){t!==i[0]&&t.offsetWidth>0&&t.offsetHeight>0&&(r+=t.offsetHeight)})),e<=r)o||((n=t.element("<div></div>")).css("width",i[0].offsetWidth+"px"),n.css("height",i[0].offsetHeight+"px"),i.after(n),t.element(document.querySelectorAll(".sticky.sticky-is-visible:not(.sticky-keep-visible)")).css("display","none"),i.css("width",i[0].offsetWidth+"px"),i.css("position","fixed"),i.css("top",r+"px"),i.css("left","0px"),i.addClass("sticky-is-visible"),o=!0);else if(n){n.remove(),i.css("width",u),i.css("display",a),i.css("position",s),i.css("top",c),i.css("left",l),i.removeClass("sticky-is-visible"),o=!1;var d=t.element(document.querySelectorAll(".sticky.sticky-is-visible"));d.length>0&&t.element(d[d.length-1]).css("display",a)}}))}))}}}];t.module("ngSticky",[]).directive("ngSticky",e)}(window.angular)},function(t,e,n){(function(t){!function(){var e="undefined"!=typeof window&&window===this?this:void 0!==t&&null!=t?t:this,n="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)};function r(){r=function(){},e.Symbol||(e.Symbol=o)}var i=0;function o(t){return"jscomp_symbol_"+(t||"")+i++}function a(){r();var t=e.Symbol.iterator;t||(t=e.Symbol.iterator=e.Symbol("iterator")),"function"!=typeof Array.prototype[t]&&n(Array.prototype,t,{configurable:!0,writable:!0,value:function(){return s(this)}}),a=function(){}}function s(t){var n=0;return function(t){return a(),(t={next:t})[e.Symbol.iterator]=function(){return this},t}((function(){return n<t.length?{done:!1,value:t[n++]}:{done:!0}}))}function c(t){a();var e=t[Symbol.iterator];return e?e.call(t):s(t)}function l(t){if(!(t instanceof Array)){t=c(t);for(var e,n=[];!(e=t.next()).done;)n.push(e.value);t=n}return t}var u=0;var d="img script iframe link audio video source".split(" ");function p(t,e){for(var n=(t=c(t)).next();!n.done;n=t.next())if(n=n.value,e.includes(n.nodeName.toLowerCase())||p(n.children,e))return!0;return!1}function f(t,e){if(2<t.length)return performance.now();for(var n=[],r=(e=c(e)).next();!r.done;r=e.next())r=r.value,n.push({timestamp:r.start,type:"requestStart"}),n.push({timestamp:r.end,type:"requestEnd"});for(r=(e=c(t)).next();!r.done;r=e.next())n.push({timestamp:r.value,type:"requestStart"});for(n.sort((function(t,e){return t.timestamp-e.timestamp})),t=t.length,e=n.length-1;0<=e;e--)switch(r=n[e],r.type){case"requestStart":t--;break;case"requestEnd":if(2<++t)return r.timestamp;break;default:throw Error("Internal Error: This should never happen")}return 0}function _(t){t=t||{},this.w=!!t.useMutationObserver,this.u=t.minValue||null,t=window.__tti&&window.__tti.e;var e=window.__tti&&window.__tti.o;this.a=t?t.map((function(t){return{start:t.startTime,end:t.startTime+t.duration}})):[],e&&e.disconnect(),this.b=[],this.f=new Map,this.j=null,this.v=-1/0,this.i=!1,this.h=this.c=this.s=null,function(t,e){var n=XMLHttpRequest.prototype.send,r=u++;XMLHttpRequest.prototype.send=function(i){for(var o=[],a=0;a<arguments.length;++a)o[a-0]=arguments[a];var s=this;return t(r),this.addEventListener("readystatechange",(function(){4===s.readyState&&e(r)})),n.apply(this,o)}}(this.m.bind(this),this.l.bind(this)),function(t,e){var n=fetch;fetch=function(r){for(var i=[],o=0;o<arguments.length;++o)i[o-0]=arguments[o];return new Promise((function(r,o){var a=u++;t(a),n.apply(null,[].concat(l(i))).then((function(t){e(a),r(t)}),(function(t){e(t),o(t)}))}))}}(this.m.bind(this),this.l.bind(this)),function(t){t.c=new PerformanceObserver((function(e){for(var n=(e=c(e.getEntries())).next();!n.done;n=e.next())if("resource"===(n=n.value).entryType&&(t.b.push({start:n.fetchStart,end:n.responseEnd}),m(t,f(t.g,t.b)+5e3)),"longtask"===n.entryType){var r=n.startTime+n.duration;t.a.push({start:n.startTime,end:r}),m(t,r+5e3)}})),t.c.observe({entryTypes:["longtask","resource"]})}(this),this.w&&(this.h=function(t){var e=new MutationObserver((function(e){for(var n=(e=c(e)).next();!n.done;n=e.next())("childList"==(n=n.value).type&&p(n.addedNodes,d)||"attributes"==n.type&&d.includes(n.target.tagName.toLowerCase()))&&t(n)}));return e.observe(document,{attributes:!0,childList:!0,subtree:!0,attributeFilter:["href","src"]}),e}(this.B.bind(this)))}function h(t){t.i=!0;var e=0<t.a.length?t.a[t.a.length-1].end:0,n=f(t.g,t.b);m(t,Math.max(n+5e3,e))}function m(t,e){!t.i||t.v>e||(clearTimeout(t.j),t.j=setTimeout((function(){var e=performance.timing.navigationStart,n=f(t.g,t.b);e=(window.a&&window.a.A?1e3*window.a.A().C-e:0)||performance.timing.domContentLoadedEventEnd-e;if(t.u)var r=t.u;else performance.timing.domContentLoadedEventEnd?r=(r=performance.timing).domContentLoadedEventEnd-r.navigationStart:r=null;var i=performance.now();null===r&&m(t,Math.max(n+5e3,i+1e3));var o=t.a;5e3>i-n?n=null:n=5e3>i-(n=o.length?o[o.length-1].end:e)?null:Math.max(n,r),n&&(t.s(n),clearTimeout(t.j),t.i=!1,t.c&&t.c.disconnect(),t.h&&t.h.disconnect()),m(t,performance.now()+1e3)}),e-performance.now()),t.v=e)}_.prototype.getFirstConsistentlyInteractive=function(){var t=this;return new Promise((function(e){t.s=e,"complete"==document.readyState?h(t):window.addEventListener("load",(function(){h(t)}))}))},_.prototype.m=function(t){this.f.set(t,performance.now())},_.prototype.l=function(t){this.f.delete(t)},_.prototype.B=function(){m(this,performance.now()+5e3)},e.Object.defineProperties(_.prototype,{g:{configurable:!0,enumerable:!0,get:function(){return[].concat(l(this.f.values()))}}});var g={getFirstConsistentlyInteractive:function(t){return t=t||{},"PerformanceLongTaskTiming"in window?new _(t).getFirstConsistentlyInteractive():Promise.resolve(null)}};window.ttiPolyfill=g}()}).call(this,n(1))},function(t,e,n){var r={"./components/active_referent.js":280,"./components/ad_container_with_close_button.js":281,"./components/admin_task.js":282,"./components/admin_tasks_page.js":283,"./components/admin_user_info.js":284,"./components/adwords_ad_form.js":285,"./components/adwords_ad_group_form.js":286,"./components/adwords_ad_group_list.js":287,"./components/adwords_campaign_form.js":288,"./components/adwords_campaign_list.js":289,"./components/adwords_editor.js":290,"./components/album_admin_menu.js":291,"./components/album_grid.js":292,"./components/album_metadata_form.js":293,"./components/album_page.js":294,"./components/album_tracklist_row.js":295,"./components/android_banner.js":296,"./components/annotation_embed.js":297,"./components/annotation_preview.js":298,"./components/annotation_share_menu.js":299,"./components/answer.js":300,"./components/apple_match_evaluations_page.js":301,"./components/apple_music_player.js":302,"./components/article_admin_bar.js":303,"./components/article_authors.js":304,"./components/article_content_actions.js":305,"./components/article_contributor_badge.js":306,"./components/article_index_arrangeable.js":307,"./components/article_index_item.js":308,"./components/article_page.js":309,"./components/artist_badge.js":310,"./components/artist_opportunities.js":311,"./components/artist_songs.js":312,"./components/artist_songs_and_albums.js":313,"./components/artist_songs_modal.js":314,"./components/artist_tooltip.js":315,"./components/artist_verification.js":316,"./components/audio_source_label.js":317,"./components/breadcrumbs.js":318,"./components/collapsible_content.js":319,"./components/comment_list.js":320,"./components/comments.js":321,"./components/contact_button.js":322,"./components/contribution_opportunity.js":323,"./components/cover_art_form.js":324,"./components/cover_art_modal.js":325,"./components/defer_compile.js":326,"./components/deleted_answer.js":327,"./components/detailed_song_search.js":328,"./components/dfp_ad.js":329,"./components/edit_artist_profile.js":330,"./components/edit_user_email_preferences.js":331,"./components/edit_user_profile.js":332,"./components/editable_tracklist.js":333,"./components/editable_tracklist_number.js":334,"./components/email_confirmation_banner.js":335,"./components/embedly_embed.js":336,"./components/embedly_youtube.js":337,"./components/expandable_container.js":338,"./components/expandable_diff.js":339,"./components/facebook_share_button.js":340,"./components/hang_initial_quote.js":341,"./components/header_actions.js":342,"./components/header_admin.js":343,"./components/header_auth.js":344,"./components/header_with_cover_art.js":345,"./components/hidden_fields.js":346,"./components/image_upload_button.js":347,"./components/inbox.js":348,"./components/inbox_container.js":349,"./components/inbox_icon.js":350,"./components/inbox_line_item_detail_discussion.js":351,"./components/inbox_line_item_detail_discussion_header.js":352,"./components/inbox_line_item_detail_forum_post.js":353,"./components/inbox_line_item_detail_forum_post_single.js":354,"./components/inbox_line_item_detail_lyrics_diff.js":355,"./components/inbox_line_item_detail_object.js":356,"./components/inbox_line_item_message.js":357,"./components/iq_inbox.js":358,"./components/iq_notification_list.js":359,"./components/leaderboard_ad.js":360,"./components/lyrics_edit_proposal.js":361,"./components/lyrics_edit_proposal_form.js":362,"./components/lyrics_edit_proposal_moderation.js":363,"./components/lyrics_export_preview.js":364,"./components/lyrics_sync_editor.js":365,"./components/lyrics_sync_home.js":366,"./components/manage_chart_item.js":367,"./components/manage_roles.js":368,"./components/marquee_ad.js":369,"./components/media_player.js":370,"./components/merge_artist_form.js":371,"./components/messages_inbox.js":372,"./components/mini_album_card.js":373,"./components/mini_annotatable_card.js":374,"./components/mini_article_card.js":375,"./components/mini_artist_card.js":376,"./components/mini_song_card.js":377,"./components/mini_user_card.js":378,"./components/mini_video_card.js":379,"./components/missing_metadata_form.js":380,"./components/notification_inbox.js":381,"./components/other_users_with_ip.js":382,"./components/page_transition_overlay.js":383,"./components/paginated_accomplishments.js":384,"./components/paginated_leaderboard.js":385,"./components/profile_admin_pane.js":386,"./components/profile_all_activity.js":387,"./components/profile_annotation.js":388,"./components/profile_artist_description_preview.js":389,"./components/profile_artist_pane.js":390,"./components/profile_contributions_annotations.js":391,"./components/profile_contributions_answers.js":392,"./components/profile_contributions_articles.js":393,"./components/profile_contributions_comments.js":394,"./components/profile_contributions_group.js":395,"./components/profile_contributions_pyongs.js":396,"./components/profile_contributions_questions.js":397,"./components/profile_contributions_transcriptions.js":398,"./components/profile_followers.js":399,"./components/profile_identity.js":400,"./components/profile_page.js":401,"./components/profile_user_description_preview.js":402,"./components/profile_user_pane.js":403,"./components/question.js":404,"./components/question_form.js":405,"./components/question_list.js":406,"./components/reasons_toggle.js":407,"./components/recent_signups_page.js":408,"./components/recirculated_content.js":409,"./components/relevant_videos.js":410,"./components/report_abuse.js":411,"./components/routable_page.js":412,"./components/routable_profile_page.js":413,"./components/routable_user_page.js":414,"./components/routed_page.js":415,"./components/search_result_item.js":416,"./components/search_result_items.js":417,"./components/search_result_paginated_section.js":418,"./components/search_result_section.js":419,"./components/search_results.js":420,"./components/search_results_page.js":421,"./components/select_dropdown.js":422,"./components/solidarity_banner.js":423,"./components/song_activity_stream.js":424,"./components/song_album.js":425,"./components/song_albums.js":426,"./components/song_attribution_visualization.js":427,"./components/song_color_gradient_picker.js":428,"./components/song_header_media_player_controls.js":429,"./components/song_metadata_song_relationships_input.js":430,"./components/song_missing_metadata.js":431,"./components/song_page.js":432,"./components/song_page_sidebar_multi_placement.js":433,"./components/song_preview.js":434,"./components/song_story_carousel.js":435,"./components/song_story_featured_story_placement.js":436,"./components/song_story_gallery_page.js":437,"./components/song_story_lead_story_placement.js":438,"./components/song_story_modal.js":439,"./components/song_story_sticky_placement.js":440,"./components/song_top_verified_artist.js":441,"./components/song_verified_artists.js":442,"./components/song_verified_artists_section.js":443,"./components/song_verified_artists_section_single.js":444,"./components/spam_status.js":445,"./components/square_item_and_iq.js":446,"./components/standalone_inbox.js":447,"./components/standalone_search.js":448,"./components/statistics_panel.js":449,"./components/statistics_panel_item.js":450,"./components/twitter_share_button.js":451,"./components/user_attribution.js":452,"./components/user_identities.js":453,"./components/user_info_with_actions.js":454,"./components/user_moderation.js":455,"./components/vertical_album_card.js":456,"./components/vertical_search_result_item.js":457,"./components/vertical_search_result_items.js":458,"./components/video_carousel.js":459,"./components/video_edit_form.js":460,"./components/video_list_edit_form.js":461,"./components/video_list_page.js":462,"./components/video_list_video.js":463,"./components/video_page.js":464,"./components/video_relevance_reason.js":465,"./components/videos_modal.js":466,"./components/web_annotator_manager.js":467,"./components/web_annotator_manager_errors.js":468,"./components/web_annotator_roles_table.js":469,"./components/youtube_subscribe_button.js":470,"./constants/ad_config.js":471,"./constants/analytics_config.js":472,"./constants/diff_match_patch.js":473,"./constants/mobile_device.js":474,"./controllers/article_form_ctrl.js":475,"./controllers/custom_app_notification_ctrl.js":476,"./controllers/dev_ctrl.js":477,"./controllers/fact_track_annotation_edit_ctrl.js":478,"./controllers/fact_track_song_edit_ctrl.js":479,"./controllers/header_ctrl.js":480,"./controllers/song_ctrl.js":481,"./directives/add_annotation.js":482,"./directives/always_dirty.js":483,"./directives/amp_iframe_resizable.js":484,"./directives/annotatable_image.js":485,"./directives/annotation.js":486,"./directives/annotation_edit.js":487,"./directives/annotation_edits.js":488,"./directives/annotation_fragment.js":489,"./directives/annotation_history.js":490,"./directives/annotation_placeholder.js":491,"./directives/annotation_sidebar.js":492,"./directives/apply_annotation_arrow_class.js":493,"./directives/authentication_form.js":494,"./directives/auto_resize_iframe.js":495,"./directives/autocomplete_tags_input.js":496,"./directives/autocomplete_with.js":497,"./directives/brightcove.js":498,"./directives/class_for_browser.js":499,"./directives/class_for_duration.js":500,"./directives/click_outside.js":501,"./directives/click_to_load.js":502,"./directives/clipped_background_image.js":503,"./directives/comment.js":504,"./directives/comment_form.js":505,"./directives/comments_placeholder.js":506,"./directives/component_date_input.js":507,"./directives/compose_message.js":508,"./directives/confirm.js":509,"./directives/conversation_messages.js":510,"./directives/conversation_with_user.js":511,"./directives/conversations.js":512,"./directives/copy_to_clipboard.js":513,"./directives/copy_value_to_scope.js":514,"./directives/cosigns.js":515,"./directives/delayed_href.js":516,"./directives/delimited_keys.js":517,"./directives/description_referent.js":518,"./directives/detect_image_diffs.js":519,"./directives/dirtyable.js":520,"./directives/display_unless_cookie.js":521,"./directives/drag_and_drop.js":522,"./directives/editable_markdown.js":524,"./directives/embedly.js":525,"./directives/embedly_player.js":529,"./directives/empty_copy_content.js":531,"./directives/expandable_accordion_section.js":532,"./directives/expandable_list.js":533,"./directives/exports_form_api.js":534,"./directives/fact_track_simulator.js":535,"./directives/filepicker_input.js":536,"./directives/flash_messages.js":537,"./directives/focus_on_change.js":538,"./directives/follow_button.js":539,"./directives/global_error_message.js":540,"./directives/global_message.js":541,"./directives/handle_intra_page_links.js":542,"./directives/handle_routable_links.js":543,"./directives/header_menu_item.js":544,"./directives/hide_song_form.js":545,"./directives/http_method.js":546,"./directives/inbox_line_item.js":547,"./directives/inbox_line_item_action_icon.js":548,"./directives/inbox_line_item_detail.js":549,"./directives/infinite_scroll.js":550,"./directives/insertable_at_cursor.js":552,"./directives/kb.js":553,"./directives/keep_in_view.js":555,"./directives/leaderboard.js":556,"./directives/links_navigable_by_arrow_keys.js":557,"./directives/local_referent_routing.js":558,"./directives/lock_scroll_position_on_ios.js":559,"./directives/lyric_sync_timestamp_input.js":560,"./directives/lyrics.js":561,"./directives/lyrics_sync_keyboard.js":562,"./directives/markdown_preview.js":563,"./directives/media_controls.js":564,"./directives/mentionable.js":565,"./directives/metadata_custom_performance_role_input.js":566,"./directives/metadata_input_and_label.js":567,"./directives/modal_window.js":568,"./directives/mousetrap_input.js":569,"./directives/mutually_exclusive_switches.js":570,"./directives/navigate_on_click.js":571,"./directives/new_conversation.js":572,"./directives/ng_autofocus.js":573,"./directives/ng_body_class.js":574,"./directives/ng_click_disabled.js":575,"./directives/odometer.js":576,"./directives/on_hover_with_no_digest.js":577,"./directives/on_iframe_load.js":578,"./directives/on_inner_height_change.js":579,"./directives/on_load.js":580,"./directives/open_links_in_new_window.js":581,"./directives/placeholder_spinner.js":582,"./directives/placeholder_text.js":583,"./directives/placeholder_user_badge.js":584,"./directives/play_pause_button.js":585,"./directives/position_beside.js":586,"./directives/preload.js":587,"./directives/prevent_default_click.js":588,"./directives/prevent_default_keydown.js":589,"./directives/primis_player.js":590,"./directives/proxied_image.js":591,"./directives/pusher.js":592,"./directives/pyong_button.js":593,"./directives/pyong_form.js":594,"./directives/quick_search.js":595,"./directives/referent_fragment_container.js":596,"./directives/release_date.js":597,"./directives/remove_class_on_angular_load.js":598,"./directives/role_icon.js":599,"./directives/role_selection_dialog.js":600,"./directives/scroll_from_bottom.js":601,"./directives/scroll_only_this_element.js":602,"./directives/scroll_point.js":603,"./directives/scroll_to_bottom_when.js":604,"./directives/scroll_to_top_on_change.js":605,"./directives/scrollable_data.js":606,"./directives/scrubber.js":607,"./directives/search_form.js":608,"./directives/select_all_on_click.js":689,"./directives/set_class_before_navigate.js":690,"./directives/set_cookie_and_close_on_click.js":691,"./directives/set_desired_location.js":692,"./directives/share_buttons.js":693,"./directives/show_arrow_at_offset.js":694,"./directives/show_if_browser.js":695,"./directives/simple_datetime_input.js":696,"./directives/sized_src.js":697,"./directives/slide_down.js":698,"./directives/slide_over_pane.js":699,"./directives/slide_up_on.js":700,"./directives/song_activity.js":701,"./directives/song_admin_menu.js":702,"./directives/song_metadata.js":703,"./directives/song_metadata_form.js":704,"./directives/song_metadata_preview.js":705,"./directives/song_primary_album.js":706,"./directives/soundcloud.js":707,"./directives/spotify_onboarding.js":708,"./directives/standalone_referent.js":709,"./directives/standard_rich_content.js":710,"./directives/sticky.js":711,"./directives/stop_propagation.js":712,"./directives/submit_on_cmd_enter.js":713,"./directives/svg.js":714,"./directives/tether_drop.js":715,"./directives/text_corrector.js":716,"./directives/text_selection_changed.js":717,"./directives/textarea.js":718,"./directives/time_ago.js":719,"./directives/timestamp_input.js":720,"./directives/tracking.js":721,"./directives/tracks_link_with_class.js":722,"./directives/transclude_injecting_local_scope.js":723,"./directives/upwards_infinite_scroll.js":724,"./directives/user_badge.js":725,"./directives/user_badge_and_timestamp.js":726,"./directives/user_tooltip.js":727,"./directives/voters.js":728,"./directives/voting.js":729,"./directives/watch_images_loaded.js":730,"./directives/web_annotator_role_row.js":731,"./directives/yields_bounding_box_height.js":732,"./directives/youtube_player.js":733,"./factories/$debounce.js":734,"./factories/$immediate.js":735,"./factories/$throttle.js":736,"./factories/ab_test.js":737,"./factories/ab_test_client.js":738,"./factories/accomplishment_client.js":739,"./factories/admin_task_client.js":740,"./factories/ads.js":741,"./factories/adwords_ad_client.js":742,"./factories/adwords_ad_group_client.js":743,"./factories/adwords_campaign_client.js":744,"./factories/adwords_network_client.js":745,"./factories/album_client.js":746,"./factories/annotation_client.js":747,"./factories/answer_client.js":748,"./factories/api_client.js":749,"./factories/app_config.js":750,"./factories/apple_audio_playback.js":751,"./factories/apple_match_evaluations_client.js":752,"./factories/application_bootstrap.js":753,"./factories/article_client.js":754,"./factories/artist_client.js":755,"./factories/asset_client.js":756,"./factories/async_analytics.js":757,"./factories/attempt.js":758,"./factories/authentication_client.js":759,"./factories/autosize.js":760,"./factories/before_unload_check.js":763,"./factories/bindings.js":764,"./factories/bowser.js":765,"./factories/branded_chart_client.js":766,"./factories/brightcove.js":767,"./factories/channel.js":768,"./factories/chart_client.js":769,"./factories/classnames.js":770,"./factories/clipboard.js":773,"./factories/comment_client.js":776,"./factories/contribution_opportunity_assignment_client.js":777,"./factories/conversation_client.js":778,"./factories/cookies.js":779,"./factories/cover_art_client.js":780,"./factories/cursored_data_feed.js":781,"./factories/custom_app_notification_client.js":782,"./factories/custom_performance_role_client.js":783,"./factories/date_tools.js":784,"./factories/discussion_client.js":785,"./factories/eager_loader.js":786,"./factories/event_emitter.js":787,"./factories/facebook.js":788,"./factories/feedback_client.js":789,"./factories/filepicker.js":790,"./factories/follow_client.js":791,"./factories/get_script.js":792,"./factories/global_error_bus.js":793,"./factories/global_error_interceptor.js":794,"./factories/global_page_state_bus.js":795,"./factories/global_refs.js":796,"./factories/google.js":797,"./factories/html_constants.js":798,"./factories/i18n.js":799,"./factories/identity_client.js":800,"./factories/image_transform.js":801,"./factories/inbox_client.js":802,"./factories/intersection_observer.js":803,"./factories/iq.js":804,"./factories/leaderboard_client.js":805,"./factories/librato.js":806,"./factories/librato_beacon.js":807,"./factories/link_events.js":808,"./factories/local_storage.js":809,"./factories/lookup_client.js":810,"./factories/lyrics.js":811,"./factories/lyrics_anchorer.js":812,"./factories/lyrics_edit_proposal.js":813,"./factories/lyrics_edit_proposal_client.js":814,"./factories/lyrics_editing.js":815,"./factories/lyrics_synchronization_client.js":817,"./factories/markdown.js":818,"./factories/markdown_helpers.js":821,"./factories/markdown_plaintext_finder_regex.js":822,"./factories/markdown_preview_client.js":823,"./factories/mention_client.js":824,"./factories/message_client.js":825,"./factories/meta_tag_data.js":826,"./factories/mixed_data_feed.js":827,"./factories/model_router.js":828,"./factories/moment.js":829,"./factories/mousetrap.js":830,"./factories/music_kit.js":833,"./factories/mutation_observer.js":835,"./factories/new_relic.js":836,"./factories/odometer.js":837,"./factories/on_within_visibility_range.js":840,"./factories/only_changes.js":841,"./factories/onsite_interceptor.js":842,"./factories/page_data_client.js":843,"./factories/page_transition.js":844,"./factories/page_visibility.js":845,"./factories/paged_data_feed.js":846,"./factories/parse_time_string.js":847,"./factories/patch_structured_text.js":848,"./factories/performance_mark.js":849,"./factories/player_js":132,"./factories/player_js.js":132,"./factories/preloader.js":850,"./factories/promise_queue.js":851,"./factories/pusher.js":852,"./factories/pyong_client.js":854,"./factories/querystring.js":855,"./factories/question_client.js":857,"./factories/react_song_page_service.js":858,"./factories/referent_client.js":859,"./factories/referent_element_map.js":860,"./factories/referent_helper.js":861,"./factories/referent_locator.js":862,"./factories/referent_registry.js":863,"./factories/report_abuse_client.js":864,"./factories/retry_failure_interceptor.js":865,"./factories/reversible.js":866,"./factories/scroll_focus.js":867,"./factories/scroll_point.js":868,"./factories/search_client.js":869,"./factories/session.js":870,"./factories/session_config.js":871,"./factories/shim_inner_html_prop.js":872,"./factories/signed_out_created_content.js":873,"./factories/smart_routing.js":874,"./factories/song_client.js":875,"./factories/soundcloud.js":876,"./factories/spotify_annotation_client.js":877,"./factories/spotify_client.js":878,"./factories/spotify_player.js":879,"./factories/spotify_player_client.js":880,"./factories/spotify_socket.js":881,"./factories/stop_watch.js":882,"./factories/story_client.js":883,"./factories/string_has_unmatched_parentheses.js":884,"./factories/string_to_symbol_array.js":885,"./factories/structured_text.js":886,"./factories/tag_client.js":887,"./factories/tether_drop.js":888,"./factories/text_selection.js":891,"./factories/timestamped_data_feed.js":892,"./factories/top_bar_indicators_loader.js":893,"./factories/tracking.js":1048,"./factories/twitter.js":895,"./factories/user_client.js":896,"./factories/video_client.js":897,"./factories/video_list_client.js":898,"./factories/video_placement.js":899,"./factories/video_registry.js":900,"./factories/video_sources_client.js":901,"./factories/vote_client.js":902,"./factories/wait_for_global.js":903,"./factories/wait_until.js":904,"./factories/waypoint.js":905,"./factories/web_annotator_client.js":908,"./factories/web_audio_player.js":909,"./factories/web_vitals.js":910,"./factories/window_title.js":913,"./factories/youtube.js":914,"./filters/abbreviate_big_number.js":915,"./filters/and_more.js":916,"./filters/bounded_count.js":917,"./filters/capitalize.js":918,"./filters/cast_to_date.js":919,"./filters/description_annotation_name.js":920,"./filters/drop.js":921,"./filters/generic_line_item_message.js":922,"./filters/highlight_braced.js":923,"./filters/human_readable_datetime.js":924,"./filters/i18n.js":925,"./filters/imprecise_date.js":926,"./filters/indefinitize.js":927,"./filters/millis_to_duration.js":928,"./filters/milliseconds_to_seconds.js":929,"./filters/min.js":930,"./filters/min_by.js":931,"./filters/minimum_readable_time.js":932,"./filters/minus_modulo.js":933,"./filters/model_human_name.js":934,"./filters/rich_content_preview.js":935,"./filters/role_human_name.js":936,"./filters/signed_number.js":937,"./filters/snake_case.js":938,"./filters/spotify_artist_metadata.js":939,"./filters/svg.js":940,"./filters/timestamp_for_display.js":941,"./filters/to_utc.js":942,"./filters/truncate_to_boundary.js":943,"./filters/with_indefinite_article.js":944,"./filters/without_zero_width_spaces.js":945,"./values/current_flash_messages.js":946,"./values/preload_cache.js":947,"./values/xpath_range.js":948};function i(t){var e=o(t);return n(e)}function o(t){if(!n.o(r,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return r[t]}i.keys=function(){return Object.keys(r)},i.resolve=o,t.exports=i,i.id=279},function(t,e){angular.module("genius").component("activeReferent",{bindings:{referent:"<",on_navigate:"&onNavigate",on_close:"&onClose"},templateUrl:"active_referent.html",controller:["Cookies",function(t){var e="referent_open_count_for_interstitial";this.$onInit=function(){var n=this;this.session_referent_open_count=Number(t.get(e)||0),this.increment_session_referent_open_count=function(){this.session_referent_open_count+=1,this.session_referent_open_count<=2&&t.put(e,this.session_referent_open_count,{expires:.25})},this.should_show_interstitial=function(){return 2===n.session_referent_open_count}},this.$onChanges=function(t){t.referent&&t.referent.currentValue&&this.increment_session_referent_open_count()}}]})},function(t,e){angular.module("genius").component("adContainerWithCloseButton",{templateUrl:"ad_container_with_close_button.html",transclude:!0,controller:["$window","$element","$timeout",function(t,e,n){var r=this;t.googletag&&t.googletag.cmd.push((function(){t.googletag.pubads().addEventListener("slotRenderEnded",(function(t){!t.isEmpty&&e.find("#".concat(t.slot.getSlotElementId())).length>0&&n((function(){return r.show_close_button=!0}),1e4)}))}))}]})},function(t,e){angular.module("genius").component("adminTask",{bindings:{task:"<"},templateUrl:"admin_task.html",controller:["AdminTaskClient",function(t){var e=this;this.$onChanges=function(t){e.property_values=_.reduce(t.task.currentValue.task_properties,(function(t,e){return t[e.name]=e.default,t}),{})},this.is_url=function(t){return/^https?:\/\/\S+$/.test(t)},this.perform_task=function(){e.task.confirmation&&!confirm(e.task.confirmation)||(e.validation_errors=null,e.success_message=null,e.tabular_data=null,e.saving=!0,t.perform_task(e.task,e.property_values).then((function(t){e.success_message=t.admin_task_result.success_message,e.tabular_data=t.admin_task_result.tabular_data})).catch((function(t){t.response.validation_errors?e.validation_errors=t.response.validation_errors:e.validation_errors={base:["Something unexpected went wrong"]}})).finally((function(){return e.saving=!1})))}}]})},function(t,e){angular.module("genius").component("adminTasksPage",{templateUrl:"admin_tasks_page.html",controller:Object.assign(["$scope","AdminTaskClient",function(t,e){var n=this;this.no_task={name:"__default",label:"--Choose a task to run--"},this.$routerOnActivate=function(e){n.tasks=e.routeData.page_data.tasks,t.selected_task=n.no_task,n.select_tasks=[n.no_task].concat(_.sortBy(n.tasks.map((function(t){return{name:t.name,label:t.human_name}})),"label"))},t.$watch("selected_task",(function(r){t.admin_task=null,r.name!==n.no_task.name&&e.get(r.name).then((function(e){t.admin_task=e.admin_task}))}))}],{$canActivate:["$nextInstruction","$prevInstruction","PageTransition",function(t,e,n){return n.by_router_instruction(t,e)}]})})},function(t,e){angular.module("genius").component("adminUserInfo",{templateUrl:"admin_user_info.html",bindings:{user:"<"}})},function(t,e){angular.module("genius").component("adwordsAdForm",{templateUrl:"adwords_ad_form.html",bindings:{onSave:"&",onClose:"&",ad_group:"<adGroup"},controller:["AdwordsAdClient",function(t){var e=this;this.save=function(n){e.saving=!0,t.create(e.ad_group.id,n).then((function(){this.onSave(),this.onClose()})).finally((function(){Reflect.deleteProperty(e,"saving")}))}}]})},function(t,e){angular.module("genius").component("adwordsAdGroupForm",{templateUrl:"adwords_ad_group_form.html",bindings:{onSave:"&",onClose:"&",campaign:"<"},controller:["AdwordsAdGroupClient",function(t){var e=this;this.save=function(n){e.saving=!0,t.create(e.campaign.id,n).then((function(){e.onSave(),e.onClose()})).finally((function(){Reflect.deleteProperty(e,"saving")}))}}]})},function(t,e){angular.module("genius").component("adwordsAdGroupList",{templateUrl:"adwords_ad_group_list.html",bindings:{campaign:"<"},controller:["AdwordsAdGroupClient","AdwordsAdClient",function(t,e){var n=this;this.change_ad_status=function(t,n){e.update(t.id,{status:n}).then((function(e){_.assign(t,e)}))},this.load_ad_groups=function(){n.loading=!0,t.all(n.campaign.id).then((function(t){n.ad_groups=t})).finally((function(){Reflect.deleteProperty(n,"loading")}))},this.$onChanges=function(t){t.campaign&&n.load_ad_groups()}}]})},function(t,e){angular.module("genius").component("adwordsCampaignForm",{templateUrl:"adwords_campaign_form.html",bindings:{onSave:"&",onClose:"&"},controller:["AdwordsNetworkClient","AdwordsCampaignClient",function(t,e){var n=this;this.available_adwords_networks=[],this.save=function(t){return n.saving=!0,e.create(t).then((function(){this.onSave(),this.onClose()})).finally((function(){Reflect.deleteProperty(n,"saving")}))},t.all().then((function(t){n.available_adwords_networks=t}))}]})},function(t,e){angular.module("genius").component("adwordsCampaignList",{templateUrl:"adwords_campaign_list.html",bindings:{onSelect:"&",selected_campaign:"<selectedCampaign"},controller:["AdwordsCampaignClient",function(t){var e=this;this.select=function(t){return e.onSelect({campaign:t})},this.load_campaigns=function(){e.loading=!0,t.all().then((function(t){e.grouped_campaigns=_.values(_.groupBy(t,"network.id"))})).finally((function(){Reflect.deleteProperty(e,"loading")}))},this.$onInit=this.load_campaigns}]})},function(t,e){angular.module("genius").component("adwordsEditor",{templateUrl:"adwords_editor.html"})},function(t,e){angular.module("genius").component("albumAdminMenu",{templateUrl:"album_admin_menu.html",bindings:{album:"<",album_appearances:"<albumAppearances"},controller:["Session","Attempt","AlbumClient","currentFlashMessages","$window",function(t,e,n,r,i){var o=this;this.actions=["destroy","unlock","lock","super_lock","sort_songs"];var a=["sort_songs"];this.can_perform=function(e){return t.has_permission(e,o.album)};var s=function(t){n.change_lock_state(o.album.id,t).then((function(e){r.push({type:"notice",message:"Successfully ".concat(t,"ed album")}),Object.assign(o.album,e)}))},c={destroy:function(){n.delete(o.album.id).then((function(){r.push({type:"notice",message:"Successfully deleted album"}),i.location.href="/"}))},lock:function(){return s("lock")},super_lock:function(){return s("super_lock")},unlock:function(){return s("unlock")},sort_songs:function(){return o.show_sorted_modal=!0}};this.attempt_admin_action=function(t){if(_.includes(a,t))return c[t]();e.admin_action(c[t],I18n.lookup("album.action_confirmations.".concat(t))||I18n.t("album.action_confirmations.admin_default"))},this.$onChanges=function(){o.has_admin_items=_(o.actions).some((function(t){return o.can_perform(t)}))},this.tracklist_markup=function(){var t="[".concat(o.album.artist.name,"](").concat(o.album.artist.url,") - [*").concat(o.album.name,"*](").concat(o.album.url,")");return"<b>".concat(t," Lyrics and Tracklist</b>\n\n")+o.album_appearances.map((function(t){var e=t.song.featured_artists.map((function(t){return t.name})).join(", ");return"".concat(t.track_number||"?",". [").concat(t.song.title,"](").concat(t.song.url,")").concat(e?" ft. ".concat(e):"")})).join("\n")}}]})},function(t,e){angular.module("genius").component("albumGrid",{templateUrl:"album_grid.html",bindings:{albums:"<",artist:"<",count:"<",variants:"<"},controller:["PagedDataFeed","ArtistClient",function(t,e){var n=this;this.$onChanges=function(r){r.artist&&(n.artist_album_scrollable_data=new t(_.partial(e.load_albums,n.artist.id),"albums"))}}]})},function(t,e){angular.module("genius").component("albumMetadataForm",{templateUrl:"album_metadata_form.html",bindings:{album_was:"<album",on_save:"&onSave",close:"&",yields_is_dirty:"&yieldsIsDirty"},controller:[function(){var t=this;this.$onInit=function(){t.album=angular.copy(t.album_was)},this.save=function(){t.on_save({album:t.album}).catch((function(e){t.error=e}))}}]})},function(t,e){angular.module("genius").component("albumPage",{templateUrl:"album_page.html",controller:Object.assign(["VideoRegistry","mobile_device","Tracking","AlbumClient","Session","Attempt","Reversible","SmartRouting","$q","$location","$immediate",function(t,e,n,r,i,o,a,s,c,l,u){var d=this;this.has_permission=function(t){return i.has_permission(t,d.page_data.album)},this.user_signed_in=i.user_signed_in,this.attempt_close=o.close_form,this.show_report_abuse=i.has_feature("report_abuse"),this.is_released=function(){var t=d.page_data.album.release_date_components,e=new Date;return e.getFullYear()===t.year&&t.month?e.getMonth()+1===t.month&&t.day?e.getDate()>=t.day:e.getMonth()+1>=t.month:e.getFullYear()>=t.year},this.close_form=function(){d.editing=!1,d.current_edit_panel=null},this.save=function(t){d.saving=!0;var e=a.modify(d.page_data.album,t);return r.update(d.page_data.album.id,t).then((function(t){Object.assign(d.page_data.album,t),d.close_form()})).catch((function(t){return e(),c.reject(t)})).finally((function(){d.saving=!1}))},this.$routerCanReuse=function(t){return"album"===t.routeData.data.type?"/".concat(t.urlPath)===d.page_data.path:"album_cover_art"===t.routeData.data.type&&Boolean(p(t.params.cover_art_id))},this.$routerOnReuse=function(t){"album_cover_art"===t.routeData.data.type?d.focused_cover_art_id=parseInt(t.params.cover_art_id):d.focused_cover_art_id=null},this.$routerOnActivate=function(i){if(d.page_data=i.routeData.page_data,d.get_leaderboard_page=function(t){return r.load_leaderboard(d.page_data.album.id,t)},t.register_page(d.page_data.album,e?"mobile_album_page":"desktop_album_page"),n.delayed_track("Album Page Load",{"Album ID":d.page_data.album.id}),i.params.cover_art_id){var o=p(i.params.cover_art_id);o&&u((function(){return s.navigate_to_absolute_url(o.url)}))}},this.unfocus_cover_art=function(){return l.url(d.page_data.path)};var p=function(t){var e=parseInt(t),n=_.get(d,["page_data","album","cover_arts"],[]);return _.find(n,(function(t){return t.id===e}))}}],{$canActivate:["$nextInstruction","$prevInstruction","PageTransition",function(t,e,n){return n.by_router_instruction(t,e)}]})})},function(t,e){angular.module("genius").component("albumTracklistRow",{bindings:{album_appearance:"<albumAppearance",show_artist:"<showArtist"},templateUrl:"album_tracklist_row.html",controller:["Session",function(t){var e=this;this.has_credits=function(){return e.album_appearance.song.featured_artists.length||e.album_appearance.song.producer_artists.length||e.album_appearance.song.writer_artists.length},this.can=function(n){return t.has_permission(n,e.album_appearance.song)}}]})},function(t,e){var n;n=["to identify songs on the go","to get lyrics to the songs you play","to read lyrics offline"],angular.module("genius").component("androidBanner",{templateUrl:"android_banner.html",bindings:{page:"@"},controller:["Bowser","AppConfig",function(t,e){this.benefit=_.sample(n),this.is_android=t.android,this.play_store_url=e.play_store_url}]})},function(t,e){angular.module("genius").component("annotationEmbed",{bindings:{referent:"<",simple:"<"},templateUrl:"annotation_embed.html",controller:["ReferentHelper",function(t){var e=this;this.$onChanges=function(n){n.referent&&(e.display_mode=t.display_mode_by_classification(e.referent.classification))}}]})},function(t,e){angular.module("genius").component("annotationPreview",{bindings:{annotation_preview:"<annotationPreview",click_handler:"&clickHandler",dismissal_handler:"&dismissalHandler",reactivation_handler:"&reactivationHandler",is_dismissed:"<isDismissed"},templateUrl:"annotation_preview.html",controller:["$scope","Tracking",function(t,e){var n=this;t.$watch("$ctrl.annotation_preview",(function(){n.annotation_preview&&(n.annotation_content_switch=!n.annotation_content_switch)})),this.on_click=function(){e.track("Tap Annotation Teaser",n.tracking_params()),n.click_handler()},this.tracking_params=function(){return{"Annotation ID":_.get(n.annotation_preview,"id")}}}]})},function(t,e){angular.module("genius").component("annotationShareMenu",{templateUrl:"annotation_share_menu.html",bindings:{annotation:"<",variants:"<"}})},function(t,e){angular.module("genius").component("answer",{bindings:{answer:"<",question:"<",yieldsApi:"&",on_pending_event:"&onPendingEvent",yields_iq:"&yieldsIq",variants:"<"},templateUrl:"answer.html",controller:["$scope","Reversible","AnswerClient","Session",function(t,e,n,r){var i,o=this;this.user_signed_in=r.user_signed_in,this.source_form_open=this.answer&&this.answer.answer_source,this.can=function(t,e){return r.has_permission(t,e)},this.show_contributors=function(){return _.get(o,"answer.answer_source.source_name")?o.can("update_answer_source",o.question)?o.question.contributors_count:void 0:o.question.contributors_count},this.answer_is_unwritten=function(){return!_.get(o,"answer.body.html")},this.question_is_archived=function(){return"archived"===o.question.state},this.question_is_pinned=function(){return"pinned"===o.question.state},this.start_editing=function(){o.answer||(o.answer={body:{}}),o.answer._editing=_.defaults(o.answer._editing||{},{_form_active:!0,html:o.answer.body.html,markdown:o.answer.body.markdown})},this.cancel_editing=function(){Reflect.deleteProperty(o.answer,"_editing")},this.finish_editing=function(){if(!o.disable_saving_with){o.disable_saving_with="Saving",o.errors=null;var t=e.modify(o.answer,{"_editing._form_active":!1});!o.source_form_open&&o.answer.answer_source&&(o.answer.answer_source=null);var r=n.save(o.answer,{question:o.question}).then(o.cancel_editing);o.on_pending_event({event:"UserCreateAnswer",result:r}),r.catch((function(e){o.errors=e.errors,t()})).finally((function(){o.disable_saving_with=!1}))}},this.destroy=function(){if(!confirm("Are you sure?"))return!1;var t=o.answer;o.answer={body:{}},n.destroy(t,{question:o.question}).catch((function(){o.answer=t}))},this.showing_contributors=!1,this.toggle_contributors=function(){o.showing_contributors=!o.showing_contributors},this.show_answer_form_by_default=function(){return o.can("add_answer",o.question)&&o.answer_is_unwritten()&&!o.question_is_archived()},this.show_answer_edit_form=function(){return _.get(o,"answer._editing._form_active")||o.show_answer_form_by_default()},this.show_answer=function(){return!o.answer_is_unwritten()&&!_.get(o,"answer._editing._form_active")},this.show_blank_answer_message=function(){return o.answer_is_unwritten()&&!o.show_answer_form_by_default()&&!_.get(o,"answer._editing._form_active")};var a=this;i={start_editing:function(){a.start_editing()},can_edit:function(){return a.can("edit",a.answer)},clear_answer:function(){a.destroy()},can_clear:function(){return a.can("destroy",a.answer)}},this.yieldsApi({answerApi:i}),r.user_signed_in&&(this.iq_api=_.cloneDeep(this.question.current_user_metadata.iq_by_action),t.$watch("$ctrl.question.votes_total",(function(t){o.iq_api.answer.primary.multiplier=_.max([t,1])})),t.$watch("$ctrl.answer._editing.pin_question",(function(t){o.iq_api.answer.pin.applicable=t||"pinned"===o.question.state})),t.$watch("$ctrl.question.state",(function(t){o.iq_api.answer.pin.applicable="pinned"===t||_.get(o.answer,"_editing.pin_question")})),this.yields_iq({iq_api:this.iq_api}))}]})},function(t,e){angular.module("genius").component("appleMatchEvaluationsPage",{templateUrl:"apple_match_evaluations_page.html",controller:Object.assign(["$sce","AppleMatchEvaluationsClient","$timeout","$document",function(t,e,n,r){var i=this;this.$routerOnActivate=function(e){i.evaluation=e.routeData.page_data,i.model={notes:i.evaluation.notes},i.song=i.evaluation.song,i.apple_embed_url=t.trustAsResourceUrl(i.evaluation.apple_embed_url),i.apple_albums=i.evaluation.apple_albums},this.submit=function(t){i.saving=t;var o=_.merge({state:t},i.model);e.submit(i.evaluation.id,o).then((function(t){n((function(){return r[0].location="apple_match_evaluations/new"}),200)}))},this.skip=function(){i.saving="skip",e.skip(i.evaluation.id).then((function(t){n((function(){return r[0].location="apple_match_evaluations/new"}),200)}))}}],{$canActivate:["$nextInstruction","$prevInstruction","PageTransition",function(t,e,n){return n.by_router_instruction(t,e)}]})})},function(t,e){angular.module("genius").component("appleMusicPlayer",{templateUrl:"apple_music_player.html",bindings:{url:"<",apple_music_id:"<appleMusicId",position_from_top:"<positionFromTop",on_in_apple_music_deal:"&onInAppleMusicDeal",yields_api:"&yieldsApi",on_play_state_change:"&onPlayStateChange"},controller:["AppConfig","$window","$sce","$element","$scope","Tracking","$timeout","Channel","LocalStorage","Session",function(t,e,n,r,i,o,a,s,c,l){var u=this,d=[{model:"iPhone 8",min_expanded_viewport_height_difference:75,max_expanded_viewport_height_difference:85,toolbar_height:45},{model:"iPhone X",min_expanded_viewport_height_difference:113,max_expanded_viewport_height_difference:123,toolbar_height:84}];this.$onInit=function(){u.position_from_top&&(u.update_player_top_value(),e.addEventListener("resize",(function(){return u.update_player_top_value()}))),e.addEventListener("message",(function(e){e.origin==="https://".concat(t.canonical_domain)&&"in_apple_music_deal"===e.data&&i.$applyAsync((function(){u.in_apple_music_deal=!0,u.on_in_apple_music_deal({in_apple_music_deal:!0}),u.position_from_top&&a((function(){return u.update_player_top_value()}),0)}))})),!u.apple_music_id&&c.safe_get_item("apple_musickit_authorized",!1)&&(u.dismissed=!0),c.safe_get_item("apple_music_player_dismissed",!1)&&l.user_signed_in&&(u.dismissed=!0)},this.$onChanges=function(t){t.url&&(u.src=n.trustAsUrl(u.url))},this.iframe_loaded=function(t){i.$applyAsync((function(){return u.loaded=!0}));var e=s.build({window:t.contentWindow,origin:"*",scope:"com.genius.Genius"});e.bind("player_play_pause",(function(t,e){return i.$applyAsync((function(){return u.on_play_state_change({play_state:e})}))})),e.bind("player_auth",(function(t,e){e&&!u.apple_music_id&&u.dismiss()}));var n={toggle_play:function(){u.dismissed=!1,e.notify({method:"header_play_pause",params:{}})}};u.yields_api({api:n}),u.dismiss=function(){o.track("apple_player:player_dismissed",{provider:"apple",provider_id:u.apple_music_id}),u.dismissed=!0,e.notify({method:"dismiss",params:{}})}};var p=window.innerHeight;this.update_player_top_value=function(t){if(!u.position_from_top)return!1;var n,o,a=t||_.get(r.get(0),["children",0,"clientHeight"])||91,s=e.innerHeight,c=(n=s-p,o=_.find(d,(function(t){var e=t.min_expanded_viewport_height_difference,r=t.max_expanded_viewport_height_difference;return _.inRange(n,e,r+1)})),_.get(o,["toolbar_height"],0)),l="".concat(s-a-(c>0?c-16:0),"px");u.top!==l&&i.$applyAsync((function(){return u.top=l}))},this.on_resize=function(t){var e=t.width;u.dismissed=185===e,u.dismissed?c.safe_set_item("apple_music_player_dismissed",!0):c.safe_set_item("apple_music_player_dismissed",!1)}}]})},function(t,e){angular.module("genius").component("articleAdminBar",{bindings:{article:"<",video:"<"},templateUrl:"article_admin_bar.html",controller:["Session","Attempt","ArticleClient","currentFlashMessages","SmartRouting","$window",function(t,e,n,r,i,o){var a=this;this.current_user=t.current_user,this.can=function(e,n){return t.has_permission(e,n)},this.edit_article=function(){i.navigate_to_absolute_url("".concat(o.location.origin,"/articles/").concat(a.article.id,"/edit"))},this.manage_articles=function(){i.navigate_to_absolute_url("".concat(o.location.origin,"/articles"))},this.delete=function(){e.admin_action((function(){n.delete(a.article.id).then((function(){r.push({type:"notice",message:"Successfully deleted article"}),o.location.href="/"}))}),"Are you sure you want to delete this article?")}}]})},function(t,e){angular.module("genius").component("articleAuthors",{bindings:{authors:"<"},templateUrl:"article_authors.html"})},function(t,e){angular.module("genius").component("articleContentActions",{templateUrl:"article_content_actions.html",bindings:{object:"<",type:"@",variants:"<"},controller:["$scope",function(t){var e=this;this.toggle_voters=function(){return e.showing_voters=!e.showing_voters},t.$on("vote_saved",(function(e){t.$broadcast("update_voters")}))}]})},function(t,e){angular.module("genius").component("articleContributorBadge",{bindings:{contributor:"<object"},templateUrl:"article_contributor_badge.html"})},function(t,e){angular.module("genius").component("articleIndexArrangeable",{bindings:{articles:"<"},templateUrl:"article_index_arrangeable.html",controller:["ArticleClient","BeforeUnloadCheck","$scope",function(t,e,n){var r=this,i=["home_top_hero","home_mobile_desktop_first","home_promo_unit","home_desktop_second","home_desktop_third"],o=["home_video_hero"],a="locked",s="active",c="saving";this.$onInit=function(){r.slot_sections={top:{name:"Top Section",slots:i,error:null},video:{name:"Video Section",slots:o,error:null}},r.arrange_mode=a,r.dirty=!1};var l=function(){return r.dirty};e.add(l),n.$on("$destroy",(function(){return e.remove(l)}));var u=function(t){return _.find(r.slot_sections,(function(e){return e.slots.includes(t)}))},d=function(t,e){var n=e.indexOf(t)+1;n===e.indexOf("home_promo_unit")&&n++;var i=e[n]||null;return{next_slot:i,next_article:r.article_for_slot(i)}},p=function(t){return t.featured_slot=null};this.arrange_mode_locked=function(){return r.arrange_mode===a},this.arrange_mode_active=function(){return r.arrange_mode===s},this.arrange_mode_saving=function(){return r.arrange_mode===c};var f=function(){r.error=null,r.slot_sections.video.error=null,r.slot_sections.top.error=null};this.place_article_into_slot=function(t,e){var n=r.articles.find((function(e){return e.id===t}));if(function(t,e){return f(),"home_video_hero"!==e||"video"===t.article_type||(r.slot_sections.video.error="only video articles can be placed in this slot",!1)}(n,e)){p(n);var i=r.article_for_slot(e);i&&i.id!==n.id&&function(t){for(var e=r.article_for_slot(t),n=u(t).slots;e;){var i=d(t,n),o=i.next_slot,a=i.next_article;e.featured_slot=o,e=a,t=o}}(e),n.featured_slot=e,r.dirty=!0}},this.clear_slot=function(t){p(r.article_for_slot(t)),r.dirty=!0},this.article_for_slot=function(t){return r.articles.find((function(e){return e.featured_slot&&e.featured_slot===t}))},this.unfeatured_articles=function(){return r.articles.filter((function(t){return!t.featured_slot}))},this.slot_holder_text=function(t,e){return"home_promo_unit"===e?"home promotional unit":"slot ".concat(t,", ").concat(u(e).name)},this.enable_rearranging=function(){r.previous_arrangement=_.cloneDeep(r.articles),r.arrange_mode=s},this.cancel_rearrange=function(){f(),r.articles=r.previous_arrangement,r.arrange_mode=a,r.dirty=!1};this.save_arrangement=function(){if(r.arrange_mode=c,f(),function(){for(var t=!1,e=0;e<i.length;e++){var n=i[e],o="home_promo_unit"===n||Boolean(r.article_for_slot(n));if(t&&o)return!0;o||(t=!0)}return!1}())return r.error="Saving cannot complete due to gaps in arrangement order",void(r.arrange_mode=s);t.update_featured_slots(r.articles.reduce((function(t,e){return e.featured_slot&&(t[e.id]=e.featured_slot),t}),{})).then((function(){r.arrange_mode=a,r.dirty=!1})).catch((function(t){r.arrange_mode=s,r.error="".concat(t.message,": ").concat(_.join(t.response.errors,", "))}))}}]})},function(t,e){angular.module("genius").component("articleIndexItem",{bindings:{article:"<",unfeature:"&?",disableGoToArticle:"=",feature:"&?",featureVideo:"&?"},templateUrl:"article_index_item.html",controller:["Session","$window",function(t,e){var n=this;this.can=function(e){return t.has_permission(e,n.article)},this.goToArticle=function(){n.disableGoToArticle||(e.location.href=n.article.path)},this.isVideoArticle=function(){return"video"===n.article.article_type},this.displayFeatureButton=function(){return n.can("change_featured_slot")&&n.feature},this.displayFeatureVideoButton=function(){return n.can("change_featured_slot")&&n.isVideoArticle()&&n.featureVideo},this.displayUnfeatureButton=function(){return n.can("change_featured_slot")&&n.article.featured_slot&&n.unfeature}}]})},function(t,e){angular.module("genius").component("articlePage",{templateUrl:"article_page.html",controller:Object.assign(["VideoRegistry","Tracking","MetaTagData","$sce",function(t,e,n,r){var i=this;this.$routerOnActivate=function(o){i.page_data=o.routeData.page_data,i.article_params=n.get("article_params"),i.article_update_url=r.trustAsUrl("/articles/".concat(i.page_data.article.id)),i.article_edit_url=r.trustAsUrl("/articles/".concat(i.page_data.article.id,"/edit_from_preview")),i.authenticity_token=n.get("authenticity_token"),t.register_page(i.page_data.article,"desktop_article_page"),e.delayed_track("Article Page View",{"Article ID":i.page_data.article.id,Title:i.page_data.article.title,Author:i.page_data.article.author.name,"Author ID":i.page_data.article.author.id,"Article Type":i.page_data.article.article_type,"Published At":new Date(1e3*i.page_data.article.published_at).toUTCString(),"Generic Sponsorship":i.page_data.article.generic_sponsorship}),i.video=_(i.page_data.article.media).find((function(t){return"video"===t.type||"video"===t._type}))}}],{$canActivate:["$nextInstruction","$prevInstruction","PageTransition",function(t,e,n){return n.by_router_instruction(t,e)}]})})},function(t,e){angular.module("genius").component("artistBadge",{bindings:{artist:"<"},templateUrl:"artist_badge.html"})},function(t,e){angular.module("genius").component("artistOpportunities",{bindings:{artist:"<"},templateUrl:"artist_opportunities.html",controller:["PagedDataFeed","ArtistClient",function(t,e){this.scrollable_data=new t(_.partial(e.contribution_opportunities,this.artist.id),"contribution_opportunities",{per_page:10})}]})},function(t,e){angular.module("genius").component("artistSongs",{templateUrl:"artist_songs.html",bindings:{artist:"<"},controller:["PagedDataFeed","SongClient","Session","$debounce",function(t,e,n,r){var i=this;this.search_text="",this.can=function(t,e){return n.has_permission(t,e)};var o=function(n){i.artist_song_infinite_scrollable_data=new t(_.partial(e.for_artist,i.artist.id),"songs",{sort:n})};this.sort_songs_by=function(t){i.sort_method!==t&&(i.search_text||o(t),i.sort_method=t)},this.search=function(){this.searching=!0,this.search_debounced()},this.search_debounced=r((function(){if(i.search_text){i.artist_song_infinite_scrollable_data=new t(_.partial(e.search_with_artist,i.artist.id),"songs",{sort:i.sort_method,q:i.search_text});var n=i.artist_song_infinite_scrollable_data.next;i.artist_song_infinite_scrollable_data.next=function(){return n().then((function(t){return i.searching=!1,t}))}}else o(i.sort_method)}),500),this.sort_songs_by("popularity")}]})},function(t,e){angular.module("genius").component("artistSongsAndAlbums",{templateUrl:"artist_songs_and_albums.html",bindings:{artist:"<",artist_songs:"<artistSongs",artist_albums:"<artistAlbums",artist_has_more_songs:"<artistHasMoreSongs",open_all_songs_pane:"&openAllSongsPane"}})},function(t,e){angular.module("genius").component("artistSongsModal",{templateUrl:"artist_songs_modal.html",bindings:{artist:"<",yields_open:"&yieldsOpen"},controller:[function(){var t=this;this.open=function(){return t.modal_open=!0},this.yields_open({open:this.open})}]})},function(t,e){angular.module("genius").component("artistTooltip",{bindings:{artist:"<"},templateUrl:"artist_tooltip.html",controller:["ArtistClient",function(t){var e=this;this.$onInit=function(){if(!e.artist.description){var n=e.artist;t.load(n.id).then((function(t){_.assign(n,t)}))}}}]})},function(t,e){angular.module("genius").component("artistVerification",{templateUrl:"artist_verification.html",bindings:{user:"<",artist:"<",close:"&"},controller:["UserClient","AppConfig",function(t,e){var n=this;this.name=_.get(this.artist,"name"),this.role=this.user.verification_role,this.user_verification_roles=e.user_verification_roles,this.updating=function(){return n.verifying||n.unverifying},this.verify=function(){n.updating()||(n.verifying=!0,n.errors=null,t.associate_with_artist(n.user.id,{name:n.name,role:n.role}).then((function(t){_.assign(n.user,t.user),n.form.$setPristine(),window.location.href=n.user.url})).catch((function(t){n.errors=t.errors,n.verifying=!1})))},this.unverify=function(){n.updating()||(n.unverifying=!0,n.errors=null,t.dissociate_from_artist(n.user.id).then((function(t){_.assign(n.user,t.user),n.form.$setPristine(),window.location.href=n.user.url})).catch((function(t){n.errors=t.errors,n.unverifying=!1})))}}]})},function(t,e){angular.module("genius").component("audioSourceLabel",{templateUrl:"audio_source_label.html",bindings:{external_song:"<externalSong"}})},function(t,e){angular.module("genius").component("breadcrumbs",{templateUrl:"breadcrumbs.html",bindings:{order:"<"},controller:[function(){var t=this;this.rebuildHierarchy=function(){t.hierarchy=[{url:"/",title:"Home"}],t.order.forEach((function(e){"artist"===e._type?(t.hierarchy.push({url:"/artists-index/".concat(e.index_character),title:e.index_character.toUpperCase()}),t.hierarchy.push({url:e.url,title:e.name})):"album"===e._type?t.hierarchy.push({url:e.url,title:e.name}):"song"===e._type&&t.hierarchy.push({url:e.url,title:e.title+(e.is_music?" Lyrics":"")})}))},this.$onChanges=function(e){e.order&&t.rebuildHierarchy()}}]})},function(t,e){angular.module("genius").component("collapsibleContent",{templateUrl:"collapsible_content.html",transclude:!0,bindings:{maxCollapsedHeight:"<",minExpansionHeight:"<",text:"@",auto_expand:"<autoExpand"},controller:[function(){var t=this;this.expand=function(){Reflect.deleteProperty(this,"max_height")},this.content_height_changed=function(e){e>t.maxCollapsedHeight+t.minExpansionHeight&&(t.max_height=t.maxCollapsedHeight),t.auto_expand&&t.expand()}}]})},function(t,e){angular.module("genius").component("commentList",{bindings:{comments:"<",commentable:"<",intersperse_ads:"@intersperseAds",variants:"<"},templateUrl:"comment_list.html"})},function(t,e){function n(t){return function(t){if(Array.isArray(t))return r(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}angular.module("genius").component("comments",{bindings:{type:"@",commentable:"<",allow_reasons:"<allowReasons",prevent_compose:"<preventCompose",are_suggestions:"<areSuggestions",context_updated_at:"<contextUpdatedAt",intersperse_ads:"@intersperseAds",on_dirty:"&onDirty",on_clean:"&onClean",variants:"<"},templateUrl:"comments.html",controller:["CommentClient","Session","PagedDataFeed",function(t,e,r){var i=this,o=[],a=function(t){var e,r=_.groupBy(i.comments,"id");t=_.reject(t,(function(t){return r[t.id]})),(e=i.comments).push.apply(e,n(t))},s=function(){i.scrollable_data.reset(),i.comments=[],i.commentable.top_comment?a([i.commentable.top_comment]):(i._loading=!0,i.scrollable_data.next().then((function(t){a(function(t){return _.remove(t,(function(t,e){return e<5&&(e<1||t.votes_total>=10)}))}(t)),o=t})).finally((function(){return i._loading=!1}))),i.commentable.comment_count-i.comments.length>0?i.has_next=function(){return!_.isEmpty(o)||i.scrollable_data.has_next()}:i.has_next=function(){return!1}};this.$onChanges=function(e){e.context_updated_at&&i.context_updated_at&&s(),(e.type||e.commentable)&&(i.scrollable_data=new r(_.partial(t.load,i.type,i.commentable.id),"comments",{text_format:"html,markdown"}),i.commentable.comment_count>0?s():i.comments=[])},this.load_more=function(){if(!_.isEmpty(o))return a(o),void(o=[]);i._loading=!0,i.scrollable_data.next().then(a).finally((function(){return i._loading=!1}))},this.can_create_comment=function(){return e.has_permission("create_comment",i.commentable)&&!i.prevent_compose},this.visible_comments=function(){return _.reject(i.comments,"_deleted")},this.save_comment=function(e){return i.comments.unshift(e),t.create(i.type,i.commentable.id,e).then((function(){i.commentable.comment_count+=1}))}}]})},function(t,e){angular.module("genius").component("contactButton",{templateUrl:"contact_button.html",controller:["FeedbackClient",function(t){var e=this;this.submit=function(){e.sending=!0,t.post_feedback(e.feedback_body).then((function(){return e.success=!0})).finally((function(){return e.sending=!1}))},this.close=function(){e.open_contact_form=!1,e.success=!1}}]})},function(t,e){angular.module("genius").component("contributionOpportunity",{bindings:{assignment:"<?",contribution_opportunity:"<contributionOpportunity",on_dismiss:"&onDismiss",source:"@"},templateUrl:"contribution_opportunity.html",controller:["ContributionOpportunityAssignmentClient","Tracking","Session","$timeout",function(t,e,n,r){var i=this;this.can=function(t){return n.has_permission(t,i.contribution_opportunity.target)},this.track=function(t,n){var r="Contribution Opportunity Action",o={action:t,contribution_opportunity_id:i.contribution_opportunity.id,source:i.source};n?e.track_link_click(n,r,o):e.track(r,o)},this.track_open=function(t){i.track("open",t)},this.on_pending_event=function(t,e){if(_.includes(i.contribution_opportunity.complete_on_events,t)){i.submitted=!0;var n=r((function(){i.optimistically_removed=!0}),200);e.then((function(){i.track("complete")})).catch((function(){i.submitted=!1,i.optimistically_removed=!1,r.cancel(n)}))}},this.dismiss=function(){t.update(i.assignment.id,{dismissed:!0}).then((function(){i.track("dismiss"),i.on_dismiss({assignment:i.assignment})}))}}]})},function(t,e){angular.module("genius").component("coverArtForm",{templateUrl:"cover_art_form.html",bindings:{cover_artable:"<coverArtable",cover_arts:"<coverArts",type:"@",close:"&",yields_is_dirty:"&yieldsIsDirty"},controller:["CoverArtClient","Reversible","Session",function(t,e,n){var r=this;this.can=function(t,e){return n.has_permission(t,e)},this.visible_cover_arts=function(){return _.reject(r.cover_arts,"_deleted")},this.create=function(e){if(_.some(r.cover_arts,{image_url:e}))r.error={response:{errors:["Image already exists"]}};else{r.error=null,r.autosaving=!0;var n={image_url:e};r.cover_arts.push(n);t.create(r.type,r.cover_artable.id,{image_url:e}).then((function(t){return Object.assign(r.cover_artable,t.cover_artable)})).catch((function(t){r.error=t,_.remove(r.cover_arts,{image_url:e})})).finally((function(){return r.autosaving=!1}))}},this.update=function(n,i){if(_.some(r.cover_arts,{image_url:i}))r.error={response:{errors:["Image already exists"]}};else{r.error=null,r.autosaving=!0;var o=e.modify(n,{image_url:i});t.update(n.id,{image_url:i}).then((function(t){return Object.assign(r.cover_artable,t.cover_artable)})).catch((function(t){r.error=t,o()})).finally((function(){return r.autosaving=!1}))}},this.destroy=function(n){r.error=null,r.autosaving=!0;var i=e.modify(n,{_deleted:!0});t.destroy(n.id).then((function(t){return Object.assign(r.cover_artable,t.cover_artable)})).catch((function(t){r.error=t,i()})).finally((function(){return r.autosaving=!1}))},this.cant_drop=function(t){var e=_.map(r.visible_cover_arts(),"id"),n=_.indexOf(e,r.cover_art_being_dragged.id),i=_.indexOf(e,t.id);return n===i||n===i-1},this.move_before=function(e,n){r.error=null,r.saving=!0;var i=_.map(r.cover_arts,"id"),o=_.indexOf(i,n.id),a=e?_.indexOf(i,e.id):r.cover_arts.length-1;_.remove(r.cover_arts,{id:n.id}),r.cover_arts.splice(a,0,n);t.move_between(n.id,{above_id:_.get(r.cover_arts[a-1],"id"),below_id:_.get(e,"id")}).then((function(t){return Object.assign(r.cover_artable,t.cover_artable)})).catch((function(t){r.error=t,_.remove(r.cover_arts,{id:n.id}),r.cover_arts.splice(o,0,n)})).finally((function(){return r.saving=!1}))}}]})},function(t,e){angular.module("genius").component("coverArtModal",{templateUrl:"cover_art_modal.html",bindings:{cover_artable:"<coverArtable",tiny_cover_arts:"<tinyCoverArts",focused_cover_art_id:"<focusedCoverArtId",type:"@",close:"&"},controller:["CoverArtClient","Tracking","Session","SmartRouting",function(t,e,n,r){var i=this;this.$onChanges=function(n){(n.type||n.cover_artable)&&(e.track("Cover Art View",{"Cover Artable Type":i.type,"Cover Artable ID":i.cover_artable.id,"Cover Art Count":i.tiny_cover_arts.length}),i.full_cover_arts=null,t.index(i.type,i.cover_artable.id).then((function(t){return i.full_cover_arts=t})))},this.cover_arts=function(){return i.full_cover_arts||i.tiny_cover_arts},this.focused_cover_art=function(){return _.find(i.cover_arts(),(function(t){return t.id===i.focused_cover_art_id}))},this.focused_cover_art_index=function(){return _.findIndex(i.cover_arts(),(function(t){return t.id===i.focused_cover_art_id}))},this.move_cover_art_focus=function(t){var e=i.focused_cover_art_index()+t,n=_.get(i.cover_arts(),[e,"url"]);r.navigate_to_absolute_url(n)},this.user_signed_in=n.user_signed_in}]})},function(t,e){function n(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var r,i,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);a=!0);}catch(t){s=!0,i=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}angular.module("genius").component("deferCompile",{bindings:{timing_label:"@timingLabel",initial_content_key:"@useInitialContentWithKey",within_visibility_range:"@withinVisibilityRange",delay:"<"},transclude:!0,controller:["$element","$q","$timeout","$transclude","$window","application_bootstrap","initial_placeholder_content","on_within_visibility_range","performance_mark",function(t,e,r,i,o,a,s,c,l){var u=this;this.$onInit=function(){a.before((function(){var e=s.get(u.initial_content_key);e&&t.empty().append(e)}));var n=_.isFinite(u.delay)?r(u.delay):e.when(),o=u.timing_label||u.initial_content_key;a.after((function(){return n.then((function(){(u.within_visibility_range?c(t,d(u.within_visibility_range)):e.when()).then((function(){o&&l.create("defer_compile_start:".concat(o)),t.empty().append(i()),o&&l.create("defer_compile_end:".concat(o))}))}))}))};var d=function(t){var e=n(t.match(/^(\d+(?:\.\d+)?)(vh|px)$/)||[],3),r=e[1];switch(e[2]){case"px":return parseFloat(r);case"vh":return parseFloat(r)/100*$(o).height();default:throw new Error("within-visibility-range attribute must have units (either px or vh")}}}]})},function(t,e){angular.module("genius").component("deletedAnswer",{bindings:{answer:"<"},templateUrl:"deleted_answer.html"})},function(t,e){angular.module("genius").component("detailedSongSearch",{templateUrl:"detailed_song_search.html",bindings:{mode:"<",cancel:"&onCancel",select:"&onSelect",confirm:"&onConfirm"},controller:["$q","$scope","LookupClient","SongClient",function(t,e,n,r){var i=this;e.$watch("$ctrl.url",(function(e){i.song_data=null,i.error=null,e&&n.lookup(e).then((function(e){if(i.autocompleted_song=null,"song"!==e._type)return t.reject(new Error("URL is for a non-song page"));i.song=e})).catch((function(t){i.error=t}))})),e.$watch("$ctrl.autocompleted_song.id",(function(t){i.url=null,i.song_data=null,i.error=null,t&&(i.song_data={id:i.autocompleted_song.id,title:i.autocompleted_song.title,artists:[i.autocompleted_song.primary_artist],albums:[]},r.load_song(t).then((function(t){i.song=t})))})),e.$watch("$ctrl.song.id",(function(t){t&&(i.song_data={id:i.song.id,title:i.song.title,artists:[i.song.primary_artist].concat(i.song.featured_artists),albums:i.song.albums},i.select({song:i.song}))})),this.submit=function(){var e=this;this.saving=!0,t.when(this.confirm({song:this.song})).finally((function(){e.saving=null}))}}]})},function(t,e){angular.module("genius").component("dfpAd",{templateUrl:"dfp_ad.html",bindings:{ad_classes:"@adClasses",name:"@",instance_id:"@?instanceId",on_filled:"&onFilled",on_no_ad:"&onNoAd"},controller:["$element","$immediate","$scope","Ads","querystring","AdConfig","SessionConfig","classnames",function(t,e,n,r,i,o,a,s){var c,l=this;this.$onInit=function(){if(!a.show_ads)return l.creative_size=[0,0],l.no_ad=!0,l.on_no_ad();c=l.instance_id||l.name,l.creative_size=_.get(o.ad_placements[l.name],"placeholder_size")||[0,0],r.id_for(l.name,c).then((function(t){return l.id=t})).then((function(){return e((function(){r.render(l.name,c).then((function(t){t.isEmpty?(l.no_ad=!0,l.on_no_ad({render_event:t})):(l.filled=!0,l.creative_size=t.size,l.on_filled({render_event:t,custom_values:u()})),n.$emit("layout_changed")}))}))}))},this.$onDestroy=function(){r.dispose(l.name,c)},this.compiled_ad_unit_classes=function(){var t=n.$parent.$eval(l.ad_classes||"[]",{$width:l.creative_size[0],$height:l.creative_size[1]});return s(t)};var u=function(){return i.parse(t.find("iframe").prop("contentWindow").customValues||"")}}]})},function(t,e){angular.module("genius").component("editArtistProfile",{templateUrl:"edit_artist_profile.html",bindings:{artist:"<",close:"&"},controller:["ArtistClient","$location","Session","only_changes",function(t,e,n,r){var i=this;this.$onChanges=function(t){t.artist&&(i.editable_artist=angular.copy(i.artist))},this.can=function(t){return n.has_permission(t,i.artist)},this.update_artist=function(){i.errors=null,i.saving||(i.saving=!0,t.update(i.artist.id,r(i.editable_artist,i.artist)).then((function(n){_.assign(i.artist,n),i.close(),i.errors=null,e.path(t.get_path(n)),e.replace()})).catch((function(t){i.errors=t.data.response.errors})).finally((function(){i.saving=!1})))}}]})},function(t,e){angular.module("genius").component("editUserEmailPreferences",{templateUrl:"edit_user_email_preferences.html",bindings:{user:"<",close:"&"},controller:["UserClient",function(t){var e=this;this.editable_user=angular.copy(this.user),this.update_user=function(){e.saving||(e.saving=!0,Reflect.deleteProperty(e,"errors"),t.update(e.editable_user.id,{user:_.pick(e.editable_user,["preferences"])}).then((function(t){_.assign(e.user,t.user),e.close(),Reflect.deleteProperty(e,"errors")})).catch((function(t){e.errors=t.errors})).finally((function(){Reflect.deleteProperty(e,"saving")})))}}]})},function(t,e){angular.module("genius").component("editUserProfile",{templateUrl:"edit_user_profile.html",bindings:{user:"<",disable_image_edit:"<disableImageEdit",disable_user_bio_edit:"<disableUserBioEdit",close:"&"},controller:["UserClient","Session","$location","only_changes",function(t,e,n,r){var i=this;this.$onChanges=function(t){t.user&&(i.editable_user=angular.copy(i.user))},this.can=function(t){return e.has_permission(t,i.user)},this.update_user=function(){if(i.editable_user.password===i.editable_user.confirm_password){if(!i.saving){i.saving=!0,i.errors=null;var e=_.pick(i.editable_user,["login","about_me","email","password","photo_url","custom_header_image_url"]);e.about_me=e.about_me.markdown,t.update(i.editable_user.id,{user:r(e,i.user)}).then((function(e){_.assign(i.user,e.user),i.close(),i.errors=null,n.path(t.get_path(e.user)),n.replace()})).catch((function(t){i.errors=t.errors})).finally((function(){i.saving=!1}))}}else i.errors=["Passwords do not match"]}}]})},function(t,e){function n(t){return function(t){if(Array.isArray(t))return r(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}angular.module("genius").component("editableTracklist",{bindings:{album:"<",album_appearances:"<albumAppearances",editing:"<",on_update:"&onUpdate",close:"&"},templateUrl:"editable_tracklist.html",controller:["AlbumClient","$timeout","I18n",function(t,e,r){var i,o=this;this.$onInit=function(){o.error=null;var t=_.groupBy(o.album_appearances,"track_number"),e=_.max(_.compact(_.map(_.keys(t),(function(t){return Number(t)}))));o.numbered_slots=[];for(var n=1;n<=e;n++)if(t[n]){var r=t[n][0];o.numbered_slots.push({track_number:n,song_id:r.song.id,title:r.song.title_with_featured})}else o.numbered_slots.push({track_number:n});o.unnumbered_slots=_.map(t.null,(function(t){return{song_id:t.song.id,title:t.song.title_with_featured}}))},this.remove_trailing_empty_slots=function(){var t=_.max(_.map(_.filter(o.numbered_slots,"song_id"),"track_number"))||0;o.numbered_slots=o.numbered_slots.slice(0,t)},this.make_unnumbered=function(t){Reflect.deleteProperty(t,"track_number"),o.unnumbered_slots.push(t)},this.clear_slot=function(t){t.track_number?o.numbered_slots[t.track_number-1]={track_number:t.track_number}:_.remove(o.unnumbered_slots,{song_id:t.song_id})},this.place_song_into_slot=function(t,e){var n=e.track_number;e.song_id&&(o.clear_slot(e),o.make_unnumbered(e)),o.clear_slot(t),t.track_number=n,o.numbered_slots[n-1]=t,o.remove_trailing_empty_slots()},this.update_slot_number=function(t,e){if(""===e)return o.clear_slot(t),o.make_unnumbered(t),void o.remove_trailing_empty_slots();var n=_.toNumber(e);if(!(_.isNaN(n)||n<=0)){for(;n>o.numbered_slots.length;)o.numbered_slots.push({track_number:o.numbered_slots.length+1});o.place_song_into_slot(t,o.numbered_slots[n-1])}},this.add_slot_after_delay=function(){i=e((function(){return o.numbered_slots.push({track_number:o.numbered_slots.length+1})}),500)},this.cancel_add_slot=function(){e.cancel(i)},this.add_slot_and_fill=function(t){o.cancel_add_slot();var e={track_number:o.numbered_slots.length+1};o.numbered_slots.push(e),o.place_song_into_slot(t,e)},this.add_song=function(t){var e={song_id:t.id,title:t.title_with_featured};t.new&&(e.lyrics_state="incomplete"),o.unnumbered_slots.push(e)},this.create_result=function(t){return{id:_.uniqueId("new_"),title:t,title_with_featured:t,primary_artist:o.album.artist,new:!0}},this.toggle_unreleased=function(t){"incomplete"===t.lyrics_state&&confirm(r.t("song.lyrics_state.unreleased.confirm"))?t.lyrics_state="unreleased":t.lyrics_state="incomplete"},this.save=function(){o.saving=!0,o.error=null;var e=_.map(_.filter([].concat(n(o.numbered_slots),n(o.unnumbered_slots)),"song_id"),(function(t){return _.pick(t,["track_number","song_id","title","lyrics_state"])}));t.update_tracklist(o.album.id,e).then((function(t){o.on_update({album_appearances:t}),o.close()})).catch((function(t){o.error="".concat(t.message,": ").concat(_.join(t.response.errors,", "))})).finally((function(){o.saving=!1}))}}]})},function(t,e){angular.module("genius").component("editableTracklistNumber",{bindings:{track_number:"<trackNumber",on_update:"&onUpdate"},templateUrl:"editable_tracklist_number.html",controller:function(){var t=this;this.$onChanges=function(e){e.track_number&&t.reset()},this.submit=function(){t.on_update({input:t.editable_track_number}),t.reset()},this.reset=function(){t.editing=!1,t.editable_track_number=t.track_number}}})},function(t,e){angular.module("genius").component("emailConfirmationBanner",{templateUrl:"email_confirmation_banner.html",bindings:{url:"@"},controller:["$http",function(t){var e=this;this.loading=!1,this.success=!1,this.request=function(){e.loading=!0,t.post(e.url).then((function(){e.loading=!1,e.success=!0})).catch((function(){e.loading=!1,e.error_message="Oops, something went wrong. Please refresh and try again!"}))}}]})},function(t,e){angular.module("genius").component("embedlyEmbed",{templateUrl:"embedly_embed.html",bindings:{embed:"<"},controller:["$sce",function(t){var e=this;this.trusted_html=function(){return t.trustAsHtml(e.embed.html)}}]})},function(t,e){angular.module("genius").component("embedlyYoutube",{templateUrl:"embedly_youtube.html",bindings:{video_id:"@videoId",start:"@"},controller:["$scope","Tracking",function(t,e){var n=this;this.started=!1,t.$on("youtube.player.playing",(function(){n.started||(e.track("Play embedded video",{properties:{"Video provider":"youtube"}}),n.started=!0)}))}]})},function(t,e){angular.module("genius").component("expandableContainer",{templateUrl:"expandable_container.html",transclude:{expandable_container_title:"?expandableContainerTitle"},bindings:{start_expanded:"<startExpanded",start_initialized:"<startInitialized",title:"@",variants:"<",yields_api:"&yieldsApi"},controller:[function(){var t=this;this.$onInit=function(){this.expanded=this.start_expanded,this.yields_api({api:this.api})},this.$onChanges=function(t){t.start_expanded&&(this.expanded=this.start_expanded)},this.toggle_expand=function(){t.expanded=!t.expanded},this.api=function(){return{expanded:function(){return t.expanded}}}}]})},function(t,e){angular.module("genius").component("expandableDiff",{bindings:{html:"<"},templateUrl:"expandable_diff.html",controller:function(){var t=this;this.$onInit=function(){t.expand_amount=10},this.$onChanges=function(i){i.html&&(t.lines=_.split(t.html,"<br>"),e(),n(),r())};var e=function(){t.ranges=[];var e=[],n=null;t.lines.forEach((function(r,i){var o=r.match(/(<ins|<del|<\/ins>|<\/del>)/g)||[],a=(e.length||o.length)&&!_.startsWith(r,"</ins>")&&!_.startsWith(r,"</del>");a&&_.isNull(n)?n=i:a||_.isNull(n)||(t.ranges.push({start:n,end:i}),n=null),o.forEach((function(t){"<ins"===t||"<del"===t?e.push(t):e.pop()}))})),_.isNull(n)||t.ranges.push({start:n,end:t.lines.length})},n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3;t.ranges.forEach((function(n){n.start=Math.max(n.start-e,0),n.end=Math.min(n.end+e,t.lines.length)}))},r=function(){for(var e=0;e<t.ranges.length-1;)t.ranges[e].end>=t.ranges[e+1].start?(t.ranges[e].end=t.ranges[e+1].end,_.pullAt(t.ranges,e+1)):e++};this.expand_range_start=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;t.ranges[e].start=Math.max(t.ranges[e].start-n,0),r()},this.expand_range_end=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;t.ranges[e].end=Math.min(t.ranges[e].end+n,t.lines.length),r()},this.render_lines=function(e,n){return _.join(_.slice(t.lines,e,n),"<br>")}}})},function(t,e){angular.module("genius").component("facebookShareButton",{templateUrl:"facebook_share_button.html",bindings:{url:"<",variants:"<"},controller:["Facebook","Tracking",function(t,e){var n=this;this.share_on_facebook=function(){e.track("Bagon Facebook Share"),t.share(n.url)}}]})},function(t,e){angular.module("genius").component("hangInitialQuote",{templateUrl:"hang_initial_quote.html",bindings:{content:"<"},controller:function(){this.hang_initial_double_quote=""===this.content[0],this.hang_initial_single_quote=""===this.content[0]}})},function(t,e){angular.module("genius").component("headerActions",{templateUrl:"header_actions.html",controller:["Session",function(t){var e=this;this.$onInit=function(){e.user_signed_in=t.user_signed_in,e.can=function(e){return t.has_permission(e,t.current_user)}}}]})},function(t,e){angular.module("genius").component("headerAdmin",{bindings:{open_header_menus:"<openHeaderMenus"},templateUrl:"header_admin.html",controller:["Session","UserClient","AssetClient","$window",function(t,e,n,r){var i=this;this.$onInit=function(){i.user=t.current_user,i.can=function(e){return t.has_permission(e,i.user)}},this.logout=function(){i.loading=!0,e.logout().then((function(){r.location.reload()}))},this.impersonate_user=function(){var t=prompt("Enter the login of the user you want to sign in as");""!==_.trim(t)&&(i.impersonating=!0,e.impersonate(t).then((function(){r.location.reload()})))},this.search_user_aliases=function(){var t=prompt("Find all users who've ever had this login");""!==_.trim(t)&&(r.location.href="/users/aliases?alias=".concat(encodeURIComponent(t)))},this.remove_asset=function(){var t=prompt("Enter the url to remove");""!==_.trim(t)&&n.remove(t)}}]})},function(t,e){angular.module("genius").component("headerAuth",{templateUrl:"header_auth.html"})},function(t,e){angular.module("genius").component("headerWithCoverArt",{templateUrl:"header_with_cover_art.html",bindings:{type:"@",object:"<",header_image_url:"<headerImageUrl",cover_art_url:"<coverArtUrl",titleLabel:"<",artist:"<",can_edit:"<canEdit",on_edit:"&onEdit",verified_contributors:"<verifiedContributors",has_instagram_reels:"<hasInstagramReels",variants:"<",cover_arts:"<coverArts",focused_cover_art_id:"<focusedCoverArtId",close_cover_art_modal:"&onCloseCoverArtModal"},transclude:{metadata:"?metadata",secondary:"?secondary"},controller:function(){var t=this;this.cover_art_cta_text=function(){var e=t.cover_arts.length,n=e>1,r=_.filter(t.cover_arts,"annotated").length;return r?e===r?"".concat(e," Annotated Cover").concat(n?"s":""):"".concat(e," Cover").concat(n?"s":"",", ").concat(r," Annotated"):"".concat(e," Cover").concat(n?"s":"")}}})},function(t,e){angular.module("genius").component("hiddenFields",{bindings:{key:"@",value:"<"},templateUrl:"hidden_fields.html",controller:function(){_.isArray(this.value)?this.type="array":_.isObject(this.value)?this.type="object":this.type="constant"}})},function(t,e){angular.module("genius").component("imageUploadButton",{templateUrl:"image_upload_button.html",bindings:{default_image:"<defaultImage",on_file_picked:"&onFilePicked",allow_clear:"<allowClear",clear_confirm:"@clearConfirm",on_clear:"&onClear",allow_crop_to_square:"<allowCropToSquare",variants:"<"},controller:["Filepicker",function(t){var e=this,n=new t;this.pick_image_for_artist=function(t){var r={container:"modal",services:["COMPUTER","URL","FACEBOOK","INSTAGRAM","IMAGE_SEARCH"],openTo:t};e.allow_crop_to_square&&(r.services.unshift("CONVERT"),r.conversions=["crop"],r.cropRatio=1);var i={path:Math.random().toString(36).slice(2)};n.pick_and_store(r,i).then((function(t){e.on_file_picked({url:t})}))}}]})},function(t,e){function n(t){return function(t){if(Array.isArray(t))return r(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}angular.module("genius").component("inbox",{bindings:{inbox_name:"@inboxName",opened:"<opened",clear_unread_count:"&clearUnreadCount"},templateUrl:"inbox.html",controller:["InboxClient","Tracking",function(t,e){var r,i,o,a=this;this.should_paginate=function(){return a.opened&&!o&&!a.done_loading},this.load_next_page=function(){o||(o=t.line_items(a.inbox_name,r).then((function(t){var e;(e=a.line_items).push.apply(e,n(t)),o=null,t.length?r=t.timestamp_for_next_page:a.done_loading=!0,a.opened&&l(t)})))};var s=function(){a.line_items=[],a.done_loading=!1,r=void 0,a.load_next_page()},c=function(){a.opened?i=Date.now():s()},l=function(e){t.mark_read(a.inbox_name,_(e).filter("unread").map("event_ids").value()),a.clear_unread_count()};this.$onInit=function(){s(),t.on_update(a.inbox_name,c)},this.$onChanges=function(t){if(t.opened){var n=t.opened.currentValue,r=t.opened.previousValue;!n||r&&!t.opened.isFirstChange()?r&&!n&&i&&i<Date.now()&&s():(l(a.line_items),e.track("Inbox Open",{inbox_name:a.inbox_name}))}}}]})},function(t,e){angular.module("genius").component("inboxContainer",{bindings:{inbox_name:"@inboxName",open_inboxes:"<openInboxes",sync_count_to_title:"<syncCountToTitle",abbreviate_after:"<abbreviateAfter",use_messages_inbox:"<useMessagesInbox",use_iq_inbox:"<useIqInbox"},templateUrl:"inbox_container.html"})},function(t,e){angular.module("genius").component("inboxIcon",{bindings:{inbox_name:"@inboxName",opened:"<",sync_count_to_title:"<syncCountToTitle",abbreviate_after:"<abbreviateAfter",yields_api:"&yieldsApi"},templateUrl:"inbox_icon.html",controller:["Session","TopBarIndicatorsLoader","WindowTitle","InboxClient",function(t,e,n,r){var i=this,o=function(t){i.unread_count=t,i.sync_count_to_title&&n.update_count(i.unread_count)};this.$onInit=function(){o(t.current_user["unread_".concat(i.inbox_name,"_count")]),e.listen_for(i.inbox_name,o),r.on_update(i.inbox_name,e.refresh),i.yields_api({api:{decrement:function(t){o(i.unread_count-t)},clear:function(){o(0)}}})}}]})},function(t,e){function n(t){return function(t){if(Array.isArray(t))return r(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}angular.module("genius").component("inboxLineItemDetailDiscussion",{bindings:{discussion:"<object"},templateUrl:"inbox_line_item_detail_discussion.html",controller:["DiscussionClient","PagedDataFeed",function(t,e){var r=this;this.$onChanges=function(n){n.discussion&&(r.paged_data=new e(_.partial(t.forum_posts,r.discussion.id),"forum_posts",{per_page:3},2),r.forum_posts=_.clone(r.discussion.latest_posts),r.discussion.forum_post_count>r.forum_posts.length?r.has_next=r.paged_data.has_next:r.has_next=function(){return!1})},this.load_more=function(){r.loading=!0,r.paged_data.next().then((function(t){var e;return(e=r.forum_posts).push.apply(e,n(t))})).finally((function(){return r.loading=!1}))}}]})},function(t,e){angular.module("genius").component("inboxLineItemDetailDiscussionHeader",{bindings:{discussion:"<"},templateUrl:"inbox_line_item_detail_discussion_header.html"})},function(t,e){angular.module("genius").component("inboxLineItemDetailForumPost",{bindings:{forum_post:"<object"},templateUrl:"inbox_line_item_detail_forum_post.html"})},function(t,e){angular.module("genius").component("inboxLineItemDetailForumPostSingle",{bindings:{forum_post:"<forumPost"},templateUrl:"inbox_line_item_detail_forum_post_single.html"})},function(t,e){angular.module("genius").component("inboxLineItemDetailLyricsDiff",{bindings:{before:"<",after:"<",state:"<"},templateUrl:"inbox_line_item_detail_lyrics_diff.html",controller:["LyricsEditProposal",function(t){var e=this;this.$onChanges=function(n){if(n.before||n.after){var r=t.diff(e.before,e.after);e.diff_html=t.pretty_diff(r)}}}]})},function(t,e){angular.module("genius").component("inboxLineItemDetailObject",{templateUrl:"inbox_line_item_detail_object.html",bindings:{object:"<",variants:"<"}})},function(t,e){angular.module("genius").component("inboxLineItemMessage",{bindings:{template:"<",key:"<",params:"<",state:"<"},template:'<ng-include src="$ctrl.template"></ng-include>'})},function(t,e){angular.module("genius").component("iqInbox",{bindings:{opened:"<",clear_unread_count:"&clearUnreadCount"},templateUrl:"iq_inbox.html",controller:["Session","UserClient","Pusher","Tracking",function(t,e,n,r){var i=this;this.load=function(){e.contribution_opportunity_assignments(i.user.id).then((function(t){i.loaded=!0;var n=_.map(i.assignments,"id"),r=_.reject(t.contribution_opportunity_assignments,(function(t){return _.includes(n,t.id)}));i.assignments=i.assignments.concat(r),i.opened&&(e.mark_contribution_opportunity_assignments_read(i.user.id),i.clear_unread_count())}))},this.remove=function(t){i.assignments=_.reject(i.assignments,{id:t.id}),i.load()},this.dismiss_explanation=function(){i.show_explanation=!1,e.dismiss_contribution_opportunities_explanation(i.user.id)},this.$onInit=function(){i.assignments=[],i.user=t.current_user,i.show_explanation=!i.user.dismissed_contribution_opportunities_explanation,i.load(),n.subscribe(t.current_user.pusher_channel,"contribution_opportunity_completion",(function(t){_.find(i.assignments,(function(e){return e.contribution_opportunity.id===t}))&&(i.load(),i.assignments=_.reject(i.assignments,(function(e){return e.contribution_opportunity.id===t})))})),n.subscribe(t.current_user.pusher_channel,"contribution_opportunities_refreshed",i.load)},this.$onChanges=function(t){if(t.opened){var e=t.opened.currentValue,n=t.opened.previousValue;!e||n&&!t.opened.isFirstChange()||(r.track("Inbox Open",{inbox_name:"iq_inbox"}),i.clear_unread_count())}}}]})},function(t,e){angular.module("genius").component("iqNotificationList",{templateUrl:"iq_notification_list.html",controller:["LocalStorage","PageVisibility","Session","Pusher","$timeout",function(t,e,n,r,i){this.user=n.current_user,this.notifications=[],this.line_item_count=0;var o=function(t){_.isEmpty(this.notifications)&&this.notifications.unshift(this.user),this.line_item_count++,i(function(){this.notifications.unshift(t),this.user.iq+=t.iq_gained,i(function(){_.pull(this.notifications,t),this.line_item_count--,0===this.line_item_count&&this.notifications.pop()}.bind(this),5e3)}.bind(this),200)}.bind(this);r.subscribe(n.current_user.pusher_channel,"iq_increment",function(n){e.when_visible((function(){if(t.is_available()){var e=t.get_item("newest_event_id",0),r=_.max(n.event_ids);r>e&&(o(n),t.set_item("newest_event_id",r))}else o(n)}))}.bind(this))}]})},function(t,e){function n(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var r,i,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);a=!0);}catch(t){s=!0,i=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}angular.module("genius").component("leaderboardAd",{templateUrl:"leaderboard_ad.html",bindings:{name:"@"},controller:["$timeout","$window","$element","$scope","wait_until",function(t,e,r,i,o){var a,s,c,l,u,d=this;this.$onInit=function(){e.addEventListener("scroll",p),c=e.innerHeight>=600,d.empty=!0};var p=_.throttle((function(){return i.$applyAsync((function(){return f()}))}),50),f=function(){d.bounding_client_rect=a?a.getBoundingClientRect():{height:0,width:0},l=r[0].getBoundingClientRect().top>=0};this.on_filled=function(i){var c,h,m,g;d.empty=(c=i.size,h=n(c,2),m=h[0],g=h[1],1===m&&1===g),d.has_banner_ad=!0,s=970===i.size[0],u="loading",a=r[0].querySelector(".dfp_unit--centered_billboard"),o((function(){return a.getBoundingClientRect().height>1})).then((function(){u="loaded",f(),d.loaded_when_not_naturally_in_view=!l,t((function(){e.removeEventListener("scroll",p),u="viewability_complete"}),3e3)})).catch(_.noop)},this.can_stick=function(){return s&&c&&"loaded"===u},this.should_stick=function(){return d.can_stick()&&!l}}]})},function(t,e){angular.module("genius").component("lyricsEditProposal",{bindings:{edit_proposal:"<editProposal",editable:"<",accept_with:"&acceptWith"},templateUrl:"lyrics_edit_proposal.html",controller:["$scope","LyricsEditProposal","LyricsEditProposalClient","Session","$immediate","$q","Tracking",function(t,e,n,r,i,o,a){var s=this;this.$onChanges=function(t){t.editable&&u()},this.can=function(t){return r.has_permission(t,s.edit_proposal)},this.accept=function(){var t={editable:_.extend({},s.editable,{markdown:s.patched}),lyrics_edit_id:s.edit_proposal.id};l("accepted",s.accept_with({params:t}),"accept_proposal")},this.reject=function(){l("rejected",n.reject(s.edit_proposal.id),"reject_proposal")};var c=function(t){return s.error=null,s.moderated_state=t,i((function(){return s.edit_proposal._moderated=!0}))},l=function(t,e,n){var r=c(t);return o.all([e,r]).then((function(){a.track("lyrics_edit_proposals:".concat(n),{lyrics_edit_id:s.edit_proposal.id})})).catch((function(t){s.error=t.message,s.edit_proposal._moderated=!1,s.moderated_state=null}))},u=function(){var t=e.make_patches(s.edit_proposal.diff),n=e.apply_patches(t,s.editable.markdown,{edit_format:s.edit_proposal.edit_format}),r=n.patched,i=n.success;if(_.some(i)){s.patched=r;var o=e.diff(s.editable.markdown,s.patched);s.diff_html=e.pretty_diff(o)}else c("inapplicable")};t.$watch("$ctrl.editable.markdown",(function(t){t&&u()}))}]})},function(t,e){angular.module("genius").component("lyricsEditProposalForm",{bindings:{lyrics:"<",song:"<"},templateUrl:"lyrics_edit_proposal_form.html",controller:["LyricsEditProposal","LyricsEditProposalClient","Tracking","$window",function(t,e,n,r){var i=this;this.$onInit=function(){n.track("lyrics_edit_proposals:start_proposal",{properties:{edit_format:"markdown"}})},this.$onChanges=function(t){t.lyrics&&(i.editable={markdown:i.lyrics.body.plain,before:i.lyrics.body.plain})},this.propose=function(){i.saving||(i.errors=null,i.editable.markdown!==i.editable.before?(i.saving=!0,e.create({song_id:i.song.id,version:i.lyrics.version,edited_lyrics:i.editable.markdown}).then((function(){i.proposed=!0,n.track("lyrics_edit_proposals:save_proposal",{properties:{edit_format:"plain_text"}})})).catch((function(t){i.errors=t.response.errors||[t.message]})).finally((function(){r.scrollTo(0,0),i.saving=!1}))):i.proposed=!0)},this.back=function(){i.proposed||n.track("lyrics_edit_proposals:cancel_proposal",{properties:{edit_format:"plain_text"}}),r.history.back()},this.toggle_preview=function(){if(i.previewing=!i.previewing,i.previewing){var e=t.diff(i.editable.before,i.editable.markdown);i.diff_html=t.pretty_diff(e)}}}]})},function(t,e){angular.module("genius").component("lyricsEditProposalModeration",{bindings:{song:"<",lyrics_html:"<lyricsHtml",on_lyrics_update:"&onLyricsUpdate"},templateUrl:"lyrics_edit_proposal_moderation.html",controller:["LyricsEditProposalClient","LyricsEditing","SongClient","Tracking","Pusher","Session",function(t,e,n,r,i,o){var a=this;this.$onInit=function(){a.load(),i.subscribe(a.song.pusher_channel,"lyrics-edits-updated",(function(t){t.updater_id!==o.current_user.id&&a.load()}))},this.$onChanges=function(t){t.lyrics_html&&(a.editable=e.prepare_lyrics_for_editing(a.lyrics_html))},this.show=function(){r.track("lyrics_edit_proposals:view_proposals"),a.showing=!0},this.close=function(){a.showing=!1,_.some(a.lyrics_edit_proposals,"_moderated")&&a.load()},this.load=function(){t.pending({song_id:a.song.id}).then((function(t){return a.lyrics_edit_proposals=t}))},this.accept=function(t){var r=t.editable,i=t.lyrics_edit_id,o=e.convert_editable_for_saving(r);return n.save_lyrics(a.song,o,{lyrics_edit_id:i}).then((function(t){a.on_lyrics_update({lyrics_data:t})}))},this.pending_count=function(){return(a.lyrics_edit_proposals||[]).filter((function(t){return!t._moderated})).length}}]})},function(t,e){angular.module("genius").component("lyricsExportPreview",{bindings:{song:"<"},templateUrl:"lyrics_export_preview.html",controller:["SongClient","Session",function(t,e){var n=this;this.can_perform=function(t){return e.has_permission(t,n.song)},this.should_show_modal=function(){return n._show_modal},this.show_modal=function(){n._show_modal=!0,t.preview_lyrics_for_export(n.song.id).then((function(t){return n.preview_lyrics_for_export=t}))},this.hide_modal=function(){n._show_modal=!1,n.preview_lyrics_for_export=null}}]})},function(t,e){angular.module("genius").component("lyricsSyncEditor",{bindings:{id:"<modelId",instructions_url:"@instructionsUrl",go_to_home:"&goToHome"},templateUrl:"lyrics_sync_editor.html",controller:["$scope","$q","$immediate","BeforeUnloadCheck","LyricsSynchronizationClient","AppleAudioPlayback","Session","MusicKit",function(t,e,n,r,i,o,a,s){var c=this;this.position=0,this.current_line_index=-1,this.is_editing_timestamp=!1,this.$onInit=function(){i.get(c.id).then((function(t){c.lyrics_synchronization=t,c.auto_advance=!c.can("edit"),c.sync_and_staff_approve=c.can("sync_and_staff_approve")}))};var l=_.noop;t.$watch("$ctrl.lyrics_synchronization.external_song.id",(function(t){if(l(),t){var e=c.lyrics_synchronization.external_song;"apple"===e.provider&&s.load().then((function(t){var n=t.getInstance;c.media_player=new o({instance:n(),external_song:e}),l=c.media_player.$on("state",u)}))}})),this.start_or_advance=function(){if(!c.media_player.state.is_playing)return c.media_player.api.play();if(!(c.current_line_index>=c.lyrics_synchronization.lines.length-1)){var t=c.current_line_index;if(c.current_line_index=c.lyrics_synchronization.next_visible_line_index_after_index(c.current_line_index),c.can("edit"))try{c.lyrics_synchronization.apply_timestamp_to_line_at_index(c.position,c.current_line_index)}catch(e){c.error=e,c.current_line_index=t}}},this.seek_to_index=function(t){var e=c.lyrics_synchronization.timestamp_for_line_at_index(t);(e||0===e)&&c.media_player.api.seek_to_position(e),c.auto_advance||(c.current_line_index=t)},this.seek_to_index_and_play=function(t){c.seek_to_index(t)},this.can=function(t){return c.lyrics_synchronization&&a.has_permission(t,c.lyrics_synchronization)},this.in_order_validator_for_index=function(t){return function(e){return!e&&0!==e||e>c.lyrics_synchronization.max_timestamp_before_index(t)&&e<c.lyrics_synchronization.min_timestamp_after_index(t)}},this.move_to_index_for_position=function(t){this.current_line_index=this.lyrics_synchronization.line_index_for_position(t)},this.current_line=function(){return c.lyrics_synchronization.lines[c.current_line_index]},this.edit_line_lyrics_at_index=function(t){c.media_player.api.pause(),c.lyrics_synchronization.lines[t]._editing_lyrics=c.can("edit")},this.after_edit_line_lyrics_at_index=function(t){c.lyrics_synchronization.lines[t]._editing_lyrics=!1,c.lyrics_synchronization.mark_dirty()},this.edit_line_timestamp_at_index=function(t){c.media_player.api.pause(),c.lyrics_synchronization.lines[t]._editing_time=c.can("edit"),c.is_editing_timestamp=!0},this.after_edit_line_timestamp_at_index=function(t){c.lyrics_synchronization.lines[t]._editing_time=!1,c.lyrics_synchronization.mark_dirty(),c.seek_to_index_and_play(t),c.is_editing_timestamp=!1};var u=function(t,e){c.position=e.position,c.auto_advance&&c.move_to_index_for_position(c.position)};this.last_action=e.when();var d=function(t,r){return r=r||{},function(){for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return c.saving=!0,c.last_action=c.last_action.finally((function(){return Reflect.apply(t,c,o).then((function(t){r.retain_error||(c.error=null),c.lyrics_synchronization._dirty=null,_.assign(c.lyrics_synchronization,_.omit(t,"lines")),t.lines&&c.lyrics_synchronization.lines?t.lines.forEach((function(t,e){_.assign(c.lyrics_synchronization.lines[e],t)}),c):c.lyrics_synchronization.lines=t.lines})).catch((function(t){return c.error=t,n(c.load.bind(c)),e.reject(t)})).finally((function(){c.saving=!1}))})),c.last_action}};this.load=d((function(){return i.get(c.id)}),{retain_error:!0}),this.submit=d((function(t,e){return i.submit(t,c.lyrics_synchronization,e)})),this.submit_sync=d((function(){return i.submit_sync(c.lyrics_synchronization,{sync_and_staff_approve:c.sync_and_staff_approve})})),this.update_state=d((function(t){return i.update_state(t,c.lyrics_synchronization)})),this.save=d((function(){return i.save(c.lyrics_synchronization)})),this.autosave=_.debounce(this.save,1e3),this.revert_action=d((function(t){return i.revert_action(t,c.lyrics_synchronization)})),this.skip=d((function(t){return i.skip(t,c.lyrics_synchronization)})),this.change_song=d((function(t){return i.change_song({song_id:t.id,lyrics_synchronization_id:c.id}).then((function(t){return c.reassociating=null,t}))})),this.preview_with_song=function(t){return i.preview({song_id:t.id,external_song_id:_.get(c.lyrics_synchronization,"external_song.id")}).then((function(t){c.error=null,c.lyrics_synchronization=t})).catch((function(t){return c.error=t,c.error}))},this.cancel_reassociation=function(){c.reassociating=!1,c.load()};var p=function(){return c.lyrics_synchronization._dirty};r.add(p),t.$on("$destroy",(function(){r.remove(p),c.media_player.api.pause()})),i.$on("edit",(function(){c.error=null,c.can("edit")&&(c.can("approve")||c.can("staff_approve"))&&c.autosave()}))}]})},function(t,e){angular.module("genius").component("lyricsSyncHome",{bindings:{instructions_url:"@instructionsUrl"},templateUrl:"lyrics_sync_home.html",controller:["$rootScope","$location","$window","LyricsSynchronizationClient",function(t,e,n,r){var i=this;t.$on("$locationChangeStart",(function(){i.id=null,i.tasks=null,i.checked_out=null,i.navigating=!0})),t.$on("$locationChangeSuccess",(function(){if("/lyrics_synchronizations/home"===e.path())i.load();else{if(i.id=parseInt(e.path().replace(/^\/lyrics_synchronizations\//,"")),!i.id)return e.path("/lyrics_synchronizations/home");i.navigating=null}})),this.load=function(){var t=this;r.home().then((function(e){_.assign(t,e),t.navigating=null}))},this.start=function(t){r.start(t).then(o)},this.check_out=function(t){r.submit("check_out",t).then(o)},this.check_in=function(t){r.submit("check_in",t).then(this.load.bind(this))},this.navigate_to=function(t){e.path("/lyrics_synchronizations/".concat(t))};var o=function(t){"pristine"===t.state&&n.open("/songs/".concat(t.song_id)),e.path("/lyrics_synchronization/".concat(t.id))}}]})},function(t,e){angular.module("genius").component("manageChartItem",{bindings:{type:"<",id:"<"},templateUrl:"manage_chart_item.html",controller:["ChartClient",function(t){var e=this;this.$onInit=function(){e.loading=!0,t.state(e.type,e.id).then((function(t){e.excluded=t.excluded,e.loading=!1}))},this.toggle_excluded=function(){e.loading=!0,(e.excluded?t.unexclude(e.type,e.id).then((function(){return e.excluded=!1})):t.exclude(e.type,e.id).then((function(){return e.excluded=!0}))).finally((function(){return e.loading=!1}))}}]})},function(t,e){angular.module("genius").component("manageRoles",{templateUrl:"manage_roles.html",bindings:{user:"<"},controller:["Session","UserClient","Reversible","AppConfig",function(t,e,n,r){var i=this;this.user_authority_roles=r.user_authority_roles,this.can_toggle=function(e){return t.has_permission("toggle_".concat(e,"_status"),i.user)},this.has_role=function(t){return _.includes(i.user.roles_for_display,t)},this.role_grant=function(t){return _.find(i.user.role_grants,(function(e){return e.role===t}))},this.errors={},this.grant=function(t,r){var o=r?"role.actions.confirm_grant":"role.actions.confirm_remove";if(window.confirm(I18n.t(o,{role:t,login:i.user.login}))){var a,s;i.errors={},r?(a=i.user.roles_for_display.concat(t),s=e.add_role(i.user.id,t)):(a=_.without(i.user.roles_for_display,t),s=e.remove_role(i.user.id,t));var c=n.modify(i.user,{roles_for_display:a});s.then((function(t){_.assign(i.user,t.user)})).catch((function(e){c(),i.errors[t]=e.errors}))}}}]})},function(t,e){function n(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var r,i,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);a=!0);}catch(t){s=!0,i=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}angular.module("genius").component("marqueeAd",{templateUrl:"marquee_ad.html",bindings:{name:"@"},controller:["Cookies","$scope","$element","AppConfig","$window","IntersectionObserver",function(t,e,r,i,o,a){var s=this,c=function(t){return"marquee_seen_".concat(t)},l=function(t){r.find(".celtra-ad-inline-host iframe")[0].contentWindow.postMessage(t,"*")};this.$onInit=function(){s.permanently_collapsed=!1,s.marquee_ready=!1},this.$onDestroy=function(){return s.observer&&s.observer.disconnect()},this.on_filled=function(t){s.creative_id=t.creativeId;var e=function(t){t.origin==="https://".concat(i.canonical_domain)&&("marqueeLoaded"===t.data?s.on_marquee_loaded():"marqueeReady"===t.data&&s.on_marquee_ready())};return o.addEventListener("message",e),function(){return o.removeEventListener("message",e)}},this.on_marquee_loaded=function(){var e=Boolean(t.get(c(s.creative_id)));l({type:"userData",seen:e}),e?s.permanently_collapsed=!0:u()};var u=function(){t.put(c(s.creative_id),1,{expires:1});var r=_.debounce((function(){l({type:"permanentlyCollapse"}),e.$applyAsync((function(){return s.permanently_collapsed=!0}))}),1e3);s.observer=new a((function(t){n(t,1)[0].isIntersecting?r.cancel():r()}),{threshold:.41000000000000003});var i=document.querySelector(".marquee_ad");s.observer.observe(i)};this.on_marquee_ready=function(){s.marquee_ready=!0,e.$apply()}}]})},function(t,e){angular.module("genius").component("mediaPlayer",{templateUrl:"media_player.html",bindings:{media_sources:"<mediaSources",sticky_offset:"<stickyOffset",on_edit:"&onEdit",can_edit:"<canEdit"},controller:["Tracking","mobile_device",function(t,e){var n=this;this.$onInit=function(){n.media_player={}},this.$onChanges=function(t){if(t.media_sources){for(var e,r=0,i=["youtube","soundcloud"];r<i.length;r++){var o=i[r];if(e=_.find(n.media_sources,{provider:o}))break}_.get(e,"url")!==_.get(n.media,"url")&&(n.played_once=!1,n.media=e,e||(n.media_player={}))}},this.play=function(){n.played_once?n.media_player.api.playpause():(n.media_player.api.load_media(),"youtube"===n.media.provider&&e||n.media_player.api.playpause(),"youtube"===n.media.provider?t.track("Play featured video",{properties:{"Video provider":n.media.provider}}):t.track("Play audio",{properties:{"Audio provider":n.media.provider}}),n.played_once=!0)}}]})},function(t,e){angular.module("genius").component("mergeArtistForm",{templateUrl:"merge_artist_form.html",bindings:{artist:"<"},controller:["Session","ArtistClient",function(t,e){this.artist_name_to_merge_with="",this.can=function(e,n){return t.has_permission(e,n)},this.merge_artist=function(){if(this.show_warning){if(delete this.errors,delete this.artist_merge_complete,this.saving)return;this.saving=!0,e.merge(this.artist.id,this.artist_name_to_merge_with).then(function(){this.artist_merge_complete=!0}.bind(this)).catch(function(t){this.errors=t.data.response.errors}.bind(this)).finally(function(){delete this.saving}.bind(this))}else this.show_warning=!0}.bind(this)}]})},function(t,e){angular.module("genius").component("messagesInbox",{bindings:{opened:"<",decrement_unread_count:"&decrementUnreadCount",embed:"<"},templateUrl:"messages_inbox.html",controller:["Attempt","InboxClient","Tracking","$window",function(t,e,n,r){var i=this;this.attempt_close=function(e){t.close_form(e,(function(){i.composing=!1,i.on_modal_close()}))};var o=function(){i.refresh_at=Date.now()};this.$onInit=function(){e.on_update("messages_inbox",o)},this.$onChanges=function(t){if(t.opened){var e=t.opened.currentValue,r=t.opened.previousValue;!e||r&&!t.opened.isFirstChange()||n.track("Inbox Open",{inbox_name:"messages_inbox"})}},this.on_conversation_read=function(t){i.decrement_unread_count({decrement:t}),i.embed&&r.parent.postMessage({type:"decrement_unread_messages_count",decrement:t},"*")},this.on_modal_open=function(){if(i.modal_open=!0,i.embed){var t=r.frameElement.parentElement;t.style.height="".concat(r.parent.innerHeight,"px");var e=t.offsetHeight;t.style.height="auto",i.modal_dimensions={top:t.scrollTop,height:Math.min(Math.max(t.offsetHeight,800),e)-32,width:t.offsetWidth-32}}},this.on_modal_close=function(){return i.modal_open=!1}}]})},function(t,e){angular.module("genius").component("miniAlbumCard",{bindings:{album:"<object",variants:"<"},templateUrl:"mini_album_card.html"})},function(t,e){angular.module("genius").component("miniAnnotatableCard",{bindings:{object:"<",variants:"<"},templateUrl:"mini_annotatable_card.html"})},function(t,e){angular.module("genius").component("miniArticleCard",{bindings:{article:"<object",variants:"<"},templateUrl:"mini_article_card.html"})},function(t,e){angular.module("genius").component("miniArtistCard",{bindings:{artist:"<object",variants:"<"},templateUrl:"mini_artist_card.html"})},function(t,e){angular.module("genius").component("miniSongCard",{bindings:{song:"<object",search_highlights:"<searchHighlights",artist:"<",number:"<",variants:"<"},templateUrl:"mini_song_card.html",controller:["string_to_symbol_array",function(t){var e=this,n=function(e,n,r){return t(e).slice(n,r).join("")};this.$onChanges=function(t){if((t.artist||t.song)&&(e.non_primary_artist_present=e.artist&&e.artist.id!==e.song.primary_artist.id),t.search_highlights){var r=_.keyBy(e.search_highlights,"property").lyrics;r&&(e.excerpt_with_markup=function(t){var e=t.value,r=t.ranges,i=[],o=0;r.forEach((function(t){var r=n(e,o,t.start),a=n(e,t.start,t.end),s="<span>".concat(a,"</span>");i.push(r),i.push(s),o=t.end}));var a=e.split("").slice(o).join("");return i.push(a),i.join("")}(r))}}}]})},function(t,e){angular.module("genius").component("miniUserCard",{bindings:{user:"<object",variants:"<"},templateUrl:"mini_user_card.html"})},function(t,e){angular.module("genius").component("miniVideoCard",{templateUrl:"mini_video_card.html",bindings:{video:"<object"}})},function(t,e){angular.module("genius").component("missingMetadataForm",{templateUrl:"missing_metadata_form.html",bindings:{missing_params:"<missingParams",object:"<",type:"@",yields_api:"&yieldsApi",yields_iq:"&yieldsIq",on_pending_event:"&onPendingEvent",placeholder:"@",source:"@"},controller:["$scope","SongClient","Tracking","Reversible",function(t,e,n,r){var i=this,o=["autocomplete_artists","autocomplete_albums"],a=function(t,e){return o.includes(t)?{reset:function(){return i.changes[e]=[]},changes_count:function(){return i.changes[e].length}}:{reset:function(){return i.changes[e]=null},changes_count:function(){return Number(!_.isEmpty(i.changes[e]))}}};this.$onInit=function(){i.params=_.map(i.missing_params,a),i.changes={},i.reset_changes(),i.iq_api=_.cloneDeep(i.object.current_user_metadata.iq_by_action),i.yields_iq({iq_api:i.iq_api}),t.$watch((function(){return _.sum(_.invokeMap(i.params,"changes_count"))}),(function(t){return i.iq_api.edit_metadata.primary.multiplier=_.max([t,1])})),i.yields_api({api:{edit:function(){return i.show_full_form=!0}}})},this.submit=function(){i.errors=[],i.saving=!0;var t,o=r.modify(i.object,i.changes);if("song"===i.type)t=e.update(i.object.id,i.changes),i.on_pending_event({event:"UserEditMetadataSong",result:t});t.then((function(){n.track("Metadata Edit",{Source:i.source})})).catch((function(t){o(),i.reset_changes(),i.errors=t.errors})).finally((function(){i.saving=!1}))},this.cancel=function(){i.reset_changes(),i.show_full_form=!1,i.errors=[]},this.reset_changes=function(){_.invokeMap(i.params,"reset")}}]})},function(t,e){angular.module("genius").component("notificationInbox",{bindings:{inbox_name:"@inboxName",abbreviate_after:"@abbreviateAfter",sync_count_to_title:"<syncCountToTitle",open_inboxes:"<openInboxes"},templateUrl:"notification_inbox.html",controller:["$sce","Pusher","Session","$scope","$window","AppConfig","mobile_device",function(t,e,n,r,i,o,a){var s=this;this.$onInit=function(){s.src=t.trustAsResourceUrl("/inboxes/".concat(s.inbox_name,"?embed=true")),e.subscribe(n.current_user.pusher_channel,"inbox-marked-read",(function(t){t.inbox===s.inbox_name&&"messages_inbox"!==s.inbox_name&&s.unread_count_api.clear()})),i.addEventListener("message",(function(t){t.origin==="https://".concat(o.canonical_domain)&&"decrement_unread_messages_count"===_.get(t.data,"type")&&"messages_inbox"===s.inbox_name&&r.$applyAsync((function(){return s.unread_count_api.decrement(t.data.decrement)}))}))},this.toggle=function(t){a||(t.preventDefault(),s.open_inboxes[s.inbox_name]=!s.open_inboxes[s.inbox_name],s.open_inboxes[s.inbox_name]&&(s.loading=!0))}}]})},function(t,e){angular.module("genius").component("otherUsersWithIp",{templateUrl:"other_users_with_ip.html",bindings:{user:"<"},controller:["PagedDataFeed","UserClient",function(t,e){var n=this;this.$onChanges=function(r){r.user&&(n.infinite_scroll_data=new t(_.partial(e.other_users_with_ip,n.user.id),"other_users_with_ip"))}}]})},function(t,e){angular.module("genius").component("pageTransitionOverlay",{template:'\n    <div class="page_transition_overlay" ng-if="$ctrl.transitioning()"></div>\n  ',controller:["PageTransition",function(t){this.transitioning=function(){return t.transitioning}}]})},function(t,e){angular.module("genius").component("paginatedAccomplishments",{bindings:{user:"<"},templateUrl:"paginated_accomplishments.html",controller:["CursoredDataFeed","AccomplishmentClient","UserClient","Reversible","Session",function(t,e,n,r,i){var o=this;this.$onInit=function(){var t;Reflect.defineProperty(o,"visibility",{get:function(){return t},set:function(e){t=e,this.update_src()}}),o.visibility="visible",o.filter_options=[{i18n_key:"manage_accomplishments.all",value:"all"},{i18n_key:"manage_accomplishments.visible",value:"visible"},{i18n_key:"manage_accomplishments.hidden",value:"hidden"}]},this.can=function(t){return i.has_permission(t,o.user)},this.toggle_managing=function(){o.managing=!o.managing,o.managing?o.visibility="all":o.visibility="visible"},this.update_src=function(){o.scrollable_data=new t(_.partial(n.accomplishments,o.user.id),"accomplishments",{visibility:o.visibility,per_page:10})},this.toggle=function(t){var n=r.modify(t,{hidden:!t.hidden});e.update(t.id,{accomplishment:{hidden:t.hidden}}).then((function(e){_.assign(t,e.accomplishment)})).catch((function(){n()}))}}]})},function(t,e){angular.module("genius").component("paginatedLeaderboard",{bindings:{source:"<",per_page:"<perPage",on_empty:"&onEmpty",extra_info:"@extraInfo"},templateUrl:"paginated_leaderboard.html",controller:["PagedDataFeed",function(t){var e=this;this.$onChanges=function(n){(n.source||n.per_page)&&(e.scrollable_data=new t(e.source,"leaderboard",{per_page:e.per_page}))}}]})},function(t,e){angular.module("genius").component("profileAdminPane",{bindings:{user:"<",view_errors_link:"<viewErrorsLink"},templateUrl:"profile_admin_pane.html",controller:["Session",function(t){var e=this;this.$onInit=function(){e.managing_accomplishments=!1},this.$onChanges=function(t){t.user&&(e.can_moderate=e.can("toggle_penalty_status")||e.can("mark_spam")||e.can("mark_ham")||e.can("mass_delete_unreviewed_activity")||e.can("mass_delete_votes"))},this.can=function(n){return t.has_permission(n,e.user)}}]})},function(t,e){angular.module("genius").component("profileAllActivity",{templateUrl:"profile_all_activity.html",bindings:{user:"<",artist:"<"},controller:["UserClient","ArtistClient","PagedDataFeed","Session",function(t,e,n,r){var i=this;this.$onChanges=function(o){i.activity_types=[],r.has_permission("view_activity_stream",i.user)&&i.activity_types.push({activity_type:"user",label:"".concat(i.user.name,"'s Activity"),profile_activity_scrollable_data:new n(_.partial(t.activity_line_items,i.user.id),"line_items",{text_format:"html"})}),r.has_permission("view_activity_stream",i.artist)&&i.activity_types.push({activity_type:"artist",label:"Activity on ".concat(i.artist.name,"'s songs"),profile_activity_scrollable_data:new n(_.partial(e.activity_line_items,i.artist.id),"line_items",{text_format:"html"})}),i.activity_type=i.activity_types[0]}}]})},function(t,e){angular.module("genius").component("profileAnnotation",{bindings:{annotation:"<",referent:"<",variants:"<"},templateUrl:"profile_annotation.html",controller:["$scope",function(t){t.$watchGroup(["$ctrl.annotation.community","$ctrl.annotation.cosigned_by"],function(){this.referent_display_mode=this.annotation.community&&0===this.annotation.cosigned_by.length?"default":"green"}.bind(this)),t.$on("annotation_deleted",function(t,e,n){e===this.annotation&&n.then(function(){this.deleted=!0}.bind(this))}.bind(this))}]})},function(t,e){angular.module("genius").component("profileArtistDescriptionPreview",{templateUrl:"profile_artist_description_preview.html",bindings:{artist:"<",top_scholar:"<topScholar"}})},function(t,e){angular.module("genius").component("profileArtistPane",{bindings:{artist:"<"},templateUrl:"profile_artist_pane.html",controller:["Session","ArtistClient",function(t,e){var n=this;this.$onInit=function(){n.user_signed_in=t.user_signed_in,n.show_report_abuse=t.has_feature("report_abuse")},this.$onChanges=function(t){t.artist&&(n.twitter_url="https://twitter.com/".concat(n.artist.twitter_name),n.facebook_url="http://www.facebook.com/".concat(n.artist.facebook_name),n.instagram_url="http://instagram.com/".concat(n.artist.instagram_name))},this.get_leaderboard_page=function(t){return e.load_leaderboard(n.artist.id,t)},this.can=function(e,n){return t.has_permission(e,n)},this.change_state=function(t){return n.state=t}}]})},function(t,e){angular.module("genius").component("profileContributionsAnnotations",{templateUrl:"profile_contributions_annotations.html",bindings:{user:"<",contributions_group:"<contributionsGroup"},controller:function(){var t=this;this.$onInit=function(){t.limit=1},this.$onChanges=function(e){e.contributions_group&&(t.annotations=t.contributions_group.contributions)}}})},function(t,e){angular.module("genius").component("profileContributionsAnswers",{templateUrl:"profile_contributions_answers.html",bindings:{user:"<",contributions_group:"<contributionsGroup"},controller:function(){var t=this;this.$onChanges=function(e){e.contributions_group&&(t.answers=t.contributions_group.contributions)}}})},function(t,e){angular.module("genius").component("profileContributionsArticles",{templateUrl:"profile_contributions_articles.html",bindings:{user:"<",contributions_group:"<contributionsGroup"},controller:function(){var t=this;this.$onChanges=function(e){e.contributions_group&&(t.article=t.contributions_group.contributions[0])}}})},function(t,e){angular.module("genius").component("profileContributionsComments",{templateUrl:"profile_contributions_comments.html",bindings:{user:"<",contributions_group:"<contributionsGroup"},controller:function(){var t=this;this.$onInit=function(){t.limit=1},this.$onChanges=function(e){e.contributions_group&&(t.comments=t.contributions_group.contributions,t.commentable=t.comments[0].commentable)}}})},function(t,e){angular.module("genius").component("profileContributionsGroup",{templateUrl:"profile_contributions_group.html",bindings:{user:"<",contributions_group:"<contributionsGroup"}})},function(t,e){angular.module("genius").component("profileContributionsPyongs",{templateUrl:"profile_contributions_pyongs.html",bindings:{user:"<",contributions_group:"<contributionsGroup"},controller:function(){var t=this;this.$onChanges=function(e){e.contributions_group&&(t.pyong=t.contributions_group.contributions[0])}}})},function(t,e){angular.module("genius").component("profileContributionsQuestions",{templateUrl:"profile_contributions_questions.html",bindings:{user:"<",contributions_group:"<contributionsGroup"},controller:function(){var t=this;this.$onChanges=function(e){e.contributions_group&&(t.questions=t.contributions_group.contributions)}}})},function(t,e){angular.module("genius").component("profileContributionsTranscriptions",{templateUrl:"profile_contributions_transcriptions.html",bindings:{user:"<",contributions_group:"<contributionsGroup"},controller:function(){var t=this;this.$onChanges=function(e){e.contributions_group&&(t.song=t.contributions_group.contributions[0])}}})},function(t,e){angular.module("genius").component("profileFollowers",{bindings:{artist:"<",user:"<",follows:"<"},templateUrl:"profile_followers.html",controller:["PagedDataFeed","UserClient",function(t,e){var n=this;this.$onChanges=function(t){t.user&&(n.scrollable_data=n.get_scrollable_data())},this.get_scrollable_data=function(){return n.user&&n.follows?new t(_.partial(e.load_followed_users,n.user.id),"followed_users"):n.user&&!n.follows?new t(_.partial(e.load_followers_by_user,n.user.id),"followers"):n.user?void 0:new t(_.partial(e.load_followers_by_artist,n.artist.id),"followers")}}]})},function(t,e){angular.module("genius").component("profileIdentity",{templateUrl:"profile_identity.html",bindings:{artist:"<",user:"<"},controller:[function(){var t=this;this.alternate_name_limit=2,this.user_has_more_than_one_role=function(){return t.user&&t.user.roles_for_display.length>1},this.more_alternate_names_to_show=function(){return t.artist.alternate_names.length>t.alternate_name_limit},this.show_all_alternate_names=function(){t.alternate_name_limit=1/0}}]})},function(t,e){var n=[{i18n_key:"contribution_type.all_activity.name",filter:null,sort:[]},{i18n_key:"contribution_type.annotations.name",filter:"annotations",sort:[{i18n_key:"contribution_type.annotations.sort.popularity",value:"popularity"},{i18n_key:"contribution_type.annotations.sort.chronologically",value:"chronologically"}]},{i18n_key:"contribution_type.pyongs.name",filter:"pyongs",sort:[]},{i18n_key:"contribution_type.transcriptions.name",filter:"transcriptions",sort:[{i18n_key:"contribution_type.transcriptions.sort.popularity",value:"popularity"},{i18n_key:"contribution_type.transcriptions.sort.chronologically",value:"chronologically"}]},{i18n_key:"contribution_type.comments.name",filter:"comments",sort:[]},{i18n_key:"contribution_type.questions_and_answers.name",filter:"questions_and_answers",sort:[]},{i18n_key:"contribution_type.articles.name",filter:"articles",sort:[{i18n_key:"contribution_type.articles.sort.popularity",value:"popularity"},{i18n_key:"contribution_type.articles.sort.chronologically",value:"chronologically"}]},{i18n_key:"contribution_type.unreviewed_annotations.name",filter:"unreviewed_annotations",sort:[{i18n_key:"contribution_type.unreviewed_annotations.sort.popularity",value:"popularity"},{i18n_key:"contribution_type.unreviewed_annotations.sort.chronologically",value:"chronologically"}]}];angular.module("genius").component("profilePage",{templateUrl:"profile_page.html",bindings:{artist:"<",user:"<",artist_songs:"<artistSongs",artist_albums:"<artistAlbums",top_scholar:"<topScholar",top_accomplishment:"<topAccomplishment",pinned_annotations:"<pinnedAnnotations",artist_has_more_songs:"<artistHasMoreSongs",show_artist_pane:"<showArtistPane",preloaded_user_activity:"<preloadedUserActivity",initial_next_user_activity_timestamp:"<initialNextUserActivityTimestamp",$router:"<",current_user_metadata:"<currentUserMetadata"},controller:["CursoredDataFeed","UserClient","ArtistClient","$rootRouter","Session","ScrollPoint","Tracking","mobile_device","VideoRegistry","Attempt",function(t,e,r,i,o,a,s,c,l,u){var d=this;this.$onInit=function(){d.attempt_close=u.close_form,d.user_activity_sort_options_by_filter=n,d.logged_in=o.user_signed_in,d.show_report_abuse=o.has_feature("report_abuse"),d.user&&d.filter_activity_by(d.user_activity_sort_options_by_filter[0]);var t={};d.artist?(t["Artist ID"]=d.artist.id,l.register_page(d.artist,c?"mobile_artist_page":"desktop_artist_page")):t["Profile User ID"]=d.user.id,s.delayed_track("Profile Page Load",t)},this.$onChanges=function(t){(t.user||t.artist)&&(d.community_artist=d.artist&&d.user&&!d.user.is_verified),t.user&&(d.can_message_user=d.can("send_message",d.user),d.can_view_activities_in_real_time=d.logged_in&&d.user,d.can_edit_artist_profile=d.can("edit_anything",d.artist),d.can_edit_user_profile=d.can("edit",d.user),d.can_edit_profile=d.can_edit_artist_profile||d.can_edit_user_profile,d.can_view_admin_info=d.can("view_admin_info",d.user),d.can_view_roles=d.can("view_roles",d.user),d.can_verify=d.can("toggle_verification_status",d.user),d.can_moderate_user=d.can("toggle_penalty_status",d.user)||d.can("mark_spam",d.user)||d.can("mark_ham",d.user)||d.can("mass_delete_unreviewed_activity",d.user)||d.can("mass_delete_votes",d.user),d.can_view_tracked_errors=d.can("view_tracked_errors",d.user),d.user&&(d.bugsnag_link="https://app.bugsnag.com/genius/genius/errors?"+"filters[event.since][0]=all&filters[user.id][0][value]=".concat(d.user.id,"&filters[user.id][0][type]=eq")))},this.scroll_to=a.scroll_to,this.can=function(t,e){return o.has_permission(t,e)},this.filter_activity_by=function(n,r){d.filter_by_contribution_type=n,n.filter?(d.filter_by_contribution_type_sort=r||n.sort[0],d.user_contributions_scrollable_data=new t(_.partial(e.load_contributions,d.user.id,n.filter),"contribution_groups",{text_format:"html,markdown",sort:d.filter_by_contribution_type_sort&&d.filter_by_contribution_type_sort.value,per_page:8})):d.user_contributions_scrollable_data=new t(_.partial(e.load_contributions,d.user.id,!1),"contribution_groups",{text_format:"html,markdown",per_page:8},d.initial_next_user_activity_timestamp)},this.filter_activity_by_type=function(t){d.filter_activity_by(_.find(d.user_activity_sort_options_by_filter,{filter:t})),d.scroll_to("user_activity")},this.display_as_artist=function(){return!(!d.artist||d.user&&!d.user.is_verified)},this.display_as_user=function(){return!d.display_as_artist()},this.header_url=function(){return d.display_as_artist()?d.artist.header_image_url:d.user.header_image_url},this.avatar_url=function(){return d.display_as_artist()?d.artist.image_url:d.user.avatar.medium.url};var p=function(t){d.display_as_artist()?i.navigate(["ArtistPage",{},t?"ProfileBioPage":"ProfilePage",{slug:r.get_slug(d.artist)}]):i.navigate([t?"UserBioPage":"UserPage",{slug:e.get_slug(d.user)}])};this.open_description=function(){p(!0)},this.close_description=function(){p(!1)},this.change_state=function(t){return d.state=t},this.close_conversation_modal=function(){return d.show_conversation_modal=!1}}]})},function(t,e){angular.module("genius").component("profileUserDescriptionPreview",{templateUrl:"profile_user_description_preview.html",bindings:{user:"<",top_accomplishment:"<topAccomplishment"}})},function(t,e){angular.module("genius").component("profileUserPane",{bindings:{user:"<",on_statistics_select:"&onStatisticsSelect"},templateUrl:"profile_user_pane.html",controller:["Tracking",function(t){var e=this;this.change_state=function(n){e.state=n,t.track("Profile Tab Open",{tab_name:n,display_as_artist:!1})}}]})},function(t,e){angular.module("genius").component("question",{bindings:{question:"<",variants:"<",move_question:"&?moveQuestion",featured:"<",on_pending_event:"&onPendingEvent",yields_iq:"&yieldsIq",yields_api:"&yieldsApi"},templateUrl:"question.html",controller:["Reversible","QuestionClient","Session",function(t,e,n){var r=this;this.$onInit=function(){r.yields_api({api:{answer:function(){r.answerApi.start_editing()},archive:r.archive}})},this.can=function(t,e){return n.has_permission(t,e)},this.is_pinned=function(){return"pinned"===r.question.state},this.is_verified=function(){return r.question.answer&&r.question.answer.answer_source},this.archive=function(){if(!confirm("Are you sure?"))return!1;r.question._deleted=!0;var t=r.change_state("archive");return r.on_pending_event({event:"UserArchiveQuestion",result:t}),t.catch((function(){Reflect.deleteProperty(r.question,"_deleted")}))},this.pin=function(){var e=t.modify(r.question,{state:"pinned"});return r.change_state("pin").catch(e)},this.unpin=function(){var e=t.modify(r.question,{state:"pending"});return r.change_state("unpin").catch(e)},this.change_state=function(t){return e.create_if_not_exists(r.question).then((function(){return e.change_state(r.question,t)}))},this.start_editing=function(){r.question._editing=_.defaults(r.question._editing||{},{_form_visible:!0,body:r.question.body})},this.move=function(t){this.move_question({direction:t,question:this.question})},this.cancel_editing=function(){Reflect.deleteProperty(r.question,"_editing")},this.finish_editing=function(){if(!r.disable_saving_with){r.disable_saving_with="Saving";var n=t.modify(r.question,{"_editing._form_visible":!1});e.update(r.question,{question:r.question._editing}).then(r.cancel_editing.bind(r)).catch(n).finally((function(){r.disable_saving_with=!1}))}}}]})},function(t,e){angular.module("genius").component("questionForm",{bindings:{questionable:"<",on_new_question:"&onNewQuestion"},templateUrl:"question_form.html",controller:["Session","$scope","QuestionClient",function(t,e,n){var r=this;this.user_signed_in=t.user_signed_in;var i=function(e){r.question={_new:!0,author:t.current_user,author_name:e&&e.author_name,author_email:e&&e.author_email,body:""}};this.save=function(){if(!r.saving){r.saving=!0,t.user_signed_in||(r.question.anonymous_user={name:r.question.name});var o=r.question;i(),e.question_form.$setPristine(),n.create(r.questionable._type,r.questionable.id,o).then((function(){r.saving=!1,e.question_form.$setPristine(),r.thank_you=!0,r.on_new_question({question:o}),i(o),r.error={}})).catch((function(t){r.error=t,r.question=o,r.saving=!1}))}}}]})},function(t,e){function n(t){return function(t){if(Array.isArray(t))return r(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}angular.module("genius").component("questionList",{bindings:{pinned_questions:"<pinnedQuestions",default_questions:"<defaultQuestions",featured_question:"<featuredQuestion",pending_question_count:"<pendingQuestionCount",variants:"<",questionable:"<"},templateUrl:"question_list.html",controller:["QuestionClient","PagedDataFeed",function(t,e){var r=this,i={state:"pending"};this.$onChanges=function(n){(n.default_questions||n.pinned_questions)&&(r.questions=_([]).concat(r.default_questions,r.pinned_questions).compact().value(),r.monetized_question_ids=r.pinned_questions.map((function(t,e){return{id:t.id,index:e}})).filter((function(t){var e=t.index;return e%2==0&&e<r.pinned_questions.length-1})).map((function(t){return t.id}))),n.featured_question&&r.featured_question&&"pinned"!==r.featured_question.state&&r.questions.push(r.featured_question),n.variants&&(r.variants&&r.variants.answered&&(i.answered=r.variants.answered),r.scrollable_data=new e(_.partial(t.index,r.questionable._type,r.questionable.id),"questions",i)),n.pending_question_count&&(r.pending_question_count?r.has_next=r.scrollable_data.has_next:r.has_next=function(){return!1})},this.sorting_predicates=[function(t){return["default","pinned","pending","archived"].indexOf(t.state)},"pin_order"],this.move_question=function(e,n){var i;"up"===e?i=_(r.questions).filter((function(t){return t.pin_order&&t.pin_order<n.pin_order})).sortBy("pin_order").reverse().take(2).thru((function(t){return[t[1],t[0]]})):"down"===e&&(i=_(r.questions).filter((function(t){return t.pin_order&&t.pin_order>n.pin_order})).sortBy("pin_order").take(2).thru((function(t){return[t[0],t[1]]})));var o=r.move_question_between(n,i.get(0),i.get(1));t.move(n,e).catch(o)},this.move_question_between=function(t,e,n){var r;e&&n?r=(e.pin_order+n.pin_order)/2:n?r=n.pin_order/2:e&&(r=e.pin_order+1);var i=t.pin_order;return t.pin_order=r,function(){t.pin_order=i}},this.load_more=function(){r._loading=!0,r.scrollable_data.next().then((function(t){var e;t=_.reject(t,r.is_featured_question,r),r.pending_question_count-=t.length,(e=r.questions).push.apply(e,n(t))})).finally((function(){r._loading=!1}))},this.is_featured_question=function(t){return r.featured_question&&r.featured_question.id===t.id},this.is_monetized=function(t){return r.monetized_question_ids.includes(t.id)}}]})},function(t,e){angular.module("genius").component("reasonsToggle",{bindings:{reasonChanged:"&"},templateUrl:"reasons_toggle.html",controller:["AppConfig",function(t){this.comment_reasons=t.comment_reasons,this.comment_reasons_help_url=t.comment_reasons_help_url,this.selectedReason="",this.change_reason=function(t){this.selectedReason===t?delete this.selectedReason:this.selectedReason=t,this.reasonChanged({reason:this.selectedReason})}}]})},function(t,e){angular.module("genius").component("recentSignupsPage",{templateUrl:"recent_signups_page.html",controller:["UserClient","Attempt","TimestampedDataFeed","I18n",function(t,e,n,r){var i=function(e,n){n.marking_spam_state=!0,t.update_spam_state(n.user.id,{state:e}).then(function(){n.marked_spam_state=!0}.bind(this)).finally((function(){delete n.marking_spam_state}))}.bind(this);this.mark=function(t,n){e.admin_action((function(){i(t,n)}),r.t("mark_"+t+".confirm"))},this.filter_by_spam_state=function(e){this.filtering_spam_state!==e&&(this.filtering_spam_state=e,this.recent_signups_scrollable_data=new n(_.partial(t.load_recent_signups,"unclassified_spam_state"===e?"":e),"user_spam_evaluations"))},this.filter_by_spam_state("unclassified_spam_state")}]})},function(t,e){angular.module("genius").component("recirculatedContent",{templateUrl:"recirculated_content.html",bindings:{song:"<",stories:"<",placement:"@"},controller:["VideoPlacement","Session",function(t,e){var n=this;this.$onChanges=function(e){e.song&&n.song&&(n.video_placement=new t(n.song,n.placement))},this.can=function(t,n){return e.has_permission(t,n)}}]})},function(t,e){angular.module("genius").component("relevantVideos",{bindings:{object:"<",placement:"@",container_classes:"@containerClasses",on_filled:"&onFilled",on_no_video:"&onNoVideo",variants:"<"},templateUrl:"relevant_videos.html",controller:["VideoPlacement","Session",function(t,e){var n=this;this.$onChanges=function(e){e.object&&(n.video_placement=new t(n.object,n.placement,(function(t){return t.length?n.on_filled({videos:t}):n.on_no_video()})))},this.can=function(t,n){return e.has_permission(t,n)}}]})},function(t,e){angular.module("genius").component("reportAbuse",{templateUrl:"report_abuse.html",bindings:{type:"@",reportable:"<object",inline:"<",onClick:"&onClick",buttonClass:"@",buttonText:"@"},controllerAs:"ctrl",controller:["AppConfig","ReportAbuseClient","gRecaptcha","Session",function(t,e,n,r){var i=this;this.loggedIn=r.user_signed_in,this.loggedIn||n.initialize({key:t.recaptcha_v3_site_key}),this.reasons=[{value:"Harmful or abusive content",label:"harmful"},{value:"Hate speech or discrimination",label:"discrimination"},{value:"Misleading information",label:"misleading"},{value:"Suspicious or Spam",label:"suspicious"},{value:"Other",label:"other"}],this.submitForm=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return new Promise((function(n){e.reportAsAbusive(i.type,i.reportable.id,i.reason,i.details,t).then((function(){i.show_form=!1,i.reported_abuse=!0})).catch((function(){i.has_error=!0})).finally(n)}))},this.submit=function(){i.report_abuse_form.$invalid||(i.submitting=!0,i.loggedIn?i.submitForm().then((function(){i.submitting=!1})):n.execute({action:"report_abuse"}).then(i.submitForm).then((function(){i.submitting=!1})).catch((function(){i.has_error=!0})))}}]})},function(t,e){!function(t){var e=["artist","user","artist_songs","artist_albums","top_scholar","top_accomplishment","pinned_annotations","artist_has_more_songs","preloaded_user_activity","initial_next_user_activity_timestamp","current_user_metadata"],n=/(?:)/,r=/.*/,i=_.curry((function(t,e){return new RegExp("".concat(e.source).concat(t.source))})),o=_.curry((function(t,e){return new RegExp("(?:".concat(e.source).concat(t.source,")?"))})),a=function(t){return new RegExp("(".concat(t.source,")"))},s=o(r),c=function(t){var e=t.path,r=void 0===e?s:e,i=t.query,o=void 0===i?s:i,a=t.hash,c=void 0===a?s:a;return new RegExp(["^",r(n).source,o(/\?/).source,c(/#/).source,"$"].join(""))};t.module("genius").component("routablePage",{template:"<ng-outlet></ng-outlet>",$routeConfig:[{path:"/song-stories",name:"SongStoryGalleryPage",component:"songStoryGalleryPage",data:{type:"song_story_gallery"}},{path:"/albums/:artist_slug/:album_slug",name:"AlbumPage",component:"albumPage",data:{type:"album",clientRoutableOn:["desktop"]}},{path:"/album_cover_arts/:cover_art_id",name:"AlbumPageCoverArtFocus",component:"albumPage",data:{type:"album_cover_art",clientRoutableOn:["desktop"]}},{path:"/a/:article_slug",name:"ArticlePage",component:"articlePage",data:{type:"article",clientRoutableOn:["desktop"]}},{path:"/a/preview/:preview_key",name:"ArticleExternalPreviewPage",component:"articlePage",data:{type:"article",clientRoutableOn:["desktop"]}},{path:"/articles/:article_id/preview",name:"ArticlePreviewPage",component:"articlePage",data:{type:"article",clientRoutableOn:["desktop"]}},{path:"/shows/:slug",name:"VideoListPage",component:"videoListPage",data:{type:"video_list",clientRoutableOn:["desktop"]}},{path:"/shows/:slug/:page",name:"VideoListPage",component:"videoListPage",data:{type:"video_list",clientRoutableOn:["desktop"]}},{path:"/videos/:slug",name:"VideoPage",component:"videoPage",data:{type:"video",clientRoutableOn:["desktop"]}},{path:"/search",name:"SearchResultsPage",component:"searchResultsPage"},{path:"/artists/...",name:"ArtistPage",component:"routableProfilePage"},{regex:c({path:i(a(/[^/?]*-(?:annotated|lyrics)/)),query:o(a(r))}),serializer:function(t){return{urlPath:t.slug}},name:"SongPage",component:"songPage",data:{type:"song"}},{path:"/admin_tasks",name:"AdminTasksPage",component:"adminTasksPage"},{path:"/apple_match_evaluations/:evaluation_id",name:"AppleMatchEvaluationsPage",component:"appleMatchEvaluationsPage"},{regex:c({path:i(a(/\d+/))}),serializer:function(t){return{urlPath:t.referent_id}},name:"SongReferentFocus",component:"songPage",data:{type:"referent"}},{path:"/:slug",name:"UserPage",component:"routedPage",data:{includeFromCache:e,component:"profilePage",include:{show_artist_pane:!1}}},{path:"/:slug/bio",name:"UserBioPage",component:"routedPage",data:{includeFromCache:e,component:"profilePage",include:{show_artist_pane:!0}}},{path:"/users/...",name:"UserRouter",component:"routableUserPage"}]})}(window.angular)},function(t,e){!function(t){var e=["artist","user","artist_songs","artist_albums","top_scholar","top_accomplishment","pinned_annotations","artist_has_more_songs","preloaded_user_activity","initial_next_user_activity_timestamp","current_user_metadata"];t.module("genius").component("routableProfilePage",{template:"<ng-outlet></ng-outlet>",$routeConfig:[{path:"/:slug",name:"ProfilePage",component:"routedPage",data:{component:"profilePage",includeFromCache:e,include:{show_artist_pane:!1}}},{path:"/:slug/bio",name:"ProfileBioPage",component:"routedPage",data:{component:"profilePage",includeFromCache:e,include:{show_artist_pane:!0}}}]})}(angular)},function(t,e){!function(t){t.module("genius").component("routableUserPage",{template:"<ng-outlet></ng-outlet>",$routeConfig:[{path:"/recent_signups",name:"RecentSignupsPage",component:"routedPage",data:{component:"recentSignupsPage"}}]})}(angular)},function(t,e){angular.module("genius").component("routedPage",{template:["$rootRouter",function(t){for(var e=function(t){return t.replace(/([a-zA-Z])(?=[A-Z])/g,"$1-").toLowerCase().replace(/_/g,"-")},n=t.currentInstruction;null!=n.child;)n=n.child;var r=n.component.routeData.data,i=e(r.component),o=t.currentInstruction.component.params;return"<"+i+" "+_(r.includeFromCache).map((function(t){return e(t)+'="$ctrl.preloadedData.'+t+'"'})).join(" ")+" "+_(r.includeFromUrlParams).map((function(t){return e(t)+'="'+o[t]+'"'})).join(" ")+" "+_(r.include||{}).map((function(t,n){return e(n)+'="'+t+'"'})).join(" ")+' $router="$ctrl.$router"></'+i+">"}],bindings:{$router:"<"},controller:["PreloadCache",function(t){this.preloadedData=t,this.$routerCanReuse=function(){return!1}}]})},function(t,e){angular.module("genius").component("searchResultItem",{bindings:{hit:"<"},templateUrl:"search_result_item.html"})},function(t,e){angular.module("genius").component("searchResultItems",{bindings:{results:"<",limit_to:"<limitTo"},templateUrl:"search_result_items.html"})},function(t,e){angular.module("genius").component("searchResultPaginatedSection",{bindings:{section_type:"@sectionType",search_text:"@searchText",on_load_next:"&onLoadNext"},templateUrl:"search_result_paginated_section.html",controller:["PagedDataFeed","SearchClient",function(t,e){var n=this;this.$onChanges=function(r){(r.section_type||r.search_text)&&(n.infinite_scroll_data=new t(_.partial(e.section,n.section_type,n.search_text),"hits",{},1,n.on_load_next))}}]})},function(t,e){angular.module("genius").component("searchResultSection",{bindings:{section:"<",on_show_more:"&onShowMore",limit_to:"<limitTo",variants:"<"},templateUrl:"search_result_section.html"})},function(t,e){angular.module("genius").component("searchResults",{bindings:{sections:"<",search_text:"<searchText",scroll_container_selector:"@scrollContainerSelector",on_filter:"&onFilter",on_sections_change:"&onSectionsChange",on_load_next:"&onLoadNext",on_animation_end:"&onAnimationEnd"},templateUrl:"search_results.html",controller:["$element","$immediate",function(t,e){var n=this;this.$onChanges=function(t){t.sections&&n.on_sections_change()},this.has_results=function(){return _.flatMap(n.sections,"hits").length>0};var r=t.find(this.scroll_container_selector);r.length||(r=$(t).closest(this.scroll_container_selector));var i,o,a=t.find(".global_search-search_results"),s=t.find(".global_search-search_results-sections");this.save_scroll_and_scroll_top=function(){e((function(){var e=t.find(".global_search-search_results-show_more");i=r.scrollTop(),o=a.height(),a.css({minHeight:o}),s.css({position:"absolute",top:-i}),e.css({position:"relative",top:0}),r.scrollTop(0)}))},this.restore_scroll=function(){var e=t.find(".global_search-search_results-show_more"),n=r.scrollTop();e.css({position:"absolute",top:i-n}),s.css({position:"relative",top:0}),r.scrollTop(i)},s.on("animationend",(function(){n.on_animation_end()}))}]})},function(t,e){angular.module("genius").component("searchResultsPage",{bindings:{$router:"<"},templateUrl:"search_results_page.html",controller:["mobile_device","SearchClient","Tracking",function(t,e,n){var r=this;this.$routerOnActivate=function(i){if(n.track("Search Standalone Page View"),!_.isEmpty(i.params.q)){r.q=decodeURIComponent(i.params.q);var o=t?3:5;return e.multi(r.q,{per_page:o}).then((function(t){r.sections=t,r.has_results=_.flatMap(r.sections,"hits").length>0}))}r.sections=[]}}]})},function(t,e){angular.module("genius").component("selectDropdown",{templateUrl:"select_dropdown.html",require:{ngModel:"?ngModel"},bindings:{options:"<",on_select:"&onSelect",variants:"<",selection:"<"},controller:["$scope",function(t){t.$watch("$ctrl.options",function(){this.selected=this.options[0]}.bind(this)),t.$watch("$ctrl.selected",function(){this.ngModel&&this.ngModel.$setViewValue(arguments[0])}.bind(this)),t.$watch("$ctrl.selection",function(t){t&&(this.selected=t)}.bind(this)),this.is_clickable=function(){return this.options.length>1}}]})},function(t,e){angular.module("genius").component("solidarityBanner",{templateUrl:"solidarity_banner.html",controller:["Cookies","AppConfig",function(t,e){var n=this,r="solidarity_flag_".concat(e.solidarity_text,"_").concat(e.solidarity_url);this.solidarity_text=e.solidarity_text,this.solidarity_url=e.solidarity_url,this.is_link_external=new URL(e.solidarity_url).host!==e.canonical_domain,this.$onInit=function(){var i=t.get(r);e.solidarity_text&&!i&&(n.visible=!0)},this.hide=function(){n.visible=!1,t.put(r,Date.now(),{path:"/"})}}]})},function(t,e){function n(t){return function(t){if(Array.isArray(t))return r(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}angular.module("genius").component("songActivityStream",{bindings:{songId:"<"},templateUrl:"song_activity_stream.html",controllerAs:"ctrl",controller:Object.assign(["$scope","SongClient",function(t,e){var r,i,o=this;this.load_next_page=function(){i||(i=e.line_items(o.songId,r).then((function(e){var o,a=e.line_items;(o=t.line_items).push.apply(o,n(a)),i=void 0,a.length&&(r=e.next_page)||(t.done_loading=!0)})))},this.should_paginate=function(){return!i&&!t.done_loading},t.line_items=[],t.done_loading=!1,r=1,o.load_next_page()}])})},function(t,e){angular.module("genius").component("songAlbum",{templateUrl:"song_album.html",bindings:{album:"<",tracks:"<",current_song:"<currentSong"},controller:["Session",function(t){var e=this;this.can=function(e,n){return t.has_permission(e,n)},this.is_current_song=function(t){return t.id===e.current_song.id},this.should_link_to_track=function(t){return e.can("view_song",t)&&!e.is_current_song(t.song)}}]})},function(t,e){angular.module("genius").component("songAlbums",{bindings:{song:"<",primary_album_tracks:"<primaryAlbumTracks"},templateUrl:"song_albums.html",controller:function(){var t=!1;this.primary_album=function(){return this.song.album},this.other_albums=function(){return this.primary_album()?_.reject(this.song.albums,{id:this.primary_album().id}):this.song.albums},this.hidden_album_count=function(){return t?0:Math.max(0,this.other_albums().length-2)},this.show_all=function(){t=!0}}})},function(t,e){angular.module("genius").component("songAttributionVisualization",{bindings:{id:"<"},templateUrl:"song_attribution_visualization.html",controller:["SongClient",function(t){var e=this,n=["#FF574B","#87A6FD","#7FFA95","#FFA0E8","#80FDFB","#FEF498","#E5A0AC","#A0CDA8"];this.$onInit=function(){e.users={},e.user_colors={},t.attribution_visualization(e.id).then((function(t){e.words=t.words,e.change_times=_.uniq(e.words.map((function(t){return t.changed_at}))).sort((function(t,e){return t-e})),e.current_time_index=e.change_times.length-1,t.users.forEach((function(t,r){e.users[t.id]=t,e.user_colors[t.id]=n[r]||"#CCCCCC"}))})),e.color=function(t){if(t.user_id)return e.user_colors[t.user_id]},e.words_to_show=function(){return e.words?e.words.filter((function(t){return t.changed_at<=e.change_times[e.current_time_index]})):[]},e.adjust_current_time_index=function(t){var n=e.current_time_index+t;n<0||n>e.change_times.length-1||(e.current_time_index=n)}}}]})},function(t,e){var n="#000000";angular.module("genius").component("songColorGradientPicker",{bindings:{song_art_primary_color:"=songArtPrimaryColor",song_art_secondary_color:"=songArtSecondaryColor",song_art_text_color:"=songArtTextColor",valid_song_art_contrast:"=validSongArtContrast",song_art_image_url:"<songArtImageUrl",errors:"<"},templateUrl:"song_color_gradient_picker.html",controller:["$scope",function(t){var e=this,r=function(t){var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return null===e?null:[e[1],e[2],e[3]].map((function(t){return parseInt(t,16)}))},i=function(t){var e=t.map((function(t){return(t/=255)<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}));return.2126*e[0]+.7152*e[1]+.0722*e[2]},o=function(t,e){if(!t||!e)return 1;var n=r(t),o=r(e),a=i(n),s=i(o);return a>s?_.round((a+.05)/(s+.05),2):_.round((s+.05)/(a+.05),2)},a=function(t){return t>=4.5};this.$onInit=function(){e.text_on_primary_contrast=o(e.song_art_primary_color,e.song_art_text_color),e.text_on_secondary_contrast=o(e.song_art_secondary_color,e.song_art_text_color),e.valid_song_art_contrast=a(e.text_on_primary_contrast)&&a(e.text_on_secondary_contrast)},t.$watch("$ctrl.song_art_primary_color",(function(t,r){if(t!==r){var i=o(t,n),s=a(i)?n:"#ffffff";e.text_on_primary_contrast=o(t,s),e.song_art_text_color!==s&&(e.song_art_text_color=s,e.text_on_secondary_contrast=o(e.song_art_secondary_color,s),e.valid_song_art_contrast=a(e.text_on_primary_contrast)&&a(e.text_on_secondary_contrast))}})),t.$watch("$ctrl.song_art_secondary_color",(function(t){e.text_on_secondary_contrast=o(t,e.song_art_text_color),e.valid_song_art_contrast=a(e.text_on_primary_contrast)&&a(e.text_on_secondary_contrast)}))}]})},function(t,e){angular.module("genius").component("songHeaderMediaPlayerControls",{templateUrl:"song_header_media_player_controls.html",bindings:{media_api:"<mediaApi",play_state:"<playState"},controller:function(){var t=this;this.$onInit=function(){return t.play_state="paused"}}})},function(t,e){angular.module("genius").component("songMetadataSongRelationshipsInput",{templateUrl:"song_metadata_song_relationships_input.html",bindings:{song_relationships:"<songRelationships",isDisabled:"<"},controller:function(){var t=this;this.$onChanges=function(e){e.song_relationships&&(t.visible_relationships=_.filter(t.song_relationships,(function(t){return t.songs.length})))},this.available_relationships=function(){return _.difference(t.song_relationships,t.visible_relationships)},this.change_relationship_to=function(e,n){n.songs=e.songs,e.songs=[],t.visible_relationships[t.visible_relationships.indexOf(e)]=n},this.remove_song_relationship=function(e){e.songs=[],t.visible_relationships=_.without(t.visible_relationships,e)},this.add_new_song_relationship=function(){var e=t.available_relationships();e.length&&t.visible_relationships.push(e[0])}}})},function(t,e){angular.module("genius").component("songMissingMetadata",{templateUrl:"song_missing_metadata.html",bindings:{song:"<",possible_missing_info:"<possibleMissingInfo"},controller:function(){var t=this;this.has_missing_info=function(){return _.some(t.possible_missing_info,t.missing_info)},this.missing_info=function(e){return _.isEmpty(t.song[e])&&_.includes(t.possible_missing_info,e)}}})},function(t,e){angular.module("genius").component("songPage",{templateUrl:"song_page.html",controller:Object.assign(["$document","$window","$scope","$location","$q","Tracking","Session","ReferentElementMap","ReferentRegistry","querystring","performance_mark","Bowser","mobile_device","$element",function(t,e,n,r,i,o,a,s,c,l,u,d,p,f){var h,m=this,g=function(t,e){switch(t.routeData.data.type){case"song":return e.song({slug:(n=t.params)[1],query:l.parse(n[2]||"")});case"referent":return e.referent(function(t){return{referent_id:parseInt(t[1])}}(t.params));default:throw Error("Unknown song page instruction type: ".concat(t.routeData.data.type))}var n};this.$onInit=function(){m.lyrics_compiled=i.defer(),m.is_ios=d.ios,m.show_report_abuse=a.has_feature("report_abuse"),p&&e.addEventListener("scroll",_.throttle((function(){if(h||(h=f[0].querySelector(".song_story_header_cta")),h){var t=h.getBoundingClientRect();n.$apply((function(){return m.show_song_story_sticky_placement=t.top+t.height<0}))}}),100))},this.$routerCanReuse=function(t){return g(t,{song:function(t){return t.slug===y()},referent:function(t){return Boolean(c.peek(t.referent_id))}})},this.$routerOnActivate=function(t){m.page_data=t.routeData.page_data,Object.assign(n,m.page_data),g(t,{song:function(t){var n=parseInt(t.query.referent_id||_.get(r.hash().match(/^note-(\d+)$/),1));_.isFinite(n)?(o.set_annotation_opened_from_permalink(n),m.scroll_to_referent(n).then((function(){return r.url("/".concat(n))}))):e.scrollTo(0,0)},referent:function(t){m.scroll_to_referent(t.referent_id).then((function(){return m.display_referent(t.referent_id)}))}}),u.create_once("first_router_on_activate")},this.$routerOnReuse=function(t){g(t,{song:_.noop,referent:function(t){m.display_referent(t.referent_id)}})},this.$routerOnDeactivate=function(){o.reset_counters(),c.clear()},this.scroll_to_referent=function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return m.lyrics_compiled.promise.then((function(){return i((function(i){var o=s.get(n),a=o.offset().top+o.height()/2-$(e).height()/2;t.find("html, body").animate({scrollTop:a},r).promise().then(i)}))}))},this.display_referent=function(t){o.track("Open Annotation",{annotation_id:t}),c.preload_around(t,10),n.highlighted_fragment_id=t;var r=c.get(t);i((function(n){var i=v(r);i.bottom<0||i.top>$(e).height()?m.scroll_to_referent(t,150).then((function(){return n(v(r))})):n(i)})).then((function(t){m.lyrics_positioning_target=t,n.current_referent=r}))},this.display_description_annotation=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.tracking_name;e&&o.track(e),m.clear_current_referent(),n.current_referent=m.page_data.song.description_annotation},this.clear_current_referent=function(){n.highlighted_fragment_id=null,n.current_referent=null,r.url(m.page_data.song.path)},this.on_lyrics_compiled=function(){m.lyrics_compiled.resolve()},this.update_lyrics_selection_range=function(t){t?(m.clear_current_referent(),m.lyrics_selection_range=t,m.lyrics_positioning_target=t.getBoundingClientRect()):(m.lyrics_selection_range=null,n.current_referent?b():m.lyrics_positioning_target=null)};var v=function(t){if(t)return t.precomputed_client_rect||s.get(t.id).get(0).getBoundingClientRect()},b=function(){_.get(n.current_referent,"is_description")||(m.lyrics_positioning_target=v(n.current_referent))},y=function(){var t=_.get(m,"page_data.song.url");if(t)return _.last(t.split("/"))};this.youtube_media=function(){return _.find(n.song.media,{provider:"youtube"})},this.track_youtube_play=function(){o.track("Song Page Youtube Embed Played")},n.$on("layout_changed",_.throttle(b,300))}],{$canActivate:["$nextInstruction","$prevInstruction","PageTransition","performance_mark",function(t,e,n,r){return r.create_once("first_router_can_activate"),n.by_router_instruction(t,e)}]})})},function(t,e){angular.module("genius").component("songPageSidebarMultiPlacement",{templateUrl:"song_page_sidebar_multi_placement.html",bindings:{song:"<",show_song_story:"&showSongStory"},controller:function(){var t,e,n,r=this;this.video_did_fill=function(e){var n=_.get(e,"0.relevance");t="high"===n||"medium"===n},this.no_video=function(){return e=!0},this.no_ad=function(){return n=!0},this.is_empty=function(){return!r.song.song_story&&e&&n},this.should_render_video_component=function(){return!r.song.song_story&&(t||n)},this.should_show_ad=function(){return!r.song.song_story&&(!t||_.isUndefined(t))}}})},function(t,e){angular.module("genius").component("songPreview",{templateUrl:"song_preview.html",bindings:{song:"<"}})},function(t,e){angular.module("genius").component("songStoryCarousel",{bindings:{stories:"<"},templateUrl:"song_story_carousel.html"})},function(t,e){angular.module("genius").component("songStoryFeaturedStoryPlacement",{bindings:{story:"<",label:"@",variants:"<"},templateUrl:"song_story_featured_story_placement.html"})},function(t,e){angular.module("genius").component("songStoryGalleryPage",{templateUrl:"song_story_gallery_page.html",controller:Object.assign(["Tracking","Session",function(t){var e=this;this.$routerOnActivate=function(n){e.page_data=n.routeData.page_data,t.track("song_stories:gallery_page_view")}}],{$canActivate:["$nextInstruction","$prevInstruction","PageTransition",function(t,e,n){return n.by_router_instruction(t,e)}]})})},function(t,e){angular.module("genius").component("songStoryLeadStoryPlacement",{bindings:{story:"<",show_story:"&showStory"},transclude:!0,templateUrl:"song_story_lead_story_placement.html"})},function(t,e){angular.module("genius").component("songStoryModal",{templateUrl:"song_story_modal.html",bindings:{story:"<story",song:"<",on_close:"&onClose"},controller:["$window","$scope","$sce","Session","AppConfig",function(t,e,n,r,i){var o=this;this.$onChanges=function(t){if(t.story||t.song){var e=o.song?"".concat(o.story.url,"#context=song:").concat(o.song.id):o.story.url;o.src=n.trustAsUrl(e),o.title=o.story.title}},this.$onInit=function(){o.can=function(t,e){return r.has_permission(t,e)},t.addEventListener("message",(function(t){t.origin==="https://".concat(i.canonical_domain)&&e.$apply((function(){o.title=t.data.title,o.title_url=t.data.url}))}))}}]})},function(t,e){angular.module("genius").component("songStoryStickyPlacement",{bindings:{story:"<",show:"<",song_id:"<songId"},templateUrl:"song_story_sticky_placement.html"})},function(t,e){angular.module("genius").component("songTopVerifiedArtist",{bindings:{contributors:"<verifiedContributors",on_clicked_verified_annotator:"&onClickedVerifiedAnnotator",on_clicked_verified_answer:"&onClickedVerifiedAnswer"},templateUrl:"song_top_verified_artist.html",controller:function(){var t=this;this.$onChanges=function(e){if(e.contributors){var n=_.sortBy(t.contributors,(function(t){return t.contributions.length}));t.contributor=_.last(n)}},this.on_clicked=function(e){_.includes(t.contributor.contributions,"annotations")?(t.on_clicked_verified_annotator({user:t.contributor.user}),e.preventDefault()):_.includes(t.contributor.contributions,"answers")&&(t.on_clicked_verified_answer({artist:t.contributor.artist}),e.preventDefault())}}})},function(t,e){angular.module("genius").component("songVerifiedArtists",{bindings:{verified_contributors:"<verifiedContributors"},templateUrl:"song_verified_artists.html",controller:["$scope",function(t){t.$watch("$ctrl.verified_contributors",function(t){1===t.length&&(this.featured=!0),this.commentary_and_lyrics_by=_.filter(t,(function(t){return _.includes(t.contributions,"lyrics")&&(_.includes(t.contributions,"annotations")||_.includes(t.contributions,"answers"))})),this.commentary_by=_.filter(t,(function(t){return!_.includes(t.contributions,"lyrics")&&(_.includes(t.contributions,"annotations")||_.includes(t.contributions,"answers"))})),this.lyrics_by=_.filter(t,(function(t){return _.includes(t.contributions,"lyrics")&&!(_.includes(t.contributions,"annotations")||_.includes(t.contributions,"answers"))})),this.lyrics_only=this.lyrics_by.length&&!(this.commentary_and_lyrics_by.length||this.commentary_by.length)}.bind(this))}]})},function(t,e){angular.module("genius").component("songVerifiedArtistsSection",{bindings:{contributors:"<",featured:"<",label:"@",lyrics_only:"<lyricsOnly"},templateUrl:"song_verified_artists_section.html"})},function(t,e){angular.module("genius").component("songVerifiedArtistsSectionSingle",{bindings:{contributor:"<",featured:"<",label:"@",variants:"<"},templateUrl:"song_verified_artists_section_single.html",controller:function(){var t=this;this.$onChanges=function(e){e.contributor&&(t.url=t.contributor.artist.url,t.image_url=t.contributor.artist.image_url,t.is_meme_verified=t.contributor.artist.is_meme_verified,t.name=t.contributor.artist.name)}}})},function(t,e){angular.module("genius").component("spamStatus",{templateUrl:"spam_status.html",bindings:{user:"<"},controller:["UserClient",function(t){var e=this;this.$onChanges=function(n){n.user&&t.spam_status(e.user.id).then((function(t){e.user_spam_evaluation=t.user_spam_evaluation}))}}]})},function(t,e){angular.module("genius").component("squareItemAndIq",{bindings:{event_type:"@eventType",iq_params:"<iqParams",show_pill_initial:"<showPill",variants:"<"},templateUrl:"square_item_and_iq.html",transclude:!0,controller:["Iq","Session",function(t,e){var n=this;this.show_pill=function(){return!!e.user_signed_in&&(!!_.isUndefined(n.show_pill_initial)||n.show_pill_initial)},this.iq=function(){return n.iq_params?_.sum(_.map(_.filter(n.iq_params,"applicable"),(function(t){return t.multiplier*t.base}))):t.for(n.event_type)}}]})},function(t,e){angular.module("genius").component("standaloneInbox",{templateUrl:"standalone_inbox.html",transclude:!0,bindings:{embed:"<"},controller:["$window",function(t){var e=this;this.$onChanges=function(n){if(n.embed)if(e.embed){var r=t.frameElement.parentElement;r.style.height="".concat(t.parent.innerHeight,"px"),e.max_height=r.offsetHeight,r.style.height="auto"}else e.max_height=0}}]})},function(t,e){angular.module("genius").component("standaloneSearch",{templateUrl:"standalone_search.html",transclude:!0,controller:["$window","SearchClient","AppConfig",function(t,e,n){var r=this;this.$onInit=function(){var i=t.frameElement.parentElement;i.style.height="".concat(t.parent.innerHeight,"px"),r.max_height=i.offsetHeight,i.style.height="auto";t.addEventListener("message",(function(t){t.origin==="https://".concat(n.canonical_domain)&&"standalone-search-query"===_.get(t.data,"type")&&(r.search_text=t.data.query,e.multi(r.search_text).then((function(t){r.sections=t})))}))}}]})},function(t,e){angular.module("genius").component("statisticsPanel",{bindings:{user:"<",on_select:"&onSelect"},templateUrl:"statistics_panel.html"})},function(t,e){angular.module("genius").component("statisticsPanelItem",{bindings:{label:"@",value:"<",icon:"@"},templateUrl:"statistics_panel_item.html"})},function(t,e){angular.module("genius").component("twitterShareButton",{templateUrl:"twitter_share_button.html",bindings:{url:"<",message:"<",variants:"<"},controller:["Twitter","Tracking",function(t,e){var n=this;this.share_on_twitter=function(){e.track("Bagon Twitter Share"),t.share({url:n.url,message:n.message})}}]})},function(t,e){angular.module("genius").component("userAttribution",{bindings:{object:"<",rank:"<"},templateUrl:"user_attribution.html"})},function(t,e){angular.module("genius").component("userIdentities",{templateUrl:"user_identities.html",bindings:{user:"<",editable:"<"},controller:["IdentityClient","Session",function(t,e){this.can=function(t){return e.has_permission(t,this.user)},this.can_edit=function(){return this.editable&&this.can("manage_identities")},this.saving_identity={},this.unlink_identity=function(e){this.saving_identity[e.provider]||(this.saving_identity[e.provider]=!0,delete this.errors,t.destroy(e.id).then(function(t){_.assign(this.user,t.user),delete this.errors}.bind(this)).catch(function(t){this.errors=t.errors}.bind(this)).finally(function(){delete this.saving_identity[e.provider]}.bind(this)))},this.identity_auth_path=function(t){return"/auth/"+t}}]})},function(t,e){angular.module("genius").component("userInfoWithActions",{bindings:{user:"<object",variants:"<"},templateUrl:"user_info_with_actions.html",controller:["$scope","Session","UserClient","Attempt",function(t,e,n,r){var i=this;this.attempt_close=r.close_form,this.user_signed_in=e.user_signed_in,this.current_user=e.current_user,t.$watch("$ctrl.user",function(t){if(!t.current_user_metadata){var e=this.user;n.load(e.id).then((function(t){_.assign(e,t)}))}}.bind(this)),this.close_conversation_modal=function(){return i.sending_message=!1}}]})},function(t,e){angular.module("genius").component("userModeration",{templateUrl:"user_moderation.html",bindings:{user:"<"},controller:["Session","UserClient","Attempt","AppConfig",function(t,e,n,r){var i=this;this.can=function(e){return t.has_permission(e,i.user)},this.clear=function(){i.errors=null,i.messages=null},this.toggle_penalty_status=function(){i.updating||(i.clear(),i.updating=!0,(i.user.penalty_box_until?e.unpenalty_box(i.user.id):e.penalty_box(i.user.id)).then((function(t){_.assign(i.user,t.user)})).catch((function(t){i.errors=t.errors})).finally((function(){i.updating=!1})))},this.update_spam_state=function(t){i.updating||n.admin_action((function(){i.clear(),i.updating=!0,e.update_spam_state(i.user.id,{state:t}).then((function(t){_.assign(i.user,t.user),i.messages=["Done! (But it'll take a few minutes to finish)"]})).catch((function(t){i.errors=t.errors})).finally((function(){i.updating=!1}))}),I18n.t("mark_".concat(t,".confirm")))},this.mass_delete_unreviewed_activity=function(){i.updating||n.admin_action((function(){i.clear(),i.updating=!0,e.mass_delete_unreviewed_activity(i.user.id).then((function(t){_.assign(i.user,t.user),i.messages=["Done! (But it'll take a few minutes to finish)"]})).catch((function(t){i.errors=t.errors})).finally((function(){i.updating=!1}))}),I18n.t("mass_delete_unreviewed_activity.confirm"))},this.vote_types=r.user_vote_types_for_delete,this.mass_delete_votes=function(t){i.updating||n.admin_action((function(){i.clear(),i.updating=!0,e.delete_votes(i.user.id,t).then((function(t){_.assign(i.user,t.user),i.messages=["Done! (But it'll take a few minutes to finish)"]})).catch((function(t){i.errors=t.errors})).finally((function(){i.updating=!1}))}),I18n.t("mass_delete_votes.".concat(t,".confirm")))}}]})},function(t,e){angular.module("genius").component("verticalAlbumCard",{bindings:{album:"<object"},templateUrl:"vertical_album_card.html"})},function(t,e){angular.module("genius").component("verticalSearchResultItem",{bindings:{hit:"<"},templateUrl:"vertical_search_result_item.html"})},function(t,e){angular.module("genius").component("verticalSearchResultItems",{bindings:{results:"<",limit_to:"<limitTo"},templateUrl:"vertical_search_result_items.html"})},function(t,e){angular.module("genius").component("videoCarousel",{bindings:{object:"<",placement:"@",variants:"<",title:"@",active_video:"<activeVideo",on_load:"&onLoad",video_list:"<videoList"},templateUrl:"video_carousel.html",controller:["VideoPlacement","$templateCache",function(t,e){var n=this;this.$onChanges=function(r){r.object&&(n.video_placement=new t(n.object,n.placement,(function(t){n.loaded=!0,n.on_load({videos:t})}))),n.logo_name=function(){return n.video_list?"".concat(n.video_list.slug,".svg"):null},n.has_logo=function(){return!!e.get(n.logo_name())},n.logo_variants=function(){var t;switch(n.logo_name()){case"news.svg":case"irl.svg":t=["medium"];break;case"bts.svg":case"for-the-record.svg":t=["large"];break;default:t=["small"]}return _.map(t,(function(t){return"video_carousel-video-card-logo--".concat(t)})).join(" ")}}}]})},function(t,e){angular.module("genius").component("videoEditForm",{templateUrl:"video_edit_form.html",bindings:{video:"<object"},controller:["Session","VideoSourcesClient",function(t,e){var n=this;this.$onChanges=function(t){t.video&&(n.loaded=!1,e.index(n.video.id).then((function(t){n.video_sources=t,n.loaded=!0})))},this.add_video_source=function(){n.error=null,e.create(n.video.id,n.new_source).then((function(t){n.video_sources.push(t),n.new_source={}})).catch((function(t){n.error=t}))},this.remove_video_source=function(t){n.error=null,e.destroy(t.id).then((function(){_.remove(n.video_sources,t)})).catch((function(t){n.error=t}))},this.has_permission=t.has_permission}]})},function(t,e){angular.module("genius").component("videoListEditForm",{templateUrl:"video_list_edit_form.html",bindings:{video_list:"<object",on_updated:"&onUpdated"},controller:["VideoListClient",function(t){var e=this;this.save=function(){Reflect.deleteProperty(e,"errors"),t.update(e.editable_video_list.id,{title_image_url:e.editable_video_list.title_image_url,mobile_title_image_url:e.editable_video_list.mobile_title_image_url}).then((function(t){e.video_list=t,e.on_updated({video_list:e.video_list})})).catch((function(t){e.errors=t.response.errors}))},this.$onChanges=function(t){t.video_list&&(e.editable_video_list=_.cloneDeep(e.video_list))}}]})},function(t,e){angular.module("genius").component("videoListPage",{templateUrl:"video_list_page.html",controller:Object.assign(["Tracking","Session","PagedDataFeed","VideoListClient",function(t,e,n,r){var i=this;this.$routerOnActivate=function(e){i.page_data=e.routeData.page_data,t.track("Video List Page Load",{"Video List ID":i.page_data.video_list.id}),i.scrollable_videos_data=new n(_.partial(r.videos,i.page_data.video_list.slug),"videos",{per_page:60},i.page_data.next_page)},this.can_perform=function(t){return e.has_permission(t,i.page_data.video_list)}}],{$canActivate:["$nextInstruction","$prevInstruction","PageTransition",function(t,e,n){return n.by_router_instruction(t,e)}]})})},function(t,e){angular.module("genius").component("videoListVideo",{templateUrl:"video_list_video.html",bindings:{video:"<",video_list:"<videoList",position:"<",variants:"<"},controller:["Session",function(t){var e=this;this.$onChanges=function(t){t.video&&(e.tracking_data={"Page Type":"desktop_video_list_page",Placement:"list",Position:e.position,"Video ID":e.video.id,"Object Type":"video_list","Object ID":e.video_list.id})},this.has_permission=t.has_permission}]})},function(t,e){angular.module("genius").component("videoPage",{templateUrl:"video_page.html",controller:Object.assign(["Tracking","$interval","SmartRouting","Session","$location","VideoRegistry","ArticleClient","Attempt","currentFlashMessages","$window",function(t,e,n,r,i,o,a,s,c,l){var u,d=this;this.navigate_to_next_video=function(){n.navigate_to_absolute_url("".concat(d.next_video.url,"?utm_source=autoplay"))},this.countdown_to_next_video=function(){d.next_video&&(d.seconds_until_next_video=5,u=e((function(){d.seconds_until_next_video-=1,0===d.seconds_until_next_video&&(d.stop_countdown_to_next_video(),d.navigate_to_next_video())}),1e3))},this.stop_countdown_to_next_video=function(){d.seconds_until_next_video=void 0,e.cancel(u)},this.delete_article=function(){s.admin_action((function(){a.delete(d.page_data.article.id).then((function(){c.push({type:"notice",message:"Successfully deleted article"}),l.location.href=d.page_data.video.url}))}),"Are you sure you want to delete this article?")},this.$routerOnActivate=function(e){d.page_data=e.routeData.page_data,o.register_page(d.page_data.video,"desktop_video_page"),d.tracking_data={"Page Type":"desktop_video_page",Placement:"main",Position:1,"Video ID":d.page_data.video.id,"Object Type":"video","Object ID":d.page_data.video.id},t.track("Video Page Load",{"Video ID":d.page_data.video.id,Source:i.search().utm_source})},this.can=function(t){return r.has_permission(t,d.page_data.video)}}],{$canActivate:["$nextInstruction","$prevInstruction","PageTransition",function(t,e,n){return n.by_router_instruction(t,e)}]})})},function(t,e){angular.module("genius").component("videoRelevanceReason",{bindings:{video:"<"},templateUrl:"video_relevance_reason.html"})},function(t,e){angular.module("genius").component("videosModal",{bindings:{initial_video:"<initialVideo",build_tracking_data:"&buildTrackingData",on_close:"&onClose",object:"<"},templateUrl:"videos_modal.html",controller:["VideoRegistry",function(t){var e=this;this.$onInit=function(){e.players={},e.carousel_videos=t.videos_for(e.object),e.initial_video&&(_.remove(e.carousel_videos,e.initial_video),e.carousel_videos.unshift(e.initial_video))},this.$onChanges=function(t){t.initial_video&&e.initial_video&&(e.active_video=e.initial_video)},this.select_video=function(t){if(t&&t!==e.active_video){var n=e.players[e.active_video.id];n&&n.pause(),e.play_pct=0,e.active_video=t,e.video_can_play=!1}},this.next_video=function(){var t=_.findIndex(e.carousel_videos,(function(t){return t.id===e.active_video.id})),n=e.carousel_videos[t+1];n&&e.select_video(n)},this.update_progress=function(t,n){e.play_pct=Math.ceil(n?t/n*100:0)},this.add_video_api=function(t,n){return e.players[t]=n},this.tracking_data=function(t){return _.assign(e.build_tracking_data({video:t}),{"Modal Position":_.indexOf(e.carousel_videos,t)+1})}}]})},function(t,e){angular.module("genius").component("webAnnotatorManager",{bindings:{web_page_id:"@webPageId"},templateUrl:"web_annotator_manager.html",controller:["WebAnnotatorClient",function(t){var e=this;this.$onInit=function(){e.errors=[],t.load_web_page(e.web_page_id).then((function(t){return e.web_page=t}))},this.protect=function(n){t["".concat(n?"protect":"unprotect","_web_page")](e.web_page_id).then((function(t){return e.web_page=t})).catch(e.on_error)},this.publish_drafts=function(){t.publish_web_page_drafts(e.web_page_id).then((function(t){return e.web_page=t})).catch(e.on_error)}}]})},function(t,e){angular.module("genius").component("webAnnotatorManagerErrors",{bindings:{yields_on_error:"&yieldsOnError"},templateUrl:"web_annotator_manager_errors.html",controller:["$timeout",function(t){var e=this;this.$onInit=function(){e.errors=[],e.yields_on_error({on_error:e.on_error})},this.on_error=function(n){e.errors.unshift(n),t((function(){return _.remove(e.errors,n)}),5e3)}}]})},function(t,e){angular.module("genius").component("webAnnotatorRolesTable",{templateUrl:"web_annotator_roles_table.html",bindings:{header:"@",web_location_id:"<webLocationId",web_location_type:"@webLocationType"},controller:["WebAnnotatorClient",function(t){var e=this;this.$onInit=function(){e.errors=[],e.load()},this.load=function(){return t.load_user_roles("".concat(e.web_location_type,"s"),e.web_location_id).then((function(t){return e.user_roles=t}))},this.create=function(n){return t.create_user_role("".concat(e.web_location_type,"s"),e.web_location_id,n).then(e.load)}}]})},function(t,e){angular.module("genius").component("youtubeSubscribeButton",{templateUrl:"youtube_subscribe_button.html",controller:["Google","$element",function(t,e){this.$postLink=function(){t.setup().then((function(){t.refresh_youtube_subscribe_in(e[0])}))}}]})},function(t,e){angular.module("genius").constant("AdConfig",window.AD_CONFIG)},function(t,e){angular.module("genius").constant("AnalyticsConfig",window.ANALYTICS_CONFIG)},function(t,e){angular.module("genius").constant("diff_match_patch",window.diff_match_patch)},function(t,e){angular.module("genius").constant("mobile_device",window.MOBILE_DEVICE)},function(t,e){angular.module("genius").controller("ArticleFormCtrl",["Filepicker","$element","$immediate",function(t,e,n){var r,i=this;this.$onInit=function(){i.snippets={Lyrics:{before:"<g-lyrics>",after:"</g-lyrics>"},"Outlined Title":{before:"<g-outlined-title>",after:"</g-outlined-title>"},Pullquote:{before:"<g-pullquote>\n  ",after:"\n  <cite>Attribution</cite>\n</g-pullquote>\n"},"Image With Caption":{before:'<g-image src="https://example.com/image.png">',after:"</g-image>",default_body:"\n  Caption\n"},"Fullbleed Image With Caption":{before:'<g-fullbleed-image src="https://example.com/image.png">',after:"</g-fullbleed-image>",default_body:"\n  Caption\n"},List:{before:"<g-list>\n  <g-list-item>\n    <g-list-item-title>",after:'</g-list-item-title>\n    <g-list-item-media src=""></g-list-item-media>\n    <g-list-item-body></g-list-item-body>\n  </g-list-item>\n</g-list>'},Knotch:{before:"<g-knotch>",after:"</g-knotch>",default_body:"knotch_class_here"}},i.formatting={"Header (Primary)":{before:"# "},"Header (Secondary)":{before:"## "},"Header (Tertiary)":{before:"### "},Link:{before:"[",after:"](url)"},Italic:{before:"*",after:"*"},Bold:{before:"**",after:"**"},Strikethrough:{before:"~~",after:"~~"},Superscript:{before:"<sup>",after:"</sup>"},Subscript:{before:"<sub>",after:"</sub>"},Small:{before:"<small>",after:"</small>"},Center:{before:"<center>",after:"</center>"},"Bulleted List":{before:"- ",each_line:!0},"Numbered List":{before:"1. ",each_line:!0},Blockquote:{before:"> "},"En Dash":{before:"--"},"Em Dash":{before:"---"},"Horizontal Line":{before:"***"}},r=new t({services:"COMPUTER"})},this.pick_image=function(){return r.pick_and_store().then((function(t){i.insert_at_body_markdown_cursor({before:'<g-image src="'.concat(t,'">'),after:"</g-image>",default_body:"Caption"})}))},this.preview=function(){i.previewing=!0,n((function(){var t=e.find("form.edit_article");t.find('input[name="_method"]').attr("value","post"),t.submit()}))}}])},function(t,e){angular.module("genius").controller("CustomAppNotificationCtrl",["$scope","CustomAppNotificationClient",function(t,e){t.send_preview_notification=function(){e.send_preview_notification(t.notification).then((function(){alert("sent a preview notification to your devices, take a look")}))}}])},function(t,e){angular.module("genius").controller("DevCtrl",["$window","$scope","$http","AppConfig",function(t,e,n,r){e.search={query:""},e.saving=!1,e.build_scenario=function(){if(!e.saving){e.saving=!0;var i=e.current_scenario.traits.filter((function(t){return t.enabled})).map((function(t){return t.name}));n.post(r.api_root_url+"/scenarios?id="+e.current_scenario.id,{scenario:{traits:i}}).then((function(n){t.location.href=n.data.url,e.saving=!1}))}},e.configure_scenario=function(t){e.current_scenario=t},e.clear_scenario=function(){e.current_scenario=void 0};var i=_.once((function(){n.get(r.api_root_url+"/scenarios").then((function(t){e.results=t.data.scenarios}))}));e.open_search=function(){i(),e.open=!0},e.close_search=function(){e.open=!1}}])},function(t,e){angular.module("genius").controller("FactTrackAnnotationEditCtrl",["$scope",function(t){t.set_timestamp_to_now=function(){t.annotation.timestamp_in_ms=t.ctrl.time},t.annotation_duration=function(){var e=t.annotations.indexOf(t.annotation),n=t.annotations[e+1];return(n?n.timestamp_in_ms:t.duration)-t.annotation.timestamp_in_ms}}])},function(t,e){angular.module("genius").controller("FactTrackSongEditCtrl",["$scope","$debounce","SpotifyAnnotationClient","orderByFilter","ScrollPoint",function(t,e,n,r,i){t.scroll_to=i.scroll_to,t.song_id=$("[data-song-id]").attr("data-song-id"),this.toggle_fullscreen=function(){this.alt_mode=!1,this.fullscreen=!this.fullscreen},this.toggle_alt_mode=function(){this.alt_mode=!this.alt_mode},t.remove_annotation=function(e){var n=t.annotations.indexOf(e);t.annotations.splice(n,1)},t.add_annotation=function(){t.annotations.push({content_type:"iq",timestamp_in_ms:this.time})}.bind(this),n.load_song(t.song_id).then((function(e){if(t.spotify_song=e.spotify_song,t.annotations=e.spotify_annotations,t.spotify_song.track_url&&(t.is_ready=!0),!_.some(t.annotations,{content_type:"credits"})){var n=_.get(t.spotify_song,["metadata","duration_ms"],18e4);t.annotations.push({content_type:"credits",content:"Check out the full lyrics and annotations on Genius for contributors, sources, and even more knowledge.",timestamp_in_ms:n-3e3})}s()}));var o=!1,a=function e(){t.saving_disabled?o=!0:(t.saving_disabled=!0,n.save_song(t.song_id,t.spotify_song,t.annotations).then((function(e){t.spotify_song.lock_version=e.spotify_song.lock_version,t.save_error=void 0})).catch((function(e){var n=e.data;t.save_error=n.message||"Failed to save",t.conflicted="conflict"===n.error,$.facebox("<div><img src='https://images.genius.com/5f38d92d0b29722104abd09aa01b1585.200x200x4.gif'></div><br><h1>Something went wrong!</h1><h2>Consider copy/pasting your work somewhere else before reloading the page</h2>")})).finally((function(){t.saving_disabled=!1,o&&(o=!1,e())})))},s=function(){t.$watch("annotations",(function(){t.annotations=r(t.annotations,["timestamp_in_ms","id"])}),!0);var n=e(a,1e3);t.$watchGroup(["annotations","spotify_song.note","spotify_song.finalized"],(function(){n()}),!0)}}])},function(t,e){angular.module("genius").controller("HeaderCtrl",["$scope","GlobalRefs","Tracking","LibratoBeacon",function(t,e,n,r){this.$onInit=function(){this.cloudflare_error=Boolean(e.get_element("cloudflare_unavailable_alert").length),this.cloudflare_error&&(n.track("cloudflare_error.always_online_banner",{source:"bagon"}),r.count("cloudflare_error.always_online_banner",{source:"bagon"}))},t.toggle_mobile_subnav_menu=function(){t.mobile_subnav_menu_open=!t.mobile_subnav_menu_open},t.close_mobile_subnav_menu=function(){t.mobile_subnav_menu_open=!1}}])},function(t,e){angular.module("genius").controller("SongCtrl",["$scope","$window","$q","$location","$immediate","ReferentRegistry","ReferentElementMap","ReferentClient","SongClient","Tracking","Session","currentFlashMessages","Reversible","Attempt","Pusher","I18n","ScrollPoint","only_changes","VideoRegistry","mobile_device","LibratoBeacon","WebVitals","ReactSongPageService","AppConfig",function(t,e,n,r,i,o,a,s,c,l,u,d,p,f,h,m,g,v,b,y,w,x,k,C){var S=this;t.$ctrl&&(t.$ctrl.song_ctrl=this),this.$onInit=function(){var t="bagon.song.".concat(y?"mobile":"desktop"),n=Math.floor(100*Math.random())<C.ga_web_vitals_sampling_percentage,r=function(r){w.measure(r.name,r.value,{source:t}),n&&e.ga("send","event",{eventCategory:"Web Vitals",eventAction:r.name,eventLabel:r.id,eventValue:Math.round("CLS"===r.name?1e3*r.delta:r.delta),nonInteraction:!0,transport:"beacon"})};x.getCLS(r),x.getFID(r),x.getLCP(r),x.getFCP(r),x.getTTFB(r)},t.attempt_close=f.close_form,t.transcriber_guide_url=C.transcriber_guide_url,t.$watch("song.id",(function(e){e&&(b.register_page(t.song,y?"mobile_song_page":"desktop_song_page"),l.delayed_track("Song Page Load",{}))}));var A=r.search().from_question_email;A&&l.track("Question email question clicked",{question_id:A});t.user_signed_in=u.user_signed_in,a.clear();var E=function(e){return _.find(t.annotation_previews,{referent_id:e})};this.update_focused_referent_anchor=function(e){S.focused_fragement_element_id=$(e).data("fragment_element_id"),t.annotation_preview=function(t){var e=Number($(t).data("id"));return E(e)}(e),t.$digest()},this.is_active_element=function(t){return S.focused_fragement_element_id===t},this.dismiss_annotation_preview=function(){t.annotation_preview_dismissed=!0,l.track("Dismiss Annotation Teaser")},this.reactivate_annotation_preview=function(){t.annotation_preview_dismissed=!1,l.track("Reactivate Annotation Teaser")},this.referent_has_preview=function(t){return!!E(t)},this.highlight_preview_referent=function(e){return S.is_active_element(e)&&!t.annotation_preview_dismissed},this.show_preview_referent_indicator=function(e){return S.is_active_element(e)&&t.annotation_preview_dismissed},o.register(t.song.description_annotation),t.preloaded_referents&&_.each(t.preloaded_referents,(function(t){o.register(_.assign({fragments:[]},t))})),i((function(){c.count_view(t.song.id),o.preload_from_start(5)}),!1),t.sidebar={signing_up:!1},t.initial_sidebar_content_showing=function(){return!(t.current_referent||t.$ctrl.lyrics_selection_range||t.sidebar.signing_up||t.$ctrl.creating_referent)},t.delete_song=function(){c.delete(t.song.id).then((function(){d.push({type:"notice",message:"Successfully deleted Song"}),e.location.href="/"}))},t.next_track=function(){var e=!1;return _.find(t.primary_album_tracks,(function(n){if(e)return!0;e=n.song.id===t.song.id}))},t.open_first_verified_annotation=function(t){l.track("Tap Verified Callout");var e=o.first((function(e){return"verified"===e.classification&&_.includes(e.verified_annotator_ids,t.id)}));S.open_referent_by_id(e.id)},t.open_next_referent=function(t){l.track("Tap Next Verified"),S.open_referent_by_id(t)},t.$watch("next_up_clicked",(function(t){t&&l.track("Next Song Tap")})),this.update_url_for_open_referent=function(t){r.url()!=="/".concat(t)&&r.url("/".concat(t))};t.can_perform=function(e){return u.has_permission(e,t.song)};var j={hide:function(){S.hiding_prompt_visible=!0},destroy:function(){t.delete_song()},view_annotation_engagement_data:function(){t.toggle_engagement_data()},edit_spotify_annotations_for:function(){e.open("/songs/".concat(t.song.id,"/edit-fact-track"))},view_lyrics_synchronization:function(){e.open("/songs/".concat(t.song.id,"/lyrics_sync"))}},O={view_annotation_engagement_data:!0,edit_spotify_annotations_for:!0,view_lyrics_synchronization:!0};t.attempt_admin_action=function(e,n){if(O[e])return t.perform_admin_action(e,n);f.admin_action(_.partial(t.perform_admin_action,e,n),m.lookup("song.action_confirmations.".concat(e))||m.t("song.action_confirmations.admin_default"))},t.perform_admin_action=function(e,n){if(j[e])return j[e]();!function(e,n){c.perform_action(t.song.id,e,n).then((function(e){t.song=e})).catch((function(t){var e=t.message;d.push({type:"error",message:e})}))}(e,n)},t.$on("editorial_action_count_changed",(function(t,e){if(e.commentable.referent_id){var n=o.get(e.commentable.referent_id);if(n){var r=_.chain(n.annotations).filter((function(t){return!t.verified})).sumBy((function(t){return t.comment_count+t.proposed_edit_count}));n.pending_editorial_actions_count=r}}})),t.$on("annotation_deleted",(function(e,n,r){t.$ctrl.lyrics_compiled.promise.then((function(){var e=o.get(n.referent_id);t.$ctrl.lyrics_interface.block_edit(!0),e._deleted=_(e.annotations).every((function(t){return t._deleted||t.new})),r.then((function(){e._deleted?t.$ctrl.lyrics_interface.remove_referent(n.referent_id):(Reflect.deleteProperty(e,"_deleted"),s.refresh(e))})).catch((function(){Reflect.deleteProperty(e,"_deleted")})).finally((function(){t.$ctrl.lyrics_interface.block_edit(!1)}))}))})),t.$watch("current_referent._deleted",(function(e){e&&t.$ctrl.clear_current_referent()}));var T=_.once((function(){c.load_annotation_open_data(t.song.id).then((function(e){t.open_data=e}))}));t.toggle_engagement_data=function(){t.showing_annotation_engagement_data=!t.showing_annotation_engagement_data,T()},t.set_current_hover_and_digest=function(e){t.hover_referent_id=e,t.$digest()},t.$on("referent_created",(function(e,n){o.register(n),_.assign(t.song,n.annotatable.client_timestamps),S.update_url_for_open_referent(n.id)})),this.save=function(e){S.saving=!0;var r=v(e,t.song,{except:["valid_song_art_contrast"]}),i=p.modify(t.song,e);return c.update(t.song.id,r).then((function(e){return angular.extend(t.song,e)})).catch((function(t){return i(),n.reject(t)})).finally((function(){S.saving=!1}))},this.show_metadata_form=function(t,e){S.show_metadata_form_sections=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}({},t,!0),l.track("Song Page Open Edit Form",{section:t,keyboard_shortcut:!!e})},this.has_track_info=function(){for(var e=t.song,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return _(r).filter((function(t){return _.isNumber(e[t])||_.some(e[t])})).some()},this.has_song_relationships=function(){return _(t.song.song_relationships).map((function(t){return t.songs})).flatten().some()},this.close=function(){S.show_metadata_form_sections=!1},this.open_referent_by_id=function(t){r.path("/".concat(t))},this.featured_annotation_in_view=_.once((function(t){t&&l.track("Featured Annotation In View")})),this.reload_song=function(){return S.edit_blocked=!0,c.load_song(t.song.id).then((function(e){S.edit_blocked=!1,_.assign(t.song,_.omit(e,"description","description_annotation"))}))},this.is_apple_music_player_enabled=function(){return u.has_permission("view_apple_music_player",t.song)},this.should_load_apple_music_player=function(){return S.is_apple_music_player_enabled()&&t.song.is_music&&(t.song.apple_music_id||y)},this.react_song_page_link=k.reactSongPageRedirect,u.user_signed_in&&h.subscribe(t.song.pusher_channel,"song-updated",(function(e){t.song.updated_by_human_at<e.updated_by_human_at&&S.reload_song(),t.song.lyrics_updated_at<e.lyrics_updated_at&&t.$ctrl.lyrics_interface.refresh_lyrics()})),t.open_first_verified_answer=function(e){var n=_.find(t.pinned_questions,(function(t){return _.get(t,"answer.answer_source.artist.id")===e.id}));n?g.scroll_to("question_".concat(n.id)):g.scroll_to("questions")},i((function(){$(".song_media_controls").offset()&&(S.media_player_sticky_offset=-($(".song_body").offset().top-$(".song_media_controls").offset().top))}))}])},function(t,e){angular.module("genius").directive("addAnnotation",[function(){return{restrict:"E",templateUrl:"add_annotation.html",scope:{start_new_community_referent:"&startNewCommunityReferent",start_new_referent:"&startNewReferent",creating_referent:"<creatingReferent",can_add_community_annotation:"<canAddCommunityAnnotation",can_add_pinned_annotation:"<canAddPinnedAnnotation",annotation:"<",song:"<",enable_waiting_class:"<enableWaitingClass"},controllerAs:"ctrl",controller:["Session",function(t){this.user_signed_in=t.user_signed_in}]}}])},function(t,e){angular.module("genius").directive("alwaysDirty",(function(){return{restrict:"A",controller:["BeforeUnloadCheck",function(t){var e=function(){return!0};this.$onInit=function(){return t.add(e)},this.$onDestroy=function(){return t.remove(e)}}]}}))},function(t,e){angular.module("genius").directive("ampIframeResizable",["Bindings","$window","AppConfig",function(t,e,n){var r=t.resolver({on_amp_iframe_resize:"&onAmpIframeResize"});return{restrict:"A",link:function(t,i,o){var a=r(t,o);e.addEventListener("message",(function(e){e.origin==="https://".concat(n.canonical_domain)&&e.source===i[0].contentWindow&&"amp"===e.data.sentinel&&"embed-size"===e.data.type&&(t.$applyAsync((function(){return a.on_amp_iframe_resize({width:e.data.width,height:e.data.height})})),e.data.height?i.css("height","".concat(e.data.height,"px")):i.css("height",""),e.data.width?i.css("width","".concat(e.data.width,"px")):i.css("width",""))}))}}}])},function(t,e){angular.module("genius").directive("annotatableImage",["$document",function(t){return{templateUrl:"annotatable_image.html",restrict:"E",scope:{src:"@",song:"<",on_image_referent_creation_started:"&onImageReferentCreationStarted",on_image_referent_created:"&onImageReferentCreated",on_image_referent_creation_failed:"&onImageReferentCreationFailed",can_perform:"<canPerform",lyrics_anchorer:"<lyricsAnchorer"},controller:["$scope",function(e){var n=this;this.create_image_referent=function(r){var i=n.getImage(),o=t[0].createRange();o.selectNodeContents(i),o.precomputed_client_rect=o.getBoundingClientRect(),e.creating_image_referent=!0,e.on_image_referent_creation_started({selection_range:o}),e.image_referent_creation_failed=!1,e.lyrics_anchorer.create_image_referent(i,o,r).then((function(t){e.creating_image_referent=!1,e.on_image_referent_created({referent:t,selection_range:o}),e.image_referent_created=!0}),(function(t){e.creating_image_referent=!1,e.on_image_referent_creation_failed({error:t}),e.image_referent_creation_failed=!0}))},this.set_current_hover_and_digest=function(t){e.hovering_over_image=t,e.$digest()}}],controllerAs:"ctrl",link:{pre:function(t,e,n,r){r.getImage=function(){return e.find("img")[0]}}}}}])},function(t,e){angular.module("genius").directive("annotation",["Session","Reversible","AnnotationClient","ReferentRegistry","ReferentClient","$immediate","$q","Bowser","I18n","AppConfig",function(t,e,n,r,i,o,a,s,c,l){return{restrict:"E",templateUrl:"annotation.html",scope:{annotation:"=object",referent:"<referent",variants:"<",annotatable_title:"<annotatableTitle",on_seek_to_next_card:"&onSeekToNextCard",yields_api:"&yieldsApi",on_pending_event:"&onPendingEvent",yields_iq:"&yieldsIq",on_dirty:"&onDirty",on_clean:"&onClean",focused_comments:"<focusedComments"},controllerAs:"ctrl",controller:["$scope","$filter",function(o,a){var u=this;this.hiding_comments=o.variants&&o.variants.hideComments,this.user_signed_in=t.user_signed_in,this.show_report_abuse=t.has_feature("report_abuse"),this.is_android=s.android,this.truncation_length=600,this.content_is_truncated=_.get(o,"variants.truncate_content")&&o.annotation.body.html.length>this.truncation_length,this.unreviewed_annotation_tooltip_info_url=l.unreviewed_annotation_tooltip_info_url,this.integrate_comment=function(t){o.start_editing({integration_body:t.body})},this.update_editorial_action_count=function(){o.annotation.proposed_edit_count=u.edits_to_show_count(),o.$emit("editorial_action_count_changed",{commentable:o.annotation})},o.$watch("annotation.comment_count",this.update_editorial_action_count),this.comment_removed=function(){return e.modify(o.annotation,{comment_count:o.annotation.comment_count-1})},this.edits_to_show_count=function(){return o.annotation.edits?o.annotation.edits.filter((function(t){return!t._deleted&&!t._merged})).length:o.annotation.proposed_edit_count},o.next_referent=function(t){var e={after_referent_id:o.annotation.referent_id};r.first((function(e){return"verified"===e.classification&&_.includes(e.verified_annotator_ids,t.id)}),e)},this.seek_to_next_card=function(t){o.on_seek_to_next_card({referent_id:o.next_referent(t).id})},this.has_more_by_user=function(t){return!!o.next_referent(t)},o.finish_editing=function(){if(!o.disable_saving_with){var t;o.disable_saving_with="Saving",t=_.get(o,"annotation._editing.proposed_edit")?n.propose_edit(o.annotation).then((function(t){o.annotation.edits=o.annotation.edits||[],o.annotation.edits.unshift(t),u.showing_edits=!0})):n.save(o.annotation,{referent:o.referent}).then((function(){i.refresh(o.referent)}));var r=e.modify(o.annotation,{"_editing._form_visible":!o.annotation.referent_id});t.then(o.dismiss_editing).catch(r).finally((function(){o.disable_saving_with=null}))}},o.cancel_editing=function(){if(o.dismiss_editing(),Reflect.deleteProperty(o.referent,"temporary_classification"),o.annotation.new&&_.remove(o.referent.annotations,o.annotation),!o.referent.annotations.length){var t=n.safe_delete(o.annotation);o.$emit("annotation_deleted",o.annotation,t)}},o.dismiss_editing=function(){Reflect.deleteProperty(o.annotation,"_editing"),o.$emit("layout_changed")},this.initialize_annotation_custom_preview=function(){o.annotation._editing._creating_custom_preview=!0},this.clear_annotation_custom_preview=function(){o.annotation._editing.custom_preview=null,o.annotation._editing._creating_custom_preview=!1},this.show_annotation_custom_preview_form=function(){return o.annotation._editing.custom_preview||o.annotation._editing._creating_custom_preview},this.report_as_abusive=function(){return u.reported_abuse=!0,n.report_as_abusive(o.annotation.id).catch((function(){u.reported_abuse=!1}))},this.should_show_comments=function(){return!o.rejecting&&!u.hiding_comments&&!o.annotation.new&&!o.annotation._editing&&(o.annotation.body.html||o.annotation.needs_exegesis)},this.annotation_is_unwritten=function(){return o.annotation.new||o.annotation.needs_exegesis||!_.get(o,"annotation.body.html")},this.show_annotation_label=function(){if(!t.user_signed_in&&"needs_exegesis"===_.get(o,"referent.classification"))return!1;var e=_.get(o,"annotation._editing._form_visible"),n=o.annotation.being_created||e;return o.annotation.community&&!n&&!u.annotation_is_being_created_by_someone_else()},this.show_placeholder_annotation_label=function(){var t=_.get(o,"annotation._editing._form_visible");return o.annotation.being_created&&!t&&!u.annotation_is_being_created_by_someone_else()},this.annotation_is_being_created_by_someone_else=function(){return o.annotation.being_created&&(!t.user_signed_in||t.current_user.id!==o.annotation.created_by.id)},this.annotation_title=function(){var t=o.variants&&o.variants.isDescription&&!o.variants.force_genius_annotation_title,e="pending"===o.annotation.state?"Unreviewed ":"",n="accepted"!==o.annotation.state||t?"":"Genius ",r=c.t(t?"sle.prependable_to_name":"annotation.singular_noun_capitalized",{type_name:a("modelHumanName")(o.referent.annotatable._type)}),i=a("truncateToBoundary")(o.annotatable_title,100);return e+n+r+(t?" ".concat(i,""):"")},this.is_authored_by_current_user=function(){return _(o.annotation.authors).some((function(e){return e.user.id===t.current_user.id}))};var d={reject:function(){o.begin_rejection()},accept:function(){o.accept()}};o.yields_api({api:d}),_.has(o.annotation,"current_user_metadata.iq_by_action")&&o.yields_iq({iq_api:o.annotation.current_user_metadata.iq_by_action})}],link:function(r){r.annotation_directive=r,r.can=function(e){return t.has_permission(e,r.annotation)};var i=function(){r.annotation.cosigned_by.push(t.current_user)},s=function(){_.remove(r.annotation.cosigned_by,(function(e){return e.id===t.current_user.id}))};r.toggle_cosign=function(t){t?i():s(),r.saving_cosign=!0,n.toggle_cosign(r.annotation.id,t).then((function(t){_.assign(r.annotation,t.annotation),_.assign(r.referent,t.referent)})).catch(t?s:i).finally((function(){r.saving_cosign=!1}))},r.showing_contributors=!1,r.clear_votes=function(){r.showing_voters=!1;var t=e.modify(r,{"annotation.votes_total":0,"annotation.current_user_metadata.interactions.vote":void 0});n.clear_votes(r.annotation.id).catch(t)},r.toggle_voters=function(){r.showing_voters=!r.showing_voters},r.$on("images_loaded",(function(){r.loaded=!0,r.$emit("layout_changed")})),r.toggle_contributors=function(){r.showing_contributors=!r.showing_contributors},r.toggle_ellipsis_menu=function(){r.showing_ellipsis_menu=!r.showing_ellipsis_menu},r.start_editing=function(t){t=t||{},r.annotation._editing=_.defaults(r.annotation._editing||{},{_form_visible:!0,_has_source:!!r.annotation.source,source:angular.copy(r.annotation.source||{}),proposed_edit:t.proposed_edit,html:r.annotation.body.html,markdown:r.annotation.body.markdown,_creating_custom_preview:!1,custom_preview:r.annotation.custom_preview}),t.integration_body&&(r.annotation._editing.html=_.compact([r.annotation._editing.html,"PROPOSED SUGGESTION: ".concat(t.integration_body.html)]).join("<br>"),r.annotation._editing.markdown=_.compact([r.annotation._editing.markdown,"PROPOSED SUGGESTION: ".concat(t.integration_body.markdown)]).join("\n\n")),r.annotation.verified&&(r.referent.temporary_classification="verified")},r.accept=function(){var t=n.accept(r.annotation,{referent:r.referent});r.on_pending_event({event:"UserAcceptAnnotation",result:t}),t.then((function(){r.context_updated_at=Date.now()}))},r.focus_comment_textarea=function(){r.$broadcast("focus_comment_textarea",r.annotation)},r.begin_rejection=function(){r.rejecting=!0,o(r.focus_comment_textarea)},r.reject_with_comment=function(t){r.rejecting=!1,r.disable_saving_with="Saving";var e=n.safe_reject(r.annotation,{comment:t,referent:r.referent});return r.on_pending_event({event:"UserRejectAnnotation",result:e}),e.then((function(){r.context_updated_at=Date.now()})).catch((function(){return r.rejecting=!0,a.reject()})).finally((function(){return r.disable_saving_with=null})),r.$emit("annotation_deleted",r.annotation,e),e},r.delete=function(){var t=n.safe_delete(r.annotation);r.$emit("annotation_deleted",r.annotation,t)},r.toggle_pin_status=function(){if(!r.toggling_pin_status){r.toggling_pin_status=!0;var t=r.can("pin_to_profile")?"pin_to_profile":"unpin_from_profile";n[t](r.annotation.id).then((function(t){_.assign(r.annotation,t.annotation)})).finally((function(){r.toggling_pin_status=!1}))}},r.$on("vote_submitted",(function(t,e,n){"down"===n&&"annotation"===e&&r.focus_comment_textarea()})),r.$on("vote_saved",(function(t){r.$broadcast("update_voters")}))}}}])},function(t,e){angular.module("genius").directive("annotationEdit",["Session","AnnotationClient",function(t,e){return{restrict:"E",templateUrl:"annotation_edit.html",scope:{edit:"<object",before_html:"<beforeHtml",on_merge:"&onMerge",on_resolution:"&onResolution"},controllerAs:"ctrl",controller:["$scope",function(n){var r=this;this.can_moderate=t.has_permission("moderate",n.edit),this.merge=function(){r.working=!0,n.edit._merged=!0,e.merge_edit(n.edit.id).then((function(t){_.assign(n.edit,t),n.on_merge({edit:n.edit}),n.on_resolution()})).catch((function(){n.edit._merged=!1})).finally((function(){r.working=!1}))},this.reject=function(){r.working=!0,n.edit._deleted=!0,e.reject_edit(n.edit.id).then(n.on_resolution).catch((function(){n.edit._deleted=!1})).finally((function(){r.working=!1}))}}]}}])},function(t,e){angular.module("genius").directive("annotationEdits",["AnnotationClient","ReferentClient","ReferentRegistry",function(t,e,n){return{scope:{annotation:"<object",context_updated_at:"<contextUpdatedAt",on_resolution:"&onResolution"},restrict:"E",templateUrl:"annotation_edits.html",controllerAs:"ctrl",controller:["$scope",function(r){var i=this;this.on_merge=function(t){_.assign(r.annotation,t.annotation_after),o()};var o=function(){i.loading_edits||(i.loading_edits=!0,t.proposed_edits(r.annotation.id).then((function(t){r.annotation.edits=t})).finally((function(){Reflect.deleteProperty(i,"loading_edits")})))};r.$watch("annotation.edits.length",(function(t,i){if(t||i){var o=n.peek(r.annotation.referent_id);e.refresh(o)}})),r.$watch("context_updated_at",(function(t){t&&o()})),o()}]}}])},function(t,e,n){angular.module("genius").directive("annotationFragment",["ReferentHelper","ReferentRegistry","ReferentElementMap","$compile","$templateCache","$location",function(t,e,n,r,i,o){return{restrict:"A",scope:!0,link:function(a,s,c){a.fragment_id=Number(a.$eval(c.annotationFragment)),a.fragment_element_id=a.$id,a.image=a.$eval(c.image),s.data("fragment_element_id",a.fragment_element_id);var l,u=function(){a.referent.display_mode=t.display_mode_by_classification(a.referent.temporary_classification||a.referent.classification)};(a.$watch("referent.classification",u),a.$watch("referent.temporary_classification",u),a.referent=e.register({id:a.fragment_id,classification:a.classification,stub:!0,fragments:[],is_image:a.image,pending_editorial_actions_count:Number(c.pendingEditorialActionsCount)}),n.has(a.referent.id)||n.set(a.referent.id,s),c.verifiedAnnotatorIds&&(a.referent.verified_annotator_ids=_.map(c.verifiedAnnotatorIds.split(" "),Number)),a.referent.classification=c.classification,a.referent.fragments.push(s[0].innerText||s.text()),a.referent.fragment=_.uniq(a.referent.fragments).join("\n"),a.referent.fragment_from_lyrics=a.referent.fragment,a.open=function(){n.set(a.fragment_id,s),o.url("/".concat(a.fragment_id))},a.$watch("referent.id",(function(t){a.fragment_id=t||a.fragment_id})),a.$watch("referent._deleted",(function(t){if(t&&!l){var e=s.find("img")[0];l=e?$("<annotatable-image>").attr({src:e.src,song:"song","on-image-referent-created":"lyrics_ctrl.on_image_referent_created(selection_range, referent);","on-image-referent-creation-failed":"lyrics_ctrl.on_image_referent_creation_failed(error)","on-image-referent-creation-started":"lyrics_ctrl.on_image_referent_creation_started(selection_range)","can-perform":"can_perform",lyrics_anchorer:"lyrics_ctrl.lyrics_anchorer"}):$("<span>").html(s.html()),s.before(l).detach(),r(l.parent())(a)}else!t&&l&&(l.replaceWith(s),l=void 0)})),a.$watch("referent.display_mode",(function(t,e){s.removeClass("referent--".concat(e)||!1),s.addClass("referent--".concat(t)||!1)})),a.$watchGroup(["highlighted_fragment_id","hover_referent_id"],(function(){s.toggleClass("referent--highlighted",a.highlighted_fragment_id===a.fragment_id||a.hover_referent_id===a.fragment_id)})),a.$watchGroup(["showing_annotation_engagement_data","open_data"],(function(){a.showing_annotation_engagement_data&&a.open_data?s.attr("data-annotation-views",a.open_data[a.fragment_id]?a.open_data[a.fragment_id]:"N/A"):s.removeAttr("data-annotation-views")})),a.can_perform("see_editorial_indicators"))&&r(i.get("referent_editorial_indicator.html"))(a).insertBefore(s)}}}])},function(t,e){angular.module("genius").directive("annotationHistory",[function(){return{restrict:"E",templateUrl:"annotation_history.html",scope:{annotation:"<",onRevert:"&"},controllerAs:"ctrl",controller:["$scope","AnnotationClient","Session",function(t,e,n){this.can_revert=n.has_permission("edit",t.annotation),e.load_versions(t.annotation.id).then((function(e){t.versions=e})),this.revert_to=function(n){t.reverting_to=n,e.revert_to_version(t.annotation.id,n).then((function(e){_.assign(t.annotation,e),t.onRevert()})).finally((function(){Reflect.deleteProperty(t,"reverting_to")}))}}]}}])},function(t,e){angular.module("genius").directive("annotationPlaceholder",[function(){return{restrict:"E",templateUrl:"annotation_placeholder.html",scope:{showCondition:"<",noLabel:"<",placeholder_title:"<placeholderTitle"}}}])},function(t,e){angular.module("genius").directive("annotationSidebar",[function(){var t={verified:"add_pinned_annotation_to",community:"add_community_annotation_to"};return{templateUrl:"annotation_sidebar.html",controllerAs:"ctrl",scope:!0,link:function(t,e,n){t.$watch(n.referent,(function(e){t.referent=e}))},controller:["$scope","Session","ReferentHelper","Attempt",function(e,n,r,i){var o=this;this.user_signed_in=n.user_signed_in,this.can_create_referent_from_selection=function(){return!!e.$ctrl.lyrics_selection_range},this.start_new_referent_annotation=function(t){var n=this;e.$ctrl.creating_referent=!0,e.$ctrl.lyrics_compiled.promise.then((function(){return e.$ctrl.lyrics_interface.block_edit(!0),e.$ctrl.lyrics_interface.anchorer.create_referent(e.$ctrl.lyrics_selection_range,t).then((function(t){e.$emit("referent_created",t),e.referent=t}))})).then((function(){n.referent_creation_failed=!0})).finally((function(){e.$ctrl.creating_referent=!1,e.$ctrl.lyrics_interface.block_edit(!1)}))},this.add_pinned_annotation=function(){var t=r.create_verified_annotation_placeholder(e.referent);e.referent.annotations.unshift(t)},this.add_community_annotation=function(){var t=r.create_community_annotation_placeholder(e.referent);e.referent.annotations.push(t)},this.can_create_annotation_type_on_referent=function(r){if(!e.referent)return!1;if(_.some(e.referent.annotations,"new"))return!1;var i=t[r];return n.has_permission(i,e.referent)},this.can_create_community_annotation_on_referent=function(){return this.can_create_annotation_type_on_referent("community")&&!_.some(e.referent.annotations,"needs_exegesis")},e.$watch("referent.id",(function(t,e){t&&e&&t.id===e.id||(o.referent_creation_failed=!1)})),this.close=function(){i.close_form(!o.annotation_dirty,(function(){o.annotation_dirty=!1,e.$ctrl.clear_current_referent(),e.sidebar.signing_up=!1}))}}]}}])},function(t,e){angular.module("genius").directive("applyAnnotationArrowClass",["$immediate","MutationObserver",function(t,e){return{restrict:"A",link:function(n,r){var i=new e((function(e){t((function(){for(var t=0;t<e.length;t++){var n=e[t];if("style"===n.attributeName){var i=n.target.getBoundingClientRect(),o=!!$(document.elementFromPoint(i.right+1,i.top-1)).closest(".annotation_sidebar_unit--verified").length;r.toggleClass("annotation_sidebar_arrow--verified",o)}}}),!0)}));i.observe(r[0],{attributes:!0}),n.$on("destroy",i.disconnect.bind(i))}}}])},function(t,e){angular.module("genius").directive("authenticationForm",["$window","AuthenticationClient","AbTest",function(t,e,n){return{scope:{variants:"<?",on_cancel:"&onCancel",user_session:"=?userSession",include_sign_in:"<?signIn",include_social:"<?social",show_email_fields:"=?showEmail",header_text:"<headerText",preamble_text:"<preambleText",init_signing_in:"<signingIn"},templateUrl:"authentication_form.html",controllerAs:"ctrl",controller:["$scope",function(r){var i=this;this.show_email_fields=r.show_email_fields,this.signing_in=r.init_signing_in,r.user_session=r.user_session||{},this.submit=function(){if(!i.saving){i.saving=!0,i.errors=null;var o=i.signing_in?"sign_in":"sign_up";e[o](r.user_session).then((function(e){n.clear(),"sign_up"===o&&"/"===t.location.pathname?t.location=e.user.url:t.location.reload()})).catch((function(t){i.errors=t.response.errors})).finally((function(){i.saving=!1}))}},this.toggle_signup_signin=function(){i.show_email_fields=!0,i.signing_in=!i.signing_in,i.errors=null}}]}}])},function(t,e){angular.module("genius").directive("autoResizeIframe",(function(){return{restrict:"A",link:function(t,e,n){var r;n.autoResizeIframe&&(r=t.$eval(n.autoResizeIframe)),e.iFrameResize(r)}}}))},function(t,e){angular.module("genius").directive("autocompleteTagsInput",["AlbumClient","ArtistClient","TagClient","SongClient",function(t,e,n,r){var i={album:{autocomplete:t.autocomplete,persistence_property:"name",display_property:"name_with_artist"},artist:{autocomplete:e.autocomplete,display_property:"name"},tag:{autocomplete:n.autocomplete,display_property:"name"},song:{autocomplete:r.autocomplete,persistence_property:"id",display_property:"full_title"}};return{restrict:"E",scope:{bindTo:"=",disabled:"<ngDisabled",name:"@",inputClasses:"@",autocompleteModel:"@",autocompleteOptions:"<?",requireExisting:"<",excludeIf:"&"},templateUrl:"autocomplete_tags_input.html",link:{pre:function(t){var e=i[t.autocompleteModel];t.max_results=10,t.display_property=e.display_property,t.autocomplete=function(n){return e.autocomplete(n,t.autocompleteOptions).then((function(r){if(r=_.reject(r,(function(e){return t.excludeIf({result:e})})),t.requireExisting)return r;if(_.some(r,(function(e){return e[t.display_property].toLowerCase()===n.toLowerCase()})))return r;var i={_new:!0};return i[e.display_property]=n,e.persistence_property&&(i[e.persistence_property]=n),r=_.take(r,t.max_results-1).concat(i)}))}},post:function(t,e,n){t.placeholder=function(){return t.bindTo&&0===t.bindTo.length?n.placeholder:""}}}}}])},function(t,e,n){"use strict";n.r(e);n(120);angular.module("genius").directive("autocompleteWith",["ArtistClient","UserClient","CustomPerformanceRoleClient","SongClient","Bindings",function(t,e,n,r,i){var o={delay:250,scroll:!1,matchSubset:!1,max:20,minChars:4,dataType:"json",selectFirst:!1,resultsClass:"autocomplete-results"},a={user:e,customPerformanceRole:n,artist:t,song:r},s=i.resolver({on_select:"&?onSelect",create_result:"&?createResult",display_field:"@displayField",autocomplete_with:"@autocompleteWith"});return{restrict:"A",require:"?ngModel",link:function(t,e,n,r){var i=s(t,n),c=i.display_field,l=a[i.autocomplete_with],u={};c&&(r.$formatters.push((function(t){return t?_.get(t[0],c,""):""})),r.$parsers.push((function(t){return u[t]=u[t]||_.set({},c,t),u[t]})));var d=_.assign({},o,l.autocomplete_options),p=d.parse;d.parse=function(t,e){var n=p(t);if(_.each(n,(function(t){u[t.data[0]]=t.value})),i.create_result){var r=i.create_result({term:e});n.unshift({data:[e,r],result:r,value:r})}return n},e.autocomplete(l.autocomplete_api_endpoint,d).result((function(n,o){_.isUndefined(i.on_select)?(r.$setViewValue(o[0]),r.$render()):(t.$apply((function(){return i.on_select({data:o[1]})})),e.val(""))}))}}}])},function(t,e){angular.module("genius").directive("brightcove",["$window","Ads","AppConfig","Bindings","Brightcove","Bowser","querystring","$q","Session","$timeout","mobile_device",function(t,e,n,r,i,o,a,s,c,l,u){var d=r.resolver({video:"<object",on_ready:"&onReady",can_play:"&canPlay",on_time_change:"&onTimeChange",on_finish:"&onFinish",yields_api:"&yieldsApi",player_name:"@playerName",tracking_data:"<trackingData",autoplays_on_page_load:"<autoplaysOnPageLoad"}),p=Date.now();return{restrict:"A",link:function(r,f,h){var m=this,g=f[0];if(g.constructor!==t.HTMLVideoElement)throw new Error("The 'brightcove' directive can only be used as an attribute on a <video> element");var v=function(){return o.android},b=d(r,h),y=i["".concat(b.player_name,"_player_id")];if(!y)throw new Error("The 'brightcove' slot is not configured!");var w=s((function(t){return r.$on("$destroy",t)}));r.player=i.load_api(y).then((function(t){var n,o=t.bc,s=t.videojs,d=function(){_.each(s.players,(function(t){t&&t.pause()}))},p=Object.assign({"Logged In":c.user_signed_in,"Mobile Site":u},b.tracking_data);if(f.attr({"data-video-id":b.video.provider_id,"data-account":i.account_id,"data-player":y,"data-embed":"default","data-param-tracking-data":JSON.stringify(p),controls:!0}),(n=/(?:^|\s)vjs-tech(?:\s|$)/.test(g.className)?s(g):o(g)).play=_.wrap(n.play,(function(t){d();for(var e=arguments.length,r=new Array(e>1?e-1:0),i=1;i<e;i++)r[i-1]=arguments[i];if(Reflect.apply(t,n,r),v()){var o=g.requestFullScreen||g.webkitRequestFullScreen||g.mozRequestFullScreen;o&&Reflect.apply(o,g,[])}})),n.ima3&&(n.ima3.adMacroReplacement=_.wrap(n.ima3.adMacroReplacement,(function(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),i=1;i<e;i++)r[i-1]=arguments[i];return x(Reflect.apply(t,n.ima3,r))}))),n.ready((function(){r.$apply(b.on_ready),b.yields_api({api:n}),$(n.el_).find(".vjs-control").addClass("needsclick")})),n.on("timeupdate",_.throttle((function(){var t=n.duration(),e=n.currentTime();r.$apply((function(){b.on_time_change({duration:t,current:e}),t&&e>=t&&b.on_finish()}))})),250),f.on("canplay",(function(){r.$apply(b.can_play),b.autoplays_on_page_load&&l((function(){return f.css("opacity",1)}),0)})),w.then((function(){return n.dispose()})),n.ima3){var h=_.last(a.parse(new URL(n.ima3.settings.serverUrl).search).iu.split("/"));return e.ensure_targeting_for_placements([[h,h]]).then((function(t){return m._ad_targeting=_.get(_.values(t),[0,"targeting"],{}),n}))}return n}));var x=function(e){if(!window["Genius.ads"])return null;var r=m._ad_targeting,i=new URL(e),o=a.parse(i.search.slice(1));_.assign(o,{url:t.location.href,description_url:b.video.article_url,hl:(t.navigator.language||"en").split("-")[0],correlator:p}),b.autoplays_on_page_load&&(o.vpa=1);var s,c={};b.video.dfp_kv.forEach((function(t){var e=t.name,n=t.values;c[e]=n.join(",")})),s="null"===o.cust_params?{}:a.parse(o.cust_params||"");var l=_.defaults({},r,c,s,{platform:"web",environment:n.env,campaign_id:a.parse(t.location.search.slice(1)).campaign});return o.cust_params=a.stringify(l),i.search=a.stringify(o),i.toString()}}}}])},function(t,e){angular.module("genius").directive("classForBrowser",["Bowser","Bindings",function(t,e){var n=e.resolver({browsers_and_classes:"<classForBrowser"});return{restrict:"A",link:function(e,r,i){var o=n(e,i),a=!1;_.each(o.browsers_and_classes,(function(e,n){_.has(t,n)&&(r.addClass(e),a=!0)})),a||r.addClass(o.browsers_and_classes._default)}}}])},function(t,e){angular.module("genius").directive("classForDuration",["$timeout",function(t){return{restrict:"A",link:function(e,n,r){_.forIn(e.$eval(r.classForDuration),(function(e,r){e&&(n.addClass(r),t((function(){n.removeClass(r)}),e))}))}}}])},function(t,e){angular.module("genius").directive("clickOutside",["$document",function(t){return{restrict:"A",link:function(e,n,r){var i=r.hasOwnProperty("suppressClickOutsideIfHandled"),o=function(t){i&&t.originalEvent.defaultPrevented||document.body.contains(t.target)&&(n[0].contains(t.target)||e.$apply((function(){e.$eval(r.clickOutside,{$event:t})})))},a=n.closest("[click-outside-target]").length?n.closest("[click-outside-target]"):t;a.on("click",o),e.$on("$destroy",(function(){a.off("click",o)}))}}}])},function(t,e){angular.module("genius").directive("clickToLoad",[function(){return{scope:{message:"@"},restrict:"E",transclude:!0,templateUrl:"click_to_load.html",link:function(t){t.load=function(){t.loading=!0}}}}])},function(t,e){angular.module("genius").directive("clippedBackgroundImage",["$window","ImageTransform",function(t,e){return{link:function(n,r,i){var o=function(t,e){return Math.ceil(t/e)*e};n.$watch(i.clippedBackgroundImage,(function(a){n.$applyAsync((function(){r.addClass("clipped_background_image");var n="",s=parseInt(i.clippedBackgroundImageWidthIncrement);if(_.isFinite(s)||(s=1),a){var c,l=t.devicePixelRatio||1,u=o(r.outerWidth(),s)*l,d=o(r.outerHeight(),s)*l;_.has(i,"clippedBackgroundImageFitHeight")&&u>d?(c=e.resize(a,{height:d}),r.addClass("clipped_background_image--tiled_horizontally")):c=e.resize(a,{width:u,height:r.height()*l}),n="url('".concat(c,"')")}r.css("background-image",n)}))}))}}}])},function(t,e){var n=["accepted","integrated","rejected","marked_spam","archived"];angular.module("genius").directive("comment",["Session","CommentClient","Reversible",function(t,e,r){return{restrict:"E",templateUrl:"comment.html",scope:{comment:"<object",variants:"<"},require:"?^^annotation",controllerAs:"ctrl",controller:function(){},link:function(i,o,a,s){var c=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=s?s.comment_removed():void 0,o=r.modify(i.comment,Object.assign(e,{_deleted:!0}));t.catch((function(){n&&n(),o()}))};i.destroy=function(){c(e.destroy(i.comment.id),{deleted_at:(new Date).getTime()})},i.integrate=function(){s.integrate_comment(i.comment),i.perform_action("integrate","integrated")},i.perform_action=function(t,n){c(e.change_state(i.comment.id,t),{state:n})},i.can_perform=function(e){return t.has_permission(e,i.comment)},i.toggle_voters=function(){i.showing_voters=!i.showing_voters},i.$on("vote_saved",(function(t){i.$broadcast("update_voters")})),i.is_removed=function(){return i.comment.deleted_at||_.includes(n,i.comment.state)}}}}])},function(t,e){angular.module("genius").directive("commentForm",[function(){return{restrict:"E",templateUrl:"comment_form.html",scope:{commentable:"<",onSave:"&",allowReasons:"<",saveText:"@",savingText:"@",textareaPlaceholder:"@",showFullFormByDefault:"<",showReasonsByDefault:"<",on_dirty:"&onDirty",on_clean:"&onClean"},controllerAs:"ctrl",controller:["Session","$scope","Reversible",function(t,e,n){var r=this;this.user_signed_in=t.user_signed_in,this.show_full_form_by_default=e.showFullFormByDefault,this.show_reasons_by_default=e.showReasonsByDefault,this.showing_full_form=this.show_full_form_by_default||!1,this.current_user=t.current_user,this.show_full_form=function(){return r.showing_full_form=!0},this.show_reasons_form=function(){return r.showing_full_form||r.show_reasons_by_default};var i=function(){e.comment={_new:!0,author:t.current_user,body:{}}};i(),this.body_is_required=function(){return!e.comment.reason||e.comment.reason.requires_body},this.save=function(){if(!r.saving){t.user_signed_in||(e.comment.anonymous_user={name:e.comment.name});var o=e.comment,a=n.modify(r,{showing_full_form:!1,saving:!1});i(),e.form.$setPristine(),e.onSave({comment:o}).catch((function(){e.comment=o,a()}))}},e.$watch("comment.body.markdown",(function(t){_.isEmpty(t)?e.on_clean():e.on_dirty()}))}],link:function(t,e){t.$on("focus_comment_textarea",(function(n,r){r===t.commentable&&e.find('textarea[ng-model="comment.body.markdown"]').focus()}))}}}])},function(t,e){angular.module("genius").directive("commentsPlaceholder",[function(){return{restrict:"E",templateUrl:"comments_placeholder.html",scope:{}}}])},function(t,e){angular.module("genius").directive("componentDateInput",(function(){return{scope:{ngModel:"=",disabled:"<"},restrict:"E",templateUrl:"component_date_input.html",controllerAs:"ctrl",controller:[function(){_.assign(this,{years:_.range(1,(new Date).getFullYear()+2).reverse(),months:["January","February","March","April","May","June","July","August","September","October","November","December"].map((function(t,e){return{name:t,number:e+1}})),days:_.range(1,32)})}]}}))},function(t,e){angular.module("genius").directive("composeMessage",[function(){return{restrict:"E",scope:{recipient:"<",on_sent:"&onSent",yields_is_dirty:"&yieldsIsDirty"},templateUrl:"compose_message.html",controller:["$scope","MessageClient","Session",function(t,e,n){var r,i=this;t.recipient&&(r=t.recipient.id);var o=function(){t.message={recipient_id:r,body:""},t.ctrl.form&&t.ctrl.form.$setPristine()};o(),this.new_message=!t.message.recipient_id,this.current_user=n.current_user,this.showing_markdown_preview=!1,this.markdown_preview_initialized=!1,this.show_markdown_preview=function(){i.showing_markdown_preview=!0,i.markdown_preview_initialized=!0},this.hide_markdown_preview=function(){i.showing_markdown_preview=!1},this.send=function(){t.sending=!0,t.error=null;var n=t.message;e.create(n).then((function(e){o(),t.on_sent({message:e})})).catch((function(e){t.error=e})).finally((function(){t.sending=!1}))}}],controllerAs:"ctrl"}}])},function(t,e){angular.module("genius").directive("confirm",["$window",function(t){return{priority:-1,restrict:"A",scope:{message:"@confirm"},link:function(e,n){n.on("click",(function(n){e.message&&(t.confirm(e.message)||(n.stopImmediatePropagation(),n.preventDefault()))}))}}}])},function(t,e){function n(t){return function(t){if(Array.isArray(t))return r(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}angular.module("genius").directive("conversationMessages",[function(){return{templateUrl:"conversation_messages.html",scope:{conversation:"<",yields_is_dirty:"&yieldsIsDirty"},controller:["$scope","MessageClient","ConversationClient",function(t,e,r){var i,o=1;t.finished_paginating=!1,t.messages=[],this.message_sent=function(e){t.messages.push(e),t.conversation.latest_message=e,t.conversation.latest_message_preview=e.body_preview},this.should_paginate=function(){return!i&&!t.finished_paginating},this.load_next_page=function(){i||(i=e.for_conversation(t.conversation.id,{page:o}).then((function(e){var a;(a=t.messages).unshift.apply(a,n(e.reverse())),i=null,1===o&&r.mark_read(t.conversation.id),++o,t.finished_paginating=0===e.length})))},this.load_next_page()}],controllerAs:"ctrl"}}])},function(t,e){angular.module("genius").directive("conversationWithUser",["ConversationClient",function(t){return{restrict:"E",scope:{user:"<",yields_is_dirty:"&yieldsIsDirty"},template:'\n      <conversation-messages\n        conversation="conversation"\n        ng-if="conversation"\n        yields-is-dirty="yields_is_dirty({is_dirty: is_dirty})"\n      ></conversation-messages>\n    ',controller:["$scope",function(e){t.with_user(e.user.id).then((function(t){e.conversation=t}))}]}}])},function(t,e){function n(t){return function(t){if(Array.isArray(t))return r(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}angular.module("genius").directive("conversations",["ConversationClient","Attempt",function(t,e){return{restrict:"E",scope:{visible:"<",refresh_at:"<refreshAt",on_conversation_read:"&onConversationRead",on_modal_open:"&onModalOpen",on_modal_close:"&onModalClose",embed:"<",modal_dimensions:"<modalDimensions"},templateUrl:"conversations.html",controller:["$scope",function(r){var i,o,a,s=this;r.attempt_close=e.close_form;var c=function(){i=Date.now(),r.conversations=[],s.all_pages_loaded=!1,o=1};c(),this.should_paginate=function(){return!!r.visible&&!s.all_pages_loaded&&!a},this.load_page=function(){a||(a=t.latest({page:o}).then((function(t){var e;(e=r.conversations).push.apply(e,n(t)),s.all_pages_loaded=!t.length,++o,a=null})))},r.$watchGroup(["visible","refresh_at"],(function(){!r.visible&&r.refresh_at&&r.refresh_at>i&&c()})),this.open=function(t,e){e.preventDefault(),r.open_conversation_id=t;var n=_.find(r.conversations,{id:t}),i=n.unread,o=n.unread_messages_count;n.unread=!1,n.unread_messages_count=0,r.on_modal_open(),i&&r.on_conversation_read({conversation:n,unread_messages_count:o})},this.close=function(){r.on_modal_close(),r.open_conversation_id=null}}],controllerAs:"ctrl"}}])},function(t,e){angular.module("genius").directive("copyToClipboard",["Clipboard","$timeout",function(t,e){return{restrict:"A",link:function(n,r,i){var o=new t(r[0],{text:function(){return n.$eval(i.copyToClipboard)}});o.on("success",(function(){i.textToShowAfterCopy&&function(t,n){var r=t.text();t.text(n),e((function(){t.text(r)}),750)}(r,i.textToShowAfterCopy)})),o.on("error",r.remove),n.$on("$destroy",o.destroy.bind(o))}}}])},function(t,e){angular.module("genius").directive("copyValueToScope",[function(){return{restrict:"A",link:{pre:function(t,e,n){var r=t.$eval(n.copyValueToScope);t[r.key]=r.value}}}}])},function(t,e){angular.module("genius").directive("cosigns",(function(){return{restrict:"E",templateUrl:"cosigns.html"}}))},function(t,e){angular.module("genius").directive("delayedHref",["$window","$immediate",function(t,e){return{restrict:"A",link:function(n,r,i){var o=i.delayedHref;r.on("click",(function(n){n.preventDefault(),e((function(){t.location.href=o}),!1)}))}}}])},function(t,e){angular.module("genius").directive("delimitedKeys",(function(){return{scope:{key:"@delimitedKeys"},restrict:"A",require:"ngModel",link:function(t,e,n,r){var i={};t.$watch(n.ngModel,(function(e){e&&e.forEach((function(e){i[e[t.key]]=e}))})),r.$formatters.push((function(e){return _.map(e,t.key).join(", ")})),r.$parsers.push((function(e){return e.split(/\s?,\s/).map((function(e){return i[e]||_.set({},t.key,e)}))}))}}}))},function(t,e){angular.module("genius").directive("descriptionReferent",[function(){return{scope:{referent:"<object",variants:"<"},templateUrl:"description_annotation.html"}}])},function(t,e){angular.module("genius").directive("detectImageDiffs",["$immediate",function(t){return{link:function(e,n,r){t((function(){n.find("img").each((function(){var t=-1!==e.$eval(r.left).indexOf(this.src),n=-1!==e.$eval(r.right).indexOf(this.src);t&&!n&&this.classList.add("del"),!t&&n&&this.classList.add("ins")}))}),!1)}}}])},function(t,e){angular.module("genius").directive("dirtyable",["BeforeUnloadCheck",function(t){return{restrict:"A",require:"form",link:function(e,n,r,i){var o=function(){return e.$apply((function(){return i.$commitViewValue()})),i.$dirty};e.$eval(r.yieldsIsDirty,{is_dirty:function(){return i.$commitViewValue(),i.$dirty}}),t.add(o),e.$on("$destroy",(function(){return t.remove(o)}))}}}])},function(t,e){angular.module("genius").directive("displayUnlessCookie",["Cookies","DateTools",function(t,e){var n=function(n,r){t.put(n,1,{expires:e.days_to_ms(r),path:"/"})};return{transclude:!0,scope:{name:"@",expiresInDays:"<",setCookieOnDisplay:"<"},template:'<ng-transclude ng-if="!hidden"></ng-transclude>',link:function(e){e.hidden=t.get(e.name),e.setCookieOnDisplay&&!t.get(e.name)&&n(e.name,e.expiresInDays)},controller:["$scope",function(t){this.set_cookie_and_close=function(){n(t.name,t.expiresInDays),t.hidden=!0}}]}}])},function(t,e,n){"use strict";n.r(e);n(523);angular.module("genius").directive("dragAndDrop",["Bindings",function(t){var e=t.resolver({data:"<dragAndDrop",draggable:"<",on_dragstart:"&onDragstart",on_dragend:"&onDragend",on_dragenter:"&onDragenter",on_dragleave:"&onDragleave",on_drop:"&?onDrop",cant_drop:"<cantDrop"});return{restrict:"A",link:function(t,n,r){var i=e(t,r);i.draggable&&(n.addClass("draggable_item"),n[0].addEventListener("dragstart",(function(e){e.dataTransfer.setData("text",JSON.stringify(i.data)),n.addClass("draggable_item--dragging"),t.$apply(i.on_dragstart)})),n[0].addEventListener("dragend",(function(){n.removeClass("draggable_item--dragging"),t.$apply(i.on_dragend)}))),i.on_drop&&(new Dragster(n[0]),n[0].addEventListener("dragster:enter",(function(){i.cant_drop||(n.addClass("droppable_item"),t.$apply(i.on_dragenter))})),n[0].addEventListener("dragster:leave",(function(){i.cant_drop||(n.removeClass("droppable_item"),t.$apply(i.on_dragleave))})),n[0].addEventListener("dragover",(function(t){t.preventDefault()})),n[0].addEventListener("drop",(function(e){if(e.stopPropagation(),e.preventDefault(),n.removeClass("droppable_item"),!i.cant_drop){var r=JSON.parse(e.dataTransfer.getData("text"));return t.$apply((function(){return i.on_drop({data:r})})),!1}})))}}}])},function(t,e){(function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}};t=function(){function t(t){this.el=t,this.dragleave=e(this.dragleave,this),this.dragenter=e(this.dragenter,this),this.supportsEventConstructors()&&(this.first=!1,this.second=!1,this.el.addEventListener("dragenter",this.dragenter,!1),this.el.addEventListener("dragleave",this.dragleave,!1))}return t.prototype.dragenter=function(t){return this.first?this.second=!0:(this.first=!0,this.el.dispatchEvent(new CustomEvent("dragster:enter",{bubbles:!0,cancelable:!0,detail:{dataTransfer:t.dataTransfer}})))},t.prototype.dragleave=function(t){if(this.second?this.second=!1:this.first&&(this.first=!1),!this.first&&!this.second)return this.el.dispatchEvent(new CustomEvent("dragster:leave",{bubbles:!0,cancelable:!0,detail:{dataTransfer:t.dataTransfer}}))},t.prototype.removeListeners=function(){return this.el.removeEventListener("dragenter",this.dragenter,!1),this.el.removeEventListener("dragleave",this.dragleave,!1)},t.prototype.supportsEventConstructors=function(){try{new CustomEvent("z")}catch(t){return!1}return!0},t.prototype.reset=function(){return this.first=!1,this.second=!1},t}(),window.Dragster=t}).call(this)},function(t,e){angular.module("genius").directive("editableMarkdown",["$immediate","Filepicker","Autosize",function(t,e,n){return{restrict:"E",replace:!0,templateUrl:"editable_markdown.html",scope:{html:"=",markdown:"=",is_required:"<?isRequired",placeholder:"@"},controller:function(){var t=new e;this.pick_image=function(){t.pick_and_store().then(function(t){this.insert_at_markdown_cursor({before:t})}.bind(this))}},controllerAs:"ctrl",link:function(e,r){e.editable=e,e.resize_textarea=function(){e.$evalAsync((function(){var e=r.find("textarea");n(e),t(e.focus.bind(e),!1)}))}}}}])},function(t,e,n){"use strict";n.r(e);n(526),n(527),n(528);function r(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var r,i,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);a=!0);}catch(t){s=!0,i=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}angular.module("genius").directive("embedly",["getScript","querystring","$compile",function(t,e,n){var i=new RegExp("^https?://","i"),o=function(t){return t.find("a").filter((function(){return i.test($.trim($(this).text()))}))},a=_.template('\n    <blockquote class="twitter-tweet">\n      <a href="<%- tweet_url %>"></a>\n    </blockquote>\n  '),s=_.template('\n    <blockquote\n      class="rg_standalone_container"\n      data-src="//'.concat(CANONICAL_DOMAIN,'/annotations/<%- annotation_id %>/standalone_embed"\n    ></blockquote>\n  ')),c=_.template('\n    <embedly-embed\n      embed=":: <%- JSON.stringify(embed) %>"\n    ></embedly-embed>\n  '),l=_.template('\n    <embedly-youtube\n      video-id="<%- video_id %>"\n      start="<%- start %>"\n    ></embedly-youtube>\n  '),u=/^https?:\/\/tidal\.com\/(track|album|video)\/(\d+)$/,d=_.template('\n    <div class="tidal-embed" data-type="<%- type %>" data-id="<%- id %>"></div>\n  '),p=function(t,e){var r=$(t||".embedly_pro:visible");o(r).each((function(){if(app.embedlyURLre.test(this.href))return!0;var t=$(this);t.embedly({secure:!0,query:{secure:"true"},display:function(r){r.description&&_.trim(t.parent().text())===_.trim(t.text())?("Wikipedia"===r.provider_name&&(r.html=null),t.replaceWith(n(c({embed:r}))(e))):t.text(r.title)}}),t.text("Loading embed...")}))};return{restrict:"A",link:function(i,f,h){i.$watch(h.embedly||h.ngBindHtml,(function(h){h&&function(i,f){var h=$(i||".embedly:visible");o(h).each((function(){var i=$(this);if(app.youtubeURLre.test(this.href)){var o=new URL(this.href),p=e.parse(o.search.slice(1)),h=e.parse(o.hash.slice(1)),m=p.t||h.t||0;/\d+m|\d+s|\d+m\d+s/.test(m)&&(m=_(m.match(/^(\d+m)?(\d+s)?$/)).slice(1,3).values().map((function(t){return t?parseInt(t):0})).thru((function(t){return 60*t[0]+t[1]})).value());var g=p.v||o.pathname.slice(1);i.replaceWith(n(l({video_id:g,start:m}))(f))}else if(app.twitterURLre.test(this.href))i.replaceWith(a({tweet_url:this.href})),t("//platform.twitter.com/widgets.js",{cache:!0});else if(app.rgURLre.test(this.href)&&this.href===i.text()&&!i.closest(".cont-annotations.act-standalone_embed").length){var v=app.rgURLre.exec(this.href).pop();i.replaceWith(s({annotation_id:v})),t("//".concat(CANONICAL_DOMAIN,"/annotations/load_standalone_embeds.js"),{cache:!0})}else if(this.href.match(/https?:\/\/embed\.vidyard\.com\/(landingpage|share)\/(.*)/i))i.embedly({addImageStyles:!1,className:"embedly_preview",secure:!0,query:{secure:"true"}});else if(u.test(this.href)){var b=r(this.href.match(u).slice(1),2),y=b[0],w=b[1];i.replaceWith(d({type:y[0],id:w})),t("//embed.tidal.com/tidal-embed.js",{cache:!0})}else{if(!app.embedlyURLre.test(this.href))return;var x={addImageStyles:!1,className:"embedly_preview",secure:!0,query:{luxe:!MOBILE_DEVICE,secure:"true"},display:function(t){var e=t.html;/soundcloud\.com/.test(e)?(t.html=e.replace("visual%3Dtrue","visual%3Dfalse").replace(/height="\d+"/,'height="'.concat(165,'"')),t.height=165):("video"===t.type||"photo"!==t.type&&"rich"!==t.type)&&i.replaceWith(n(c({embed:t}))(f)),t.display()}};i.embedly(x)}i.text("Loading embed...")})),p(i,f)}(f,i)}))}}}])},function(t,e){!function(t){var e={key:null,endpoint:"oembed",secure:null,query:{},method:"replace",addImageStyles:!0,wrapElement:"div",className:"embed",batch:20,urlRe:null},n=/(http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/,r=function(t){return null==t},i=function(t,e,n){this.init(t,e,n)};i.prototype={init:function(e){this.urls=e,this.count=0,this.results={},this._deferred=t.Deferred()},notify:function(e){if(this.results[e.original_url]=e,this.count++,this._deferred.notify.apply(this._deferred,[e]),this.count===this.urls.length){var n=this,r=t.map(this.urls,(function(t){return n.results[t]}));this._deferred.resolve(r)}return this},state:function(){return this._deferred.state.apply(this._deferred,arguments)}},window.Keeper=i;var o=function(){};o.prototype={defaults:{},log:function(t,e){r(window.console)||r(window.console[t])||window.console[t].apply(window.console,[e])},build:function(e,n,i){var o=(i=r(i)?{}:i).secure;r(o)&&(o="https:"===window.location.protocol);var a=(o?"https":"http")+"://api.embed.ly/"+("objectify"===e?"2/":"1/")+e,s=r(i.query)?{}:i.query;return s.key=i.key,a+="?"+t.param(s),a+="&urls="+t.map(n,encodeURIComponent).join(",")},ajax:function(o,a,s){if(s=t.extend({},e,t.embedly.defaults,"object"==typeof s&&s),r(s.key))return this.log("error","Embedly jQuery requires an API Key. Please sign up for one at http://embed.ly"),null;var c;a=r(c=a)?[]:t.isArray(c)?c:[c];var l,u=new i(a),d=[],p=[];t.each(a,(function(t,e){l=!1,n.test(e)&&(l=!0,null!==s.urlRe&&s.urlRe.test&&!s.urlRe.test(e)&&(l=!1)),!0===l?d.push(e):p.push({url:e,original_url:e,error:!0,invalid:!0,type:"error",error_message:'Invalid URL "'+e+'"'})}));var f=function(e,n){var r=[],i=[];return t.each(e,(function(t,e){i.push(e),i.length===n&&(r.push(i),i=[])})),0!==i.length&&r.push(i),r}(d,s.batch),_=this;return t.each(f,(function(e,n){t.ajax({url:_.build(o,n,s),dataType:"jsonp",success:function(e){var r;t.each((r=[n,e],t.map(r[0],(function(e,n){return[t.map(r,(function(t){return t[n]}))]}))),(function(t,e){var n=e[1];n.original_url=e[0],n.invalid=!1,u.notify(n)}))}})})),p.length&&setTimeout((function(){t.each(p,(function(t,e){u.notify(e)}))}),1),u._deferred},oembed:function(t,e){return this.ajax("oembed",t,e)},preview:function(t,e){return this.ajax("preview",t,e)},objectify:function(t,e){return this.ajax("objectify",t,e)},extract:function(t,e){return this.ajax("extract",t,e)}};var a=function(){};a.prototype={build:function(e,n,i){var o=(i=t.extend({},t.embedly.defaults,"object"==typeof i&&i)).secure;r(o)&&(o="https:"===window.location.protocol);var a=(o?"https":"http")+"://i.embed.ly/"+("display"===e?"1/":"1/display/")+e,s=r(i.query)?{}:i.query;return s.key=i.key,a+="?"+t.param(s),a+="&url="+encodeURIComponent(n)},display:function(t,e){return this.build("display",t,e)},resize:function(t,e){return this.build("resize",t,e)},fill:function(t,e){return this.build("fill",t,e)},crop:function(t,e){return this.build("crop",t,e)}};var s=function(t,e,n){this.init(t,e,n)};s.prototype={init:function(e,n,r){this.elem=e,this.$elem=t(e),this.original_url=n,this.options=r,this.loaded=t.Deferred();var i=this;this.loaded.done((function(){i.$elem.trigger("loaded",[i])})),this.$elem.trigger("initialized",[this])},progress:function(e){t.extend(this,e),this.options.display?this.options.display.apply(this.elem,[this,this.elem]):"oembed"===this.options.endpoint&&this.display(),this.loaded.resolve(this)},imageStyle:function(){var t,e=[];return this.options.addImageStyles&&(this.options.query.maxwidth&&(t=isNaN(parseInt(this.options.query.maxwidth,10))?"":"px",e.push("max-width: "+this.options.query.maxwidth+t)),this.options.query.maxheight&&(t=isNaN(parseInt(this.options.query.maxheight,10))?"":"px",e.push("max-height: "+this.options.query.maxheight+t))),e.join(";")},display:function(){if("error"===this.type)return!1;var t;this.style=this.imageStyle(),"photo"===this.type?(t="<a href='"+this.original_url+"' target='_blank'>",t+="<img style='"+this.style+"' src='"+this.url+"' alt='"+this.title+"' /></a>"):"video"===this.type||"rich"===this.type?t=this.html:(this.title=this.title||this.url,t=this.thumbnail_url?"<img src='"+this.thumbnail_url+"' class='thumb' style='"+this.style+"'/>":"",t+="<a href='"+this.original_url+"'>"+this.title+"</a>",t+=this.provider_name?"<a href='"+this.provider_url+"' class='provider'>"+this.provider_name+"</a>":"",t+=this.description?'<div class="description">'+this.description+"</div>":""),this.options.wrapElement&&(t="<"+this.options.wrapElement+' class="'+this.options.className+'">'+t+"</"+this.options.wrapElement+">"),this.code=t,"replace"===this.options.method?this.$elem.replaceWith(this.code):"after"===this.options.method?this.$elem.after(this.code):"afterParent"===this.options.method?this.$elem.parent().after(this.code):"replaceParent"===this.options.method&&this.$elem.parent().replaceWith(this.code),this.$elem.trigger("displayed",[this])}},t.embedly=new o,t.embedly.display=new a,t.fn.embedly=function(n){if(void 0===n||"object"==typeof n){if(n=t.extend({},e,t.embedly.defaults,"object"==typeof n&&n),r(n.key))return t.embedly.log("error","Embedly jQuery requires an API Key. Please sign up for one at http://embed.ly"),this.each(t.noop);var i={},o=function(e){if(!t.data(t(e),"embedly")){var r=t(e).attr("href"),o=new s(e,r,n);t.data(e,"embedly",o),i.hasOwnProperty(r)?i[r].push(o):i[r]=[o]}},a=this.each((function(){r(t(this).attr("href"))?t(this).find("a").each((function(){r(t(this).attr("href"))||o(this)})):o(this)})),c=t.embedly.ajax(n.endpoint,t.map(i,(function(t,e){return e})),n).progress((function(e){t.each(i[e.original_url],(function(t,n){n.progress(e)}))}));return n.progress&&c.progress(n.progress),n.done&&c.done(n.done),a}},t.expr[":"].embedly=function(e){return!r(t(e).data("embedly"))},t.fn.display=function(n,i){if(r(n)&&(n="display"),void 0===i||"object"==typeof i){if(i=t.extend({},e,t.embedly.defaults,"object"==typeof i&&i),r(i.key))return t.embedly.log("error","Embedly jQuery requires an API Key. Please sign up for one at http://embed.ly/display"),this.each(t.noop);var o=function(e){var r=t(e);if(!r.data("display")){var o=r.data("src")||r.attr("href"),a={original_url:o,url:t.embedly.display.build(n,o,i)};r.data("display",a),r.trigger("initialized",[e]);var s="<img src='"+a.url+"' />";r.is("a")?r.append(s):r.replaceWith(s)}},a=function(e){return!r(t(e).data("src"))||!r(t(e).attr("href"))};return this.each((function(){a(this)?o(this):t(this).find("img,a").each((function(){a(this)&&o(this)}))}))}},t.expr[":"].display=function(e){return!r(t(e).data("display"))}}(jQuery,window)},function(t,e){window.app=window.app||{},window.app.youtubeURLre=new RegExp("https?://youtube.com/watch|https?://www.youtube.com/watch|https?://youtu.be/"),window.app.twitterURLre=/((http:\/\/(twitter\.com\/.*\/status\/.*\/photo\/.*|twitter\.com\/.*\/statuses\/.*\/photo|pic\.twitter\.com\/.*|www\.twitter\.com\/.*\/statuses\/.*\/photo\/.*|mobile\.twitter\.com\/.*\/status\/.*\/photo\/.*|mobile\.twitter\.com\/.*\/statuses\/.*\/photo\/.*|twitter\.com\/.*\/status\/.*|twitter\.com\/.*\/statuses\/.*|www\.twitter\.com\/.*\/status\/.*|www\.twitter\.com\/.*\/statuses\/.*|mobile\.twitter\.com\/.*\/status\/.*|mobile\.twitter\.com\/.*\/statuses\/.*))|(https:\/\/(twitter\.com\/.*\/status\/.*\/photo\/.*|twitter\.com\/.*\/statuses\/.*\/photo\/.*|www\.twitter\.com\/.*\/status\/.*\/photo\/.*|www\.twitter\.com\/.*\/statuses\/.*\/photo\/.*|mobile\.twitter\.com\/.*\/status\/.*\/photo\/.*|mobile\.twitter\.com\/.*\/statuses\/.*\/photo\/.*|twitter\.com\/.*\/status\/.*|twitter\.com\/.*\/statuses\/.*|www\.twitter\.com\/.*\/status\/.*|www\.twitter\.com\/.*\/statuses\/.*|mobile\.twitter\.com\/.*\/status\/.*|mobile\.twitter\.com\/.*\/statuses\/.*)))/i,window.app.rgURLre=new RegExp("^(https?:\\/\\/(.+\\.)?((?:rap)?genius\\.com|"+CANONICAL_DOMAIN.replace(/\.|\-/g,"\\$&")+")\\/(\\d+)(?:\\/|\\?|$))","i"),window.app.embedlyURLre=/((https?:\/\/(.*yfrog\..*\/.*|www\.flickr\.com\/photos\/.*|flic\.kr\/.*|twitpic\.com\/.*|www\.twitpic\.com\/.*|twitpic\.com\/photos\/.*|www\.twitpic\.com\/photos\/.*|.*imgur\.com\/.*|.*\.posterous\.com\/.*|post\.ly\/.*|twitgoo\.com\/.*|i.*\.photobucket\.com\/albums\/.*|s.*\.photobucket\.com\/albums\/.*|phodroid\.com\/.*\/.*\/.*|www\.mobypicture\.com\/user\/.*\/view\/.*|moby\.to\/.*|xkcd\.com\/.*|www\.xkcd\.com\/.*|imgs\.xkcd\.com\/.*|www\.asofterworld\.com\/index\.php\?id=.*|www\.asofterworld\.com\/.*\.jpg|asofterworld\.com\/.*\.jpg|www\.qwantz\.com\/index\.php\?comic=.*|23hq\.com\/.*\/photo\/.*|www\.23hq\.com\/.*\/photo\/.*|.*dribbble\.com\/shots\/.*|drbl\.in\/.*|.*\.smugmug\.com\/.*|.*\.smugmug\.com\/.*#.*|emberapp\.com\/.*\/images\/.*|emberapp\.com\/.*\/images\/.*\/sizes\/.*|emberapp\.com\/.*\/collections\/.*\/.*|emberapp\.com\/.*\/categories\/.*\/.*\/.*|embr\.it\/.*|picasaweb\.google\.com.*\/.*\/.*#.*|picasaweb\.google\.com.*\/lh\/photo\/.*|picasaweb\.google\.com.*\/.*\/.*|dailybooth\.com\/.*\/.*|brizzly\.com\/pic\/.*|pics\.brizzly\.com\/.*\.jpg|img\.ly\/.*|www\.tinypic\.com\/view\.php.*|tinypic\.com\/view\.php.*|www\.tinypic\.com\/player\.php.*|tinypic\.com\/player\.php.*|www\.tinypic\.com\/r\/.*\/.*|tinypic\.com\/r\/.*\/.*|.*\.tinypic\.com\/.*\.jpg|.*\.tinypic\.com\/.*\.png|meadd\.com\/.*\/.*|meadd\.com\/.*|.*\.deviantart\.com\/art\/.*|.*\.deviantart\.com\/gallery\/.*|.*\.deviantart\.com\/#\/.*|fav\.me\/.*|.*\.deviantart\.com|.*\.deviantart\.com\/gallery|.*\.deviantart\.com\/.*\/.*\.jpg|.*\.deviantart\.com\/.*\/.*\.gif|.*\.deviantart\.net\/.*\/.*\.jpg|.*\.deviantart\.net\/.*\/.*\.gif|www\.fotopedia\.com\/.*\/.*|fotopedia\.com\/.*\/.*|photozou\.jp\/photo\/show\/.*\/.*|photozou\.jp\/photo\/photo_only\/.*\/.*|instagr\.am\/p\/.*|instagram\.com\/p\/.*|www\.instagram\.com\/p\/.*|skitch\.com\/.*\/.*\/.*|img\.skitch\.com\/.*|share\.ovi\.com\/media\/.*\/.*|www\.questionablecontent\.net\/|questionablecontent\.net\/|www\.questionablecontent\.net\/view\.php.*|questionablecontent\.net\/view\.php.*|questionablecontent\.net\/comics\/.*\.png|www\.questionablecontent\.net\/comics\/.*\.png|picplz\.com\/user\/.*\/pic\/.*\/|twitrpix\.com\/.*|.*\.twitrpix\.com\/.*|www\.someecards\.com\/.*\/.*|someecards\.com\/.*\/.*|some\.ly\/.*|www\.some\.ly\/.*|pikchur\.com\/.*|achewood\.com\/.*|www\.achewood\.com\/.*|achewood\.com\/index\.php.*|www\.achewood\.com\/index\.php.*|www\.whosay\.com\/content\/.*|www\.whosay\.com\/photos\/.*|www\.whosay\.com\/videos\/.*|say\.ly\/.*|ow\.ly\/i\/.*|color\.com\/s\/.*|bnter\.com\/convo\/.*|mlkshk\.com\/p\/.*|lockerz\.com\/s\/.*|soundcloud\.com\/.*|soundcloud\.com\/.*\/.*|soundcloud\.com\/.*\/sets\/.*|soundcloud\.com\/groups\/.*|snd\.sc\/.*|www\.last\.fm\/music\/.*|www\.last\.fm\/music\/+videos\/.*|www\.last\.fm\/music\/+images\/.*|www\.last\.fm\/music\/.*\/_\/.*|www\.last\.fm\/music\/.*\/.*|www\.mixcloud\.com\/.*\/.*\/|www\.radionomy\.com\/.*\/radio\/.*|radionomy\.com\/.*\/radio\/.*|www\.hark\.com\/clips\/.*|www\.rdio\.com\/#\/artist\/.*\/album\/.*|www\.rdio\.com\/artist\/.*\/album\/.*|www\.zero-inch\.com\/.*|.*\.bandcamp\.com\/|.*\.bandcamp\.com\/track\/.*|.*\.bandcamp\.com\/album\/.*|freemusicarchive\.org\/music\/.*|www\.freemusicarchive\.org\/music\/.*|freemusicarchive\.org\/curator\/.*|www\.freemusicarchive\.org\/curator\/.*|www\.npr\.org\/.*\/.*\/.*\/.*\/.*|www\.npr\.org\/.*\/.*\/.*\/.*\/.*\/.*|www\.npr\.org\/.*\/.*\/.*\/.*\/.*\/.*\/.*|www\.npr\.org\/templates\/story\/story\.php.*|huffduffer\.com\/.*\/.*|www\.audioboo\.fm\/boos\/.*|audioboo\.fm\/boos\/.*|boo\.fm\/b.*|www\.xiami\.com\/song\/.*|xiami\.com\/song\/.*|www\.saynow\.com\/playMsg\.html.*|www\.saynow\.com\/playMsg\.html.*|grooveshark\.com\/s\/.*|listen\.grooveshark\.com\/s\/.*|radioreddit\.com\/songs.*|www\.radioreddit\.com\/songs.*|radioreddit\.com\/\?q=songs.*|www\.radioreddit\.com\/\?q=songs.*|www\.gogoyoko\.com\/song\/.*|.*amazon\..*\/gp\/product\/.*|.*amazon\..*\/.*\/dp\/.*|.*amazon\..*\/dp\/.*|.*amazon\..*\/o\/ASIN\/.*|.*amazon\..*\/gp\/offer-listing\/.*|.*amazon\..*\/.*\/ASIN\/.*|.*amazon\..*\/gp\/product\/images\/.*|.*amazon\..*\/gp\/aw\/d\/.*|www\.amzn\.com\/.*|amzn\.com\/.*|www\.shopstyle\.com\/browse.*|www\.shopstyle\.com\/action\/apiVisitRetailer.*|api\.shopstyle\.com\/action\/apiVisitRetailer.*|www\.shopstyle\.com\/action\/viewLook.*|gist\.github\.com\/.*|twitter\.com\/.*\/status\/.*|twitter\.com\/.*\/statuses\/.*|www\.twitter\.com\/.*\/status\/.*|www\.twitter\.com\/.*\/statuses\/.*|mobile\.twitter\.com\/.*\/status\/.*|mobile\.twitter\.com\/.*\/statuses\/.*|www\.crunchbase\.com\/.*\/.*|crunchbase\.com\/.*\/.*|www\.slideshare\.net\/.*\/.*|www\.slideshare\.net\/mobile\/.*\/.*|slidesha\.re\/.*|scribd\.com\/doc\/.*|www\.scribd\.com\/doc\/.*|scribd\.com\/mobile\/documents\/.*|www\.scribd\.com\/mobile\/documents\/.*|screenr\.com\/.*|polldaddy\.com\/community\/poll\/.*|polldaddy\.com\/poll\/.*|answers\.polldaddy\.com\/poll\/.*|www\.5min\.com\/Video\/.*|www\.howcast\.com\/videos\/.*|www\.screencast\.com\/.*\/media\/.*|screencast\.com\/.*\/media\/.*|www\.screencast\.com\/t\/.*|screencast\.com\/t\/.*|issuu\.com\/.*\/docs\/.*|www\.kickstarter\.com\/projects\/.*\/.*|www\.scrapblog\.com\/viewer\/viewer\.aspx.*|ping\.fm\/p\/.*|chart\.ly\/symbols\/.*|chart\.ly\/.*|maps\.google\.com\/maps\?.*|maps\.google\.com\/\?.*|maps\.google\.com\/maps\/ms\?.*|.*\.craigslist\.org\/.*\/.*|my\.opera\.com\/.*\/albums\/show\.dml\?id=.*|my\.opera\.com\/.*\/albums\/showpic\.dml\?album=.*&picture=.*|tumblr\.com\/.*|.*\.tumblr\.com\/post\/.*|www\.polleverywhere\.com\/polls\/.*|www\.polleverywhere\.com\/multiple_choice_polls\/.*|www\.polleverywhere\.com\/free_text_polls\/.*|www\.quantcast\.com\/wd:.*|www\.quantcast\.com\/.*|siteanalytics\.compete\.com\/.*|statsheet\.com\/statplot\/charts\/.*\/.*\/.*\/.*|statsheet\.com\/statplot\/charts\/e\/.*|statsheet\.com\/.*\/teams\/.*\/.*|statsheet\.com\/tools\/chartlets\?chart=.*|.*\.status\.net\/notice\/.*|identi\.ca\/notice\/.*|brainbird\.net\/notice\/.*|shitmydadsays\.com\/notice\/.*|www\.studivz\.net\/Profile\/.*|www\.studivz\.net\/l\/.*|www\.studivz\.net\/Groups\/Overview\/.*|www\.studivz\.net\/Gadgets\/Info\/.*|www\.studivz\.net\/Gadgets\/Install\/.*|www\.studivz\.net\/.*|www\.meinvz\.net\/Profile\/.*|www\.meinvz\.net\/l\/.*|www\.meinvz\.net\/Groups\/Overview\/.*|www\.meinvz\.net\/Gadgets\/Info\/.*|www\.meinvz\.net\/Gadgets\/Install\/.*|www\.meinvz\.net\/.*|www\.schuelervz\.net\/Profile\/.*|www\.schuelervz\.net\/l\/.*|www\.schuelervz\.net\/Groups\/Overview\/.*|www\.schuelervz\.net\/Gadgets\/Info\/.*|www\.schuelervz\.net\/Gadgets\/Install\/.*|www\.schuelervz\.net\/.*|myloc\.me\/.*|pastebin\.com\/.*|pastie\.org\/.*|www\.pastie\.org\/.*|redux\.com\/stream\/item\/.*\/.*|redux\.com\/f\/.*\/.*|www\.redux\.com\/stream\/item\/.*\/.*|www\.redux\.com\/f\/.*\/.*|cl\.ly\/.*|cl\.ly\/.*\/content|speakerdeck\.com\/u\/.*\/p\/.*|www\.kiva\.org\/lend\/.*|www\.timetoast\.com\/timelines\/.*|storify\.com\/.*\/.*|.*meetup\.com\/.*|meetu\.ps\/.*|www\.dailymile\.com\/people\/.*\/entries\/.*|.*\.kinomap\.com\/.*|www\.metacdn\.com\/api\/users\/.*\/content\/.*|www\.metacdn\.com\/api\/users\/.*\/media\/.*|prezi\.com\/.*\/.*|.*\.uservoice\.com\/.*\/suggestions\/.*|formspring\.me\/.*|www\.formspring\.me\/.*|formspring\.me\/.*\/q\/.*|www\.formspring\.me\/.*\/q\/.*|twitlonger\.com\/show\/.*|www\.twitlonger\.com\/show\/.*|tl\.gd\/.*|www\.qwiki\.com\/q\/.*|crocodoc\.com\/.*|.*\.crocodoc\.com\/.*|.*youtube\.com\/watch.*|.*\.youtube\.com\/v\/.*|youtu\.be\/.*|.*\.youtube\.com\/user\/.*|.*\.youtube\.com\/.*#.*\/.*|m\.youtube\.com\/watch.*|m\.youtube\.com\/index.*|.*\.youtube\.com\/profile.*|.*\.youtube\.com\/view_play_list.*|.*\.youtube\.com\/playlist.*|www\.vevo\.com\/watch\/.*|www\.vevo\.com\/video\/.*|.*justin\.tv\/.*|.*justin\.tv\/.*\/b\/.*|.*justin\.tv\/.*\/w\/.*|www\.ustream\.tv\/recorded\/.*|www\.ustream\.tv\/channel\/.*|www\.ustream\.tv\/.*|qik\.com\/video\/.*|qik\.com\/.*|qik\.ly\/.*|.*revision3\.com\/.*|.*\.dailymotion\.com\/video\/.*|.*\.dailymotion\.com\/.*\/video\/.*|collegehumor\.com\/video:.*|collegehumor\.com\/video\/.*|www\.collegehumor\.com\/video:.*|www\.collegehumor\.com\/video\/.*|.*twitvid\.com\/.*|www\.break\.com\/.*\/.*|vids\.myspace\.com\/index\.cfm\?fuseaction=vids\.individual&videoid.*|www\.myspace\.com\/index\.cfm\?fuseaction=.*&videoid.*|www\.metacafe\.com\/watch\/.*|www\.metacafe\.com\/w\/.*|blip\.tv\/file\/.*|.*\.blip\.tv\/file\/.*|video\.google\.com\/videoplay\?.*|.*revver\.com\/video\/.*|video\.yahoo\.com\/watch\/.*\/.*|video\.yahoo\.com\/network\/.*|.*viddler\.com\/explore\/.*\/videos\/.*|liveleak\.com\/view\?.*|www\.liveleak\.com\/view\?.*|animoto\.com\/play\/.*|dotsub\.com\/view\/.*|www\.overstream\.net\/view\.php\?oid=.*|www\.livestream\.com\/.*|www\.worldstarhiphop\.com\/videos\/video.*\.php\?v=.*|worldstarhiphop\.com\/videos\/video.*\.php\?v=.*|teachertube\.com\/viewVideo\.php.*|www\.teachertube\.com\/viewVideo\.php.*|www1\.teachertube\.com\/viewVideo\.php.*|www2\.teachertube\.com\/viewVideo\.php.*|bambuser\.com\/v\/.*|bambuser\.com\/channel\/.*|bambuser\.com\/channel\/.*\/broadcast\/.*|www\.schooltube\.com\/video\/.*\/.*|bigthink\.com\/ideas\/.*|bigthink\.com\/series\/.*|sendables\.jibjab\.com\/view\/.*|sendables\.jibjab\.com\/originals\/.*|www\.xtranormal\.com\/watch\/.*|socialcam\.com\/v\/.*|www\.socialcam\.com\/v\/.*|dipdive\.com\/media\/.*|dipdive\.com\/member\/.*\/media\/.*|dipdive\.com\/v\/.*|.*\.dipdive\.com\/media\/.*|.*\.dipdive\.com\/v\/.*|v\.youku\.com\/v_show\/.*\.html|v\.youku\.com\/v_playlist\/.*\.html|www\.snotr\.com\/video\/.*|snotr\.com\/video\/.*|video\.jardenberg\.se\/.*|www\.clipfish\.de\/.*\/.*\/video\/.*|www\.myvideo\.de\/watch\/.*|www\.whitehouse\.gov\/photos-and-video\/video\/.*|www\.whitehouse\.gov\/video\/.*|wh\.gov\/photos-and-video\/video\/.*|wh\.gov\/video\/.*|www\.hulu\.com\/watch.*|www\.hulu\.com\/w\/.*|hulu\.com\/watch.*|hulu\.com\/w\/.*|.*crackle\.com\/c\/.*|www\.fancast\.com\/.*\/videos|www\.funnyordie\.com\/videos\/.*|www\.funnyordie\.com\/m\/.*|funnyordie\.com\/videos\/.*|funnyordie\.com\/m\/.*|www\.vimeo\.com\/groups\/.*\/videos\/.*|www\.vimeo\.com\/.*|vimeo\.com\/groups\/.*\/videos\/.*|vimeo\.com\/.*|vimeo\.com\/m\/#\/.*|www\.ted\.com\/talks\/.*\.html.*|www\.ted\.com\/talks\/lang\/.*\/.*\.html.*|www\.ted\.com\/index\.php\/talks\/.*\.html.*|www\.ted\.com\/index\.php\/talks\/lang\/.*\/.*\.html.*|.*nfb\.ca\/film\/.*|www\.thedailyshow\.com\/watch\/.*|www\.thedailyshow\.com\/full-episodes\/.*|www\.thedailyshow\.com\/collection\/.*\/.*\/.*|movies\.yahoo\.com\/movie\/.*\/video\/.*|movies\.yahoo\.com\/movie\/.*\/trailer|movies\.yahoo\.com\/movie\/.*\/video|www\.colbertnation\.com\/the-colbert-report-collections\/.*|www\.colbertnation\.com\/full-episodes\/.*|www\.colbertnation\.com\/the-colbert-report-videos\/.*|www\.comedycentral\.com\/videos\/index\.jhtml\?.*|www\.theonion\.com\/video\/.*|theonion\.com\/video\/.*|wordpress\.tv\/.*\/.*\/.*\/.*\/|www\.traileraddict\.com\/trailer\/.*|www\.traileraddict\.com\/clip\/.*|www\.traileraddict\.com\/poster\/.*|www\.escapistmagazine\.com\/videos\/.*|www\.trailerspy\.com\/trailer\/.*\/.*|www\.trailerspy\.com\/trailer\/.*|www\.trailerspy\.com\/view_video\.php.*|www\.atom\.com\/.*\/.*\/|fora\.tv\/.*\/.*\/.*\/.*|www\.spike\.com\/video\/.*|www\.gametrailers\.com\/video\/.*|gametrailers\.com\/video\/.*|www\.koldcast\.tv\/video\/.*|www\.koldcast\.tv\/#video:.*|techcrunch\.tv\/watch.*|techcrunch\.tv\/.*\/watch.*|mixergy\.com\/.*|video\.pbs\.org\/video\/.*|www\.zapiks\.com\/.*|tv\.digg\.com\/diggnation\/.*|tv\.digg\.com\/diggreel\/.*|tv\.digg\.com\/diggdialogg\/.*|www\.trutv\.com\/video\/.*|www\.nzonscreen\.com\/title\/.*|nzonscreen\.com\/title\/.*|app\.wistia\.com\/embed\/medias\/.*|hungrynation\.tv\/.*\/episode\/.*|www\.hungrynation\.tv\/.*\/episode\/.*|hungrynation\.tv\/episode\/.*|www\.hungrynation\.tv\/episode\/.*|indymogul\.com\/.*\/episode\/.*|www\.indymogul\.com\/.*\/episode\/.*|indymogul\.com\/episode\/.*|www\.indymogul\.com\/episode\/.*|channelfrederator\.com\/.*\/episode\/.*|www\.channelfrederator\.com\/.*\/episode\/.*|channelfrederator\.com\/episode\/.*|www\.channelfrederator\.com\/episode\/.*|tmiweekly\.com\/.*\/episode\/.*|www\.tmiweekly\.com\/.*\/episode\/.*|tmiweekly\.com\/episode\/.*|www\.tmiweekly\.com\/episode\/.*|99dollarmusicvideos\.com\/.*\/episode\/.*|www\.99dollarmusicvideos\.com\/.*\/episode\/.*|99dollarmusicvideos\.com\/episode\/.*|www\.99dollarmusicvideos\.com\/episode\/.*|ultrakawaii\.com\/.*\/episode\/.*|www\.ultrakawaii\.com\/.*\/episode\/.*|ultrakawaii\.com\/episode\/.*|www\.ultrakawaii\.com\/episode\/.*|barelypolitical\.com\/.*\/episode\/.*|www\.barelypolitical\.com\/.*\/episode\/.*|barelypolitical\.com\/episode\/.*|www\.barelypolitical\.com\/episode\/.*|barelydigital\.com\/.*\/episode\/.*|www\.barelydigital\.com\/.*\/episode\/.*|barelydigital\.com\/episode\/.*|www\.barelydigital\.com\/episode\/.*|threadbanger\.com\/.*\/episode\/.*|www\.threadbanger\.com\/.*\/episode\/.*|threadbanger\.com\/episode\/.*|www\.threadbanger\.com\/episode\/.*|vodcars\.com\/.*\/episode\/.*|www\.vodcars\.com\/.*\/episode\/.*|vodcars\.com\/episode\/.*|www\.vodcars\.com\/episode\/.*|confreaks\.net\/videos\/.*|www\.confreaks\.net\/videos\/.*|video\.allthingsd\.com\/video\/.*|videos\.nymag\.com\/.*|aniboom\.com\/animation-video\/.*|www\.aniboom\.com\/animation-video\/.*|clipshack\.com\/Clip\.aspx\?.*|www\.clipshack\.com\/Clip\.aspx\?.*|grindtv\.com\/.*\/video\/.*|www\.grindtv\.com\/.*\/video\/.*|ifood\.tv\/recipe\/.*|ifood\.tv\/video\/.*|ifood\.tv\/channel\/user\/.*|www\.ifood\.tv\/recipe\/.*|www\.ifood\.tv\/video\/.*|www\.ifood\.tv\/channel\/user\/.*|logotv\.com\/video\/.*|www\.logotv\.com\/video\/.*|lonelyplanet\.com\/Clip\.aspx\?.*|www\.lonelyplanet\.com\/Clip\.aspx\?.*|streetfire\.net\/video\/.*\.htm.*|www\.streetfire\.net\/video\/.*\.htm.*|trooptube\.tv\/videos\/.*|www\.trooptube\.tv\/videos\/.*|sciencestage\.com\/v\/.*\.html|sciencestage\.com\/a\/.*\.html|www\.sciencestage\.com\/v\/.*\.html|www\.sciencestage\.com\/a\/.*\.html|www\.godtube\.com\/featured\/video\/.*|godtube\.com\/featured\/video\/.*|www\.godtube\.com\/watch\/.*|godtube\.com\/watch\/.*|www\.tangle\.com\/view_video.*|mediamatters\.org\/mmtv\/.*|www\.clikthrough\.com\/theater\/video\/.*|espn\.go\.com\/video\/clip.*|espn\.go\.com\/.*\/story.*|abcnews\.com\/.*\/video\/.*|abcnews\.com\/video\/playerIndex.*|abcnews\.go\.com\/.*\/video\/.*|abcnews\.go\.com\/video\/playerIndex.*|washingtonpost\.com\/wp-dyn\/.*\/video\/.*\/.*\/.*\/.*|www\.washingtonpost\.com\/wp-dyn\/.*\/video\/.*\/.*\/.*\/.*|www\.boston\.com\/video.*|boston\.com\/video.*|www\.facebook\.com\/photo\.php.*|www\.facebook\.com\/video\/video\.php.*|www\.facebook\.com\/v\/.*|www\.facebook\.com\/.*\/videos\/.*|cnbc\.com\/id\/.*\?.*video.*|www\.cnbc\.com\/id\/.*\?.*video.*|cnbc\.com\/id\/.*\/play\/1\/video\/.*|www\.cnbc\.com\/id\/.*\/play\/1\/video\/.*|cbsnews\.com\/video\/watch\/.*|www\.google\.com\/buzz\/.*\/.*\/.*|www\.google\.com\/buzz\/.*|www\.google\.com\/profiles\/.*|google\.com\/buzz\/.*\/.*\/.*|google\.com\/buzz\/.*|google\.com\/profiles\/.*|www\.cnn\.com\/video\/.*|edition\.cnn\.com\/video\/.*|money\.cnn\.com\/video\/.*|today\.msnbc\.msn\.com\/id\/.*\/vp\/.*|www\.msnbc\.msn\.com\/id\/.*\/vp\/.*|www\.msnbc\.msn\.com\/id\/.*\/ns\/.*|today\.msnbc\.msn\.com\/id\/.*\/ns\/.*|multimedia\.foxsports\.com\/m\/video\/.*\/.*|msn\.foxsports\.com\/video.*|www\.globalpost\.com\/video\/.*|www\.globalpost\.com\/dispatch\/.*|guardian\.co\.uk\/.*\/video\/.*\/.*\/.*\/.*|www\.guardian\.co\.uk\/.*\/video\/.*\/.*\/.*\/.*|bravotv\.com\/.*\/.*\/videos\/.*|www\.bravotv\.com\/.*\/.*\/videos\/.*|video\.nationalgeographic\.com\/.*\/.*\/.*\.html|dsc\.discovery\.com\/videos\/.*|animal\.discovery\.com\/videos\/.*|health\.discovery\.com\/videos\/.*|investigation\.discovery\.com\/videos\/.*|military\.discovery\.com\/videos\/.*|planetgreen\.discovery\.com\/videos\/.*|science\.discovery\.com\/videos\/.*|tlc\.discovery\.com\/videos\/.*|video\.forbes\.com\/fvn\/.*|vine\.co\/v\/.*|www\.vine\.co\/v\/.*|video\.foxnews\.com\/v\/.*|thinglink\.com\/.*|www\.thinglink\.com\/.*|nbcnews\.com\/.*|www\.nbcnews\.com\/.*|itunes\.apple\.com\/.*)))|((http:\/\/(link\.brightcove\.com\/services\/player\/bcpid.*|bcove\.me\/.*|players\.brightcove\.net\/.*))|(https:\/\/(players\.brightcove\.net\/.*)))/i},function(t,e){window.app=window.app||{},$.extend(window.app,{load_vidyard_players:function(t,e,n){var r,i;"function"==typeof t?(i=t,r=$("body")):(r=$(t||"body"),i=n||$.noop);var o=r.find(".vidyard_container[data-vidyard-id]");e||(o=o.filter(":visible")),o.each((function(){var t=$(this),e=t.attr("data-vidyard-id"),n=$("#vidyard_"+e+":first");if(n.length)t.replaceWith(n.remove()),i();else{t.attr("id","vidyard_"+e).removeAttr("data-vidyard-id");var r=MOBILE_DEVICE||window.RG_EMBEDDED_PAGE?"?width="+t.parent().width():"";$.getScript("//embed.vidyard.com/embed/"+e+"/iframe/"+r,(function(){t.removeClass("loading_with_indicator"),i()}))}}))}})},function(t,e,n){"use strict";n.r(e);n(530);angular.module("genius").directive("embedlyPlayer",["$sce","$immediate","$q","Tracking","PlayerJS",function(t,e,n,r,i){return{restrict:"E",templateUrl:"embedly_player.html",transclude:!0,scope:{yieldsApi:"&",yieldsState:"&",media:"<",controls:"<?",playerClass:"@",preload:"<",allowFullScreen:"<?"},link:function(o,a){var s,c,l,u=function(){l.has_errored=!0},d=function(){var t=i.Player(a.find("iframe")[0]);t.on("ready",(function(){t.setVolume(100),s.resolve(t),o.$apply((function(){l.is_loaded=!0,l.is_loading=!1}))})),t.on("play",(function(){r.track("play_song_media",{playing:!0,first_interaction:!1}),o.$apply((function(){l.is_playing=!0}))})),t.on("pause",(function(){o.$apply((function(){l.is_playing=!1}))})),t.on("ended",(function(){o.$apply((function(){l.is_playing=!1}))})),t.on("timeupdate",_.throttle((function(t){o.$apply((function(){l.percentage=t.seconds/t.duration,l.time_remaining=1e3*(t.duration-t.seconds)}))}),1e3)),t.on("error",(function(){o.$apply(u)}))};o.load_media=function(){l.is_loading||l.is_loaded||(r.track("play_song_media",{playing:!1,first_interaction:!0}),l.is_loading=!0,o.is_initialized=!0,e(d,!1))};var p={load_media:o.load_media,playpause:function(){l.is_playing?this.pause():this.play()},play:function(){c.then((function(t){t.play()}))},pause:function(){c.then((function(t){t.pause()}))},seek_to:function(t){c.then((function(e){e.getDuration((function(n){e.setCurrentTime(n*t)}))}))}};o.yieldsApi({api:p});var f={youtube:{youtube_controls:o.controls?2:0,youtube_modestbranding:1,youtube_showinfo:0,youtube_rel:0,youtube_iv_load_policy:3,youtube_start:o.media?o.media.start:void 0,youtube_fs:o.allowFullScreen?1:0}}[o.media?o.media.provider:void 0],h=function t(e){var r=_.assign({},f,e);return n.resolve($.embedly.oembed(o.media.url,{query:r})).then((function(e){var i=e[0];return function(t){return"youtube"===o.media.provider&&!t.author_name}(i)||function(t){return t.invalid||"error"===t.type||"link"===t.type}(i)?r.force?n.reject(Error("No embed found")):t({force:!0}):i}))};o.$watch("state.is_playing",(function(t){t&&(o.state.has_played=!0)})),o.$watch("media.url",(function(e){o.is_initialized=!1,s=n.defer(),c=s.promise,l=o.state={},o.yieldsState({state:l}),e?(o.media_html=null,h().then((function(e){l.placeholder=e.thumbnail_url,l.is_ready=!0,o.media_html=t.trustAsHtml(e.html),o.preload&&o.load_media()})).catch(u)):l.is_ready=!0})),o.$on("$destroy",(function(){o.yieldsState({state:void 0})}))}}}])},function(t,e){!function(t,e){function n(t){return function(){var e={method:t},n=Array.prototype.slice.call(arguments);/^get/.test(t)?(r.assert(n.length>0,"Get methods require a callback."),n.unshift(e)):(/^set/.test(t)&&(r.assert(0!==n.length,"Set methods require a value."),e.value=n[0]),n=[e]),this.send.apply(this,n)}}var r={DEBUG:!1,VERSION:"0.0.10",CONTEXT:"player.js"};r.POST_MESSAGE=!!t.postMessage,r.ENABLE_CONTEXT=!1,r.origin=function(e){return"//"===e.substr(0,2)&&(e=t.location.protocol+e),e.split("/").slice(0,3).join("/")},r.addEvent=function(t,e,n){t&&(t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent?t.attachEvent("on"+e,n):t["on"+e]=n)},r.log=function(){r.log.history=r.log.history||[],r.log.history.push(arguments),t.console&&r.DEBUG&&t.console.log(Array.prototype.slice.call(arguments))},r.isString=function(t){return"[object String]"===Object.prototype.toString.call(t)},r.isObject=function(t){return"[object Object]"===Object.prototype.toString.call(t)},r.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)},r.isNone=function(t){return null==t},r.has=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.indexOf=function(t,e){if(null==t)return-1;var n=0,r=t.length;if(Array.prototype.IndexOf&&t.indexOf===Array.prototype.IndexOf)return t.indexOf(e);for(;r>n;n++)if(t[n]===e)return n;return-1},r.assert=function(t,e){if(!t)throw e||"Player.js Assert Failed"},r.Keeper=function(){this.init()},r.Keeper.prototype.init=function(){this.data={}},r.Keeper.prototype.getUUID=function(){return"listener-xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)}))},r.Keeper.prototype.has=function(t,e){if(!this.data.hasOwnProperty(t))return!1;if(r.isNone(e))return!0;for(var n=this.data[t],i=0;i<n.length;i++)if(n[i].id===e)return!0;return!1},r.Keeper.prototype.add=function(t,e,n,r,i){var o={id:t,event:e,cb:n,ctx:r,one:i};this.has(e)?this.data[e].push(o):this.data[e]=[o]},r.Keeper.prototype.execute=function(t,e,n,i){if(!this.has(t,e))return!1;for(var o=[],a=[],s=0;s<this.data[t].length;s++){var c=this.data[t][s];r.isNone(e)||!r.isNone(e)&&c.id===e?(a.push({cb:c.cb,ctx:c.ctx?c.ctx:i,data:n}),!1===c.one&&o.push(c)):o.push(c)}0===o.length?delete this.data[t]:this.data[t]=o;for(var l=0;l<a.length;l++){var u=a[l];u.cb.call(u.ctx,u.data)}},r.Keeper.prototype.on=function(t,e,n,r){this.add(t,e,n,r,!1)},r.Keeper.prototype.one=function(t,e,n,r){this.add(t,e,n,r,!0)},r.Keeper.prototype.off=function(t,e){var n=[];if(!this.data.hasOwnProperty(t))return n;for(var i=[],o=0;o<this.data[t].length;o++){var a=this.data[t][o];r.isNone(e)||a.cb===e?r.isNone(a.id)||n.push(a.id):i.push(a)}return 0===i.length?delete this.data[t]:this.data[t]=i,n},r.Player=function(t,e){return this instanceof r.Player?void this.init(t,e):new r.Player(t,e)},r.EVENTS={READY:"ready",PLAY:"play",PAUSE:"pause",ENDED:"ended",TIMEUPDATE:"timeupdate",PROGRESS:"progress",ERROR:"error"},r.EVENTS.all=function(){var t=[];for(var e in r.EVENTS)r.has(r.EVENTS,e)&&r.isString(r.EVENTS[e])&&t.push(r.EVENTS[e]);return t},r.METHODS={PLAY:"play",PAUSE:"pause",GETPAUSED:"getPaused",MUTE:"mute",UNMUTE:"unmute",GETMUTED:"getMuted",SETVOLUME:"setVolume",GETVOLUME:"getVolume",GETDURATION:"getDuration",SETCURRENTTIME:"setCurrentTime",GETCURRENTTIME:"getCurrentTime",SETLOOP:"setLoop",GETLOOP:"getLoop",REMOVEEVENTLISTENER:"removeEventListener",ADDEVENTLISTENER:"addEventListener"},r.METHODS.all=function(){var t=[];for(var e in r.METHODS)r.has(r.METHODS,e)&&r.isString(r.METHODS[e])&&t.push(r.METHODS[e]);return t},r.READIED=[],r.Player.prototype.init=function(n){var i=this;r.isString(n)&&(n=e.getElementById(n)),this.elem=n,this.origin=r.origin(n.src),this.keeper=new r.Keeper,this.isReady=!1,this.queue=[],this.events=r.EVENTS.all(),this.methods=r.METHODS.all(),r.POST_MESSAGE?r.addEvent(t,"message",(function(t){i.receive(t)})):r.log("Post Message is not Available."),r.indexOf(r.READIED,n.src)>-1?i.loaded=!0:this.elem.onload=function(){i.loaded=!0}},r.Player.prototype.send=function(t,e,n){if(t.context=r.CONTEXT,t.version=r.VERSION,e){var i=this.keeper.getUUID();t.listener=i,this.keeper.one(i,t.method,e,n)}return this.isReady||"ready"===t.value?(r.log("Player.send",t,this.origin),!0===this.loaded&&this.elem.contentWindow.postMessage(JSON.stringify(t),this.origin),!0):(r.log("Player.queue",t),this.queue.push(t),!1)},r.Player.prototype.receive=function(t){if(r.log("Player.receive",t),t.origin!==this.origin)return!1;var e;try{e=JSON.parse(t.data)}catch(t){return!1}return(!r.ENABLE_CONTEXT||e.context===r.CONTEXT)&&("ready"===e.event&&e.value&&e.value.src===this.elem.src&&this.ready(e),void(this.keeper.has(e.event,e.listener)&&this.keeper.execute(e.event,e.listener,e.value,this)))},r.Player.prototype.ready=function(t){if(!0===this.isReady)return!1;t.value.events&&(this.events=t.value.events),t.value.methods&&(this.methods=t.value.methods),this.isReady=!0,this.loaded=!0;for(var e=0;e<this.queue.length;e++){var n=this.queue[e];r.log("Player.dequeue",n),"ready"===t.event&&this.keeper.execute(n.event,n.listener,!0,this),this.send(n)}this.queue=[]},r.Player.prototype.on=function(t,e,n){var r=this.keeper.getUUID();return"ready"===t?this.keeper.one(r,t,e,n):this.keeper.on(r,t,e,n),this.send({method:"addEventListener",value:t,listener:r}),!0},r.Player.prototype.off=function(t,e){var n=this.keeper.off(t,e);if(r.log("Player.off",n),n.length>0)for(var i in n)return this.send({method:"removeEventListener",value:t,listener:n[i]}),!0;return!1},r.Player.prototype.supports=function(t,e){r.assert(r.indexOf(["method","event"],t)>-1,'evtOrMethod needs to be either "event" or "method" got '+t),e=r.isArray(e)?e:[e];for(var n="event"===t?this.events:this.methods,i=0;i<e.length;i++)if(-1===r.indexOf(n,e[i]))return!1;return!0};for(var i=0,o=r.METHODS.all().length;o>i;i++){var a=r.METHODS.all()[i];r.Player.prototype.hasOwnProperty(a)||(r.Player.prototype[a]=n(a))}t.playerjs=r,r.addEvent(t,"message",(function(t){var e;try{e=JSON.parse(t.data)}catch(t){return!1}return(!r.ENABLE_CONTEXT||e.context===r.CONTEXT)&&void("ready"===e.event&&e.value&&e.value.src&&r.READIED.push(e.value.src))})),r.Receiver=function(t,e){this.init(t,e)},r.Receiver.prototype.init=function(n,i){var o=this;this.isReady=!1,this.origin=r.origin(e.referrer),this.methods={},this.supported={events:n||r.EVENTS.all(),methods:i||r.METHODS.all()},this.eventListeners={},this.reject=!(t.self!==t.top&&r.POST_MESSAGE),this.reject||r.addEvent(t,"message",(function(t){o.receive(t)}))},r.Receiver.prototype.receive=function(e){if(e.origin!==this.origin)return!1;var n={};if(r.isObject(e.data))n=e.data;else try{n=t.JSON.parse(e.data)}catch(t){r.log("JSON Parse Error",t)}if(r.log("Receiver.receive",e,n),!n.method)return!1;if(r.ENABLE_CONTEXT&&n.context!==r.CONTEXT)return!1;if(-1===r.indexOf(r.METHODS.all(),n.method))return this.emit("error",{code:2,msg:'Invalid Method "'+n.method+'"'}),!1;var i=r.isNone(n.listener)?null:n.listener;if("addEventListener"===n.method)this.eventListeners.hasOwnProperty(n.value)?-1===r.indexOf(this.eventListeners[n.value],i)&&this.eventListeners[n.value].push(i):this.eventListeners[n.value]=[i],"ready"===n.value&&this.isReady&&this.ready();else if("removeEventListener"===n.method){if(this.eventListeners.hasOwnProperty(n.value)){var o=r.indexOf(this.eventListeners[n.value],i);o>-1&&this.eventListeners[n.value].splice(o,1),0===this.eventListeners[n.value].length&&delete this.eventListeners[n.value]}}else this.get(n.method,n.value,i)},r.Receiver.prototype.get=function(t,e,n){var r=this;if(!this.methods.hasOwnProperty(t))return this.emit("error",{code:3,msg:'Method Not Supported"'+t+'"'}),!1;var i=this.methods[t];if("get"===t.substr(0,3)){i.call(this,(function(e){r.send(t,e,n)}))}else i.call(this,e)},r.Receiver.prototype.on=function(t,e){this.methods[t]=e},r.Receiver.prototype.send=function(e,n,i){if(r.log("Receiver.send",e,n,i),this.reject)return r.log("Receiver.send.reject",e,n,i),!1;var o={context:r.CONTEXT,version:r.VERSION,event:e};r.isNone(n)||(o.value=n),r.isNone(i)||(o.listener=i);var a=JSON.stringify(o);t.parent.postMessage(a,""===this.origin?"*":this.origin)},r.Receiver.prototype.emit=function(t,e){if(!this.eventListeners.hasOwnProperty(t))return!1;r.log("Instance.emit",t,e,this.eventListeners[t]);for(var n=0;n<this.eventListeners[t].length;n++){var i=this.eventListeners[t][n];this.send(t,e,i)}return!0},r.Receiver.prototype.ready=function(){r.log("Receiver.ready"),this.isReady=!0;var e={src:t.location.toString(),events:this.supported.events,methods:this.supported.methods};this.emit("ready",e)||this.send("ready",e)},r.HTML5Adapter=function(t){return this instanceof r.HTML5Adapter?void this.init(t):new r.HTML5Adapter(t)},r.HTML5Adapter.prototype.init=function(t){r.assert(t,"playerjs.VideoJSReceiver requires a video element");var e=this.receiver=new r.Receiver;t.addEventListener("playing",(function(){e.emit("play")})),t.addEventListener("pause",(function(){e.emit("pause")})),t.addEventListener("ended",(function(){e.emit("ended")})),t.addEventListener("timeupdate",(function(){e.emit("timeupdate",{seconds:t.currentTime,duration:t.duration})})),t.addEventListener("progress",(function(){e.emit("buffered",{percent:t.buffered.length})})),e.on("play",(function(){t.play()})),e.on("pause",(function(){t.pause()})),e.on("getPaused",(function(e){e(t.paused)})),e.on("getCurrentTime",(function(e){e(t.currentTime)})),e.on("setCurrentTime",(function(e){t.currentTime=e})),e.on("getDuration",(function(e){e(t.duration)})),e.on("getVolume",(function(e){e(100*t.volume)})),e.on("setVolume",(function(e){t.volume=e/100})),e.on("mute",(function(){t.muted=!0})),e.on("unmute",(function(){t.muted=!1})),e.on("getMuted",(function(e){e(t.muted)})),e.on("getLoop",(function(e){e(t.loop)})),e.on("setLoop",(function(e){t.loop=e}))},r.HTML5Adapter.prototype.ready=function(){this.receiver.ready()},r.JWPlayerAdapter=function(t){return this instanceof r.JWPlayerAdapter?void this.init(t):new r.JWPlayerAdapter(t)},r.JWPlayerAdapter.prototype.init=function(t){r.assert(t,"playerjs.JWPlayerAdapter requires a player object");var e=this.receiver=new r.Receiver;this.looped=!1,t.onPause((function(){e.emit("pause")})),t.onPlay((function(){e.emit("play")})),t.onTime((function(t){var n=t.position,r=t.duration;if(!n||!r)return!1;var i={seconds:n,duration:r};e.emit("timeupdate",i)}));var n=this;t.onComplete((function(){!0===n.looped?t.seek(0):e.emit("ended")})),t.onError((function(){e.emit("error")})),e.on("play",(function(){t.play(!0)})),e.on("pause",(function(){t.pause(!0)})),e.on("getPaused",(function(e){e("PLAYING"!==t.getState())})),e.on("getCurrentTime",(function(e){e(t.getPosition())})),e.on("setCurrentTime",(function(e){t.seek(e)})),e.on("getDuration",(function(e){e(t.getDuration())})),e.on("getVolume",(function(e){e(t.getVolume())})),e.on("setVolume",(function(e){t.setVolume(e)})),e.on("mute",(function(){t.setMute(!0)})),e.on("unmute",(function(){t.setMute(!1)})),e.on("getMuted",(function(e){e(!0===t.getMute())})),e.on("getLoop",(function(t){t(this.looped)}),this),e.on("setLoop",(function(t){this.looped=t}),this)},r.JWPlayerAdapter.prototype.ready=function(){this.receiver.ready()},r.MockAdapter=function(){return this instanceof r.MockAdapter?void this.init():new r.MockAdapter},r.MockAdapter.prototype.init=function(){var t={duration:20,currentTime:0,interval:null,timeupdate:function(){},volume:100,mute:!1,playing:!1,loop:!1,play:function(){t.interval=setInterval((function(){t.currentTime+=.25,t.timeupdate({seconds:t.currentTime,duration:t.duration})}),250),t.playing=!0},pause:function(){clearInterval(t.interval),t.playing=!1}},e=this.receiver=new r.Receiver;e.on("play",(function(){var e=this;t.play(),this.emit("play"),t.timeupdate=function(t){e.emit("timeupdate",t)}})),e.on("pause",(function(){t.pause(),this.emit("pause")})),e.on("getPaused",(function(e){e(!t.playing)})),e.on("getCurrentTime",(function(e){e(t.currentTime)})),e.on("setCurrentTime",(function(e){t.currentTime=e})),e.on("getDuration",(function(e){e(t.duration)})),e.on("getVolume",(function(e){e(t.volume)})),e.on("setVolume",(function(e){t.volume=e})),e.on("mute",(function(){t.mute=!0})),e.on("unmute",(function(){t.mute=!1})),e.on("getMuted",(function(e){e(t.mute)})),e.on("getLoop",(function(e){e(t.loop)})),e.on("setLoop",(function(e){t.loop=e}))},r.MockAdapter.prototype.ready=function(){this.receiver.ready()},r.SublimeAdapter=function(t){return this instanceof r.SublimeAdapter?void this.init(t):new r.SublimeAdapter(t)},r.SublimeAdapter.prototype.events=[r.EVENTS.READY,r.EVENTS.PLAY,r.EVENTS.PAUSE,r.EVENTS.ENDED,r.EVENTS.TIMEUPDATE,r.EVENTS.ERROR],r.SublimeAdapter.prototype.methods=[r.METHODS.PLAY,r.METHODS.PAUSE,r.METHODS.GETDURATION,r.METHODS.SETCURRENTTIME,r.METHODS.GETCURRENTTIME,r.METHODS.REMOVEEVENTLISTENER,r.METHODS.ADDEVENTLISTENER],r.SublimeAdapter.prototype.init=function(t){r.assert(t,"playerjs.SublimeAdapter requires a player object");var e=this.receiver=new r.Receiver(this.events,this.methods);t.on("pause",(function(){e.emit("pause")})),t.on("play",(function(){e.emit("play")})),t.on("timeUpdate",(function(t,n){var r=t.duration();if(!n||!r)return!1;var i={seconds:n,duration:r};e.emit("timeupdate",i)})),t.on("end",(function(){e.emit("ended")})),e.on("play",(function(){t.play()})),e.on("pause",(function(){t.pause()})),e.on("getCurrentTime",(function(e){e(t.playbackTime())})),e.on("setCurrentTime",(function(e){t.seekTo(e)})),e.on("getDuration",(function(e){e(t.duration())}))},r.SublimeAdapter.prototype.ready=function(){this.receiver.ready()},r.VideoJSAdapter=function(t){return this instanceof r.VideoJSAdapter?void this.init(t):new r.VideoJSAdapter(t)},r.VideoJSAdapter.prototype.init=function(t){r.assert(t,"playerjs.VideoJSReceiver requires a player object");var e=this.receiver=new r.Receiver;t.on("pause",(function(){e.emit("pause")})),t.on("play",(function(){e.emit("play")})),t.on("timeupdate",(function(){var n=t.currentTime(),r=t.duration();if(!n||!r)return!1;var i={seconds:n,duration:r};e.emit("timeupdate",i)})),t.on("ended",(function(){e.emit("ended")})),t.on("error",(function(){e.emit("error")})),e.on("play",(function(){t.play()})),e.on("pause",(function(){t.pause()})),e.on("getPaused",(function(e){e(t.paused())})),e.on("getCurrentTime",(function(e){e(t.currentTime())})),e.on("setCurrentTime",(function(e){t.currentTime(e)})),e.on("getDuration",(function(e){e(t.duration())})),e.on("getVolume",(function(e){e(100*t.volume())})),e.on("setVolume",(function(e){t.volume(e/100)})),e.on("mute",(function(){t.volume(0)})),e.on("unmute",(function(){t.volume(1)})),e.on("getMuted",(function(e){e(0===t.volume())})),e.on("getLoop",(function(e){e(t.loop())})),e.on("setLoop",(function(e){t.loop(e)}))},r.VideoJSAdapter.prototype.ready=function(){this.receiver.ready()}}(window,document)},function(t,e){angular.module("genius").directive("emptyCopyContent",["$immediate","$window","$document",function(t,e,n){return{link:function(r,i,o){i.on("copy",(function(){var i=r.$eval(o.emptyCopyContent),a=e.getSelection();if(!a.toString()){var s=$("<div>").html(i).css({position:"absolute",height:0,width:0}).appendTo(n.prop("body"));a.removeAllRanges();var c=n[0].createRange();c.selectNodeContents(s[0]),a.addRange(c),t((function(){s.remove()}),!1)}}))}}}])},function(t,e){angular.module("genius").directive("expandableAccordionSection",[function(){return{restrict:"E",scope:{label:"@",expanded:"=",shortcut:"@"},templateUrl:"expandable_accordion_section.html",replace:!0,transclude:!0,link:function(t){t.expand_content=function(){t.expanded=!t.expanded}}}}])},function(t,e){angular.module("genius").directive("expandableList",[function(){return{restrict:"E",scope:{collection:"<",template:"<",limit:"<",label:"@",variants:"<"},templateUrl:function(t,e){return"".concat(e.template,".html")},controllerAs:"ctrl",controller:["$scope",function(t){this.more_to_show=function(){return t.collection.length>t.limit},this.show_more=function(){Reflect.deleteProperty(t,"limit")}}]}}])},function(t,e){angular.module("genius").directive("exportsFormApi",["$immediate",function(t){return{restrct:"A",require:"form",link:function(e,n,r,i){e.$eval(r.exportsFormApi,{api:_.assign(i,{submit:function(){t((function(){i.$commitViewValue(),n.triggerHandler("submit")}),!1)}})})}}}])},function(t,e){angular.module("genius").directive("factTrackSimulator",[function(){return{restrict:"E",templateUrl:"fact_track_simulator.html",scope:{annotations:"<",track_uuid:"<trackUuid",time:"=?",spotify_song:"<song",yields_api:"&yieldsApi",variants:"<",current_annotation_index:"=?currentAnnotationIndex",annotation_clicked:"&annotationClicked",autoplay:"<"},controllerAs:"ctrl",controller:["$scope","SpotifyPlayer","WebAudioPlayer",function(t,e,n){var r=t.spotify_song.track_url?"web_audio":"spotify",i="spotify:track:".concat(t.track_uuid),o={},a=function(){return o[r]};o.spotify=new e((function(e){"spotify"===r&&(t.time=e.position,t.playing=e.is_playing,t.track_uri=e.track_uri)})),t.spotify_song.track_url&&(o.web_audio=new n((function(e){"web_audio"===r&&(t.time=e.position,t.playing=e.is_playing,t.duration=e.duration)}))),this.annotation_percentage=function(){if(!t.current_annotation)return 0;var e=t.current_annotation.timestamp_in_ms,n=t.annotations[t.current_annotation_index+1],r=n?n.timestamp_in_ms:t.duration;return(r-t.time)/(r-e)},this.seek_to=function(t){a().seek(t)},this.seek_to_percentage=function(e){a().seek(Math.round(e*t.duration))},this.toggle_play_pause=function(){t.playing?a().pause():"spotify"===r?o.spotify.play(i):o.web_audio.play(t.spotify_song.track_url)},this.card_clicked=function(){t.annotation_clicked({current_annotation:t.current_annotation})};var s={playback_type:function(){return a().playback_type},playback_label:function(){return a().playback_label},set_playback_options:function(t){var e=t.type;r=e},other_track_playing:function(){},use_current_track:function(){},pause:function(){t.playing&&a().pause()},seek_to:function(t,e){a().seek(t,e)},print_player_log:function(){a().print_log_entries()},download_player_log:function(){a().download_log_entries()}};t.time=0,t.duration=_.get(t.spotify_song,["metadata","duration_ms"],0),t.album=_.get(t.spotify_song,["metadata","album"],{}),t.yields_api({api:s});var c={content_type:"intro",timestamp_in_ms:0};t.$watch("time",(function(){var e=t.annotations.filter((function(e){return e.timestamp_in_ms<=t.time}));t.current_annotation_index=e.length-1,t.current_annotation=t.annotations[t.current_annotation_index]||c}))}]}}])},function(t,e){angular.module("genius").directive("filepickerInput",["Filepicker",function(t){return{link:function(e,n,r){var i=new t({services:"COMPUTER"}),o=e.$eval(r.minWidth);n.on("click",(function(){return n.attr("value",""),e.$eval(r.onFilepickerError,{error:null}),e.$eval(r.onFilepickerProgress,{uploading:!0}),i.pick_and_store().then((function(t){if(o){var i=new Image;i.onload=function(){i.width<o?e.$applyAsync((function(){return e.$eval(r.onFilepickerError,{error:"must be wider than ".concat(o,"px")})})):n.attr("value",t)},i.src=t}else n.attr("value",t)})).catch((function(t){101!==t.code&&e.$eval(r.onFilepickerError,{error:t.toString()})})).finally((function(){return e.$eval(r.onFilepickerProgress,{uploading:null})})),!1}))}}}])},function(t,e){angular.module("genius").directive("flashMessages",(function(){return{restrict:"E",replace:!0,scope:{},templateUrl:"flash_messages.html",controllerAs:"ctrl",controller:["$scope","$sce","Cookies","currentFlashMessages",function(t,e,n,r){var i=n.getObject("flash")||{};_.each(i,(function(t,n){r.push({message:e.trustAsHtml(t),type:n})})),n.remove("flash",{path:"/"}),t.flash_messages=r,this.close_message=function(e){_.pull(t.flash_messages,e)}}]}}))},function(t,e){angular.module("genius").directive("focusOnChange",(function(){return{restrict:"A",link:function(t,e,n){var r=!0;t.$watch(n.focusOnChange,(function(){r?r=!1:e.focus()}))}}}))},function(t,e){angular.module("genius").directive("followButton",["FollowClient","Session","Tracking","Reversible",function(t,e,n,r){var i="object.current_user_metadata.interactions.following";return{restrict:"E",scope:{onUnauthorized:"&",object:"<",type:"@",variants:"<",disabled:"<"},templateUrl:"follow_button.html",link:function(o){var a;o.user_signed_in=e.user_signed_in,o.$watch(i,(function(t){o.following=!!t})),o.label=function(){return o.hoverLabel||(o.following?"Following":"Follow")},o.toggle_following=function(){if(!e.user_signed_in)return o.onUnauthorized();if(!a){a=!0;var s={};s[i]=!o.following;var c=r.modify(o,s);n.track(o.following?"Follow Button":"Unfollow Button"),t.set_following(o.type,o.object.id,!o.following).catch(c).finally((function(){o.hoverLabel=null,a=!1}))}},o.can_follow=function(){return e.has_permission("follow",o.object)}}}}])},function(t,e){angular.module("genius").directive("globalErrorMessage",[function(){return{scope:{},templateUrl:"global_error_message.html",controllerAs:"ctrl",controller:["GlobalErrorBus","$sce",function(t,e){var n=this;t.$on("global_error",(function(t,r){n.message_html=e.trustAsHtml(r)}))}]}}])},function(t,e){angular.module("genius").directive("globalMessage",["$compile","$templateCache","GlobalRefs",function(t,e,n){var r=e.get("global_message.html"),i=n.get_element("global_message");return{scope:!0,restrict:"E",transclude:!0,link:function(e,n,o,a,s){var c=t(r);c(e,(function(t){i.append(t),e.$on("$destroy",(function(){t.remove()}))}),{parentBoundTranscludeFn:s,futureParentElement:i})}}}])},function(t,e){angular.module("genius").directive("handleIntraPageLinks",["ReferentRegistry","ModelRouter","$location",function(t,e,n){return{restrict:"A",link:function(r,i){i.on("click","a",(function(){var i=$(this).attr("data-api_path");if(i){var o=e.lookup(i);if(o&&"referent"===o.type){var a=t.peek(o.id);if(a)return r.$apply((function(){return n.url("/".concat(a.id))})),!1}}}))}}}])},function(t,e){angular.module("genius").directive("handleRoutableLinks",["LinkEvents","SmartRouting",function(t,e){return{restrict:"A",link:function(n,r){r.on("click","a",(function(n){var r=$(n.target).closest("a"),i=r.attr("href");n.isDefaultPrevented()||t.should_open_in_new_window_or_tab(n,r[0])||i&&"#"!==i&&(n.preventDefault(),e.navigate_to_absolute_url(r[0].href))}))}}}])},function(t,e){angular.module("genius").directive("headerMenuItem",[function(){return{restrict:"E",transclude:!0,scope:{name:"@",url:"@"},templateUrl:"header_menu_item.html"}}])},function(t,e){angular.module("genius").directive("hideSongForm",[function(){return{restrict:"E",scope:{song:"<",on_close:"&onClose"},templateUrl:"hide_song_form.html",controllerAs:"ctrl",controller:["$scope","SongClient",function(t,e){this.save=function(n){var r=this;this.saving=!0,e.perform_action(t.song.id,"hide",{viewable_by_roles:n}).then((function(e){_.assign(t.song,e),t.error=null,t.on_close()})).catch((function(e){return t.error=e.message})).finally((function(){return r.saving=!1}))}}]}}])},function(t,e){angular.module("genius").directive("httpMethod",(function(){return{restrict:"A",link:function(t,e,n){var r=!1,i=n.action||n.href,o=n.httpMethod.toUpperCase();e.click((function(){if(!r)return r=!0,$("<form>",{action:i,method:o}).append($("<input>",{type:"hidden",name:"authenticity_token",value:$.cookie("_csrf_token")})).appendTo($("body")).submit(),!1}))}}}))},function(t,e){function n(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){c=!0,a=t},f:function(){try{s||null==n.return||n.return()}finally{if(c)throw a}}}}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}angular.module("genius").directive("inboxLineItem",["Tracking",function(t){for(var e={},r=0,i=[{formation:["targets","actors"],strategies:["user_upvoted_annotation","user_downvoted_annotation","user_accepted_annotation","user_created_annotation","user_deleted_annotation","user_pyonged_annotation","user_pyonged_song","user_pyonged_video","user_pyonged_album","user_pyonged_article","user_upvoted_forum_post","user_downvoted_forum_post","user_upvoted_video","user_downvoted_video","user_hit_pageview_threshold_song","user_created_cover_art","user_edited_cover_art","user_deleted_cover_art","user_locked_album","user_unlocked_album","user_recognized_song","user_upvoted_article","user_downvoted_article","user_moved_discussion","user_followed_discussion","user_followed_song","user_followed_artist","user_hid_song","user_unhid_song","user_cosigned_annotation","user_verified_the_lyrics_of_song","user_unverified_the_lyrics_of_song","user_pinned_discussion","user_unpinned_discussion","user_deleted_discussion","user_deleted_song","user_created_song","user_wrote_article","user_locked_song","user_unlocked_song","user_followed_group","user_followed_web_page","user_marked_complete_song","user_unmarked_complete_song","user_marked_as_high_transcription_priority_song"]},{formation:["targets","context","actors"],strategies:["user_created_question","user_archived_question","user_edited_question","user_pinned_question","user_unpinned_question","user_created_answer","user_deleted_answer","user_edited_answer","user_upvoted_question","user_downvoted_question","user_upvoted_answer","user_downvoted_answer"]},{formation:["targets","actions"],strategies:["user_edited_annotation","user_proposed_an_edit_to_annotation","user_added_a_suggestion_to_song","user_marked_annotation","user_commented_on_album","user_commented_on_article","user_commented_on_video","user_replied_to_annotation"]},{formation:["context","targets","actors"],strategies:["user_upvoted_comment","user_downvoted_comment","user_merged_annotation_edit","user_rejected_annotation_edit","user_integrated_comment","user_archived_comment","user_accepted_comment","user_rejected_comment"]},{formation:["context","actors"],strategies:["user_invited_user"]},{formation:["user_acted_on_user"],strategies:["user_followed_user","user_de_modded_user","user_marked_as_spam_user","user_made_an_editor_out_of_user","user_made_a_moderator_out_of_user","user_mediatored_user","user_transcribered_user"]},{formation:["context_commentable","context"],strategies:["user_mentioned_user","user_mentioned_group"]},{formation:["actors"],strategies:["user_created_identity","user_added_a_photo_user"]},{formation:["merged_artist","context","actors"],strategies:["user_merged_artist"]},{formation:["metadata_changes","targets","actors"],strategies:["user_edited_the_metadata_of_song","user_edited_the_metadata_of_artist","user_edited_the_metadata_of_album"]},{formation:["lyrics_diffs","targets","actors","lyrics_edit_acceptor"],strategies:["user_edited_the_lyrics_of_song"]},{formation:["lyrics_diffs","context","actors"],strategies:["user_created_lyrics_edit","user_accepted_lyrics_edit","user_rejected_lyrics_edit"]},{formation:["lyrics_edit_archive_info","lyrics_diffs","context","actors"],strategies:["user_archived_lyrics_edit"]},{formation:["annotations_with_comments"],strategies:["user_added_a_suggestion_to_annotation"]},{formation:["annotations_with_rejection_comments"],strategies:["user_rejected_annotation"]},{formation:["targets"],strategies:["user_posted_in_discussion"]}];r<i.length;r++){var o,a=i[r],s=n(a.strategies);try{for(s.s();!(o=s.n()).done;){var c=o.value;e[c]=a.formation}}catch(t){s.e(t)}finally{s.f()}}var l={"user.Pyong.song":"inbox_line_items/pyong.html","user.Pyong.annotation":"inbox_line_items/pyong.html","user.Pyong.video":"inbox_line_items/pyong.html","user.Pyong.album":"inbox_line_items/pyong.html","user.Pyong.article":"inbox_line_items/pyong.html"};return{scope:{inbox_name:"<inboxName",line_item:"<object",eager_load_details:"<eagerLoadDetails",variants:"<"},templateUrl:"inbox_line_item.html",controller:["$scope","querystring","InboxClient","AppConfig",function(n,r,i,o){var a=this;this.state={load_details:!1,show_details:!1},n.details_url="/activity_stream/show_details?".concat(r.stringify({id:n.line_item.event_ids})),this.formation=e[n.line_item.strategy],n.$watch("ctrl.state.load_details",(function(t,e){a.formation&&t&&!e&&i.get_line_item(n.inbox_name,n.line_item.event_ids.join(",")).then((function(t){a.line_item_detail=t}))})),n.$watch("eager_load_details",(function(t){a.state.load_details=!(!a.state.load_details&&!t)})),this.message_components=n.line_item.message_components,this.message_template=l[this.message_components.key]||"inbox_line_items/generic.html";var s=_.once((function(){t.track("Line Item Open",{action_name:n.line_item.action_name,inbox_name:n.inbox_name,strategy_name:n.line_item.strategy,bagon:!0,iframe:!a.formation})}));this.toggle_visible=function(){a.state.load_details=!0,a.state.show_details=!a.state.show_details,a.state.show_details&&s(),a.state.show_details&&n.line_item.unread&&(n.line_item.unread=!1,i.mark_read(n.inbox_name,[n.line_item.event_ids]))},this.truncate_line_item_event_count="user_posted_in_discussion"===n.line_item.strategy,this.max_line_item_event_count=o.max_line_item_event_count}],controllerAs:"ctrl"}}])},function(t,e){angular.module("genius").directive("inboxLineItemActionIcon",[function(){return{scope:{action_name:"<actionName"},templateUrl:"inbox_line_item_action_icon.html"}}])},function(t,e){function n(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){c=!0,a=t},f:function(){try{s||null==n.return||n.return()}finally{if(c)throw a}}}}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}angular.module("genius").directive("inboxLineItemDetail",["Bindings","$compile","$templateCache","LyricsEditProposal",function(t,e,r,i){var o=t.resolver({detail:"<lineItemDetail"}),a=t.resolver({formation:"<"});return{restrict:"E",template:"",link:function(t,i,o){var s,c='\n        <div\n          class="inbox_line_item_detail"\n          ng-class="{\'inbox_line_item_detail--dark_background\': $ctrl.use_dark_background}"\n        >\n      ',l=n(a(t,o).formation);try{for(l.s();!(s=l.n()).done;){var u=s.value;c+='<div class="inbox_line_item_detail-section">',c+=r.get("inbox_line_item_detail/".concat(u,".html")),c+="</div>"}}catch(t){l.e(t)}finally{l.f()}c+="</div>",i.append(e(c)(t))},controller:["$scope","$attrs","ReferentRegistry",function(t,e,n){var r=this;o(t,e).assign_to(this),t.$watch("$ctrl.detail",(function(){r.detail.targets=_.map(r.detail.targets,(function(t){return"referent"===t._type?(t.rejection_comments=_.map(t.annotations,"rejection_comment"),n.update_if_present(t)):t})),r.use_dark_background=_.includes(["forum_post","discussion"],_.get(r.detail,"context._type"))||_.includes(["forum_post","discussion"],_.get(r.detail,"target._type")),r.lyrics_diffs=i.lyrics_diffs_for_line_item_detail(r.detail)}))}],controllerAs:"$ctrl"}}])},function(t,e,n){"use strict";n.r(e);n(551);function r(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var r,i,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);a=!0);}catch(t){s=!0,i=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}angular.module("genius").directive("infiniteScroll",["$window","$document","$immediate",function(t,e,n){return{link:function(i,o,a){var s,c=!1,l=a.infiniteScrollLoadTrigger||"scroll",u=$(t),d=document.createElement("div");"intersection"===l&&(d.style.height="1px",o.append(d)),"infiniteScrollDisabled"in a&&i.$watch(a.infiniteScrollDisabled,(function(t){(c=t)||n(f,!1)}));var p=function(){i.$apply((function(){i.$eval(a.infiniteScroll)}))},f=function(t){if(!c){var n=e[0].documentElement.clientHeight;if(t){var r=t.target;r.getBoundingClientRect&&(n=r.getBoundingClientRect().top+r.offsetHeight)}n>=o[0].getBoundingClientRect().top+o[0].offsetHeight&&p()}};"intersection"===l?((s=new IntersectionObserver((function(t){r(t,1)[0].isIntersecting&&p()}),{root:null,rootMargin:"100px",threshold:0})).observe(d),i.$on("$destroy",(function(){return s.unobserve(d)}))):(u.on("scroll",f),u.on("resize",f),o.parents().on("scroll",f),i.$on("$destroy",(function(){return o.parents().off("scroll",f),u.off("scroll",f)}))),a.yieldsOnLoadMore&&i.$eval(a.yieldsOnLoadMore,{callback:function(){return n(f,!1)}})}}}])},function(t,e,n){var r,i,o;i=[n(7)],r=function(t){var e,n,r=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],i="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],o=Array.prototype.slice;if(t.event.fixHooks)for(var a=r.length;a;)t.event.fixHooks[r[--a]]=t.event.mouseHooks;var s=t.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var e=i.length;e;)this.addEventListener(i[--e],c,!1);else this.onmousewheel=c;t.data(this,"mousewheel-line-height",s.getLineHeight(this)),t.data(this,"mousewheel-page-height",s.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var e=i.length;e;)this.removeEventListener(i[--e],c,!1);else this.onmousewheel=null;t.removeData(this,"mousewheel-line-height"),t.removeData(this,"mousewheel-page-height")},getLineHeight:function(e){var n=t(e),r=n["offsetParent"in t.fn?"offsetParent":"parent"]();return r.length||(r=t("body")),parseInt(r.css("fontSize"),10)||parseInt(n.css("fontSize"),10)||16},getPageHeight:function(e){return t(e).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};function c(r){var i=r||window.event,a=o.call(arguments,1),c=0,d=0,p=0,f=0,_=0,h=0;if((r=t.event.fix(i)).type="mousewheel","detail"in i&&(p=-1*i.detail),"wheelDelta"in i&&(p=i.wheelDelta),"wheelDeltaY"in i&&(p=i.wheelDeltaY),"wheelDeltaX"in i&&(d=-1*i.wheelDeltaX),"axis"in i&&i.axis===i.HORIZONTAL_AXIS&&(d=-1*p,p=0),c=0===p?d:p,"deltaY"in i&&(c=p=-1*i.deltaY),"deltaX"in i&&(d=i.deltaX,0===p&&(c=-1*d)),0!==p||0!==d){if(1===i.deltaMode){var m=t.data(this,"mousewheel-line-height");c*=m,p*=m,d*=m}else if(2===i.deltaMode){var g=t.data(this,"mousewheel-page-height");c*=g,p*=g,d*=g}if(f=Math.max(Math.abs(p),Math.abs(d)),(!n||f<n)&&(n=f,u(i,f)&&(n/=40)),u(i,f)&&(c/=40,d/=40,p/=40),c=Math[c>=1?"floor":"ceil"](c/n),d=Math[d>=1?"floor":"ceil"](d/n),p=Math[p>=1?"floor":"ceil"](p/n),s.settings.normalizeOffset&&this.getBoundingClientRect){var v=this.getBoundingClientRect();_=r.clientX-v.left,h=r.clientY-v.top}return r.deltaX=d,r.deltaY=p,r.deltaFactor=n,r.offsetX=_,r.offsetY=h,r.deltaMode=0,a.unshift(r,c,d,p),e&&clearTimeout(e),e=setTimeout(l,200),(t.event.dispatch||t.event.handle).apply(this,a)}}function l(){n=null}function u(t,e){return s.settings.adjustOldDeltas&&"mousewheel"===t.type&&e%120==0}t.fn.extend({mousewheel:function(t){return t?this.bind("mousewheel",t):this.trigger("mousewheel")},unmousewheel:function(t){return this.unbind("mousewheel",t)}})},void 0===(o="function"==typeof r?r.apply(e,i):r)||(t.exports=o)},function(t,e){angular.module("genius").directive("insertableAtCursor",["$window",function(t){return{restrict:"A",link:function(e,n,r){e.$eval(r.insertableAtCursor,{insertFn:function(e){var r=e.before,i=void 0===r?"":r,o=e.after,a=void 0===o?"":o,s=e.default_body,c=void 0===s?"":s,l=e.each_line,u=void 0!==l&&l;_.toArray(n).forEach((function(e){var n,r=pageYOffset,o=e.selectionStart,s=e.selectionEnd,l=e.scrollTop,d=e.value.substring(o,s);n=d&&u?_.map(d.split("\n"),(function(t){return i+t+a})).join("\n"):d?i+d+a:i+c+a,e.value=e.value.substring(0,o)+n+e.value.substring(s,e.value.length),e.focus(),e.selectionStart=o,e.selectionEnd=e.selectionStart+n.length,e.scrollTop=l,t.scrollTo(0,r),$(e).trigger("input")}))}})}}}])},function(t,e,n){"use strict";n.r(e);n(554);angular.module("genius").directive("kb",["$window",function(t){return{restrict:"E",link:function(e,n,r){var i=$(t),o=function(t){return e.$apply((function(){return e.$eval(r.action,{$event:t})})),!1};i.bind("keydown",r.shortcut,o),e.$on("$destroy",(function(){return i.unbind("keydown",o)}))}}}])},function(t,e){(function(){!function(t){function e(e){if("string"==typeof e.data&&(e.data={keys:e.data}),e.data&&e.data.keys&&"string"==typeof e.data.keys){var n=e.handler,r=e.data.keys.toLowerCase().split(" "),i=["text","password","number","email","url","range","date","month","week","time","datetime","datetime-local","search","color","tel"];e.handler=function(o){if(e.data.allowInTextInputField||this===o.target||!(/textarea|select/i.test(o.target.nodeName)||t.inArray(o.target.type,i)>-1||t(o.target).prop("isContentEditable"))){var a=t.hotkeys.specialKeys[o.keyCode],s=o.which>0&&String.fromCharCode(o.which).toLowerCase(),c="",l={};o.altKey&&"alt"!==a&&(c+="alt+"),o.ctrlKey&&"ctrl"!==a&&(c+="ctrl+"),o.metaKey&&!o.ctrlKey&&"meta"!==a&&(c+="meta+"),o.shiftKey&&"shift"!==a&&(c+="shift+"),a&&(l[c+a]=!0),s&&(l[c+s]=!0,l[c+t.hotkeys.shiftNums[s]]=!0,"shift+"===c&&(l[t.hotkeys.shiftNums[s]]=!0));for(var u=0,d=r.length;u<d;u++)if(l[r[u]])return n.apply(this,arguments)}}}}t.hotkeys={version:"0.8",specialKeys:{8:"backspace",9:"tab",10:"return",13:"return",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"del",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scroll",186:";",191:"/",220:"\\",222:"'",224:"meta"},shiftNums:{"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")","-":"_","=":"+",";":": ","'":'"',",":"<",".":">","/":"?","\\":"|"}},t.each(["keydown","keyup","keypress"],(function(){t.event.special[this]={add:e}}))}(this.jQuery)}).call(window)},function(t,e){angular.module("genius").directive("keepInView",["$document","$window",function(t,e){var n=.05;return{link:function(r,i,o){var a=0;r.$watch(o.keepInView,(function(r){if(r){var o=i[0].getBoundingClientRect(),s=e.innerHeight;if(o.bottom>.95*s||o.top<s*n){var c=a-Date.now()<200?100:300;a=Date.now(),$(t.prop("body")).animate({scrollTop:$(i).offset().top-s*n},c)}}}))}}}])},function(t,e){angular.module("genius").directive("leaderboard",[function(){return{restrict:"E",templateUrl:"leaderboard.html",scope:{leaderboard_rows:"<collection"}}}])},function(t,e){angular.module("genius").directive("linksNavigableByArrowKeys",["$immediate","Mousetrap","Bindings",function(t,e,n){var r=n.resolver({yields_refresh:"&linksNavigableByArrowKeys"});return{restrict:"A",link:function(n,i,o){var a,s=r(n,o),c=null,l=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];t((function(){a=i.find("a:visible"),e&&(c=null)}),!1)};l(),s.yields_refresh({refresh:l});e.bindGlobal("down",(function(){if(a.length&&!(c>=a.length-1))return _.isNull(c)?c=0:c++,a[c].focus(),!1})),n.$on("$destroy",(function(){return e.unbind("down")}));e.bindGlobal("up",(function(){if(a.length&&!_.isNull(c)&&0!==c)return c--,a[c].focus(),!1})),n.$on("$destroy",(function(){return e.unbind("up")}))}}}])},function(t,e){angular.module("genius").directive("localReferentRouting",(function(){return{controller:["$scope","$location","Tracking",function(t,e,n){t.$on("$locationChangeSuccess",(function(){var r=Number(e.search().referent_id);if(!r){var i=e.hash().match(/^note-(\d+)$/);i&&(r=i[1])}var o=e.path();if(r)n.set_annotation_opened_from_permalink(r),t.song_ctrl.scroll_to_referent(r).then((function(){t.song_ctrl.update_url_for_open_referent(r),e.replace()}));else if(o===t.song.path)t.current_referent=null;else{var a=Number(o.slice(1));t.song_ctrl.display_referent(a)}}))}]}}))},function(t,e){angular.module("genius").directive("lockScrollPositionOnIos",["$window","Bowser",function(t,e){return{link:function(n){if(e.ios){var r=$("body"),i=$(t).scrollTop();r.css("top",-i),n.$on("$destroy",(function(){r.css("top",""),$(t).scrollTop(i)}))}}}}])},function(t,e){angular.module("genius").directive("lyricSyncTimestampInput",["timestamp_for_displayFilter","parse_time_string","Mousetrap","$immediate",function(t,e,n,r){return{require:"ngModel",link:function(i,o,a,s){var c,l=new n(o[0],{stop_propagation:!0,prevent_default:!0});l.$bind("up",(function(){u(e(s.$viewValue)-50)})),l.$bind("down",(function(){u(e(s.$viewValue)+50)})),l.$bind("esc",(function(){u(e(c)),o.blur()})),r((function(){c=s.$viewValue}));var u=function(e){var n=s.$viewValue,r=t(Math.round(e),{always_millis:!0});s.$setViewValue(r),s.$valid?s.$render():s.$setViewValue(n)};o.bind("keyup",(function(){s.$commitViewValue(),i.$apply()})),s.$parsers.push(e),s.$formatters.push((function(e){if(e||0===e)return t(e,{always_millis:!0})})),i.$watch(a.ngModel,(function(e,n){_.isUndefined(e)&&!_.isUndefined(n)&&(""!==s.$viewValue?s.$setViewValue(t(n,{always_millis:!0})):s.$setViewValue(null),s.$commitViewValue())})),"validators"in a&&_.assign(s.$validators,i.$eval(a.validators))}}}])},function(t,e){angular.module("genius").directive("lyrics",["$q","$compile","SongClient","LyricsEditing","LyricsAnchorer","Lyrics","LyricsEditProposalClient","ReferentHelper","ReferentElementMap","ReferentRegistry","TextSelection","Tracking","Bindings","ScrollFocus","mobile_device","Session","StructuredText","LyricsEditProposal","ReactSongPageService",function(t,e,n,r,i,o,a,s,c,l,u,d,p,f,h,m,g,v,b){var y=p.resolver({yields_api:"&yieldsApi",on_selection_range_updated:"&onSelectionRangeUpdated",canonical_lyrics_html:"<canonicalLyricsHtml",on_focused_referent_anchor_changed:"&onFocusedReferentAnchorChanged"});return{restrict:"E",templateUrl:"lyrics.html",controller:["$scope","AppConfig",function(e,i){var o=this;this.user_signed_in=m.user_signed_in,this.react_song_page_link=b.reactSongPageRedirect,this.transcriber_guide_url=i.transcriber_guide_url,this.set_editable=function(t){e.editable=t,o.editable_lyrics_stale=!1},this.build_correction=function(){var t,e,n=o.lyrics_anchorer.get_state();if(n.referent){var i=o.lyrics_anchorer.get_occurrence_in_container_among("[annotation-fragment=".concat(n.referent.id,"]"),n.reference_element);t=n.reference_element,e={id:n.referent.id,occurrence:i}}else t=$("<span>").attr("class","line-correction"),e=o.lyrics_anchorer.calculate_referent_location(n.range),t.html(n.range.extractContents()),n.range.insertNode(t[0]);var a=t.html(),s=r.prepare_lyrics_for_editing(a),c=s.markdown;return o.proposing_edit&&(s.markdown=new g(c).plain),{anchor:t,rect:t.get(0).getBoundingClientRect(),referent:e,replacement:s,original:{html:a,markdown:c}}},this.should_show_full_lyrics_save_cancel_buttons=function(){return(o.proposing_edit||o.editing)&&!o.correcting},this.should_show_full_lyrics_start_propose_button=function(){return!(!o.correcting||!o.proposing_edit)||e.can_perform("propose_lyrics_edit")&&!o.editing&&!o.proposing_edit},this.should_show_full_lyrics_start_edit_button=function(){return!(!o.correcting||!o.editing)||e.can_perform("edit_lyrics")&&!o.editing},this.should_show_edit_annotation_brackets_button=function(){return e.can_perform("edit_annotation_brackets")&&!o.proposing_edit&&!o.editing&&!o.saving},this.should_show_lyrics_edit_form=function(){return o.editing&&!o.correcting},this.should_show_lyrics_edit_proposal_form=function(){return o.proposing_edit&&!o.correcting},this.should_show_lyrics_form_cancel_button=function(){return o.editing&&!o.saving&&!o.correcting},this.should_show_lyrics_sync_warning=function(){return e.can_perform("view_lyrics_synchronization")&&o.should_show_lyrics_edit_form()&&e.song.lyrics_marked_complete_by};this.start_editing=function(){o.set_editable(r.prepare_lyrics_for_editing(e.canonical_lyrics_html)),o.editing=!0,o.correcting?d.track("lyrics_edits:start_by_line_edit"):d.track("lyrics_edits:start_full_edit")},this.start_proposing_edit=function(){o.edit_blocked=!0,o.correcting?d.track("lyrics_edit_proposals:start_by_line_proposal",{properties:{edit_format:"plain_text"}}):d.track("lyrics_edit_proposals:start_proposal",{properties:{edit_format:"plain_text"}}),a.lyrics_for_edit_proposal({song_id:e.song.id}).then((function(t){var e=t.body,n=t.version;o.proposing_edit=!0,o.lyrics_for_edit_proposal={version:n,before:e.plain,markdown:e.plain,attr_hash:{}}})).finally((function(){o.edit_blocked=!1}))},this.start_correcting=function(){o.correcting=!0,e.can_perform("propose_lyrics_edit")?(o.proposing_edit=!0,o.editing=!1,o.correction=o.build_correction(),o.start_proposing_edit()):(o.proposing_edit=!1,o.editing=!0,o.correction=o.build_correction(),o.start_editing())},this.cancel_edit_or_proposal=function(){o.editing&&o.correcting?d.track("lyrics_edits:cancel_by_line_edit"):o.editing&&!o.correcting?d.track("lyrics_edits:cancel_full_edit"):o.proposing_edit&&o.correcting?d.track("lyrics_edit_proposals:cancel_by_line_proposal",{properties:{edit_format:"markdown"}}):o.proposing_edit&&!o.correcting&&d.track("lyrics_edit_proposals:cancel_proposal",{properties:{edit_format:"markdown"}}),o.errors=null,o.editing=null,o.correcting=null,o.correction=null,o.proposing_edit=null,o.edit_blocked=!1,o.reset_lyrics_form()},this.reset_lyrics_form=function(){o.errors=null,o.lyrics_form.$rollbackViewValue(),o.lyrics_form.$setPristine()},this.finish_editing=function(){if(!o.saving){var t=r.validate_pseudo_markdown_lyrics(e.canonical_lyrics_html,(o.proposing_edit?o.lyrics_for_edit_proposal:e.editable).markdown,{is_music:e.song.is_music});if(!t.length)return o.editing?o.saving="saving_edit":o.proposing_edit&&(o.saving="saving_proposal"),o.edit_blocked=!0,o.errors=null,(o.proposing_edit?o.save_edit_proposal():o.save_edit()).finally((function(){o.saving=!1}));o.errors=t}},this.save_edit_proposal=function(){return o.proposing_edit=!1,o.lyrics_for_edit_proposal.markdown===o.lyrics_for_edit_proposal.before?(o.cancel_edit_or_proposal(),t.when()):a.create({song_id:e.song.id,version:o.lyrics_for_edit_proposal.version,edited_lyrics:o.lyrics_for_edit_proposal.markdown}).then((function(){o.correcting?d.track("lyrics_edit_proposals:save_by_line_proposal",{properties:{edit_format:"markdown"}}):d.track("lyrics_edit_proposals:save_proposal",{properties:{edit_format:"markdown"}}),o.lyrics_form.$setPristine(),o.edit_proposal_submitted=!0,o.correction=null,o.correcting=null})).catch((function(t){o.errors=t.response.errors||[t.message],o.proposing_edit=!0})).finally((function(){o.edit_blocked=!1}))},this.save_edit=function(){o.editing=!1;var t=e.lyrics_section_html();return e.lyrics_section_html(l()),n.save_lyrics(e.song,c()).then((function(t){var e=o.correction?"lyrics_edits:save_by_line_edit":"lyrics_edits:save_full_edit";d.track(e),o.apply_lyrics_update(t),o.editing=!1,o.edit_blocked=!1,o.correction=null,o.correcting=null,o.lyrics_form.$setPristine()})).catch((function(n){o.correction||(o.editing=!0),e.lyrics_section_html(t),409===n.meta.status?o.refresh_lyrics():(o.errors=n.response.errors,o.errors&&o.errors.length||(o.errors=[n.meta.message||"Unexpected error"]),o.edit_blocked=!1)}))},this.refresh_lyrics=function(){return o.edit_blocked=!0,n.load_lyrics(e.song.id).then((function(t){o.edit_blocked=!1,o.apply_lyrics_update(t)}))},this.remove_referent=function(t){e.canonical_lyrics_html=r.lyrics_html_without_referent(e.canonical_lyrics_html,t)},this.on_image_referent_created=function(t,n){o.edit_blocked=!1,n.precomputed_client_rect=t.precomputed_client_rect,e.current_referent=n,e.$emit("referent_created",n)},this.on_image_referent_creation_failed=function(){o.edit_blocked=!1},this.on_image_referent_creation_started=function(){o.edit_blocked=!0},this.can_correct_line=function(){return!o.has_block_level_markup()&&(e.current_referent&&!e.current_referent.is_image||o.selection_range||o.correction)},this.submit_line_correction=function(t){if(o.edit_blocked=!0,o.errors=null,o.proposing_edit){var n=new g(o.correction.original.markdown).plain,i=v.diff(n,t),a=v.make_patches(i);t=v.apply_patches(a,o.correction.original.markdown,{edit_format:"plain_text"}).patched}return o.correction.replacement={markdown:t,html:r.convert_editable_for_saving({markdown:t,attr_hash:{}})},o.set_editable(r.prepare_lyrics_with_correction(e.canonical_lyrics_html,o.correction)),o.proposing_edit&&(o.lyrics_for_edit_proposal.markdown=new g(e.editable.markdown).plain),o.finish_editing()},this.has_block_level_markup=function(){return r.html_has_block_level_markup(e.canonical_lyrics_html)},this.apply_lyrics_update=function(t){return _.assign(e.song,t.client_timestamps),o.update_lyrics_selection_safe(t.body.html),s(e.canonical_lyrics_html)!==s(t.body.html)&&(e.canonical_lyrics_html=t.body.html,o.editable_lyrics_stale=!0),t};var s=function(t){return $("<div>").append($(t)).html()},c=function(){return r.convert_editable_for_saving(e.editable)},l=function(){return r.backfill_angular_link_properties(r.lyrics_pseudo_markdown_to_html__deprecated(e.editable.markdown,e.editable.attr_hash))};e.$watch("lyrics_ctrl.correction",(function(t,e){e&&e.anchor.hasClass("line-correction")&&e.anchor.replaceWith(e.original.html)})),e.$watch("current_referent",(function(t){t&&(o.correcting=null,o.correction=null)})),e.$watch("lyrics_data",(function(t){t&&o.apply_lyrics_update(t)}))}],controllerAs:"lyrics_ctrl",link:function(t,n,r,a){var d=y(t,r),p=n.find("section");a.lyrics_anchorer=new i({container:p,get_state:function(){var e=t.current_referent?c.get(t.current_referent.id):null;return{range:a.selection_range,referent:t.current_referent,reference_element:e}},scope:t,song:t.song}),a.update_selection_range=function(t){t!==this.selection_range&&(t&&!s.range_or_contents_intersects_links_or_contains_images(t)?this.selection_range=t:this.selection_range=null,d.on_selection_range_updated({range:this.selection_range}))},d.yields_api({api:{anchorer:a.lyrics_anchorer,remove_referent:a.remove_referent,refresh_lyrics:a.refresh_lyrics.bind(a),block_edit:function(t){a.edit_blocked=t}}}),a.update_lyrics_selection_safe=function(e){u.restore_selection_if_clobbered(p[0],(function(){t.lyrics_section_html(e)}))};var m={replace:function(){}};h&&(m=new f([],{container:p.get(0)}).on("update",(function(t){d.on_focused_referent_anchor_changed({referent_anchor:t})})));var g;t.lyrics_section_html=function(n){if(g&&g.$destroy(),!n)return p.html();c.clear(),l.reset_fragments(),g=t.$new(),function(e){p.empty(),p.append(e);var n=p.find("a[annotation-fragment]").toArray(),r=_.chain(n).uniqBy((function(t){return $(t).data("id")})).filter((function(e){var n=Number($(e).data("id"));return t.song_ctrl.referent_has_preview(n)})).value();m.replace(r),t.$emit("content_change")}(e(o.prepare_for_display(n))(g)),t.$ctrl.on_lyrics_compiled()},t.canonical_lyrics_html=d.canonical_lyrics_html}}}])},function(t,e){angular.module("genius").directive("lyricsSyncKeyboard",["Mousetrap",function(t){return{scope:{showing:"<"},restrict:"E",require:"^lyricsSyncEditor",templateUrl:"lyrics_sync_keyboard.html",link:function(e,n,r,i){e.definitions=[{key:"?",label:"?",description:"Show/Hide Keyboard Shortcuts",action:function(){i.showing_keyboard_shortcuts=!i.showing_keyboard_shortcuts}},{key:"space",label:"Space",description:"Advance Line Selection and Set to Current Time",action:function(){i.can("edit")&&i.can("sync")&&i.start_or_advance()}},{key:"enter",label:"&#x23ce;",description:"Seek to Current Line",action:function(){i.seek_to_index(i.current_line_index)}},{key:"up",label:"&darr;, &uarr;",description:"Move Line Selection, Adjust Time While Editing",action:function(){if(0!==i.current_line_index)do{--i.current_line_index}while(i.current_line()&&i.current_line().hidden)}},{key:"down",action:function(){if(i.current_line_index!==i.lyrics_synchronization.lines.length-1)do{++i.current_line_index}while(i.current_line()&&i.current_line().hidden)}},{key:"left",label:"&larr;, &rarr;",description:"Seek Forwards and Backwards",action:function(){i.media_player.api.seek_to_position(i.position-200)}},{key:"right",action:function(){i.media_player.api.seek_to_position(i.position+150)}},{key:"e",label:"e",description:"Pause And Edit Timestamp",action:function(){i.can("edit")&&(i.media_player.api.pause(),i.current_line()._editing_time=!0)}}],_.each(e.definitions,(function(e){t.$bind(e.key,e.action,{prevent_default:!0,stop_propagation:!0})})),e.$on("$destroy",(function(){_.each(e.definitions,(function(e){t.unbind(e.key)}))}))}}}])},function(t,e){angular.module("genius").directive("markdownPreview",[function(){return{restrict:"E",scope:{markdown_content:"<markdownContent"},templateUrl:"markdown_preview.html",controller:["$scope","MarkdownPreviewClient",function(t,e){t.$watch("markdown_content",_.throttle((function(){e.create_preview(t.markdown_content).then((function(e){t.html_content=e}))}),500,{leading:!0,trailing:!0}))}]}}])},function(t,e){angular.module("genius").directive("mediaControls",[function(){return{restrict:"E",scope:{media:"<mediaPlayer",hide_playpause:"<?hidePlaypause",variants:"<?"},templateUrl:"media_controls.html"}}])},function(t,e){angular.module("genius").directive("mentionable",["MentionClient",function(t){return{restrict:"A",link:function(e,n){n.atwho({at:"@",displayTpl:"<li>${name}</li>",insertTpl:"@${value}",searchKey:"name",callbacks:{remoteFilter:function(e,n){t.autocomplete(e).then((function(t){n(t)}))},sorter:function(t,e){return e}}})}}}])},function(t,e){angular.module("genius").directive("metadataCustomPerformanceRoleInput",[function(){return{restrict:"E",templateUrl:"metadata_custom_performance_role_input.html",scope:{role_field_placeholder:"@roleFieldPlaceholder",artist_field_placeholder:"@artistFieldPlaceholder",customPerformanceRoles:"<",isDisabled:"<",validation_errors:"<validationErrors"},controllerAs:"ctrl",controller:["$scope",function(t){this.remove_custom_performance=function(e){_.pull(t.customPerformanceRoles,e)},this.add_new_custom_performance=function(){t.customPerformanceRoles.push({label:"",artists:[]})},this.errors_for_label=function(e){return _.get(t.validation_errors,"custom_performances:".concat(e.toLowerCase()))}}]}}])},function(t,e){angular.module("genius").directive("metadataInputAndLabel",(function(){return{restrict:"E",templateUrl:"metadata_input_and_label.html",replace:!0,transclude:!0,scope:{label:"@",errors:"<",full:"<",is_disabled:"<isDisabled"}}}))},function(t,e){angular.module("genius").directive("modalWindow",["$compile","$document","$templateCache","Bowser",function(t,e,n,r){var i=n.get("modal_window.html");return{scope:{on_close:"&onClose",variants:"<",hidden:"<",media:"<",content_dimensions:"<contentDimensions"},transclude:!0,link:function(n,o,a,s,c){var l=t(i),u=e.prop("body");n.is_ios=r.ios,l(n,(function(t){$(u).append(t),n.close=function(t){n.on_close({reason:t})},n.$on("$destroy",(function(){return t.remove()}))}),{parentBoundTranscludeFn:c,futureParentElement:u})}}}])},function(t,e){angular.module("genius").directive("mousetrapInput",(function(){return{restrict:"A",link:function(t,e){e.addClass("mousetrap")}}}))},function(t,e){angular.module("genius").directive("mutuallyExclusiveSwitches",[function(){return{restrict:"E",scope:!0,link:function(t,e,n){var r=n.property;t[r]={},t.$watch(r,(function(e,n){_(e).values().compact().size()<=1||_.forEach(e,(function(e,i){var o=n[i];e&&!o&&(t[r]=_.pick(t[r],i))}))}),!0)}}}])},function(t,e){angular.module("genius").directive("navigateOnClick",["$window",function(t){return{restrict:"A",link:function(e,n,r){n.on("click",(function(){t.location.href=r.navigateOnClick}))}}}])},function(t,e){angular.module("genius").directive("newConversation",[function(){return{scope:{on_sent:"&onSent",yields_is_dirty:"&yieldsIsDirty"},templateUrl:"new_conversation.html",controller:["$scope","ConversationClient",function(t,e){this.did_send=function(n){e.get(n.conversation_id).then((function(e){t.conversation=e}))}}],controllerAs:"ctrl"}}])},function(t,e){angular.module("genius").directive("ngAutofocus",["$immediate",function(t){return{restrict:"A",link:function(e,n,r){var i=function(){t(n.focus.bind(n),!1)};r.ngAutofocus?e.$watch(r.ngAutofocus,(function(t){t&&i()})):i()}}}])},function(t,e){angular.module("genius").directive("ngBodyClass",[function(){var t=$("body");return{restrict:"A",link:function(e,n,r){e.$watch(r.ngBodyClass,(function(e){for(var n in e)t.toggleClass(n,!!e[n])}),!0),e.$on("$destroy",(function(){for(var n in e.$eval(r.ngBodyClass))t.removeClass(n)}))}}}])},function(t,e){angular.module("genius").directive("ngClickDisabled",(function(){return{priority:-2,restrict:"A",link:function(t,e,n){e.on("click",(function(e){if(t.$eval(n.ngClickDisabled))return e.stopImmediatePropagation(),!1}))}}}))},function(t,e){angular.module("genius").directive("odometer",["Odometer",function(t){return{restrict:"E",scope:{value:"<",options:"<"},link:function(e,n){var r=new t(_.merge({el:n[0],value:e.value},e.options));e.$watch("value",(function(t){r.update(t)}))}}}])},function(t,e){angular.module("genius").directive("onHoverWithNoDigest",[function(){return{restrict:"A",link:function(t,e,n){e.hover((function(){t.$eval(n.onHoverWithNoDigest,{hover:!0})}),(function(){t.$eval(n.onHoverWithNoDigest,{hover:!1})}))}}}])},function(t,e){angular.module("genius").directive("onIframeLoad",["Bindings",function(t){var e=t.resolver({on_iframe_load:"&onIframeLoad"});return{restrict:"A",link:function(t,n,r){var i=e(t,r);n.get(0).addEventListener("load",(function(e){var n=e.target;t.$applyAsync((function(){return i.on_iframe_load({target:n})}))}))}}}])},function(t,e){angular.module("genius").directive("onInnerHeightChange",[function(){return{restrict:"A",link:function(t,e,n){t.$watch((function(){return e.innerHeight()}),(function(e){t.$eval(n.onInnerHeightChange,{height:e})}))}}}])},function(t,e){angular.module("genius").directive("onLoad",[function(){return{restrict:"A",link:function(t,e,n){e.on("load",(function(){t.$apply((function(){t.$eval(n.onLoad)}))}))}}}])},function(t,e){angular.module("genius").directive("openLinksInNewWindow",[function(){return{restrict:"A",link:function(t,e){e.on("click","a:not([target])",(function(t){t.target.target="_blank"}))}}}])},function(t,e){angular.module("genius").directive("placeholderSpinner",[function(){return{restrict:"E",scope:{placeholderClasses:"@",variants:"<variants"},templateUrl:"placeholder_spinner.html"}}])},function(t,e){angular.module("genius").directive("placeholderText",[function(){return{restrict:"E",templateUrl:"placeholder_text.html"}}])},function(t,e){angular.module("genius").directive("placeholderUserBadge",[function(){return{restrict:"E",scope:{size:"@"},templateUrl:"user_badge.html",link:function(t){t.user={name:"username",iq:"1738",avatar:{thumb:{url:""}}}}}}])},function(t,e){angular.module("genius").directive("playPauseButton",(function(){return{restrict:"E",templateUrl:"play_pause_button.html",scope:{playing:"<",loading:"<"}}}))},function(t,e){angular.module("genius").directive("positionBeside",["$window",function(t){var e=function t(e,n,r){var i=e[0].getBoundingClientRect().left+e.width()/2,o=$(document.elementFromPoint(i,n));if(!o.length||e.is(o)||e.find(o).length)return n;var a=o[0].getBoundingClientRect();return t(e,r?a.top-1:a.bottom+1,r)};return{restrict:"A",link:function(n,r,i){n.$watch(i.positionBeside,(function(o){var a=function(n,r,i){if(!r)return 0;var o=n.offsetParent(),a=o[0].getBoundingClientRect(),s=n.height(),c=a.top,l=a.bottom;i.maximum_visibility&&(c=e(o,Math.max(c,0)),l=e(o,Math.min(l,t.innerHeight-1),!0));var u=r.top+(r.height-s)/2,d=u+s-l;d>0&&(u-=d);var p=c-u;return p>0&&(u+=p),u}(r,o,{maximum_visibility:!!n.$eval(i.positionForMaximumVisibility)});r.offset({top:a+$(t).scrollTop()})}))}}}])},function(t,e){angular.module("genius").directive("preload",["PreloadCache",function(t){return{restrict:"E",priority:1e4,link:function(e,n){var r=JSON.parse(n.find("preload-content").attr("data-preload_data"));angular.forEach(r,(function(n,r){t[r]=e[r]=n})),n.remove()}}}])},function(t,e){angular.module("genius").directive("preventDefaultClick",(function(){return{priority:-1,restrict:"A",link:function(t,e){e.on("click",(function(t){t.preventDefault(),t.stopPropagation()}))}}}))},function(t,e){angular.module("genius").directive("preventDefaultKeydown",(function(){return{restrict:"A",link:function(t,e,n){var r=_.map(n.preventDefaultKeydown.split(" "),Number);e.on("keydown",(function(t){_.includes(r,t.which)&&t.preventDefault()}))}}}))},function(t,e,n){"use strict";n.r(e);var r=n(2),i=n.n(r);function o(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function a(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(Object(n),!0).forEach((function(e){s(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function c(t,e,n,r,i,o,a){try{var s=t[o](a),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,i)}var l={desktop:"110117",mobile:"110118"},u=function(t,e){var n=document.createElement("script");n.async=!0,n.src="https://live.primis.tech/live/liveView.php?s=".concat(e),t.appendChild(n)},d=0;angular.module("genius").directive("primisPlayer",["Ads","AdConfig","SessionConfig",function(t,e,n){return{restrict:"E",scope:{name:"@",container_classes:"@containerClasses"},templateUrl:"primis_player.html",link:function(r,o){r.show_player=n.show_ads,r.$watch("$viewContentLoaded",(function(){if(r.show_player){var t=o.find(".primis_player-player")[0];s(t)}}));var s=function(){var n,o=(n=i.a.mark((function n(o){var s,c,p;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(null===o){n.next=8;break}return n.next=3,t.get_base_targeting(r.name);case 3:s=n.sent,p=(c=function(){var e=a({},s);return d++,t.get_async_targeting(r.name,d).then((function(t){Object.assign(e,t)})),e})(),window.getPrimisTargeting=function(){var t=p;return p=c(),t},u(o,l[e.platform]);case 8:case"end":return n.stop()}}),n)})),function(){var t=this,e=arguments;return new Promise((function(r,i){var o=n.apply(t,e);function a(t){c(o,r,i,a,s,"next",t)}function s(t){c(o,r,i,a,s,"throw",t)}a(void 0)}))});return function(t){return o.apply(this,arguments)}}()}}}])},function(t,e){angular.module("genius").directive("proxiedImage",(function(){return{restrict:"A",require:"ngModel",link:function(t,e,n,r){r.$formatters.push((function(t){if(!t)return"";var e={};try{var n=new URL(t);return n.hostname.match(/\.embed\.ly$/)&&_.each(n.search.substr(1).split("&"),(function(t){var n=t.split("=");e[decodeURIComponent(n[0])]=decodeURIComponent(n[1])})),e.url||t}catch(e){return t}}))}}}))},function(t,e){angular.module("genius").directive("pusher",["Pusher",function(t){return{scope:{channel:"@pusherChannel",event_name:"@pusherEventName",updateCallback:"&pusherUpdate",enabled:"="},link:function(e){var n=function(){t.subscribe(e.channel,e.event_name,(function(t){e.updateCallback({value:t.value})}))};void 0===e.enabled&&(e.enabled=!0),e.enabled&&n(),e.$watch("enabled",(function(t,e){t&&!e&&n()}))}}}])},function(t,e){angular.module("genius").directive("pyongButton",[function(){return{restrict:"E",scope:{pyongable:"<object",type:"@",onUnauthorized:"&",variants:"<"},templateUrl:function(t,e){return"forHeader"in e?"pyong_button_for_header.html":"pyong_button_square_button.html"},controllerAs:"ctrl",controller:["$scope","PyongClient","Session",function(t,e,n){var r=this,i=t.pyongable;this.pyonged=function(){return!!n.user_signed_in&&i.current_user_metadata.interactions.pyong},this.pyong=function(){if(!n.user_signed_in)return t.onUnauthorized();r.pyonged()||(r.show_pyong_form=!0,i.pyonged=r.clicked_pyong=!0,i.pyongs_count+=1,e.pyong(t.type,i.id).then((function(t){i.current_user_metadata.interactions.pyong=t.current_user_metadata.interactions.pyong,i.pyongs_count=t.pyongs_count})).catch((function(){i.pyongs_count-=1,i.pyonged=!1})))}}]}}])},function(t,e){angular.module("genius").directive("pyongForm",["PyongClient",function(t){return{restrict:"E",scope:{id:"<",type:"<",onComplete:"&"},templateUrl:"pyong_form.html",link:function(e){e.submit=function(n){e.disabled=!0,t.finalizePyong(e.type,e.id,n).then(e.onComplete).finally((function(){return e.disabled=!1}))}}}}])},function(t,e,n){"use strict";n.r(e);n(120);$.browser={},angular.module("genius").directive("quickSearch",["Tracking",function(t){return{restrict:"A",link:function(e,n){n.autocomplete("/search/quick.js",{delay:250,scrollHeight:500,matchSubset:!1,max:20,minChars:4,selectFirst:!1,resultsClass:"ac_results quick_search-results",formatResult:function(t){return t[1]?"Loading...":" "}}).result((function(e,n){n&&n[1]&&($("form.global_search :submit").attr("disabled","disabled"),t.track_with_timeout("Search Result Tap",(function(){window.location.href=n[1]})))}))}}}])},function(t,e){angular.module("genius").directive("referentFragmentContainer",["ReferentHelper",function(t){return{templateUrl:"referent_fragment_container.html",restrict:"E",transclude:{referentHeader:"?referentHeader",referentFragment:"referentFragment"},scope:{referent:"<object",variants:"<"},link:function(e){e.$watch("referent.classification",(function(n){e.referent.display_mode=t.display_mode_by_classification(n)}))}}}])},function(t,e){angular.module("genius").directive("releaseDate",[function(){return{templateUrl:"release_date.html",restrict:"E",scope:{date_components:"<dateComponents",variants:"<"}}}])},function(t,e){angular.module("genius").directive("removeClassOnAngularLoad",[function(){return{restrict:"A",link:function(t,e,n){e.removeClass(n.removeClassOnAngularLoad)}}}])},function(t,e){angular.module("genius").directive("roleIcon",[function(){return{scope:{role:"<",hasChecky:"<"},templateUrl:"role_icon.html"}}])},function(t,e){angular.module("genius").directive("roleSelectionDialog",["AppConfig",function(t){return{restrict:"E",templateUrl:"role_selection_dialog.html",scope:{prompt:"@",save:"&",saving:"<",error:"<"},link:function(e){e.available_roles=t.available_roles,e.backing={},e.submit=function(){var t=_(e.backing).map((function(t,e){if(t)return e})).compact().value();e.save({selected_roles:t})}}}}])},function(t,e){angular.module("genius").directive("scrollFromBottom",(function(){return{restrict:"A",link:function(t,e){var n=new MutationObserver((function(){var t=e.prop("scrollHeight");e.scrollTop(e.scrollTop()+t-r),r=t})),r=e.prop("scrollHeight");n.observe(e[0],{childList:!0,subtree:!0}),t.$on("$destroy",(function(){n.disconnect()}))}}}))},function(t,e){angular.module("genius").directive("scrollOnlyThisElement",[function(){return{restrict:"A",link:function(t,e){e.on("mousewheel",(function(t){t.preventDefault();var n=t.detail<0||t.wheelDelta>0?1:-1;e.scrollTop(e.scrollTop()+n*t.deltaFactor*t.deltaY)}))}}}])},function(t,e){angular.module("genius").directive("scrollPoint",["ScrollPoint",function(t){return{restrict:"A",link:function(e,n,r){var i=r.scrollPoint;t.register(i,n),e.$on("$destroy",(function(){t.unregister(i,n)}))}}}])},function(t,e){angular.module("genius").directive("scrollToBottomWhen",["$immediate",function(t){return{restrict:"A",link:function(e,n,r){e.$watch(r.scrollToBottomWhen,(function(e,r){e&&!r&&t((function(){n.scrollTop(n.prop("scrollHeight"))}),!1)}))}}}])},function(t,e){angular.module("genius").directive("scrollToTopOnChange",(function(){return{restrict:"A",scope:{scrollToTopOnChange:"<"},link:function(t,e){t.$watch("scrollToTopOnChange",(function(){e.scrollTop(0)}))}}}))},function(t,e){function n(t){return function(t){if(Array.isArray(t))return r(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}angular.module("genius").directive("scrollableData",["Bindings",function(t){var e=t.resolver({src:"<",preload:"&",empty_message:"@emptyMessage",scroll_mechanism:"@scrollMechanism",repeat_with:"@repeatWith",button_classes:"@buttonClasses",container_classes:"@containerClasses",item_classes:"@itemClasses",unique_by:"@uniqueBy",start_collapsed:"<startCollapsed",on_show_more:"&onShowMore",on_scroll_complete:"&onScrollComplete",on_empty:"&onEmpty"});return{restrict:"E",templateUrl:"scrollable_data.html",transclude:{empty:"?empty",show_more:"?showMore"},scope:!0,controller:["$scope","$attrs",function(t,r){var i=this;e(t,r).assign_to(this),t.$watch("$scrollable_data_ctrl.src",(function(){i.auto_reset&&i.src.reset(),i.reset()})),this.get_preloaded_data=function(){return i.preload()||[]},this.reset=function(){var t=i.get_preloaded_data();i.models=_.clone(t),i.current_loading_page=null,i.loading=!1,!i.has_next()||t.length||i.start_collapsed||i.load_next()},this.has_next=function(){return void 0===i.src.next_page?i.src.has_next():i.src.next_page>i.current_loading_page},this.load_next=function(){if(!i.loading&&i.has_next()){i.loading=!0,i.current_loading_page=i.src.next_page,i.on_show_more();var t=i.models;return i.src.next().then((function(e){t.push.apply(t,n(e))})).then((function(){i.unique_by&&(i.models=_.uniqBy(i.models,i.unique_by)),i.loading=!1,0!==i.models.length||i.has_next()||i.on_empty(),i.more_loaded_callback&&i.more_loaded_callback()}))}},t.$watch("$scrollable_data_ctrl.src.has_next()",(function(t){t||i.on_scroll_complete()}))}],controllerAs:"$scrollable_data_ctrl"}}])},function(t,e){angular.module("genius").directive("scrubber",["$document","$timeout",function(t,e){var n="ontouchstart"in window||navigator.MaxTouchPoints>0||navigator.msMaxTouchPoints>0;return{scope:{scrubPercentage:"=",scrubbed:"&",scale:"@"},link:function(r,i){var o=parseFloat(r.scale||"1"),a=function(t){var e=i.width()*o,n=Math.max(0,Math.min(e,t-i.offset().left));r.scrubbed({percentage:n/e})};i.on("click",(function(t){return a(t.pageX),!1}));var s=n?{start:"touchstart",end:"touchend",move:"touchmove"}:{start:"mousedown",end:"mouseup",move:"mousemove"},c=function(t){if(t.pageX)return t.pageX;var e=t.originalEvent;return"touchend"===e.type?e.changedTouches[0].pageX:e.touches[0].pageX};i.on(s.start,(function(){var n=i.width()*o,l=function(t){var e=Math.max(0,Math.min(n,c(t)-i.offset().left));r.$apply((function(){r.scrubPercentage=e/n}))};t.on(s.move,l),t.one(s.end,(function(n){n.originalEvent.defaultPrevented||(a(c(n)),t.off(s.move,l),e((function(){Reflect.deleteProperty(r,"scrubPercentage")}),500,!1))}))}))}}}])},function(t,e,n){(function(t){angular.module("genius").directive("searchForm",["Tracking","$location","SearchClient","$immediate","PageTransition",function(e,n,r,i,o){return{restrict:"E",templateUrl:"search_form.html",scope:{style:"@searchStyle"},link:function(a,s){var c=s.find("input.quick_search");a.unfocus=function(){a.focused&&(e.track("Search Cancel"),a.focused=!1,a.search_text="")},a.focus=function(){a.focused||(e.track("Search Page View"),a.focused=!0,c.focus())},o.on_client_transition_complete((function(){a.focused=!1,a.search_text=""})),t.Observable.$watch(a,"search_text").auditTime(500).switchMap((function(e){return e?t.Observable.fromPromise(r.multi(e)):t.Observable.of(null)})).subscribe((function(t){i((function(){return a.sections=t}))})),a.submit_form=function(){a.focused&&a.search_text&&s.find("form").submit()},"/gastly"===n.path()&&(a.search_text=n.search().q)}}}])}).call(this,n(121))},function(t,e,n){"use strict";var r=n(6),i=n(73),o=n(123);e.toSubscriber=function(t,e,n){if(t){if(t instanceof r.Subscriber)return t;if(t[i.rxSubscriber])return t[i.rxSubscriber]()}return t||e||n?new r.Subscriber(t,e,n):new r.Subscriber(o.empty)}},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},i=function(t){function e(e){t.call(this),this.errors=e;var n=Error.call(this,e?e.length+" errors occurred during unsubscription:\n  "+e.map((function(t,e){return e+1+") "+t.toString()})).join("\n  "):"");this.name=n.name="UnsubscriptionError",this.stack=n.stack,this.message=n.message}return r(e,t),e}(Error);e.UnsubscriptionError=i},function(t,e,n){"use strict";var r=n(124);function i(t){return t?1===t.length?t[0]:function(e){return t.reduce((function(t,e){return e(t)}),e)}:r.noop}e.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return i(t)},e.pipeFromArray=i},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},i=function(t){function e(e,n){t.call(this),this.subject=e,this.subscriber=n,this.closed=!1}return r(e,t),e.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var t=this.subject,e=t.observers;if(this.subject=null,e&&0!==e.length&&!t.isStopped&&!t.closed){var n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}},e}(n(18).Subscription);e.SubjectSubscription=i},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},i=n(6);e.refCount=function(){return function(t){return t.lift(new o(t))}};var o=function(){function t(t){this.connectable=t}return t.prototype.call=function(t,e){var n=this.connectable;n._refCount++;var r=new a(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i},t}(),a=function(t){function e(e,n){t.call(this,e),this.connectable=n}return r(e,t),e.prototype._unsubscribe=function(){var t=this.connectable;if(t){this.connectable=null;var e=t._refCount;if(e<=0)this.connection=null;else if(t._refCount=e-1,e>1)this.connection=null;else{var n=this.connection,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}else this.connection=null},e}(i.Subscriber)},function(t,e,n){"use strict";var r=n(0),i=n(615);r.Observable.combineLatest=i.combineLatest},function(t,e,n){"use strict";var r=n(19),i=n(34),o=n(20),a=n(616);e.combineLatest=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];var n=null,s=null;return r.isScheduler(t[t.length-1])&&(s=t.pop()),"function"==typeof t[t.length-1]&&(n=t.pop()),1===t.length&&i.isArray(t[0])&&(t=t[0]),new o.ArrayObservable(t,s).lift(new a.CombineLatestOperator(n))}},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},i=n(20),o=n(34),a=n(21),s=n(22),c={};e.combineLatest=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];var n=null;return"function"==typeof t[t.length-1]&&(n=t.pop()),1===t.length&&o.isArray(t[0])&&(t=t[0].slice()),function(e){return e.lift.call(new i.ArrayObservable([e].concat(t)),new l(n))}};var l=function(){function t(t){this.project=t}return t.prototype.call=function(t,e){return e.subscribe(new u(t,this.project))},t}();e.CombineLatestOperator=l;var u=function(t){function e(e,n){t.call(this,e),this.project=n,this.active=0,this.values=[],this.observables=[]}return r(e,t),e.prototype._next=function(t){this.values.push(c),this.observables.push(t)},e.prototype._complete=function(){var t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(var n=0;n<e;n++){var r=t[n];this.add(s.subscribeToResult(this,r,r,n))}}},e.prototype.notifyComplete=function(t){0==(this.active-=1)&&this.destination.complete()},e.prototype.notifyNext=function(t,e,n,r,i){var o=this.values,a=o[n],s=this.toRespond?a===c?--this.toRespond:this.toRespond:0;o[n]=e,0===s&&(this.project?this._tryProject(o):this.destination.next(o.slice()))},e.prototype._tryProject=function(t){var e;try{e=this.project.apply(this,t)}catch(t){return void this.destination.error(t)}this.destination.next(e)},e}(a.OuterSubscriber);e.CombineLatestSubscriber=u},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},i=function(t){function e(e,n,r){t.call(this),this.parent=e,this.outerValue=n,this.outerIndex=r,this.index=0}return r(e,t),e.prototype._next=function(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)},e.prototype._error=function(t){this.parent.notifyError(t,this),this.unsubscribe()},e.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},e}(n(6).Subscriber);e.InnerSubscriber=i},function(t,e,n){"use strict";var r=n(0),i=n(619);r.Observable.fromEvent=i.fromEvent},function(t,e,n){"use strict";var r=n(620);e.fromEvent=r.FromEventObservable.create},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},i=n(0),o=n(72),a=n(71),s=n(46),c=n(18),l=Object.prototype.toString;var u=function(t){function e(e,n,r,i){t.call(this),this.sourceObj=e,this.eventName=n,this.selector=r,this.options=i}return r(e,t),e.create=function(t,n,r,i){return a.isFunction(r)&&(i=r,r=void 0),new e(t,n,i,r)},e.setupSubscription=function(t,n,r,i,o){var a;if(function(t){return!!t&&"[object NodeList]"===l.call(t)}(t)||function(t){return!!t&&"[object HTMLCollection]"===l.call(t)}(t))for(var s=0,u=t.length;s<u;s++)e.setupSubscription(t[s],n,r,i,o);else if(function(t){return!!t&&"function"==typeof t.addEventListener&&"function"==typeof t.removeEventListener}(t)){var d=t;t.addEventListener(n,r,o),a=function(){return d.removeEventListener(n,r,o)}}else if(function(t){return!!t&&"function"==typeof t.on&&"function"==typeof t.off}(t)){var p=t;t.on(n,r),a=function(){return p.off(n,r)}}else{if(!function(t){return!!t&&"function"==typeof t.addListener&&"function"==typeof t.removeListener}(t))throw new TypeError("Invalid event target");var f=t;t.addListener(n,r),a=function(){return f.removeListener(n,r)}}i.add(new c.Subscription(a))},e.prototype._subscribe=function(t){var n=this.sourceObj,r=this.eventName,i=this.options,a=this.selector,c=a?function(){for(var e=[],n=0;n<arguments.length;n++)e[n-0]=arguments[n];var r=o.tryCatch(a).apply(void 0,e);r===s.errorObject?t.error(s.errorObject.e):t.next(r)}:function(e){return t.next(e)};e.setupSubscription(n,r,c,t,i)},e}(i.Observable);e.FromEventObservable=u},function(t,e,n){"use strict";var r=n(0),i=n(622);r.Observable.fromPromise=i.fromPromise},function(t,e,n){"use strict";var r=n(128);e.fromPromise=r.PromiseObservable.create},function(t,e,n){"use strict";var r=n(0),i=n(624);r.Observable.merge=i.merge},function(t,e,n){"use strict";var r=n(0),i=n(20),o=n(19),a=n(129);e.merge=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];var n=Number.POSITIVE_INFINITY,s=null,c=t[t.length-1];return o.isScheduler(c)?(s=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(n=t.pop())):"number"==typeof c&&(n=t.pop()),null===s&&1===t.length&&t[0]instanceof r.Observable?t[0]:a.mergeAll(n)(new i.ArrayObservable(t,s))}},function(t,e,n){"use strict";e.identity=function(t){return t}},function(t,e,n){"use strict";var r=n(0),i=n(627);r.Observable.never=i.never},function(t,e,n){"use strict";var r=n(628);e.never=r.NeverObservable.create},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},i=n(0),o=n(124),a=function(t){function e(){t.call(this)}return r(e,t),e.create=function(){return new e},e.prototype._subscribe=function(t){o.noop()},e}(i.Observable);e.NeverObservable=a},function(t,e,n){"use strict";var r=n(0),i=n(131);r.Observable.of=i.of},function(t,e,n){"use strict";var r=n(0),i=n(631);r.Observable.prototype.auditTime=i.auditTime},function(t,e,n){"use strict";var r=n(78),i=n(636);e.auditTime=function(t,e){return void 0===e&&(e=r.async),i.auditTime(t,e)(this)}},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},i=n(13),o=function(t){function e(e,n){t.call(this,e,n),this.scheduler=e,this.work=n,this.pending=!1}return r(e,t),e.prototype.schedule=function(t,e){if(void 0===e&&(e=0),this.closed)return this;this.state=t,this.pending=!0;var n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this},e.prototype.requestAsyncId=function(t,e,n){return void 0===n&&(n=0),i.root.setInterval(t.flush.bind(t,this),n)},e.prototype.recycleAsyncId=function(t,e,n){if(void 0===n&&(n=0),null!==n&&this.delay===n&&!1===this.pending)return e;i.root.clearInterval(e)},e.prototype.execute=function(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(t,e){var n=!1,r=void 0;try{this.work(t)}catch(t){n=!0,r=!!t&&t||new Error(t)}if(n)return this.unsubscribe(),r},e.prototype._unsubscribe=function(){var t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null},e}(n(633).Action);e.AsyncAction=o},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},i=function(t){function e(e,n){t.call(this)}return r(e,t),e.prototype.schedule=function(t,e){return void 0===e&&(e=0),this},e}(n(18).Subscription);e.Action=i},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},i=function(t){function e(){t.apply(this,arguments),this.actions=[],this.active=!1,this.scheduled=void 0}return r(e,t),e.prototype.flush=function(t){var e=this.actions;if(this.active)e.push(t);else{var n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}},e}(n(635).Scheduler);e.AsyncScheduler=i},function(t,e,n){"use strict";var r=function(){function t(e,n){void 0===n&&(n=t.now),this.SchedulerAction=e,this.now=n}return t.prototype.schedule=function(t,e,n){return void 0===e&&(e=0),new this.SchedulerAction(this,t).schedule(n,e)},t.now=Date.now?Date.now:function(){return+new Date},t}();e.Scheduler=r},function(t,e,n){"use strict";var r=n(78),i=n(637),o=n(638);e.auditTime=function(t,e){return void 0===e&&(e=r.async),i.audit((function(){return o.timer(t,e)}))}},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},i=n(72),o=n(46),a=n(21),s=n(22);e.audit=function(t){return function(e){return e.lift(new c(t))}};var c=function(){function t(t){this.durationSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new l(t,this.durationSelector))},t}(),l=function(t){function e(e,n){t.call(this,e),this.durationSelector=n,this.hasValue=!1}return r(e,t),e.prototype._next=function(t){if(this.value=t,this.hasValue=!0,!this.throttled){var e=i.tryCatch(this.durationSelector)(t);if(e===o.errorObject)this.destination.error(o.errorObject.e);else{var n=s.subscribeToResult(this,e);n.closed?this.clearThrottle():this.add(this.throttled=n)}}},e.prototype.clearThrottle=function(){var t=this,e=t.value,n=t.hasValue,r=t.throttled;r&&(this.remove(r),this.throttled=null,r.unsubscribe()),n&&(this.value=null,this.hasValue=!1,this.destination.next(e))},e.prototype.notifyNext=function(t,e,n,r){this.clearThrottle()},e.prototype.notifyComplete=function(){this.clearThrottle()},e}(a.OuterSubscriber)},function(t,e,n){"use strict";var r=n(639);e.timer=r.TimerObservable.create},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},i=n(640),o=n(0),a=n(78),s=n(19),c=n(641),l=function(t){function e(e,n,r){void 0===e&&(e=0),t.call(this),this.period=-1,this.dueTime=0,i.isNumeric(n)?this.period=Number(n)<1?1:Number(n):s.isScheduler(n)&&(r=n),s.isScheduler(r)||(r=a.async),this.scheduler=r,this.dueTime=c.isDate(e)?+e-this.scheduler.now():e}return r(e,t),e.create=function(t,n,r){return void 0===t&&(t=0),new e(t,n,r)},e.dispatch=function(t){var e=t.index,n=t.period,r=t.subscriber;if(r.next(e),!r.closed){if(-1===n)return r.complete();t.index=e+1,this.schedule(t,n)}},e.prototype._subscribe=function(t){var n=this,r=n.period,i=n.dueTime;return n.scheduler.schedule(e.dispatch,i,{index:0,period:r,subscriber:t})},e}(o.Observable);e.TimerObservable=l},function(t,e,n){"use strict";var r=n(34);e.isNumeric=function(t){return!r.isArray(t)&&t-parseFloat(t)+1>=0}},function(t,e,n){"use strict";e.isDate=function(t){return t instanceof Date&&!isNaN(+t)}},function(t,e,n){"use strict";var r=n(0),i=n(643);r.Observable.prototype.catch=i._catch,r.Observable.prototype._catch=i._catch},function(t,e,n){"use strict";var r=n(644);e._catch=function(t){return r.catchError(t)(this)}},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},i=n(21),o=n(22);e.catchError=function(t){return function(e){var n=new a(t),r=e.lift(n);return n.caught=r}};var a=function(){function t(t){this.selector=t}return t.prototype.call=function(t,e){return e.subscribe(new s(t,this.selector,this.caught))},t}(),s=function(t){function e(e,n,r){t.call(this,e),this.selector=n,this.caught=r}return r(e,t),e.prototype.error=function(e){if(!this.isStopped){var n=void 0;try{n=this.selector(e,this.caught)}catch(e){return void t.prototype.error.call(this,e)}this._unsubscribeAndRecycle(),this.add(o.subscribeToResult(this,n))}},e}(i.OuterSubscriber)},function(t,e,n){"use strict";var r=n(0),i=n(646);r.Observable.prototype.concatMap=i.concatMap},function(t,e,n){"use strict";var r=n(647);e.concatMap=function(t,e){return r.concatMap(t,e)(this)}},function(t,e,n){"use strict";var r=n(130);e.concatMap=function(t,e){return r.mergeMap(t,e,1)}},function(t,e,n){"use strict";var r=n(0),i=n(649);r.Observable.prototype.do=i._do,r.Observable.prototype._do=i._do},function(t,e,n){"use strict";var r=n(650);e._do=function(t,e,n){return r.tap(t,e,n)(this)}},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},i=n(6);e.tap=function(t,e,n){return function(r){return r.lift(new o(t,e,n))}};var o=function(){function t(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}return t.prototype.call=function(t,e){return e.subscribe(new a(t,this.nextOrObserver,this.error,this.complete))},t}(),a=function(t){function e(e,n,r,o){t.call(this,e);var a=new i.Subscriber(n,r,o);a.syncErrorThrowable=!0,this.add(a),this.safeSubscriber=a}return r(e,t),e.prototype._next=function(t){var e=this.safeSubscriber;e.next(t),e.syncErrorThrown?this.destination.error(e.syncErrorValue):this.destination.next(t)},e.prototype._error=function(t){var e=this.safeSubscriber;e.error(t),e.syncErrorThrown?this.destination.error(e.syncErrorValue):this.destination.error(t)},e.prototype._complete=function(){var t=this.safeSubscriber;t.complete(),t.syncErrorThrown?this.destination.error(t.syncErrorValue):this.destination.complete()},e}(i.Subscriber)},function(t,e,n){"use strict";var r=n(0),i=n(652);r.Observable.prototype.first=i.first},function(t,e,n){"use strict";var r=n(653);e.first=function(t,e,n){return r.first(t,e,n)(this)}},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},i=n(6),o=n(654);e.first=function(t,e,n){return function(r){return r.lift(new a(t,e,n,r))}};var a=function(){function t(t,e,n,r){this.predicate=t,this.resultSelector=e,this.defaultValue=n,this.source=r}return t.prototype.call=function(t,e){return e.subscribe(new s(t,this.predicate,this.resultSelector,this.defaultValue,this.source))},t}(),s=function(t){function e(e,n,r,i,o){t.call(this,e),this.predicate=n,this.resultSelector=r,this.defaultValue=i,this.source=o,this.index=0,this.hasCompleted=!1,this._emitted=!1}return r(e,t),e.prototype._next=function(t){var e=this.index++;this.predicate?this._tryPredicate(t,e):this._emit(t,e)},e.prototype._tryPredicate=function(t,e){var n;try{n=this.predicate(t,e,this.source)}catch(t){return void this.destination.error(t)}n&&this._emit(t,e)},e.prototype._emit=function(t,e){this.resultSelector?this._tryResultSelector(t,e):this._emitFinal(t)},e.prototype._tryResultSelector=function(t,e){var n;try{n=this.resultSelector(t,e)}catch(t){return void this.destination.error(t)}this._emitFinal(n)},e.prototype._emitFinal=function(t){var e=this.destination;this._emitted||(this._emitted=!0,e.next(t),e.complete(),this.hasCompleted=!0)},e.prototype._complete=function(){var t=this.destination;this.hasCompleted||void 0===this.defaultValue?this.hasCompleted||t.error(new o.EmptyError):(t.next(this.defaultValue),t.complete())},e}(i.Subscriber)},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},i=function(t){function e(){var e=t.call(this,"no elements in sequence");this.name=e.name="EmptyError",this.stack=e.stack,this.message=e.message}return r(e,t),e}(Error);e.EmptyError=i},function(t,e,n){"use strict";var r=n(0),i=n(656);r.Observable.prototype.map=i.map},function(t,e,n){"use strict";var r=n(657);e.map=function(t,e){return r.map(t,e)(this)}},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},i=n(6);e.map=function(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new o(t,e))}};var o=function(){function t(t,e){this.project=t,this.thisArg=e}return t.prototype.call=function(t,e){return e.subscribe(new a(t,this.project,this.thisArg))},t}();e.MapOperator=o;var a=function(t){function e(e,n,r){t.call(this,e),this.project=n,this.count=0,this.thisArg=r||this}return r(e,t),e.prototype._next=function(t){var e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}this.destination.next(e)},e}(i.Subscriber)},function(t,e,n){"use strict";var r=n(0),i=n(659);r.Observable.prototype.mapTo=i.mapTo},function(t,e,n){"use strict";var r=n(660);e.mapTo=function(t){return r.mapTo(t)(this)}},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},i=n(6);e.mapTo=function(t){return function(e){return e.lift(new o(t))}};var o=function(){function t(t){this.value=t}return t.prototype.call=function(t,e){return e.subscribe(new a(t,this.value))},t}(),a=function(t){function e(e,n){t.call(this,e),this.value=n}return r(e,t),e.prototype._next=function(t){this.destination.next(this.value)},e}(i.Subscriber)},function(t,e,n){"use strict";var r=n(0),i=n(662);r.Observable.prototype.publishBehavior=i.publishBehavior},function(t,e,n){"use strict";var r=n(663);e.publishBehavior=function(t){return r.publishBehavior(t)(this)}},function(t,e,n){"use strict";var r=n(664),i=n(665);e.publishBehavior=function(t){return function(e){return i.multicast(new r.BehaviorSubject(t))(e)}}},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},i=n(47),o=n(125),a=function(t){function e(e){t.call(this),this._value=e}return r(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),e.prototype._subscribe=function(e){var n=t.prototype._subscribe.call(this,e);return n&&!n.closed&&e.next(this._value),n},e.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new o.ObjectUnsubscribedError;return this._value},e.prototype.next=function(e){t.prototype.next.call(this,this._value=e)},e}(i.Subject);e.BehaviorSubject=a},function(t,e,n){"use strict";var r=n(48);e.multicast=function(t,e){return function(n){var o;if(o="function"==typeof t?t:function(){return t},"function"==typeof e)return n.lift(new i(o,e));var a=Object.create(n,r.connectableObservableDescriptor);return a.source=n,a.subjectFactory=o,a}};var i=function(){function t(t,e){this.subjectFactory=t,this.selector=e}return t.prototype.call=function(t,e){var n=this.selector,r=this.subjectFactory(),i=n(r).subscribe(t);return i.add(e.subscribe(r)),i},t}();e.MulticastOperator=i},function(t,e,n){"use strict";var r=n(0),i=n(667);r.Observable.prototype.scan=i.scan},function(t,e,n){"use strict";var r=n(668);e.scan=function(t,e){return arguments.length>=2?r.scan(t,e)(this):r.scan(t)(this)}},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},i=n(6);e.scan=function(t,e){var n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new o(t,e,n))}};var o=function(){function t(t,e,n){void 0===n&&(n=!1),this.accumulator=t,this.seed=e,this.hasSeed=n}return t.prototype.call=function(t,e){return e.subscribe(new a(t,this.accumulator,this.seed,this.hasSeed))},t}(),a=function(t){function e(e,n,r,i){t.call(this,e),this.accumulator=n,this._seed=r,this.hasSeed=i,this.index=0}return r(e,t),Object.defineProperty(e.prototype,"seed",{get:function(){return this._seed},set:function(t){this.hasSeed=!0,this._seed=t},enumerable:!0,configurable:!0}),e.prototype._next=function(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)},e.prototype._tryNext=function(t){var e,n=this.index++;try{e=this.accumulator(this.seed,t,n)}catch(t){this.destination.error(t)}this.seed=e,this.destination.next(e)},e}(i.Subscriber)},function(t,e,n){"use strict";var r=n(0),i=n(670);r.Observable.prototype.skip=i.skip},function(t,e,n){"use strict";var r=n(671);e.skip=function(t){return r.skip(t)(this)}},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},i=n(6);e.skip=function(t){return function(e){return e.lift(new o(t))}};var o=function(){function t(t){this.total=t}return t.prototype.call=function(t,e){return e.subscribe(new a(t,this.total))},t}(),a=function(t){function e(e,n){t.call(this,e),this.total=n,this.count=0}return r(e,t),e.prototype._next=function(t){++this.count>this.total&&this.destination.next(t)},e}(i.Subscriber)},function(t,e,n){"use strict";var r=n(0),i=n(673);r.Observable.prototype.startWith=i.startWith},function(t,e,n){"use strict";var r=n(674);e.startWith=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return r.startWith.apply(void 0,t)(this)}},function(t,e,n){"use strict";var r=n(20),i=n(75),o=n(76),a=n(675),s=n(19);e.startWith=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return function(e){var n=t[t.length-1];s.isScheduler(n)?t.pop():n=null;var c=t.length;return 1===c?a.concat(new i.ScalarObservable(t[0],n),e):c>1?a.concat(new r.ArrayObservable(t,n),e):a.concat(new o.EmptyObservable(n),e)}}},function(t,e,n){"use strict";var r=n(19),i=n(131),o=n(676),a=n(682);e.concat=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return 1===t.length||2===t.length&&r.isScheduler(t[1])?o.from(t[0]):a.concatAll()(i.of.apply(void 0,t))}},function(t,e,n){"use strict";var r=n(677);e.from=r.FromObservable.create},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},i=n(34),o=n(126),a=n(127),s=n(128),c=n(678),l=n(20),u=n(679),d=n(77),p=n(0),f=n(680),_=n(74),h=function(t){function e(e,n){t.call(this,null),this.ish=e,this.scheduler=n}return r(e,t),e.create=function(t,n){if(null!=t){if("function"==typeof t[_.observable])return t instanceof p.Observable&&!n?t:new e(t,n);if(i.isArray(t))return new l.ArrayObservable(t,n);if(a.isPromise(t))return new s.PromiseObservable(t,n);if("function"==typeof t[d.iterator]||"string"==typeof t)return new c.IteratorObservable(t,n);if(o.isArrayLike(t))return new u.ArrayLikeObservable(t,n)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")},e.prototype._subscribe=function(t){var e=this.ish,n=this.scheduler;return null==n?e[_.observable]().subscribe(t):e[_.observable]().subscribe(new f.ObserveOnSubscriber(t,n,0))},e}(p.Observable);e.FromObservable=h},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},i=n(13),o=n(0),a=n(77),s=function(t){function e(e,n){if(t.call(this),this.scheduler=n,null==e)throw new Error("iterator cannot be null.");this.iterator=function(t){var e=t[a.iterator];if(!e&&"string"==typeof t)return new c(t);if(!e&&void 0!==t.length)return new l(t);if(!e)throw new TypeError("object is not iterable");return t[a.iterator]()}(e)}return r(e,t),e.create=function(t,n){return new e(t,n)},e.dispatch=function(t){var e=t.index,n=t.hasError,r=t.iterator,i=t.subscriber;if(n)i.error(t.error);else{var o=r.next();o.done?i.complete():(i.next(o.value),t.index=e+1,i.closed?"function"==typeof r.return&&r.return():this.schedule(t))}},e.prototype._subscribe=function(t){var n=this.iterator,r=this.scheduler;if(r)return r.schedule(e.dispatch,0,{index:0,iterator:n,subscriber:t});for(;;){var i=n.next();if(i.done){t.complete();break}if(t.next(i.value),t.closed){"function"==typeof n.return&&n.return();break}}},e}(o.Observable);e.IteratorObservable=s;var c=function(){function t(t,e,n){void 0===e&&(e=0),void 0===n&&(n=t.length),this.str=t,this.idx=e,this.len=n}return t.prototype[a.iterator]=function(){return this},t.prototype.next=function(){return this.idx<this.len?{done:!1,value:this.str.charAt(this.idx++)}:{done:!0,value:void 0}},t}(),l=function(){function t(t,e,n){void 0===e&&(e=0),void 0===n&&(n=function(t){var e=+t.length;if(isNaN(e))return 0;if(0===e||!function(t){return"number"==typeof t&&i.root.isFinite(t)}(e))return e;if((e=function(t){var e=+t;if(0===e)return e;if(isNaN(e))return e;return e<0?-1:1}(e)*Math.floor(Math.abs(e)))<=0)return 0;if(e>u)return u;return e}(t)),this.arr=t,this.idx=e,this.len=n}return t.prototype[a.iterator]=function(){return this},t.prototype.next=function(){return this.idx<this.len?{done:!1,value:this.arr[this.idx++]}:{done:!0,value:void 0}},t}();var u=Math.pow(2,53)-1},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},i=n(0),o=n(75),a=n(76),s=function(t){function e(e,n){t.call(this),this.arrayLike=e,this.scheduler=n,n||1!==e.length||(this._isScalar=!0,this.value=e[0])}return r(e,t),e.create=function(t,n){var r=t.length;return 0===r?new a.EmptyObservable:1===r?new o.ScalarObservable(t[0],n):new e(t,n)},e.dispatch=function(t){var e=t.arrayLike,n=t.index,r=t.length,i=t.subscriber;i.closed||(n>=r?i.complete():(i.next(e[n]),t.index=n+1,this.schedule(t)))},e.prototype._subscribe=function(t){var n=this.arrayLike,r=this.scheduler,i=n.length;if(r)return r.schedule(e.dispatch,0,{arrayLike:n,index:0,length:i,subscriber:t});for(var o=0;o<i&&!t.closed;o++)t.next(n[o]);t.complete()},e}(i.Observable);e.ArrayLikeObservable=s},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},i=n(6),o=n(681);e.observeOn=function(t,e){return void 0===e&&(e=0),function(n){return n.lift(new a(t,e))}};var a=function(){function t(t,e){void 0===e&&(e=0),this.scheduler=t,this.delay=e}return t.prototype.call=function(t,e){return e.subscribe(new s(t,this.scheduler,this.delay))},t}();e.ObserveOnOperator=a;var s=function(t){function e(e,n,r){void 0===r&&(r=0),t.call(this,e),this.scheduler=n,this.delay=r}return r(e,t),e.dispatch=function(t){var e=t.notification,n=t.destination;e.observe(n),this.unsubscribe()},e.prototype.scheduleMessage=function(t){this.add(this.scheduler.schedule(e.dispatch,this.delay,new c(t,this.destination)))},e.prototype._next=function(t){this.scheduleMessage(o.Notification.createNext(t))},e.prototype._error=function(t){this.scheduleMessage(o.Notification.createError(t))},e.prototype._complete=function(){this.scheduleMessage(o.Notification.createComplete())},e}(i.Subscriber);e.ObserveOnSubscriber=s;var c=function(t,e){this.notification=t,this.destination=e};e.ObserveOnMessage=c},function(t,e,n){"use strict";var r=n(0),i=function(){function t(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}return t.prototype.observe=function(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}},t.prototype.do=function(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}},t.prototype.accept=function(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)},t.prototype.toObservable=function(){switch(this.kind){case"N":return r.Observable.of(this.value);case"E":return r.Observable.throw(this.error);case"C":return r.Observable.empty()}throw new Error("unexpected notification kind value")},t.createNext=function(e){return void 0!==e?new t("N",e):t.undefinedValueNotification},t.createError=function(e){return new t("E",void 0,e)},t.createComplete=function(){return t.completeNotification},t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t}();e.Notification=i},function(t,e,n){"use strict";var r=n(129);e.concatAll=function(){return r.mergeAll(1)}},function(t,e,n){"use strict";var r=n(0),i=n(684);r.Observable.prototype.switchMap=i.switchMap},function(t,e,n){"use strict";var r=n(685);e.switchMap=function(t,e){return r.switchMap(t,e)(this)}},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},i=n(21),o=n(22);e.switchMap=function(t,e){return function(n){return n.lift(new a(t,e))}};var a=function(){function t(t,e){this.project=t,this.resultSelector=e}return t.prototype.call=function(t,e){return e.subscribe(new s(t,this.project,this.resultSelector))},t}(),s=function(t){function e(e,n,r){t.call(this,e),this.project=n,this.resultSelector=r,this.index=0}return r(e,t),e.prototype._next=function(t){var e,n=this.index++;try{e=this.project(t,n)}catch(t){return void this.destination.error(t)}this._innerSub(e,t,n)},e.prototype._innerSub=function(t,e,n){var r=this.innerSubscription;r&&r.unsubscribe(),this.add(this.innerSubscription=o.subscribeToResult(this,t,e,n))},e.prototype._complete=function(){var e=this.innerSubscription;e&&!e.closed||t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){this.innerSubscription=null},e.prototype.notifyComplete=function(e){this.remove(e),this.innerSubscription=null,this.isStopped&&t.prototype._complete.call(this)},e.prototype.notifyNext=function(t,e,n,r,i){this.resultSelector?this._tryNotifyNext(t,e,n,r):this.destination.next(e)},e.prototype._tryNotifyNext=function(t,e,n,r){var i;try{i=this.resultSelector(t,e,n,r)}catch(t){return void this.destination.error(t)}this.destination.next(i)},e}(i.OuterSubscriber)},function(t,e,n){"use strict";var r=n(0),i=n(687);r.Observable.prototype.withLatestFrom=i.withLatestFrom},function(t,e,n){"use strict";var r=n(688);e.withLatestFrom=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return r.withLatestFrom.apply(void 0,t)(this)}},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},i=n(21),o=n(22);e.withLatestFrom=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return function(e){var n;"function"==typeof t[t.length-1]&&(n=t.pop());var r=t;return e.lift(new a(r,n))}};var a=function(){function t(t,e){this.observables=t,this.project=e}return t.prototype.call=function(t,e){return e.subscribe(new s(t,this.observables,this.project))},t}(),s=function(t){function e(e,n,r){t.call(this,e),this.observables=n,this.project=r,this.toRespond=[];var i=n.length;this.values=new Array(i);for(var a=0;a<i;a++)this.toRespond.push(a);for(a=0;a<i;a++){var s=n[a];this.add(o.subscribeToResult(this,s,s,a))}}return r(e,t),e.prototype.notifyNext=function(t,e,n,r,i){this.values[n]=e;var o=this.toRespond;if(o.length>0){var a=o.indexOf(n);-1!==a&&o.splice(a,1)}},e.prototype.notifyComplete=function(){},e.prototype._next=function(t){if(0===this.toRespond.length){var e=[t].concat(this.values);this.project?this._tryProject(e):this.destination.next(e)}},e.prototype._tryProject=function(t){var e;try{e=this.project.apply(this,t)}catch(t){return void this.destination.error(t)}this.destination.next(e)},e}(i.OuterSubscriber)},function(t,e){angular.module("genius").directive("selectAllOnClick",[function(){return{restrict:"A",link:function(t,e){e.on("click",(function(t){t.target.select()}))}}}])},function(t,e){angular.module("genius").directive("setClassBeforeNavigate",["$immediate","LinkEvents","SmartRouting",function(t,e,n){return{restrict:"A",link:function(r,i,o){i.on("click",(function(r){e.should_open_in_new_window_or_tab(r,i)||o.href&&(r.preventDefault(),i.addClass(o.setClassBeforeNavigate),t((function(){return n.navigate_to_absolute_url(o.href)})))}))}}}])},function(t,e){angular.module("genius").directive("setCookieAndCloseOnClick",[function(){return{require:"^displayUnlessCookie",link:function(t,e,n,r){e.on("click",(function(){r.set_cookie_and_close(),t.$apply()}))}}}])},function(t,e){angular.module("genius").directive("setDesiredLocation",["$window","Cookies",function(t,e){return{restrict:"A",link:function(n,r,i){r.click((function(){e.put("desired_location",t.location.href,{path:"/"})}))}}}])},function(t,e){angular.module("genius").directive("shareButtons",["Session",function(t){return{scope:{song:"<"},templateUrl:"share_buttons.html",controllerAs:"ctrl",controller:[function(){this.show_report_abuse=t.has_feature("report_abuse")}]}}])},function(t,e){angular.module("genius").directive("showArrowAtOffset",[function(){return{restrict:"A",link:function(t,e){t.show_arrow_at_offset=function(t){return t>e.position().top}}}}])},function(t,e){angular.module("genius").directive("showIfBrowser",["Bowser",function(t){return{restrict:"A",link:function(e,n,r){t[r.showIfBrowser]||n.hide()}}}])},function(t,e){angular.module("genius").directive("simpleDatetimeInput",["$filter",function(t){return{restrict:"E",scope:{},require:"ngModel",templateUrl:"simple_datetime_input.html",controller:["$scope",function(t){t.datetime={};var e=(new Date).getFullYear();_.assign(t,{years:_.range(1900,e+100).reverse(),months:["January","February","March","April","May","June","July","August","September","October","November","December"].map((function(t,e){return{name:t,number:e+1}})),days:_.range(1,32),hours:_.range(0,24),minutes:_.range(0,60)})}],link:function(e,n,r,i){var o=t("cast_to_date");i.$render=function(){var t=o(i.$modelValue)||new Date;e.datetime={year:t.getFullYear(),month:t.getMonth()+1,day:t.getDate(),hour:t.getHours(),minute:t.getMinutes()}},i.$render(),e.$watch((function(){if(e.datetime&&!_.some(e.datetime,(function(t){return void 0===t})))return e.datetime.year+"/"+e.datetime.month+"/"+e.datetime.day+" "+e.datetime.hour+":"+e.datetime.minute}),(function(t){t&&i.$setViewValue(t)}))}}}])},function(t,e){angular.module("genius").directive("sizedSrc",["ImageTransform","$window",function(t,e){return{restrict:"A",scope:{sizedSrc:"<"},link:function(n,r){n.$watch("sizedSrc",(function(n){r.css("width","100%");var i=r.width()*(e.devicePixelRatio||1);r.attr("src",t.resize(n,{width:i}))}))}}}])},function(t,e){angular.module("genius").directive("slideDown",["$immediate","Bindings",function(t,e){var n=e.resolver({no_slide_when:"<noSlideWhen",slide_down_callback:"&slideDownCallback"});return{restrict:"A",link:function(e,r,i){var o=n(e,i);if(!o.no_slide_when){r.hide();t((function(){r.slideDown(200,(function(){o.slide_down_callback()}))}),!1)}}}}])},function(t,e){angular.module("genius").directive("slideOverPane",[function(){return{restrict:"E",templateUrl:"slide_over_pane.html",transclude:!0,scope:{condition:"<",closeOn:"&",scrollToTopTrigger:"<"},controller:["$scope","Bowser",function(t,e){e.ios&&(t.is_ios=!0)}]}}])},function(t,e){angular.module("genius").directive("slideUpOn",["$immediate",function(t){return{restrict:"A",link:function(e,n,r){e.$watch(r.slideUpOn,(function(e){e&&t((function(){n.slideUp(200)}),!1)}))}}}])},function(t,e){angular.module("genius").directive("songActivity",["SongClient",function(t){return{templateUrl:"song_activity.html",restrict:"E",scope:{song:"<"},controllerAs:"ctrl",controller:["$scope",function(e){var n=this,r=0,i=0;this.loading_contributors=!0,this.loading_iq_earners=!0,this.load_contributors=function(){t.load_contributor_data(e.song.id).then((function(t){i+=t.iq_earners.length,e.contributors=t,e.has_more_iq_earners=i<t.iq_earners_total,r+=1})).finally((function(){e.ctrl.loading_contributors=!1,e.ctrl.loading_iq_earners=!1}))},this.load_more_iq_earners=function(){e.loading_contributors||(n.loading_iq_earners=!0,t.load_iq_earners(e.song.id,{page:r}).then((function(t){i+=t.iq_earners.length,e.contributors.iq_earners=_.uniqBy(e.contributors.iq_earners.concat(t.iq_earners),"user.id"),e.has_more_iq_earners=i<t.iq_earners_total,r+=1})).finally((function(){e.ctrl.loading_iq_earners=!1})))},this.load_contributors()}]}}])},function(t,e){angular.module("genius").directive("songAdminMenu",[function(){return{restrict:"E",templateUrl:"song_admin_menu.html",transclude:{additional_buttons:"?additionalButtons"},controller:["$scope",function(t){t.actions=["publish","unpublish","hide","unhide","award_transcription_iq","remove_transcription_iq","reindex","mark_as_hot","unmark_as_hot","view_annotation_engagement_data","edit_spotify_annotations_for","view_lyrics_synchronization","destroy","verify_lyrics","unverify_lyrics","disable_media","enable_media","hide_apple_player","unhide_apple_player","trigger_apple_match","mark_lyrics_evaluation_as_complete","mark_lyrics_evaluation_as_staff_approved","unmark_lyrics_evaluation_as_complete","mark_lyrics_evaluation_as_un_staff_approved"]}],link:function(t){t.$watch("song.current_user_metadata",(function(){t.has_admin_items=_(t.actions).some((function(e){return t.can_perform(e)}))}))}}}])},function(t,e){angular.module("genius").directive("songMetadata",[function(){return{templateUrl:"song_metadata.html",restrict:"E",scope:{song:"<"},controllerAs:"ctrl",controller:["$scope","Session",function(t,e){this.has_permission=function(n){return e.has_permission(n,t.song)}}]}}])},function(t,e){angular.module("genius").directive("songMetadataForm",["$window","Session","TagClient","I18n",function(t,e,n,r){return{scope:{save:"&onSave",song_was:"<object",expanded_sections:"=expandedSections",yields_is_dirty:"&yieldsIsDirty"},restrict:"E",templateUrl:"song_metadata_form.html",controllerAs:"ctrl",controller:["Tracking","$scope","AppConfig",function(i,o,a){var s=this;this.apple_purposes=a.external_song_match_purposes,this.close=function(){!o.expanded_sections||s.song_form.$dirty&&!t.confirm(r.t("song.action_confirmations.dismiss_dirty"))||(o.expanded_sections=null)},this.has_permission=function(t){return e.has_permission(t,o.song)},this.submit=function(){o.save({song:o.song}).then((function(){i.track("Metadata Edit",{Source:"Edit"}),o.expanded_sections=null})).catch((function(t){s.error=t}))},o.song=angular.copy(o.song_was),o.$watch("song_was.updated_by_human_at",(function(t,e){t>e&&(s.editable_metadata_stale=!0)})),o.available_primary_tags=[],n.primary().then((function(t){o.available_primary_tags=t.map((function(t){return t.id===o.song.primary_tag.id?o.song.primary_tag:t}))}))}]}}])},function(t,e){angular.module("genius").directive("songMetadataPreview",[function(){return{templateUrl:"song_metadata_preview.html",restrict:"E",scope:{song:"<"},controllerAs:"ctrl"}}])},function(t,e){angular.module("genius").directive("songPrimaryAlbum",(function(){return{restrict:"E",templateUrl:"song_primary_album.html",scope:{album:"<"}}}))},function(t,e){angular.module("genius").directive("soundcloud",["$q","Tracking","getScript","Soundcloud",function(t,e,n,r){return{restrict:"E",templateUrl:"soundcloud.html",replace:!0,scope:{yieldsApi:"&",yieldsState:"&",soundcloud_src:"<soundcloudSrc"},link:function(i,o){i.$watch("soundcloud_src",(function(a){if(a){var s=t.defer(),c=s.promise;t.all([r.player_url_for_src(i.soundcloud_src),n("https://w.soundcloud.com/player/api.js",{cache:!0})]).then((function(t){var e,n,r=t[0];e=o,n=r.$$unwrapTrustedValue(),e.attr("src",n);var a=SC.Widget(o[0]);a.bind(SC.Widget.Events.READY,(function(){a.getDuration((function(t){t?(s.resolve(a),i.duration=t):l.has_errored=!0,i.$apply()}))}))}));var l={};i.yieldsState({state:l});var u=function(t,e,n){t.bind(e,(function(){i.$apply(n)}))},d=_.once((function(){e.track("Soundcloud play")}));c.then((function(t){l.is_loaded=!0,u(t,SC.Widget.Events.ERROR,(function(){l.has_errored=!0})),u(t,SC.Widget.Events.PAUSE,(function(){l.is_loaded=!0,l.is_playing=!1})),u(t,SC.Widget.Events.PLAY,(function(){d(),l.is_loaded=!1,l.is_playing=!0})),t.bind(SC.Widget.Events.PLAY_PROGRESS,_.throttle((function(t){i.$apply((function(){l.is_loaded=!0,l.percentage=t.relativePosition,l.time_remaining=i.duration-t.currentPosition}))}),100))})),i.yieldsApi({api:{load_media:function(){},playpause:function(){c.then((function(t){l.is_playing?t.pause():t.play()}))},pause:function(){c.then((function(t){t.pause()}))},seek_to:function(t){l.percentage=t,c.then((function(e){e.seekTo(i.duration*t)}))}}}),c.then((function(t){r.oembed_url_for_src(a).then(t.load.bind(t))}))}}))}}}])},function(t,e){angular.module("genius").directive("spotifyOnboarding",["AppConfig",function(t){return{link:function(e,n){e.app_store_url=t.app_store_url,e.jump_below_onboarding=function(){var t=n.position().top+n.outerHeight();$("html, body").animate({scrollTop:t},150)}}}}])},function(t,e){angular.module("genius").directive("standaloneReferent",(function(){return{templateUrl:"standalone_referent.html",restrict:"E",scope:{referent:"<object",variants:"<",yields_api:"&yieldsApi",on_pending_event:"&onPendingEvent",yields_iq:"&yieldsIq",focused_comments:"<focusedComments"},controller:["$scope","$window","$immediate",function(t,e,n){n((function(){e.parent.postMessage({sentinel:"amp",type:"embed-size",height:e.document.body.scrollHeight},"*")})),this.disables_user_tooltips=_.get(t,"variants.disableTooltips")}]}}))},function(t,e){angular.module("genius").directive("standardRichContent",(function(){return{restrict:"E",scope:{html:"<",variants:"<"},templateUrl:"standard_rich_content.html",controller:["$element","$scope","$sce","Facebook",function(t,e,n,r){e.$watch("html",(function(i){i?(e.trusted_html=n.trustAsHtml(i),e.$applyAsync((function(){return r.process_embeds(t[0])}))):Reflect.deleteProperty(e,"trusted_html")}))}]}}))},function(t,e){angular.module("genius").directive("sticky",["Waypoint","$immediate","Bindings",function(t,e,n){var r=n.resolver({sticky:"<"});return{restrict:"A",link:function(n,i,o){var a,s=r(n,o),c=o.stickyClass;if("stickyUseParentAsWrapper"in o)a=!1;else{var l=o.stickyWrapperClass||"sticky_wrapper";a='<div class="'.concat(l,'">')}var u=!1;e((function(){var e=void 0!==s.sticky,r=new t.Sticky({element:i,wrapper:a,stuckClass:c,offset:function(){return o.stickyOffset||"0"},handler:function(){return u=!u},enabled:!e});e&&n.$watch((function(){return s.sticky}),(function(){s.sticky?r.waypoint.enable():r.waypoint.disable()}))}),!1)}}}])},function(t,e){angular.module("genius").directive("stopPropagation",(function(){return{restrict:"A",link:function(t,e,n){e.on(n.stopPropagation,(function(t){t.stopPropagation()}))}}}))},function(t,e){angular.module("genius").directive("submitOnCmdEnter",(function(){return{restrict:"A",require:"form",link:function(t,e,n,r){e.on("keydown",(function(n){13===n.keyCode&&(n.metaKey||n.shiftKey)&&(t.$apply((function(){r.$commitViewValue()})),e.triggerHandler("submit"),n.preventDefault())}))}}}))},function(t,e){angular.module("genius").directive("svg",["Bowser","ShimInnerHtmlProp","$templateCache","$immediate",function(t,e,n,r){var i=function(e,i){var o=$(n.get(i));e.html(o[0].innerHTML),_.each(o[0].attributes,(function(t){e[0].setAttribute(t.name,t.value)}));var a=e.get(0).getAttribute("viewBox");(t.msie||t.msedge)&&a&&r((function(){var t=a.split(" ");t.length>3&&e.width(e.height()*(parseInt(t[2])/parseInt(t[3])))}),!1)};return{link:function(t,n,r){e(),"src"in r&&i(n,r.src),"ngSrc"in r&&t.$watch(r.ngSrc,(function(t){t&&i(n,t)}))}}}])},function(t,e){angular.module("genius").directive("tetherDrop",["$immediate","TetherDrop",function(t,e){return{restrict:"E",scope:{containerClasses:"@",position:"@",showOn:"@",visible:"<?",onClose:"&",yieldsApi:"&?"},transclude:"true",link:function(n,r,i,o,a){var s,c=new e({content:s||"",target:r.closest("[tether-drop-target]")[0],position:n.position||"right middle",openOn:n.showOn,remove:!0,loadContentOnDemand:!0,hoverOpenDelay:250,tetherOptions:{constraints:[{to:"window",attachment:"together element",pin:!0}],classes:{element:n.containerClasses}}});c.once("open",(function(){a((function(e){var n=$(c.content);n.hide(),s=$("<div>").append(e)[0],n.append(s),t((function(){n.show(),c.position()}))}))})),c.on("close",n.onClose),"visible"in i&&n.$watch("!!visible",(function(t){t?c.open():c.close()})),n.$watch((function(){return c.position})),n.$on("$destroy",(function(){return c.destroy()}));var l={hide:c.close.bind(c),show:c.open.bind(c)};"yieldsApi"in i&&n.yieldsApi({tetherApi:l})}}}])},function(t,e){angular.module("genius").component("textCorrector",{bindings:{text:"<",proposing_edit:"<proposingEdit",cancel:"&",submit:"&",yields_text_corrector:"&yieldsTextCorrector"},templateUrl:"text_corrector.html",controller:["$q","$window","I18n",function(t,e,n){this.submit_form=function(){return this.saving=!0,t.when(this.submit({corrected:this.text})).finally(function(){delete this.saving,this.correction_form.$setPristine()}.bind(this))},this.cancel_correction=function(){this.is_dirty()&&!e.confirm(n.t("editing.dirty_unload_confirm_box"))||(this.correction_form.$rollbackViewValue(),this.correction_form.$setPristine(),this.cancel())},this.yields_text_corrector({text_corrector:{cancel:this.cancel_correction.bind(this)}})}]})},function(t,e){angular.module("genius").directive("textSelectionChanged",["TextSelection",function(t){return{restrict:"A",scope:{textSelectionChanged:"&"},link:function(e,n){t.$on("selection",(function(t,r){var i=r.ranges.filter((function(t){return n[0].contains(function(t){for(var e=t.commonAncestorContainer;e.nodeType!==Node.ELEMENT_NODE;)e=e.parentNode;return e}(t))}));e.textSelectionChanged({ranges:i})}))}}}])},function(t,e){angular.module("genius").directive("textarea",["Autosize","$immediate",function(t,e){return{restrict:"E",link:function(n,r,i){if(!("autosizeOff"in i)){var o=function(){t.update(r)},a=function(){t(r)};"autosizeInitOnFocus"in i?r.on("focus",a):e(a,!1),r.on("change",o),n.$watch(i.ngModel,(function(t){t!==r.val()&&e(o,!1)})),i.ngShow&&n.$watch(i.ngShow,(function(t){t&&e(o,!1)}))}}}}])},function(t,e){angular.module("genius").directive("timeAgo",[function(){return{restrict:"E",templateUrl:"time_ago.html",scope:{time:"<"}}}])},function(t,e){angular.module("genius").directive("timestampInput",["timestamp_for_displayFilter",function(t){return{scope:{timestamp:"=ngModel",ngDisabled:"<"},template:'<input ng-model="string" ng-disabled="ngDisabled" type="text"/>',link:function(e,n){e.$watch("timestamp",(function(n){e.string=t(n)})),n.find("input").on("blur",(function(){e.timestamp=function(t){if(!t)return null;var e=t.split(":");return Math.floor(1e3*(60*parseInt(e[0]||"0",10)+parseFloat(e[1]||"0")))}(e.string),e.$apply()}))}}}])},function(t,e){angular.module("genius").directive("tracking",["Tracking","Waypoint","$immediate",function(t,e,n){return{restrict:"A",link:function(r,i,o){var a=function(){t.track(o.trackingEvent,r.$eval(o.trackingOptions))};if("scroll_into_view"===o.tracking)n((function(){new e({element:i,handler:function(){a(),this.destroy()},offset:"100%"})}));else i.bind(o.tracking,a)}}}])},function(t,e){angular.module("genius").directive("tracksLinkWithClass",["$document",function(t){return{restrict:"A",link:function(e,n,r){if(void 0!==window.mixpanel){n.addClass(r.tracksLinkWithClass);var i=r.withEventName||"clicked_"+r.tracksLinkWithClass;mixpanel.track_links("."+r.tracksLinkWithClass,i,{"from url":t[0].location.href})}}}}])},function(t,e){angular.module("genius").directive("transcludeInjectingLocalScope",(function(){return{restrict:"E",link:function(t,e,n,r,i){if(!i)throw{message:"Illegal use of transcludeInjectingLocalScope directive in the template! No parent directive that requires a transclusion found.",element:e};var o=t.$new();i(o,(function(t){e.empty(),e.append(t),e.on("$destroy",(function(){o.$destroy()}))}))}}}))},function(t,e){angular.module("genius").directive("upwardsInfiniteScroll",["$throttle",function(t){return{restrict:"A",link:function(e,n,r){var i=r.upwardsInfiniteScroll,o=!1;r.infiniteScrollDisabled&&e.$watch(r.infiniteScrollDisabled,(function(t){o=t,a()}));var a=function(){o||n.scrollTop()<.1*n.height()&&e.$eval(i)};a(),n.on("scroll",t(a,250,{leading:!1}))}}}])},function(t,e){angular.module("genius").directive("userBadge",(function(){return{restrict:"E",templateUrl:"user_badge.html",scope:{user:"<object",size:"@",pinned_role:"<pinnedRole",anonymous_user:"<anonymousUser",sponsor:"<",variants:"<"},require:"^?standaloneAnnotation",link:function(t,e,n,r){t.disables_user_tooltips=r&&r.disables_user_tooltips;var i=!_.includes(["small","x_small"],t.size);t.is_two_lines=i,t.user&&(t.avatar_url=i?t.user.avatar.small.url:t.user.avatar.thumb.url)}}}))},function(t,e){angular.module("genius").directive("userBadgeAndTimestamp",(function(){return{restrict:"E",templateUrl:"user_badge_and_timestamp.html",scope:{size:"@",user:"<",pinned_role:"<pinnedRole",anonymous_user:"<anonymousUser",time:"<",sponsor:"<",variants:"<"}}}))},function(t,e){angular.module("genius").directive("userTooltip",(function(){return{restrict:"E",templateUrl:"user_tooltip.html",scope:{user:"<"}}}))},function(t,e){angular.module("genius").directive("voters",["VoteClient",function(t){return{restrict:"E",templateUrl:"voters.html",scope:{type:"@",object:"<"},link:function(e){e.load=function(){t.load_voters(e.type,e.object.id).then((function(t){e.loaded_voters=!0,e.voters=t,e.object.votes_total=t.votes_total}))},e.$on("update_voters",(function(t){e.loaded_voters=!1,e.load()})),e.load()}}}])},function(t,e){angular.module("genius").directive("voting",[function(){var t={down:-1,up:1};return{restrict:"E",templateUrl:"voting.html",scope:{voteTotalClicked:"&",voteable:"<object",type:"@",onUnauthorized:"&",variants:"<"},controllerAs:"ctrl",controller:["$scope","Session","Tracking","VoteClient","Reversible",function(e,n,r,i,o){this.submit_vote=function(a){var s=e.voteable.current_user_metadata.interactions.vote;if(a===s&&(a=void 0),!n.user_signed_in)return r.track("Logged out vote attempt"),e.onUnauthorized({vote:a});n.has_permission("vote",e.voteable)&&(e.voteable.current_user_metadata.interactions.vote=a,function(n,r){var a=(t[n]||0)-(t[r]||0),s={votes_total:e.voteable.votes_total+a};e.voteable.has_voters||(s.has_voters=!0);var c=o.modify(e.voteable,s);i.submit_vote(e.type,e.voteable.id,n).then((function(){e.$emit("vote_saved")})).catch((function(){c(),e.voteable.current_user_metadata.interactions.vote=r}))}(a,s),e.$emit("vote_submitted",e.type,a))}}]}}])},function(t,e){angular.module("genius").directive("watchImagesLoaded",["$immediate","$q",function(t,e){return{restrict:"A",link:function(n,r,i){var o=i.watchImagesLoaded||"ngBindHtml";n.$watch(o,(function(i){i?t((function(){e((function(t){r.waitForImages(t)})).then((function(){n.$emit("images_loaded")}))}),!1):n.$emit("images_loaded")}))}}}])},function(t,e){angular.module("genius").directive("webAnnotatorRoleRow",[function(){return{templateUrl:"web_annotator_role_row.html",scope:{on_create:"&onCreate",on_error:"&onError",user_role:"<userRole"},bindToController:!0,controllerAs:"$ctrl",controller:["WebAnnotatorClient","$q",function(t,e){var n=this,r=function(){return _.pick(n.user_role,["user_login","role","page_moderator","auto_feature"])};this.$onInit=function(){this.editing=!this.user_role.id},this.create=function(){n.saving=!0,e.when(n.on_create({params:r()})).then((function(){n.user_role={auto_feature:!0}})).catch((function(t){n.on_error({error:t})})).finally((function(){n.saving=!1}))},this.save=function(){n.saving=!0,t.update_user_role(n.user_role.id,r()).then((function(t){n.user_role=t,n.editing=!1})).catch((function(t){n.on_error({error:t})})).finally((function(){n.saving=!1}))},this.destroy=function(){n.user_role._deleted=!0,t.destroy_user_role(n.user_role.id).catch((function(t){n.on_error({error:t}),n.user_role._deleted=!1}))}}]}}])},function(t,e){angular.module("genius").directive("yieldsBoundingBoxHeight",["$immediate",function(t){return{restrict:"A",scope:{yieldsBoundingBoxHeight:"&"},link:function(e,n){t((function(){var t=n[0].getBoundingClientRect().height;e.yieldsBoundingBoxHeight({height:t})}))}}}])},function(t,e){angular.module("genius").directive("youtubePlayer",["$document","Youtube",function(t,e){var n=/http:\/\/www\.youtube\.com\/watch\?v=(.*)/i;return{restrict:"E",scope:{src:"<?",start:"<?",controls:"<?",fullscreen:"<?",yields_api:"&yieldsApi",yields_state:"&yieldsState",eager_load:"<?eagerLoad",autoplay:"<?",playsinline:"<?",on_playing:"&onPlaying"},link:function(r,i){r.state={};var o=t[0].createElement("div");i[0].appendChild(o);var a=new e(o,{controls:r.controls,fullscreen:r.fullscreen,playsinline:r.playsinline});r.$watch("src",(function(t){var e=t.match(n)[1];a.cue_video_by_id(e,r.start||0),r.eager_load&&(a.api.load_media(),r.autoplay&&(a.api.mute(),a.api.playpause())),r.yields_api({api:a.api}),r.yields_state({state:a.state})})),a.state.$watch("is_playing",(function(t){t&&r.on_playing()}))}}}])},function(t,e){angular.module("genius").factory("$debounce",["$timeout",function(t){return function(e,n){var r;return function(){t.cancel(r),r=t(e,n)}}}])},function(t,e){angular.module("genius").factory("$immediate",["$timeout",function(t){return function(e,n){return t(e,0,n)}}])},function(t,e){angular.module("genius").factory("$throttle",["$rootScope",function(t){return function(e,n,r){return _.throttle((function(){var n=arguments;t.$apply((function(){e.apply(null,n)}))}),n,r)}}])},function(t,e){angular.module("genius").factory("AbTest",["AbTestClient","LocalStorage","$q","AppConfig",function(t,e,n,r){return{get_variant_for:function(t){return this.get_ab_tests().then((function(e){return e[t]}))},get_ab_tests:_.once((function(){var i=e.safe_get_item("ab_tests",null);return i&&_.every(r.ab_tests,(function(t){return _.has(i,t)}))?n.resolve(i):t.get().then((function(t){var n=t.ab_tests;return e.safe_set_item("ab_tests",n),n}))})),clear:function(){e.safe_remove_item("ab_tests")}}}])},function(t,e){angular.module("genius").factory("AbTestClient",["ApiClient",function(t){return{get:function(){return t.get("/ab_tests")}}}])},function(t,e){angular.module("genius").factory("AccomplishmentClient",["ApiClient",function(t){return{update:function(e,n){return t.put("/accomplishments/:accomplishment_id",_.merge({accomplishment_id:e},n))}}}])},function(t,e){angular.module("genius").factory("AdminTaskClient",["ApiClient",function(t){return{get:function(e){return t.get("/admin_tasks/".concat(e))},perform_task:function(e,n){return t.post("/admin_tasks/".concat(e.name,"/perform"),{property_values:n})}}}])},function(t,e){angular.module("genius").factory("Ads",["$location","$q","$window","ApiClient","application_bootstrap",function(t,e,n,r,i){n["Genius.ads"]=n["Genius.ads"]||[];var o=e((function(t){return n["Genius.ads"].push(t)}));return o.then((function(t){i.after(t.trigger_user_syncs.bind(t))})),{ensure_targeting_for_placements:function(t){return o.then((function(e){return e.ensure_targeting_for_placements(t)}))},id_for:function(t,e){return o.then((function(n){return n.id_for(t,e)}))},reset_for_new_page_view:function(t){var e=t.targeting;return o.then((function(t){t.reset_for_new_page_view({targeting:e})}))},render:function(n,i,a){return o.then((function(o){return e((function(e){o.render(n,i,a).then((function(o){t.search().log_ads&&function(e,n,i){r.post("/client_logs/gpt_slot_rendered/".concat(t.search().log_ads),Object.assign({name:e,instance:n,url:t.url(),hb_bidder:_.get(i.slot.getTargetingMap(),["hb_bidder",0]),hb_adid:_.get(i.slot.getTargetingMap(),["hb_adid",0])},i.slot.getResponseInformation()))}(n,i,o),e(o)}))}))}))},dispose:function(t,n){return o.then((function(r){return e((function(e){r.dispose(t,n).then(e)}))}))},get_base_targeting:function(t){return o.then((function(n){return e((function(e){e(n.get_base_targeting(t))}))}))},get_async_targeting:function(t,n){return o.then((function(r){return e((function(e){r.get_async_targeting(t,n).then(e)}))}))}}}])},function(t,e){angular.module("genius").factory("AdwordsAdClient",["AppConfig","$http",function(t,e){return{all:function(n){return e.get("".concat(t.api_root_url,"/adwords_ads?adwords_ad_group_id=").concat(n)).then((function(t){return t.data.response.ads}))},create:function(n,r){return e.post("".concat(t.api_root_url,"/adwords_ads"),{ad:r,adwords_ad_group_id:n}).then((function(t){return t.data.response.ad}))},update:function(n,r){return e.put("".concat(t.api_root_url,"/adwords_ads/").concat(n),{ad:r}).then((function(t){return t.data.response.ad}))}}}])},function(t,e){angular.module("genius").factory("AdwordsAdGroupClient",["AppConfig","$http",function(t,e){return{all:function(n){return e.get("".concat(t.api_root_url,"/adwords_ad_groups?adwords_campaign_id=").concat(n)).then((function(t){return t.data.response.ad_groups}))},create:function(n,r){return e.post("".concat(t.api_root_url,"/adwords_ad_groups"),{ad_group:r,adwords_campaign_id:n}).then((function(t){return t.data.response.ad_group}))}}}])},function(t,e){angular.module("genius").factory("AdwordsCampaignClient",["AppConfig","$http",function(t,e){return{all:function(){return e.get("".concat(t.api_root_url,"/adwords_campaigns")).then((function(t){return t.data.response.campaigns}))},create:function(n){return e.post("".concat(t.api_root_url,"/adwords_campaigns"),{campaign:n}).then((function(t){return t.data.response.campaign}))}}}])},function(t,e){angular.module("genius").factory("AdwordsNetworkClient",["$http","AppConfig",function(t,e){return{all:function(){return t.get("".concat(e.api_root_url,"/adwords_networks")).then((function(t){return t.data.response.networks}))}}}])},function(t,e){angular.module("genius").factory("AlbumClient",["ApiClient",function(t){return{autocomplete:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.returning("albums").get("/albums/autocomplete",Object.assign({q:e},n))},load_leaderboard:function(e,n){return t.get("/albums/".concat(e,"/leaderboard"),n)},update:function(e,n){return t.returning("album").put("/albums/".concat(e),{album:n,text_format:"html,markdown"})},update_tracklist:function(e,n){return t.returning("album_appearances").put("/albums/".concat(e,"/tracklist"),{tracklist:n})},delete:function(e){return t.delete("/albums/".concat(e))},change_lock_state:function(e,n){return t.returning("album").put("/albums/".concat(e,"/change_lock_state"),{state_event:n})}}}])},function(t,e){angular.module("genius").factory("AnnotationClient",["$q","ApiClient","Session","Reversible","Markdown",function(t,e,n,r,i){var o=function(t){var e=n.user_signed_in?"html,markdown":"html";return t.extend({params:{text_format:e}})},a=function(t,n){return e.use(o).returning("annotation_edit").post("/annotation_edits/:edit_id/:action",{edit_id:n,action:t})};return{save:function(n,a){var s,c,l,u={body:{markdown:n._editing.markdown},edit_note:n._editing.edit_note};n._editing._has_source&&(u.source=n._editing.source),n._editing.custom_preview!==n.custom_preview&&(u.custom_preview=n._editing.custom_preview),n.id?(c=n.id,l={annotation:u},s=e.use(o).put("/annotations/:annotation_id",_.merge(l,{annotation_id:c}))):s=function(t,n){return e.use(o).post("/referents/:referent_id/annotations",_.merge(n,{referent_id:t}))}(a.referent.id,{annotation:u});var d=r.modify(n,{"body.html":i.to_html(n._editing.markdown),new:!1,source:u.source});return s.then((function(t){return _.assign(a.referent,t.referent),_.assign(n,t.annotation)})).catch((function(){return d(),t.reject()}))},safe_delete:function(t){return function(t,e){return t._deleted=!0,e.catch((function(){Reflect.deleteProperty(t,"_deleted")}))}(t,this.delete(t.id))},delete:function(t){return e.delete("/annotations/:annotation_id",{annotation_id:t})},accept:function(i,a){var s=a.referent,c=r.modify(s,{classification:"unreviewed"===s.classification?"accepted":s.classification}),l=r.modify(i,{state:"accepted",accepted_by:n.current_user,"current_user_metadata.permissions":["edit"]});return e.use(o).returning("annotation").post("/annotations/:annotation_id/accept",{annotation_id:i.id}).then((function(t){return _.assign(i,t)})).catch((function(){return c(),l(),t.reject()}))},safe_reject:function(e,n){var i,o=n.comment,a=_.assign({},o,{body:o.body.markdown,reason:o.reason?o.reason.raw_name:void 0});return i=function(t){return 0===t.comment_count}(e)?r.modify(e,{_deleted:!0}):r.modify(e,{needs_exegesis:!0}),this.reject(e.id,{comment:a}).then((function(t){var r=t||{};_.assign(e,r.annotation||{_deleted:!0}),_.assign(n.referent,r.referent||{_deleted:!0})})).catch((function(){return i(),t.reject()}))},reject:function(t,n){return e.use(o).post("/annotations/:annotation_id/reject",_.merge(n,{annotation_id:t}))},pin_to_profile:function(t){return e.use(o).put("/annotations/:annotation_id/pin_to_profile",{annotation_id:t})},unpin_from_profile:function(t){return e.use(o).put("/annotations/:annotation_id/unpin_from_profile",{annotation_id:t})},toggle_cosign:function(t,n){return e.use(o).put("/annotations/:annotation_id/".concat(n?"":"un","cosign"),{annotation_id:t})},clear_votes:function(t){return e.delete("/votes",{annotation_id:t})},report_as_abusive:function(t){return e.post("/annotations/:annotation_id/report_as_abusive",{annotation_id:t})},load_versions:function(t){return e.use(o).returning("versions").get("/annotations/:annotation_id/versions",{annotation_id:t})},revert_to_version:function(t,n){return e.use(o).returning("annotation").put("/annotations/:annotation_id/version",{annotation_id:t,version_id:n})},propose_edit:function(t){var n={body:{markdown:t._editing.markdown},edit_note:t._editing.edit_note};return e.use(o).returning("annotation_edit").post("/annotations/:annotation_id/edits",{annotation_id:t.id,annotation:n})},proposed_edits:function(t){return e.use(o).returning("annotation_edits").get("/annotations/:annotation_id/edits",{annotation_id:t})},merge_edit:function(t){return a("merge",t)},reject_edit:function(t){return a("reject",t)}}}])},function(t,e){angular.module("genius").factory("AnswerClient",["$http","$q","AppConfig","Session","Reversible","Markdown",function(t,e,n,r,i,o){var a=function(t){var n=new Error(t.data.meta.message);return _.assign(n,_.pick(t,"status","statusText")),e.reject(_.assign(n,t.data.response))};return{save:function(s,c){var l,u,d,p,f={body:{markdown:s._editing.markdown},pin_question:s._editing.pin_question};r.has_permission("update_answer_source",c.question)&&(f.answer_source=s.answer_source),s.id?(u=s.id,d={answer:f},p={text_format:r.user_signed_in?"html,markdown":"html"},l=t.put("".concat(n.api_root_url,"/answers/").concat(u),d,{params:p}).then((function(t){return t.data.response})).catch((function(t){return a(t)}))):l=c.question.id?function(e,i){var o={text_format:r.user_signed_in?"html,markdown":"html"};return t.post("".concat(n.api_root_url,"/questions/").concat(e,"/answers"),i,{params:o}).then((function(t){return t.data.response})).catch((function(t){return a(t)}))}(c.question.id,{answer:f}):function(e,i){var o={text_format:r.user_signed_in?"html,markdown":"html"};return i=_.assign({},i,{question:_.pick(e,["body","questionable_id","questionable_type","default_key","state"])}),t.post("".concat(n.api_root_url,"/answers"),i,{params:o}).then((function(t){return t.data.response})).catch((function(t){return a(t)}))}(c.question,{answer:f});var h=i.modify(s,{"body.html":o.to_html(s._editing.markdown),new:!1}),m={};f.pin_question&&(m.state="pinned");var g=i.modify(c.question,m);return l.then((function(t){return _.assign(c.question,_.omit(t.question,"answer")),_.assign(s,t.answer)})).catch((function(t){return h(),g(),e.reject(t)}))},destroy:function(r,o){var s=r.id;if(!s)return e.reject(new Error("Answer hasn't been saved yet."));var c=i.modify(o.question.current_user_metadata,{permissions:o.question.current_user_metadata.permissions.concat("add_answer")});return t.delete("".concat(n.api_root_url,"/answers/").concat(s)).then((function(t){return _.assign(o.question,_.omit(t.question,"answer")),t.data.response})).catch((function(t){return c(),a(t)}))}}}])},function(t,e){function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}function a(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function s(t){var e="function"==typeof Map?new Map:void 0;return s=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return c(t,arguments,d(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),u(r,t)},s(t)}function c(t,e,n){return c=l()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&u(i,n.prototype),i},c.apply(null,arguments)}function l(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function u(t,e){return u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},u(t,e)}function d(t){return d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},d(t)}function p(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}angular.module("genius").factory("ApiClient",["$http","AppConfig","PromiseQueue","BeforeUnloadCheck",function(t,e,n,i){var c=new n;i.add((function(){return!c.is_empty()}));var f=function(t){var e=_.isObject(t)&&_.isObject(t.data)&&_.has(t.data,"meta")&&_.has(t.data,"response"),n=_.isObject(t)&&204===t.status&&""===t.data;return e||n},h=function t(e){p(this,t),_.assign(this,e.data.response)},m=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(i,t);var e,n,r=(e=i,n=l(),function(){var t,r=d(e);if(n){var i=d(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return a(this,t)});function i(t,e){var n;return p(this,i),(n=r.call(this,t)).status=e.status,n.response=e.data,n.stack=Error().stack,n}return o(i,[{key:"name",get:function(){return"ApiError"}}]),i}(s(Error)),g=function(t,e){return t.split("/").map((function(n){return n.replace(/^:(\w+)$/,(function(n,r){if(_.has(e,r)&&null!=e[r]){var i=e[r];return Reflect.deleteProperty(e,r),i}throw Error("Missing param '".concat(r,"' for API path '").concat(t,"'"))}))})).join("/")},v=function(t){return function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!_.startsWith(n,"/"))throw Error("Path must start with /");r=_.clone(r),n=g(e.api_root_url+n,r);var i="get"===t||"delete"===t?{params:r}:{data:r};return this.extend({method:t,url:n}).merge(i).send()}};return function(){function e(t,n){p(this,e),this._config=t,this._transform=n}return o(e,[{key:"_update",value:function(t){var n=_.assign({config:this._config,transform:this._transform},t);return new e(n.config,n.transform)}},{key:"_is_get",value:function(){return"get"===this._config.method}},{key:"extend",value:function(t){return this._update({config:_.assign({},this._config,t)})}},{key:"merge",value:function(t){return this._update({config:_.merge({},this._config,t)})}},{key:"use",value:function(t){return _.tap(t(this),(function(t){if(!(t instanceof e))throw TypeError("Result of ApiRequest#use() must be an ApiRequest")}))}},{key:"set_param",value:function(t,e){return this.merge({params:r({},t,e)})}},{key:"transform",value:function(t){return this._update({transform:_.flow(this._transform,t)})}},{key:"returning",value:function(t){return this.transform(_.property(t))}},{key:"send",value:function(){var e=this;return(this._is_get()?t(this._config):c.add((function(){return t(e._config)}))).catch((function(t){var e=_.isObject(t.data)?function(t){if(f(t)){var e=t.data.meta.message||t.statusText,n=new m(e,t);return _.assign(n,{response:t.data.response})}return new m(t.statusText,t)}(t):new m(t.statusText,t);return Promise.reject(e)})).then((function(t){return f(t)?Promise.resolve(new h(t)):Promise.reject(new m("Invalid response",t))})).then(this._transform)}},{key:"then",value:function(t,e){return this._response=this._response||this.send(),this._response.then(t,e)}},{key:"get",get:function(){return v("get")}},{key:"post",get:function(){return v("post")}},{key:"put",get:function(){return v("put")}},{key:"delete",get:function(){return v("delete")}}],[{key:"empty",value:function(){return new e({},_.identity)}}]),e}().empty()}])},function(t,e){angular.module("genius").constant("AppConfig",window.APP_CONFIG)},function(t,e,n){"use strict";n.r(e);var r=n(2),i=n.n(r);function o(t,e,n,r,i,o,a){try{var s=t[o](a),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,i)}function a(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var a=t.apply(e,n);function s(t){o(a,r,i,s,c,"next",t)}function c(t){o(a,r,i,s,c,"throw",t)}s(void 0)}))}}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}angular.module("genius").factory("AppleAudioPlayback",["$interval","$rootScope",function(t,e){return function(){function n(r){var o=this,s=r.instance,c=r.external_song,l=c.provider_id,u=c.duration_ms;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.instance=s,this.apple_id=l,this.duration=u,this.player=s.player,this.type="apple_audio",this.label="Apple Music",this.userHasRequestedPlayback=!1,this.emitter=e.$new(),t((function(){return o.emitter.$emit("state",o.state)}),50),this.instance.addEventListener("playbackTimeDidChange",a(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o.player.currentPlaybackTime!==o.player.currentPlaybackDuration){t.next=5;break}return t.next=3,o.player.pause();case 3:return t.next=5,o.player.seekToTime(0);case 5:case"end":return t.stop()}}),t)})))),this.instance.setQueue({song:this.apple_id}).then((function(){return o.preloadAudio()}))}var r,o,c;return r=n,(o=[{key:"$on",value:function(t,e){return this.emitter.$on(t,e)}},{key:"playing",get:function(){return this.player.isPlaying}},{key:"position",get:function(){return 1e3*this.player._currentPlayer.audio.currentTime}},{key:"loading",get:function(){return!(this.player.nowPlayingItem&&isFinite(this.player._currentPlayer.audio.duration))}},{key:"state",get:function(){return{position:this.position,percentage:this.position/this.duration,time_elapsed:this.position,time_remaining:this.duration-this.position,is_loading:this.loading,is_playing:this.playing}}},{key:"api",get:function(){var t=this;return{play:function(){return t.userHasRequestedPlayback=!0,t.instance.isAuthorized?t.player.play():t.instance.authorize().then(t.player.play)},pause:function(){return t.player.pause()},playpause:function(){return t.playing?t.api.pause():t.api.play()},seek_to:function(e){return t.api.seek_to_position(t.duration*e)},seek_to_position:function(e){return t.playing?t.player.seekToTime(e/1e3):t.api.play().then((function(){return t.player.seekToTime(e/1e3)}))}}}},{key:"preloadAudio",value:function(){var t=this;if(this.instance.isAuthorized)return this.player._currentPlayer.audio.addEventListener("playing",(function e(){t.userHasRequestedPlayback||t.player.pause(),t.player._currentPlayer.audio.removeEventListener("playing",e)})),this.player.play()}}])&&s(r.prototype,o),c&&s(r,c),n}()}])},function(t,e){angular.module("genius").factory("AppleMatchEvaluationsClient",["ApiClient",function(t){return{submit:function(e,n){return t.put("/apple_match_evaluations/".concat(e),{evaluation:n})},skip:function(e){return t.put("/apple_match_evaluations/".concat(e),{evaluation:{checked_out_at:null}})}}}])},function(t,e){angular.module("genius").factory("application_bootstrap",["$q",function(t){var e=!1,n=t.defer(),r=[];return{before:function(t){e||t()},after:function(t){if(e)return t();r.push(n.promise.then(t))},done:function(){return e=!0,n.resolve(),t.all(r)}}}])},function(t,e){angular.module("genius").factory("ArticleClient",["$http","AppConfig","ApiClient",function(t,e,n){return{index:function(n){return t.get("".concat(e.api_root_url,"/articles"),{params:n}).then((function(t){return t.data.response}))},delete:function(t){return n.delete("/articles/".concat(t))},update_featured_slots:function(t){return n.put("/articles/featured_slots",{featured_articles:t})}}}])},function(t,e){angular.module("genius").factory("ArtistClient",["$http","AppConfig","ApiClient",function(t,e,n){var r={autocomplete_api_endpoint:"".concat(e.api_root_url,"/artists/autocomplete"),autocomplete:function(e){return t.get(r.autocomplete_api_endpoint,{params:{q:e}}).then((function(t){return t.data.response.artists}))},autocomplete_options:{minChars:2,parse:function(t){return _.map(t.response.artists,(function(t){return{data:[t.name,t],value:t,result:t}}))}},load:function(n){return t.get("".concat(e.api_root_url,"/artists/").concat(n)).then((function(t){return t.data.response.artist}))},update:function(n,r){return t.put("".concat(e.api_root_url,"/artists/").concat(n),{artist:_.pick(r,["name","alternate_names","image_url","header_image_url","instagram_name","twitter_name","facebook_name","translation_artist"]),text_format:"html,markdown"}).then((function(t){return t.data.response.artist}))},load_albums:function(n,r){return t.get("".concat(e.api_root_url,"/artists/").concat(n,"/albums"),{params:r}).then((function(t){return t.data.response}))},load_leaderboard:function(n,r){return t.get("".concat(e.api_root_url,"/artists/").concat(n,"/leaderboard"),{params:r}).then((function(t){return t.data.response}))},merge:function(n,r){return t.put("".concat(e.api_root_url,"/artists/").concat(n,"/merge"),{target:{name:r}}).then((function(t){return t.data.response}))},get_slug:function(t){return _(this.get_path(t).split("/")).last()},get_path:function(t){return new URL(t.url).pathname},activity_line_items:function(n,r){return t.get("".concat(e.api_root_url,"/artists/").concat(n,"/activity_stream/line_items"),{params:r}).then((function(t){return t.data.response}))},contribution_opportunities:function(t,e){return n.get("/artists/:id/contribution_opportunities",_.merge(e,{id:t,text_format:"html,markdown"}))}};return r}])},function(t,e){angular.module("genius").factory("AssetClient",["$http",function(t){return{remove:function(e){return t.post("/assets/remove",{asset_url:e})}}}])},function(t,e){angular.module("genius").factory("AsyncAnalytics",["$document","$q","$immediate","AnalyticsConfig","Librato","Tracking","wait_for_global",function(t,e,n,r,i,o,a){var s="dimension2",c="dimension3",l="dimension4",u="dimension5",d=function(t){return a("_sf_async_config").then((function(e){return Object.assign(e,t.chartbeat),a("pSUPERFLY")})).then((function(e){e.virtualPage(t.path,t.title)}))},p=function(t){return a("ga").then((function(e){return e((function(){e("set","page",t.path),e("set",s,t.controller_and_action),e("set",c,t.tracking_data["Primary Tag"]),e("set",l,String(t.tracking_data["Music?"])),e("set",u,"true"),e("send","pageview")}))}))},f=function(t){i.set_page_type(t.page_type)},h=function(t){o.reset_counters(),o.register({fast_navigating:!0}),o.set_tacking_data(t.tracking_data.reduce((function(t,e){var n=e.key,r=e.value;return Object.assign(t,function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}({},n,r))}),{}))};return{on_navigation:function(t){if(this.remove_social_metadata(),!r.enabled)return e.when();var i=[d(t),a("COMSCORE").then((function(t){t.beacon({c1:"2",c2:r.comscore_client_id})})),p(t),f(t),e.all({__qc:a("__qc"),_qevents:a("_qevents"),quantserve:a("quantserve")}).then((function(t){var e=t.__qc,i=t._qevents,o=t.quantserve;e.qpixelsent=[],o(),n((function(){return i.push({qacct:r.quantcast_account})}))}))];return r.mixpanel_enabled&&i.push(h(t)),e.all(i)},remove_social_metadata:_.once((function(){return _.filter(t.prop("head").querySelectorAll("meta"),(function(t){return(t.getAttribute("property")||"").match(/^(og|fb|twitter):/)})).forEach((function(t){return t.remove()}))}))}}])},function(t,e){angular.module("genius").factory("Attempt",["$window","I18n",function(t,e){return{close_form:function(n,r){(n||t.confirm(e.t("editing.dirty_unload_confirm_box")))&&r()},admin_action:function(e,n){t.confirm(n)&&e()}}}])},function(t,e){angular.module("genius").factory("AuthenticationClient",["ApiClient","signed_out_created_content",function(t,e){return{sign_in:function(e){return t.post("/sessions",{user:e})},sign_up:function(n){return t.post("/users",{user:n,signed_out_created_content:e.get()}).then((function(t){return e.clear(),t}))}}}])},function(t,e,n){"use strict";n.r(e);n(761);angular.module("genius").factory("Autosize",["$window",function(t){return t.autosize}])},function(t,e,n){(function(e){t.exports=e.autosize=n(762)}).call(this,n(1))},function(t,e,n){var r,i,o;i=[e,t],r=function(t,e){"use strict";var n,r="function"==typeof Set?new Set:(n=[],{has:function(t){return Boolean(n.indexOf(t)>-1)},add:function(t){n.push(t)},delete:function(t){n.splice(n.indexOf(t),1)}}),i=function(t){return new Event(t)};try{new Event("test")}catch(t){i=function(t){var e=document.createEvent("Event");return e.initEvent(t,!0,!1),e}}function o(t){var e=void 0===arguments[1]?{}:arguments[1],n=e.setOverflowX,o=void 0===n||n,a=e.setOverflowY,s=void 0===a||a;if(t&&t.nodeName&&"TEXTAREA"===t.nodeName&&!r.has(t)){var c=null,l=null,u=t.clientWidth,d=function(){t.clientWidth!==u&&m()},p=function(e){window.removeEventListener("resize",d,!1),t.removeEventListener("input",m,!1),t.removeEventListener("keyup",m,!1),t.removeEventListener("autosize:destroy",p,!1),t.removeEventListener("autosize:update",m,!1),r.delete(t),Object.keys(e).forEach((function(n){t.style[n]=e[n]}))}.bind(t,{height:t.style.height,resize:t.style.resize,overflowY:t.style.overflowY,overflowX:t.style.overflowX,wordWrap:t.style.wordWrap});t.addEventListener("autosize:destroy",p,!1),"onpropertychange"in t&&"oninput"in t&&t.addEventListener("keyup",m,!1),window.addEventListener("resize",d,!1),t.addEventListener("input",m,!1),t.addEventListener("autosize:update",m,!1),r.add(t),o&&(t.style.overflowX="hidden",t.style.wordWrap="break-word"),f()}function f(){var e=window.getComputedStyle(t,null);l=e.overflowY,"vertical"===e.resize?t.style.resize="none":"both"===e.resize&&(t.style.resize="horizontal"),c="content-box"===e.boxSizing?-(parseFloat(e.paddingTop)+parseFloat(e.paddingBottom)):parseFloat(e.borderTopWidth)+parseFloat(e.borderBottomWidth),isNaN(c)&&(c=0),m()}function _(e){var n=t.style.width;t.style.width="0px",t.offsetWidth,t.style.width=n,l=e,s&&(t.style.overflowY=e),h()}function h(){var e=window.pageYOffset,n=document.body.scrollTop,r=t.style.height;t.style.height="auto";var i=t.scrollHeight+c;0!==t.scrollHeight?(t.style.height=i+"px",u=t.clientWidth,document.documentElement.scrollTop=e,document.body.scrollTop=n):t.style.height=r}function m(){var e=t.style.height;if(h(),window.getComputedStyle(t,null).height!==t.style.height?"visible"!==l&&_("visible"):"hidden"!==l&&_("hidden"),e!==t.style.height){var n=i("autosize:resized");t.dispatchEvent(n)}}}function a(t){if(t&&t.nodeName&&"TEXTAREA"===t.nodeName){var e=i("autosize:destroy");t.dispatchEvent(e)}}function s(t){if(t&&t.nodeName&&"TEXTAREA"===t.nodeName){var e=i("autosize:update");t.dispatchEvent(e)}}var c=null;"undefined"==typeof window||"function"!=typeof window.getComputedStyle?((c=function(t){return t}).destroy=function(t){return t},c.update=function(t){return t}):((c=function(t,e){return t&&Array.prototype.forEach.call(t.length?t:[t],(function(t){return o(t,e)})),t}).destroy=function(t){return t&&Array.prototype.forEach.call(t.length?t:[t],a),t},c.update=function(t){return t&&Array.prototype.forEach.call(t.length?t:[t],s),t}),e.exports=c},void 0===(o="function"==typeof r?r.apply(e,i):r)||(t.exports=o)},function(t,e){angular.module("genius").factory("BeforeUnloadCheck",["$window","I18n",function(t,e){var n=[];return t.onbeforeunload=function(){if(_.some(n,(function(t){return t()})))return e.t("editing.dirty_unload")},{add:function(t){n.push(t)},remove:function(t){_.remove(n,(function(e){return e===t}))}}}])},function(t,e){function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}angular.module("genius").factory("Bindings",[function(){var t=function(t,e){var n=t[0];"?"===t[1]&&(n+="?");var r=t.slice(n.length)||e,i={"@":function(){return this.$attrs[r]},"<":function(){return this.$scope.$eval(this.$attrs[r])},"&":function(){var t=this;return function(e){return t.$scope.$eval(t.$attrs[r],e)}},"&?":function(t){function e(){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(){var t=this;if(!_.isUndefined(this.$attrs[r]))return function(e){return t.$scope.$eval(t.$attrs[r],e)}}))}[n];if(!i)throw new Error("invalid attribute specification passed to Bindings service: '".concat(t,"'"));return i};return{resolver:function(e){var r=function(){function r(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),this.$scope=t,this.$attrs=e,this.assign_to(this)}var i,o,a;return i=r,(o=[{key:"assign_to",value:function(n){var r=this;_.each(e,(function(e,i){Reflect.defineProperty(n,i,{get:t(e,i).bind(r)})}))}}])&&n(i.prototype,o),a&&n(i,a),r}();return function(t,e){return new r(t,e)}}}}])},function(t,e,n){"use strict";n.r(e);n(119);angular.module("genius").factory("Bowser",["$window",function(t){return t.bowser}])},function(t,e){angular.module("genius").factory("BrandedChartClient",["ApiClient",function(t){return{songs:function(e){return t.returning("songs").get("/branded_charts/:id/songs",{id:e,text_format:"html"})}}}])},function(t,e){angular.module("genius").factory("Brightcove",["$q","AppConfig","getScript","wait_for_global",function(t,e,n,r){var i=/brightcove_(.*)_web_player_id/,o=t.defer(),a=function(i){return o.promise.then((function(){return n(function(t){return"//players.brightcove.net/"+e.brightcove_account_id+"/"+t+"_default/index.min.js"}(i),{cache:!0})})).then((function(){return t.all({videojs:r("videojs"),bc:r("bc")})}))},s={account_id:e.brightcove_account_id,load_api:function(t){return o.resolve(),a(t)}};return _(e).keys().map((function(t){return t.match(i)})).filter().each((function(t){s[t[1]+"_player_id"]=e[t[0]]})),s}])},function(t,e,n){"use strict";n.r(e);n(142);angular.module("genius").value("Channel",window.Channel)},function(t,e){angular.module("genius").factory("ChartClient",["ApiClient",function(t){return{get:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.get("/:model/chart",_.assign({model:e},n))},state:function(e,n){return t.get("/:model/:id/charts/state",{model:e,id:n})},exclude:function(e,n){return t.put("/:model/:id/charts/exclude",{model:e,id:n})},unexclude:function(e,n){return t.put("/:model/:id/charts/unexclude",{model:e,id:n})}}}])},function(t,e,n){"use strict";n.r(e);n(771);angular.module("genius").factory("classnames",["$window",function(t){return t.classNames}])},function(t,e,n){(function(e){t.exports=e.classNames=n(772)}).call(this,n(1))},function(t,e,n){var r;!function(){"use strict";var n={}.hasOwnProperty;function i(){for(var t=[],e=0;e<arguments.length;e++){var r=arguments[e];if(r){var o=typeof r;if("string"===o||"number"===o)t.push(r);else if(Array.isArray(r))t.push(i.apply(null,r));else if("object"===o)for(var a in r)n.call(r,a)&&r[a]&&t.push(a)}}return t.join(" ")}t.exports?t.exports=i:void 0===(r=function(){return i}.apply(e,[]))||(t.exports=r)}()},function(t,e,n){"use strict";n.r(e);n(774);angular.module("genius").factory("Clipboard",["$window",function(t){return t.Clipboard}])},function(t,e,n){(function(e){t.exports=e.Clipboard=n(775)}).call(this,n(1))},function(t,e,n){t.exports=function(){var t;return function t(e,n,r){function i(a,s){if(!n[a]){if(!e[a]){if(o)return o(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[a]={exports:{}};e[a][0].call(l.exports,(function(t){var n=e[a][1][t];return i(n||t)}),l,l.exports,t,e,n,r)}return n[a].exports}for(var o=!1,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(t,e,n){var r=9;if("undefined"!=typeof Element&&!Element.prototype.matches){var i=Element.prototype;i.matches=i.matchesSelector||i.mozMatchesSelector||i.msMatchesSelector||i.oMatchesSelector||i.webkitMatchesSelector}function o(t,e){for(;t&&t.nodeType!==r;){if("function"==typeof t.matches&&t.matches(e))return t;t=t.parentNode}}e.exports=o},{}],2:[function(t,e,n){var r=t("./closest");function i(t,e,n,r,i){var a=o.apply(this,arguments);return t.addEventListener(n,a,i),{destroy:function(){t.removeEventListener(n,a,i)}}}function o(t,e,n,i){return function(n){n.delegateTarget=r(n.target,e),n.delegateTarget&&i.call(t,n)}}e.exports=i},{"./closest":1}],3:[function(t,e,n){n.node=function(t){return void 0!==t&&t instanceof HTMLElement&&1===t.nodeType},n.nodeList=function(t){var e=Object.prototype.toString.call(t);return void 0!==t&&("[object NodeList]"===e||"[object HTMLCollection]"===e)&&"length"in t&&(0===t.length||n.node(t[0]))},n.string=function(t){return"string"==typeof t||t instanceof String},n.fn=function(t){return"[object Function]"===Object.prototype.toString.call(t)}},{}],4:[function(t,e,n){var r=t("./is"),i=t("delegate");function o(t,e,n){if(!t&&!e&&!n)throw new Error("Missing required arguments");if(!r.string(e))throw new TypeError("Second argument must be a String");if(!r.fn(n))throw new TypeError("Third argument must be a Function");if(r.node(t))return a(t,e,n);if(r.nodeList(t))return s(t,e,n);if(r.string(t))return c(t,e,n);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}function a(t,e,n){return t.addEventListener(e,n),{destroy:function(){t.removeEventListener(e,n)}}}function s(t,e,n){return Array.prototype.forEach.call(t,(function(t){t.addEventListener(e,n)})),{destroy:function(){Array.prototype.forEach.call(t,(function(t){t.removeEventListener(e,n)}))}}}function c(t,e,n){return i(document.body,t,e,n)}e.exports=o},{"./is":3,delegate:2}],5:[function(t,e,n){function r(t){var e;if("SELECT"===t.nodeName)t.focus(),e=t.value;else if("INPUT"===t.nodeName||"TEXTAREA"===t.nodeName){var n=t.hasAttribute("readonly");n||t.setAttribute("readonly",""),t.select(),t.setSelectionRange(0,t.value.length),n||t.removeAttribute("readonly"),e=t.value}else{t.hasAttribute("contenteditable")&&t.focus();var r=window.getSelection(),i=document.createRange();i.selectNodeContents(t),r.removeAllRanges(),r.addRange(i),e=r.toString()}return e}e.exports=r},{}],6:[function(t,e,n){function r(){}r.prototype={on:function(t,e,n){var r=this.e||(this.e={});return(r[t]||(r[t]=[])).push({fn:e,ctx:n}),this},once:function(t,e,n){var r=this;function i(){r.off(t,i),e.apply(n,arguments)}return i._=e,this.on(t,i,n)},emit:function(t){for(var e=[].slice.call(arguments,1),n=((this.e||(this.e={}))[t]||[]).slice(),r=0,i=n.length;r<i;r++)n[r].fn.apply(n[r].ctx,e);return this},off:function(t,e){var n=this.e||(this.e={}),r=n[t],i=[];if(r&&e)for(var o=0,a=r.length;o<a;o++)r[o].fn!==e&&r[o].fn._!==e&&i.push(r[o]);return i.length?n[t]=i:delete n[t],this}},e.exports=r},{}],7:[function(e,n,r){!function(i,o){if("function"==typeof t&&t.amd)t(["module","select"],o);else if(void 0!==r)o(n,e("select"));else{var a={exports:{}};o(a,i.select),i.clipboardAction=a.exports}}(this,(function(t,e){"use strict";var n=r(e);function r(t){return t&&t.__esModule?t:{default:t}}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=function(){function t(e){o(this,t),this.resolveOptions(e),this.initSelection()}return a(t,[{key:"resolveOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action=t.action,this.container=t.container,this.emitter=t.emitter,this.target=t.target,this.text=t.text,this.trigger=t.trigger,this.selectedText=""}},{key:"initSelection",value:function(){this.text?this.selectFake():this.target&&this.selectTarget()}},{key:"selectFake",value:function(){var t=this,e="rtl"==document.documentElement.getAttribute("dir");this.removeFake(),this.fakeHandlerCallback=function(){return t.removeFake()},this.fakeHandler=this.container.addEventListener("click",this.fakeHandlerCallback)||!0,this.fakeElem=document.createElement("textarea"),this.fakeElem.style.fontSize="12pt",this.fakeElem.style.border="0",this.fakeElem.style.padding="0",this.fakeElem.style.margin="0",this.fakeElem.style.position="absolute",this.fakeElem.style[e?"right":"left"]="-9999px";var r=window.pageYOffset||document.documentElement.scrollTop;this.fakeElem.style.top=r+"px",this.fakeElem.setAttribute("readonly",""),this.fakeElem.value=this.text,this.container.appendChild(this.fakeElem),this.selectedText=(0,n.default)(this.fakeElem),this.copyText()}},{key:"removeFake",value:function(){this.fakeHandler&&(this.container.removeEventListener("click",this.fakeHandlerCallback),this.fakeHandler=null,this.fakeHandlerCallback=null),this.fakeElem&&(this.container.removeChild(this.fakeElem),this.fakeElem=null)}},{key:"selectTarget",value:function(){this.selectedText=(0,n.default)(this.target),this.copyText()}},{key:"copyText",value:function(){var t=void 0;try{t=document.execCommand(this.action)}catch(e){t=!1}this.handleResult(t)}},{key:"handleResult",value:function(t){this.emitter.emit(t?"success":"error",{action:this.action,text:this.selectedText,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)})}},{key:"clearSelection",value:function(){this.trigger&&this.trigger.focus(),window.getSelection().removeAllRanges()}},{key:"destroy",value:function(){this.removeFake()}},{key:"action",set:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"copy";if(this._action=t,"copy"!==this._action&&"cut"!==this._action)throw new Error('Invalid "action" value, use either "copy" or "cut"')},get:function(){return this._action}},{key:"target",set:function(t){if(void 0!==t){if(!t||"object"!==(void 0===t?"undefined":i(t))||1!==t.nodeType)throw new Error('Invalid "target" value, use a valid Element');if("copy"===this.action&&t.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if("cut"===this.action&&(t.hasAttribute("readonly")||t.hasAttribute("disabled")))throw new Error('Invalid "target" attribute. You can\'t cut text from elements with "readonly" or "disabled" attributes');this._target=t}},get:function(){return this._target}}]),t}();t.exports=s}))},{select:5}],8:[function(e,n,r){!function(i,o){if("function"==typeof t&&t.amd)t(["module","./clipboard-action","tiny-emitter","good-listener"],o);else if(void 0!==r)o(n,e("./clipboard-action"),e("tiny-emitter"),e("good-listener"));else{var a={exports:{}};o(a,i.clipboardAction,i.tinyEmitter,i.goodListener),i.clipboard=a.exports}}(this,(function(t,e,n,r){"use strict";var i=s(e),o=s(n),a=s(r);function s(t){return t&&t.__esModule?t:{default:t}}var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();function d(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function p(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var f=function(t){function e(t,n){l(this,e);var r=d(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return r.resolveOptions(n),r.listenClick(t),r}return p(e,t),u(e,[{key:"resolveOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action="function"==typeof t.action?t.action:this.defaultAction,this.target="function"==typeof t.target?t.target:this.defaultTarget,this.text="function"==typeof t.text?t.text:this.defaultText,this.container="object"===c(t.container)?t.container:document.body}},{key:"listenClick",value:function(t){var e=this;this.listener=(0,a.default)(t,"click",(function(t){return e.onClick(t)}))}},{key:"onClick",value:function(t){var e=t.delegateTarget||t.currentTarget;this.clipboardAction&&(this.clipboardAction=null),this.clipboardAction=new i.default({action:this.action(e),target:this.target(e),text:this.text(e),container:this.container,trigger:e,emitter:this})}},{key:"defaultAction",value:function(t){return _("action",t)}},{key:"defaultTarget",value:function(t){var e=_("target",t);if(e)return document.querySelector(e)}},{key:"defaultText",value:function(t){return _("text",t)}},{key:"destroy",value:function(){this.listener.destroy(),this.clipboardAction&&(this.clipboardAction.destroy(),this.clipboardAction=null)}}],[{key:"isSupported",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["copy","cut"],e="string"==typeof t?[t]:t,n=!!document.queryCommandSupported;return e.forEach((function(t){n=n&&!!document.queryCommandSupported(t)})),n}}]),e}(o.default);function _(t,e){var n="data-clipboard-"+t;if(e.hasAttribute(n))return e.getAttribute(n)}t.exports=f}))},{"./clipboard-action":7,"good-listener":4,"tiny-emitter":6}]},{},[8])(8)}()},function(t,e){angular.module("genius").factory("CommentClient",["$http","$q","AppConfig","Markdown","signed_out_created_content",function(t,e,n,r,i){return{load:function(e,r,i){return t.get("".concat(n.api_root_url,"/").concat(e,"/").concat(r,"/comments"),{params:i}).then((function(t){return t.data.response}))},destroy:function(e){return t.delete("".concat(n.api_root_url,"/comments/").concat(e))},create:function(o,a,s){s._deleted=!1;var c=_.assign({},s,{body:s.body.markdown,reason:s.reason?s.reason.raw_name:void 0});return s.body.html=r.to_html(c.body),t.post("".concat(n.api_root_url,"/").concat(o,"/").concat(a,"/comments?text_format=html"),{comment:c}).then((function(t){return _.assign(s,t.data.response.comment),i.add("comments",s.id),s.anonymous_author&&(s.anonymous_author.email=s.email),s})).catch((function(){return s._deleted=!0,e.reject()}))},change_state:function(e,r){var i={state_event:r};return t.put("".concat(n.api_root_url,"/comments/").concat(e,"/change_state"),i)}}}])},function(t,e){angular.module("genius").factory("ContributionOpportunityAssignmentClient",["ApiClient",function(t){return{update:function(e,n){return t.put("/contribution_opportunity_assignments/:id",{id:e,contribution_opportunity_assignment:n})}}}])},function(t,e){angular.module("genius").factory("ConversationClient",["ApiClient",function(t){var e=t.set_param("text_format","html");return{latest:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.returning("conversations").get("/conversations",{page:t.page||1})},get:function(t){return e.returning("conversation").get("/conversations/:conversation_id",{conversation_id:t})},mark_read:function(t){return e.returning("conversation").post("/conversations/:conversation_id/mark_read",{conversation_id:t})},with_user:function(t){return e.returning("conversation").put("/conversations/with_user",{user_id:t})}}}])},function(t,e){angular.module("genius").factory("Cookies",[function(){return{get:function(t){return $.cookie(t)},getObject:function(t){var e=$.cookie(t);if(e)return JSON.parse(e)},getAll:function(){return $.cookie()},put:function(t,e,n){return $.cookie(t,e,n)},putObject:function(t,e,n){return $.cookie(t,JSON.stringify(e),n)},remove:function(t,e){return $.removeCookie(t,e)}}}])},function(t,e){angular.module("genius").factory("CoverArtClient",["ApiClient","Session",function(t,e){return{index:function(n,r){var i={text_format:e.user_signed_in?"html,markdown":"html"};return i["".concat(n,"_id")]=r,t.returning("cover_arts").get("/cover_arts",i)},create:function(e,n,r){var i={cover_art:r};return i["".concat(e,"_id")]=n,t.post("/cover_arts",i)},update:function(e,n){return t.put("/cover_arts/".concat(e),{cover_art:n})},destroy:function(e){return t.delete("/cover_arts/".concat(e))},move_between:function(e,n){return t.put("/cover_arts/".concat(e,"/move_between"),n)}}}])},function(t,e){function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}angular.module("genius").factory("CursoredDataFeed",[function(){return function(){return function t(e,r){var i=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"next_cursor";n(this,t),this.cursor_name=s,this.next_cursor=a,this.params=_.clone(o),this.next=function(){var t={};return t[i.cursor_name]=i.next_cursor,e(_.assign(t,i.params)).then((function(t){return i.next_cursor=t[i.cursor_name],t[r]}))},this.has_next=function(){return i.next_cursor||void 0===i.next_cursor},this.reset=function(){i.next_cursor=a}}}()}])},function(t,e){angular.module("genius").factory("CustomAppNotificationClient",["$http",function(t){return{send_preview_notification:function(e){return t.post("/custom_app_notifications",{custom_app_notification:_.assign(e,{preview:!0})})}}}])},function(t,e){angular.module("genius").factory("CustomPerformanceRoleClient",["$http","AppConfig",function(t,e){return{autocomplete_api_endpoint:"".concat(e.api_root_url,"/custom_performance_roles/autocomplete"),autocomplete:function(e){return t.get(this.autocomplete_api_endpoint,{params:{q:e}}).then((function(t){return t.data.response}))},autocomplete_options:{minChars:2,parse:function(t){return _.map(t.response.custom_performance_roles,(function(t){var e=t.label;return{data:[e],value:e,result:e}}))}}}}])},function(t,e){angular.module("genius").factory("DateTools",[function(){return{days_to_ms:function(t){var e=new Date;return e.setTime(e.getTime()+864e5*t),e}}}])},function(t,e){angular.module("genius").factory("DiscussionClient",["ApiClient",function(t){return{forum_posts:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.get("/discussions/".concat(e,"/forum_posts"),_.defaults(n,{text_format:"html"}))}}}])},function(t,e){angular.module("genius").factory("EagerLoader",(function(){var t=function(){this.data={},this.listeners={}};return t.prototype={loaded:function(t,e){this.listeners[t]?this.listeners[t].forEach((function(t){t(e)})):this.data[t]=e},listen_for:function(t,e){this.listeners[t]=this.listeners[t]||[],this.listeners[t].push(e),this.data[t]&&(e(this.data[t]),delete this.data[t])}},t}))},function(t,e){angular.module("genius").factory("EventEmitter",["$rootScope",function(t){return function(){this.proxy_emitter=t.$new(),this.emit=function(t,e){this.proxy_emitter.$emit(t,e)},this.on=function(t,e){return this.proxy_emitter.$on(t,(function(t,n){t.stopPropagation(),t.preventDefault(),e(n)})),this}}}])},function(t,e){angular.module("genius").factory("Facebook",["AppConfig","$window","$q","getScript",function(t,e,n,r){var i=_.once((function(){var i=n.defer();return e.fbAsyncInit=function(){e.FB.init({appId:t.facebook_app_id,version:"v".concat(t.facebook_opengraph_api_version)}),i.resolve(e.FB)},r("//connect.facebook.net/en_US/sdk.js",{cache:!0}),i.promise}));return $(i),{share:function(t){i().then((function(e){e.ui({method:"share",href:t})}))},process_embeds:function(t){i().then((function(e){e.XFBML.parse(t)}))}}}])},function(t,e){angular.module("genius").factory("FeedbackClient",["ApiClient",function(t){return{post_feedback:function(e){return t.post("/feedback",{feedback:{body:e}})}}}])},function(t,e){function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}angular.module("genius").factory("Filepicker",["$window","AppConfig","$q",function(t,e,i){var o=t.filepicker;o.setKey(e.filepicker_api_key);var a=["image/jpeg","image/png","image/gif"],s={policy:e.filepicker_policy,signature:e.filepicker_signature},c=["IMAGE_SEARCH","COMPUTER","URL"],l="IMAGE_SEARCH",u=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n(this,t),this.allowed_mime_types=e.allowed_mime_types||a,this.services=e.services||c,this.open_to=e.open_to||l}var u,d,p;return u=t,d=[{key:"allows_mime_type",value:function(t){return this.allowed_mime_types.includes((t||"").toLowerCase())}},{key:"_store",value:function(t,e){var n=this,r=angular.extend(angular.copy(s),e);r.container=t.container;var a=i.defer();return o.store(t,r,(function(t){return a.resolve(n._construct_s3_url(t.key))}),(function(t){return a.reject(t)}),(function(t){return a.notify(t)})),a.promise}},{key:"_read_blob",value:function(t){var e=i.defer(),n=new FileReader;return n.onloadend=function(){return e.resolve(n.result)},n.readAsBinaryString(t),e.promise}},{key:"_construct_s3_url",value:function(t){return"https://s3.amazonaws.com/".concat(e.filepicker_s3_image_bucket,"/").concat(encodeURIComponent(t))}},{key:"store",value:function(t,e){var n=this;return t instanceof Blob?this._read_blob(t).then((function(t){return n._store(btoa(t),angular.extend(e,{base64decode:!0}))})):this._store(t,e)}},{key:"pick",value:function(t){var e=i.defer(),n=angular.extend(angular.copy(s),{mimetypes:this.allowed_mime_types,services:this.services,openTo:this.open_to},t);return o.pick(n,(function(t){o.stat(t.url,angular.extend(angular.copy(s),{width:!0,height:!0}),(function(n){return e.resolve({blob:t,dimensions:n})}))})),e.promise}},{key:"pick_and_store",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=i.defer(),a=angular.extend(s,{mimetypes:this.allowed_mime_types,services:this.services,openTo:this.open_to},t);return o.pickAndStore(a,n,(function(t){return r.resolve(e._construct_s3_url(t[0].key))}),(function(t){return r.reject(t)})),r.promise}}],d&&r(u.prototype,d),p&&r(u,p),t}();return u}])},function(t,e){angular.module("genius").factory("FollowClient",["AppConfig","$http",function(t,e){return{set_following:function(n,r,i){return e.post("".concat(t.api_root_url,"/").concat(n,"s/").concat(r,"/").concat(i?"follow":"unfollow")).then((function(t){return t.data.response}))}}}])},function(t,e){angular.module("genius").factory("getScript",["$q",function(t){return function(e,n){return t.when($.ajax(_.assign({url:e,type:"GET",dataType:"script"},n)))}}])},function(t,e){angular.module("genius").factory("GlobalErrorBus",["$rootScope",function(t){return t.$new("isolate")}])},function(t,e){angular.module("genius").factory("GlobalErrorInterceptor",["GlobalErrorBus","$q",function(t,e){return{responseError:function(n){if(429===n.status){var r=_.get(n,"data.response.message.html")||"<h1>You hit a rate limit!</h1>";t.$emit("global_error",r)}return e.reject(n)}}}])},function(t,e){angular.module("genius").factory("GlobalPageStateBus",["$rootScope",function(t){return t.$new("isolate")}])},function(t,e){angular.module("genius").factory("GlobalRefs",["$window",function(t){var e={global_message:".global_messages",cloudflare_unavailable_alert:"#cf_alert_div"};return{get_element:function(n){return t.$(e[n])}}}])},function(t,e){angular.module("genius").factory("Google",["getScript","$window",function(t,e){return{setup:_.once((function(){return t("https://apis.google.com/js/platform.js",{cache:!0})})),refresh_youtube_subscribe_in:function(t){e.gapi.ytsubscribe.go(t)}}}])},function(t,e){angular.module("genius").factory("HtmlConstants",["$window",function(t){var e={top_level_block_containers:t.TOP_LEVEL_BLOCK_CONTAINERS,top_level_stand_alone_blocks:t.TOP_LEVEL_STANDALONE_BLOCKS};return e.top_level_block_containers_regexp=new RegExp("</(".concat(e.top_level_block_containers.join("|"),")>\\s*"),"gi"),e.top_level_stand_alone_blocks_regexp=new RegExp("</(".concat(e.top_level_stand_alone_blocks.join("|"),")>\\s*"),"gi"),e}])},function(t,e){angular.module("genius").factory("I18n",["$window",function(t){return t.I18n}])},function(t,e){angular.module("genius").factory("IdentityClient",["$http","ApiClient","AppConfig","$q",function(t,e,n,r){return{destroy:function(e){return t.delete("".concat(n.api_root_url,"/identities/").concat(e),{},{params:{text_format:"html,markdown"}}).then((function(t){return t.data.response})).catch((function(t){return function(t){var e=new Error(t.data.meta.message);return _.assign(e,_.pick(t,"status","statusText")),r.reject(_.assign(e,t.data.response))}(t)}))},spotify_credentials:function(){return e.returning("credentials").get("/identities/spotify_credentials")}}}])},function(t,e){function n(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var r,i,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);a=!0);}catch(t){s=!0,i=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}angular.module("genius").factory("ImageTransform",["AppConfig","initial_image_urls",function(t,e){var r=new RegExp("^".concat(t.sizies_base_url)),i=["images.genius.com","images.rapgenius.com"],o=/\.(\d+).(\d+).\d+\.\w*$/,a=_(e).toArray().filter((function(t){return r.test(t)})).map((function(t){var e=n(_.takeRight(t.split("/"),2),2),r=e[0],i=e[1],o=n(r.split("x").map((function(t){return Number(t)})),2),a=o[0],s=o[1];return{src:decodeURIComponent(i),width:a,height:s,url:t}})).sortBy((function(t){return t.width*t.height})).value(),s=_.memoize((function(t){var e=c(t.original_url);e&&t.width&&!t.height&&(t.height=Math.round(t.width/e)),e&&t.height&&!t.width&&(t.width=Math.round(t.height*e));var n=t.width/t.height;return _.find(a,(function(e){var r=e.src,i=e.width,o=e.height;return r===t.original_url&&i>=t.width&&o>=t.height&&Math.abs(i/o-n)<.05}))})),c=function(t){var e=n(t.match(o)||[],3),r=e[0],i=e[1],a=e[2];if(r)return Number(i)/Number(a)};return{resize:function(n,r){if(n){if(e.has(n))return n;var o=new URL(n);if(!_.includes(i,o.host))return n;var c=parseInt(r.width||0),l=parseInt(r.height||0),u=s({original_url:n,width:c,height:l});if(u)return u.url;var d="".concat(t.sizies_base_url,"/").concat(c,"x").concat(l,"/").concat(encodeURIComponent(n));return a.push({src:n,width:c,height:l,url:d}),d}}}}])},function(t,e){angular.module("genius").factory("InboxClient",["Session","Pusher","ApiClient",function(t,e,n){return{get_line_item:function(e,r){var i=t.user_signed_in?"html,markdown":"html",o=e?"/inboxes/".concat(e,"/line_items/").concat(r):"/line_items/".concat(r);return n.get(o,{text_format:i}).then((function(t){return t.line_item}))},line_items:function(t,e){return n.get("/inboxes/:inbox_name/line_items",{text_format:"html",timestamp_for_next_page:e,inbox_name:t}).then((function(t){return t.line_items.timestamp_for_next_page=t.timestamp_for_next_page,t.line_items}))},mark_read:function(t,e){var r;if(e){r={};for(var i=0;i<e.length;i++)r[i+1]=e[i]}return n.post("/inboxes/:inbox_name/line_items/mark_read",{event_ids:r,inbox_name:t})},on_update:function(n,r){e.subscribe(t.current_user.pusher_channel,"new-".concat(n.replace(/_/g,"-"),"-event"),r),e.subscribe(t.current_user.pusher_channel,"inbox-marked-read",(function(t){t.inbox===n&&r()}))}}}])},function(t,e){angular.module("genius").factory("IntersectionObserver",[function(){return!("undefined"==typeof window)&&"IntersectionObserver"in window?window.IntersectionObserver:function(t,e){var n=e.shim,r=void 0===n?{}:n;this.observe=r.observe||_.noop,this.unobserve=r.unobserve||_.noop,this.disconnect=r.disconnect||_.noop}}])},function(t,e){angular.module("genius").factory("Iq",["PreloadCache","Session",function(t,e){var n=t.iq_by_event_type;return{for:function(t){var r=e.current_user.virtual_iq_event_type_map;return r&&_.has(r,t)&&(t=r[t]),_.has(n,t)?n[t]:0}}}])},function(t,e){angular.module("genius").factory("LeaderboardClient",["ApiClient",function(t){return{global:function(e){return t.get("/leaderboard",e)},for_tag:function(e,n){return t.get("/tags/:tag_id/leaderboard",_.assign({tag_id:e.id},n))}}}])},function(t,e){angular.module("genius").factory("Librato",["$http","$q","AnalyticsConfig","SessionConfig",function(t,e,n,r){return{set_page_type:function(t){this.page_type=t},measure:function(i,o){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{log:!0},s=a.log;return s&&_.get(r,"log_client_metrics")&&console.log("LIBRATO METRIC: ".concat(i," = ").concat(o)),_.get(n,"enabled")?t.post("https://".concat(n.librato_web_client_host,"/v1/metrics"),{gauges:[{name:i,value:o,source:"".concat(this.page_type,"_page")}]}):e.when()}}}])},function(t,e){function n(t){return function(t){if(Array.isArray(t))return r(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}angular.module("genius").factory("LibratoBeacon",["$window","$document",function(t,e){var r="https://librato-collector.genius.com/v1/metrics",i=[],o=void 0!==t,a=_.debounce((function(){var t,e=(t=_).mergeWith.apply(t,n(i.splice(0)).concat([function(t,e){return(t||[]).concat(e)}]));navigator.sendBeacon?navigator.sendBeacon(r,new Blob([JSON.stringify(e)],{type:"application/json"})):fetch(r,{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}})}),2e3,{leading:!1,trailing:!0});return o&&e[0].addEventListener("visibilitychange",(function(){"hidden"===e[0].visibilityState&&a.flush()})),{measure:function(t,e,n){var r=n.source;i.push({gauges:[{name:t,value:e,source:r}]}),a()},count:function(t,e){var n=e.source;i.push({counters:[{name:t,value:1,source:n}]}),a()}}}])},function(t,e){angular.module("genius").factory("LinkEvents",(function(){return{should_open_in_new_window_or_tab:function(t,e){return e=e||$(t.target).closest("a")[0],2===t.which||t.metaKey||t.ctrlKey||t.shiftKey||"_blank"===e.target||(n=document.getElementsByTagName("base")).length>0&&"_parent"===n[0].target&&!e.target;var n}}}))},function(t,e){angular.module("genius").factory("LocalStorage",["$window",function(t){return{is_available:function(){try{var e="__storage_test__";return t.localStorage.setItem(e,e),t.localStorage.removeItem(e),!0}catch(t){return!1}},set_item:function(e,n){t.localStorage.setItem(e,JSON.stringify(n))},get_item:function(e){return JSON.parse(t.localStorage.getItem(e))},remove_item:t.localStorage.removeItem.bind(t.localStorage),safe_set_item:function(t,e){this.is_available()&&this.set_item(t,e)},safe_get_item:function(t,e){return this.is_available()?this.get_item(t):e},safe_remove_item:function(t){this.is_available()&&this.remove_item(t)}}}])},function(t,e){angular.module("genius").factory("LookupClient",["$http","AppConfig",function(t,e){return{lookup:function(n){return t.get("".concat(e.api_root_url,"/lookup"),{params:{url:n}}).then((function(t){return _(t.data.response).values().first()}))}}}])},function(t,e){angular.module("genius").factory("Lyrics",["mobile_device",function(t){var e=t?"75vh":"50vh",n=function(t){return'\n    <span avoid-selection class="u-noselect">\n      <dfp-ad\n        name="'.concat(t,'"\n        class="u-display_block"\n        ad-classes="{\'dfp_unit--in_read\': $height > 1, \'u-xx_large_top_margin\': $height > 0}"\n      ></dfp-ad>\n    </span>\n  ')},r=(t?["mobile_song_medium1","mobile_song_medium2","mobile_song_medium3"]:["desktop_song_inread","desktop_song_inread2","desktop_song_inread3"]).map((function(t){return function(t){return'\n    <defer-compile\n      class="u-display_block"\n      timing-label="deferred-inread-ad-loaded-'.concat(t,'"\n      within-visibility-range="').concat(e,'">\n      ').concat(n(t),"\n    </defer-compile>\n  ")}(t)}));return{prepare_for_display:function(t){return e=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:25,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=$("<div>").html(t.replace(/\s*\n/g,"")),o=i.find("br");return e.forEach((function(t){o=_.drop(o,n),o=_.dropWhile(o,(function(t){return"br"!==_.get(t,"previousSibling.nodeName","").toLowerCase()}));var e=$(t),a=o.shift();a?$(a).before(e):r===t&&i.append(e)})),i.html()}(t,r,25),e.replace(/}}/g,"}\x3c!-- literal brace --\x3e}");var e}}}])},function(t,e){function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}angular.module("genius").factory("LyricsAnchorer",["$compile","ReferentLocator","ReferentRegistry","ReferentClient",function(t,e,r,i){var o=function(){function o(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),this.container=t.container,this.get_state=t.get_state,this.scope=t.scope,this.song=t.song}var s,c,l;return s=o,c=[{key:"construct_referent",value:function(e){var n=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=arguments.length>2?arguments[2]:void 0;return i.create_referent({song:_.pick(this.song,["id","updated_by_human_at"]),referent:s,community:!!o.community}).then((function(i){_.assign(i.annotations[0],{new:!0,_editing:{_form_visible:!0}}),r.preload_insert(i);var o=a(i.id);return o.html(e.extractContents()),e.insertNode(o[0]),t(o)(n.scope),r.register(i),i}))}},{key:"create_referent",value:function(t,e){return this.construct_referent(t,e,this.calculate_referent_location(t))}},{key:"create_image_referent",value:function(t,e,n){var r=t.src;return this.construct_referent(e,n,{image_url:r,occurrence:this.get_occurrence_in_container_among('img[src="'.concat(r,'"]'),t)})}},{key:"calculate_referent_location",value:function(t){return e.calculate_referent_location(t,this.container[0])}},{key:"get_occurrence_in_container_among",value:function(t,e){return this.container.find(t).index(e)+1}}],c&&n(s.prototype,c),l&&n(s,l),o}(),a=function(t){return $("<a>").attr("href","#").attr("class","referent").attr("ng-click","open()").attr("prevent-default-click","").attr("data-id","new").attr("on-hover-with-no-digest","set_current_hover_and_digest(hover ? fragment_id : undefined)").attr("annotation-fragment","'".concat(t,"'")).attr("classification","new")};return o}])},function(t,e){function n(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var r,i,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);a=!0);}catch(t){s=!0,i=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}angular.module("genius").factory("LyricsEditProposal",["LyricsEditing","diff_match_patch","patch_structured_text","AppConfig",function(t,e,r,i){var o=new e;return o.Match_Threshold=i.dmp_match_threshold,o.Patch_DeleteThreshold=i.dmp_match_threshold,{diff:function(t,e){return o.diff_main(t,e)},apply_patches:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=i.edit_format,s="plain_text"===a?r(t,e,{dmp:o}):o.patch_apply(t,e),c=n(s,2),l=c[0],u=c[1];return{patched:l,success:u}},make_patches:_.memoize((function(t){return o.patch_make(t)})),pretty_diff:_.memoize((function(t){var e=_.cloneDeep(t);return o.diff_cleanupSemantic(e),o.diff_prettyHtml(e).replace(/&para;/gm,"")})),lyrics_diffs_for_line_item_detail:function(e){var n=this;if("user_edited_the_lyrics_of_song"===e.strategy)return _.map(e.metadata,(function(e){return{before:t.prepare_lyrics_for_editing(e.before).markdown,after:t.prepare_lyrics_for_editing(e.after).markdown}}));var r=function(t,e){var r=n.make_patches(e.diff);return n.apply_patches(r,t,{edit_format:e.edit_format}).patched};return"lyrics_edit"===e.targets[0]._type?_.map(e.targets,(function(n){var i,o;switch(e.strategy){case"user_created_lyrics_edit":switch(o=n.state,n.state){case"pending":i=n.current_lyrics_html;break;case"accepted":i=n.lyrics_before_accepted.html;break;case"rejected":case"inapplicable":i=n.lyrics_when_proposed.html}i=t.prepare_lyrics_for_editing(i).markdown;break;case"user_accepted_lyrics_edit":i=n.lyrics_before_accepted.plain;break;case"user_rejected_lyrics_edit":case"user_archived_lyrics_edit":i=n.lyrics_when_proposed.plain}var a={before:i,after:r(i,n)};return o&&_.merge(a,{state:o}),a})):null}}}])},function(t,e){angular.module("genius").factory("LyricsEditProposalClient",["ApiClient",function(t){return{lyrics_for_edit_proposal:function(e){var n=e.song_id;return t.transform(_.property("lyrics_for_edit_proposal")).get("/songs/:song_id/lyrics_for_edit_proposal",{song_id:n})},pending:function(e){var n=e.song_id;return t.transform(_.property("lyrics_edits")).get("/songs/:song_id/lyrics_edits",{song_id:n})},create:function(e){var n=e.song_id,r=e.version,i=e.edited_lyrics;return t.transform(_.property("lyrics_edit")).post("/songs/:song_id/lyrics_edits",{song_id:n,lyrics_edit:{edited_lyrics:i,before_version_number:r,edit_format:"plain_text"}})},reject:function(e){return t.post("/lyrics_edits/:id/reject",{id:e})}}}])},function(t,e,n){"use strict";n.r(e);n(816);function r(t){return function(t){if(Array.isArray(t))return i(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}angular.module("genius").factory("LyricsEditing",["AppConfig","HtmlConstants","MarkdownHelpers","MarkdownPlaintextFinderRegex","ReferentRegistry","string_has_unmatched_parentheses","I18n",function(t,e,n,i,o,a,s){var c=["p","br","b","strong","em","i","a"],l={lyrics_html_without_referent:function(t,e){var n=$("<div>").append($(t));return n.find("[data-id='".concat(e,"']")).each((function(t,e){var n=$(e),r=n.find("img")[0]||n.text();n.replaceWith(r)})),n.html()},prepare_lyrics_for_editing:function(t){return this.lyrics_html_to_pseudo_markdown__deprecated(this.clean_up_lyrics__deprecated(t))},convert_editable_for_saving:function(t){return this.clean_up_lyrics__deprecated(this.lyrics_pseudo_markdown_to_html__deprecated(t.markdown,t.attr_hash))},prepare_lyrics_with_correction:function(t,e){if(e.referent.id){var n=$(t);return $(n.find("[data-id='".concat(e.referent.id,"']"))[e.referent.occurrence-1]).html(e.replacement.html),this.prepare_lyrics_for_editing(n[0].outerHTML)}var r=-1,o=e.referent.occurrence_in_markdown,a=this.prepare_lyrics_for_editing(t),s=i(e.original.markdown);return a.markdown=a.markdown.replace(s,(function(){return++r===o?e.replacement.markdown:e.original.markdown})),a},clean_up_lyrics__deprecated:function(t){return $.trim($("<div>").append(t).find("a").each((function(){var t=$(this);if(!t.attr("data-id")&&!t.data("real-link")&&!t.hasClass("referent")){var e=new Error("Error processing lyrics for editing: detected non-referent link (".concat(t[0].outerHTML,")"));throw e.human_readable_message="Your browser's copy of the lyrics is out of sync. Try reloading the page",e}t.html().match(/<br[\s\/]?>$/i)&&(t.find("br:last").remove(),t.after("<br>"))})).end().find("#annotation_prompt").remove().end().html().replace(/<p( [^>]*)?>/gi,"").replace(/<\/p>\s*/gi,"\n\n").replace(e.top_level_block_containers_regexp,"$&\n\n").replace(e.top_level_stand_alone_blocks_regexp,"$&\n\n").replace(/\s*<br[\s\/]?>([ \t]*)\s*/gi,"\n$1"))},lyrics_html_to_pseudo_markdown__deprecated:function(t){var e={attr_hash:{}},n=$("<div>").append(t).find("a").each((function(){var t=$(this);t.find(".referent-vote_total").remove();var n=t.attr("data-id");_.isUndefined(n)?t.data("real-link")?t.replaceWith("[".concat(t.html(),"](").concat(t.attr("href"),")")):t.replaceWith(t.html()):(_.set(e.attr_hash,n,{class:t.attr("class"),"data-editorial-state":t.attr("data-editorial-state")}),t.replaceWith("[".concat(t.html(),"](").concat(n,")")))})).end().find("lyrics").removeAttr("ng-non-bindable").end();return e.markdown=_.unescape(n.find("annotatable-image").each((function(){var t=$(this),e=t.attr("src");t.replaceWith($("<img>").attr("src",e))})).end().html()),e},markdown_has_block_level_markup:function(t){return Boolean($("<div>").append(t).find(["*"].concat(r(c.map((function(t){return":not(".concat(t,")")})))).join("")).length)},html_has_block_level_markup:_.memoize((function(t){var e=l.lyrics_html_to_pseudo_markdown__deprecated(t).markdown;return l.markdown_has_block_level_markup(e)})),lyrics_pseudo_markdown_to_html__deprecated:function(e,r){r||(r={}),e=e.replace(/\n/gi,"<br>");var i=$("<div>").append(n.convert_markdown_anchors(e)).find("a").each((function(){var e=$(this);e.attr("href",$.trim(e.attr("href"))),e.attr("href").match(/^\d+$/)?e.attr("data-id",e.attr("href")).attr("href","/".concat(e.attr("data-id"))).attr(_.get(r,e.attr("data-id"),{})):!function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").trim();return"/"===e[0]||0===e.indexOf("http")||e.includes(t.canonical_domain)}(e.attr("href"))?e.replaceWith("[".concat(e.html(),"](").concat(e.attr("href"),")")):e.attr("target",$.isUrlInternal(e.attr("href"))?"_self":"_blank").attr("data-real-link",!0)})).end().find("lyrics").attr("ng-non-bindable",!0).end().html();return n.unescape_special_characters_escaped_by_markdown_anchor_converter(i)},backfill_angular_link_properties:function(t){var e=$("<div>").append(t).find("a[data-id]").each((function(){var t=$(this),e=Number(t.attr("data-id")),n=o.peek(e);n&&(t.attr("annotation-fragment",e),t.attr("on-hover-with-no-digest","set_current_hover_and_digest(hover ? fragment_id : undefined)"),t.attr("ng-click","open()"),t.attr("prevent-default-click",""),t.attr("classification",n.classification),t.attr("image",n.is_image),t.attr("pending-editorial-actions-count",n.pending_editorial_actions_count))})).end();return $("<div>").append(e).html()},validate_pseudo_markdown_lyrics:function(t,e,n){var r=n.is_music,i=void 0===r||r,o=[],c=$("<div>").append(e).text();if(a(c)&&o.push(s.t("lyrics.unmatched_parens_error")),i){var l=this.html_has_block_level_markup(t),u=this.markdown_has_block_level_markup(e);l&&u?o.push(s.t("lyrics.didnt_remove_block_level_html_from_music_error")):!l&&u&&o.push(s.t("lyrics.added_block_level_html_to_music_error"))}return o}};return l}])},function(t,e){!function(t){var e,n,r,i,o,a,s,c,l=window.location,u=Array.prototype.slice,d=l.href.match(/^((https?:\/\/.*?\/)?[^#]*)#?.*$/),p=d[1]+"#",f=d[2],_="href",h="src",m="urlInternal",g="urlExternal",v="urlFragment",b={};function y(t){var e=u.call(arguments,1);return function(){return t.apply(this,e.concat(u.call(arguments)))}}function w(t,e){return this.filter(":"+t+(e?"("+e+")":""))}function $(t,e,r,i){var o=i[3]||n()[(e.nodeName||"").toLowerCase()]||"";return!!o&&!!t(e.getAttribute(o))}t.isUrlInternal=o=function(t){return!t||s(t)?e:!!c.test(t)||!/^(?:https?:)?\/\//i.test(t)&&(!/^[a-z\d.-]+:/i.test(t)||e)},t.isUrlExternal=a=function(t){var e=o(t);return"boolean"==typeof e?!e:e},t.isUrlFragment=s=function(e){var n=(e||"").match(/^([^#]?)([^#]*#).*$/);return!(!n||"#"!==n[2]&&0!==e.indexOf(p)&&("/"===n[1]?f+n[2]!==p:/^https?:\/\//i.test(e)||0!==t('<a href="'+e+'"/>')[0].href.indexOf(p)))},t.fn.urlInternal=y(w,m),t.fn.urlExternal=y(w,g),t.fn.urlFragment=y(w,v),t.expr[":"].urlInternal=y($,o),t.expr[":"].urlExternal=y($,a),t.expr[":"].urlFragment=y($,s),t.elemUrlAttr||(t.elemUrlAttr=function(e){return t.extend(b,e)})({a:_,base:_,iframe:h,img:h,input:h,form:"action",link:_,script:h}),n=t.elemUrlAttr,t.urlInternalHost=r=function(t){t=t?"(?:(?:"+Array.prototype.join.call(arguments,"|")+")\\.)?":"";var e=l.hostname.split(".");e.length>CANONICAL_DOMAIN_PARTS_LENGTH&&e.shift();var n=e.join("."),r=new RegExp("^"+t+"(.*)","i"),o="^(?:https?:)?//(?:(?:"+VALID_SUBDOMAINS.join("|")+").)?"+n.replace(r,t+"$1").replace(/\\?\./g,"\\.")+(l.port?":"+l.port:"")+"/";return i(o)},t.urlInternalRegExp=i=function(t){return t&&(c="string"==typeof t?new RegExp(t,"i"):t),c},r("www")}(jQuery)},function(t,e){function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}angular.module("genius").factory("LyricsSynchronizationClient",["$rootScope","$q","$http","AppConfig",function(t,e,r,i){var o=t.$new(),a=function(t){return _.isNumber(t)&&(t||0===t)},s=function(t,e){return _.compact([i.api_root_url,"lyrics_synchronizations",t,e]).join("/")},c=function(t){return new d(t.data.response.lyrics_synchronization)},l=function(t){var n=new Error(t.data.meta.message);return _.assign(n,_.pick(t,"status","statusText")),e.reject(_.assign(n,t.data.response))},u=function(t){return function(){this._dirty=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return _.tap(Reflect.apply(t,this,n),(function(){o.$emit("edit")}))}},d=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),_.assign(this,e)}var r,i,o;return r=t,(i=[{key:"mark_dirty",get:function(){return u(_.noop)}},{key:"apply_timestamp_to_line_at_index",get:function(){return u((function(t,n){if(t<this.max_timestamp_before_index(n))throw new Error("Can't set time to earlier than a previous line");return this.lines[n].timestamp=t,this.lines.slice(n).forEach((function(e){e.timestamp<t&&(e.timestamp=null)})),e.when(this.lines[n])}))}},{key:"set_line_at_index_hidden",get:function(){return u((function(t,e){_.assign(this.lines[t],{hidden:e,timestamp:null})}))}},{key:"set_line_at_index_marked",get:function(){return u((function(t,e){this.lines[t].fixed=!1,this.lines[t].marked=e}))}},{key:"set_line_at_index_fixed",get:function(){return u((function(t){this.lines[t].marked=!1,this.lines[t].fixed=!0}))}},{key:"add_line_at_index",get:function(){return u((function(t,e){this.lines.splice(t,0,_.defaults(e||{},{added:!0,lyrics:"[Instrumental Break]",timestamp:null}))}))}},{key:"remove_line_at_index",get:function(){return u((function(t){this.lines.splice(t,1)}))}},{key:"max_timestamp_before_index",value:function(t){return _(this.lines.slice(0,t)).map("timestamp").max()||0}},{key:"min_timestamp_after_index",value:function(t){return _(this.lines.slice(t+1)).map("timestamp").compact().min()||this.duration}},{key:"timestamp_for_line_at_index",value:function(t){return-1===t?0:this.lines[t].timestamp}},{key:"line_index_for_position",value:function(t){return _.findLastIndex(this.lines,(function(e){return a(e.timestamp)&&e.timestamp<t}))}},{key:"next_visible_line_index_after_index",value:function(t){return _.findIndex(this.lines,(function(e,n){return n>t&&!e.hidden}))}},{key:"all_lines_timestamped",get:function(){return _.every(this.lines,(function(t){return t.hidden||a(t.timestamp)}))}},{key:"all_timestamps_in_order",get:function(){return _(this.lines).map("timestamp").compact().every((function(t,e,n){return 0===e||t>n[e-1]}))}},{key:"preview",get:function(){return"preview"===this.state}}])&&n(r.prototype,i),o&&n(r,o),t}();return{$on:o.$on.bind(o),get:function(t){return r.get(s(t)).then(c)},preview:function(t){return r.get(s("preview"),{params:t}).then(c).catch(l)},home:function(){return r.get(s("home")).then((function(t){var e=t.data.response.lyrics_synchronization_home;return e.checked_out=e.checked_out.map((function(t){return new d(t)})),e}))},submit:function(t,n,i){return(n._dirty?this.save(n):e.when(n)).then((function(e){return r.post(s(e.id,t),_.assign(i||{},_.pick(e,"lock_version"))).then(c,l)}))},submit_sync:function(t,n){var r=n.sync_and_staff_approve;return _.some(t.lines,"marked")?e.reject(new Error("Can't submit lyrics with lines still marked as incorrect")):this.submit("sync",t,{sync_and_staff_approve:r})},update_state:function(t,e){return r.put(s(e.id,"state"),{state:t}).then(c,l)},save:function(t){if(!t.all_timestamps_in_order)return e.reject(new Error("Can't save lyrics with timestamps out of order"));var n={lyrics_synchronization:t};return r.put(s(t.id),n).then(c,l)},revert_action:function(t,e){return r.post(s(e.id,"revert_action"),{action_id:t.id}).then(c,l)},skip:function(t,e){return r.post(s(e.id,"skip"),t).then(c,l)},change_song:function(t){return r.put(s(t.lyrics_synchronization_id,"song"),{song_id:t.song_id}).then(c,l)},start:function(t){return r.post(s("start"),{verb:t}).then(c,l)},set_finalized:function(t,e){return r[e?"put":"delete"]("".concat(s(t),"/finalized")).then(c,l)}}}])},function(t,e,n){"use strict";n.r(e);n(819);angular.module("genius").factory("Markdown",["$window",function(t){var e=angular.element;return{to_html:function(n){if(!n)return n;var r=new t.Attacklab.showdown.converter;n=n.replace(/(?:^|\s+)https?:\/\/(?:[a-z0-9\-]+\.)+[a-z]{2,6}(?:\/[^\/#?]+)+\.(?:jpe?g|gif|png)(?=$|\s+)/gim,(function(t){return"\n\n![]("+e.trim(t)+")"}));var i=r.makeHtml(n);return e("<div>").append(i).find("a").each((function(){var t=e(this);t.attr("href").match(/^\d+$/)&&t.attr("href","/"+t.attr("href"))})).end().html()}}}])},function(t,e,n){(function(e){t.exports=e.Attacklab=n(820)}).call(this,n(1))},function(t,e){var n=n||{};n.showdown=n.showdown||{},n.showdown.converter=function(){var t,e,n,r=0;this.makeHtml=function(r){if(null!==r)return t=new Array,e=new Array,n=new Array,r=(r=(r=(r=r.replace(/~/g,"~T")).replace(/\$/g,"~D")).replace(/\r\n/g,"\n")).replace(/\r/g,"\n"),r=(r=O(r="\n\n"+r+"\n\n")).replace(/^[ \t]+$/gm,""),r=a(r),r=o(r),r=c(r),r=(r=(r=(r=(r=E(r)).replace(/~D/g,"$$")).replace(/~T/g,"~")).replace(/https?\:\/\/[^"\s\<\>]*[^.,;'">\:\s\<\>\)\]\!]/g,(function(t,e){var n=r.slice(0,e),i=r.slice(e);return n.match(/<[^>]+$/)&&i.match(/^[^>]*>/)?t:"<a href='"+t+"'>"+t+"</a>"}))).replace(/[a-z0-9_\-+=.]+@[a-z0-9\-]+(\.[a-z0-9-]+)+/gi,(function(t){return"<a href='mailto:"+t+"'>"+t+"</a>"}))};var i,o=function(n){return n=n.replace(/^[ ]{0,3}\[(.+)\]:[ \t]*\n?[ \t]*<?(\S+?)>?[ \t]*\n?[ \t]*(?:(\n*)["(](.+?)[")][ \t]*)?(?:\n+)/gm,(function(n,r,i,o,a){return r=r.toLowerCase(),t[r]=k(i),o?o+a:(a&&(e[r]=a.replace(/"/g,"&quot;")),"")}))},a=function(t){return t=(t=(t=(t=(t=(t=(t=t.replace(/\n/g,"\n\n")).replace(/^(<(p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math|ins|del)\b[^\r]*?\n<\/\2>[ \t]*(?=\n+))/gm,s)).replace(/^(<(p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math)\b[^\r]*?.*<\/\2>[ \t]*(?=\n+)\n)/gm,s)).replace(/(\n[ ]{0,3}(<(hr)\b([^<>])*?\/?>)[ \t]*(?=\n{2,}))/g,s)).replace(/(\n\n[ ]{0,3}<!(--[^\r]*?--\s*)+>[ \t]*(?=\n{2,}))/g,s)).replace(/(?:\n\n)([ ]{0,3}(?:<([?%])[^\r]*?\2>)[ \t]*(?=\n{2,}))/g,s)).replace(/\n\n/g,"\n")},s=function(t,e){var r=e;return r=(r=(r=r.replace(/\n\n/g,"\n")).replace(/^\n/,"")).replace(/\n+$/g,""),r="\n\n~K"+(n.push(r)-1)+"K\n\n"},c=function(t){t=h(t);var e=v("<hr />");return t=(t=(t=t.replace(/^[ ]{0,2}([ ]?\*[ ]?){3,}[ \t]*$/gm,e)).replace(/^[ ]{0,2}([ ]?-[ ]?){3,}[ \t]*$/gm,e)).replace(/^[ ]{0,2}([ ]?_[ ]?){3,}[ \t]*$/gm,e),t=m(t),t=g(t),t=$(t),t=a(t),t=x(t)},l=function(t){return t=b(t),t=u(t),t=C(t),t=f(t),t=d(t),t=S(t),t=k(t),t=(t=w(t)).replace(/  +\n/g," <br />\n")},u=function(t){return t=t.replace(/(<[a-z\/!$]("[^"]*"|'[^']*'|[^'">])*>|<!(--.*?--\s*)+>)/gi,(function(t){var e=t.replace(/(.)<\/?code>(?=.)/g,"$1`");return e=T(e,"\\`*_")}))},d=function(t){return t=(t=(t=t.replace(/(\[((?:\[[^\]]*\]|[^\[\]])*)\][ ]?(?:\n[ ]*)?\[(.*?)\])()()()()/g,p)).replace(/(\[((?:\[[^\]]*\]|\[\[[^\]]*\]\]|[^\[\]])*)\]\([ \t]*()<?(.*?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,p)).replace(/(\[([^\[\]]+)\])()()()()()/g,p)},p=function(n,r,i,o,a,s,c,l){null==l&&(l="");var u=r,d=i,p=o.toLowerCase(),f=a,_=l;if(""==f)if(""==p&&(p=d.toLowerCase().replace(/ ?\n/g," ")),f="#"+p,null!=t[p])f=t[p],null!=e[p]&&(_=e[p]);else{if(!(u.search(/\(\s*\)$/m)>-1))return u;f=""}var h='<a href="'+(f=T(f,"*_"))+'"';return""!=_&&(_=_.replace(/"/g,"&quot;"),h+=' title="'+(_=T(_,"*_"))+'"'),h+=">"+d+"</a>"},f=function(t){return t=(t=t.replace(/(!\[(.*?)\][ ]?(?:\n[ ]*)?\[(.*?)\])()()()()/g,_)).replace(/(!\[(.*?)\]\s?\([ \t]*()<?(\S+?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,_)},_=function(n,r,i,o,a,s,c,l){var u=r,d=i,p=o.toLowerCase(),f=a,_=l;if(_||(_=""),""==f){if(""==p&&(p=d.toLowerCase().replace(/ ?\n/g," ")),f="#"+p,null==t[p])return u;f=t[p],null!=e[p]&&(_=e[p])}d=d.replace(/"/g,"&quot;");var h='<img src="'+(f=T(f,"*_"))+'" alt="'+d+'"';return _=_.replace(/"/g,"&quot;"),h+=' title="'+(_=T(_,"*_"))+'"',h+=" />"},h=function(t){return t=(t=(t=t.replace(/^(.+)[ \t]*\n=+[ \t]*\n+/gm,(function(t,e){return v("<h1>"+l(e)+"</h1>")}))).replace(/^(.+)[ \t]*\n-+[ \t]*\n+/gm,(function(t,e){return v("<h2>"+l(e)+"</h2>")}))).replace(/^(\#{1,6})[ \t]*(.+?)[ \t]*\#*\n+/gm,(function(t,e,n){var r=e.length;return v("<h"+r+">"+l(n)+"</h"+r+">")}))},m=function(t){t+="~0";var e=/^(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm;return r?t=t.replace(e,(function(t,e,n){var r=e,o=n.search(/[*+-]/g)>-1?"ul":"ol";r=r.replace(/\n{2,}/g,"\n\n\n");var a=i(r);return a="<"+o+">"+(a=a.replace(/\s+$/,""))+"</"+o+">\n"})):(e=/(\n\n|^\n?)(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/g,t=t.replace(e,(function(t,e,n,r){var o=e,a=n,s=r.search(/[*+-]/g)>-1?"ul":"ol",c=(a=a.replace(/\n{2,}/g,"\n\n\n"),i(a));return c=o+"<"+s+">\n"+c+"</"+s+">\n"}))),t=t.replace(/~0/,"")};i=function(t){return r++,t=t.replace(/\n{2,}$/,"\n"),t=(t=(t+="~0").replace(/(\n)?(^[ \t]*)([*+-]|\d+[.])[ \t]+([^\r]+?(\n{1,2}))(?=\n*(~0|\2([*+-]|\d+[.])[ \t]+))/gm,(function(t,e,n,r,i){var o=i;return e||o.search(/\n{2,}/)>-1?o=c(j(o)):(o=(o=m(j(o))).replace(/\n$/,""),o=l(o)),"<li>"+o+"</li>\n"}))).replace(/~0/g,""),r--,t};var g=function(t){return t=(t=(t+="~0").replace(/(?:\n\n|^)((?:(?:[ ]{4}|\t).*\n+)+)(\n*[ ]{0,3}[^ \t\n]|(?=~0))/g,(function(t,e,n){var r=e,i=n;return r=y(j(r)),r=(r=(r=O(r)).replace(/^\n+/g,"")).replace(/\n+$/g,""),v(r="<pre><code>"+r+"\n</code></pre>")+i}))).replace(/~0/,"")},v=function(t){return t=t.replace(/(^\n+|\n+$)/g,""),"\n\n~K"+(n.push(t)-1)+"K\n\n"},b=function(t){return t=t.replace(/(^|[^\\])(`+)([^\r]*?[^`])\2(?!`)/gm,(function(t,e,n,r,i){var o=r;return o=(o=o.replace(/^([ \t]*)/g,"")).replace(/[ \t]*$/g,""),e+"<code>"+(o=y(o))+"</code>"}))},y=function(t){return t=(t=(t=t.replace(/&/g,"&amp;")).replace(/</g,"&lt;")).replace(/>/g,"&gt;"),t=T(t,"*_{}[]\\",!1)},w=function(t){return t=(t=(t=t.replace(/(\*\*|__)(?=\S)([^\r]*?\S[\*_]*)\1/g,"<strong>$2</strong>")).replace(/(\w)_(\w)/g,"$1~E95E$2")).replace(/(\*|_)(?=\S)([^\r]*?\S)\1/g,"<em>$2</em>")},$=function(t){return t=t.replace(/((^[ \t]*>[ \t]?.+\n(.+\n)*\n*)+)/gm,(function(t,e){var n=e;return n=(n=(n=n.replace(/^[ \t]*>[ \t]?/gm,"~0")).replace(/~0/g,"")).replace(/^[ \t]+$/gm,""),n=(n=(n=c(n)).replace(/(^|\n)/g,"$1  ")).replace(/(\s*<pre>[^\r]+?<\/pre>)/gm,(function(t,e){var n=e;return n=(n=n.replace(/^  /gm,"~0")).replace(/~0/g,"")})),v("<blockquote>\n"+n+"\n</blockquote>")}))},x=function(t){for(var e=(t=(t=t.replace(/^\n+/g,"")).replace(/\n+$/g,"")).split(/\n{2,}/g),r=new Array,i=e.length,o=0;o<i;o++){var a=e[o];a.search(/~K(\d+)K/g)>=0?r.push(a):a.search(/\S/)>=0&&(a=(a=(a=l(a)).replace(/\n/g,"<br />")).replace(/^([ \t]*)/g,"<p>"),a+="</p>",r.push(a))}i=r.length;for(o=0;o<i;o++)for(;r[o].search(/~K(\d+)K/)>=0;){var s=n[RegExp.$1];s=s.replace(/\$/g,"$$$$"),r[o]=r[o].replace(/~K\d+K/,s)}return r.join("\n\n")},k=function(t){return t=(t=t.replace(/&(?!#?[xX]?(?:[0-9a-fA-F]+|\w+);)/g,"&amp;")).replace(/<(?![a-z\/?\$!])/gi,"&lt;")},C=function(t){return t=(t=t.replace(/\\(\\)/g,q)).replace(/\\([`*_{}\[\]()>#+-.!])/g,q)},S=function(t){return t=(t=t.replace(/<((https?|ftp|dict):[^'">\s]+)>/gi,'<a href="$1">$1</a>')).replace(/<(?:mailto:)?([-.\w]+\@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+)>/gi,(function(t,e){return A(E(e))}))},A=function(t){var e=[function(t){return"&#"+t.charCodeAt(0)+";"},function(t){return"&#x"+function(t){var e="0123456789ABCDEF",n=t.charCodeAt(0);return e.charAt(n>>4)+e.charAt(15&n)}(t)+";"},function(t){return t}];return t=(t='<a href="'+(t=(t="mailto:"+t).replace(/./g,(function(t){if("@"==t)t=e[Math.floor(2*Math.random())](t);else if(":"!=t){var n=Math.random();t=n>.9?e[2](t):n>.45?e[1](t):e[0](t)}return t})))+'">'+t+"</a>").replace(/">.+:/g,'">')},E=function(t){return t=t.replace(/~E(\d+)E/g,(function(t,e){var n=parseInt(e);return String.fromCharCode(n)}))},j=function(t){return t=(t=t.replace(/^(\t|[ ]{1,4})/gm,"~0")).replace(/~0/g,"")},O=function(t){return t=(t=(t=(t=(t=t.replace(/\t(?=\t)/g,"    ")).replace(/\t/g,"~A~B")).replace(/~B(.+?)~A/g,(function(t,e,n){for(var r=e,i=4-r.length%4,o=0;o<i;o++)r+=" ";return r}))).replace(/~A/g,"    ")).replace(/~B/g,"")},T=function(t,e,n){var r="(["+e.replace(/([\[\]\\])/g,"\\$1")+"])";n&&(r="\\\\"+r);var i=new RegExp(r,"g");return t=t.replace(i,q)},q=function(t,e){return"~E"+e.charCodeAt(0)+"E"}};n.showdown;n.fileLoaded&&n.fileLoaded("showdown.js"),t.exports=n},function(t,e){angular.module("genius").factory("MarkdownHelpers",(function(){var t=function(t,e,n,r,i,o,a,s){void 0===s&&(s="");var c=e,l=n,u=r.toLowerCase(),d=i,p=s;if(""===d){if(""===u&&(u=l.toLowerCase().replace(/ ?\n/g," ")),d="#"+u,!(c.search(/\(\s*\)$/m)>-1))return c;d=""}var f='<a href="'+d+'"';return""!==p&&(f+=' title="'+(p=p.replace(/"/g,"&quot;"))+'"'),f+=">"+l+"</a>"};return{unescape_special_characters_escaped_by_markdown_anchor_converter:function(t){return t.replace(/~E(\d+)E/,(function(t,e){return String.fromCharCode(e)}))},convert_markdown_anchors:function(e){return e.replace(/(\[((?:\[[^\]]*\]|\[\[[^\]]*\]\]|[^\[\]])*)\]\([ \t]*()<?(.*?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,t)}}}))},function(t,e){angular.module("genius").factory("MarkdownPlaintextFinderRegex",[function(){return function(t){return new RegExp(t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),"gm")}}])},function(t,e){angular.module("genius").factory("MarkdownPreviewClient",["$http","AppConfig",function(t,e){return{create_preview:function(n){return t.post("".concat(e.api_root_url,"/markdown_preview"),{markdown:n}).then((function(t){return t.data.response.html}))}}}])},function(t,e){angular.module("genius").factory("MentionClient",["$http","AppConfig",function(t,e){return{autocomplete:function(n){return t.get("".concat(e.api_root_url,"/mentions"),{params:{q:n}}).then((function(t){return t.data.response.mentions}))}}}])},function(t,e){angular.module("genius").factory("MessageClient",["ApiClient",function(t){return{for_conversation:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.returning("messages").get("/conversations/:conversation_id/messages",{conversation_id:e,text_format:"html",page:n.page||1})},create:function(e){return t.returning("message").post("/messages",{message:e,text_format:"html"})}}}])},function(t,e){angular.module("genius").factory("MetaTagData",["$document",function(t){var e={};return{get:function(n){if(_.has(e,n))return e[n];var r=t[0].head.querySelector("[itemprop=".concat(n,"]"));return e[n]=r?JSON.parse(r.content):void 0,e[n]}}}])},function(t,e){angular.module("genius").factory("MixedDataFeed",["$q",function(t){return function(){return function e(n){var r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.scrollable_data_objects=n,this.reset=function(){_.each(r.scrollable_data_objects,(function(t){t.src.reset()}))},this.next=function(){return t.all(_.map(r.scrollable_data_objects,(function(t){return t.src.next().then((function(e){return{type:t.type,models:e}}))})))},this.has_next=function(){return _.some(r.scrollable_data_objects,(function(t){return t.src.has_next()}))}}}()}])},function(t,e){angular.module("genius").factory("ModelRouter",(function(){return{lookup:function(t){if(!_.isString(t))throw Error("URL must be a string");var e=t.match(/^\/referents\/(\d+)$/);if(e)return{type:"referent",id:Number(e[1])}}}}))},function(t,e,n){"use strict";n.r(e);n(45);angular.module("genius").factory("moment",["$window",function(t){return t.moment}])},function(t,e,n){"use strict";n.r(e);n(831),n(832);angular.module("genius").factory("Mousetrap",["$window","$rootScope",function(t,e){var n=function(t,n){return n=n||{},function(r){n.prevent_default&&r.preventDefault(),n.stop_propagation&&r.stopPropagation(),e.$apply(function(){t.call(this,r)}.bind(this))}},r=function(e,n){this.default_options=n||{},this.mousetrap=new t.Mousetrap(e)};return r.prototype.bind=function(t,e){this.mousetrap.bind(t,e)},r.prototype.$bind=function(t,e,r){r=_.assign({},this.default_options,r),this.bind(t,n(e,r))},_.assign(r,{$bind:function(t,e,r){this.bind(t,n(e,r))},bind:t.Mousetrap.bind.bind(t.Mousetrap),unbind:t.Mousetrap.unbind.bind(t.Mousetrap),trigger:t.Mousetrap.trigger.bind(t.Mousetrap),bindGlobal:t.Mousetrap.bindGlobal.bind(t.Mousetrap)})}])},function(t,e,n){var r;!function(i,o,a){for(var s,c={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},l={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},u={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},d={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},p=1;p<20;++p)c[111+p]="f"+p;for(p=0;p<=9;++p)c[p+96]=p;function f(t,e,n){t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent("on"+e,n)}function _(t){if("keypress"==t.type){var e=String.fromCharCode(t.which);return t.shiftKey||(e=e.toLowerCase()),e}return c[t.which]?c[t.which]:l[t.which]?l[t.which]:String.fromCharCode(t.which).toLowerCase()}function h(t){return"shift"==t||"ctrl"==t||"alt"==t||"meta"==t}function m(t,e,n){return n||(n=function(){if(!s)for(var t in s={},c)t>95&&t<112||c.hasOwnProperty(t)&&(s[c[t]]=t);return s}()[t]?"keydown":"keypress"),"keypress"==n&&e.length&&(n="keydown"),n}function g(t,e){var n,r,i,o=[];for(n=function(t){return"+"===t?["+"]:(t=t.replace(/\+{2}/g,"+plus")).split("+")}(t),i=0;i<n.length;++i)r=n[i],d[r]&&(r=d[r]),e&&"keypress"!=e&&u[r]&&(r=u[r],o.push("shift")),h(r)&&o.push(r);return{key:r,modifiers:o,action:e=m(r,o,e)}}function v(t,e){return null!==t&&t!==o&&(t===e||v(t.parentNode,e))}function b(t){var e=this;if(t=t||o,!(e instanceof b))return new b(t);e.target=t,e._callbacks={},e._directMap={};var n,r={},i=!1,a=!1,s=!1;function c(t){t=t||{};var e,n=!1;for(e in r)t[e]?n=!0:r[e]=0;n||(s=!1)}function l(t,n,i,o,a,s){var c,l,u,d,p=[],f=i.type;if(!e._callbacks[t])return[];for("keyup"==f&&h(t)&&(n=[t]),c=0;c<e._callbacks[t].length;++c)if(l=e._callbacks[t][c],(o||!l.seq||r[l.seq]==l.level)&&f==l.action&&("keypress"==f&&!i.metaKey&&!i.ctrlKey||(u=n,d=l.modifiers,u.sort().join(",")===d.sort().join(",")))){var _=!o&&l.combo==a,m=o&&l.seq==o&&l.level==s;(_||m)&&e._callbacks[t].splice(c,1),p.push(l)}return p}function u(t,n,r,i){e.stopCallback(n,n.target||n.srcElement,r,i)||!1===t(n,r)&&(function(t){t.preventDefault?t.preventDefault():t.returnValue=!1}(n),function(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0}(n))}function d(t){"number"!=typeof t.which&&(t.which=t.keyCode);var n=_(t);n&&("keyup"!=t.type||i!==n?e.handleKey(n,function(t){var e=[];return t.shiftKey&&e.push("shift"),t.altKey&&e.push("alt"),t.ctrlKey&&e.push("ctrl"),t.metaKey&&e.push("meta"),e}(t),t):i=!1)}function p(t,e,o,a){function l(e){return function(){s=e,++r[t],clearTimeout(n),n=setTimeout(c,1e3)}}function d(e){u(o,e,t),"keyup"!==a&&(i=_(e)),setTimeout(c,10)}r[t]=0;for(var p=0;p<e.length;++p){var f=p+1===e.length?d:l(a||g(e[p+1]).action);m(e[p],f,a,t,p)}}function m(t,n,r,i,o){e._directMap[t+":"+r]=n;var a,s=(t=t.replace(/\s+/g," ")).split(" ");s.length>1?p(t,s,n,r):(a=g(t,r),e._callbacks[a.key]=e._callbacks[a.key]||[],l(a.key,a.modifiers,{type:a.action},i,t,o),e._callbacks[a.key][i?"unshift":"push"]({callback:n,modifiers:a.modifiers,action:a.action,seq:i,level:o,combo:t}))}e._handleKey=function(t,e,n){var r,i=l(t,e,n),o={},d=0,p=!1;for(r=0;r<i.length;++r)i[r].seq&&(d=Math.max(d,i[r].level));for(r=0;r<i.length;++r)if(i[r].seq){if(i[r].level!=d)continue;p=!0,o[i[r].seq]=1,u(i[r].callback,n,i[r].combo,i[r].seq)}else p||u(i[r].callback,n,i[r].combo);var f="keypress"==n.type&&a;n.type!=s||h(t)||f||c(o),a=p&&"keydown"==n.type},e._bindMultiple=function(t,e,n){for(var r=0;r<t.length;++r)m(t[r],e,n)},f(t,"keypress",d),f(t,"keydown",d),f(t,"keyup",d)}b.prototype.bind=function(t,e,n){var r=this;return t=t instanceof Array?t:[t],r._bindMultiple.call(r,t,e,n),r},b.prototype.unbind=function(t,e){return this.bind.call(this,t,(function(){}),e)},b.prototype.trigger=function(t,e){var n=this;return n._directMap[t+":"+e]&&n._directMap[t+":"+e]({},t),n},b.prototype.reset=function(){var t=this;return t._callbacks={},t._directMap={},t},b.prototype.stopCallback=function(t,e){return!((" "+e.className+" ").indexOf(" mousetrap ")>-1)&&(!v(e,this.target)&&("INPUT"==e.tagName||"SELECT"==e.tagName||"TEXTAREA"==e.tagName||e.isContentEditable))},b.prototype.handleKey=function(){var t=this;return t._handleKey.apply(t,arguments)},b.init=function(){var t=b(o);for(var e in t)"_"!==e.charAt(0)&&(b[e]=function(e){return function(){return t[e].apply(t,arguments)}}(e))},b.init(),i.Mousetrap=b,t.exports&&(t.exports=b),void 0===(r=function(){return b}.call(e,n,e,t))||(t.exports=r)}(window,document)},function(t,e){!function(t){var e={},n=t.prototype.stopCallback;t.prototype.stopCallback=function(t,r,i,o){return!!this.paused||!e[i]&&!e[o]&&n.call(this,t,r,i)},t.prototype.bindGlobal=function(t,n,r){if(this.bind(t,n,r),t instanceof Array)for(var i=0;i<t.length;i++)e[t[i]]=!0;else e[t]=!0},t.init()}(Mousetrap)},function(t,e,n){"use strict";n.r(e);n(834);angular.module("genius").factory("MusicKit",["$q","$window",function(t,e){var n=t.defer();return document.addEventListener("musickitloaded",n.resolve),e.loadjs(["https://js-cdn.music.apple.com/musickit/v1/musickit.js"],{async:!0,error:function(){n.reject(new Error("MusicKit failed to load"))}}),{load:function(){return n.promise.then((function(){var t=window.MusicKit;return t.configure({developerToken:window.MUSICKIT_TOKEN,declarativeMarkup:!1,debug:!0,app:{name:"Genius"},suppressErrorDialog:!0,features:["equivalencies"]}),t}))}}}])},function(t,e){loadjs=function(){var t=function(){},e={},n={},r={};function i(t,e){if(t){var i=r[t];if(n[t]=e,i)for(;i.length;)i[0](t,e),i.splice(0,1)}}function o(e,n){e.call&&(e={success:e}),n.length?(e.error||t)(n):(e.success||t)(e)}function a(e,n,r,i){var o,s,c=document,l=r.async,u=(r.numRetries||0)+1,d=r.before||t,p=e.replace(/^(css|img)!/,"");i=i||0,/(^css!|\.css$)/.test(e)?(o=!0,(s=c.createElement("link")).rel="stylesheet",s.href=p):/(^img!|\.(png|gif|jpg|svg)$)/.test(e)?(s=c.createElement("img")).src=p:((s=c.createElement("script")).src=e,s.async=void 0===l||l),s.onload=s.onerror=s.onbeforeload=function(t){var c=t.type[0];if(o&&"hideFocus"in s)try{s.sheet.cssText.length||(c="e")}catch(t){c="e"}if("e"==c&&(i+=1)<u)return a(e,n,r,i);n(e,c,t.defaultPrevented)},!1!==d(e,s)&&c.head.appendChild(s)}function s(t,n,r){var s,c;if(n&&n.trim&&(s=n),c=(s?r:n)||{},s){if(s in e)throw"LoadJS";e[s]=!0}!function(t,e,n){var r,i,o=(t=t.push?t:[t]).length,s=o,c=[];for(r=function(t,n,r){if("e"==n&&c.push(t),"b"==n){if(!r)return;c.push(t)}--o||e(c)},i=0;i<s;i++)a(t[i],r,n)}(t,(function(t){o(c,t),i(s,t)}),c)}return s.ready=function(t,e){return function(t,e){t=t.push?t:[t];var i,o,a,s=[],c=t.length,l=c;for(i=function(t,n){n.length&&s.push(t),--l||e(s)};c--;)o=t[c],(a=n[o])?i(o,a):(r[o]=r[o]||[]).push(i)}(t,(function(t){o(e,t)})),s},s.done=function(t){i(t,[])},s.reset=function(){e={},n={},r={}},s.isDefined=function(t){return t in e},s}()},function(t,e){angular.module("genius").factory("MutationObserver",["$window",function(t){return t.MutationObserver}])},function(t,e){angular.module("genius").factory("NewRelic",["$window","$rootScope","Session",function(t,e,n){var r=t.newrelic;return{init:function(t){var i,o,a;r&&(r.setCustomAttribute("signedIn",n.user_signed_in),t&&r.setPageViewName(t,"resource.path"),i=2,o=0,a=e.$watch((function(){(o+=1)===i&&(r.finished(),r.addPageAction("secondApply"),a())})))}}}])},function(t,e,n){"use strict";n.r(e);n(838);angular.module("genius").factory("Odometer",["$window",function(t){return t.Odometer}])},function(t,e,n){(function(e){t.exports=e.Odometer=n(839)}).call(this,n(1))},function(t,e,n){var r,i;(function(){var o,a,s,c,l,u,d,p,f,_,h,m,g,v,b,y,w,$,x,k=[].slice;o=/^\(?([^)]*)\)?(?:(.)(d+))?$/,m=document.createElement("div").style,c=null!=m.transition||null!=m.webkitTransition||null!=m.mozTransition||null!=m.oTransition,_=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,a=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver,u=function(t){var e;return(e=document.createElement("div")).innerHTML=t,e.children[0]},f=function(t,e){return t.className=t.className.replace(new RegExp("(^| )"+e.split(" ").join("|")+"( |$)","gi")," ")},l=function(t,e){return f(t,e),t.className+=" "+e},g=function(t,e){var n;if(null!=document.createEvent)return(n=document.createEvent("HTMLEvents")).initEvent(e,!0,!0),t.dispatchEvent(n)},p=function(){var t,e;return null!=(t=null!=(e=window.performance)&&"function"==typeof e.now?e.now():void 0)?t:+new Date},h=function(t,e){return null==e&&(e=0),e?(t*=Math.pow(10,e),t+=.5,(t=Math.floor(t))/Math.pow(10,e)):Math.round(t)},v=function(t){return t<0?Math.ceil(t):Math.floor(t)},d=function(t){return t-h(t)},y=!1,(b=function(){var t,e,n,r,i;if(!y&&null!=window.jQuery){for(y=!0,i=[],e=0,n=(r=["html","text"]).length;e<n;e++)t=r[e],i.push(function(t){var e;return e=window.jQuery.fn[t],window.jQuery.fn[t]=function(t){var n;return null==t||null==(null!=(n=this[0])?n.odometer:void 0)?e.apply(this,arguments):this[0].odometer.update(t)}}(t));return i}})(),setTimeout(b,0),s=function(){function t(e){var n,r,i,o,a,s,c,l,u,d=this;if(this.options=e,this.el=this.options.el,null!=this.el.odometer)return this.el.odometer;for(n in this.el.odometer=this,c=t.options)i=c[n],null==this.options[n]&&(this.options[n]=i);null==(o=this.options).duration&&(o.duration=2e3),this.MAX_VALUES=this.options.duration/33.333333333333336/2|0,this.resetFormat(),this.value=this.cleanValue(null!=(l=this.options.value)?l:""),this.renderInside(),this.render();try{for(a=0,s=(u=["innerHTML","innerText","textContent"]).length;a<s;a++)r=u[a],null!=this.el[r]&&function(t){Object.defineProperty(d.el,t,{get:function(){var e;return"innerHTML"===t?d.inside.outerHTML:null!=(e=d.inside.innerText)?e:d.inside.textContent},set:function(t){return d.update(t)}})}(r)}catch(t){t,this.watchForMutations()}}return t.prototype.renderInside=function(){return this.inside=document.createElement("div"),this.inside.className="odometer-inside",this.el.innerHTML="",this.el.appendChild(this.inside)},t.prototype.watchForMutations=function(){var t=this;if(null!=a)try{return null==this.observer&&(this.observer=new a((function(e){var n;return n=t.el.innerText,t.renderInside(),t.render(t.value),t.update(n)}))),this.watchMutations=!0,this.startWatchingMutations()}catch(t){t}},t.prototype.startWatchingMutations=function(){if(this.watchMutations)return this.observer.observe(this.el,{childList:!0})},t.prototype.stopWatchingMutations=function(){var t;return null!=(t=this.observer)?t.disconnect():void 0},t.prototype.cleanValue=function(t){var e;return"string"==typeof t&&(t=(t=(t=t.replace(null!=(e=this.format.radix)?e:".","<radix>")).replace(/[.,]/g,"")).replace("<radix>","."),t=parseFloat(t,10)||0),h(t,this.format.precision)},t.prototype.bindTransitionEnd=function(){var t,e,n,r,i,o,a=this;if(!this.transitionEndBound){for(this.transitionEndBound=!0,e=!1,o=[],n=0,r=(i="transitionend webkitTransitionEnd oTransitionEnd otransitionend MSTransitionEnd".split(" ")).length;n<r;n++)t=i[n],o.push(this.el.addEventListener(t,(function(){return e||(e=!0,setTimeout((function(){return a.render(),e=!1,g(a.el,"odometerdone")}),0)),!0}),!1));return o}},t.prototype.resetFormat=function(){var t,e,n,r,i,a,s,c;if((t=null!=(s=this.options.format)?s:"(,ddd).dd")||(t="d"),!(n=o.exec(t)))throw new Error("Odometer: Unparsable digit format");return a=(c=n.slice(1,4))[0],i=c[1],r=(null!=(e=c[2])?e.length:void 0)||0,this.format={repeating:a,radix:i,precision:r}},t.prototype.render=function(t){var e,n,r,i,o,a,s;for(null==t&&(t=this.value),this.stopWatchingMutations(),this.resetFormat(),this.inside.innerHTML="",o=this.options.theme,i=[],a=0,s=(e=this.el.className.split(" ")).length;a<s;a++)(n=e[a]).length&&((r=/^odometer-theme-(.+)$/.exec(n))?o=r[1]:/^odometer(-|$)/.test(n)||i.push(n));return i.push("odometer"),c||i.push("odometer-no-transitions"),o?i.push("odometer-theme-"+o):i.push("odometer-auto-theme"),this.el.className=i.join(" "),this.ribbons={},this.formatDigits(t),this.startWatchingMutations()},t.prototype.formatDigits=function(t){var e,n,r,i,o,a,s,c,l;if(this.digits=[],this.options.formatFunction)for(i=0,a=(c=this.options.formatFunction(t).split("").reverse()).length;i<a;i++)(n=c[i]).match(/0-9/)?((e=this.renderDigit()).querySelector(".odometer-value").innerHTML=n,this.digits.push(e),this.insertDigit(e)):this.addSpacer(n);else for(r=!this.format.precision||!d(t)||!1,o=0,s=(l=t.toString().split("").reverse()).length;o<s;o++)"."===(e=l[o])&&(r=!0),this.addDigit(e,r)},t.prototype.update=function(t){var e,n=this;if(e=(t=this.cleanValue(t))-this.value)return f(this.el,"odometer-animating-up odometer-animating-down odometer-animating"),l(this.el,e>0?"odometer-animating-up":"odometer-animating-down"),this.stopWatchingMutations(),this.animate(t),this.startWatchingMutations(),setTimeout((function(){return n.el.offsetHeight,l(n.el,"odometer-animating")}),0),this.value=t},t.prototype.renderDigit=function(){return u('<span class="odometer-digit"><span class="odometer-digit-spacer">8</span><span class="odometer-digit-inner"><span class="odometer-ribbon"><span class="odometer-ribbon-inner"><span class="odometer-value"></span></span></span></span></span>')},t.prototype.insertDigit=function(t,e){return null!=e?this.inside.insertBefore(t,e):this.inside.children.length?this.inside.insertBefore(t,this.inside.children[0]):this.inside.appendChild(t)},t.prototype.addSpacer=function(t,e,n){var r;return(r=u('<span class="odometer-formatting-mark"></span>')).innerHTML=t,n&&l(r,n),this.insertDigit(r,e)},t.prototype.addDigit=function(t,e){var n,r,i,o;if(null==e&&(e=!0),"-"===t)return this.addSpacer(t,null,"odometer-negation-mark");if("."===t)return this.addSpacer(null!=(o=this.format.radix)?o:".",null,"odometer-radix-mark");if(e)for(i=!1;;){if(!this.format.repeating.length){if(i)throw new Error("Bad odometer format without digits");this.resetFormat(),i=!0}if(n=this.format.repeating[this.format.repeating.length-1],this.format.repeating=this.format.repeating.substring(0,this.format.repeating.length-1),"d"===n)break;this.addSpacer(n)}return(r=this.renderDigit()).querySelector(".odometer-value").innerHTML=t,this.digits.push(r),this.insertDigit(r)},t.prototype.animate=function(t){return c&&"count"!==this.options.animation?this.animateSlide(t):this.animateCount(t)},t.prototype.animateCount=function(t){var e,n,r,i,o,a=this;if(n=+t-this.value)return i=r=p(),e=this.value,(o=function(){var s,c;return p()-i>a.options.duration?(a.value=t,a.render(),void g(a.el,"odometerdone")):((s=p()-r)>50&&(r=p(),c=s/a.options.duration,e+=n*c,a.render(Math.round(e))),null!=_?_(o):setTimeout(o,50))})()},t.prototype.getDigitCount=function(){var t,e,n,r,i,o;for(t=i=0,o=(r=1<=arguments.length?k.call(arguments,0):[]).length;i<o;t=++i)n=r[t],r[t]=Math.abs(n);return e=Math.max.apply(Math,r),Math.ceil(Math.log(e+1)/Math.log(10))},t.prototype.getFractionalDigitCount=function(){var t,e,n,r,i,o,a;for(e=/^\-?\d*\.(\d*?)0*$/,t=o=0,a=(i=1<=arguments.length?k.call(arguments,0):[]).length;o<a;t=++o)r=i[t],i[t]=r.toString(),n=e.exec(i[t]),i[t]=null==n?0:n[1].length;return Math.max.apply(Math,i)},t.prototype.resetDigits=function(){return this.digits=[],this.ribbons=[],this.inside.innerHTML="",this.resetFormat()},t.prototype.animateSlide=function(t){var e,n,r,i,o,a,s,c,u,d,p,f,_,h,m,g,b,y,w,$,x,k,C,S,A,E,j;if(g=this.value,(c=this.getFractionalDigitCount(g,t))&&(t*=Math.pow(10,c),g*=Math.pow(10,c)),r=t-g){for(this.bindTransitionEnd(),i=this.getDigitCount(g,t),o=[],e=0,p=w=0;0<=i?w<i:w>i;p=0<=i?++w:--w){if(b=v(g/Math.pow(10,i-p-1)),a=(s=v(t/Math.pow(10,i-p-1)))-b,Math.abs(a)>this.MAX_VALUES){for(d=[],f=a/(this.MAX_VALUES+this.MAX_VALUES*e*.5),n=b;a>0&&n<s||a<0&&n>s;)d.push(Math.round(n)),n+=f;d[d.length-1]!==s&&d.push(s),e++}else d=function(){j=[];for(var t=b;b<=s?t<=s:t>=s;b<=s?t++:t--)j.push(t);return j}.apply(this);for(p=$=0,k=d.length;$<k;p=++$)u=d[p],d[p]=Math.abs(u%10);o.push(d)}for(this.resetDigits(),p=x=0,C=(E=o.reverse()).length;x<C;p=++x)for(d=E[p],this.digits[p]||this.addDigit(" ",p>=c),null==(y=this.ribbons)[p]&&(y[p]=this.digits[p].querySelector(".odometer-ribbon-inner")),this.ribbons[p].innerHTML="",r<0&&(d=d.reverse()),_=A=0,S=d.length;A<S;_=++A)u=d[_],(m=document.createElement("div")).className="odometer-value",m.innerHTML=u,this.ribbons[p].appendChild(m),_===d.length-1&&l(m,"odometer-last-value"),0===_&&l(m,"odometer-first-value");return b<0&&this.addDigit("-"),null!=(h=this.inside.querySelector(".odometer-radix-mark"))&&h.parent.removeChild(h),c?this.addSpacer(this.format.radix,this.digits[c-1],"odometer-radix-mark"):void 0}},t}(),s.options=null!=($=window.odometerOptions)?$:{},setTimeout((function(){var t,e,n,r,i;if(window.odometerOptions){for(t in i=[],r=window.odometerOptions)e=r[t],i.push(null!=(n=s.options)[t]?(n=s.options)[t]:n[t]=e);return i}}),0),s.init=function(){var t,e,n,r,i,o;if(null!=document.querySelectorAll){for(o=[],n=0,r=(e=document.querySelectorAll(s.options.selector||".odometer")).length;n<r;n++)t=e[n],o.push(t.odometer=new s({el:t,value:null!=(i=t.innerText)?i:t.textContent}));return o}},null!=(null!=(x=document.documentElement)?x.doScroll:void 0)&&null!=document.createEventObject?(w=document.onreadystatechange,document.onreadystatechange=function(){return"complete"===document.readyState&&!1!==s.options.auto&&s.init(),null!=w?w.apply(this,arguments):void 0}):document.addEventListener("DOMContentLoaded",(function(){if(!1!==s.options.auto)return s.init()}),!1),r=[n(7)],void 0===(i=function(){return s}.apply(e,r))||(t.exports=i)}).call(this)},function(t,e){angular.module("genius").factory("on_within_visibility_range",["$q","$window",function(t,e){var n=0,r=$(e).height(),i=[],o=function(){n=Math.max(n,$(e).scrollTop()),i=_.tap([],(function(t){i.forEach((function(e){e.element.offset().top-e.range<n+r?e.resolve():t.push(e)}))}))};return $(e).on("scroll",_.throttle(o,100)),$(e).on("resize",(function(){r=$(e).height()})),function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return _.tap(t((function(t){return i.push({resolve:t,range:n,element:$(e)})})),o)}}])},function(t,e){angular.module("genius").factory("only_changes",[function(){return function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.except,i=void 0===r?[]:r;return _.omitBy(t,(function(t,n){return!i.includes(n)&&e[n]===t}))}}])},function(t,e){angular.module("genius").factory("OnsiteInterceptor",(function(){return{request:function(t){var e,n,r=(e=t.url,(n=document.createElement("a")).href=e,n.hostname);return r&&r!==window.location.hostname||(t.headers["X-Requested-With"]="XMLHttpRequest","GET"!==t.method&&(t.headers["X-CSRF-Token"]=$.cookie("_csrf_token"))),t}}}))},function(t,e){angular.module("genius").factory("PageDataClient",["MetaTagData","ApiClient",function(t,e){return{load:function(t,n){return e.transform(_.property("page_data")).get("/page_data/:type",{type:t,page_path:n})},preloaded:function(){return t.get("page_data")}}}])},function(t,e){function n(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){c=!0,a=t},f:function(){try{s||null==n.return||n.return()}finally{if(c)throw a}}}}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}angular.module("genius").factory("PageTransition",["$document","$exceptionHandler","$location","$rootScope","Ads","AsyncAnalytics","cfpLoadingBar","PageDataClient",function(t,e,r,i,o,a,s,c){var l=!1,u=i.$new(!0);return{by_router_instruction:function(i,d){return _.isUndefined(d)&&e(new Error("must pass $prevInstruction as second argument to by_router_instruction")),_.isNull(d)&&c.preloaded()?(Object.assign(i.routeData,{page_data:c.preloaded()}),!0):(l=!0,s.start(),c.load(i.routeData.data.type,r.path()).then((function(e){if(l=!1,s.complete(),Object.assign(i.routeData,{page_data:e}),e.dfp_kv){var r,c={},d=n(e.dfp_kv);try{for(d.s();!(r=d.n()).done;){var p=r.value,f=p.name,_=p.values;c[f]=_}}catch(t){d.e(t)}finally{d.f()}o.reset_for_new_page_view({targeting:c})}return t.prop("title",e.title),t.scrollTop(0),a.on_navigation(e),u.$broadcast("client_transition_complete"),!0})).catch((function(e){return t.prop("location").reload(),Promise.reject(e)})))},on_client_transition_complete:function(t){u.$on("client_transition_complete",t)},get transitioning(){return l}}}])},function(t,e){angular.module("genius").factory("PageVisibility",["$document","$rootScope",function(t,e){var n,r;_.isUndefined(t[0].hidden)?_.isUndefined(t[0].mozHidden)?_.isUndefined(t[0].msHidden)?_.isUndefined(t[0].webkitHidden)||(n="webkitHidden",r="webkitvisibilitychange"):(n="msHidden",r="msvisibilitychange"):(n="mozHidden",r="mozvisibilitychange"):(n="hidden",r="visibilitychange");var i=!_.isUndefined(n),o=[];return i&&t[0].addEventListener(r,(function(){if(!_.isEmpty(o)){for(;_.some(o);)o.shift()();e.$apply()}})),{is_visible:function(){return!t[0][n]},is_hidden:function(){return t[0][n]},when_visible:function(e,r){e=r?e.bind(r):e,i&&t[0][n]?o.push(e):e()}}}])},function(t,e){function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}angular.module("genius").factory("PagedDataFeed",[function(){return function(){return function t(e,r){var i=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:_.noop;n(this,t),this.next_page=a,this.params=_.clone(o),this.next=function(){return e(_.assign({page:i.next_page},i.params)).then((function(t){return i.next_page=t.next_page,i.total_entries=t.total_entries,s(t[r]),t[r]}))},this.has_next=function(){return i.next_page},this.reset=function(){i.next_page=1}}}()}])},function(t,e){angular.module("genius").factory("parse_time_string",(function(){return function(t){if(!t)return null;var e=t.split(/\D/);return 1===e.length?parseInt(e[0]):60*(e[0]?parseInt(e[0]):0)*1e3+1e3*(e[1]?parseInt(e[1]):0)+(e[2]?parseInt((e[2]+"000").slice(0,3)):0)}}))},function(t,e){function n(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var r,i,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);a=!0);}catch(t){s=!0,i=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}(t,e)||i(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=i(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){c=!0,a=t},f:function(){try{s||null==n.return||n.return()}finally{if(c)throw a}}}}function i(t,e){if(t){if("string"==typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(t,e):void 0}}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}angular.module("genius").factory("patch_structured_text",["StructuredText","diff_match_patch",function(t,e){var i=e.DIFF_DELETE,o=e.DIFF_INSERT,a=e.DIFF_EQUAL;return function(s,c){var l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},u=l.dmp;if(0===s.length)return[c,[]];s=(u=u||new e).patch_deepCopy(s),u.patch_splitMax(s);for(var d=u.patch_addPadding(s),p=new t(d+c+d),f=0,_=[],h=0;h<s.length;h++){var m=s[h].start2+f,g=u.diff_text1(s[h].diffs),v=void 0,b=-1;if(g.length>u.Match_MaxBits?-1!==(v=u.match_main(p.plain,g.substring(0,u.Match_MaxBits),m))&&(-1===(b=u.match_main(p.plain,g.substring(g.length-u.Match_MaxBits),m+g.length-u.Match_MaxBits))||v>=b)&&(v=-1):v=u.match_main(p.plain,g,m),-1===v)_[h]=!1,f-=s[h].length2-s[h].length1;else{_[h]=!0,f=v-m;var y=void 0;y=-1===b?p.plain.substring(v,v+g.length):p.plain.substring(v,b+u.Match_MaxBits);var w=u.diff_main(g,y,!1);if(g.length>u.Match_MaxBits&&u.diff_levenshtein(w)/g.length>u.Patch_DeleteThreshold)_[h]=!1;else{u.diff_cleanupSemanticLossless(w);var $,x=0,k=void 0,C=r(s[h].diffs);try{for(C.s();!($=C.n()).done;){var S=n($.value,2),A=S[0],E=S[1];A!==a&&(k=u.diff_xIndex(w,x)),A===o?p=p.insert_at(v+k,E):A===i&&(p=p.remove_range(v+k,v+u.diff_xIndex(w,x+E.length))),A!==i&&(x+=E.length)}}catch(t){C.e(t)}finally{C.f()}}}}return[p.structured.substring(d.length,p.structured.length-d.length),_]}}])},function(t,e){angular.module("genius").factory("performance_mark",["$window",function(t){var e=function(e){_.get(t,"performance.mark")&&t.performance.mark(e)};return{create:e,create_once:_.memoize(e)}}])},function(t,e){angular.module("genius").factory("Preloader",["$q",function(t){var e=function(t){this.bulk_load_function=t};return e.prototype={cache:{},insert:function(e,n){this.cache[e]=t.when(n)},load:function(t){return this.bulk_load([t]),this.cache[t]},filter_unloaded:function(t){var e=this.cache;return t.filter((function(t){return!e[t]}))},bulk_load:function(t){var e=this.cache,n=this.filter_unloaded(t),r=n.length?this.bulk_load_function(n):void 0;n.forEach((function(t){e[t]=r.then((function(e){return e[t]}))}))}},e}])},function(t,e,n){(function(t){function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}angular.module("genius").factory("PromiseQueue",["$q",function(r){return function(){function i(){var n=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e(this,i),this.pending_count=0,this.queue=(new t.Subject).do((function(){return n.pending_count++})).concatMap((function(e){var n=e.f,i=e.deferred;i.resolve(n());var o=t.Observable.fromPromise(i.promise);return r.fail_fast||(o=o.catch((function(e){return t.Observable.of(e)}))),o})),this.queue.subscribe((function(){return n.pending_count--}),_.noop)}var o,a,s;return o=i,(a=[{key:"is_empty",value:function(){return 0===this.pending_count}},{key:"add",value:function(t){var e=r.defer();return this.queue.next({f:t,deferred:e}),e.promise}}])&&n(o.prototype,a),s&&n(o,s),i}()}])}).call(this,n(121))},function(t,e,n){"use strict";n.r(e);n(853);angular.module("genius").factory("Pusher",["$window","$rootScope","AppConfig",function(t,e,n){var r,i={},o=function(){return r||(r=new t.Pusher(n.pusher_app_key)),r};return{pusher:o,subscribe:function(t,n,r){i[t]||(i[t]={},o().subscribe(t).bind_all((function(n,r){var o=i[t][n];o&&e.$applyAsync((function(){o.forEach((function(t){t(r)}))}))}))),i[t][n]=i[t][n]||[],i[t][n].push(r)}}}])},function(t,e,n){var r;r=function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={exports:{},id:r,loaded:!1};return t[r].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}return n.m=t,n.c=e,n.p="",n(0)}([function(t,e,n){"use strict";var r=n(1);t.exports=r.default},function(t,e,n){"use strict";var r=n(2),i=n(9),o=n(23),a=n(38),s=n(39),c=n(40),l=n(12),u=n(5),d=n(62),p=n(8),f=n(42),_=function(){function t(e,n){var l=this;!function(t){if(null==t)throw"You must pass your app key when you instantiate Pusher."}(e),n=n||{},this.key=e,this.config=i.extend(d.getGlobalConfig(),n.cluster?d.getClusterConfig(n.cluster):{},n),this.channels=f.default.createChannels(),this.global_emitter=new o.default,this.sessionID=Math.floor(1e9*Math.random()),this.timeline=new a.default(this.key,this.sessionID,{cluster:this.config.cluster,features:t.getClientFeatures(),params:this.config.timelineParams||{},limit:50,level:s.default.INFO,version:u.default.VERSION}),this.config.disableStats||(this.timelineSender=f.default.createTimelineSender(this.timeline,{host:this.config.statsHost,path:"/timeline/v2/"+r.default.TimelineTransport.name})),this.connection=f.default.createConnectionManager(this.key,i.extend({getStrategy:function(t){var e=i.extend({},l.config,t);return c.build(r.default.getDefaultStrategy(e),e)},timeline:this.timeline,activityTimeout:this.config.activity_timeout,pongTimeout:this.config.pong_timeout,unavailableTimeout:this.config.unavailable_timeout},this.config,{encrypted:this.isEncrypted()})),this.connection.bind("connected",(function(){l.subscribeAll(),l.timelineSender&&l.timelineSender.send(l.connection.isEncrypted())})),this.connection.bind("message",(function(t){var e=0===t.event.indexOf("pusher_internal:");if(t.channel){var n=l.channel(t.channel);n&&n.handleEvent(t.event,t.data)}e||l.global_emitter.emit(t.event,t.data)})),this.connection.bind("disconnected",(function(){l.channels.disconnect()})),this.connection.bind("error",(function(t){p.default.warn("Error",t)})),t.instances.push(this),this.timeline.info({instances:t.instances.length}),t.isReady&&this.connect()}return t.ready=function(){t.isReady=!0;for(var e=0,n=t.instances.length;e<n;e++)t.instances[e].connect()},t.log=function(e){var n=Function("return this")();t.logToConsole&&n.console&&n.console.log&&n.console.log(e)},t.getClientFeatures=function(){return i.keys(i.filterObject({ws:r.default.Transports.ws},(function(t){return t.isSupported({})})))},t.prototype.channel=function(t){return this.channels.find(t)},t.prototype.allChannels=function(){return this.channels.all()},t.prototype.connect=function(){if(this.connection.connect(),this.timelineSender&&!this.timelineSenderTimer){var t=this.connection.isEncrypted(),e=this.timelineSender;this.timelineSenderTimer=new l.PeriodicTimer(6e4,(function(){e.send(t)}))}},t.prototype.disconnect=function(){this.connection.disconnect(),this.timelineSenderTimer&&(this.timelineSenderTimer.ensureAborted(),this.timelineSenderTimer=null)},t.prototype.bind=function(t,e){return this.global_emitter.bind(t,e),this},t.prototype.bind_all=function(t){return this.global_emitter.bind_all(t),this},t.prototype.subscribeAll=function(){var t;for(t in this.channels.channels)this.channels.channels.hasOwnProperty(t)&&this.subscribe(t)},t.prototype.subscribe=function(t){var e=this.channels.add(t,this);return"connected"===this.connection.state&&e.subscribe(),e},t.prototype.unsubscribe=function(t){var e=this.channels.remove(t);e&&"connected"===this.connection.state&&e.unsubscribe()},t.prototype.send_event=function(t,e,n){return this.connection.send_event(t,e,n)},t.prototype.isEncrypted=function(){return"https:"===r.default.getProtocol()||Boolean(this.config.encrypted)},t.instances=[],t.isReady=!1,t.logToConsole=!1,t.Runtime=r.default,t.ScriptReceivers=r.default.ScriptReceivers,t.DependenciesReceivers=r.default.DependenciesReceivers,t.auth_callbacks=r.default.auth_callbacks,t}();e.__esModule=!0,e.default=_,r.default.setup(_)},function(t,e,n){"use strict";var r=n(3),i=n(7),o=n(14),a=n(15),s=n(16),c=n(4),l=n(17),u=n(18),d=n(25),p=n(26),f=n(27),_=n(28),h={nextAuthCallbackID:1,auth_callbacks:{},ScriptReceivers:c.ScriptReceivers,DependenciesReceivers:r.DependenciesReceivers,getDefaultStrategy:p.default,Transports:u.default,transportConnectionInitializer:f.default,HTTPFactory:_.default,TimelineTransport:l.default,getXHRAPI:function(){return window.XMLHttpRequest},getWebSocketAPI:function(){return window.WebSocket||window.MozWebSocket},setup:function(t){var e=this;window.Pusher=t;var n=function(){e.onDocumentBody(t.ready)};window.JSON?n():r.Dependencies.load("json2",{},n)},getDocument:function(){return document},getProtocol:function(){return this.getDocument().location.protocol},getGlobal:function(){return window},getAuthorizers:function(){return{ajax:i.default,jsonp:o.default}},onDocumentBody:function(t){var e=this;document.body?t():setTimeout((function(){e.onDocumentBody(t)}),0)},createJSONPRequest:function(t,e){return new s.default(t,e)},createScriptRequest:function(t){return new a.default(t)},getLocalStorage:function(){try{return window.localStorage}catch(t){return}},createXHR:function(){return this.getXHRAPI()?this.createXMLHttpRequest():this.createMicrosoftXHR()},createXMLHttpRequest:function(){return new(this.getXHRAPI())},createMicrosoftXHR:function(){return new ActiveXObject("Microsoft.XMLHTTP")},getNetwork:function(){return d.Network},createWebSocket:function(t){return new(this.getWebSocketAPI())(t)},createSocketRequest:function(t,e){if(this.isXHRSupported())return this.HTTPFactory.createXHR(t,e);if(this.isXDRSupported(0===e.indexOf("https:")))return this.HTTPFactory.createXDR(t,e);throw"Cross-origin HTTP requests are not supported"},isXHRSupported:function(){var t=this.getXHRAPI();return Boolean(t)&&void 0!==(new t).withCredentials},isXDRSupported:function(t){var e=t?"https:":"http:",n=this.getProtocol();return Boolean(window.XDomainRequest)&&n===e},addUnloadListener:function(t){void 0!==window.addEventListener?window.addEventListener("unload",t,!1):void 0!==window.attachEvent&&window.attachEvent("onunload",t)},removeUnloadListener:function(t){void 0!==window.addEventListener?window.removeEventListener("unload",t,!1):void 0!==window.detachEvent&&window.detachEvent("onunload",t)}};e.__esModule=!0,e.default=h},function(t,e,n){"use strict";var r=n(4),i=n(5),o=n(6);e.DependenciesReceivers=new r.ScriptReceiverFactory("_pusher_dependencies","Pusher.DependenciesReceivers"),e.Dependencies=new o.default({cdn_http:i.default.cdn_http,cdn_https:i.default.cdn_https,version:i.default.VERSION,suffix:i.default.dependency_suffix,receivers:e.DependenciesReceivers})},function(t,e){"use strict";var n=function(){function t(t,e){this.lastId=0,this.prefix=t,this.name=e}return t.prototype.create=function(t){this.lastId++;var e=this.lastId,n=this.prefix+e,r=this.name+"["+e+"]",i=!1,o=function(){i||(t.apply(null,arguments),i=!0)};return this[e]=o,{number:e,id:n,name:r,callback:o}},t.prototype.remove=function(t){delete this[t.number]},t}();e.ScriptReceiverFactory=n,e.ScriptReceivers=new n("_pusher_script_","Pusher.ScriptReceivers")},function(t,e){"use strict";e.__esModule=!0,e.default={VERSION:"3.1.0-pre11",PROTOCOL:7,host:"ws.pusherapp.com",ws_port:80,wss_port:443,sockjs_host:"sockjs.pusher.com",sockjs_http_port:80,sockjs_https_port:443,sockjs_path:"/pusher",stats_host:"stats.pusher.com",channel_auth_endpoint:"/pusher/auth",channel_auth_transport:"ajax",activity_timeout:12e4,pong_timeout:3e4,unavailable_timeout:1e4,cdn_http:"http://js.pusher.com",cdn_https:"https://js.pusher.com",dependency_suffix:""}},function(t,e,n){"use strict";var r=n(4),i=n(2),o=function(){function t(t){this.options=t,this.receivers=t.receivers||r.ScriptReceivers,this.loading={}}return t.prototype.load=function(t,e,n){var r=this;if(r.loading[t]&&r.loading[t].length>0)r.loading[t].push(n);else{r.loading[t]=[n];var o=i.default.createScriptRequest(r.getPath(t,e)),a=r.receivers.create((function(e){if(r.receivers.remove(a),r.loading[t]){var n=r.loading[t];delete r.loading[t];for(var i=function(t){t||o.cleanup()},s=0;s<n.length;s++)n[s](e,i)}}));o.send(a)}},t.prototype.getRoot=function(t){var e=i.default.getDocument().location.protocol;return(t&&t.encrypted||"https:"===e?this.options.cdn_https:this.options.cdn_http).replace(/\/*$/,"")+"/"+this.options.version},t.prototype.getPath=function(t,e){return this.getRoot(e)+"/"+t+this.options.suffix+".js"},t}();e.__esModule=!0,e.default=o},function(t,e,n){"use strict";var r=n(8),i=n(2);e.__esModule=!0,e.default=function(t,e,n){var o;for(var a in(o=i.default.createXHR()).open("POST",this.options.authEndpoint,!0),o.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),this.authOptions.headers)o.setRequestHeader(a,this.authOptions.headers[a]);return o.onreadystatechange=function(){if(4===o.readyState)if(200===o.status){var t,e=!1;try{t=JSON.parse(o.responseText),e=!0}catch(t){n(!0,"JSON returned from webapp was invalid, yet status code was 200. Data was: "+o.responseText)}e&&n(!1,t)}else r.default.warn("Couldn't get auth info from your webapp",o.status),n(!0,o.status)},o.send(this.composeQuery(e)),o}},function(t,e,n){"use strict";var r=n(9),i=n(1),o={debug:function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];i.default.log&&i.default.log(r.stringify.apply(this,arguments))},warn:function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];var n=r.stringify.apply(this,arguments),o=Function("return this")();o.console&&(o.console.warn?o.console.warn(n):o.console.log&&o.console.log(n)),i.default.log&&i.default.log(n)}};e.__esModule=!0,e.default=o},function(t,e,n){"use strict";var r=n(10),i=n(11),o=Function("return this")();function a(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(t[n],n,t)}function s(t,e){for(var n=[],r=0;r<t.length;r++)n.push(e(t[r],r,t,n));return n}function c(t,e){var n={};return a(t,(function(t,r){n[r]=e(t)})),n}function l(t,e){var n={};return a(t,(function(r,i){(e&&e(r,i,t,n)||Boolean(r))&&(n[i]=r)})),n}function u(t){var e=[];return a(t,(function(t,n){e.push([n,t])})),e}function d(t){return c(t,(function(t){return"object"==typeof t&&(t=JSON.stringify(t)),encodeURIComponent(r.default(t.toString()))}))}e.extend=function t(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];for(var i=0;i<n.length;i++){var o=n[i];for(var a in o)o[a]&&o[a].constructor&&o[a].constructor===Object?e[a]=t(e[a]||{},o[a]):e[a]=o[a]}return e},e.stringify=function(){for(var t=["Pusher"],e=0;e<arguments.length;e++)"string"==typeof arguments[e]?t.push(arguments[e]):t.push(JSON.stringify(arguments[e]));return t.join(" : ")},e.arrayIndexOf=function(t,e){var n=Array.prototype.indexOf;if(null===t)return-1;if(n&&t.indexOf===n)return t.indexOf(e);for(var r=0,i=t.length;r<i;r++)if(t[r]===e)return r;return-1},e.objectApply=a,e.keys=function(t){var e=[];return a(t,(function(t,n){e.push(n)})),e},e.values=function(t){var e=[];return a(t,(function(t){e.push(t)})),e},e.apply=function(t,e,n){for(var r=0;r<t.length;r++)e.call(n||o,t[r],r,t)},e.map=s,e.mapObject=c,e.filter=function(t,e){e=e||function(t){return!!t};for(var n=[],r=0;r<t.length;r++)e(t[r],r,t,n)&&n.push(t[r]);return n},e.filterObject=l,e.flatten=u,e.any=function(t,e){for(var n=0;n<t.length;n++)if(e(t[n],n,t))return!0;return!1},e.all=function(t,e){for(var n=0;n<t.length;n++)if(!e(t[n],n,t))return!1;return!0},e.encodeParamsObject=d,e.buildQueryString=function(t){return s(u(d(l(t,(function(t){return void 0!==t})))),i.default.method("join","=")).join("&")},e.safeJSONStringify=function(t){var e=[],n=JSON.stringify(t,(function(t,n){if("object"==typeof n&&null!==n){if(-1!==e.indexOf(n))return;e.push(n)}return n}));return e=null,n}},function(t,e){"use strict";var n=Function("return this")();e.__esModule=!0,e.default=function(t){return d(l(t))};for(var r=String.fromCharCode,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o={},a=0,s=i.length;a<s;a++)o[i.charAt(a)]=a;var c=function(t){var e=t.charCodeAt(0);return e<128?t:e<2048?r(192|e>>>6)+r(128|63&e):r(224|e>>>12&15)+r(128|e>>>6&63)+r(128|63&e)},l=function(t){return t.replace(/[^\x00-\x7F]/g,c)},u=function(t){var e=[0,2,1][t.length%3],n=t.charCodeAt(0)<<16|(t.length>1?t.charCodeAt(1):0)<<8|(t.length>2?t.charCodeAt(2):0);return[i.charAt(n>>>18),i.charAt(n>>>12&63),e>=2?"=":i.charAt(n>>>6&63),e>=1?"=":i.charAt(63&n)].join("")},d=n.btoa||function(t){return t.replace(/[\s\S]{1,3}/g,u)}},function(t,e,n){"use strict";var r=n(12),i={getGlobal:function(){return Function("return this")()},now:function(){return Date.now?Date.now():(new Date).valueOf()},defer:function(t){return new r.OneOffTimer(0,t)},method:function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=Array.prototype.slice.call(arguments,1);return function(e){return e[t].apply(e,r.concat(arguments))}}};e.__esModule=!0,e.default=i},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},i=n(13),o=Function("return this")();function a(t){o.clearTimeout(t)}function s(t){o.clearInterval(t)}var c=function(t){function e(e,n){t.call(this,setTimeout,a,e,(function(t){return n(),null}))}return r(e,t),e}(i.default);e.OneOffTimer=c;var l=function(t){function e(e,n){t.call(this,setInterval,s,e,(function(t){return n(),t}))}return r(e,t),e}(i.default);e.PeriodicTimer=l},function(t,e){"use strict";var n=function(){function t(t,e,n,r){var i=this;this.clear=e,this.timer=t((function(){i.timer&&(i.timer=r(i.timer))}),n)}return t.prototype.isRunning=function(){return null!==this.timer},t.prototype.ensureAborted=function(){this.timer&&(this.clear(this.timer),this.timer=null)},t}();e.__esModule=!0,e.default=n},function(t,e,n){"use strict";var r=n(8);e.__esModule=!0,e.default=function(t,e,n){void 0!==this.authOptions.headers&&r.default.warn("Warn","To send headers with the auth request, you must use AJAX, rather than JSONP.");var i=t.nextAuthCallbackID.toString();t.nextAuthCallbackID++;var o=t.getDocument(),a=o.createElement("script");t.auth_callbacks[i]=function(t){n(!1,t)};var s="Pusher.auth_callbacks['"+i+"']";a.src=this.options.authEndpoint+"?callback="+encodeURIComponent(s)+"&"+this.composeQuery(e);var c=o.getElementsByTagName("head")[0]||o.documentElement;c.insertBefore(a,c.firstChild)}},function(t,e){"use strict";var n=function(){function t(t){this.src=t}return t.prototype.send=function(t){var e=this,n="Error loading "+e.src;e.script=document.createElement("script"),e.script.id=t.id,e.script.src=e.src,e.script.type="text/javascript",e.script.charset="UTF-8",e.script.addEventListener?(e.script.onerror=function(){t.callback(n)},e.script.onload=function(){t.callback(null)}):e.script.onreadystatechange=function(){"loaded"!==e.script.readyState&&"complete"!==e.script.readyState||t.callback(null)},void 0===e.script.async&&document.attachEvent&&/opera/i.test(navigator.userAgent)?(e.errorScript=document.createElement("script"),e.errorScript.id=t.id+"_error",e.errorScript.text=t.name+"('"+n+"');",e.script.async=e.errorScript.async=!1):e.script.async=!0;var r=document.getElementsByTagName("head")[0];r.insertBefore(e.script,r.firstChild),e.errorScript&&r.insertBefore(e.errorScript,e.script.nextSibling)},t.prototype.cleanup=function(){this.script&&(this.script.onload=this.script.onerror=null,this.script.onreadystatechange=null),this.script&&this.script.parentNode&&this.script.parentNode.removeChild(this.script),this.errorScript&&this.errorScript.parentNode&&this.errorScript.parentNode.removeChild(this.errorScript),this.script=null,this.errorScript=null},t}();e.__esModule=!0,e.default=n},function(t,e,n){"use strict";var r=n(9),i=n(2),o=function(){function t(t,e){this.url=t,this.data=e}return t.prototype.send=function(t){if(!this.request){var e=r.buildQueryString(this.data),n=this.url+"/"+t.number+"?"+e;this.request=i.default.createScriptRequest(n),this.request.send(t)}},t.prototype.cleanup=function(){this.request&&this.request.cleanup()},t}();e.__esModule=!0,e.default=o},function(t,e,n){"use strict";var r=n(2),i=n(4),o={name:"jsonp",getAgent:function(t,e){return function(n,o){var a="http"+(e?"s":"")+"://"+(t.host||t.options.host)+t.options.path,s=r.default.createJSONPRequest(a,n),c=r.default.ScriptReceivers.create((function(e,n){i.ScriptReceivers.remove(c),s.cleanup(),n&&n.host&&(t.host=n.host),o&&o(e,n)}));s.send(c)}}};e.__esModule=!0,e.default=o},function(t,e,n){"use strict";var r=n(19),i=n(21),o=n(20),a=n(2),s=n(3),c=n(9),l=new i.default({file:"sockjs",urls:o.sockjs,handlesActivityChecks:!0,supportsPing:!1,isSupported:function(){return!0},isInitialized:function(){return void 0!==window.SockJS},getSocket:function(t,e){return new window.SockJS(t,null,{js_path:s.Dependencies.getPath("sockjs",{encrypted:e.encrypted}),ignore_null_origin:e.ignoreNullOrigin})},beforeOpen:function(t,e){t.send(JSON.stringify({path:e}))}}),u={isSupported:function(t){return a.default.isXDRSupported(t.encrypted)}},d=new i.default(c.extend({},r.streamingConfiguration,u)),p=new i.default(c.extend({},r.pollingConfiguration,u));r.default.xdr_streaming=d,r.default.xdr_polling=p,r.default.sockjs=l,e.__esModule=!0,e.default=r.default},function(t,e,n){"use strict";var r=n(20),i=n(21),o=n(9),a=n(2),s=new i.default({urls:r.ws,handlesActivityChecks:!1,supportsPing:!1,isInitialized:function(){return Boolean(a.default.getWebSocketAPI())},isSupported:function(){return Boolean(a.default.getWebSocketAPI())},getSocket:function(t){return a.default.createWebSocket(t)}}),c={urls:r.http,handlesActivityChecks:!1,supportsPing:!0,isInitialized:function(){return!0}};e.streamingConfiguration=o.extend({getSocket:function(t){return a.default.HTTPFactory.createStreamingSocket(t)}},c),e.pollingConfiguration=o.extend({getSocket:function(t){return a.default.HTTPFactory.createPollingSocket(t)}},c);var l={isSupported:function(){return a.default.isXHRSupported()}},u={ws:s,xhr_streaming:new i.default(o.extend({},e.streamingConfiguration,l)),xhr_polling:new i.default(o.extend({},e.pollingConfiguration,l))};e.__esModule=!0,e.default=u},function(t,e,n){"use strict";var r=n(5);function i(t,e,n){return t+(e.encrypted?"s":"")+"://"+(e.encrypted?e.hostEncrypted:e.hostUnencrypted)+n}function o(t,e){return"/app/"+t+"?protocol="+r.default.PROTOCOL+"&client=js&version="+r.default.VERSION+(e?"&"+e:"")}e.ws={getInitial:function(t,e){return i("ws",e,o(t,"flash=false"))}},e.http={getInitial:function(t,e){return i("http",e,(e.httpPath||"/pusher")+o(t))}},e.sockjs={getInitial:function(t,e){return i("http",e,e.httpPath||"/pusher")},getPath:function(t,e){return o(t)}}},function(t,e,n){"use strict";var r=n(22),i=function(){function t(t){this.hooks=t}return t.prototype.isSupported=function(t){return this.hooks.isSupported(t)},t.prototype.createConnection=function(t,e,n,i){return new r.default(this.hooks,t,e,n,i)},t}();e.__esModule=!0,e.default=i},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},i=n(11),o=n(9),a=n(23),s=n(8),c=n(2),l=function(t){function e(e,n,r,i,o){t.call(this),this.initialize=c.default.transportConnectionInitializer,this.hooks=e,this.name=n,this.priority=r,this.key=i,this.options=o,this.state="new",this.timeline=o.timeline,this.activityTimeout=o.activityTimeout,this.id=this.timeline.generateUniqueID()}return r(e,t),e.prototype.handlesActivityChecks=function(){return Boolean(this.hooks.handlesActivityChecks)},e.prototype.supportsPing=function(){return Boolean(this.hooks.supportsPing)},e.prototype.connect=function(){var t=this;if(this.socket||"initialized"!==this.state)return!1;var e=this.hooks.urls.getInitial(this.key,this.options);try{this.socket=this.hooks.getSocket(e,this.options)}catch(e){return i.default.defer((function(){t.onError(e),t.changeState("closed")})),!1}return this.bindListeners(),s.default.debug("Connecting",{transport:this.name,url:e}),this.changeState("connecting"),!0},e.prototype.close=function(){return!!this.socket&&(this.socket.close(),!0)},e.prototype.send=function(t){var e=this;return"open"===this.state&&(i.default.defer((function(){e.socket&&e.socket.send(t)})),!0)},e.prototype.ping=function(){"open"===this.state&&this.supportsPing()&&this.socket.ping()},e.prototype.onOpen=function(){this.hooks.beforeOpen&&this.hooks.beforeOpen(this.socket,this.hooks.urls.getPath(this.key,this.options)),this.changeState("open"),this.socket.onopen=void 0},e.prototype.onError=function(t){this.emit("error",{type:"WebSocketError",error:t}),this.timeline.error(this.buildTimelineMessage({error:t.toString()}))},e.prototype.onClose=function(t){t?this.changeState("closed",{code:t.code,reason:t.reason,wasClean:t.wasClean}):this.changeState("closed"),this.unbindListeners(),this.socket=void 0},e.prototype.onMessage=function(t){this.emit("message",t)},e.prototype.onActivity=function(){this.emit("activity")},e.prototype.bindListeners=function(){var t=this;this.socket.onopen=function(){t.onOpen()},this.socket.onerror=function(e){t.onError(e)},this.socket.onclose=function(e){t.onClose(e)},this.socket.onmessage=function(e){t.onMessage(e)},this.supportsPing()&&(this.socket.onactivity=function(){t.onActivity()})},e.prototype.unbindListeners=function(){this.socket&&(this.socket.onopen=void 0,this.socket.onerror=void 0,this.socket.onclose=void 0,this.socket.onmessage=void 0,this.supportsPing()&&(this.socket.onactivity=void 0))},e.prototype.changeState=function(t,e){this.state=t,this.timeline.info(this.buildTimelineMessage({state:t,params:e})),this.emit(t,e)},e.prototype.buildTimelineMessage=function(t){return o.extend({cid:this.id},t)},e}(a.default);e.__esModule=!0,e.default=l},function(t,e,n){"use strict";var r=n(24),i=Function("return this")(),o=function(){function t(t){this.callbacks=new r.default,this.global_callbacks=[],this.failThrough=t}return t.prototype.bind=function(t,e,n){return this.callbacks.add(t,e,n),this},t.prototype.bind_all=function(t){return this.global_callbacks.push(t),this},t.prototype.unbind=function(t,e,n){return this.callbacks.remove(t,e,n),this},t.prototype.unbind_all=function(t,e){return this.callbacks.remove(t,e),this},t.prototype.emit=function(t,e){var n;for(n=0;n<this.global_callbacks.length;n++)this.global_callbacks[n](t,e);var r=this.callbacks.get(t);if(r&&r.length>0)for(n=0;n<r.length;n++)r[n].fn.call(r[n].context||i,e);else this.failThrough&&this.failThrough(t,e);return this},t}();e.__esModule=!0,e.default=o},function(t,e,n){"use strict";var r=n(9),i=function(){function t(){this._callbacks={}}return t.prototype.get=function(t){return this._callbacks[o(t)]},t.prototype.add=function(t,e,n){var r=o(t);this._callbacks[r]=this._callbacks[r]||[],this._callbacks[r].push({fn:e,context:n})},t.prototype.remove=function(t,e,n){if(t||e||n){var i=t?[o(t)]:r.keys(this._callbacks);e||n?this.removeCallback(i,e,n):this.removeAllCallbacks(i)}else this._callbacks={}},t.prototype.removeCallback=function(t,e,n){r.apply(t,(function(t){this._callbacks[t]=r.filter(this._callbacks[t]||[],(function(t){return e&&e!==t.fn||n&&n!==t.context})),0===this._callbacks[t].length&&delete this._callbacks[t]}),this)},t.prototype.removeAllCallbacks=function(t){r.apply(t,(function(t){delete this._callbacks[t]}),this)},t}();function o(t){return"_"+t}e.__esModule=!0,e.default=i},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},i=function(t){function e(){t.call(this);var e=this;void 0!==window.addEventListener&&(window.addEventListener("online",(function(){e.emit("online")}),!1),window.addEventListener("offline",(function(){e.emit("offline")}),!1))}return r(e,t),e.prototype.isOnline=function(){return void 0===window.navigator.onLine||window.navigator.onLine},e}(n(23).default);e.NetInfo=i,e.Network=new i},function(t,e){"use strict";e.__esModule=!0,e.default=function(t){var e;return e=t.encrypted?[":best_connected_ever",":ws_loop",[":delayed",2e3,[":http_fallback_loop"]]]:[":best_connected_ever",":ws_loop",[":delayed",2e3,[":wss_loop"]],[":delayed",5e3,[":http_fallback_loop"]]],[[":def","ws_options",{hostUnencrypted:t.wsHost+":"+t.wsPort,hostEncrypted:t.wsHost+":"+t.wssPort}],[":def","wss_options",[":extend",":ws_options",{encrypted:!0}]],[":def","sockjs_options",{hostUnencrypted:t.httpHost+":"+t.httpPort,hostEncrypted:t.httpHost+":"+t.httpsPort,httpPath:t.httpPath}],[":def","timeouts",{loop:!0,timeout:15e3,timeoutLimit:6e4}],[":def","ws_manager",[":transport_manager",{lives:2,minPingDelay:1e4,maxPingDelay:t.activity_timeout}]],[":def","streaming_manager",[":transport_manager",{lives:2,minPingDelay:1e4,maxPingDelay:t.activity_timeout}]],[":def_transport","ws","ws",3,":ws_options",":ws_manager"],[":def_transport","wss","ws",3,":wss_options",":ws_manager"],[":def_transport","sockjs","sockjs",1,":sockjs_options"],[":def_transport","xhr_streaming","xhr_streaming",1,":sockjs_options",":streaming_manager"],[":def_transport","xdr_streaming","xdr_streaming",1,":sockjs_options",":streaming_manager"],[":def_transport","xhr_polling","xhr_polling",1,":sockjs_options"],[":def_transport","xdr_polling","xdr_polling",1,":sockjs_options"],[":def","ws_loop",[":sequential",":timeouts",":ws"]],[":def","wss_loop",[":sequential",":timeouts",":wss"]],[":def","sockjs_loop",[":sequential",":timeouts",":sockjs"]],[":def","streaming_loop",[":sequential",":timeouts",[":if",[":is_supported",":xhr_streaming"],":xhr_streaming",":xdr_streaming"]]],[":def","polling_loop",[":sequential",":timeouts",[":if",[":is_supported",":xhr_polling"],":xhr_polling",":xdr_polling"]]],[":def","http_loop",[":if",[":is_supported",":streaming_loop"],[":best_connected_ever",":streaming_loop",[":delayed",4e3,[":polling_loop"]]],[":polling_loop"]]],[":def","http_fallback_loop",[":if",[":is_supported",":http_loop"],[":http_loop"],[":sockjs_loop"]]],[":def","strategy",[":cached",18e5,[":first_connected",[":if",[":is_supported",":ws"],e,":http_fallback_loop"]]]]]}},function(t,e,n){"use strict";var r=n(3);e.__esModule=!0,e.default=function(){var t=this;t.timeline.info(t.buildTimelineMessage({transport:t.name+(t.options.encrypted?"s":"")})),t.hooks.isInitialized()?t.changeState("initialized"):t.hooks.file?(t.changeState("initializing"),r.Dependencies.load(t.hooks.file,{encrypted:t.options.encrypted},(function(e,n){t.hooks.isInitialized()?(t.changeState("initialized"),n(!0)):(e&&t.onError(e),t.onClose(),n(!1))}))):t.onClose()}},function(t,e,n){"use strict";var r=n(29),i=n(31);i.default.createXDR=function(t,e){return this.createRequest(r.default,t,e)},e.__esModule=!0,e.default=i.default},function(t,e,n){"use strict";var r=n(30),i={getRequest:function(t){var e=new window.XDomainRequest;return e.ontimeout=function(){t.emit("error",new r.RequestTimedOut),t.close()},e.onerror=function(e){t.emit("error",e),t.close()},e.onprogress=function(){e.responseText&&e.responseText.length>0&&t.onChunk(200,e.responseText)},e.onload=function(){e.responseText&&e.responseText.length>0&&t.onChunk(200,e.responseText),t.emit("finished",200),t.close()},e},abortRequest:function(t){t.ontimeout=t.onerror=t.onprogress=t.onload=null,t.abort()}};e.__esModule=!0,e.default=i},function(t,e){"use strict";var n=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},r=function(t){function e(){t.apply(this,arguments)}return n(e,t),e}(Error);e.BadEventName=r;var i=function(t){function e(){t.apply(this,arguments)}return n(e,t),e}(Error);e.RequestTimedOut=i;var o=function(t){function e(){t.apply(this,arguments)}return n(e,t),e}(Error);e.TransportPriorityTooLow=o;var a=function(t){function e(){t.apply(this,arguments)}return n(e,t),e}(Error);e.TransportClosed=a;var s=function(t){function e(){t.apply(this,arguments)}return n(e,t),e}(Error);e.UnsupportedTransport=s;var c=function(t){function e(){t.apply(this,arguments)}return n(e,t),e}(Error);e.UnsupportedStrategy=c},function(t,e,n){"use strict";var r=n(32),i=n(33),o=n(35),a=n(36),s=n(37),c={createStreamingSocket:function(t){return this.createSocket(o.default,t)},createPollingSocket:function(t){return this.createSocket(a.default,t)},createSocket:function(t,e){return new i.default(t,e)},createXHR:function(t,e){return this.createRequest(s.default,t,e)},createRequest:function(t,e,n){return new r.default(t,e,n)}};e.__esModule=!0,e.default=c},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},i=n(2),o=n(23),a=function(t){function e(e,n,r){t.call(this),this.hooks=e,this.method=n,this.url=r}return r(e,t),e.prototype.start=function(t){var e=this;this.position=0,this.xhr=this.hooks.getRequest(this),this.unloader=function(){e.close()},i.default.addUnloadListener(this.unloader),this.xhr.open(this.method,this.url,!0),this.xhr.setRequestHeader&&this.xhr.setRequestHeader("Content-Type","application/json"),this.xhr.send(t)},e.prototype.close=function(){this.unloader&&(i.default.removeUnloadListener(this.unloader),this.unloader=null),this.xhr&&(this.hooks.abortRequest(this.xhr),this.xhr=null)},e.prototype.onChunk=function(t,e){for(;;){var n=this.advanceBuffer(e);if(!n)break;this.emit("chunk",{status:t,data:n})}this.isBufferTooLong(e)&&this.emit("buffer_too_long")},e.prototype.advanceBuffer=function(t){var e=t.slice(this.position),n=e.indexOf("\n");return-1!==n?(this.position+=n+1,e.slice(0,n)):null},e.prototype.isBufferTooLong=function(t){return this.position===t.length&&t.length>262144},e}(o.default);e.__esModule=!0,e.default=a},function(t,e,n){"use strict";var r=n(34),i=n(11),o=n(2),a=1,s=function(){function t(t,e){this.hooks=t,this.session=l(1e3)+"/"+function(t){for(var e=[],n=0;n<t;n++)e.push(l(32).toString(32));return e.join("")}(8),this.location=function(t){var e=/([^\?]*)\/*(\??.*)/.exec(t);return{base:e[1],queryString:e[2]}}(e),this.readyState=r.default.CONNECTING,this.openStream()}return t.prototype.send=function(t){return this.sendRaw(JSON.stringify([t]))},t.prototype.ping=function(){this.hooks.sendHeartbeat(this)},t.prototype.close=function(t,e){this.onClose(t,e,!0)},t.prototype.sendRaw=function(t){if(this.readyState!==r.default.OPEN)return!1;try{return o.default.createSocketRequest("POST",c((e=this.location,n=this.session,e.base+"/"+n+"/xhr_send"))).start(t),!0}catch(t){return!1}var e,n},t.prototype.reconnect=function(){this.closeStream(),this.openStream()},t.prototype.onClose=function(t,e,n){this.closeStream(),this.readyState=r.default.CLOSED,this.onclose&&this.onclose({code:t,reason:e,wasClean:n})},t.prototype.onChunk=function(t){var e;if(200===t.status)switch(this.readyState===r.default.OPEN&&this.onActivity(),t.data.slice(0,1)){case"o":e=JSON.parse(t.data.slice(1)||"{}"),this.onOpen(e);break;case"a":e=JSON.parse(t.data.slice(1)||"[]");for(var n=0;n<e.length;n++)this.onEvent(e[n]);break;case"m":e=JSON.parse(t.data.slice(1)||"null"),this.onEvent(e);break;case"h":this.hooks.onHeartbeat(this);break;case"c":e=JSON.parse(t.data.slice(1)||"[]"),this.onClose(e[0],e[1],!0)}},t.prototype.onOpen=function(t){var e,n,i;this.readyState===r.default.CONNECTING?(t&&t.hostname&&(this.location.base=(e=this.location.base,n=t.hostname,(i=/(https?:\/\/)([^\/:]+)((\/|:)?.*)/.exec(e))[1]+n+i[3])),this.readyState=r.default.OPEN,this.onopen&&this.onopen()):this.onClose(1006,"Server lost session",!0)},t.prototype.onEvent=function(t){this.readyState===r.default.OPEN&&this.onmessage&&this.onmessage({data:t})},t.prototype.onActivity=function(){this.onactivity&&this.onactivity()},t.prototype.onError=function(t){this.onerror&&this.onerror(t)},t.prototype.openStream=function(){var t=this;this.stream=o.default.createSocketRequest("POST",c(this.hooks.getReceiveURL(this.location,this.session))),this.stream.bind("chunk",(function(e){t.onChunk(e)})),this.stream.bind("finished",(function(e){t.hooks.onFinished(t,e)})),this.stream.bind("buffer_too_long",(function(){t.reconnect()}));try{this.stream.start()}catch(e){i.default.defer((function(){t.onError(e),t.onClose(1006,"Could not start streaming",!1)}))}},t.prototype.closeStream=function(){this.stream&&(this.stream.unbind_all(),this.stream.close(),this.stream=null)},t}();function c(t){var e=-1===t.indexOf("?")?"?":"&";return t+e+"t="+ +new Date+"&n="+a++}function l(t){return Math.floor(Math.random()*t)}e.__esModule=!0,e.default=s},function(t,e){"use strict";var n;!function(t){t[t.CONNECTING=0]="CONNECTING",t[t.OPEN=1]="OPEN",t[t.CLOSED=3]="CLOSED"}(n||(n={})),e.__esModule=!0,e.default=n},function(t,e){"use strict";e.__esModule=!0,e.default={getReceiveURL:function(t,e){return t.base+"/"+e+"/xhr_streaming"+t.queryString},onHeartbeat:function(t){t.sendRaw("[]")},sendHeartbeat:function(t){t.sendRaw("[]")},onFinished:function(t,e){t.onClose(1006,"Connection interrupted ("+e+")",!1)}}},function(t,e){"use strict";e.__esModule=!0,e.default={getReceiveURL:function(t,e){return t.base+"/"+e+"/xhr"+t.queryString},onHeartbeat:function(){},sendHeartbeat:function(t){t.sendRaw("[]")},onFinished:function(t,e){200===e?t.reconnect():t.onClose(1006,"Connection interrupted ("+e+")",!1)}}},function(t,e,n){"use strict";var r=n(2),i={getRequest:function(t){var e=new(r.default.getXHRAPI());return e.onreadystatechange=e.onprogress=function(){switch(e.readyState){case 3:e.responseText&&e.responseText.length>0&&t.onChunk(e.status,e.responseText);break;case 4:e.responseText&&e.responseText.length>0&&t.onChunk(e.status,e.responseText),t.emit("finished",e.status),t.close()}},e},abortRequest:function(t){t.onreadystatechange=null,t.abort()}};e.__esModule=!0,e.default=i},function(t,e,n){"use strict";var r=n(9),i=n(11),o=n(39),a=function(){function t(t,e,n){this.key=t,this.session=e,this.events=[],this.options=n||{},this.sent=0,this.uniqueID=0}return t.prototype.log=function(t,e){t<=this.options.level&&(this.events.push(r.extend({},e,{timestamp:i.default.now()})),this.options.limit&&this.events.length>this.options.limit&&this.events.shift())},t.prototype.error=function(t){this.log(o.default.ERROR,t)},t.prototype.info=function(t){this.log(o.default.INFO,t)},t.prototype.debug=function(t){this.log(o.default.DEBUG,t)},t.prototype.isEmpty=function(){return 0===this.events.length},t.prototype.send=function(t,e){var n=this,i=r.extend({session:this.session,bundle:this.sent+1,key:this.key,lib:"js",version:this.options.version,cluster:this.options.cluster,features:this.options.features,timeline:this.events},this.options.params);return this.events=[],t(i,(function(t,r){t||n.sent++,e&&e(t,r)})),!0},t.prototype.generateUniqueID=function(){return this.uniqueID++,this.uniqueID},t}();e.__esModule=!0,e.default=a},function(t,e){"use strict";var n;!function(t){t[t.ERROR=3]="ERROR",t[t.INFO=6]="INFO",t[t.DEBUG=7]="DEBUG"}(n||(n={})),e.__esModule=!0,e.default=n},function(t,e,n){"use strict";var r=n(9),i=n(11),o=n(41),a=n(30),s=n(55),c=n(56),l=n(57),u=n(58),d=n(59),p=n(60),f=n(61),_=n(2).default.Transports;e.build=function(t,e){return $(t,r.extend({},g,e))[1].strategy};var h={isSupported:function(){return!1},connect:function(t,e){var n=i.default.defer((function(){e(new a.UnsupportedStrategy)}));return{abort:function(){n.ensureAborted()},forceMinPriority:function(){}}}};function m(t){return function(e){return[t.apply(this,arguments),e]}}var g={extend:function(t,e,n){return[r.extend({},e,n),t]},def:function(t,e,n){if(void 0!==t[e])throw"Redefining symbol "+e;return t[e]=n,[void 0,t]},def_transport:function(t,e,n,i,o,c){var l,u=_[n];if(!u)throw new a.UnsupportedTransport(n);l=t.enabledTransports&&-1===r.arrayIndexOf(t.enabledTransports,e)||t.disabledTransports&&-1!==r.arrayIndexOf(t.disabledTransports,e)?h:new s.default(e,i,c?c.getAssistant(u):u,r.extend({key:t.key,encrypted:t.encrypted,timeline:t.timeline,ignoreNullOrigin:t.ignoreNullOrigin},o));var d=t.def(t,e,l)[1];return d.Transports=t.Transports||{},d.Transports[e]=l,[void 0,d]},transport_manager:m((function(t,e){return new o.default(e)})),sequential:m((function(t,e){var n=Array.prototype.slice.call(arguments,2);return new c.default(n,e)})),cached:m((function(t,e,n){return new u.default(n,t.Transports,{ttl:e,timeline:t.timeline,encrypted:t.encrypted})})),first_connected:m((function(t,e){return new f.default(e)})),best_connected_ever:m((function(){var t=Array.prototype.slice.call(arguments,1);return new l.default(t)})),delayed:m((function(t,e,n){return new d.default(n,{delay:e})})),if:m((function(t,e,n,r){return new p.default(e,n,r)})),is_supported:m((function(t,e){return function(){return e.isSupported()}}))};function v(t){return"string"==typeof t&&":"===t.charAt(0)}function b(t,e){return e[t.slice(1)]}function y(t,e){if(0===t.length)return[[],e];var n=$(t[0],e),r=y(t.slice(1),n[1]);return[[n[0]].concat(r[0]),r[1]]}function w(t,e){if(v(t[0])){var n=b(t[0],e);if(t.length>1){if("function"!=typeof n)throw"Calling non-function "+t[0];var i=[r.extend({},e)].concat(r.map(t.slice(1),(function(t){return $(t,r.extend({},e))[0]})));return n.apply(this,i)}return[n,e]}return y(t,e)}function $(t,e){return"string"==typeof t?function(t,e){if(!v(t))return[t,e];var n=b(t,e);if(void 0===n)throw"Undefined symbol "+t;return[n,e]}(t,e):"object"==typeof t&&t instanceof Array&&t.length>0?w(t,e):[t,e]}},function(t,e,n){"use strict";var r=n(42),i=function(){function t(t){this.options=t||{},this.livesLeft=this.options.lives||1/0}return t.prototype.getAssistant=function(t){return r.default.createAssistantToTheTransportManager(this,t,{minPingDelay:this.options.minPingDelay,maxPingDelay:this.options.maxPingDelay})},t.prototype.isAlive=function(){return this.livesLeft>0},t.prototype.reportDeath=function(){this.livesLeft-=1},t}();e.__esModule=!0,e.default=i},function(t,e,n){"use strict";var r=n(43),i=n(44),o=n(47),a=n(48),s=n(49),c=n(50),l=n(51),u=n(53),d=n(54),p={createChannels:function(){return new d.default},createConnectionManager:function(t,e){return new u.default(t,e)},createChannel:function(t,e){return new l.default(t,e)},createPrivateChannel:function(t,e){return new c.default(t,e)},createPresenceChannel:function(t,e){return new s.default(t,e)},createTimelineSender:function(t,e){return new a.default(t,e)},createAuthorizer:function(t,e){return new o.default(t,e)},createHandshake:function(t,e){return new i.default(t,e)},createAssistantToTheTransportManager:function(t,e,n){return new r.default(t,e,n)}};e.__esModule=!0,e.default=p},function(t,e,n){"use strict";var r=n(11),i=n(9),o=function(){function t(t,e,n){this.manager=t,this.transport=e,this.minPingDelay=n.minPingDelay,this.maxPingDelay=n.maxPingDelay,this.pingDelay=void 0}return t.prototype.createConnection=function(t,e,n,o){var a=this;o=i.extend({},o,{activityTimeout:this.pingDelay});var s=this.transport.createConnection(t,e,n,o),c=null,l=function(){s.unbind("open",l),s.bind("closed",u),c=r.default.now()},u=function(t){if(s.unbind("closed",u),1002===t.code||1003===t.code)a.manager.reportDeath();else if(!t.wasClean&&c){var e=r.default.now()-c;e<2*a.maxPingDelay&&(a.manager.reportDeath(),a.pingDelay=Math.max(e/2,a.minPingDelay))}};return s.bind("open",l),s},t.prototype.isSupported=function(t){return this.manager.isAlive()&&this.transport.isSupported(t)},t}();e.__esModule=!0,e.default=o},function(t,e,n){"use strict";var r=n(9),i=n(45),o=n(46),a=function(){function t(t,e){this.transport=t,this.callback=e,this.bindListeners()}return t.prototype.close=function(){this.unbindListeners(),this.transport.close()},t.prototype.bindListeners=function(){var t=this;this.onMessage=function(e){var n;t.unbindListeners();try{n=i.processHandshake(e)}catch(e){return t.finish("error",{error:e}),void t.transport.close()}"connected"===n.action?t.finish("connected",{connection:new o.default(n.id,t.transport),activityTimeout:n.activityTimeout}):(t.finish(n.action,{error:n.error}),t.transport.close())},this.onClosed=function(e){t.unbindListeners();var n=i.getCloseAction(e)||"backoff",r=i.getCloseError(e);t.finish(n,{error:r})},this.transport.bind("message",this.onMessage),this.transport.bind("closed",this.onClosed)},t.prototype.unbindListeners=function(){this.transport.unbind("message",this.onMessage),this.transport.unbind("closed",this.onClosed)},t.prototype.finish=function(t,e){this.callback(r.extend({transport:this.transport,action:t},e))},t}();e.__esModule=!0,e.default=a},function(t,e){"use strict";e.decodeMessage=function(t){try{var e=JSON.parse(t.data);if("string"==typeof e.data)try{e.data=JSON.parse(e.data)}catch(t){if(!(t instanceof SyntaxError))throw t}return e}catch(e){throw{type:"MessageParseError",error:e,data:t.data}}},e.encodeMessage=function(t){return JSON.stringify(t)},e.processHandshake=function(t){if("pusher:connection_established"===(t=e.decodeMessage(t)).event){if(!t.data.activity_timeout)throw"No activity timeout specified in handshake";return{action:"connected",id:t.data.socket_id,activityTimeout:1e3*t.data.activity_timeout}}if("pusher:error"===t.event)return{action:this.getCloseAction(t.data),error:this.getCloseError(t.data)};throw"Invalid handshake"},e.getCloseAction=function(t){return t.code<4e3?t.code>=1002&&t.code<=1004?"backoff":null:4e3===t.code?"ssl_only":t.code<4100?"refused":t.code<4200?"backoff":t.code<4300?"retry":"refused"},e.getCloseError=function(t){return 1e3!==t.code&&1001!==t.code?{type:"PusherError",data:{code:t.code,message:t.reason||t.message}}:null}},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},i=n(9),o=n(23),a=n(45),s=n(8),c=function(t){function e(e,n){t.call(this),this.id=e,this.transport=n,this.activityTimeout=n.activityTimeout,this.bindListeners()}return r(e,t),e.prototype.handlesActivityChecks=function(){return this.transport.handlesActivityChecks()},e.prototype.send=function(t){return this.transport.send(t)},e.prototype.send_event=function(t,e,n){var r={event:t,data:e};return n&&(r.channel=n),s.default.debug("Event sent",r),this.send(a.encodeMessage(r))},e.prototype.ping=function(){this.transport.supportsPing()?this.transport.ping():this.send_event("pusher:ping",{})},e.prototype.close=function(){this.transport.close()},e.prototype.bindListeners=function(){var t=this,e={message:function(e){var n;try{n=a.decodeMessage(e)}catch(n){t.emit("error",{type:"MessageParseError",error:n,data:e.data})}if(void 0!==n){switch(s.default.debug("Event recd",n),n.event){case"pusher:error":t.emit("error",{type:"PusherError",data:n.data});break;case"pusher:ping":t.emit("ping");break;case"pusher:pong":t.emit("pong")}t.emit("message",n)}},activity:function(){t.emit("activity")},error:function(e){t.emit("error",{type:"WebSocketError",error:e})},closed:function(e){n(),e&&e.code&&t.handleCloseEvent(e),t.transport=null,t.emit("closed")}},n=function(){i.objectApply(e,(function(e,n){t.transport.unbind(n,e)}))};i.objectApply(e,(function(e,n){t.transport.bind(n,e)}))},e.prototype.handleCloseEvent=function(t){var e=a.getCloseAction(t),n=a.getCloseError(t);n&&this.emit("error",n),e&&this.emit(e)},e}(o.default);e.__esModule=!0,e.default=c},function(t,e,n){"use strict";var r=n(2),i=function(){function t(t,e){this.channel=t;var n=e.authTransport;if(void 0===r.default.getAuthorizers()[n])throw"'"+n+"' is not a recognized auth transport";this.type=n,this.options=e,this.authOptions=(e||{}).auth||{}}return t.prototype.composeQuery=function(t){var e="socket_id="+encodeURIComponent(t)+"&channel_name="+encodeURIComponent(this.channel.name);for(var n in this.authOptions.params)e+="&"+encodeURIComponent(n)+"="+encodeURIComponent(this.authOptions.params[n]);return e},t.prototype.authorize=function(e,n){return t.authorizers=t.authorizers||r.default.getAuthorizers(),t.authorizers[this.type].call(this,r.default,e,n)},t}();e.__esModule=!0,e.default=i},function(t,e,n){"use strict";var r=n(2),i=function(){function t(t,e){this.timeline=t,this.options=e||{}}return t.prototype.send=function(t,e){this.timeline.isEmpty()||this.timeline.send(r.default.TimelineTransport.getAgent(this,t),e)},t}();e.__esModule=!0,e.default=i},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},i=n(50),o=n(8),a=n(52),s=function(t){function e(e,n){t.call(this,e,n),this.members=new a.default}return r(e,t),e.prototype.authorize=function(e,n){var r=this;t.prototype.authorize.call(this,e,(function(t,e){if(!t){if(void 0===e.channel_data)return o.default.warn("Invalid auth response for channel '"+r.name+"', expected 'channel_data' field"),void n("Invalid auth response");var i=JSON.parse(e.channel_data);r.members.setMyID(i.user_id)}n(t,e)}))},e.prototype.handleEvent=function(t,e){switch(t){case"pusher_internal:subscription_succeeded":this.members.onSubscription(e),this.subscribed=!0,this.emit("pusher:subscription_succeeded",this.members);break;case"pusher_internal:member_added":var n=this.members.addMember(e);this.emit("pusher:member_added",n);break;case"pusher_internal:member_removed":var r=this.members.removeMember(e);r&&this.emit("pusher:member_removed",r);break;default:i.default.prototype.handleEvent.call(this,t,e)}},e.prototype.disconnect=function(){this.members.reset(),t.prototype.disconnect.call(this)},e}(i.default);e.__esModule=!0,e.default=s},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},i=n(42),o=function(t){function e(){t.apply(this,arguments)}return r(e,t),e.prototype.authorize=function(t,e){return i.default.createAuthorizer(this,this.pusher.config).authorize(t,e)},e}(n(51).default);e.__esModule=!0,e.default=o},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},i=n(23),o=n(30),a=n(8),s=function(t){function e(e,n){t.call(this,(function(t,n){a.default.debug("No callbacks on "+e+" for "+t)})),this.name=e,this.pusher=n,this.subscribed=!1}return r(e,t),e.prototype.authorize=function(t,e){return e(!1,{})},e.prototype.trigger=function(t,e){if(0!==t.indexOf("client-"))throw new o.BadEventName("Event '"+t+"' does not start with 'client-'");return this.pusher.send_event(t,e,this.name)},e.prototype.disconnect=function(){this.subscribed=!1},e.prototype.handleEvent=function(t,e){0===t.indexOf("pusher_internal:")?"pusher_internal:subscription_succeeded"===t&&(this.subscribed=!0,this.emit("pusher:subscription_succeeded",e)):this.emit(t,e)},e.prototype.subscribe=function(){var t=this;this.authorize(this.pusher.connection.socket_id,(function(e,n){e?t.handleEvent("pusher:subscription_error",n):t.pusher.send_event("pusher:subscribe",{auth:n.auth,channel_data:n.channel_data,channel:t.name})}))},e.prototype.unsubscribe=function(){this.pusher.send_event("pusher:unsubscribe",{channel:this.name})},e}(i.default);e.__esModule=!0,e.default=s},function(t,e,n){"use strict";var r=n(9),i=function(){function t(){this.reset()}return t.prototype.get=function(t){return Object.prototype.hasOwnProperty.call(this.members,t)?{id:t,info:this.members[t]}:null},t.prototype.each=function(t){var e=this;r.objectApply(this.members,(function(n,r){t(e.get(r))}))},t.prototype.setMyID=function(t){this.myID=t},t.prototype.onSubscription=function(t){this.members=t.presence.hash,this.count=t.presence.count,this.me=this.get(this.myID)},t.prototype.addMember=function(t){return null===this.get(t.user_id)&&this.count++,this.members[t.user_id]=t.user_info,this.get(t.user_id)},t.prototype.removeMember=function(t){var e=this.get(t.user_id);return e&&(delete this.members[t.user_id],this.count--),e},t.prototype.reset=function(){this.members={},this.count=0,this.myID=null,this.me=null},t}();e.__esModule=!0,e.default=i},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},i=n(23),o=n(12),a=n(8),s=n(9),c=n(2),l=function(t){function e(e,n){var r=this;t.call(this),this.key=e,this.options=n||{},this.state="initialized",this.connection=null,this.encrypted=!!n.encrypted,this.timeline=this.options.timeline,this.connectionCallbacks=this.buildConnectionCallbacks(),this.errorCallbacks=this.buildErrorCallbacks(),this.handshakeCallbacks=this.buildHandshakeCallbacks(this.errorCallbacks);var i=c.default.getNetwork();i.bind("online",(function(){r.timeline.info({netinfo:"online"}),"connecting"!==r.state&&"unavailable"!==r.state||r.retryIn(0)})),i.bind("offline",(function(){r.timeline.info({netinfo:"offline"}),r.connection&&r.sendActivityCheck()})),this.updateStrategy()}return r(e,t),e.prototype.connect=function(){this.connection||this.runner||(this.strategy.isSupported()?(this.updateState("connecting"),this.startConnecting(),this.setUnavailableTimer()):this.updateState("failed"))},e.prototype.send=function(t){return!!this.connection&&this.connection.send(t)},e.prototype.send_event=function(t,e,n){return!!this.connection&&this.connection.send_event(t,e,n)},e.prototype.disconnect=function(){this.disconnectInternally(),this.updateState("disconnected")},e.prototype.isEncrypted=function(){return this.encrypted},e.prototype.startConnecting=function(){var t=this,e=function(n,r){n?t.runner=t.strategy.connect(0,e):"error"===r.action?(t.emit("error",{type:"HandshakeError",error:r.error}),t.timeline.error({handshakeError:r.error})):(t.abortConnecting(),t.handshakeCallbacks[r.action](r))};this.runner=this.strategy.connect(0,e)},e.prototype.abortConnecting=function(){this.runner&&(this.runner.abort(),this.runner=null)},e.prototype.disconnectInternally=function(){this.abortConnecting(),this.clearRetryTimer(),this.clearUnavailableTimer(),this.connection&&this.abandonConnection().close()},e.prototype.updateStrategy=function(){this.strategy=this.options.getStrategy({key:this.key,timeline:this.timeline,encrypted:this.encrypted})},e.prototype.retryIn=function(t){var e=this;this.timeline.info({action:"retry",delay:t}),t>0&&this.emit("connecting_in",Math.round(t/1e3)),this.retryTimer=new o.OneOffTimer(t||0,(function(){e.disconnectInternally(),e.connect()}))},e.prototype.clearRetryTimer=function(){this.retryTimer&&(this.retryTimer.ensureAborted(),this.retryTimer=null)},e.prototype.setUnavailableTimer=function(){var t=this;this.unavailableTimer=new o.OneOffTimer(this.options.unavailableTimeout,(function(){t.updateState("unavailable")}))},e.prototype.clearUnavailableTimer=function(){this.unavailableTimer&&this.unavailableTimer.ensureAborted()},e.prototype.sendActivityCheck=function(){var t=this;this.stopActivityCheck(),this.connection.ping(),this.activityTimer=new o.OneOffTimer(this.options.pongTimeout,(function(){t.timeline.error({pong_timed_out:t.options.pongTimeout}),t.retryIn(0)}))},e.prototype.resetActivityCheck=function(){var t=this;this.stopActivityCheck(),this.connection.handlesActivityChecks()||(this.activityTimer=new o.OneOffTimer(this.activityTimeout,(function(){t.sendActivityCheck()})))},e.prototype.stopActivityCheck=function(){this.activityTimer&&this.activityTimer.ensureAborted()},e.prototype.buildConnectionCallbacks=function(){var t=this;return{message:function(e){t.resetActivityCheck(),t.emit("message",e)},ping:function(){t.send_event("pusher:pong",{})},activity:function(){t.resetActivityCheck()},error:function(e){t.emit("error",{type:"WebSocketError",error:e})},closed:function(){t.abandonConnection(),t.shouldRetry()&&t.retryIn(1e3)}}},e.prototype.buildHandshakeCallbacks=function(t){var e=this;return s.extend({},t,{connected:function(t){e.activityTimeout=Math.min(e.options.activityTimeout,t.activityTimeout,t.connection.activityTimeout||1/0),e.clearUnavailableTimer(),e.setConnection(t.connection),e.socket_id=e.connection.id,e.updateState("connected",{socket_id:e.socket_id})}})},e.prototype.buildErrorCallbacks=function(){var t=this,e=function(e){return function(n){n.error&&t.emit("error",{type:"WebSocketError",error:n.error}),e(n)}};return{ssl_only:e((function(){t.encrypted=!0,t.updateStrategy(),t.retryIn(0)})),refused:e((function(){t.disconnect()})),backoff:e((function(){t.retryIn(1e3)})),retry:e((function(){t.retryIn(0)}))}},e.prototype.setConnection=function(t){for(var e in this.connection=t,this.connectionCallbacks)this.connection.bind(e,this.connectionCallbacks[e]);this.resetActivityCheck()},e.prototype.abandonConnection=function(){if(this.connection){for(var t in this.stopActivityCheck(),this.connectionCallbacks)this.connection.unbind(t,this.connectionCallbacks[t]);var e=this.connection;return this.connection=null,e}},e.prototype.updateState=function(t,e){var n=this.state;if(this.state=t,n!==t){var r=t;"connected"===r&&(r+=" with new socket ID "+e.socket_id),a.default.debug("State changed",n+" -> "+r),this.timeline.info({state:t,params:e}),this.emit("state_change",{previous:n,current:t}),this.emit(t,e)}},e.prototype.shouldRetry=function(){return"connecting"===this.state||"connected"===this.state},e}(i.default);e.__esModule=!0,e.default=l},function(t,e,n){"use strict";var r=n(9),i=n(42),o=function(){function t(){this.channels={}}return t.prototype.add=function(t,e){return this.channels[t]||(this.channels[t]=function(t,e){return 0===t.indexOf("private-")?i.default.createPrivateChannel(t,e):0===t.indexOf("presence-")?i.default.createPresenceChannel(t,e):i.default.createChannel(t,e)}(t,e)),this.channels[t]},t.prototype.all=function(){return r.values(this.channels)},t.prototype.find=function(t){return this.channels[t]},t.prototype.remove=function(t){var e=this.channels[t];return delete this.channels[t],e},t.prototype.disconnect=function(){r.objectApply(this.channels,(function(t){t.disconnect()}))},t}();e.__esModule=!0,e.default=o},function(t,e,n){"use strict";var r=n(42),i=n(11),o=n(30),a=n(9),s=function(){function t(t,e,n,r){this.name=t,this.priority=e,this.transport=n,this.options=r||{}}return t.prototype.isSupported=function(){return this.transport.isSupported({encrypted:this.options.encrypted})},t.prototype.connect=function(t,e){var n=this;if(!this.isSupported())return c(new o.UnsupportedStrategy,e);if(this.priority<t)return c(new o.TransportPriorityTooLow,e);var i=!1,s=this.transport.createConnection(this.name,this.priority,this.options.key,this.options),l=null,u=function(){s.unbind("initialized",u),s.connect()},d=function(){l=r.default.createHandshake(s,(function(t){i=!0,_(),e(null,t)}))},p=function(t){_(),e(t)},f=function(){var t;_();try{t=JSON.stringify(s)}catch(e){t=a.safeJSONStringify(s)}e(new o.TransportClosed(t))},_=function(){s.unbind("initialized",u),s.unbind("open",d),s.unbind("error",p),s.unbind("closed",f)};return s.bind("initialized",u),s.bind("open",d),s.bind("error",p),s.bind("closed",f),s.initialize(),{abort:function(){i||(_(),l?l.close():s.close())},forceMinPriority:function(t){i||n.priority<t&&(l?l.close():s.close())}}},t}();function c(t,e){return i.default.defer((function(){e(t)})),{abort:function(){},forceMinPriority:function(){}}}e.__esModule=!0,e.default=s},function(t,e,n){"use strict";var r=n(9),i=n(11),o=n(12),a=function(){function t(t,e){this.strategies=t,this.loop=Boolean(e.loop),this.failFast=Boolean(e.failFast),this.timeout=e.timeout,this.timeoutLimit=e.timeoutLimit}return t.prototype.isSupported=function(){return r.any(this.strategies,i.default.method("isSupported"))},t.prototype.connect=function(t,e){var n=this,r=this.strategies,i=0,o=this.timeout,a=null,s=function(c,l){l?e(null,l):(i+=1,n.loop&&(i%=r.length),i<r.length?(o&&(o*=2,n.timeoutLimit&&(o=Math.min(o,n.timeoutLimit))),a=n.tryStrategy(r[i],t,{timeout:o,failFast:n.failFast},s)):e(!0))};return a=this.tryStrategy(r[i],t,{timeout:o,failFast:this.failFast},s),{abort:function(){a.abort()},forceMinPriority:function(e){t=e,a&&a.forceMinPriority(e)}}},t.prototype.tryStrategy=function(t,e,n,r){var i=null,a=null;return n.timeout>0&&(i=new o.OneOffTimer(n.timeout,(function(){a.abort(),r(!0)}))),a=t.connect(e,(function(t,e){t&&i&&i.isRunning()&&!n.failFast||(i&&i.ensureAborted(),r(t,e))})),{abort:function(){i&&i.ensureAborted(),a.abort()},forceMinPriority:function(t){a.forceMinPriority(t)}}},t}();e.__esModule=!0,e.default=a},function(t,e,n){"use strict";var r=n(9),i=n(11),o=function(){function t(t){this.strategies=t}return t.prototype.isSupported=function(){return r.any(this.strategies,i.default.method("isSupported"))},t.prototype.connect=function(t,e){return function(t,e,n){var i=r.map(t,(function(t,r,i,o){return t.connect(e,n(r,o))}));return{abort:function(){r.apply(i,a)},forceMinPriority:function(t){r.apply(i,(function(e){e.forceMinPriority(t)}))}}}(this.strategies,t,(function(t,n){return function(i,o){n[t].error=i,i?function(t){return r.all(t,(function(t){return Boolean(t.error)}))}(n)&&e(!0):(r.apply(n,(function(t){t.forceMinPriority(o.transport.priority)})),e(null,o))}}))},t}();function a(t){t.error||t.aborted||(t.abort(),t.aborted=!0)}e.__esModule=!0,e.default=o},function(t,e,n){"use strict";var r=n(11),i=n(2),o=n(56),a=function(){function t(t,e,n){this.strategy=t,this.transports=e,this.ttl=n.ttl||18e5,this.encrypted=n.encrypted,this.timeline=n.timeline}return t.prototype.isSupported=function(){return this.strategy.isSupported()},t.prototype.connect=function(t,e){var n=this.encrypted,a=function(t){var e=i.default.getLocalStorage();if(e)try{var n=e[s(t)];if(n)return JSON.parse(n)}catch(e){c(t)}return null}(n),l=[this.strategy];if(a&&a.timestamp+this.ttl>=r.default.now()){var u=this.transports[a.transport];u&&(this.timeline.info({cached:!0,transport:a.transport,latency:a.latency}),l.push(new o.default([u],{timeout:2*a.latency+1e3,failFast:!0})))}var d=r.default.now(),p=l.pop().connect(t,(function o(a,u){a?(c(n),l.length>0?(d=r.default.now(),p=l.pop().connect(t,o)):e(a)):(function(t,e,n){var o=i.default.getLocalStorage();if(o)try{o[s(t)]=JSON.stringify({timestamp:r.default.now(),transport:e,latency:n})}catch(t){}}(n,u.transport.name,r.default.now()-d),e(null,u))}));return{abort:function(){p.abort()},forceMinPriority:function(e){t=e,p&&p.forceMinPriority(e)}}},t}();function s(t){return"pusherTransport"+(t?"Encrypted":"Unencrypted")}function c(t){var e=i.default.getLocalStorage();if(e)try{delete e[s(t)]}catch(t){}}e.__esModule=!0,e.default=a},function(t,e,n){"use strict";var r=n(12),i=function(){function t(t,e){var n=e.delay;this.strategy=t,this.options={delay:n}}return t.prototype.isSupported=function(){return this.strategy.isSupported()},t.prototype.connect=function(t,e){var n,i=this.strategy,o=new r.OneOffTimer(this.options.delay,(function(){n=i.connect(t,e)}));return{abort:function(){o.ensureAborted(),n&&n.abort()},forceMinPriority:function(e){t=e,n&&n.forceMinPriority(e)}}},t}();e.__esModule=!0,e.default=i},function(t,e){"use strict";var n=function(){function t(t,e,n){this.test=t,this.trueBranch=e,this.falseBranch=n}return t.prototype.isSupported=function(){return(this.test()?this.trueBranch:this.falseBranch).isSupported()},t.prototype.connect=function(t,e){return(this.test()?this.trueBranch:this.falseBranch).connect(t,e)},t}();e.__esModule=!0,e.default=n},function(t,e){"use strict";var n=function(){function t(t){this.strategy=t}return t.prototype.isSupported=function(){return this.strategy.isSupported()},t.prototype.connect=function(t,e){var n=this.strategy.connect(t,(function(t,r){r&&n.abort(),e(t,r)}));return n},t}();e.__esModule=!0,e.default=n},function(t,e,n){"use strict";var r=n(5);e.getGlobalConfig=function(){return{wsHost:r.default.host,wsPort:r.default.ws_port,wssPort:r.default.wss_port,httpHost:r.default.sockjs_host,httpPort:r.default.sockjs_http_port,httpsPort:r.default.sockjs_https_port,httpPath:r.default.sockjs_path,statsHost:r.default.stats_host,authEndpoint:r.default.channel_auth_endpoint,authTransport:r.default.channel_auth_transport,activity_timeout:r.default.activity_timeout,pong_timeout:r.default.pong_timeout,unavailable_timeout:r.default.unavailable_timeout}},e.getClusterConfig=function(t){return{wsHost:"ws-"+t+".pusher.com",httpHost:"sockjs-"+t+".pusher.com"}}}])},t.exports=r()},function(t,e){angular.module("genius").factory("PyongClient",["AppConfig","$http",function(t,e){var n=function(n,r,i){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return o["".concat(r,"_id")]=i,e.post(t.api_root_url+n,o).then((function(t){return t.data.response[r]}))};return{pyong:function(t,e){return n("/pyongs",t,e,{note_may_follow:!0})},finalizePyong:function(t,e,r){return n("/pyongs/finalize",t,e,{pyong_note:r})}}}])},function(t,e,n){"use strict";n.r(e);n(856);angular.module("genius").factory("querystring",[function(){return{stringify:function(t){return $.param(t)},parse:function(t){return $.deparam(t)}}}])},function(t,e,n){!function(e){try{var r=n(7)}catch(t){}t.exports=function(t){var e=function(t,e){var n={},r={true:!0,false:!1,null:null};return t.replace(/\+/g," ").split("&").forEach((function(t){var i,o=t.split("="),a=decodeURIComponent(o[0]),s=n,c=0,l=a.split("]["),u=l.length-1;if(/\[/.test(l[0])&&/\]$/.test(l[u])?(l[u]=l[u].replace(/\]$/,""),u=(l=l.shift().split("[").concat(l)).length-1):u=0,2===o.length)if(i=decodeURIComponent(o[1]),e&&(i=i&&!isNaN(i)&&+i+""===i?+i:"undefined"===i?void 0:void 0!==r[i]?r[i]:i),u)for(;c<=u;c++)s=s[a=""===l[c]?s.length:l[c]]=c<u?s[a]||(l[c+1]&&isNaN(l[c+1])?{}:[]):i;else"[object Array]"===Object.prototype.toString.call(n[a])?n[a].push(i):!{}.hasOwnProperty.call(n,a)?n[a]=i:n[a]=[n[a],i];else a&&(n[a]=e?void 0:"")})),n};t&&(t.prototype.deparam=t.deparam=e);return e}(r)}()},function(t,e){angular.module("genius").factory("QuestionClient",["$http","$q","AppConfig","Reversible","ApiClient","Session",function(t,e,n,r,i,o){return{index:function(t,e,n){return n.text_format=o.user_signed_in?"html,markdown":"html",n["".concat(t,"_id")]=e,i.get("/questions",n)},create_if_not_exists:function(t){return t.id?e.resolve(t):this.create(t.questionable_type,t.questionable_id,t)},create:function(r,i,o){var a={question:_.assign({},o,{body:o.body}),text_format:"plain"};return a["".concat(r,"_id")]=i,t.post("".concat(n.api_root_url,"/questions"),a).then((function(t){return _.assign(o,t.data.response.question),o})).catch((function(t){return e.reject(_.set(t.data.response,"message",t.data.meta.message))}))},update:function(i,o){var a=r.modify(i,o.question);return t.put("".concat(n.api_root_url,"/questions/").concat(i.id),o,{params:{text_format:"html,markdown"}}).then((function(t){_.assign(i,t.data.response.question)})).catch((function(t){return a(),e.reject(new Error(t.data.meta.message))}))},move:function(r,i){var o={direction:i};return t.put("".concat(n.api_root_url,"/questions/").concat(r.id,"/move"),o,{params:{text_format:"html,markdown"}}).then((function(t){_.assign(r,t.data.response.question)})).catch((function(t){return e.reject(new Error(t.data.meta.message))}))},change_state:function(r,i){var o={state_event:i},a="".concat(n.api_root_url,"/questions/").concat(r.id,"/change_state");return t.put(a,o,{params:{text_format:"html,markdown"}}).then((function(t){_.assign(r,t.data.response.question)})).catch((function(t){return e.reject(new Error(t.data.meta.message))}))}}}])},function(t,e){angular.module("genius").factory("ReactSongPageService",[function(){return{reactSongPageRedirect:_.tap(new URL(window.location),(function(t){t.search=_.tap(new URLSearchParams(t.search),(function(t){t.delete("bagon"),t.append("react",1)})).toString()})).toString()}}])},function(t,e){angular.module("genius").factory("ReferentClient",["$http","AppConfig","Session","querystring",function(t,e,n,r){return{refresh:function(t){return this.get(t.id).then((function(e){return _.assign(t,_.omit(e,"annotations")),_.each(t.annotations,(function(t){_.each(e.annotations,(function(e){e.id===t.id&&_.assign(t,e)}))})),t}))},get:function(r){var i={text_format:n.user_signed_in?"html,markdown,plain":"html,plain"};return t.get("".concat(e.api_root_url,"/referents/").concat(r),{params:i}).then((function(t){return t.data.response.referent}))},bulk_load:function(i){var o=n.user_signed_in?"html,markdown,plain":"html,plain",a=r.stringify({text_format:o,ids:i});return t.get("".concat(e.api_root_url,"/referents/multi?").concat(a)).then((function(t){return t.data.response.referents}))},create_referent:function(n){var i=r.stringify({text_format:"html"});return t.post("".concat(e.api_root_url,"/songs/").concat(n.song.id,"/referents?").concat(i),n).then((function(t){return t.data.response.referent}))}}}])},function(t,e){angular.module("genius").factory("ReferentElementMap",(function(){return new Map}))},function(t,e){angular.module("genius").factory("ReferentHelper",["Session",function(t){var e=function(e){return{_editing:{_form_visible:!0},new:!0,referent_id:e.id,body:{markdown:"",html:""},authors:[{user:t.current_user,pinned_role:e.current_user_metadata.relationships.pinned_role}],created_at:parseInt(Date.now()/1e3),needs_exegesis:0===e.annotations.length}};return{display_mode_by_classification:function(e){return _.includes(["verified","cosigned"],e)?"green":"unreviewed"===e&&t.has_permission("see_unreviewed_referents",t.current_user)?"red":"yellow"},create_verified_annotation_placeholder:function(t){return _.assign(e(t),{verified:!0})},create_community_annotation_placeholder:function(t){return _.assign(e(t),{id:t.id})},range_or_contents_intersects_links_or_contains_images:function(t){var e=t.cloneContents();return!!e.querySelectorAll("img").length||!!(e.querySelectorAll("a").length||$(t.startContainer).closest("a").length||$(t.endContainer).closest("a").length)}}}])},function(t,e){angular.module("genius").factory("ReferentLocator",["$document","AppConfig","string_to_symbol_array","LyricsEditing","MarkdownPlaintextFinderRegex",function(t,e,n,r,i){var o=e.annotator_context_length,a=function(t){return t.replace(/\s+/g,"")},s=function(e){var n=t[0].createRange();return n.selectNodeContents(e),n},c=function(t,e){var n=s(e);return n.setEnd(t.startContainer,t.startOffset),a(function(t){var e=t.cloneContents();return $(e).find("[avoid-selection]").remove(),s(e)}(n).toString())},l=function(t,e){var n=s(e);n.setEnd(t.startContainer,t.startOffset);var o=$(n.cloneContents().children).html(),a=r.prepare_lyrics_for_editing(o),c=i(t.toString());return(a.markdown.match(c)||[]).length};return{calculate_referent_location:function(t,e){var r=n(c(t,e)),i=r.slice(-o),u=n(function(t,e){var n=s(e);return n.setStart(t.endContainer,t.endOffset),a(n.toString())}(t,e)),d=u.slice(0,o);return{previous_context:i.join(""),text:t.toString(),next_context:d.join(""),total_offset:r.length,occurrence_in_markdown:l(t,e)}},calculate_image_location:function(t,e){return{image_url:e.src,occurrence:$(t).find('img[src="'.concat(e.src,'"]')).index(e)+1}}}}])},function(t,e){angular.module("genius").factory("ReferentRegistry",["Preloader","ReferentClient",function(t,e){var n=new t((function(t){return e.bulk_load(t)})),r={referents:{},referent_ids:[]},i=function(t){var e=r.referents[t.id];Reflect.deleteProperty(e,"stub"),Object.assign(e,t)};return{get:function(t){var e=this.peek(t);return e&&e.stub&&n.load(t).then(i),e},peek:function(t){return r.referents[t]},first:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.after_referent_id,i=r.referent_ids.indexOf(n),o=_.find(r.referent_ids,(function(e,n){return n>i&&t(r.referents[e])}));return r.referents[o]},register:function(t){return r.referents[t.id]?r.referents[t.id]:(r.referents[t.id]=t,r.referent_ids.push(t.id),t)},bulk_preload:function(t){n.bulk_load(t)},preload_insert:function(t){n.insert(t.id,t)},preload_from_start:function(t){this.preload_around(r.referent_ids[0],t)},preload_around:function(t,e){var i=r.referent_ids.indexOf(t),o=_(r.referent_ids).sortBy((function(t){return Math.abs(_.indexOf(r.referent_ids,t)-i)})).value(),a=n.filter_unloaded(o).slice(0,e);n.bulk_load(a)},update_if_present:function(t){var e=this.peek(t.id);return e?(e.stub&&Object.assign(e,t),e):t},clear:function(){Object.assign(r,{referents:{},referent_ids:[]})},reset_fragments:function(){_.each(r.referents,(function(t){t.fragments=[]}))}}}])},function(t,e){angular.module("genius").factory("ReportAbuseClient",["ApiClient",function(t){return{reportAsAbusive:function(e,n,r,i){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;return t.post("/:type/:id/report_as_abusive",{type:e,id:n,reason:r,details:i,recaptcha_token:o})}}}])},function(t,e){angular.module("genius").factory("RetryFailureInterceptor",["$injector","$q",function(t,e){return{responseError:function(n){var r=n.config;return r.retries&&r.retries>0?(r.retries-=1,t.get("$http")(r)):e.reject(n)}}}])},function(t,e){angular.module("genius").factory("Reversible",["$parse",function(t){return{modify:function(e,n){var r,i={},o={};for(r in n)i[r]=t(r),_.has(e,r)&&(o[r]=i[r](e)),i[r].assign(e,n[r]);return function(){for(r in n)_.has(o,r)?i[r].assign(e,o[r]):r.split(".").reduce((function(t,e,n,r){if(t)return n===r.length-1?Reflect.deleteProperty(t,e):t[e]}),e)}}}}])},function(t,e){function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function r(t,e){return r=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},r(t,e)}function i(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=a(t);if(e){var i=a(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return o(this,n)}}function o(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function a(t){return a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},a(t)}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function l(t,e,n){return e&&c(t.prototype,e),n&&c(t,n),t}angular.module("genius").factory("ScrollFocus",["$window","EventEmitter",function(t,e){var n=t.JSONStore,o=function(){function t(){s(this,t),this.elements=[]}return l(t,[{key:"clear",value:function(){_.invokeMap(this.elements,"remove")}},{key:"draw_area",value:function(t,e){this.draw({position:"absolute",backgroundColor:"rgba(255, 0, 0, 0.1)",border:"1px solid red",width:"100%",top:t,height:e-t})}},{key:"draw_line",value:function(t){this.draw({position:"absolute",border:"1px solid blue",width:"100%",height:1,top:t})}},{key:"draw",value:function(t){var e=$("<div>").css(t).appendTo("body");this.elements.push(e)}}]),t}();return function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&r(t,e)}(c,e);var a=i(c);function c(e,n){var r;s(this,c),(r=a.call(this)).elements=e,r.options=_.defaults({},n,{update_ms:10,topmost_offset:.25,bottommost_offset:.6,zone_radius:.1,container:$(t.document.body),scroll_frame:t}),r.debug=new o;var i=null;return r.scroll_handler=_.throttle((function(){r._draw_debug();var t=r._focused_element();t!==i&&(r.emit("update",t),i=t)}),r.options.update_ms),$(r.options.scroll_frame).on("scroll",r.scroll_handler),r}return l(c,[{key:"replace",value:function(t){this.elements=t}},{key:"destroy",value:function(){$(this.options.scroll_frame).off("scroll",this.scroll_handler)}},{key:"_focused_element",value:function(){for(var t=this._trigger_top(),e=this._element_zones(),n=0;n<e.length;n++){var r=e[n];if(r.top<t&&r.bottom>t)return this.elements[n]}return null}},{key:"_trigger_top",value:function(){var t=$(this.options.scroll_frame).height(),e=$(this.options.container),n=e.offset().top+e.height()-t,r=Math.min(1,$(this.options.scroll_frame).scrollTop()/n),i=this.options.bottommost_offset-this.options.topmost_offset;return(this.options.topmost_offset+r*i)*t}},{key:"_element_zones",value:function(){var t=$(this.options.scroll_frame).height(),e=this.options.zone_radius*t,n=this.options.container.getBoundingClientRect(),r=_.map(this.elements,(function(t){var r=t.getBoundingClientRect();return{top:Math.max(n.top,r.top-e),bottom:Math.min(n.bottom,r.bottom+e)}}));return _.eachCons(r,2,(function(t,e){if(t.bottom>e.top){var n=t.bottom-e.top;t.bottom=t.bottom-n/2,e.top=e.top+n/2}})),r}},{key:"_draw_debug",value:function(){var t=this;if(n.get_object("scroll_focus_debug")){var e=$(this.options.scroll_frame).scrollTop();this.debug.clear(),this.debug.draw_line(e+this._trigger_top()),_.each(this._element_zones(),(function(n){t.debug.draw_area(e+n.top,e+n.bottom)}))}}}]),c}(e)}])},function(t,e){angular.module("genius").factory("ScrollPoint",["$window",function(t){var e={},n={};return e.register=function(t,r){e.has_point(t)&&n[t].push(r),n[t]=[r]},e.unregister=function(t,r){e.has_point(t)&&(n[t]=_.without(n[t],r),n[t].length||delete n[t])},e.scroll_to=function(r){t.requestAnimationFrame((function(){e.has_point(r)&&$("html, body").animate({scrollTop:n[r][0].offset().top})}))},e.has_point=function(t){return!!n[t]},e}])},function(t,e){angular.module("genius").factory("SearchClient",["ApiClient",function(t){return{multi:function(e,n){return t.returning("sections").get("/search/multi",_.assign({q:e},n))},section:function(e,n,r){return t.transform((function(t){return{hits:t.sections[0].hits,next_page:t.next_page}})).get("/search/:section",_.assign({q:n,section:e},r))}}}])},function(t,e){angular.module("genius").factory("Session",["SessionConfig",function(t){return Object.create(Object.prototype,{has_permission:{value:function(t,e){return _.includes(_.get(e,"current_user_metadata.permissions"),t)}},has_feature:{value:function(e){return _.includes(t.features,e)}},user_signed_in:{get:function(){return!!this.current_user}},current_user:{get:function(){return t.current_user},set:function(e){t.current_user=e}}})}])},function(t,e){angular.module("genius").factory("SessionConfig",["$window",function(t){return t.SESSION_CONFIG}])},function(t,e){angular.module("genius").factory("ShimInnerHtmlProp",["$window",function(t){return _.once((function(){var e=document.createElementNS("http://www.w3.org/2000/svg","svg");_.isUndefined(e.innerHTML)&&t.GeniusShimInnerHtml()}))}])},function(t,e){angular.module("genius").factory("signed_out_created_content",["$window","Session",function(t,e){var n=t.sessionStorage,r={};return{add:function(t,r){if(!e.user_signed_in){var i=this.get();i[t]=i[t]||[],i[t].push(r),function(t){if(n)try{n.setItem("signed_out_created_content",JSON.stringify(t))}catch(t){if("QuotaExceededError"!==t.name)throw t}}(i)}},get:function(){return n?JSON.parse(n.getItem("signed_out_created_content")||"{}"):r},clear:function(){r={},n.removeItem("signed_out_created_content")}}}])},function(t,e){angular.module("genius").factory("SmartRouting",["$q","$routerRootComponent","$document","$injector","$location","mobile_device",function(t,e,n,r,i,o){var a=function(t){return e=function(e){return e.recognize(t)},r.invoke(["$rootRouter",e]);var e},s=function(n){return angular.element(e).empty()?a(n).then((function(e){var r=o?"mobile":"desktop",a=_.get(e,"component.routeData.data.clientRoutableOn");return a&&-1!==a.indexOf(r)?i.url(n):t.reject(Error("Cannot route with client"))})):t.reject(Error("No root routing component"))},c=function(t){n[0].location.href=t};return{navigate_to_absolute_url:function(t){var e=new URL(t);if(e.hostname!==n[0].location.hostname)return c(t);var r=e.pathname+e.search+e.hash;s(r).catch((function(e){return c(t)}))}}}])},function(t,e){function n(t){return function(t){if(Array.isArray(t))return r(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}angular.module("genius").factory("SongClient",["$q","$http","AppConfig","Session","querystring",function(t,e,r,i,o){return{autocomplete_api_endpoint:"".concat(r.api_root_url,"/search"),autocomplete_options:{parse:function(t){return _.map(t.response.hits,"result").map((function(t){return{data:["".concat(t.title," | ").concat(t.primary_artist.name),t],value:t,result:t}}))},formatItem:function(t){var e="".concat(t[1].title,"<br>").concat(t[1].primary_artist.name);return t[1].new?"Create new: ".concat(e):e}},autocomplete:function(t){return e.get("".concat(r.api_root_url,"/search/song"),{params:{q:t}}).then((function(t){return _.map(_.get(t,"data.response.sections[0].hits",[]),"result")}))},count_view:function(t){return e.post("".concat(r.api_root_url,"/songs/").concat(t,"/count_view"))},load_contributor_data:function(t){return e.get("".concat(r.api_root_url,"/songs/").concat(t,"/contributors")).then((function(t){return t.data.response.contributors}))},load_iq_earners:function(t,n){var i=o.stringify(n);return e.get("".concat(r.api_root_url,"/songs/").concat(t,"/iq_earners?").concat(i)).then((function(t){return t.data.response.contributors}))},load_annotation_open_data:function(t){return e.get("".concat(r.api_root_url,"/songs/").concat(t,"/annotation_open_data")).then((function(t){return t.data.response.annotation_open_data}))},load_song:function(t){return e.get("".concat(r.api_root_url,"/songs/").concat(t),{params:{text_format:"html,markdown"}}).then((function(t){return t.data.response.song}))},load_lyrics:function(t){return e.get("".concat(r.api_root_url,"/songs/").concat(t,"/lyrics")).then((function(t){return t.data.response.song_lyrics}))},perform_action:function(n,o,a){var s=i.user_signed_in?"html,markdown":"html";return e.put("".concat(r.api_root_url,"/songs/").concat(n,"/").concat(o),a,{params:{text_format:s}}).then((function(t){return t.data.response.song}),(function(e){return t.reject(new Error(_.get(e,["data","meta","message"],"Error performing admin action")))}))},delete:function(t){return e.delete("".concat(r.api_root_url,"/songs/").concat(t))},update:function(i,o){var a,s=(a=o,_(a).pick(["id","title","updated_by_human_at","spotify_uuid","youtube_url","soundcloud_url","custom_header_image_url","release_date_components","albums","tags","featured_video","youtube_start","custom_song_art_image_url","recording_location","custom_performances","song_art_primary_color","song_art_secondary_color","song_art_text_color","valid_song_art_contrast"].concat(n(_.map(r.external_song_match_purposes,(function(t){return"apple_song_for_".concat(t)}))))).merge(["producer_artists","featured_artists","writer_artists"].reduce((function(t,e){return a[e]&&(t[e]=_.map(a[e],(function(t){return _.pick(t,"name")}))),t}),{})).tap((function(t){a.primary_artist&&(t.primary_artist=a.primary_artist.name),a.primary_tag&&(t.primary_tag_id=a.primary_tag.id),a.song_relationships&&(t.song_relationships_by_id=[],_.each(a.song_relationships,(function(e){t.song_relationships_by_id.push({type:e.type,song_ids:_.compact(_.map(e.songs,"id"))})})))})).omit(_.isUndefined).value());return e.put("".concat(r.api_root_url,"/songs/").concat(i),{song:s},{params:{text_format:"html,markdown"}}).then((function(t){return t.data.response.song}),(function(e){return t.reject(_.set(e.data.response,"message",e.data.meta.message))}))},save_lyrics:function(n,i){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return e.put("".concat(r.api_root_url,"/songs/").concat(n.id,"/lyrics"),_.merge({lyrics:{body:{html:i}},client_timestamps:_.pick(n,["updated_by_human_at","lyrics_updated_at"])},o)).then((function(t){return t.data.response.song_lyrics}),(function(e){return t.reject(e.data)}))},line_items:function(t,n){var i="".concat(r.api_root_url,"/songs/").concat(t,"/activity_stream/line_items"),o={text_format:"html",page:n};return e.get(i,{params:o}).then((function(t){return t.data.response}))},for_artist:function(t,n){return e.get("".concat(r.api_root_url,"/artists/").concat(t,"/songs"),{params:n}).then((function(t){return t.data.response}))},search_with_artist:function(t,n){return e.get("".concat(r.api_root_url,"/artists/").concat(t,"/songs/search"),{params:n||{}}).then((function(t){return t.data.response}))},hot:function(t){return e.get("".concat(r.api_root_url,"/songs/hot"),{params:t||{}}).then((function(t){return t.data.response}))},attribution_visualization:function(t){return e.get("".concat(r.api_root_url,"/songs/").concat(t,"/attribution_visualization")).then((function(t){return t.data.response.attribution_visualization}))},preview_lyrics_for_export:function(t){return e.get("".concat(r.api_root_url,"/songs/").concat(t,"/preview_lyrics_for_export")).then((function(t){return t.data.response.preview_lyrics_for_export.lyrics}))}}}])},function(t,e){angular.module("genius").factory("Soundcloud",["$sce","$http","querystring",function(t,e,n){var r={auto_play:!1,buying:!1,liking:!1,download:!1,sharing:!1,show_artwork:!1,show_comments:!1,show_playcount:!1,show_user:!1,hide_related:!0,visual:!1},i=function(t){return e.get("https://soundcloud.com/oembed",{params:{url:t,format:"json"}}).then((function(t){var e=(new DOMParser).parseFromString(t.data.html,"text/html").querySelector("iframe").src.split("?")[1];return n.parse(e)}))};return{oembed_url_for_src:function(t){return i(t).then((function(t){return t.url}))},player_url_for_src:function(e){return i(e).then((function(e){var i=n.stringify(_.assign(e,r));return t.trustAsResourceUrl("https://w.soundcloud.com/player/?".concat(i))}))}}}])},function(t,e){angular.module("genius").factory("SpotifyAnnotationClient",["$http",function(t){return{save_song:function(e,n,r){return t.post("/spotify_annotations/bulk_update",{song_id:e,spotify_annotations:r,spotify_song:{note:n.note,lock_version:n.lock_version,finalized:n.finalized}}).then((function(t){return t.data}))},load_song:function(e){return t.get("/songs/".concat(e,"/spotify_annotations")).then((function(t){return t.data}))}}}])},function(t,e){angular.module("genius").factory("SpotifyClient",["$http",function(t){return{load_artist_metadata:function(e){var n="https://api.spotify.com/v1/artists/"+e,r=$("[data-spotify-access-token]").attr("data-spotify-access-token");return r&&(n+="?access_token="+r),t.get(n).then((function(t){return t.data}))}}}])},function(t,e){function n(t){return function(t){if(Array.isArray(t))return r(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}angular.module("genius").factory("SpotifyPlayer",["$interval","$q","$timeout","SpotifyPlayerClient","SpotifySocket",function(t,e,r,o,a){return function(){function s(e){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),this._callback=e,this._position_offset=0,this._last_player_state_update_at=0,this._pending_actions=[],this._log_entries=[],this._socket=new a;var r,i,o,c=(r=this._on_player_state_changed.bind(this),function(t){clearTimeout(i),t.is_playing||!1===o?r(t):i=setTimeout((function(){return r(t)}),500),o=t.is_playing});this._socket.on("player_state_changed",(function(t){n._log({label:"player_state_changed",raw_state:t}),c(t)})),t((function(){return n._callback(n.state)}),50),t((function(){return n._force_update()}),3500),this._force_update()}var c,l,u;return c=s,l=[{key:"pause",value:function(){var t=this,e="pause";return this._log({label:"action_start",action_name:e}),this._request_and_expect({action_name:e,request:function(){return o.pause()},expect:function(){return!t.is_playing}})}},{key:"play",value:function(t){var e=this,n="play";return this._log({label:"action_start",action_name:n,action_arguments:{track_uri:t}}),this._request_and_expect({action_name:n,request:function(){return o.play(t===e.track_uri?null:t)},expect:function(){return e.is_playing&&(!t||t===e.track_uri)}})}},{key:"seek",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{play:!1},r=n.play,i="seek";return t=Number(t),this._log({label:"action_start",action_name:i,action_arguments:{position:t,play:r}}),this._request_and_expect({action_name:i,request:function(){return o.seek(t)},expect:function(){return Math.abs(e._player_state_message.state.progress_ms-t)<1e3}}).then((function(){return r?e.play():e.state}))}},{key:"print_log_entries",value:function(){console.log(this._log_entries)}},{key:"download_log_entries",value:function(){var t=new Blob([JSON.stringify(this._log_entries)],{type:"text/csv"}),e=document.createElement("a");e.href=URL.createObjectURL(t),e.download="spotify_player_log_".concat(Date.now(),".json"),e.click()}},{key:"is_playing",get:function(){return _.get(this._player_state_message,["state","is_playing"],!1)}},{key:"position",get:function(){return this._player_state_message?Math.max(this._position_without_offset-this._position_offset,0):0}},{key:"track",get:function(){return _.get(this._player_state_message,["state","item"],null)}},{key:"track_uri",get:function(){return _.get(this.track,["linked_from","uri"])||_.get(this.track,"uri")||null}},{key:"state",get:function(){return _.pick(this,["is_playing","position","track","track_uri"])}},{key:"playback_type",get:function(){return"spotify"}},{key:"playback_label",get:function(){return"Spotify Websocket"}},{key:"_force_update",value:function(){o.shuffle(!1)}},{key:"_on_player_state_changed",value:function(t){var e=this;_.get(this._player_state_message,"event_id",0)>=t.event_id?alert("An irregular event has occurred. Please download the player log and forward it to engineering, along with a description of the network connection of your player device (wifi, ethernet, etc)"):(this._last_player_state_update_at=Date.now(),this._new_state_should_update_position_offset(t)&&(this._position_offset=this._last_player_state_update_at-t.state.timestamp),this._player_state_message=t,this._pending_actions.forEach((function(t){t.expect()&&t.deferred.resolve(e.state)})))}},{key:"_new_state_should_update_position_offset",value:function(t){var e=t.state;return!!this._player_state_message&&(this.is_playing!==e.is_playing||Math.abs(this._position_without_offset-e.progress_ms)>5e3)}},{key:"_request_and_expect",value:function(t){var n=this,i=t.request,o=t.expect,a=t.action_name;if(o())return e.when(this.state);var s,c={expect:o,deferred:e.defer()};return this._pending_actions.push(c),c.deferred.promise.finally((function(){r.cancel(s),_.pull(n._pending_actions,c)})),i().then((function(){s=r((function(){n._log({label:"action_timeout",action_name:a}),c.deferred.reject(new Error("Timeout"))}),500)})).catch((function(t){n._log({label:"action_error",action_name:a,error:t}),c.deferred.reject(t)})),c.deferred.promise.then((function(t){return n._log({label:"action_success",action_name:a,result:t}),t}))}},{key:"_log",value:function(t){this._log_entries=[].concat(n(_.takeRight(this._log_entries,5e3)),[_.extend(t,{state:this.state,timestamp:Date.now(),pending_action_count:this._pending_actions.length})])}},{key:"_position_without_offset",get:function(){if(!this._player_state_message)return 0;var t=this.is_playing?Date.now()-this._last_player_state_update_at:0;return this._player_state_message.state.progress_ms+t}}],l&&i(c.prototype,l),u&&i(c,u),s}()}])},function(t,e){angular.module("genius").factory("SpotifyPlayerClient",["$http","$q","IdentityClient",function(t,e,n){var r,i=function(){return _.get(r,"expires_at",0)>Date.now()/1e3?e.when(r.token):n.spotify_credentials().then((function(t){return(r=t).token}))},o=function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=r.params,a=r.data;return i().then((function(r){return t({method:e,params:o,data:a,url:"https://api.spotify.com/v1".concat(n),headers:{Authorization:"Bearer ".concat(r)}})}))};return{fresh_token:i,play:function(t){var e={};return t&&(e.uris=[t]),o("put","/me/player/play",{data:e})},pause:function(){return o("put","/me/player/pause")},seek:function(t){return o("put","/me/player/seek",{params:{position_ms:t}})},subscribe:function(t){return o("put","/me/notifications/player",{params:{connection_id:t}})},shuffle:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return o("put","/me/player/shuffle",{params:{state:t}})}}}])},function(t,e){function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}angular.module("genius").factory("SpotifySocket",["$interval","$rootScope","$timeout","SpotifyPlayerClient",function(t,e,r,i){var o=JSON.stringify({type:"ping"}),a=["message","error","close"];return function(){function s(){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),_.bindAll(this,["_on_message","_on_error","_on_close"]),this._connection_id=null,this._scope=e.$new(!0),this._connect(),t((function(){return n._ping()}),1e4)}var c,l,u;return c=s,(l=[{key:"on",value:function(t,e){this._scope.$on(t,(function(t,n){return e(n)}))}},{key:"_connect",value:function(){var t=this;return i.fresh_token().then((function(e){t._websocket&&t._dispose(),t._websocket=new WebSocket("wss://dealer.spotify.com?access_token=".concat(e)),a.forEach((function(e){return t._websocket.addEventListener(e,t["_on_".concat(e)])}))}))}},{key:"_ping",value:function(){var t=this;this.is_closed?this._connect():this.is_open&&(this._reconnect_timer=r((function(){return t._websocket.close()}),1e3),this._websocket.send(o))}},{key:"_on_message",value:function(t){var e=this,n=JSON.parse(t.data);if("pong"!==n.type){var o=_.get(n,["headers","Spotify-Connection-Id"]);o&&o!==this._connection_id&&i.subscribe(o).then((function(){e._connection_id=o})),_(n.payloads||[]).flatMap("events").each((function(t){var n=t.type,r=t.event;e._scope.$emit(n.toLowerCase(),r)}))}else r.cancel(this._reconnect_timer)}},{key:"_on_error",value:function(t){this._scope.$emit("error",t),this._websocket.close()}},{key:"_on_close",value:function(){this._connection_id=null,this._connect()}},{key:"_dispose",value:function(){var t=this;a.forEach((function(e){return t._websocket.removeEventListener(e,t["_on_".concat(e)])})),this._websocket.close()}},{key:"is_open",get:function(){return _.get(this._websocket,"readyState")===WebSocket.OPEN}},{key:"is_closed",get:function(){return _.get(this._websocket,"readyState")===WebSocket.CLOSED}}])&&n(c.prototype,l),u&&n(c,u),s}()}])},function(t,e){angular.module("genius").factory("StopWatch",["$window",function(t){return t.StopWatch}])},function(t,e){angular.module("genius").factory("StoryClient",["ApiClient",function(t){return{index:function(e){return t.get("/stories",e)}}}])},function(t,e){angular.module("genius").factory("string_has_unmatched_parentheses",[function(){return function(t){var e,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=r.parentheses,o=void 0===i?"[]()":i,a=[];for(e=0;n=t[e++];){var s=o.indexOf(n);if(!(s<0)){var c=Boolean(s%2);if(c){if(!a.length||o.indexOf(a.pop())!==s-1)return!0}else a.push(n)}}return a.length>0}}])},function(t,e){angular.module("genius").factory("string_to_symbol_array",(function(){var t=new RegExp("".concat("[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]","|").concat("[\\u0000-\\uFFFF]"),"g");return function(e){return e.match(t)||[]}}))},function(t,e){function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}angular.module("genius").factory("StructuredText",[function(){var t=String.fromCodePoint(parseInt("E000",16)+1),e=String.fromCodePoint(parseInt("E000",16)+2),r=/<(?:"[^"]*"['"]*|'[^']*'['"]*|[^'">])+>/g,i=new RegExp("".concat(e,"|\\]\\(\\d+\\)|").concat(r.source),"g"),o=/\]\(\d+\)|<\/[^>]+>/,a=new RegExp("".concat(e,"|<\\w+(?:\"[^\"]*\"['\"]*|'[^']*'['\"]*|[^'\">])+>")),s=new RegExp("".concat(r.source,"\\s?<\\/[^>]+>|\\[\\]\\(\\d+\\)"),"gm"),c=/(?:\[((?:\[[^\]]*\]|\[\[[^\]]*\]\]|[^[\]])*)\]\([ \t]*<?(.*?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/gm,l=function(e){return _.pad("",e,t)};return function(){function u(n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),this._string=n.replace(c,(function(t,n,r){return"".concat(e).concat(n,"](").concat(r,")")}));for(var i=function(e){return e.replace(c,(function(e,n,r){return"".concat(t).concat(n).concat(l(r.length+3))})).replace(r,(function(t){return l(t.length)}))}(n).split(""),o=0,a=0;a<i.length;a++)i[a]!==t&&o++;this.plain_to_structured_indices=new Array(o);for(var s=0,d=0;d<i.length;d++)i[d]!==t&&(this.plain_to_structured_indices[s]=d,s++)}var d,p,f;return d=u,(p=[{key:"remove_range",value:function(t,e){var n=this.plain_to_structured_indices[t],r=this.plain_to_structured_indices[e]||_.last(this.plain_to_structured_indices)+1,o=(this._string.substring(n,r).match(i)||[]).join("");return new this.constructor(this.string.substring(0,n)+o+this.string.substring(r))}},{key:"insert_at",value:function(t,e){var n=this.plain_to_structured_indices[t]||_.last(this.plain_to_structured_indices)+1,r=this._string.substring(0,n),i=this._string.substring(n),s=r.match(new RegExp("(?:".concat(a.source,")$"))),c=r.match(new RegExp("(?:".concat(o.source,")$"))),l=i.match(new RegExp("^(?:".concat(a.source,")"))),u=i.match(new RegExp("^(?:".concat(o.source,")"))),d=/^\n|\n$/.test(e);return s&&d?n-=s[0].length:u&&d?n+=u[0].length:!c||l||d?!l||c||d||(n+=l[0].length):n-=c[0].length,new this.constructor(this.string.substring(0,n)+e+this.string.substring(n))}},{key:"string",get:function(){return this._string.replace(new RegExp("".concat(e),"g"),"[")}},{key:"plain",get:function(){return this.string.replace(c,(function(t,e){return e})).replace(r,"")}},{key:"structured",get:function(){return this.string.replace(s,"")}}])&&n(d.prototype,p),f&&n(d,f),u}()}])},function(t,e){angular.module("genius").factory("TagClient",["$http","AppConfig",function(t,e){return{autocomplete:function(n){return t.get("".concat(e.api_root_url,"/tags/autocomplete"),{params:{q:n}}).then((function(t){return t.data.response.tags}))},primary:function(){return t.get("".concat(e.api_root_url,"/tags/home")).then((function(t){return t.data.response.tags}))}}}])},function(t,e,n){"use strict";n.r(e);n(133),n(889);angular.module("genius").factory("TetherDrop",["$window",function(t){return t.Drop}])},function(t,e,n){(function(e){t.exports=e.Drop=n(890)}).call(this,n(1))},function(t,e,n){var r,i,o;i=[n(133)],r=function(t){"use strict";var e=Function.prototype.bind,n=function(){function t(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=function(t,e,n){for(var r=!0;r;){var i=t,o=e,a=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,o);if(void 0!==s){if("value"in s)return s.value;var c=s.get;if(void 0===c)return;return c.call(a)}var l=Object.getPrototypeOf(i);if(null===l)return;t=l,e=o,n=a,r=!0,s=l=void 0}};function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=t.Utils,c=s.extend,l=s.addClass,u=s.removeClass,d=s.hasClass,p=s.Evented;function f(t){var e=t.split(" "),r=n(e,2),i=r[0],o=r[1];if(["left","right"].indexOf(i)>=0){var a=[o,i];i=a[0],o=a[1]}return[i,o].join(" ")}function _(t,e){for(var n=void 0,r=[];-1!==(n=t.indexOf(e));)r.push(t.splice(n,1));return r}var h=["click"];"ontouchstart"in document.documentElement&&h.push("touchstart");var m={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"otransitionend",transition:"transitionend"},g="";for(var v in m)({}).hasOwnProperty.call(m,v)&&void 0!==document.createElement("p").style[v]&&(g=m[v]);var b={left:"right",right:"left",top:"bottom",bottom:"top",middle:"middle",center:"center"},y={};function w(){var n=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],s=function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return new(e.apply(v,[null].concat(n)))};c(s,{createContext:w,drops:[],defaults:{}});var m={classPrefix:"drop",defaults:{position:"bottom left",openOn:"click",beforeClose:null,constrainToScrollParent:!0,constrainToWindow:!0,classes:"",remove:!1,openDelay:0,closeDelay:50,focusDelay:null,blurDelay:null,hoverOpenDelay:null,hoverCloseDelay:null,loadContentOnDemand:!1,tetherOptions:{}}};c(s,m,n),c(s.defaults,m.defaults,n.defaults),void 0===y[s.classPrefix]&&(y[s.classPrefix]=[]),s.updateBodyClasses=function(){for(var t=!1,e=y[s.classPrefix],n=e.length,r=0;r<n;++r)if(e[r].isOpened()){t=!0;break}t?l(document.body,s.classPrefix+"-open"):u(document.body,s.classPrefix+"-open")};var v=function(e){function n(t){if(o(this,n),i(Object.getPrototypeOf(n.prototype),"constructor",this).call(this),this.options=c({},s.defaults,t),this.target=this.options.target,void 0===this.target)throw new Error("Drop Error: You must provide a target.");var e="data-"+s.classPrefix,r=this.target.getAttribute(e);r&&(this.options.content=r);for(var a=["position","openOn"],u=0;u<a.length;++u){var d=this.target.getAttribute(e+"-"+a[u]);d&&(this.options[a[u]]=d)}this.options.classes&&!1!==this.options.addTargetClasses&&l(this.target,this.options.classes),s.drops.push(this),y[s.classPrefix].push(this),this._boundEvents=[],this.bindMethods(),this.setupElements(),this.setupEvents(),this.setupTether()}return a(n,e),r(n,[{key:"_on",value:function(t,e,n){this._boundEvents.push({element:t,event:e,handler:n}),t.addEventListener(e,n)}},{key:"bindMethods",value:function(){this.transitionEndHandler=this._transitionEndHandler.bind(this)}},{key:"setupElements",value:function(){var t=this;if(this.drop=document.createElement("div"),l(this.drop,s.classPrefix),this.options.classes&&l(this.drop,this.options.classes),this.content=document.createElement("div"),l(this.content,s.classPrefix+"-content"),"function"==typeof this.options.content){var e=function(){var e=t.options.content.call(t,t);if("string"==typeof e)t.content.innerHTML=e;else{if("object"!=typeof e)throw new Error("Drop Error: Content function should return a string or HTMLElement.");t.content.innerHTML="",t.content.appendChild(e)}};this.options.loadContentOnDemand?this.on("beforeOpen",e.bind(this)):(e(),this.on("open",e.bind(this)))}else"object"==typeof this.options.content?this.content.appendChild(this.options.content):this.content.innerHTML=this.options.content;this.drop.appendChild(this.content)}},{key:"setupTether",value:function(){var e=this.options.position.split(" ");e[0]=b[e[0]],e=e.join(" ");var n=[];this.options.constrainToScrollParent?n.push({to:"scrollParent",pin:"top, bottom",attachment:"together none"}):n.push({to:"scrollParent"}),!1!==this.options.constrainToWindow?n.push({to:"window",attachment:"together"}):n.push({to:"window"});var r={element:this.drop,target:this.target,attachment:f(e),targetAttachment:f(this.options.position),classPrefix:s.classPrefix,offset:"0 0",targetOffset:"0 0",enabled:!1,constraints:n,addTargetClasses:this.options.addTargetClasses};!1!==this.options.tetherOptions&&(this.tether=new t(c({},r,this.options.tetherOptions)))}},{key:"setupEvents",value:function(){var t=this;if(this.options.openOn)if("always"!==this.options.openOn){var e=this.options.openOn.split(" ");if(e.indexOf("click")>=0)for(var n=function(e){t.toggle(e),e.preventDefault()},r=function(e){t.isOpened()&&(e.target===t.drop||t.drop.contains(e.target)||e.target===t.target||t.target.contains(e.target)||t.close(e))},i=0;i<h.length;++i){var o=h[i];this._on(this.target,o,n),this._on(document,o,r)}var a=null,s=null,c=function(e){null!==s?clearTimeout(s):a=setTimeout((function(){t.open(e),a=null}),("focus"===e.type?t.options.focusDelay:t.options.hoverOpenDelay)||t.options.openDelay)},l=function(e){null!==a?clearTimeout(a):s=setTimeout((function(){t.close(e),s=null}),("blur"===e.type?t.options.blurDelay:t.options.hoverCloseDelay)||t.options.closeDelay)};e.indexOf("hover")>=0&&(this._on(this.target,"mouseover",c),this._on(this.drop,"mouseover",c),this._on(this.target,"mouseout",l),this._on(this.drop,"mouseout",l)),e.indexOf("focus")>=0&&(this._on(this.target,"focus",c),this._on(this.drop,"focus",c),this._on(this.target,"blur",l),this._on(this.drop,"blur",l))}else setTimeout(this.open.bind(this))}},{key:"isOpened",value:function(){if(this.drop)return d(this.drop,s.classPrefix+"-open")}},{key:"toggle",value:function(t){this.isOpened()?this.close(t):this.open(t)}},{key:"open",value:function(t){var e=this;this.isOpened()||(this.drop.parentNode||document.body.appendChild(this.drop),void 0!==this.tether&&this.tether.enable(),l(this.drop,s.classPrefix+"-open"),l(this.drop,s.classPrefix+"-open-transitionend"),setTimeout((function(){e.drop&&l(e.drop,s.classPrefix+"-after-open")})),this.trigger("beforeOpen"),void 0!==this.tether&&this.tether.position(),this.trigger("open"),s.updateBodyClasses())}},{key:"_transitionEndHandler",value:function(t){t.target===t.currentTarget&&(d(this.drop,s.classPrefix+"-open")||u(this.drop,s.classPrefix+"-open-transitionend"),this.drop.removeEventListener(g,this.transitionEndHandler))}},{key:"beforeCloseHandler",value:function(t){var e=!0;return this.isClosing||"function"!=typeof this.options.beforeClose||(this.isClosing=!0,e=!1!==this.options.beforeClose(t,this)),this.isClosing=!1,e}},{key:"close",value:function(t){this.isOpened()&&this.beforeCloseHandler(t)&&(u(this.drop,s.classPrefix+"-open"),u(this.drop,s.classPrefix+"-after-open"),this.drop.addEventListener(g,this.transitionEndHandler),this.trigger("close"),void 0!==this.tether&&this.tether.disable(),s.updateBodyClasses(),this.options.remove&&this.remove(t))}},{key:"remove",value:function(t){this.close(t),this.drop.parentNode&&this.drop.parentNode.removeChild(this.drop)}},{key:"position",value:function(){this.isOpened()&&void 0!==this.tether&&this.tether.position()}},{key:"destroy",value:function(){this.remove(),void 0!==this.tether&&this.tether.destroy();for(var t=0;t<this._boundEvents.length;++t){var e=this._boundEvents[t],n=e.element,r=e.event,i=e.handler;n.removeEventListener(r,i)}this._boundEvents=[],this.tether=null,this.drop=null,this.content=null,this.target=null,_(y[s.classPrefix],this),_(s.drops,this)}}]),n}(p);return s}var $=w();return document.addEventListener("DOMContentLoaded",(function(){$.updateBodyClasses()})),$},void 0===(o="function"==typeof r?r.apply(e,i):r)||(t.exports=o)},function(t,e){angular.module("genius").factory("TextSelection",["$window","$document","$rootScope","$immediate","XpathRange",function(t,e,n,r,i){var o=n.$new(),a=function(){var n=function(){var n=(t.getSelection||e[0].getSelection||$.noop)();if(void 0!==n&&n.rangeCount&&!n.isCollapsed)return n}();return n?function(t){for(var e=[],n=0;n<t.rangeCount;n++){var r=t.getRangeAt(n);r.getBoundingClientRect().width>.1&&e.push(r)}return e}(n):[]},s=[],c=function(){var t=a();(function(t,e){return!(!t||!e)&&t.length===e.length&&_.every(_.zip(t,e),(function(t){var e=t[0],n=t[1];return e.startOffset===n.startOffset&&e.endOffset===n.endOffset&&e.startContainer.isEqualNode(n.startContainer)&&e.endContainer.isEqualNode(n.endContainer)}))})(t,s)||(s=t,o.$emit("selection",{ranges:t}))};return o.restore_selection_if_clobbered=function(t,e){var n,r=a();r.length&&(n=i.fromRange(r[0],t));var o=e();if(n&&!a().length){var s=i.toRange(n.start,n.startOffset,n.end,n.endOffset,t),l=getSelection();l.removeAllRanges(),l.addRange(s),c()}return o},e.on("mouseup keyup",(function(t){(!t.keyCode||t.keyCode>=37&&t.keyCode<=40)&&r(c)})),o}])},function(t,e){function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}angular.module("genius").factory("TimestampedDataFeed",[function(){var t=function(){return Math.floor((new Date).getTime()/1e3)};return function(){return function e(r,i){var o=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t();n(this,e),this.reset=function(){o.timestamp_for_next_page=s},this.reset(),this.params=_.clone(a),this.next=function(){return r(_.assign({timestamp_for_next_page:o.timestamp_for_next_page},o.params)).then((function(t){return o.timestamp_for_next_page=t.timestamp_for_next_page,t[i]}))},this.has_next=function(){return o.timestamp_for_next_page}}}()}])},function(t,e){angular.module("genius").factory("TopBarIndicatorsLoader",["EagerLoader","$http","Session",function(t,e,n){var r=new t,i=function(){n.user_signed_in&&e.get("/top_bar_indicators",{retries:2}).then((function(t){for(var e in t.data)r.loaded(e,t.data[e])}))};return i(),{listen_for:r.listen_for.bind(r),refresh:i}}])},function(t,e){window.JSONStore={get_object:function(t){try{return JSON.parse(localStorage.getItem(t))}catch(t){return null}},set_object:function(t,e){var n=JSON.stringify(e);try{localStorage.setItem(t,n)}catch(t){}},delete:function(t){try{localStorage.removeItem(t)}catch(t){}},modify_store:function(t,e){this.set_object(t,e(this.get_object(t)))}}},function(t,e){angular.module("genius").factory("Twitter",["$window","querystring",function(t,e){return{share:function(n){var r=e.stringify({url:n.url,text:n.message}),i="https://twitter.com/intent/tweet?".concat(r);t.open(i)}}}])},function(t,e){angular.module("genius").factory("UserClient",["ApiClient","$http","AppConfig","$q",function(t,e,n,r){var i=function(t){var e=new Error(t.data.meta.message);return _.assign(e,_.pick(t,"status","statusText")),r.reject(_.assign(e,t.data.response))},o={autocomplete_api_endpoint:"".concat(n.api_root_url,"/users/autocomplete"),transform_autocomplete_results:function(t){return t.response.users},contribution_opportunity_assignments:function(e){return t.get("/users/:id/contribution_opportunity_assignments",{id:e,text_format:"html,markdown"})},mark_contribution_opportunity_assignments_read:function(e){return t.post("/users/:id/contribution_opportunity_assignments/mark_read",{id:e})},dismiss_contribution_opportunities_explanation:function(e){return t.delete("/users/:id/contribution_opportunities_explanation",{id:e})},accomplishments:function(t,r){return e.get("".concat(n.api_root_url,"/users/").concat(t,"/accomplishments"),{params:r}).then((function(t){return t.data.response}))},autocomplete:function(t){var n=this;return e.get(this.autocomplete_api_endpoint,{params:{q:t}}).then((function(t){return n.transform_autocomplete_results(t.data)}))},load:function(t){return e.get("".concat(n.api_root_url,"/users/").concat(t)).then((function(t){return t.data.response.user}))},impersonate:function(t){return e.post("/users/impersonate",{login:t})},autocomplete_options:{parse:function(t){var e=o.transform_autocomplete_results(t);return _.map(e,(function(t){return{data:[t.login],value:t.login,result:t.login}}))}},load_followers_by_artist:function(t,r){return e.get("".concat(n.api_root_url,"/artists/").concat(t,"/followers"),{params:r}).then((function(t){return t.data.response}))},load_followers_by_user:function(t,r){return e.get("".concat(n.api_root_url,"/users/").concat(t,"/followers"),{params:r}).then((function(t){return t.data.response}))},load_followed_users:function(t,r){return e.get("".concat(n.api_root_url,"/users/").concat(t,"/followed_users"),{params:r}).then((function(t){return t.data.response}))},load_contributions:function(t,r,i){var o=r?"/".concat(r):"";return e.get("".concat(n.api_root_url,"/users/").concat(t,"/contributions").concat(o),{params:i}).then((function(t){return t.data.response}))},update:function(t,r){return e.put("".concat(n.api_root_url,"/users/").concat(t),r,{params:{text_format:"html,markdown"}}).then((function(t){return t.data.response})).catch((function(t){return i(t)}))},load_recent_signups:function(t,r){return r.spam_state=t,e.get("".concat(n.api_root_url,"/users/recent_signups"),{params:r}).then((function(t){return t.data.response}))},add_role:function(t,r){return e.put("".concat(n.api_root_url,"/users/").concat(t,"/roles/").concat(r)).then((function(t){return t.data.response})).catch((function(t){return i(t)}))},remove_role:function(t,r){return e.delete("".concat(n.api_root_url,"/users/").concat(t,"/roles/").concat(r)).then((function(t){return t.data.response})).catch((function(t){return i(t)}))},associate_with_artist:function(t,r){return e.put("".concat(n.api_root_url,"/users/").concat(t,"/artist"),r).then((function(t){return t.data.response})).catch((function(t){return i(t)}))},dissociate_from_artist:function(t){return e.delete("".concat(n.api_root_url,"/users/").concat(t,"/artist")).then((function(t){return t.data.response})).catch((function(t){return i(t)}))},penalty_box:function(t){return e.put("".concat(n.api_root_url,"/users/").concat(t,"/penalty_box")).then((function(t){return t.data.response})).catch((function(t){return i(t)}))},unpenalty_box:function(t){return e.delete("".concat(n.api_root_url,"/users/").concat(t,"/penalty_box")).then((function(t){return t.data.response})).catch((function(t){return i(t)}))},update_spam_state:function(t,r){return e.put("".concat(n.api_root_url,"/users/").concat(t,"/spam"),r).then((function(t){return t.data.response})).catch((function(t){return i(t)}))},mass_delete_unreviewed_activity:function(t){return e.delete("".concat(n.api_root_url,"/users/").concat(t,"/unreviewed_activity")).then((function(t){return t.data.response})).catch((function(t){return i(t)}))},delete_votes:function(t,r){return e.delete("".concat(n.api_root_url,"/users/").concat(t,"/").concat(r)).then((function(t){return t.data.response})).catch((function(t){return i(t)}))},other_users_with_ip:function(t,r){return e.get("".concat(n.api_root_url,"/users/").concat(t,"/other_users_with_ip"),{params:r}).then((function(t){return t.data.response}))},get_slug:function(t){return _(this.get_path(t).split("/")).last()},get_path:function(t){return new URL(t.url).pathname},activity_line_items:function(t,r){return e.get("".concat(n.api_root_url,"/users/").concat(t,"/activity_stream/line_items"),{params:r}).then((function(t){return t.data.response}))},spam_status:function(t){return e.get("".concat(n.api_root_url,"/users/").concat(t,"/spam_status")).then((function(t){return t.data.response}))},logout:function(){return e.delete("/logout")}};return o}])},function(t,e){angular.module("genius").factory("VideoClient",["ApiClient",function(t){return{index:function(e){return t.get("/videos",e)}}}])},function(t,e){function n(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}angular.module("genius").factory("VideoListClient",["ApiClient",function(t){return{index:function(e){return t.get("/video_lists",e)},update:function(e,n){return t.returning("video_list").put("/video_lists/:id",{id:e,video_list:n})},videos:function(e,i){return t.get("/video_lists/by_slug/:slug/videos",function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?n(Object(i),!0).forEach((function(e){r(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):n(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}({slug:e},i))}}}])},function(t,e){function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}angular.module("genius").factory("VideoPlacement",["Tracking","VideoRegistry","$immediate",function(t,e,i){return function(){function o(t,r){var a=this,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:_.noop;n(this,o),this.object=t,this.name=r,i((function(){e.videos_for_placement(a.object,a.name).then((function(t){a.videos=t,a.track_loaded(),s(a.videos)})),a.page_type=e.current_page_type(a.object)}))}var a,s,c;return a=o,(s=[{key:"tracking_data",value:function(t){return{"Page Type":this.page_type,Placement:this.name,Position:_.indexOf(this.videos,t)+1,"Video ID":t.id,Relevance:t.relevance,"Object Type":this.object._type,"Object ID":this.object.id}}},{key:"track_loaded",value:function(){var e=this,n={};_.forEach(this.videos,(function(t){n[t.relevance]=n[t.relevance]||[],n[t.relevance].push(t)})),_.forEach(n,(function(n,r){t.attach_to_delayed_track("Videos Loaded (placement: ".concat(e.name,", relevance: ").concat(r,")"),{IDs:_.map(n,"id")})}))}}])&&r(a.prototype,s),c&&r(a,c),o}()}])},function(t,e){function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}angular.module("genius").factory("VideoRegistry",["VideoClient","PagedDataFeed","$q","PromiseQueue","AppConfig","SessionConfig",function(t,e,i,o,a,s){var c=["high","medium","low"],l={},u=function(t){return"".concat(t._type,":").concat(t.id)},d=function t(e){r(this,t),this.video=e,this.claimed=!1},p=function(){function l(n,o){var s=this;r(this,l),this.name=o,this.placements=_.map(a.video_placements[o],"name"),"song"===n._type&&n.song_story&&_.remove(this.placements,(function(t){return"sidebar"===t||"sidebar_thumb"===t})),this.placement_deferreds={},_.forEach(this.placements,(function(t){s.placement_deferreds[t]=i.defer()})),this.videos_with_metadata=[];var c={};c["".concat(n._type,"_id")]=n.id,this.paged_data_feed=new e(t.index,"videos",c,1,(function(t){s.videos_with_metadata=s.videos_with_metadata.concat(_.map(t,(function(t){return new d(t)})))})),this.series_videos_with_metadata=[],this.series_paged_data_feed=new e(t.index,"videos",_.merge({series:!0},c),1,(function(t){s.series_videos_with_metadata=s.series_videos_with_metadata.concat(_.map(t,(function(t){return new d(t)})))})),this.resolve_placements()}var u,p,f;return u=l,(p=[{key:"next_unclaimed_video",value:function(t,e){var n=this,r=e?this.series_paged_data_feed:this.paged_data_feed,o=i.defer(),a=_.reject(e?this.series_videos_with_metadata:this.videos_with_metadata,"claimed");if(_.some(a)){var s=_.head(a);c.indexOf(s.video.relevance)<=c.indexOf(t)?o.resolve(s):o.reject()}else r.has_next()?r.next().then((function(){return o.resolve(n.next_unclaimed_video(t,e))})):o.reject();return o.promise}},{key:"resolve_placements",value:function(){var t=this,e=new o;_.forEach(this.placements,(function(n){return e.add((function(){return t.resolve_placement(n)}))}))}},{key:"resolve_placement",value:function(t){var e=this,n=_.find(a.video_placements[this.name],{name:t}),r=s.fringe_enabled&&!_.isUndefined(n.fringe_min_relevance)?n.fringe_min_relevance:n.min_relevance,c=[],l=new o({fail_fast:!0}),u=_.times(n.max_videos,(function(){return l.add((function(){return e.next_unclaimed_video(r,n.series).then((function(t){t.claimed=!0,c.push(t)}))}))}));return i.all(u).finally((function(){return e.placement_deferreds[t].resolve(_.map(c,"video"))})),this.placement_deferreds[t].promise}},{key:"videos_for_placement",value:function(t){return this.placement_deferreds[t].promise}},{key:"videos",value:function(){return _.map(this.videos_with_metadata,"video")}}])&&n(u.prototype,p),f&&n(u,f),l}();return{current_page_type:function(t){return l[u(t)].name},register_page:function(t,e){l[u(t)]=new p(t,e)},videos_for_placement:function(t,e){return l[u(t)].videos_for_placement(e)},videos_for:function(t){return l[u(t)].videos()},paged_data_feed_for:function(t){return l[u(t)].paged_data_feed}}}])},function(t,e){angular.module("genius").factory("VideoSourcesClient",["ApiClient",function(t){return{index:function(e){return t.returning("video_sources").get("/videos/:video_id/video_sources",{video_id:e})},create:function(e,n){return t.returning("video_source").post("/videos/:video_id/video_sources",{video_id:e,video_source:n})},destroy:function(e){return t.delete("/video_sources/:video_source_id",{video_source_id:e})}}}])},function(t,e){angular.module("genius").factory("VoteClient",["AppConfig","querystring","$http",function(t,e,n){return{load_voters:function(r,i){var o=_.set({},"".concat(r,"_id"),i);return n.get("".concat(t.api_root_url,"/voters?").concat(e.stringify(o))).then((function(t){return t.data.response.voters}))},submit_vote:function(e,r,i){var o=_.set({direction:i||"middle"},"".concat(e,"_id"),r);return n.post("".concat(t.api_root_url,"/votes"),o)}}}])},function(t,e){angular.module("genius").factory("wait_for_global",["$q","$window",function(t,e){return function(n,r){return _.get(e,n)?t.when(_.get(e,n)):(r=_.defaults(r||{},{timeout:1e3}),t((function(t,i){setTimeout((function(){clearInterval(o),i(new Error("timed out waiting for '".concat(n,"' to load")))}),r.timeout);var o=setInterval((function(){var r=_.get(e,n);r&&(clearInterval(o),t(r))}),50)})))}}])},function(t,e){angular.module("genius").factory("wait_until",["$q",function(t){return function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t((function(t,r){var i=setTimeout((function(){clearInterval(o),r(new Error("timed out waiting for condition"))}),n.timeout||1e4),o=setInterval((function(){e()&&(clearInterval(o),clearTimeout(i),t())}),50)}))}}])},function(t,e,n){"use strict";n.r(e);n(906),n(907);angular.module("genius").factory("Waypoint",["$window",function(t){return t.Waypoint}])},function(t,e){!function(){"use strict";function t(r){if(!r)throw new Error("No options passed to Waypoint constructor");if(!r.element)throw new Error("No element option passed to Waypoint constructor");if(!r.handler)throw new Error("No handler option passed to Waypoint constructor");this.key="waypoint-"+e,this.options=t.Adapter.extend({},t.defaults,r),this.element=this.options.element,this.adapter=new t.Adapter(this.element),this.callback=r.handler,this.axis=this.options.horizontal?"horizontal":"vertical",this.enabled=this.options.enabled,this.triggerPoint=null,this.group=t.Group.findOrCreate({name:this.options.group,axis:this.axis}),this.context=t.Context.findOrCreateByElement(this.options.context),t.offsetAliases[this.options.offset]&&(this.options.offset=t.offsetAliases[this.options.offset]),this.group.add(this),this.context.add(this),n[this.key]=this,e+=1}var e=0,n={};t.prototype.queueTrigger=function(t){this.group.queueTrigger(this,t)},t.prototype.trigger=function(t){this.enabled&&this.callback&&this.callback.apply(this,t)},t.prototype.destroy=function(){this.context.remove(this),this.group.remove(this),delete n[this.key]},t.prototype.disable=function(){return this.enabled=!1,this},t.prototype.enable=function(){return this.context.refresh(),this.enabled=!0,this},t.prototype.next=function(){return this.group.next(this)},t.prototype.previous=function(){return this.group.previous(this)},t.invokeAll=function(t){var e=[];for(var r in n)e.push(n[r]);for(var i=0,o=e.length;o>i;i++)e[i][t]()},t.destroyAll=function(){t.invokeAll("destroy")},t.disableAll=function(){t.invokeAll("disable")},t.enableAll=function(){t.invokeAll("enable")},t.refreshAll=function(){t.Context.refreshAll()},t.viewportHeight=function(){return window.innerHeight||document.documentElement.clientHeight},t.viewportWidth=function(){return document.documentElement.clientWidth},t.adapters=[],t.defaults={context:window,continuous:!0,enabled:!0,group:"default",horizontal:!1,offset:0},t.offsetAliases={"bottom-in-view":function(){return this.context.innerHeight()-this.adapter.outerHeight()},"right-in-view":function(){return this.context.innerWidth()-this.adapter.outerWidth()}},window.Waypoint=t}(),function(){"use strict";function t(t){window.setTimeout(t,1e3/60)}function e(t){this.element=t,this.Adapter=i.Adapter,this.adapter=new this.Adapter(t),this.key="waypoint-context-"+n,this.didScroll=!1,this.didResize=!1,this.oldScroll={x:this.adapter.scrollLeft(),y:this.adapter.scrollTop()},this.waypoints={vertical:{},horizontal:{}},t.waypointContextKey=this.key,r[t.waypointContextKey]=this,n+=1,this.createThrottledScrollHandler(),this.createThrottledResizeHandler()}var n=0,r={},i=window.Waypoint,o=window.onload;e.prototype.add=function(t){var e=t.options.horizontal?"horizontal":"vertical";this.waypoints[e][t.key]=t,this.refresh()},e.prototype.checkEmpty=function(){var t=this.Adapter.isEmptyObject(this.waypoints.horizontal),e=this.Adapter.isEmptyObject(this.waypoints.vertical);t&&e&&(this.adapter.off(".waypoints"),delete r[this.key])},e.prototype.createThrottledResizeHandler=function(){function t(){e.handleResize(),e.didResize=!1}var e=this;this.adapter.on("resize.waypoints",(function(){e.didResize||(e.didResize=!0,i.requestAnimationFrame(t))}))},e.prototype.createThrottledScrollHandler=function(){function t(){e.handleScroll(),e.didScroll=!1}var e=this;this.adapter.on("scroll.waypoints",(function(){(!e.didScroll||i.isTouch)&&(e.didScroll=!0,i.requestAnimationFrame(t))}))},e.prototype.handleResize=function(){i.Context.refreshAll()},e.prototype.handleScroll=function(){var t={},e={horizontal:{newScroll:this.adapter.scrollLeft(),oldScroll:this.oldScroll.x,forward:"right",backward:"left"},vertical:{newScroll:this.adapter.scrollTop(),oldScroll:this.oldScroll.y,forward:"down",backward:"up"}};for(var n in e){var r=e[n],i=r.newScroll>r.oldScroll?r.forward:r.backward;for(var o in this.waypoints[n]){var a=this.waypoints[n][o],s=r.oldScroll<a.triggerPoint,c=r.newScroll>=a.triggerPoint;(s&&c||!s&&!c)&&(a.queueTrigger(i),t[a.group.id]=a.group)}}for(var l in t)t[l].flushTriggers();this.oldScroll={x:e.horizontal.newScroll,y:e.vertical.newScroll}},e.prototype.innerHeight=function(){return this.element==this.element.window?i.viewportHeight():this.adapter.innerHeight()},e.prototype.remove=function(t){delete this.waypoints[t.axis][t.key],this.checkEmpty()},e.prototype.innerWidth=function(){return this.element==this.element.window?i.viewportWidth():this.adapter.innerWidth()},e.prototype.destroy=function(){var t=[];for(var e in this.waypoints)for(var n in this.waypoints[e])t.push(this.waypoints[e][n]);for(var r=0,i=t.length;i>r;r++)t[r].destroy()},e.prototype.refresh=function(){var t,e=this.element==this.element.window,n=e?void 0:this.adapter.offset(),r={};for(var o in this.handleScroll(),t={horizontal:{contextOffset:e?0:n.left,contextScroll:e?0:this.oldScroll.x,contextDimension:this.innerWidth(),oldScroll:this.oldScroll.x,forward:"right",backward:"left",offsetProp:"left"},vertical:{contextOffset:e?0:n.top,contextScroll:e?0:this.oldScroll.y,contextDimension:this.innerHeight(),oldScroll:this.oldScroll.y,forward:"down",backward:"up",offsetProp:"top"}}){var a=t[o];for(var s in this.waypoints[o]){var c,l,u,d,p=this.waypoints[o][s],f=p.options.offset,_=p.triggerPoint,h=0,m=null==_;p.element!==p.element.window&&(h=p.adapter.offset()[a.offsetProp]),"function"==typeof f?f=f.apply(p):"string"==typeof f&&(f=parseFloat(f),p.options.offset.indexOf("%")>-1&&(f=Math.ceil(a.contextDimension*f/100))),c=a.contextScroll-a.contextOffset,p.triggerPoint=h+c-f,l=_<a.oldScroll,u=p.triggerPoint>=a.oldScroll,d=!l&&!u,!m&&(l&&u)?(p.queueTrigger(a.backward),r[p.group.id]=p.group):(!m&&d||m&&a.oldScroll>=p.triggerPoint)&&(p.queueTrigger(a.forward),r[p.group.id]=p.group)}}return i.requestAnimationFrame((function(){for(var t in r)r[t].flushTriggers()})),this},e.findOrCreateByElement=function(t){return e.findByElement(t)||new e(t)},e.refreshAll=function(){for(var t in r)r[t].refresh()},e.findByElement=function(t){return r[t.waypointContextKey]},window.onload=function(){o&&o(),e.refreshAll()},i.requestAnimationFrame=function(e){(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||t).call(window,e)},i.Context=e}(),function(){"use strict";function t(t,e){return t.triggerPoint-e.triggerPoint}function e(t,e){return e.triggerPoint-t.triggerPoint}function n(t){this.name=t.name,this.axis=t.axis,this.id=this.name+"-"+this.axis,this.waypoints=[],this.clearTriggerQueues(),r[this.axis][this.name]=this}var r={vertical:{},horizontal:{}},i=window.Waypoint;n.prototype.add=function(t){this.waypoints.push(t)},n.prototype.clearTriggerQueues=function(){this.triggerQueues={up:[],down:[],left:[],right:[]}},n.prototype.flushTriggers=function(){for(var n in this.triggerQueues){var r=this.triggerQueues[n],i="up"===n||"left"===n;r.sort(i?e:t);for(var o=0,a=r.length;a>o;o+=1){var s=r[o];(s.options.continuous||o===r.length-1)&&s.trigger([n])}}this.clearTriggerQueues()},n.prototype.next=function(e){this.waypoints.sort(t);var n=i.Adapter.inArray(e,this.waypoints);return n===this.waypoints.length-1?null:this.waypoints[n+1]},n.prototype.previous=function(e){this.waypoints.sort(t);var n=i.Adapter.inArray(e,this.waypoints);return n?this.waypoints[n-1]:null},n.prototype.queueTrigger=function(t,e){this.triggerQueues[e].push(t)},n.prototype.remove=function(t){var e=i.Adapter.inArray(t,this.waypoints);e>-1&&this.waypoints.splice(e,1)},n.prototype.first=function(){return this.waypoints[0]},n.prototype.last=function(){return this.waypoints[this.waypoints.length-1]},n.findOrCreate=function(t){return r[t.axis][t.name]||new n(t)},i.Group=n}(),function(){"use strict";function t(t){this.$element=e(t)}var e=window.jQuery,n=window.Waypoint;e.each(["innerHeight","innerWidth","off","offset","on","outerHeight","outerWidth","scrollLeft","scrollTop"],(function(e,n){t.prototype[n]=function(){var t=Array.prototype.slice.call(arguments);return this.$element[n].apply(this.$element,t)}})),e.each(["extend","inArray","isEmptyObject"],(function(n,r){t[r]=e[r]})),n.adapters.push({name:"jquery",Adapter:t}),n.Adapter=t}(),function(){"use strict";function t(t){return function(){var n=[],r=arguments[0];return t.isFunction(arguments[0])&&((r=t.extend({},arguments[1])).handler=arguments[0]),this.each((function(){var i=t.extend({},r,{element:this});"string"==typeof i.context&&(i.context=t(this).closest(i.context)[0]),n.push(new e(i))})),n}}var e=window.Waypoint;window.jQuery&&(window.jQuery.fn.waypoint=t(window.jQuery)),window.Zepto&&(window.Zepto.fn.waypoint=t(window.Zepto))}()},function(t,e){!function(){"use strict";function t(r){this.options=e.extend({},n.defaults,t.defaults,r),this.element=this.options.element,this.$element=e(this.element),this.createWrapper(),this.createWaypoint()}var e=window.jQuery,n=window.Waypoint;t.prototype.createWaypoint=function(){var t=this.options.handler;this.waypoint=new n(e.extend({},this.options,{element:this.wrapper,handler:e.proxy((function(e){var n=this.options.direction.indexOf(e)>-1,r=n?this.$element.outerHeight(!0):"";this.$wrapper.height(r),this.$element.toggleClass(this.options.stuckClass,n),t&&t.call(this,e)}),this)}))},t.prototype.createWrapper=function(){this.options.wrapper&&this.$element.wrap(this.options.wrapper),this.$wrapper=this.$element.parent(),this.wrapper=this.$wrapper[0]},t.prototype.destroy=function(){this.$element.parent()[0]===this.wrapper&&(this.waypoint.destroy(),this.$element.removeClass(this.options.stuckClass),this.options.wrapper&&this.$element.unwrap())},t.defaults={wrapper:'<div class="sticky-wrapper" />',stuckClass:"stuck",direction:"down right"},n.Sticky=t}()},function(t,e){angular.module("genius").factory("WebAnnotatorClient",["ApiClient",function(t){return{load_web_page:function(e){return t.returning("web_page").get("/web_pages/:id",{id:e})},protect_web_page:function(e){return t.returning("web_page").post("/web_pages/:id/protect",{id:e})},unprotect_web_page:function(e){return t.returning("web_page").post("/web_pages/:id/unprotect",{id:e})},publish_web_page_drafts:function(e){return t.returning("web_page").post("/web_pages/:id/publish_drafts",{id:e})},load_user_roles:function(e,n){return t.returning("user_web_page_roles").get("/:type/:id/user_roles",{type:e,id:n})},create_user_role:function(e,n,r){return t.returning("user_web_page_role").post("/:type/:id/user_roles",{type:e,id:n,user_web_page_role:r})},update_user_role:function(e,n){return t.returning("user_web_page_role").put("/user_web_page_roles/:id",{id:e,user_web_page_role:n})},destroy_user_role:function(e){return t.delete("/user_web_page_roles/:id",{id:e})}}}])},function(t,e){function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}angular.module("genius").factory("WebAudioPlayer",["$document","$interval",function(t,e){return function(){function r(n){var i=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),this._callback=n,this._audio=t[0].createElement("audio"),e((function(){return i._callback(i.state)}),50)}var i,o,a;return i=r,o=[{key:"pause",value:function(){this._audio.pause(),this._callback(this.state)}},{key:"play",value:function(t){t&&this._audio.src!==t&&(this._audio.src=t,this._audio.currentTime=0),this._audio.play(),this._callback(this.state)}},{key:"seek",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{play:!1},n=e.play;this._audio.currentTime=t/1e3,n&&this._audio.play(),this._callback(this.state)}},{key:"print_log_entries",value:function(){}},{key:"download_log_entries",value:function(){}},{key:"state",get:function(){return{is_playing:!this._audio.paused,position:1e3*this._audio.currentTime,duration:1e3*this._audio.duration,track_uri:this._audio.src}}},{key:"playback_type",get:function(){return"web_audio"}},{key:"playback_label",get:function(){return"Web Audio"}}],o&&n(i.prototype,o),a&&n(i,a),r}()}])},function(t,e,n){"use strict";n.r(e);n(911);angular.module("genius").factory("WebVitals",["$window",function(t){return t.webVitals}])},function(t,e,n){(function(e){t.exports=e.webVitals=n(912)}).call(this,n(1))},function(t,e,n){!function(t){"use strict";var e,n,r,i,o=function(t,e){return{name:t,value:void 0===e?-1:e,delta:0,entries:[],id:"v2-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12)}},a=function(t,e){try{if(PerformanceObserver.supportedEntryTypes.includes(t)){if("first-input"===t&&!("PerformanceEventTiming"in self))return;var n=new PerformanceObserver((function(t){return t.getEntries().map(e)}));return n.observe({type:t,buffered:!0}),n}}catch(t){}},s=function(t,e){var n=function n(r){"pagehide"!==r.type&&"hidden"!==document.visibilityState||(t(r),e&&(removeEventListener("visibilitychange",n,!0),removeEventListener("pagehide",n,!0)))};addEventListener("visibilitychange",n,!0),addEventListener("pagehide",n,!0)},c=function(t){addEventListener("pageshow",(function(e){e.persisted&&t(e)}),!0)},l=function(t,e,n){var r;return function(i){e.value>=0&&(i||n)&&(e.delta=e.value-(r||0),(e.delta||void 0===r)&&(r=e.value,t(e)))}},u=-1,d=function(){return"hidden"===document.visibilityState?0:1/0},p=function(){s((function(t){var e=t.timeStamp;u=e}),!0)},f=function(){return u<0&&(u=d(),p(),c((function(){setTimeout((function(){u=d(),p()}),0)}))),{get firstHiddenTime(){return u}}},_=function(t,e){var n,r=f(),i=o("FCP"),s=function(t){"first-contentful-paint"===t.name&&(d&&d.disconnect(),t.startTime<r.firstHiddenTime&&(i.value=t.startTime,i.entries.push(t),n(!0)))},u=performance.getEntriesByName&&performance.getEntriesByName("first-contentful-paint")[0],d=u?null:a("paint",s);(u||d)&&(n=l(t,i,e),u&&s(u),c((function(r){i=o("FCP"),n=l(t,i,e),requestAnimationFrame((function(){requestAnimationFrame((function(){i.value=performance.now()-r.timeStamp,n(!0)}))}))})))},h=!1,m=-1,g={passive:!0,capture:!0},v=new Date,b=function(t,i){e||(e=i,n=t,r=new Date,$(removeEventListener),y())},y=function(){if(n>=0&&n<r-v){var t={entryType:"first-input",name:e.type,target:e.target,cancelable:e.cancelable,startTime:e.timeStamp,processingStart:e.timeStamp+n};i.forEach((function(e){e(t)})),i=[]}},w=function(t){if(t.cancelable){var e=(t.timeStamp>1e12?new Date:performance.now())-t.timeStamp;"pointerdown"==t.type?function(t,e){var n=function(){b(t,e),i()},r=function(){i()},i=function(){removeEventListener("pointerup",n,g),removeEventListener("pointercancel",r,g)};addEventListener("pointerup",n,g),addEventListener("pointercancel",r,g)}(e,t):b(e,t)}},$=function(t){["mousedown","keydown","touchstart","pointerdown"].forEach((function(e){return t(e,w,g)}))},x=new Set;t.getCLS=function(t,e){h||(_((function(t){m=t.value})),h=!0);var n,r=function(e){m>-1&&t(e)},i=o("CLS",0),u=0,d=[],p=function(t){if(!t.hadRecentInput){var e=d[0],r=d[d.length-1];u&&t.startTime-r.startTime<1e3&&t.startTime-e.startTime<5e3?(u+=t.value,d.push(t)):(u=t.value,d=[t]),u>i.value&&(i.value=u,i.entries=d,n())}},f=a("layout-shift",p);f&&(n=l(r,i,e),s((function(){f.takeRecords().map(p),n(!0)})),c((function(){u=0,m=-1,i=o("CLS",0),n=l(r,i,e)})))},t.getFCP=_,t.getFID=function(t,r){var u,d=f(),p=o("FID"),_=function(t){t.startTime<d.firstHiddenTime&&(p.value=t.processingStart-t.startTime,p.entries.push(t),u(!0))},h=a("first-input",_);u=l(t,p,r),h&&s((function(){h.takeRecords().map(_),h.disconnect()}),!0),h&&c((function(){var a;p=o("FID"),u=l(t,p,r),i=[],n=-1,e=null,$(addEventListener),a=_,i.push(a),y()}))},t.getLCP=function(t,e){var n,r=f(),i=o("LCP"),u=function(t){var e=t.startTime;e<r.firstHiddenTime&&(i.value=e,i.entries.push(t)),n()},d=a("largest-contentful-paint",u);if(d){n=l(t,i,e);var p=function(){x.has(i.id)||(d.takeRecords().map(u),d.disconnect(),x.add(i.id),n(!0))};["keydown","click"].forEach((function(t){addEventListener(t,p,{once:!0,capture:!0})})),s(p,!0),c((function(r){i=o("LCP"),n=l(t,i,e),requestAnimationFrame((function(){requestAnimationFrame((function(){i.value=performance.now()-r.timeStamp,x.add(i.id),n(!0)}))}))}))}},t.getTTFB=function(t){var e,n=o("TTFB");e=function(){try{var e=performance.getEntriesByType("navigation")[0]||function(){var t=performance.timing,e={entryType:"navigation",startTime:0};for(var n in t)"navigationStart"!==n&&"toJSON"!==n&&(e[n]=Math.max(t[n]-t.navigationStart,0));return e}();if(n.value=n.delta=e.responseStart,n.value<0)return;n.entries=[e],t(n)}catch(t){}},"complete"===document.readyState?setTimeout(e,0):addEventListener("pageshow",e)},Object.defineProperty(t,"__esModule",{value:!0})}(e)},function(t,e){angular.module("genius").factory("WindowTitle",["$document",function(t){return{update_count:function(e){var n=e>0?"(".concat(e,") "):"";t[0].title=t[0].title.replace(/^(\(\d+\) )?/,n)}}}])},function(t,e){function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}angular.module("genius").factory("Youtube",["$rootScope","$q","$timeout","$window","getScript","wait_for_global",function(t,e,r,i,o,a){var s={controls:0,enablejsapi:1,fs:0,iv_load_policy:3,modestbranding:1,rel:0,showinfo:0},c=e.defer(),l=c.promise.then((function(){return o("https://www.youtube.com/player_api",{cache:!0})})).then((function(){return a("YT.Player")}));return function(){function o(n,r){var i=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),this.state=t.$new(!0),this.deferred_load=e.defer(),this.player=this.deferred_load.promise.then((function(){return c.resolve(),l})).then((function(o){return e((function(e){var a=new o(n,{height:"100%",width:"100%",playerVars:_.defaults({controls:r.controls?2:0,fs:r.fullscreen?1:0,playsinline:r.playsinline?1:0},s),events:{onReady:function(){e(a)},onStateChange:function(){t.$apply(i.update_state.bind(i))},onError:function(){t.$apply((function(){i.state.has_errored=!0}))}}})}))}))}var a,u,d;return a=o,(u=[{key:"load",value:function(){return this.deferred_load.resolve(),this.player}},{key:"cue_video_by_id",value:function(t,e){var n=this;this.player.then((function(r){r.cueVideoById(t,e),n.state.placeholder="https://i.ytimg.com/vi/".concat(t,"/sddefault.jpg")}))}},{key:"update_state",value:function(){var t=this;this.player.then((function(e){var n=e.getDuration(),o=e.getCurrentTime(),a=n>0?n-o:n;_.assign(t.state,{is_playing:e.getPlayerState()===i.YT.PlayerState.PLAYING,percentage:o/n,time_elapsed:1e3*o,time_remaining:1e3*a}),t.state.is_playing&&(t.state.is_loaded=!0,t.state.is_loading=!1,r(t.update_state.bind(t),500))}))}},{key:"api",get:function(){var t=this;return this._api||(this._api={load_media:function(){return t.state.is_loading=!0,t.load().then((function(){t.state.is_loading=!1,t.state.is_loaded=!0}))},seek_to:function(e){return t.player.then((function(t){t.seekTo(e*t.getDuration())}))},pause:function(){return t.player.then((function(t){t.pauseVideo()}))},playpause:function(){return t.player.then((function(e){e.getPlayerState()!==i.YT.PlayerState.PLAYING?(t.state.has_played=!0,e.playVideo()):e.pauseVideo()}))},mute:function(){return t.player.then((function(t){t.mute()}))}}),this._api}}])&&n(a.prototype,u),d&&n(a,d),o}()}])},function(t,e){angular.module("genius").filter("abbreviateBigNumber",[function(){return function(t){return t>1e6?"".concat(Math.round(t/1e5)/10,"M"):t>1e3?"".concat(Math.round(t/100)/10,"K"):t}}])},function(t,e){angular.module("genius").filter("andMore",[function(){return function(t){return"(and ".concat(t," more)")}}])},function(t,e){angular.module("genius").filter("boundedCount",[function(){return function(t,e){if(t)return e&&Number(t)>=Number(e)?"".concat(e,"+"):t.toString()}}])},function(t,e){angular.module("genius").filter("capitalize",[function(){return _.capitalize}])},function(t,e){angular.module("genius").filter("cast_to_date",[function(){return function(t){return _.isNumber(t)?new Date(1e3*t):_.isString(t)?new Date(t):_.isDate(t)?t:null}}])},function(t,e){angular.module("genius").filter("descriptionAnnotationName",["I18n","modelHumanNameFilter",function(t,e){return function(n){var r=e(n),i=t.t("description_annotation.".concat(n));return"".concat(_.lowerCase(r)," ").concat(i)}}])},function(t,e){angular.module("genius").filter("drop",[function(){return function(t,e){if(t)return e>=0?_.drop(t,e):_.dropRight(t,-e)}}])},function(t,e){angular.module("genius").filter("genericLineItemMessage",["i18nFilter",function(t){return function(e,n){var r=Object.assign({scope:"activemodel.activity_stream_line_item_message.message",defaultKey:"default"},n);return t(e,r)}}])},function(t,e){angular.module("genius").filter("highlight_braced",["$sce","$sanitize",function(t,e){var n=/\[(.+?)\]/g;return function(r){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=i.class_name,a=e(r),s='<span class="'.concat(o,'">$1</span>');return t.trustAsHtml(a.replace(n,s))}}])},function(t,e){angular.module("genius").filter("human_readable_datetime",["$filter",function(t){return function(e,n){return n=n||{weekday:"long",year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",timeZoneName:"short"},t("cast_to_date")(e).toLocaleTimeString("en-US",n)}}])},function(t,e){function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}angular.module("genius").filter("i18n",["I18n","AppConfig",function(t,e){return function(r){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(i.defaultKey&&(i=Object.assign(i,{defaultValue:t.t(i.defaultKey,i)})),"object"===n(r)&&(r=_.findKey(r)),r=r||"__not_found",!t.lookup(r,i)){var o="Missing translation for ".concat(r,"!!!");if("development"===e.env)throw alert(o),new Error(o);return""}return t.t(r,i)}}])},function(t,e){angular.module("genius").filter("imprecise_date",["$filter",function(t){var e=["yyyy","MMMM yyyy","MMMM d, yyyy"];return function(n){if(n){var r=_(n).at("year","month","day").takeWhile().value(),i=new Date(r[0],(r[1]||1)-1,r[2]||1);return t("date")(i,e[r.length-1])}}}])},function(t,e){angular.module("genius").filter("indefinitize",[function(){return function(t){return/^[aeiou]/i.test(t)?"an ".concat(t):"a ".concat(t)}}])},function(t,e){angular.module("genius").filter("millisToDuration",["moment",function(t){return function(e){return t.utc(e).format(e>36e5?"HH:mm:ss":"mm:ss")}}])},function(t,e){angular.module("genius").filter("millisecondsToSeconds",[function(){return function(t){return 1e3*t}}])},function(t,e){function n(t){return function(t){if(Array.isArray(t))return r(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}angular.module("genius").filter("min",[function(){return function(t){return Math.min.apply(Math,n(t))}}])},function(t,e){angular.module("genius").filter("minBy",["$parse",function(t){return function(e,n){var r=t(n);return _.minBy(e,(function(t){return r(t)}))}}])},function(t,e){angular.module("genius").filter("minimum_readable_time",["$window",function(t){var e=245,n=t.location.search.match(/wpm=(\d+)/);n&&(e=Number(n[1]));var r=6e4/e;return function(t){return(t?t.split(/\s+/).length:0)*r}}])},function(t,e){angular.module("genius").filter("minusModulo",[function(){return function(t,e){return t-t%e}}])},function(t,e){angular.module("genius").filter("modelHumanName",["I18n",function(t){return function(e){return t.t("activerecord.models.".concat(e.toLowerCase()))}}])},function(t,e){angular.module("genius").filter("richContentPreview",["truncateToBoundaryFilter",function(t){return function(e){if(e){var n=e.replace(/<[^>]+>/gm,"").trim();return n?t(n,75,{with_ellipsis:!0}):"[]"}}}])},function(t,e){angular.module("genius").filter("roleHumanName",["I18n",function(t){return function(e){return t.t("role.types.".concat(e,".one"))}}])},function(t,e){angular.module("genius").filter("signed_number",[function(){return function(t){return _.isUndefined(t)?0:t&&t>0?"+".concat(t.toString()):t.toString()}}])},function(t,e){angular.module("genius").filter("snakeCase",[function(){return _.snakeCase}])},function(t,e){angular.module("genius").filter("spotify_artist_metadata",["SpotifyClient",function(t){var e={};return function(n){if(!n)return{};var r=e[n];if(r)return r;e[n]={},t.load_artist_metadata(n).then((function(t){e[n]=t}))}}])},function(t,e){angular.module("genius").filter("svg",[function(){return function(t){return"".concat(t,".svg")}}])},function(t,e){angular.module("genius").filter("timestamp_for_display",[function(){var t=function(t,e){return"0000".substring(0,e-t.toString().length)+t};return function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.skip_millis,i=n.always_millis;if(!e&&0!==e)return"";var o=e/1e3,a="".concat(Math.floor(o/60),":").concat(t(Math.floor(o%60),2)),s=Math.floor(e%1e3);return(i||s&&!r)&&(a+=".".concat(t(s,3))),a}}])},function(t,e){angular.module("genius").filter("to_utc",["$filter",function(t){return function(e){return t("cast_to_date")(e).toISOString()}}])},function(t,e){angular.module("genius").filter("truncateToBoundary",[function(){var t="",e=" ";return function(n,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=i.with_ellipsis;if(n){r=o?r-t.length:r;var a=n.substr(0,r);if(n[r]&&n[r]!==e){var s=a.lastIndexOf(e);-1!==s&&(a=a.substr(0,s))}return o&&a.length<n.length&&(a+=t),a}}}])},function(t,e){angular.module("genius").filter("withIndefiniteArticle",[function(){var t=/^[aeiou]/i;return function(e){return"".concat(t.test(e)?"an":"a"," ").concat(e)}}])},function(t,e){angular.module("genius").filter("withoutZeroWidthSpaces",[function(){return function(t){return t.replace(/\u200B/g,"")}}])},function(t,e){angular.module("genius").value("currentFlashMessages",new Array)},function(t,e){angular.module("genius").value("PreloadCache",{})},function(t,e,n){"use strict";n.r(e);n(949);angular.module("genius").value("XpathRange",window.XpathRange)},function(t,e,n){!function t(e,n,r){function i(a,s){if(!n[a]){if(!e[a]){if(o)return o(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[a]={exports:{}};e[a][0].call(l.exports,(function(t){var n=e[a][1][t];return i(n||t)}),l,l.exports,t,e,n,r)}return n[a].exports}for(var o=!1,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(t,e,n){function r(t){return!0}e.exports=function(t,e){var n=[];e=e||r;do{n.push(t),t=t.parentNode}while(t&&t.tagName&&e(t));return n.slice(1)}},{}],2:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}n.__esModule=!0,n.default=function(t,e){if(4!==t.whatToShow)throw new Error("Argument 1 of seek must use filter NodeFilter.SHOW_TEXT.");var n=0,r=t.referenceNode,a=null;if(c=e,!isNaN(parseInt(c))&&isFinite(c))a={forward:function(){return n<e},backward:function(){return n>e}};else{if(!function(t){return 3===t.nodeType}(e))throw new Error("Argument 2 of seek must be a number or a Text Node.");var s=function(t,e){if(t===e)return!1;var n=null,r=[t].concat(i.default(t)).reverse(),a=[e].concat(i.default(e)).reverse();for(;r[0]===a[0];)n=r.shift(),a.shift();r=r[0],a=a[0];var s=o.default(n.childNodes,r),c=o.default(n.childNodes,a);return s>c}(r,e)?function(){return!1}:function(){return r!==e};a={forward:s,backward:function(){return r!=e||!t.pointerBeforeReferenceNode}}}var c;for(;a.forward()&&null!==(r=t.nextNode());)n+=r.nodeValue.length;for(;a.backward()&&null!==(r=t.previousNode());)n-=r.nodeValue.length;return n};var i=r(t("ancestors")),o=r(t("index-of"));e.exports=n.default},{ancestors:1,"index-of":4}],3:[function(t,e,n){e.exports=function t(e){if(r(e))return e;if(r(e.ownerDocument))return e.ownerDocument;if(r(e.document))return e.document;if(e.parentNode)return t(e.parentNode);if(e.commonAncestorContainer)return t(e.commonAncestorContainer);if(e.startContainer)return t(e.startContainer);if(e.anchorNode)return t(e.anchorNode)};function r(t){return t&&9===t.nodeType}},{}],4:[function(t,e,n){"use strict";e.exports=function(t,e,n){n=n||0;if(null==t)return-1;var r=t.length,i=n<0?r+n:n;if(i>=t.length)return-1;for(;i<r;){if(t[i]===e)return i;i++}return-1}},{}],5:[function(t,e,n){e.exports=t("./lib/xpath")},{"./lib/xpath":7}],6:[function(t,e,n){"use strict";n.__esModule=!0;var r=function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.message=e,this.name=n,this.stack=(new Error).stack};n.default=r,(r.prototype=new Error).toString=function(){return this.name+": "+this.message},e.exports=n.default},{}],7:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}n.__esModule=!0,n.fromNode=function(t){var e=arguments.length<=1||void 0===arguments[1]?document:arguments[1],n="/";for(;t!==e;){if(!t){var r="The supplied node is not contained by the root node.",i="InvalidNodeTypeError";throw new o.default(r,i)}n="/"+s(t)+"["+c(t)+"]"+n,t=t.parentNode}return n.replace(/\/$/,"")},n.toNode=function(t){var e=arguments.length<=1||void 0===arguments[1]?document:arguments[1],n=arguments.length<=2||void 0===arguments[2]?null:arguments[2];"function"==typeof e&&(n=e,e=document);e!==document&&(t=t.replace(/^\//,"./"));null===n&&document.lookupNamespaceURI&&(r=i.default(e).documentElement,o=r.lookupNamespaceURI(null)||a,n=function(t){return{_default_:o}[t]||r.lookupNamespaceURI(t)});var r,o;return l(t,e,n)};var i=r(t("get-document")),o=r(t("./dom-exception")),a="http://www.w3.org/1999/xhtml";function s(t){switch(t.nodeName){case"#text":return"text()";case"#comment":return"comment()";case"#cdata-section":return"cdata-section()";default:return t.nodeName.toLowerCase()}}function c(t){for(var e=t.nodeName,n=1;t=t.previousSibling;)t.nodeName===e&&(n+=1);return n}function l(t,e,n){try{return function(t,e,n){return document.evaluate(t,e,n,9,null).singleNodeValue}(t.replace(/\/(?!\.)([^\/:\(]+)(?=\/|$)/g,"/_default_:$1"),e,n)}catch(n){return function(t,e){var n=t.split("/"),r=e;for(;r;){var i=n.shift();if(void 0===i)break;if("."!==i){var o=i.split(/[\[\]]/),a=o[0],s=o[1];r=u(r,a=a.replace("_default_:",""),s=s?parseInt(s):1)}}return r}(t,e)}}function u(t,e,n){for(t=t.firstChild;t;t=t.nextSibling)if(s(t)===e&&0==--n)return t;return null}},{"./dom-exception":6,"get-document":3}],8:[function(t,e,n){e.exports=t("./lib/range")},{"./lib/range":9}],9:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}n.__esModule=!0,n.fromRange=function(t,e){var n=t.startContainer,r=t.startOffset,i=t.endContainer,o=t.endOffset,s=a.fromNode(n,e),c=a.fromNode(i,e);return{start:s,end:c,startOffset:r,endOffset:o}},n.toRange=function(t,e,n,r,s){var c=i.default(s),l=a.toNode(t,s);if(null===l)throw m("start");var u=c.createNodeIterator(l,4),d=e-o.default(u,e);if(l=u.referenceNode,!u.pointerBeforeReferenceNode){if(d>0)throw g("start");d+=l.length}var p=a.toNode(n,s);if(null===p)throw m("end");var f=c.createNodeIterator(p,4),_=r-o.default(f,r);if(p=f.referenceNode,!f.pointerBeforeReferenceNode){if(_>0)throw g("end");_+=p.length}var h=c.createRange();return h.setStart(l,d),h.setEnd(p,_),h;function m(t){var e=new Error("The "+t+" node was not found.");return e.name="NotFoundError",e}function g(t){var e=new Error("There is no text at the requested "+t+" offset.");return e.name="IndexSizeError",e}};var i=r(t("get-document")),o=r(t("dom-seek")),a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(t("simple-xpath-position"))},{"dom-seek":2,"get-document":3,"simple-xpath-position":5}],10:[function(t,e,n){window.XpathRange=t("xpath-range")},{"xpath-range":8}]},{},[10])},function(t,e){window["com.genius.Genius"]||(window["com.genius.Genius"]={},window.require=function(){return window["com.genius.Genius"].require.apply(this,arguments)})},function(t,e,n){(function(t,e){!function(t,n){"use strict";if(!t.setImmediate){var r,i,o,a,s,c=1,l={},u=!1,d=t.document,p=Object.getPrototypeOf&&Object.getPrototypeOf(t);p=p&&p.setTimeout?p:t,"[object process]"==={}.toString.call(t.process)?r=function(){var t=f(arguments);return e.nextTick(_(h,t)),t}:!function(){if(t.postMessage&&!t.importScripts){var e=!0,n=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=n,e}}()?t.MessageChannel?((o=new MessageChannel).port1.onmessage=function(t){h(t.data)},r=function(){var t=f(arguments);return o.port2.postMessage(t),t}):d&&"onreadystatechange"in d.createElement("script")?(i=d.documentElement,r=function(){var t=f(arguments),e=d.createElement("script");return e.onreadystatechange=function(){h(t),e.onreadystatechange=null,i.removeChild(e),e=null},i.appendChild(e),t}):r=function(){var t=f(arguments);return setTimeout(_(h,t),0),t}:(a="setImmediate$"+Math.random()+"$",s=function(e){e.source===t&&"string"==typeof e.data&&0===e.data.indexOf(a)&&h(+e.data.slice(a.length))},t.addEventListener?t.addEventListener("message",s,!1):t.attachEvent("onmessage",s),r=function(){var e=f(arguments);return t.postMessage(a+e,"*"),e}),p.setImmediate=r,p.clearImmediate=m}function f(t){return l[c]=_.apply(n,t),c++}function _(t){var e=[].slice.call(arguments,1);return function(){"function"==typeof t?t.apply(n,e):new Function(""+t)()}}function h(t){if(u)setTimeout(_(h,t),0);else{var e=l[t];if(e){u=!0;try{e()}finally{m(t),u=!1}}}}function m(t){delete l[t]}}("undefined"==typeof self?void 0===t?this:t:self)}).call(this,n(1),n(86))},function(t,e,n){var r=n(953);r.keys().forEach(r)},function(t,e,n){var r={"./alert.svg":954,"./apple.svg":955,"./apple_music_logo.svg":956,"./at_symbol.svg":957,"./between-the-lines.svg":958,"./billboard.svg":959,"./blockquote.svg":960,"./bts.svg":961,"./calendar.svg":962,"./centerstage.svg":963,"./checkmark.svg":964,"./checky.svg":965,"./circle.svg":966,"./clear_downvotes.svg":967,"./clear_upvotes.svg":968,"./clock.svg":969,"./comment.svg":970,"./deconstructed.svg":971,"./double_iq_flair.svg":972,"./down_arrow.svg":973,"./drag.svg":974,"./envelope.svg":975,"./expand.svg":976,"./expand_alt.svg":977,"./external.svg":978,"./eye.svg":979,"./eye_cross.svg":980,"./facebook.svg":981,"./fact_track_icon.svg":982,"./fire.svg":983,"./flag.svg":984,"./for-the-record.svg":985,"./framework.svg":986,"./gear.svg":987,"./genius-level.svg":988,"./genius-test.svg":989,"./google.svg":990,"./hamburger.svg":991,"./instagram.svg":992,"./instagram_reels.svg":993,"./irl.svg":994,"./left_arrow.svg":995,"./lightning.svg":996,"./line_graph.svg":997,"./lock.svg":998,"./logo.svg":999,"./magnifying_glass.svg":1e3,"./music_notes_crossout.svg":1001,"./new_message.svg":1002,"./news.svg":1003,"./no_document.svg":1004,"./one_document.svg":1005,"./open-mic.svg":1006,"./pause_compact.svg":1007,"./pause_transparent.svg":1008,"./pencil.svg":1009,"./people.svg":1010,"./phone.svg":1011,"./pin.svg":1012,"./play.svg":1013,"./play_compact.svg":1014,"./play_transparent.svg":1015,"./playstore.svg":1016,"./rewind.svg":1017,"./right_arrow.svg":1018,"./role_icon_contributor_equilateral_triangle.svg":1019,"./role_icon_editor_star.svg":1020,"./role_icon_mediator_square.svg":1021,"./role_icon_moderator_diamond.svg":1022,"./role_icon_staff_circle.svg":1023,"./role_icon_transcriber_square.svg":1024,"./sgnarly.svg":1025,"./share.svg":1026,"./share_android.svg":1027,"./soundcloud.svg":1028,"./spotify.svg":1029,"./star.svg":1030,"./tag.svg":1031,"./tap.svg":1032,"./ten.svg":1033,"./the-cosign.svg":1034,"./thumbs_down.svg":1035,"./thumbs_up.svg":1036,"./twitter.svg":1037,"./two_documents.svg":1038,"./unlock.svg":1039,"./up_arrow.svg":1040,"./upload_image.svg":1041,"./verified.svg":1042,"./wordmark.svg":1043,"./x.svg":1044,"./x_small.svg":1045,"./youtube.svg":1046};function i(t){var e=o(t);return n(e)}function o(t){if(!n.o(r,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return r[t]}i.keys=function(){return Object.keys(r)},i.resolve=o,t.exports=i,i.id=953},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("alert.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 19.8"><path d="M11 4.12l7.6 13.68H3.4L11 4.12M11 0L0 19.8h22L11 0z"/><path d="M10 8.64h2v4.51h-2zm1 5.45a1.13 1.13 0 0 1 1.13 1.15A1.13 1.13 0 1 1 11 14.09z"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("apple.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 17 20"><path d="M16.493 15.586a10.88 10.88 0 01-1.075 1.933c-.565.807-1.028 1.365-1.385 1.674-.553.509-1.146.77-1.78.784-.456 0-1.005-.13-1.645-.392-.641-.262-1.23-.392-1.77-.392-.565 0-1.172.13-1.82.392-.65.263-1.173.4-1.573.413-.609.026-1.215-.242-1.82-.805-.387-.337-.87-.914-1.45-1.733-.62-.874-1.132-1.888-1.532-3.043C.215 13.169 0 11.96 0 10.79c0-1.34.29-2.496.87-3.465a5.102 5.102 0 011.82-1.842 4.9 4.9 0 012.463-.695c.483 0 1.117.15 1.905.443.785.295 1.29.444 1.51.444.166 0 .726-.175 1.676-.523.898-.323 1.656-.457 2.277-.404 1.682.135 2.947.799 3.787 1.994-1.505.912-2.249 2.189-2.234 3.827.014 1.276.476 2.338 1.386 3.181a4.56 4.56 0 001.385.909c-.11.322-.228.63-.353.927zM12.634.4c0 1-.365 1.934-1.094 2.799-.879 1.027-1.942 1.621-3.095 1.527a3.114 3.114 0 01-.023-.379c0-.96.418-1.987 1.16-2.828A4.472 4.472 0 0110.996.458c.57-.278 1.11-.432 1.617-.458.015.134.021.267.021.4z" /></svg>')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("apple_music_logo.svg",'<svg viewBox="0 0 47 11" xmlns="http://www.w3.org/2000/svg"><path d="M42.13 7.288v-.894c0-1.544.678-2.303 1.68-2.303 1.003 0 1.545.759 1.545 1.599h1.625v-.163c0-1.544-1.192-2.845-3.197-2.845-2.113 0-3.386 1.382-3.386 3.712v.894c0 2.33 1.246 3.712 3.386 3.712 2.032 0 3.197-1.3 3.197-2.764v-.162h-1.625c0 .84-.515 1.517-1.545 1.517-1.03-.054-1.68-.758-1.68-2.303zm-5.174 3.522h1.707V2.818h-1.707v7.992zm-6.15-5.852c0-.623.514-1.002 1.327-1.002.921 0 1.382.514 1.436 1.083h1.598c-.027-1.408-1.219-2.41-3.007-2.41-1.707 0-3.034.866-3.034 2.438 0 1.354.948 2.004 2.059 2.248l1.192.271c.813.19 1.22.434 1.22 1.003 0 .623-.516 1.056-1.464 1.056-1.03 0-1.544-.514-1.599-1.11H28.91c.027 1.137.786 2.465 3.143 2.465 1.978 0 3.224-.975 3.224-2.547 0-1.463-1.003-2.032-2.168-2.276l-1.219-.27c-.731-.163-1.084-.488-1.084-.949zm-3.333 3.143V2.818h-1.707v5.04c0 1.083-.65 1.679-1.571 1.679-.949 0-1.599-.596-1.599-1.68v-5.04h-1.68v5.284c0 1.707 1.247 2.872 3.279 2.872s3.278-1.165 3.278-2.872zm-9.754 2.71h1.545V2.817H17.53l-2.222 4.958h-.054l-2.222-4.958h-1.734v8.02h1.517V5.634h.082l1.842 4.119h1.057l1.842-4.119h.081v5.175zM8.155 7.558c-.488-.46-.731-1.057-.731-1.734-.027-.894.379-1.598 1.165-2.086-.46-.65-1.111-1.003-2.005-1.084-.325-.027-.705.054-1.192.217-.515.19-.813.298-.894.298-.136 0-.407-.081-.786-.244-.38-.19-.732-.27-1.003-.27a2.5 2.5 0 0 0-1.3.378A2.418 2.418 0 0 0 .46 4.037C.163 4.552 0 5.202 0 5.933a6.3 6.3 0 0 0 .325 1.978c.217.623.488 1.192.813 1.653.298.434.542.759.759.948.325.298.623.46.948.434.217 0 .488-.081.84-.244.325-.135.65-.217.948-.217.298 0 .596.082.921.217.352.135.65.217.867.217.325-.027.65-.163.948-.434.109-.081.217-.217.326-.352.108-.163.243-.325.406-.542.108-.162.19-.325.298-.488a2.76 2.76 0 0 0 .271-.569c.027-.08.081-.162.108-.243.027-.082.055-.163.082-.271-.244-.082-.488-.271-.705-.46zM6.042 1.761c.38-.488.569-.975.569-1.544V0c-.271.027-.542.108-.867.244a3.269 3.269 0 0 0-.759.569c-.38.46-.596.948-.596 1.49v.217c.65.054 1.165-.19 1.653-.759z"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("at_symbol.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 21.88 21.78"><path d="M11.34 0C4.77 0 0 4.65 0 11.05a10.61 10.61 0 0 0 11 10.73 10.58 10.58 0 0 0 4.67-1v-2.12A9 9 0 0 1 11 19.83 8.72 8.72 0 0 1 2.2 11a8.87 8.87 0 0 1 9.09-9.06 8.35 8.35 0 0 1 8.52 8.16c0 2.86-.89 4.63-2.31 4.63-.73 0-1.59-.31-1.59-1.8V5.59h-1.85v1.08l-.41-.33a4.84 4.84 0 0 0-3.09-1A5.47 5.47 0 0 0 5.2 11a5.32 5.32 0 0 0 5.49 5.62 4.86 4.86 0 0 0 3.6-1.42l.24-.25.17.3a2.89 2.89 0 0 0 2.66 1.37c2.74 0 4.52-2.56 4.52-6.52C21.88 4 16.43 0 11.34 0zm2.6 13.36l-.16.2a3.88 3.88 0 0 1-2.75 1A3.39 3.39 0 0 1 7.5 10.9a3.43 3.43 0 0 1 3.58-3.6 4.32 4.32 0 0 1 2.81 1z"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("between-the-lines.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1287 414"><path d="M12.71 0h69.17c52.38 0 76.03 8.64 76.03 43.99 0 36.62-26.45 33.31-45.77 35.09v11.7c27.21 1.27 58.99.25 58.99 40.94 0 42.47-41.45 47.55-89.51 47.55H12.71V0zm76.04 64.59c11.44 0 20.6 1.78 20.6-10.93 0-11.7-9.15-10.93-20.6-10.93H61.28V64.6h27.47zm-.26 71.96c21.61 0 34.08 2.03 34.08-14.5 0-17.55-12.46-14.75-34.08-14.75H61.28v29.24h27.21zM251.99 47.55c41.7 0 71.2 25.68 71.2 62.81v12.46h-96.37c-.51 12.97 9.66 21.61 29.75 21.61 11.44 0 20.85-4.83 22.63-10.93h48.57c-1.53 18.31-24.92 48.31-71.2 48.31-51.11 0-75.01-32.29-75.01-68.66 0-40.17 28.73-65.6 70.43-65.6zm25.94 54.67c0-8.14-5.09-15.26-25.94-15.26-21.11 0-25.17 7.12-25.17 15.26h51.11zM462.97 136.55v42.72l-73.74 2.54c-15 .51-23.39-8.39-23.39-23.39v-65.6H334.3V50.09h31.53V29.24l48.57-15.26v36.11h43.49v42.72H414.4v46.28l48.57-2.54zM519.34 50.09l10.93 117.22h11.7l3.56-117.22H647.5l3.56 117.22h11.95L674.2 50.09h46.28l-12.72 129.18H606.05l-3.56-117.48h-11.95l-3.56 117.48H485.27L472.81 50.09h46.53zM800.43 47.55c41.7 0 71.2 25.68 71.2 62.81v12.46h-96.37c-.51 12.97 9.66 21.61 29.75 21.61 11.44 0 20.85-4.83 22.63-10.93h48.57c-1.53 18.31-24.92 48.31-71.2 48.31-51.11 0-75.01-32.29-75.01-68.66-.01-40.17 28.72-65.6 70.43-65.6zm25.93 54.67c0-8.14-5.09-15.26-25.94-15.26-21.11 0-25.18 7.12-25.18 15.26h51.12zM959.24 47.55c41.7 0 71.2 25.68 71.2 62.81v12.46h-96.37c-.51 12.97 9.66 21.61 29.75 21.61 11.44 0 20.85-4.83 22.63-10.93h48.57c-1.53 18.31-24.92 48.31-71.2 48.31-51.11 0-75.01-32.29-75.01-68.66 0-40.17 28.73-65.6 70.43-65.6zm25.94 54.67c0-8.14-5.09-15.26-25.94-15.26-21.1 0-25.17 7.12-25.17 15.26h51.11zM1101.67 134.77v44.5h-48.57V50.09h48.57v12.97l-9.41 26.19h11.95c5.09-22.89 20.85-41.7 48.32-41.7 34.33 0 55.18 23.39 55.18 65.35v66.37h-48.82v-58.49c0-22.38-5.34-30.51-24.16-30.51-19.84 0-33.06 7.63-33.06 44.5zM128.67 368.47v42.72l-73.74 2.54c-15 .51-23.39-8.39-23.39-23.39v-65.6H0v-42.72h31.53v-20.85l48.57-15.26v36.11h43.48v42.72H80.1v46.28l48.57-2.55zM303 344.82v66.37h-48.82V352.7c0-22.38-5.34-30.51-24.15-30.51-19.84 0-33.06 7.63-33.06 44.5v44.5H148.4v-186.9h48.57v70.69l-9.41 26.19h11.95c5.09-22.89 20.85-41.7 48.31-41.7 34.33 0 55.18 23.4 55.18 65.35zM385.13 279.47c41.7 0 71.2 25.68 71.2 62.81v12.46h-96.37c-.51 12.97 9.67 21.61 29.75 21.61 11.44 0 20.85-4.83 22.63-10.93h48.57c-1.53 18.31-24.92 48.31-71.2 48.31-51.11 0-75.01-32.29-75.01-68.66-.01-40.17 28.73-65.6 70.43-65.6zm25.94 54.67c0-8.14-5.09-15.26-25.94-15.26-21.1 0-25.18 7.12-25.18 15.26h51.12zM549.65 389.83V231.92h48.57v139.1l85.95-2.54v42.72l-110.11 2.54c-15.77.25-24.41-8.14-24.41-23.91zM696.47 368.47h35.6v-45.01l-32.29 1.27v-42.72l56.45-2.54c15.51-.76 24.67 8.14 24.67 24.16v64.84h35.85v42.72H696.47v-42.72zm32.04-118.24c0-14.24 9.41-20.85 24.67-20.85 15.26 0 25.68 6.61 25.68 20.85 0 14.75-10.42 20.85-25.68 20.85s-24.67-6.1-24.67-20.85zM879.83 366.69v44.5h-48.57V282.02h48.57v12.97l-9.41 26.19h11.95c5.09-22.89 20.85-41.7 48.32-41.7 34.33 0 55.18 23.39 55.18 65.35v66.37h-48.82v-58.49c0-22.38-5.34-30.51-24.16-30.51-19.83-.01-33.06 7.62-33.06 44.49zM1068 279.47c41.7 0 71.2 25.68 71.2 62.81v12.46h-96.37c-.51 12.97 9.66 21.61 29.75 21.61 11.44 0 20.85-4.83 22.63-10.93h48.57c-1.53 18.31-24.92 48.31-71.2 48.31-51.11 0-75.01-32.29-75.01-68.66-.01-40.17 28.73-65.6 70.43-65.6zm25.94 54.67c0-8.14-5.09-15.26-25.94-15.26-21.11 0-25.18 7.12-25.18 15.26h51.12zM1222.34 413.74c-49.84 0-71.45-19.07-71.45-49.08h48.57c0 5.09 4.58 13.98 24.67 13.98 7.88 0 13.48-1.02 13.48-5.34 0-3.3-3.31-4.07-23.9-11.19-23.9-8.14-56.96-14.24-56.96-45.26 0-24.16 21.87-37.38 58.49-37.38 43.23 0 66.62 21.61 66.62 48.06h-48.57c0-5.85-5.85-12.97-17.29-12.97-7.88 0-10.68 1.27-10.68 4.58 0 6.1 14.24 8.65 34.58 15.26 24.92 8.14 46.28 15.76 46.28 40.18-.01 22.63-17.05 39.16-63.84 39.16z"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("billboard.svg",'<svg viewBox="0 0 77 16" xmlns="http://www.w3.org/2000/svg"><path d="M11.807 4.86h3.59v10.92h-3.59zM16.14.59h3.59v15.19h-3.59zm4.333 0h3.59v15.19h-3.59zm42.225 5.397V4.86h-3.59v10.92h3.59v-5.205c0-1.338.7-2.06 1.975-2.06h.425v-3.76c-1.084.042-1.87.382-2.4 1.232zM13.602 0c-1.15 0-2.08.932-2.08 2.082s.93 2.082 2.08 2.082 2.082-.933 2.082-2.082C15.684.932 14.752 0 13.602 0zm41.172 5.692c-.505-.55-1.68-1.005-2.57-1.005-2.71 0-4.656 1.788-5.132 4.445-.52-2.55-2.74-4.51-5.45-4.51-2.735 0-4.975 1.983-5.465 4.58-.475-2.7-2.598-4.488-5.23-4.488-.978 0-1.785.213-2.487.7V.594h-3.59V15.78h3.527v-.998c.85.787 1.763 1.148 2.89 1.148 2.424 0 4.466-1.9 4.903-4.515.514 2.56 2.723 4.507 5.452 4.507 2.706 0 4.876-1.905 5.428-4.4.456 2.725 2.616 4.43 5.196 4.43.892 0 1.87-.3 2.528-.787v.616h3.59v-4.777c0-.196-.002-.387-.006-.573.004-.188.005-.38.005-.575V4.88h-3.59v.812zm-24.23 6.762c-1.15 0-2.082-.932-2.082-2.082s.932-2.08 2.082-2.08 2.082.93 2.082 2.08-.933 2.082-2.082 2.082zm11.078-.166c-1.15 0-2.082-.933-2.082-2.083 0-1.15.933-2.08 2.082-2.08 1.15 0 2.08.93 2.08 2.08s-.93 2.083-2.08 2.083zm10.787.066c-1.15 0-2.083-.933-2.083-2.083 0-1.147.93-2.08 2.08-2.08s2.082.933 2.082 2.08c0 1.15-.93 2.085-2.08 2.085zM73.063.59v4.82c-.7-.49-1.508-.7-2.486-.7-2.995 0-5.33 2.314-5.33 5.65 0 3.143 2.25 5.565 4.99 5.565 1.126 0 2.04-.362 2.89-1.148v.998h3.526V.588h-3.59zM70.95 12.426c-1.15 0-2.08-.932-2.08-2.08 0-1.15.93-2.083 2.08-2.083s2.082.932 2.082 2.082-.933 2.08-2.083 2.08zM6.075 4.714c-.977 0-1.784.213-2.486.7V.594H0V15.78h3.526v-.998c.85.787 1.763 1.148 2.89 1.148 2.74 0 4.99-2.423 4.99-5.566 0-3.334-2.336-5.65-5.33-5.65zm-.382 7.74c-1.15 0-2.08-.932-2.08-2.082s.93-2.08 2.08-2.08 2.082.93 2.082 2.08-.932 2.082-2.082 2.082z"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("blockquote.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 22"><path d="M15 10.47h1.7v4.3h-4.4v-3.75c0-2.78.63-5.3 4.39-5.52v2.22c-1.26 0-1.69.88-1.69 2.75zm-7 0h1.7v4.3H5.3v-3.75c0-2.78.63-5.3 4.39-5.52v2.22C8.43 7.72 8 8.6 8 10.47z"/><path d="M20.09 1.91v18.18H1.91V1.91h18.18M22 0H0v22h22V0z"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("bts.svg",'<svg viewBox="0 0 480 192" xmlns="http://www.w3.org/2000/svg"><path d="M480 5.326H5.323V192H0V0h480v5.326zM33.49 82.383V34.007h20.83c12.348 0 16.216 7.292 16.216 13.285 0 5.85-3.273 9.387-6.025 10.542 3.423.794 7.663 4.91 7.663 10.614 0 7.798-4.984 13.935-17.11 13.935h-21.57zm9.895-20.65v12.275h11.53c5.132 0 7.438-2.24 7.438-6.282 0-3.466-2.454-5.993-7.513-5.993H43.385zm9.82-19.35h-9.82v11.624H53.8c4.388 0 6.99-1.877 6.99-6.137 0-3.105-2.23-5.488-7.586-5.488zm26.953-8.376h35.26v8.375H90.052v10.326h23.655v8.375H90.052v12.925h25.738v8.375H80.158V34.007zm85.87 48.376h-9.82V61.01H134.04v21.373h-9.893V34.007h9.894v18.628h22.17V34.007h9.82v48.376zm20.63 0h-9.893V34.007h9.894v48.376zm20.484-24.116v24.116h-9.745V34.007h9.596l17.48 26.065c2.68 4.044 4.092 6.354 5.208 8.015h.076c-.074-1.805-.148-5.92-.148-9.46v-24.62h9.744v48.376h-9.595L212.2 56.823c-2.008-2.96-4.165-6.498-5.133-8.014h-.074c.074 1.803.15 5.92.15 9.456zm42.948-24.26h15.844c19.043 0 26.184 11.625 26.184 24.332 0 15.522-9.15 24.042-26.11 24.042H250.09V34.007zm16.216 8.375h-6.546v31.626h6.546c10.19 0 15.92-4.116 15.92-15.67 0-11.262-6.175-15.956-15.92-15.956zM55.798 161.014h-9.92v-42.34H29.77v-8.866h42.138v8.865h-16.11v42.34zm64.464 0h-9.845v-22.622H88.193v22.622h-9.92v-51.206h9.92v19.718h22.224v-19.718h9.845v51.206zm10.766-51.206h35.35v8.865h-25.43v10.93h23.716v8.865h-23.717v13.68h25.805v8.866h-35.724v-51.206zm75.08 18.954l6.564 2.522c7.98 3.057 11.783 7.413 11.783 15.285 0 9.093-6.935 15.82-18.495 15.82-5.594 0-11.038-1.377-15.215-4.05v-9.784h.746c2.836 2.675 8.877 4.815 13.576 4.815 6.786 0 9.47-3.21 9.47-6.572 0-3.67-2.236-5.35-6.785-7.11l-6.413-2.368c-6.04-2.293-11.486-6.115-11.486-14.675 0-7.337 6.714-14.215 17.75-14.215 5.67 0 10.293 1.834 12.605 3.44v9.553h-.745c-2.388-2.14-6.937-3.975-11.785-3.975-4.997 0-7.905 2.293-7.905 5.12 0 3.364 1.79 4.587 6.34 6.192zm64.39 19.412h.746v9.707c-3.58 2.677-9.1 4.51-16.26 4.51-15.735 0-26.55-11.463-26.55-26.98 0-15.513 11.337-26.977 26.55-26.977 6.34 0 12.083 2.063 15.365 4.51v9.63h-.748c-3.58-3.134-8.8-5.122-14.17-5.122-9.397 0-17.08 7.797-17.08 17.96 0 11.237 8.727 17.886 17.08 17.886 6.264 0 11.41-1.68 15.065-5.12zm8.603-38.366h35.353v8.865H289.02v10.93h23.717v8.865H289.02v13.68h25.805v8.866H279.1v-51.206zm53.876 25.68v25.526h-9.77v-51.206h9.62l17.527 27.59c2.685 4.28 4.102 6.726 5.22 8.484h.075c-.075-1.91-.15-6.268-.15-10.012v-26.062h9.77v51.206h-9.62l-17.6-27.055c-2.015-3.136-4.178-6.88-5.147-8.486h-.074c.075 1.91.15 6.267.15 10.012zm43.06-25.68h35.35v8.865h-25.432v10.93h23.716v8.865h-23.717v13.68h25.805v8.866h-35.724v-51.206zm57.75 18.954l6.563 2.522c7.98 3.057 11.783 7.413 11.783 15.285 0 9.093-6.936 15.82-18.496 15.82-5.593 0-11.038-1.377-15.214-4.05v-9.784h.746c2.833 2.675 8.874 4.815 13.572 4.815 6.788 0 9.473-3.21 9.473-6.572 0-3.67-2.238-5.35-6.787-7.11l-6.414-2.368c-6.04-2.293-11.485-6.115-11.485-14.675 0-7.337 6.71-14.215 17.75-14.215 5.667 0 10.29 1.834 12.603 3.44v9.553h-.745c-2.387-2.14-6.936-3.975-11.784-3.975-4.995 0-7.904 2.293-7.904 5.12 0 3.364 1.79 4.587 6.34 6.192z" fill="#FFF"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("calendar.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 21.98"><path d="M18.18 3.64V0h-1.91v3.64H5.73V0H3.82v3.64H0V22h22V3.64zm1.91 16.43H1.91V5.55h18.18z"/><path d="M7.18 17.3h1.43v-.65h4.77v.65h1.43v-.65h2.77v-1.43h-2.76v-1.7h2.77v-1.44h-2.77V10.4h2.77V9h-2.77v-.68h-1.43V9H8.61v-.68H7.18V9H4.42v1.4h2.76v1.68H4.42v1.43h2.76v1.7H4.42v1.43h2.76zm1.43-6.9h4.77v1.68H8.61zm0 3.11h4.77v1.7H8.61z"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("centerstage.svg",'<svg viewBox="0 0 875 168"><path d="M70.1 109.804l-4.698 22.56c-1.8 6.688-4.498 12.777-7.797 17.868-3.399 4.492-7.198 8.684-12.296 12.078-5.398 3.793-11.895 5.59-19.692 5.59-7.797 0-13.695-1.797-17.694-5.59-3.798-3.394-5.798-7.586-6.697-12.078-1.6-5.191-1.6-10.98-.2-17.868l20.592-96.827c1.6-6.489 3.999-12.279 7.597-17.669 3.4-4.492 6.898-8.984 12.096-12.278C46.509 2.196 53.206 0 61.203 0 69.3 0 74.898 2.196 78.697 5.59c3.798 3.394 5.998 7.786 6.897 12.278 1.6 4.891 1.6 10.78.4 17.669l-4.898 22.56H58.504l4.899-22.56c.9-4.293.4-7.787-1.6-10.282-.9-1.098-2.699-1.797-5.198-1.797-4.298 0-6.897 3.095-8.697 5.99-.7 1.597-1.599 3.593-2.199 5.989l-20.592 96.827c-.7 4.292-.2 7.786 1.6 10.281.899 1.098 2.198 1.797 4.298 1.797 5.198 0 7.797-2.695 9.596-5.99.7-1.297 1.6-3.393 2.2-5.988l4.698-22.56H70.1zM109.985 1.797h55.28l-5.398 24.855h-31.089l-9.196 43.123h22.391l-5.598 26.353h-22.391l-9.597 45.22h31.089l-5.198 24.855h-55.28L109.985 1.797zm79.67 78.66l-.4-7.587h-1.299l-19.692 93.233h-22.192L181.059 1.697h21.492l5.198 85.647.4 7.586h1.3L229.34 1.697h22.191l-34.986 164.406h-21.492l-5.398-85.647zm68.075-53.904l5.398-24.856h69.874l-5.398 24.856h-22.891l-29.59 139.55h-24.19l29.589-139.55H257.73zm86.968-24.756h55.28l-5.399 24.855h-31.088l-9.197 43.123h22.392l-5.598 26.353h-22.392l-9.596 45.22h31.088l-5.198 24.855h-55.28L344.699 1.797zm79.27 164.306l2-69.376h-6.498l-14.595 69.376h-24.19L415.67 1.697h24.191c28.89 0 37.586 16.071 31.089 47.415-3.599 16.371-10.996 31.045-21.492 37.334l-1.3 79.657h-24.19zm.4-91.636c3.399 0 7.797-.2 12.096-3.594 4.298-3.393 8.496-9.183 10.995-20.762 2.5-11.68.9-17.669-1.999-21.063-2.899-3.394-7.397-3.394-10.796-3.394l-10.296 48.813zm105.06-28.649c1.1-5.39 2.2-11.38 1.6-16.071-.7-4.492-2.499-7.587-6.297-7.587-6.298.2-9.597 6.688-11.696 16.371-1.1 5.59-.2 11.38 2.2 17.669 2.498 6.288 5.397 12.777 8.696 19.665 4.298 8.285 7.597 16.77 10.296 25.055 2.5 8.285 3.599 16.77 1.6 25.754-2.5 10.98-5.998 21.062-12.996 28.848-6.997 7.786-15.894 12.478-29.389 12.478-15.494 0-23.091-5.79-25.99-14.774-3.399-8.984-1.6-20.563.9-33.14l24.19-2.197c-1.599 6.888-2.698 13.876-1.999 18.967.7 5.39 2.5 8.984 7.598 8.984 7.197 0 11.195-7.587 13.694-18.068 1.1-5.39 0-11.68-2.499-18.068-.7-1.597-1.3-3.394-1.999-4.891-.7-1.597-1.3-3.394-2-4.891-1.599-3.394-3.398-6.888-5.197-10.781-1.8-3.893-3.599-7.587-5.398-11.879-3.799-8.485-5.798-16.97-6.498-25.455-.7-4.292 0-8.684.9-13.176 1.8-8.984 5.798-18.567 12.795-25.954C508.437 5.49 517.433.4 528.83.2c14.994-.2 21.992 5.79 24.89 14.574 2.7 8.984 1.8 19.864-.2 29.048l-24.09 1.996zm34.488-19.265l5.398-24.856h69.874l-5.398 24.856h-22.892l-29.489 139.55h-24.19l29.588-139.55h-22.891zm45.283 139.55L668.977 1.697h29.589L688.47 166.103h-23.492l2.5-33.54h-23.292l-11.396 33.54H609.2zm64.476-110.902l.2-4.292h-1.3l-1.599 4.292-17.893 51.908h16.594l3.998-51.908zm89.367 5.59l5.398-25.254c.9-4.492.4-7.787-1.1-10.282-.9-1.098-2.499-1.797-4.498-1.797-4.299 0-6.898 3.095-8.497 5.99-.9 1.796-1.6 3.793-2 5.989l-21.091 98.823c-1.1 4.293-.7 7.786 1.1 10.282.899 1.098 2.198 1.797 4.298 1.797 4.298 0 6.897-2.696 8.496-5.99.7-1.297 1.6-3.394 2.2-5.989l6.297-29.747h-9.596l4.298-20.363h33.788l-17.294 81.853h-14.295l-1.3-7.786c-5.597 5.59-12.994 9.583-20.791 9.583-7.797 0-12.796-1.996-16.094-5.59-3.4-3.394-5.198-7.586-5.798-12.078-1.1-5.191-.7-10.98 1.1-17.868l20.592-96.827c1.6-6.489 3.998-12.279 7.597-17.669 3.399-4.492 6.897-8.984 12.095-12.278C753.145 2.196 759.843 0 767.84 0c8.097 0 13.695 2.196 17.493 5.59 3.799 3.394 5.998 7.786 6.898 12.278 1.6 4.891 1.6 10.78.4 17.669l-5.398 25.254h-24.191zM819.72 1.797H875l-5.398 24.855h-31.088l-9.197 43.123h22.392l-5.598 26.353h-22.392l-9.596 45.22h31.088l-5.198 24.855h-55.28L819.722 1.797z" fill="#fff"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("checkmark.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 16.2"><path d="M8.83 16.2L0 7.97l2.06-2.21 6.62 6.17L19.79 0 22 2.06 8.83 16.2"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("checky.svg",'<svg width="11" height="11" viewBox="0 0 11 11" xmlns="http://www.w3.org/2000/svg"><path fill="#27F145" d="M0 0h11v11H0z"/><path fill="#FFF" d="M4.764 5.9l-2-2L1.35 5.314l3.414 3.414 4.914-4.914L8.264 2.4"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("circle.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="64 0 20 20"><circle cx="74" cy="10" r="9"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("clear_downvotes.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22.24 22.9"><path d="M10.9 16.73c-1.08 2.74-1.9 4.14-2.38 4.14-.95-.54.25-3.36.7-4.43a4.29 4.29 0 0 0 .48-1.51 2.61 2.61 0 0 0-2.61-2.39H3c-.27 0-.37-.1-.37-.32 0-.43.75-2.6 1.62-5.12L2.67 5.53a47.05 47.05 0 0 0-2 6.65A2.29 2.29 0 0 0 3 14.54h4.1a.78.78 0 0 1 .6.36c-.06.17-.2.5-.31.77-.82 1.93-2.34 5.53.16 6.95a2.13 2.13 0 0 0 1.06.29 2 2 0 0 0 .69-.12c1.5-.53 2.43-2.62 3.49-5.31.16-.42.37-.92.54-1.31l-1.48-1.48a15.53 15.53 0 0 0-.95 2.04zm3.38-13.12v7.88l2 2V1.61H5.72a2.36 2.36 0 0 0-1.05.26l1.74 1.74zm3.1-2.08h4.86v12.96h-4.86zM-.007 1.41L1.407-.002l20.485 20.485-1.415 1.414z"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("clear_upvotes.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22.24 22.9"><path d="M11.34 6.17C12.42 3.43 13.2 2 13.72 2c.95.54-.25 3.36-.7 4.43A4.29 4.29 0 0 0 12.55 8a2.61 2.61 0 0 0 2.61 2.39h4.1c.27 0 .37.1.37.32 0 .43-.75 2.6-1.62 5.12l1.57 1.57a47.05 47.05 0 0 0 2-6.65 2.29 2.29 0 0 0-2.37-2.37h-4.1a.78.78 0 0 1-.6-.36c.06-.17.2-.5.31-.77.82-1.93 2.34-5.53-.16-6.95a2.13 2.13 0 0 0-1-.3 2 2 0 0 0-.66.12c-1.5.53-2.43 2.63-3.49 5.31-.16.42-.37.92-.54 1.31l1.48 1.48a15.53 15.53 0 0 0 .89-2.05zM8 19.29v-7.88l-2-2v11.88h10.52a2.36 2.36 0 0 0 1.05-.29l-1.74-1.74zM0 8.4h4.86v12.96H0zm.34-5.982l1.414-1.414L22.24 21.488l-1.415 1.415z"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("clock.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 22"><path d="M16.27 13.45L12 10.58V4.46H9.76v7.25L15 15.25z"/><path d="M11 2a9 9 0 1 1-9 9 9 9 0 0 1 9-9m0-2a11 11 0 1 0 11 11A11 11 0 0 0 11 0z"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("comment.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 21.2 22"><path d="M19.29 1.91v11.46H7.69l-.57.7L5 16.64v-3.27H1.91V1.91h17.38M21.2 0H0v15.28h3.12V22l5.48-6.72h12.6V0z"/><path d="M4.14 4.29h12.93V6.2H4.14zm0 4.09h12.93v1.91H4.14z"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("deconstructed.svg",'<svg viewBox="0 0 402 35" xmlns="http://www.w3.org/2000/svg"><path d="M345.13 8.67h-2v8.67h2v8.64h-2v7.846h23.565V28.12h-17.02v-2.13h2v-6.667h15.643V17.31h-2v-3.695h-15.644V8.68h2V6.592h16.775V.885h-23.32V8.67zm-21.35 0h-2v8.67h2v8.64h-2v7.846h6.544V25.99h2v-8.68h-2V8.68h2V6.592h10.626V.885h-27.795v5.707h10.626V8.67zm-38.954 0h-2.03c-1.367 2.517-2.134 5.46-2.142 8.67h2c.004 3.2.74 6.133 2.083 8.64h-2.016c2.836 5.32 8.39 8.73 15.45 8.73 4.72 0 8.362-1.18 10.723-2.9v-5.83h-.976c-2.373 1.93-5.59 2.877-9.453 2.877-2.672 0-5.4-1.006-7.504-2.867h2.033c-2.253-1.977-3.796-4.93-3.796-8.674v-.006h-2c.02-3.485 1.456-6.535 3.72-8.63h2.06c1.994-1.8 4.62-2.875 7.486-2.875 3.29 0 6.493 1.103 8.824 2.875h1.015V2.902C308.137 1.328 304.35 0 300.168 0c-6.797 0-12.42 3.384-15.342 8.67zm-8.845.01v8.59h2v4.916c0 1.366-.15 2.66-.44 3.804h-2.003c-1.474 5.805-6.47 8.72-12.838 8.72-6.414 0-11.35-2.92-12.8-8.73h2c-.285-1.14-.434-2.432-.434-3.794V17.34h-2V8.67h2V.885h6.543V8.68h-2v8.59h2v4.572c0 1.68.337 3.09.973 4.148h-1.994c1.095 1.817 3.07 2.72 5.71 2.72 2.645 0 4.64-.906 5.75-2.73h2.006c.64-1.058.983-2.463.983-4.138V17.34h-2V8.67h2V.885h6.542V8.68h-2zm-75.824-.01h-2v8.67h2v8.64h-2v7.846h6.543V25.99h2v-8.68h-2V8.68h2V6.592h10.625V.885H189.53v5.707h10.625V8.67zm-34.667 0h-2.004c-.008.143-.012.287-.012.43 0 4.21 2.062 6.655 4.794 8.24h2.123c.84.47 1.74.865 2.66 1.205l4.23 1.526c3 1.133 4.477 2.215 4.477 4.577 0 .455-.078.906-.243 1.334h-1.99c-.608 1.623-2.457 2.927-6.014 2.927-2.996 0-6.818-1.286-8.758-2.926h-.69v6.125c2.756 1.722 6.348 2.607 10.037 2.607 6.973 0 11.396-3.62 12.1-8.72h1.995c.07-.485.103-.982.103-1.492 0-3.16-.977-5.442-2.99-7.188h-2.082c-1.203-1.03-2.766-1.873-4.7-2.603l-4.33-1.638c-3-1.042-4.182-1.836-4.182-4.02 0-.125.01-.248.027-.37h2.01c.274-1.62 2.142-2.875 5.18-2.875 3.197 0 6.2 1.18 7.772 2.558h.492v-6.15C183.97 1.182 180.92 0 177.18 0c-7.032 0-11.403 4.132-11.692 8.67zm-7.378.01v8.63h2v8.68h-2v7.836h-6.345l-5.23-7.846h2.02l-5.76-8.64h-2.047l-.593-.897c-1.328-2.034-2.755-4.465-3.394-5.507h-.05c.05 1.22.098 3.972.1 6.374h2v8.68h-2v7.836h-6.445V25.98h2v-8.64h-2V8.67h2V.885h6.346l5.075 7.795h-1.966l5.57 8.63h2.046l.836 1.285c1.77 2.755 2.706 4.33 3.444 5.46h.05c-.05-1.23-.1-4.034-.1-6.444v-.27h-2V8.67h2V.885h6.445V8.68h-2zm63.396-.01V.885h12.938c6.067 0 9.743 3.348 10.8 7.795h-1.988c.203.88.306 1.804.306 2.752 0 2.245-.513 4.222-1.467 5.838h1.958c-1.22 2.01-3.143 3.447-5.625 4.13l3.517 4.59h-1.992l5.675 7.344v.492h-7.133l-5.852-7.846h1.993l-2.947-3.99h-3.64v4h-2v7.836h-6.543V25.98h2v-8.64h-2V8.67h2zm4.542.01v8.01h5.61c3.787 0 5.36-2.28 5.36-5.258 0-1.045-.248-1.988-.75-2.762h1.965c-.865-1.28-2.448-2.078-4.773-2.078h-5.412V8.68h-2zM63.7 8.67C66.62 3.384 72.24 0 79.037 0c4.182 0 7.97 1.328 10.135 2.902V8.68h-1.015c-2.33-1.772-5.535-2.875-8.824-2.875-2.867 0-5.492 1.074-7.486 2.875h-2.06c-2.264 2.095-3.7 5.145-3.72 8.63h2v.006c0 3.744 1.543 6.697 3.796 8.674H69.83c2.103 1.86 4.832 2.867 7.504 2.867 3.862 0 7.08-.946 9.453-2.877h.976v5.83c-2.36 1.72-6.002 2.9-10.725 2.9-7.056 0-12.612-3.41-15.446-8.73h2.016c-1.342-2.507-2.08-5.44-2.083-8.64h-2c.008-3.21.775-6.153 2.143-8.67h2.03zm-28.738 0V.885H58.28v5.707H41.503V8.68h-2v4.935h15.644v3.695h2v1.973H41.503v6.707h-2v2.13h17.02v5.706H32.96V25.98h2v-8.64h-2V8.67h2zm65.434.01c-2.2 2.126-3.5 5.206-3.53 8.59h2v.046c0 3.417 1.36 6.555 3.62 8.674H94.44h6.045c1.904 1.786 4.447 2.877 7.35 2.877 2.902 0 5.444-1.09 7.35-2.877h2.01c2.247-2.114 3.603-5.238 3.61-8.64h-2c-.012-3.417-1.32-6.53-3.54-8.67h7.94c1.358 2.5 2.124 5.417 2.142 8.6h2v.046c0 3.197-.756 6.168-2.117 8.674h-2.006c-2.892 5.315-8.505 8.72-15.39 8.72-6.89 0-12.505-3.41-15.395-8.73h2c-1.36-2.5-2.116-5.462-2.12-8.65h-2c.007-3.21.775-6.153 2.143-8.67h2.03c2.92-5.286 8.544-8.67 15.34-8.67 6.8 0 12.426 3.388 15.347 8.68h-7.962c-1.888-1.784-4.427-2.875-7.384-2.875-2.957 0-5.496 1.09-7.384 2.875h-2.056zm-72.6 8.59h2v.144c0 3.33-.598 6.225-1.77 8.576H26.02c-2.552 5.113-7.81 7.836-15.492 7.836H0V25.98h2v-8.64H0V8.67h2V.885h10.478c8.028 0 12.858 3.22 15.304 7.795h-1.97c1.34 2.553 1.954 5.522 1.982 8.59zm-7.937-8.6c-1.79-1.425-4.22-2.078-7.134-2.078h-4.33V8.68h-2v8.59h2v8.72h-2v2.13h4.33c3.2 0 5.736-.633 7.515-2.14h2.01c1.963-1.668 3.003-4.44 3.003-8.566v-.074h-2c-.028-4.12-1.226-6.943-3.33-8.67h1.935zm378.153.01c1.345 2.556 1.962 5.528 1.99 8.6h2v.144c0 3.33-.6 6.225-1.77 8.576h-2.005c-2.552 5.113-7.81 7.836-15.492 7.836h-10.528V25.99h2v-8.64h-2V8.68h6.395v8.6h2V26h-2v2.13h4.33c3.2 0 5.735-.633 7.514-2.14h2.012c1.96-1.668 3-4.44 3-8.566v-.074h-2c-.028-4.12-1.226-6.943-3.33-8.67h9.862C397.54 4.104 392.71.885 384.684.885h-10.48V8.68h6.396V6.592h4.33c2.92 0 5.354.656 7.144 2.088h5.937z" fill="#FFF" fill-rule="evenodd"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("double_iq_flair.svg",'<svg fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 49 22"><rect x=".5" y=".5" width="48" height="21" rx="2.5" fill="#FFFF64" stroke="#000"/><path d="M9.104 14.528c.368-.368.736-.8 1.184-1.312l1.632-1.888c.672-.752 1.456-1.792 1.456-3.008 0-1.872-1.376-3.264-3.648-3.264-1.408 0-2.448.624-2.912 1.088V7.92h.112c.432-.64 1.552-1.344 2.64-1.344 1.216 0 2.128.64 2.128 1.808 0 .944-.752 1.632-1.44 2.448l-3.472 4.016V16h6.72v-1.472h-4.4Zm9.6424-4.688-2.704-2.72-1.088 1.088 2.72 2.72-2.736 2.736 1.072 1.072L18.7464 12l2.736 2.736 1.088-1.072-2.736-2.736 2.72-2.72-1.088-1.088-2.72 2.72ZM30.2268 16V5.28h-1.712V16h1.712Zm12.9208.176-1.344-1.584c1.04-1.088 1.6-2.352 1.6-3.952 0-3.2-2.448-5.648-5.664-5.648-3.216 0-5.664 2.448-5.664 5.648 0 3.2 2.448 5.648 5.664 5.648 1.04 0 2.016-.224 2.912-.816l.656.816h1.84v-.112Zm-5.024-3.728 1.536 1.856c-.464.304-1.232.416-1.872.416-2.304 0-3.968-1.824-3.968-4.08 0-2.256 1.664-4.096 3.92-4.096 2.256 0 3.92 1.84 3.92 4.096 0 1.008-.304 2.096-.864 2.72l-.832-1.024h-1.84v.112Z" fill="#000"/></svg>')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("down_arrow.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 21.32 10.91"><path d="M10.66 10.91L0 1.5 1.32 0l9.34 8.24L20 0l1.32 1.5-10.66 9.41"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("drag.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 8.22"><path d="M0 0h22v1.99H0zm0 6.24h22v1.99H0z"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("envelope.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 15.34"><path d="M0 0v15.34h22V0zm12.32 8.2L11 9.47 9.68 8.2 8.3 6.88l-5.18-5h15.76l-5.18 5zm-5.5-.1L1.9 12.17v-8.8zm1.39 1.32L11 12.1l2.79-2.68 4.86 4H3.35zm7-1.33l4.89-4.72v8.8z"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("expand.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 19.21 19.28"><path d="M17.21 11.21v4.61L3.36 2h4.42V0H0v8.07h2V3.46l13.85 13.83h-4.42v2h7.78v-8.08h-2"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("expand_alt.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 19.21 19.28"><path d="M2 11.21v4.61L15.85 2h-4.42V0h7.78v8.07h-2V3.46L3.36 17.29h4.42v2H0v-8.08h2"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("external.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 10.56 10.51"><path d="M2.49 0v2h4.6L0 9.09l1.41 1.42 7.15-7.15v4.42h2V0H2.49"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("eye.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 15.45"><path d="M11 2c4 0 7.26 3.85 8.6 5.72-1.34 1.87-4.6 5.73-8.6 5.73S3.74 9.61 2.4 7.73C3.74 5.86 7 2 11 2m0-2C4.45 0 0 7.73 0 7.73s4.45 7.73 11 7.73 11-7.73 11-7.73S17.55 0 11 0z"/><path d="M11 5a2.73 2.73 0 1 1-2.73 2.73A2.73 2.73 0 0 1 11 5m0-2a4.73 4.73 0 1 0 4.73 4.73A4.73 4.73 0 0 0 11 3z"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("eye_cross.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 21.08"><path d="M1.71 0L.35 1.36l19.72 19.72 1.38-1.38L1.71 0M11 16.42c-4.09 0-7.37-3.94-8.7-5.8a19.31 19.31 0 0 1 2.81-3.17L3.75 6.09A21 21 0 0 0 0 10.62s4.45 7.73 11 7.73a9.16 9.16 0 0 0 4-1l-1.44-1.45a7 7 0 0 1-2.56.52zm0-11.61c4.09 0 7.37 3.93 8.7 5.8a19.64 19.64 0 0 1-2.81 3.17l1.37 1.37A21 21 0 0 0 22 10.62s-4.45-7.73-11-7.73a9.16 9.16 0 0 0-4 1l1.43 1.44A7 7 0 0 1 11 4.81z"/><path d="M12.62 15L11 13.3a2.79 2.79 0 0 1-2.7-2.67L6.64 9a4.68 4.68 0 0 0 6 6zm2.82-2.66a4.73 4.73 0 0 0-6.19-6.19l1.58 1.58h.25a2.81 2.81 0 0 1 2.8 2.8v.25z"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("facebook.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 9.95 20"><path d="M8.09 3.81c-1.4 0-1.58.84-1.58 1.67v1.3h3.35L9.49 11h-3v9H2.33v-9H0V6.88h2.42V3.81C2.42 1.3 3.81 0 6.6 0H10v3.81z"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("fact_track_icon.svg",'<svg viewBox="0 0 50 50" xmlns="http://www.w3.org/2000/svg"><path fill-opacity=".502" d="M10.895 2h36.923v36.48H10.895z"/><path d="M2 11.338h36.923v36.48H2z"/><path d="M27.244 29.815l-11.887 6.71v-13.42l11.887 6.71z" fill="#FFF"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("fire.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 17 26"><path fill="#FF1464" d="M4 3c2.95 1 6.84 8.93 6.84 8.93.94-1.645 1.29-3.56 1-5.43C15.068 9.46 16.934 13.62 17 18c-.12 7-8.85 8.05-8.85 8.05.926-.702 1.554-1.726 1.76-2.87.29-1.8-2.58-3.8-2.58-3.8-2.48 4.15-1.07 6.67-1.07 6.67S0 23.1 0 19.24c0-3.86 4.22-7.75 4.62-10.79C4.828 6.61 4.616 4.747 4 3zm2.58 5.51h-.02v.17c-.393 1.918-1.187 3.73-2.33 5.32C3.13 15.77 2 17.65 2 19.25c0 1 .88 2.07 2 3 .313-1.383.86-2.702 1.62-3.9l1.1-1.84 1.84 1.2c.59.45 3.29 2.48 3.44 5 1.808-.915 2.963-2.754 3-4.78-.01-2.238-.607-4.434-1.73-6.37-.19.5-.426.98-.7 1.44l-1.89 3.1-1.62-3.29c-.736-1.484-1.565-2.92-2.48-4.3z"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("flag.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16.48 23.01"><path d="M16 3.93C13.56 2 11.09 2.38 8.91 2.72a9.31 9.31 0 0 1-3.8.08L5.5.31 3.52 0 2 9.55l-.28 1.59-.1.59L0 22.71 2 23l1.54-10.05a9.43 9.43 0 0 0 5.68.36 7.87 7.87 0 0 1 4.43.13l1.17.51.18-1.27c.45-2.67.89-5.28 1.34-7.79l.1-.59zm-2.75 7.28a11.57 11.57 0 0 0-4.34.11c-1.84.29-3.45.53-5.05-.46L4 9.93c.29-1.67.58-3.38.88-5.12a11.54 11.54 0 0 0 4.34-.11c1.85-.29 3.46-.54 5.07.47q-.52 2.95-1.04 6.05z"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("for-the-record.svg",'<svg viewbox="0 0 501 145" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="a" d="M0 145h500.922V0H0z"/></defs><g fill="none" fill-rule="evenodd"><path fill="#FFF" d="M49 20v3.977H28.418v10.958H47.84v3.977H28.418V56H24V20zM122.976 37.713c0-8.235-6.446-15.001-14.785-15.001-8.394 0-14.785 6.766-14.785 15 0 8.288 6.391 15.108 14.785 15.108 8.34 0 14.785-6.82 14.785-15.107m-33.903 0c0-10.722 8.448-19.062 19.118-19.062 10.669 0 19.117 8.34 19.117 19.062 0 10.94-8.448 19.168-19.117 19.168-10.67 0-19.118-8.228-19.118-19.168M179.584 37.17c5.58 0 7.907-2.275 7.907-6.607 0-4.28-2.328-6.88-7.581-6.88h-8.341V37.17h8.015zm13.593 18.467v.271h-4.981l-10.507-14.73h-6.12v14.73h-4.333V19.623h13.052c7.42 0 11.536 4.55 11.536 10.887 0 5.9-3.954 9.967-9.315 10.563l10.668 14.564zM318.477 55.909V23.63h-12.619v-4.008h29.516v4.008H322.81v32.278zM402.262 56.412v-17.33h-20.626v17.33h-4.333V20.126h4.333v14.948h20.626V20.126h4.332v36.286zM476.317 19.623v4.008h-20.943v11.046h19.86v4.008h-19.86V51.9h21.214v4.009H451.04V19.623zM36.11 107.34c5.577 0 7.907-2.276 7.907-6.608 0-4.28-2.33-6.879-7.582-6.879h-8.341v13.487h8.015zm13.594 18.466v.272H44.72l-10.506-14.73h-6.12v14.73H23.76V89.792h13.053c7.42 0 11.536 4.55 11.536 10.887 0 5.907-3.954 9.968-9.316 10.563l10.67 14.564zM121.32 89.792V93.8h-20.942v11.053h19.86v4.001h-19.86v13.216h21.214v4.008H96.045V89.792zM192.78 119.96h.27v4.279c-1.949 1.243-5.686 2.811-10.668 2.811-10.994 0-19.118-8.07-19.118-19.115 0-10.94 8.07-19.115 19.063-19.115 3.52 0 7.42.866 10.453 2.765v4.272h-.271c-1.788-1.349-5.633-2.976-10.127-2.976-8.503 0-14.786 6.442-14.786 15.054s6.283 15.054 14.84 15.054c4.766 0 8.34-1.515 10.344-3.03M265.074 107.882c0-8.228-6.444-15.001-14.785-15.001-8.394 0-14.785 6.773-14.785 15 0 8.289 6.391 15.108 14.785 15.108 8.341 0 14.785-6.82 14.785-15.107m-33.903 0c0-10.722 8.449-19.062 19.118-19.062 10.67 0 19.118 8.34 19.118 19.062 0 10.94-8.449 19.168-19.118 19.168-10.67 0-19.118-8.228-19.118-19.168M320.95 107.34c5.578 0 7.908-2.276 7.908-6.608 0-4.28-2.33-6.879-7.582-6.879h-8.34v13.487h8.014zm13.595 18.466v.272h-4.984l-10.506-14.73h-6.12v14.73h-4.332V89.792h13.052c7.42 0 11.536 4.55 11.536 10.887 0 5.907-3.954 9.968-9.315 10.563l10.669 14.564zM382.202 93.8v28.27h6.065c9.912 0 14.46-5.417 14.46-13.97 0-9.154-4.44-14.3-14.676-14.3h-5.85zm6.175-4.008c13.105 0 18.682 7.91 18.682 18.308 0 10.127-5.36 17.978-18.899 17.978h-10.29V89.792h10.507z"/><mask id="b" fill="#fff"><use xlink:href="#a"/></mask><path d="M429.745 71.174h68.526V2.651h-68.526v68.523zm0 71.175h68.526V73.825h-68.526v68.524zM358.54 71.174h68.525V2.651H358.54v68.523zm0 71.175h68.525V73.825H358.54v68.524zM287.36 71.174h68.527V2.651H287.36v68.523zm0 71.175h68.527V73.825H287.36v68.524zm-71.177 0h68.525V73.825h-68.525v68.524zm-.17-71.175h68.527V2.651h-68.527v68.523zm-71.008 0h68.527V2.651h-68.527v68.523zm0 71.175h68.527V73.825h-68.527v68.524zM73.83 71.174h68.526V2.651H73.829v68.523zm0 71.175h68.526V73.825H73.829v68.524zM2.651 71.174h68.527V2.651H2.65v68.523zm0 71.175h68.527V73.825H2.65v68.524zM429.716 0H0v145H500.922V0h-71.206z" fill="#FFF" mask="url(#b)"/></g></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("framework.svg",'<svg viewbox="0 0 431 95" xmlns="http://www.w3.org/2000/svg"><g fill="#FFF" fill-rule="evenodd"><path d="M0 95h431V0H0v95zm8-8h415V8H8v79z"/><path d="M30.163 71.546V43.319h-7.057V35.83h7.057V23.3H48.02v7.706h-8.424v4.824h9.936v7.488h-9.936v28.227zM67.531 71.546h-9.433V35.83h22.106v8.065H67.531zM94.602 60.53c0 3.095 2.521 4.68 5.473 4.68 3.24 0 5.904-1.513 7.13-2.88v-6.12c-.866-.362-2.522-.793-5.042-.793-4.824 0-7.56 2.015-7.56 5.112zM89.49 45.694v-8.208c1.729-1.152 6.913-2.665 11.882-2.665 9.143 0 15.264 4.537 15.264 12.89v23.834h-8.928V68.81c-1.657 1.8-5.33 3.744-9.938 3.744-6.335 0-12.384-3.887-12.384-11.665 0-7.416 6.912-12.096 15.553-12.096 2.233 0 4.825.504 6.266 1.08v-1.368c0-3.24-1.946-5.76-7.346-5.76-4.32 0-7.992 1.512-9.65 2.951h-.719zM137.66 71.546h-9.435V35.83h52.997v35.715h-9.432V44.039h-12.314v27.507h-9.504V44.039H137.66zM215.505 50.376c-.216-4.824-3.17-7.992-7.777-7.992-4.248 0-8.208 2.807-8.712 7.992h16.489zm-25.562 3.601c0-10.873 7.488-19.155 17.785-19.155 10.44 0 16.778 7.85 16.778 19.802 0 .648-.072 1.368-.072 1.873-.073.287-.073.575-.073.863h-25.274c.792 4.321 4.177 7.274 10.514 7.274 4.896 0 8.856-1.368 11.665-3.601h.719v8.137c-2.664 1.944-7.128 3.384-13.177 3.384-11.521 0-18.865-7.633-18.865-18.577zM313.77 64.273c6.121 0 9.722-4.536 9.722-10.585 0-6.049-3.6-10.585-9.722-10.585-6.12 0-9.72 4.536-9.72 10.585 0 6.05 3.6 10.585 9.72 10.585m0-29.45c10.945 0 19.154 7.776 19.154 18.865 0 11.09-8.209 18.865-19.154 18.865-10.944 0-19.153-7.776-19.153-18.865 0-10.945 8.21-18.866 19.153-18.866M352.003 71.546h-9.433V35.83h22.106v8.065h-12.673zM405.932 36.55l-15.193 16.347 16.777 17.929v.72h-11.377l-13.465-14.762v14.762h-9.432V23.302h9.432v26.786l12.745-14.257h10.513zM276.79 35.831h9.433v35.715h-52.997V35.831h9.432v27.507h12.314V35.831h9.504v27.507h12.313z"/></g></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("gear.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 21.68"><path d="M8.79 21.68l-3-1.09v-2.95l-.47-.41-2.9.5-1.65-2.78 1.86-2.27-.11-.62L0 10.61l.55-3.22 2.91-.51.31-.54-1-2.75 2.46-2.07L7.8 3l.59-.21L9.4 0h3.23l1 2.78.59.22 2.53-1.49 2.48 2.09-1 2.78.3.54 2.9.5.57 3.18-2.52 1.48-.11.62 1.86 2.24-1.58 2.82-2.92-.51-.48.4v2.93l-3 1.09-1.89-2.24h-.63zm1-4.15h2.4l1.61 1.9.53-.19v-2.49l1.85-1.53 2.45.43.28-.5-1.58-1.91.42-2.36 2.15-1.26-.09-.55-2.47-.43-1.17-2.08.83-2.35-.44-.37-2.15 1.26-2.27-.84-.85-2.36h-.56l-.86 2.37-2.26.79-2.16-1.23L5 4.2l.86 2.33-1.2 2.08L2.2 9l-.1.58 2.14 1.23.42 2.36-1.58 1.97.28.48 2.47-.43 1.8 1.57v2.48l.53.19zM11 15.27a4.37 4.37 0 1 1 4.37-4.37A4.37 4.37 0 0 1 11 15.27zm0-6.82a2.46 2.46 0 1 0 2.46 2.46A2.43 2.43 0 0 0 11 8.44z"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("genius-level.svg",'<svg viewBox="0 0 500 190"><path d="M266.9 130.1V81.5h9.6v40.1h22.6v8.4h-32.2v.1zM347 81.5v8.4h-24.7v10.4h23v8.4h-23v13h25.1v8.4h-34.7V81.5H347zm47.3 0h10.3L386.2 130H376l-18.3-48.5h10.4l10.3 29.7c.8 2.5 2.2 6.5 2.8 8.9h.1c.6-2.3 2-6.3 2.9-8.9l10.1-29.7zm57.2 0v8.4h-24.7v10.4h23v8.4h-23v13h25.1v8.4h-34.7V81.5h34.3zm15.8 48.6V81.5h9.6v40.1h22.6v8.4h-32.2v.1zM43 46.4c-3.3 2.3-9.1 4.8-17 4.8-15 0-26-10.9-26-25.6C0 10.9 11 0 25.8 0c6.4 0 11.9 2 15 4.4v9.1h-.7C37 10.7 32 8.7 26.2 8.7c-9.3 0-16.6 7.2-16.6 16.9 0 10.8 8.7 16.9 16.8 16.9 3.4 0 6.1-.7 7.8-1.6V31H22v-8.1h21v23.5zM92.9 1.3v8.4H68.2v10.4h23v8.4h-23v13h25.1v8.4H58.6V1.3h34.3zm25.3 48.5h-9.5V1.3h9.3l17 26.2c2.6 4.1 4 6.4 5.1 8h.1c-.1-1.8-.1-5.9-.1-9.5V1.3h9.5v48.5h-9.3l-17.1-25.6c-2-3-4.1-6.5-5-8h-.2c.1 1.8.1 5.9.1 9.5v24.1h.1zm49 0V1.3h9.6v48.5h-9.6zM194 32.7V1.3h9.6v30.9c0 6.7 3.7 10.1 9.9 10.1s9.9-3.3 9.9-10.1V1.3h9.6v31.4c0 12.2-8.3 18.4-19.6 18.4-11.2.1-19.4-6.1-19.4-18.4zm75.9-11c7.8 2.9 11.4 7 11.4 14.5 0 8.6-6.7 15-18 15-5.4 0-10.7-1.3-14.8-3.8V38h.7c2.8 2.5 8.6 4.6 13.2 4.6 6.6 0 9.2-3 9.2-6.2 0-3.5-2.2-5.1-6.6-6.7l-6.2-2.2c-5.9-2.2-11.2-5.8-11.2-13.9 0-7 6.5-13.5 17.2-13.5 5.5 0 10 1.7 12.2 3.3v9.1h-.7c-2.3-2-6.7-3.8-11.4-3.8-4.9 0-7.7 2.2-7.7 4.9 0 3.2 1.7 4.3 6.2 5.9l6.5 2.2zm32.5.9H500v9.6H302.4v-9.6zM.1 98.6h245.3v9.6H.1v-9.6zm.1 81.6H500v9.6H.2v-9.6z" fill="#fff"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("genius-test.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 480 187"><g fill="#FFF"><path d="M22.925 53.386V11.088H5.105V2.236h46.567v8.852H33.85v42.298zm72.538 0V30.762H70.925v22.624H60V2.236h10.925v19.673h24.538V2.236h10.925v51.15zm59.373-51.24V11h-28.12v10.91h26.24v8.853h-26.24v13.681h28.568v8.853H115.79V2.146h39.045zm84.448 47.574c-3.672 2.414-10.299 5.007-19.254 5.007-17.105 0-29.642-11.446-29.642-27.006S202.925.715 219.761.715c7.254 0 13.523 2.147 17.105 4.65v9.569h-.806c-3.582-2.951-9.224-5.008-15.761-5.008-10.657 0-18.896 7.6-18.896 17.795 0 11.357 9.85 17.795 19.164 17.795 3.85 0 6.896-.804 8.776-1.699V33.355h-13.88V24.77h23.91v24.95h-.09zm50.328-47.574V11h-28.12v10.91h26.24v8.853h-26.24v13.681h28.568v8.853h-39.493V2.146h39.045zm21.761 51.24h-10.836V2.236h10.657l19.343 27.542c2.956 4.292 4.567 6.707 5.732 8.495h.09c-.09-1.878-.18-6.26-.18-10.015V2.236h10.836v51.15h-10.657L316.925 26.38c-2.238-3.13-4.656-6.886-5.731-8.495h-.09c.09 1.877.18 6.26.18 10.015v25.486h.09zm48.358 0V2.236h10.926v51.15zm23.194-18.064V2.146h10.926v32.64c0 7.064 4.209 10.64 11.194 10.64 6.985 0 11.283-3.487 11.283-10.64V2.146h10.926v33.176c0 12.877-9.493 19.405-22.299 19.405-12.716 0-22.03-6.439-22.03-19.405zm78.895-11.625c8.867 3.04 12.986 7.422 12.986 15.291 0 9.122-7.702 15.828-20.418 15.828-6.179 0-12.179-1.341-16.836-4.024v-9.747h.806c3.135 2.683 9.851 4.829 15.045 4.829 7.522 0 10.478-3.22 10.478-6.528 0-3.666-2.508-5.365-7.523-7.064l-7.074-2.325c-6.717-2.325-12.717-6.081-12.717-14.666 0-7.332 7.433-14.218 19.612-14.218 6.269 0 11.373 1.878 13.97 3.398v9.568h-.806c-2.597-2.146-7.701-3.934-12.985-3.934-5.552 0-8.776 2.325-8.776 5.097 0 3.398 1.97 4.56 6.985 6.17l7.254 2.325zM48.896 158.01v-42.297H31.075v-8.852h46.567v8.852H59.82v42.298z"/><path d="M54 88.082c24.18 0 43.97 19.673 43.97 43.906 0 24.145-19.701 43.907-43.97 43.907-24.18 0-43.97-19.673-43.97-43.907 0-24.233 19.701-43.906 43.97-43.906zm0-9.39c-29.463 0-53.373 23.876-53.373 53.296 0 29.42 23.91 53.297 53.373 53.297 29.463 0 53.373-23.876 53.373-53.297 0-29.42-24-53.296-53.373-53.296zm144.09 28.079v8.853h-28.12v10.91h26.239v8.853H169.97v13.681h28.567v8.853h-39.492v-51.15h39.045z"/><path d="M178.03 88.082c24.179 0 43.97 19.673 43.97 43.906 0 24.145-19.701 43.907-43.97 43.907-24.18 0-43.97-19.673-43.97-43.907 0-24.233 19.701-43.906 43.97-43.906zm0-9.39c-29.463 0-53.373 23.876-53.373 53.296 0 29.42 23.91 53.297 53.373 53.297 29.463 0 53.373-23.876 53.373-53.297 0-29.42-24-53.296-53.373-53.296zm130.03 49.541c8.865 3.04 12.985 7.422 12.985 15.291 0 9.121-7.702 15.828-20.418 15.828-6.18 0-12.18-1.341-16.836-4.024v-9.747h.806c3.134 2.682 9.85 4.829 15.045 4.829 7.522 0 10.477-3.22 10.477-6.528 0-3.667-2.507-5.366-7.522-7.065l-7.075-2.325c-6.716-2.325-12.716-6.08-12.716-14.665 0-7.333 7.433-14.218 19.612-14.218 6.269 0 11.373 1.878 13.97 3.398v9.568h-.806c-2.597-2.146-7.701-3.935-12.985-3.935-5.552 0-8.776 2.325-8.776 5.097 0 3.399 1.97 4.561 6.985 6.17l7.254 2.326z"/><path d="M301.97 88.082c24.18 0 43.97 19.673 43.97 43.906 0 24.145-19.701 43.907-43.97 43.907-24.179 0-43.97-19.673-43.97-43.907.09-24.233 19.791-43.906 43.97-43.906zm0-9.39c-29.463 0-53.373 23.876-53.373 53.296 0 29.42 23.91 53.297 53.373 53.297 29.463 0 53.373-23.876 53.373-53.297 0-29.42-23.91-53.296-53.373-53.296zm119.015 79.945v-42.298h-17.82v-8.852h46.566v8.852h-17.82v42.298z"/><path d="M426 88.082c24.18 0 43.97 19.673 43.97 43.906 0 24.145-19.701 43.907-43.97 43.907-24.18 0-43.97-19.673-43.97-43.907.09-24.233 19.79-43.906 43.97-43.906zm0-9.39c-29.463 0-53.373 23.876-53.373 53.296 0 29.42 23.91 53.297 53.373 53.297 29.463 0 53.373-23.876 53.373-53.297 0-29.42-23.91-53.296-53.373-53.296z"/></g></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("google.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18.59 19"><path d="M9.5 8.14v3.26h5.43a5.21 5.21 0 0 1-5.43 4.07 5.91 5.91 0 0 1-5.84-6 5.91 5.91 0 0 1 5.84-6A5.23 5.23 0 0 1 13.3 5l2.58-2.44A8.8 8.8 0 0 0 9.5 0 9.44 9.44 0 0 0 0 9.5 9.44 9.44 0 0 0 9.5 19c5.43 0 9.09-3.8 9.09-9.23a6.08 6.08 0 0 0-.14-1.63z"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("hamburger.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 14.46"><path d="M0 0h22v1.99H0zm0 6.24h22v1.99H0zm0 6.23h22v1.99H0z"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("instagram.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M10 0c2.724 0 3.062 0 4.125.06.83.017 1.65.175 2.426.467.668.254 1.272.65 1.77 1.162.508.498.902 1.1 1.153 1.768.292.775.45 1.595.467 2.424.06 1.063.06 1.41.06 4.123 0 2.712-.06 3.06-.06 4.123-.017.83-.175 1.648-.467 2.424-.52 1.34-1.58 2.402-2.922 2.92-.776.293-1.596.45-2.425.468-1.063.06-1.41.06-4.125.06-2.714 0-3.062-.06-4.125-.06-.83-.017-1.65-.175-2.426-.467-.668-.254-1.272-.65-1.77-1.162-.508-.498-.902-1.1-1.153-1.768-.292-.775-.45-1.595-.467-2.424C0 13.055 0 12.708 0 9.995c0-2.712 0-3.04.06-4.123.017-.83.175-1.648.467-2.424.25-.667.645-1.27 1.153-1.77.5-.507 1.103-.9 1.77-1.15C4.225.234 5.045.077 5.874.06 6.958 0 7.285 0 10 0zm0 1.798h.01c-2.674 0-2.992.06-4.046.06-.626.02-1.245.15-1.83.377-.434.16-.828.414-1.152.746-.337.31-.602.69-.775 1.113-.222.595-.34 1.224-.348 1.858-.06 1.064-.06 1.372-.06 4.045s.06 2.99.06 4.044c.007.633.125 1.262.347 1.857.17.434.434.824.775 1.142.31.33.692.587 1.113.754.596.222 1.224.34 1.86.348 1.063.06 1.37.06 4.045.06 2.674 0 2.992-.06 4.046-.06.635-.008 1.263-.126 1.86-.348.87-.336 1.56-1.025 1.897-1.897.217-.593.332-1.218.338-1.848.06-1.064.06-1.372.06-4.045s-.06-2.99-.06-4.044c-.01-.623-.128-1.24-.347-1.827-.16-.435-.414-.83-.745-1.152-.318-.34-.71-.605-1.143-.774-.596-.222-1.224-.34-1.86-.348-1.063-.06-1.37-.06-4.045-.06zm0 3.1c1.355 0 2.655.538 3.613 1.496.958.958 1.496 2.257 1.496 3.61 0 2.82-2.288 5.108-5.11 5.108-2.822 0-5.11-2.287-5.11-5.107 0-2.82 2.288-5.107 5.11-5.107zm0 8.415c.878 0 1.72-.348 2.34-.97.62-.62.97-1.46.97-2.338 0-1.827-1.482-3.31-3.31-3.31s-3.31 1.483-3.31 3.31 1.482 3.308 3.31 3.308zm6.51-8.633c0 .658-.533 1.192-1.192 1.192-.66 0-1.193-.534-1.193-1.192 0-.66.534-1.193 1.193-1.193.316 0 .62.126.844.35.223.223.35.526.35.843z"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("instagram_reels.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64"><path d="M41.6 38.7c0 1-.5 1.8-1.3 2.3L29.2 48a2.7 2.7 0 01-2.7 0 2.7 2.7 0 01-1.4-2.3V32.3c0-1 .6-1.9 1.4-2.3.8-.5 1.8-.5 2.7 0l11 6.4c.9.5 1.3 1.4 1.4 2.3zM64 32c0 8.7 0 9.8-.2 13.2-.1 3.4-.7 5.7-1.5 7.8-.8 2-1.9 3.9-3.7 5.6a15.7 15.7 0 01-5.6 3.7c-2 .8-4.4 1.4-7.8 1.5-3.4.2-4.5.2-13.2.2s-9.8 0-13.2-.2c-3.4-.1-5.7-.7-7.8-1.5-2-.8-3.8-1.9-5.6-3.7A15.7 15.7 0 011.7 53C.9 51 .4 48.6.2 45.2 0 41.8 0 40.7 0 32s0-9.8.2-13.2c.1-3.4.7-5.7 1.5-7.8.8-2 1.9-3.8 3.7-5.6C7 3.6 8.9 2.5 11 1.7 13 .9 15.4.4 18.8.2 22.2 0 23.3 0 32 0s9.8 0 13.2.2c3.4.1 5.7.7 7.8 1.5 2 .8 3.8 1.9 5.6 3.7 1.8 1.7 2.9 3.5 3.7 5.6.8 2 1.3 4.4 1.5 7.8.2 3.4.2 4.5.2 13.2zM45 4.8l-4-.2 6.8 12H59c-.2-1.8-.6-3-1-3.9-.6-1.6-1.4-2.9-2.6-4-1.2-1.3-2.5-2.1-4-2.8-1.3-.4-3.1-1-6.4-1.1zm-13-.2H20.7l6.8 12h15l-6.8-12H32zm-27 12h17.2L15.7 5.1a16 16 0 00-3 .8c-1.6.7-2.9 1.5-4 2.7-1.3 1.2-2.1 2.5-2.8 4.1-.3.9-.7 2-1 3.9zM59.4 32V21.2H4.6a314.8 314.8 0 000 23.8A19 19 0 006 51.3c.7 1.6 1.5 2.9 2.7 4.1 1.2 1.2 2.5 2 4 2.7 1.3.4 3.1 1 6.4 1.1 3.4.2 4.4.2 13 .2s9.6 0 13-.2a19 19 0 006.3-1.1c1.6-.7 2.9-1.5 4-2.7 1.3-1.2 2.1-2.5 2.8-4 .4-1.3 1-3.1 1.1-6.4.2-3.4.2-4.4.2-13z"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("irl.svg",'<svg viewBox="0 0 200 150" xmlns="http://www.w3.org/2000/svg"><path d="M78.994 97.704H72.02v51.272H42.448V0h42.354c35.354 0 50.474 24.013 50.474 48.028 0 17.995-8.736 38.066-27.686 46.085l27.868 54.862h-30.42l-26.044-51.27zm65.208 51.27V0h29.573v123.183H200v25.792h-55.798zM72.02 72.71h11.004c13.18 0 22.68-10.228 22.68-24.68 0-12.45-7.784-22.235-24.904-22.235h-8.78V72.71zM0 148.975V0h29.573v148.975H0z" fill="#FFF" fill-rule="evenodd"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("left_arrow.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 10.87 21.32"><path d="M9.37 21.32L0 10.66 9.37 0l1.5 1.32-8.21 9.34L10.87 20l-1.5 1.32"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("lightning.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 11.37 22"><path d="M0 7l6.16-7 3.3 7H6.89S5.5 12.1 5.5 12.17h5.87L6.09 22l.66-7H.88l2.89-8z"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("line_graph.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 13.91"><path d="M2.93 13.91L0 11.45l7.72-9.19 6.18 4.15L19.01 0 22 2.38l-7.31 9.17-6.25-4.19-5.51 6.55"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("lock.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 17.08 22"><path d="M15.08 10.86V20H2v-9.14h13.08M8.54 0a6.31 6.31 0 0 0-6.31 6.31v2.55H0V22h17.08V8.86h-2.23V6.31A6.31 6.31 0 0 0 8.54 0zM4.63 8.86V6.31a3.91 3.91 0 0 1 7.81 0v2.55z"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("logo.svg",'<svg viewBox="0 0 124 17" xmlns="http://www.w3.org/2000/svg"><g fill-rule="evenodd"><path d="M13.778 2.823l-.1-.1c-.908-.908-2.118-1.446-3.462-1.446-1.344 0-2.588.538-3.462 1.445-.235.235-.436.504-.638.773 0 .033-.034.033-.034.067 0 .067.068.134.135.134h.067c.57-.2 1.176-.336 1.815-.336 1.41 0 2.72.572 3.66 1.48.033.033.067.033.1.033h1.85c.066 0 .133-.068.133-.135V2.924c-.034-.034-.034-.068-.067-.1zm-.1 5.813h-1.884c-.973 0-1.78-.74-1.847-1.714 0-.067-.067-.134-.135-.134-.403.034-.772.202-1.075.47-.033 0-.033.034-.067.034l-.034.034v.033l-.033.03-.034.035-.036.033-.034.033-.033.034s0 .034-.033.034l-.034.035s0 .033-.033.033l-.033.034s0 .033-.034.033c0 0 0 .034-.033.034 0 0 0 .032-.034.032 0 0 0 .032-.034.032 0 0 0 .034-.036.034 0 0 0 .032-.034.032v.708c.035 1.007.84 1.814 1.85 1.814h1.344c.067 0 .134.067.134.134v.504c0 .067.066.135.133.135h.036c.807-.168 1.546-.538 2.15-1.042.034-.033.068-.066.068-.1v-.64.035-.607c-.034-.1-.1-.168-.168-.168z"/><path d="M13.576 14.18h-.033c-.94.37-2.017.572-3.092.572-4.702 0-8.533-3.83-8.533-8.535 0-1.11.202-2.15.572-3.092v-.067c0-.034-.068-.1-.136-.1-.033 0-.1.033-.1.066C.84 4.436 0 6.418 0 8.57c0 4.468 3.63 8.098 8.1 8.098 2.183 0 4.132-.84 5.577-2.218.034-.034.067-.067.067-.1 0-.102-.067-.17-.168-.17zm17.206-3.964h4.47c1.04 0 1.78-.706 1.78-1.68v-.17c0-.066-.067-.167-.168-.167h-6.082c-.068 0-.168.065-.168.165v1.714c.033.07.1.135.168.135zm6.485-8.436h-6.485c-.068 0-.168.068-.168.17v1.713c0 .067.067.168.168.168h4.84c1.04 0 1.78-.703 1.78-1.68v-.233c.033-.067-.034-.134-.135-.134z"/><path d="M37.267 14.65h-7.662c-1.243 0-1.982-.704-1.982-1.98V.47c0-.067-.067-.168-.168-.168-1.412.034-2.218.908-2.218 2.32V14.35c0 1.443.874 2.317 2.32 2.317h8.064c1.078 0 1.817-.706 1.817-1.714v-.168c0-.067-.067-.135-.168-.135zm15.123-.032c-.707-.168-1.143-.773-1.143-1.58V.538c0-.068-.034-.1-.068-.135h-.036c-.135-.067-.336-.067-.47-.067-1.11 0-1.85.773-1.85 1.95V14.72c0 1.174.74 1.947 1.85 1.947 1.075 0 1.814-.74 1.814-1.882 0-.067-.035-.135-.1-.168zm10.248.032c-.1 0-.235.035-.302.035-1.143.034-1.714-.538-2.218-1.378l-5.612-9.375c-.033-.034-.067-.068-.134-.068s-.168.068-.168.17V9.24l3.562 5.882c.47.806 1.11 1.546 2.52 1.546 1.31 0 2.184-.64 2.487-1.815v-.067c0-.067-.067-.135-.135-.135zm-1.176-4.838c.068 0 .168-.067.168-.168V.538c0-.068-.033-.135-.1-.135-.135-.033-.337-.067-.437-.067-1.11 0-1.85.773-1.85 1.95v3.93l2.12 3.496c0 .067.066.1.1.1zm16.366 4.806c-.74-.168-1.143-.74-1.143-1.58V.538c0-.068-.067-.135-.134-.135-.165-.067-.3-.067-.434-.067-1.11 0-1.848.773-1.848 1.95V14.72c0 1.174.74 1.947 1.848 1.947 1.075 0 1.814-.74 1.814-1.882v-.034c.033-.065-.034-.1-.1-.132zm23.22-.638c-.033 0-.067 0-.067.033l-.064.034c-.907.436-1.95.638-3.125.638-2.017 0-3.596-.605-4.705-1.747-1.143-1.21-1.747-2.99-1.747-5.31V.438c0-.068-.068-.136-.135-.136-.168-.033-.302-.067-.437-.067-1.11 0-1.848.773-1.848 1.95v7.09c0 4.704 2.487 7.426 6.788 7.426 2.352 0 4.234-.84 5.377-2.383l.033-.067c.034-.034.034-.068.034-.1.065-.1 0-.17-.103-.17z"/><path d="M101.15.27c-.17-.035-.303-.068-.438-.068-1.11 0-1.848.773-1.848 1.95v7.19c0 .907-.134 1.68-.403 2.25v.103c0 .068.07.168.17.168h.068c1.714-.336 2.587-1.747 2.587-4.167V.436c-.033-.1-.067-.134-.134-.167zm15.928 9.643l1.713.303c1.85.336 2.05 1.008 2.05 1.512v.034c0 .067.07.168.17.168h.035c1.378-.168 2.218-.874 2.218-1.85 0-.94-.772-1.544-2.352-1.847L119.2 7.93c-4-.74-4.84-2.89-4.84-4.57 0-.87.236-1.68.706-2.35l.068-.067c0-.033.035-.033.035-.066 0-.067-.067-.168-.168-.168h-.068l-.067.032c-1.85.84-2.924 2.42-2.924 4.3.034 2.52 1.848 4.27 5.14 4.874zm6.586 4.033h-.034l-.067.033c-.974.434-2.117.67-3.394.67-2.02 0-3.8-.605-5.447-1.815-.437-.336-.672-.74-.672-1.21 0-.067-.032-.134-.1-.134-.17-.033-.336-.067-.504-.067-.537 0-1.04.27-1.378.74-.303.403-.437.873-.404 1.344.067.503.336.94.807 1.276 1.715 1.277 3.563 1.882 5.646 1.882 2.553 0 4.637-.874 5.678-2.42l.034-.067c0-.034.034-.067.034-.067-.034-.1-.1-.167-.202-.167z"/><path d="M117.38 3.16c0 .066.067.133.134.133h.27c1.377 0 2.15.37 3.057 1.042.37.302.81.437 1.21.437.54 0 1.045-.27 1.38-.74.27-.336.404-.74.404-1.176 0-.067-.034-.134-.1-.134-.202-.067-.404-.168-.606-.302-.974-.706-1.814-1.11-3.26-1.11-1.478 0-2.52.706-2.486 1.714-.033.034 0 .1 0 .135z"/></g></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("magnifying_glass.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 21.48 21.59"><path d="M21.48 20.18L14.8 13.5a8.38 8.38 0 1 0-1.43 1.4l6.69 6.69zM2 8.31a6.32 6.32 0 1 1 6.32 6.32A6.32 6.32 0 0 1 2 8.31z"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("music_notes_crossout.svg",'<svg viewBox="0 0 25 25" xmlns="http://www.w3.org/2000/svg"><path d="M20.779 17.11l-1.849-1.85V8.93l-5.44.89-1.603-1.602L18.93 7.06V4.18L9.453 5.784 7.856 4.186 20.77 2l.009 15.11zm-1.295 4.362a3.32 3.32 0 0 1-4.656-4.656l4.656 4.656zM8.628 10.615l-.028.005v10.06a3.32 3.32 0 1 1-3.32-3.32 3.29 3.29 0 0 1 1.49.37V8.758l1.858 1.857zm-6.278-7.7L3.764 1.5 24.25 21.985l-1.414 1.414L2.35 2.914z"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("new_message.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22.28 22.73"><path d="M16.58 20.73H2V6.15h9.07l2-2H0v18.58h18.58V8.75l-2 2v9.98z"/><path d="M18.65 0l-4.16 4.15-2 2L8 10.66l-1.59 5.25 5.19-1.6 5-5 2-2 3.71-3.71zm-2.07 7.38l-5.71 5.71-1.23.38-.82-.82.38-1.26 5.25-5.23 2-2L18.65 2l1.67 1.67-1.74 1.71z"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("news.svg",'<svg viewBox="0 0 660 321" xmlns="http://www.w3.org/2000/svg"><path d="m94.3 315.3s-27.9-95.8-33.6-114.9c-4.4-14.6-8.1-31.5-12.1-54.6 2.4 41.7 2.8 53.8 2.8 90.2v79.3h-51.4v-310.6h51s23.5 88.6 29.5 110.4c5.3 19.8 9.3 36 11.7 49.3-1.6-30.3-2-67.9-2-99.1 0-23.9 0-60.7 0-60.7h49.8v310.6h-45.7zm64.7 0v-310.6h119.1v46.5h-64.5v84.1h57.6v43.3h-57.6v90.2h79.8v46.5zm488.3-215.9v.2h-43.7c.6-6.1 2-22.5 2-29.7 0-26.7-6.5-35.5-17.4-35.5-12.5 0-21 11.6-21 35.3 0 33 16.5 45.9 29.6 53.9 4.6 2.8 11.7 7.5 15.9 10 25.6 15.1 47.2 43.8 47.2 99.3 0 56.7-12 87.2-70.1 87.2-39.5 0-72-19.7-72-80 0-7.4 2.5-30.3 4.7-40.1h45.9c-1.4 8.6-2.7 30.4-2.7 37.7 0 34.6 11.3 44.6 23 44.6 9 0 18.4-6 18.4-40.2 0-43.4-8.5-53.4-30.2-67-4.7-2.9-11.5-7-14-8.5-29.5-18.2-42.5-47.6-42.5-84.9 0-51.5 24.8-81.6 67.9-81.6 38.3 0 62.6 23.7 62.6 70.3 0 17-3.2 27.8-3.6 29zm-243.6 39.6c-3.6 22.4-12.2 62-15.2 85.3-4.4 35.2-11.7 85.4-12.5 91h-48.1l-36.8-310.6h52.2c.6 6.6 6.1 65.5 9.3 107.6v.1c1.6 21 3.6 69.4 3 74.8 1.2-5.4 10-54.2 12.8-75.2v-.1c5.7-41.2 8.7-80.1 12.4-107.2h46c3.6 27.1 6.7 65.9 12.4 107.2 2.8 21 11.6 69.8 12.8 75.2 0-5.4 1.4-53.8 3-74.8 3.2-42.1 8.7-101 9.3-107.6h52.2l-36.8 310.6h-48.1c-.8-5.6-8.1-55.8-12.5-91-3.1-23.3-11.7-62.8-15.4-85.3z" fill="#fff"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("no_document.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 21.21 21.21"><path d="M15.2 18.02H5.14V7.96l-1.89-1.9v13.85H17.1M16.07 3.19v10.04l1.9 1.89V1.3H4.14l1.9 1.89h10.03M.008 1.418L1.422.003l19.8 19.8-1.415 1.414z"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("one_document.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 17.4 22"><path d="M15.47 1.92v18.16H1.92V1.92h13.55M17.4 0H0v22h17.4V0z"/><path d="M5.11 6.45h7.82v1.44H5.11zm0 8.1h7.82v1.44H5.11zm0-4.05h7.82v1.44H5.11z"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("open-mic.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 182.5"><path d="M94.2 39.6c-6 0-10.3 4.5-10.3 10.5v82.1c0 6 4.3 10.5 10.3 10.5s10.3-4.5 10.3-10.5V50.1c0-6-4.3-10.5-10.3-10.5zm161.1 0H245v41.3h10.3c6 0 10.3-4.5 10.3-10.5V50.1c.1-6-4.3-10.5-10.3-10.5z"/><path d="M1179.1 0H20.9C9.4 0 0 9.4 0 20.9v140.6c0 11.6 9.4 20.9 20.9 20.9H1179c11.6 0 20.9-9.4 20.9-20.9V20.9c.1-11.5-9.3-20.9-20.8-20.9zM166.4 142.4c0 12.2-8.9 21-21 21H43c-12.2 0-21-8.9-21-21V40c0-12.2 8.9-21 21-21h102.3c12.2 0 21 8.9 21 21v102.4zm161.2-61.9c0 12.2-8.9 21-21 21H245v61.9h-61.9V19h123.4c12.2 0 21 8.9 21 21v40.5zm161-26.4h-82.5v21h82.5v32.2h-82.5v21.5l82.5-.4v35.1H365.2c-12.2 0-21-8.9-21-21V40c0-12.2 8.9-21 21-21h123.4v35.1zm161.1 109.3h-61.9V50.1c0-6-4.3-10.5-10.3-10.5s-10.3 4.5-10.3 10.5v113.3h-61.9V19h123.4c12.2 0 21 8.9 21 21v123.4zm293.1 0h-61.9V50.1c0-6-4.3-10.5-10.3-10.5s-10.3 4.5-10.3 10.5v113.3h-61.9V50.1c0-6-4.3-10.5-10.3-10.5s-10.3 4.5-10.3 10.5v113.3h-61.9V40c0-12.2 8.9-21 21-21h184.9c12.2 0 21 8.9 21 21v123.4zm78.9 0h-61.9V19h61.9v144.4zm160.8-92.8h-61.9V50.1c0-6-4.3-10.5-10.3-10.5-6 0-10.3 4.5-10.3 10.5v82.1c0 6 4.3 10.5 10.3 10.5 6 0 10.3-4.5 10.3-10.5v-20.4h61.9v30.5c0 12.2-8.9 21-21 21h-102.3c-12.2 0-21-8.9-21-21V40c0-12.2 8.9-21 21-21h102.3c12.2 0 21 8.9 21 21v30.6z"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("pause_compact.svg",'<svg width="10" height="10" xmlns="http://www.w3.org/2000/svg"><path d="M.133.4h3.278v9.211H.133zM6.6.4h3.278v9.211H6.6z"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("pause_transparent.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 22"><path d="M20.07 1.93v18.14H1.93V1.93h18.14M22 0H0v22h22V0z"/><path d="M6.62 6.86h2.95v8.29H6.62zm5.82 0h2.95v8.29h-2.95z"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("pencil.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 21.94 22"><path d="M16.92 0L2.16 14.73 0 22l7.18-2.22L21.94 5zM6.16 18.09l-1.7.52-1.12-1.12.52-1.75 13.07-13L19.24 5z"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("people.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 16.47"><path d="M12.55 6.76a4 4 0 1 0 0-4.59 4.41 4.41 0 0 1 0 4.59zm3.07 2.91v5.17H22V9.66l-6.38.01M7 9a4.43 4.43 0 0 0 3.87-2.23 4.41 4.41 0 0 0 0-4.59 4.47 4.47 0 0 0-8.38 2.3A4.48 4.48 0 0 0 7 9zm-7 1.35v6.12h13.89v-6.14l-6.04.01-7.85.01"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("phone.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 10 17"><path d="M8.7 0h.5m-.5 0H1.3C.6 0 0 .6 0 1.4v14.2c0 .8.6 1.4 1.3 1.4h7.3c.7 0 1.3-.6 1.3-1.4V1.4C10 .6 9.4 0 8.7 0zM5 16.2c-.7 0-1.2-.6-1.2-1.2 0-.7.6-1.2 1.2-1.2.7 0 1.2.6 1.2 1.2.1.7-.5 1.2-1.2 1.2zM9 13H1V3h8v10z"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("pin.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 21.82 22"><path d="M21.82 20.62L17 15.83l3.59-3.59-3.04-3.07-3.36.12-4.1-4.1v-3L7.91 0 0 7.91l2.16 2.16 2.84.18 4.1 4.12-.1 3.36 3.08 3.08 3.59-3.59L20.43 22zM11 16.94l.12-3.36-5.27-5.24L3 8.16l-.25-.25 5.16-5.14.22.23v3l5.27 5.27 3.36-.12 1.09 1.09L12.06 18z"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("play.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 22"><path fill="#fff" d="M22 0H0v22h22V0z"/><path fill="#000" d="M15.6 11L7.9 6.5v9"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("play_compact.svg",'<svg width="10" height="12" xmlns="http://www.w3.org/2000/svg"><path d="M9.778 6L0 .5v11z"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("play_transparent.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 22"><path d="M20.07 1.93v18.14H1.93V1.93h18.14M22 0H0v22h22V0z"/><path d="M15.61 11L7.86 6.53v8.94L15.61 11"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("playstore.svg",'<svg width="19" height="20" viewBox="0 0 19 20" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path d="M.692 1.462v17c0 .46.154.846.385 1.076l.077.077 9.538-9.538v-.154L1.077.385C.847.615.692 1 .692 1.462z" fill="#00D2FF"/><path d="M13.846 13.308l-3.154-3.154v-.23l3.154-3.155.077.075L17.693 9c1.076.615 1.076 1.615 0 2.23l-3.847 2.078z" fill="#FFE000"/><path d="M13.923 13.23L10.693 10l-9.616 9.615c.385.385.923.385 1.615.077l11.23-6.46" fill="#FF3A44"/><path d="M2.692.385C2 0 1.462.077 1.077.462L10.692 10l3.23-3.23L2.692.384z" fill="#06E775"/><path d="M2.692.462l15 8.538c.462.308.77.615.77 1 0-.385-.23-.77-.77-1.077l-15-8.538C1.615-.23.77.308.77 1.538v.077c0-1.23.845-1.77 1.922-1.153z" fill="#FFF" opacity=".25"/></g></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("rewind.svg",'<svg viewbox="0 0 354 95" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="a" d="M0 94.321h353.633V0H0z"/></defs><g fill="none" fill-rule="evenodd"><path d="M105.215 44.002c-.278-6.226-4.088-10.315-10.035-10.315-5.483 0-10.593 3.624-11.244 10.315h21.28zm-32.987 4.646c0-14.031 9.664-24.717 22.952-24.717 13.474 0 21.65 10.128 21.65 25.554 0 .836-.093 1.765-.093 2.416-.092.37-.092.743-.092 1.115H84.029c1.022 5.575 5.39 9.385 13.567 9.385 6.318 0 11.429-1.766 15.053-4.646h.93v10.5c-3.438 2.509-9.2 4.368-17.005 4.368-14.868 0-24.346-9.85-24.346-23.975zM173.155 71.321l-6.69-23.788c-1.395-5.297-2.138-8.27-2.51-10.222h-.093c-.371 1.952-1.115 4.925-2.509 10.222l-6.69 23.788h-13.752l-14.404-46.089h11.802l7.434 25.646c1.486 5.204 1.765 6.97 2.23 9.014h.092c.464-1.952.929-4.182 2.324-9.014l7.062-25.646h13.288l6.876 25.646 2.509 9.014h.093c.743-2.51 1.208-4.646 2.416-9.014l7.434-25.646h11.8l-15.239 46.09h-13.473z" fill="#FFF"/><mask id="b" fill="#fff"><use xlink:href="#a"/></mask><path fill="#FFF" mask="url(#b)" d="M216.745 71.321h12.173v-46.09h-12.173zM261.164 71.321H248.99V25.232h41.538v46.09h-12.173V35.824h-17.19z"/><path d="M341.46 58.033c-1.858 2.138-5.668 3.996-10.407 3.996-7.712 0-13.195-5.482-13.195-13.752 0-8.364 5.854-13.753 13.288-13.753 4.367 0 8.549 1.765 10.314 3.717v19.792zm12.173 13.289V0H0v94.322h353.633V83.627H10.694V10.695H341.46V27.74c-2.509-1.95-7.434-3.81-12.358-3.81-13.01 0-23.51 10.594-23.51 24.347 0 14.496 10.315 24.346 23.417 24.346 6.226 0 11.336-2.416 13.845-5.483v4.182h10.78z" fill="#FFF" mask="url(#b)"/><path fill="#FFF" mask="url(#b)" d="M61.358 34.885l-20.197-.079v36.515H28.987V24.213h32.37z"/></g></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("right_arrow.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 10.87 21.32"><path d="M1.5 21.32L0 20l8.21-9.34L0 1.32 1.5 0l9.37 10.66L1.5 21.32"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("role_icon_contributor_equilateral_triangle.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 10 10" ><polygon points="5,1 10,9 0,9"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("role_icon_editor_star.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 10 10"><path d="m5 0 1.43 3.1.1.23.25.04 3.22.46-2.33 2.35-.19.2.05.26L8.1 10 5.21 8.38 5 8.26l-.21.12L1.89 10l.58-3.36.05-.27-.19-.19L0 3.83l3.22-.46.24-.04.11-.24Z"/></svg>')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("role_icon_mediator_square.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 10 10"><rect x="1" y="1" width="8" height="8"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("role_icon_moderator_diamond.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 10 10"><polygon points="5,0 10,5 5,10 0,5"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("role_icon_staff_circle.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 10 10"><circle cx="5" cy="5" r="5"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("role_icon_transcriber_square.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 10 10"><rect x="1" y="1" width="8" height="8"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("sgnarly.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 200"><path d="M31.8 108.5c.3.2.6.3 1 .3 1 0 1.8-.8 1.8-1.8 0-.2 0-.5-.1-.7-2.6-7-4-14.6-4-22.6C30.4 66 37.6 49.8 49 38l.1-.1.1-.1c.2-.3.4-.7.4-1.1v-23c0-1-.8-1.8-1.8-1.8H24.7c-.5 0-1 .3-1.3.6-.5.4-.9.9-1.4 1.3C10.9 24.9 4 40.2 4 57.2s6.9 32.3 18 43.4c2.9 3 6.2 5.6 9.8 7.9zm43-48c-1 .1-1.7.9-1.7 1.8v.4c.5 5.1 2.5 9.7 5.7 13.3l.1.1.6.6.2.2.6.6.2.2c.2.2.4.3.6.5.1.1.2.2.3.2.2.2.4.3.6.5.1.1.2.2.3.2.2.1.4.3.5.4.1.1.2.2.4.3.2.1.4.2.5.4.1.1.3.2.4.3.2.1.4.2.5.3.1.1.3.2.4.2.2.1.4.2.5.3.2.1.3.2.5.2.2.1.3.2.5.3.2.1.3.1.5.2s.3.2.5.2c.2.1.3.1.5.2s.3.1.5.2.4.1.6.2c.2.1.3.1.5.2s.4.1.6.2c.2 0 .3.1.5.1.2.1.4.1.6.1.2 0 .3.1.5.1s.4.1.7.1c.2 0 .3.1.5.1s.5.1.7.1c.1 0 .3 0 .4.1.3 0 .6 0 .8.1h2c12.7-.3 22.9-10.6 22.9-23.4v-17c0-1 .8-1.8 1.8-1.8h6.4c1 0 1.8-.8 1.8-1.8 0-.2 0-.3-.1-.5-2.1-10-6.6-19.2-12.9-26.9-.3-.4-.8-.7-1.4-.7H98.1c-1 0-1.8.8-1.8 1.8v23.6c.1 12.3-9.4 22.4-21.5 23.2z"/><path d="M169 13.7c-.3-.4-.8-.7-1.4-.7-1 0-1.8.8-1.8 1.8 0 .2 0 .4.1.6v.1c4.6 12 7.2 25.2 7.2 38.8 0 59-47.8 106.8-106.8 106.8-13.7 0-26.8-2.6-38.8-7.3-.2-.1-.4-.1-.7-.1-1 0-1.8.8-1.8 1.8 0 .6.3 1.1.7 1.4 18.2 17.4 42.8 28 69.9 28 56 0 101.4-45.4 101.4-101.4 0-27.1-10.6-51.6-28-69.8z"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("share.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 17.94 22"><path d="M16.03 7.39v12.7H1.91V7.39H0V22h17.94V7.39h-1.91"/><path d="M8.08 3.7v11.81h1.91V3.63l2.99 2.98 1.35-1.35L9.07 0 3.61 5.46l1.36 1.35L8.08 3.7"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("share_android.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 19.92"><path d="M15 14.08a2.91 2.91 0 0 0-2 .77L5.91 10.7A3.27 3.27 0 0 0 6 10a3.27 3.27 0 0 0-.09-.7L13 5.19A3 3 0 1 0 12 3a3.27 3.27 0 0 0 .09.7L5 7.81a3 3 0 1 0 0 4.38l7.12 4.16a2.82 2.82 0 0 0-.08.65A2.92 2.92 0 1 0 15 14.08z"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("soundcloud.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 8.69"><path d="M.23 5.19a.08.08 0 0 0-.08.08L0 6.38l.15 1.1a.08.08 0 0 0 .08.08.08.08 0 0 0 .08-.08l.17-1.1-.17-1.11a.08.08 0 0 0-.08-.07zm.77-.6a.08.08 0 0 0-.17 0l-.2 1.8.2 1.76a.08.08 0 0 0 .17 0l.22-1.76L1 4.59zm3.1-1.66a.15.15 0 0 0-.1.15l-.16 3.3L4 8.52a.15.15 0 0 0 .3 0l.18-2.14-.18-3.3a.16.16 0 0 0-.15-.15zM2.54 4.08a.12.12 0 0 0-.12.12l-.17 2.18.18 2.12a.12.12 0 0 0 .23 0l.2-2.12-.2-2.19a.12.12 0 0 0-.12-.12zm3.24 4.59A.19.19 0 0 0 6 8.49l.15-2.1L6 2a.19.19 0 0 0-.37 0l-.14 4.4.14 2.1a.19.19 0 0 0 .18.18zm3.34 0a.26.26 0 0 0 .25-.25l.11-2-.11-5.11a.25.25 0 0 0-.51 0l-.1 5.08.1 2a.26.26 0 0 0 .25.25zm-1.68 0a.22.22 0 0 0 .22-.22l.13-2.07L7.65 2a.22.22 0 0 0-.44 0L7.1 6.39l.12 2.07a.22.22 0 0 0 .22.22zm-4.09 0a.14.14 0 0 0 .13-.13l.19-2.14-.19-2a.13.13 0 0 0-.27 0L3 6.38l.17 2.14a.14.14 0 0 0 .13.13zm-1.6-.14a.1.1 0 0 0 .1-.1l.21-2.05-.21-2.13a.1.1 0 0 0-.1-.1.1.1 0 0 0-.1.1l-.19 2.13.19 2.05a.1.1 0 0 0 .1.1zm6.52-6.65a.24.24 0 0 0-.27.24l-.07 4.27L8 8.44a.24.24 0 0 0 .47 0l.12-2.05-.08-4.27a.24.24 0 0 0-.24-.24zM5 8.67a.17.17 0 0 0 .17-.17l.17-2.12-.21-4.05a.17.17 0 0 0-.34 0l-.15 4.06.15 2.12a.17.17 0 0 0 .21.16zm1.84-.2l.14-2.09-.18-4.54a.2.2 0 0 0-.4 0l-.13 4.55.13 2.08a.2.2 0 0 0 .4 0zm10.7-4.71a2.46 2.46 0 0 0-1 .19 4.34 4.34 0 0 0-4.32-4 4.4 4.4 0 0 0-1.57.29c-.18.07-.23.15-.24.29v7.86a.3.3 0 0 0 .27.29h6.82a2.46 2.46 0 0 0 0-4.92zM10 .58a.27.27 0 0 0-.27.27l-.16 5.54.11 2a.27.27 0 0 0 .54 0l.12-2-.12-5.54A.27.27 0 0 0 10 .58z"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("spotify.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M10 0a10 10 0 1 0 10 10A10 10 0 0 0 10 0zm4.63 14.21a.62.62 0 0 1-.55.5.68.68 0 0 1-.44-.12 9.2 9.2 0 0 0-2.62-1.06l-.32-.07h-.16l-.39-.06a12.26 12.26 0 0 0-1.74-.12 16.86 16.86 0 0 0-3 .31l-.41.04a1 1 0 0 1-.35 0 .62.62 0 0 1-.52-.59.61.61 0 0 1 .47-.61l1.17-.24A15.2 15.2 0 0 1 9 12a10.92 10.92 0 0 1 5.28 1.52.65.65 0 0 1 .35.68zm1.24-2.8a.76.76 0 0 1-.59.64.73.73 0 0 1-.57-.09 11.39 11.39 0 0 0-3.84-1.42 13.09 13.09 0 0 0-6.09.24.77.77 0 0 1-.92-.32.75.75 0 0 1 .14-.94.93.93 0 0 1 .37-.23A12.15 12.15 0 0 1 7 8.79l1.12-.06A14.82 14.82 0 0 1 14.37 10c.4.19.79.4 1.18.63a.76.76 0 0 1 .35.78zM16.6 9a.89.89 0 0 1-.67-.09 12.84 12.84 0 0 0-4.61-1.51 19 19 0 0 0-3.82-.22 13.88 13.88 0 0 0-3.17.52.93.93 0 1 1-.53-1.79 14.6 14.6 0 0 1 2.9-.53c.61-.05 1.23-.07 1.83-.1a19.71 19.71 0 0 1 6 .94 11.28 11.28 0 0 1 2.33 1.05A.92.92 0 0 1 16.6 9z"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("star.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 20.9"><path d="M11 7l.36 1.27.4 1.39h5l-2.55 2.12-1 .8.34 1.2.77 2.7-2.28-1.52L11 14.2l-1.06.71-2.28 1.52.77-2.7.34-1.2-1-.8-2.49-2.12h5l.4-1.39L11 7m0-7L8.8 7.7H0l6.6 5.5-2.2 7.7 6.6-4.4 6.6 4.4-2.2-7.7L22 7.7h-8.8L11 0z"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("tag.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 21.96"><path d="M18.22 2L20 3.8v4.07L8.9 19.12l-6.06-6.05L14 2.09 18.22 2M19 0l-5.87.11L0 13.05 8.91 22 22 8.69V3l-3-3z"/><path d="M16.9 3.38A1.59 1.59 0 1 0 18.49 5a1.59 1.59 0 0 0-1.59-1.62z"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("tap.svg",'<svg xmlns="http://www.w3.org/2000/svg"><circle cx="12" cy="12" r="7.5"/><path d="M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10zm0 2C5.373 24 0 18.627 0 12S5.373 0 12 0s12 5.373 12 12-5.373 12-12 12z"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("ten.svg",'<svg viewbox="0 0 518 122" xmlns="http://www.w3.org/2000/svg"><g fill="#FFF" fill-rule="nonzero"><path d="M0 7.248v14.388h11.331v92.117h17.051V7.248zM40.307 60.474a54.16 54.16 0 0 1 15.851-39.29 53.889 53.889 0 0 1 39.24-15.775 53.889 53.889 0 0 1 39.24 15.775 54.16 54.16 0 0 1 15.852 39.29 54.16 54.16 0 0 1-15.851 39.29 53.889 53.889 0 0 1-39.24 15.774 53.889 53.889 0 0 1-39.24-15.774 54.16 54.16 0 0 1-15.852-39.29zm93.186 0c.525-13.996-6.624-27.16-18.635-34.315a38.068 38.068 0 0 0-38.974 0c-12.01 7.155-19.16 20.319-18.634 34.315-.526 13.996 6.623 27.16 18.634 34.314a38.068 38.068 0 0 0 38.974 0c12.011-7.154 19.16-20.318 18.635-34.314zM111.91 32.076L67.934 76.16a31.915 31.915 0 0 0 5.395 7.735 30.124 30.124 0 0 0 5.99 4.922l43.706-44.084a32.456 32.456 0 0 0-5.396-7.735 30.233 30.233 0 0 0-5.935-4.922h.216zM364.38 7.248v14.388h11.332v92.117h17.05V7.248zM404.688 60.474c0-30.501 24.665-55.227 55.091-55.227 30.426 0 55.091 24.726 55.091 55.227 0 30.5-24.665 55.226-55.091 55.226-30.426 0-55.091-24.725-55.091-55.226zm93.186 0c.525-13.996-6.624-27.16-18.635-34.315a38.068 38.068 0 0 0-38.974 0c-12.011 7.155-19.16 20.319-18.635 34.315-.525 13.996 6.624 27.16 18.635 34.314a38.068 38.068 0 0 0 38.974 0c12.011-7.154 19.16-20.318 18.635-34.314zm-9.82 16.227l-43.977-44.246a31.835 31.835 0 0 0-7.716 5.409 30.176 30.176 0 0 0-4.694 6.22l43.706 44.084a32.374 32.374 0 0 0 7.716-5.409 30.274 30.274 0 0 0 4.964-6.004v-.054zM195.707 98.932V52.955h-11.493v-12.17h11.439V20.392h28.976v12.55h-13.652v7.843h16.188v12.17h-16.188v45.923zM259 39.162a29.799 29.799 0 0 1 22.204 8.587 29.95 29.95 0 0 1 8.876 22.136c0 17.208-13.915 31.157-31.08 31.157s-31.08-13.95-31.08-31.157a30.113 30.113 0 0 1 8.928-22.082A29.96 29.96 0 0 1 259 39.162zm0 47.924a15.575 15.575 0 0 0 12.039-4.908 15.656 15.656 0 0 0 4.149-12.347 15.915 15.915 0 0 0-7.393-15.1 15.83 15.83 0 0 0-16.78 0 15.915 15.915 0 0 0-7.393 15.1 15.657 15.657 0 0 0 3.88 12.039A15.577 15.577 0 0 0 259 87.086zM312.958 98.932h-15.216V40.785h35.882V54.09h-20.666z"/></g></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("the-cosign.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 480 199"><path d="M63.373 70.902c36.362 0 58.645 23.55 60.5 51.745h-23.52C98.96 107.308 86.428 92.592 63.37 92.592c-27.852 0-39.302 20.296-39.302 41.675 0 21.69 11.45 41.986 39.302 41.986 23.21 0 35.742-14.874 36.983-30.366h23.52c-1.703 28.35-24.138 52.055-60.5 52.055C22.677 197.945.86 168.816.86 134.267c0-34.238 21.817-63.365 62.513-63.365zm124.847 35.325v56.393c0 24.944-10.368 35.325-29.09 35.325s-29.09-10.38-29.09-35.325v-56.393c0-24.944 10.368-35.325 29.09-35.325s29.09 10.38 29.09 35.325zm-23.21 1.547c0-10.536-.775-13.635-5.88-13.635-5.105 0-5.88 3.099-5.88 13.635v53.294c0 10.536.775 13.635 5.88 13.635 5.105 0 5.88-3.096 5.88-13.635v-53.294zm148.585 51.747c0 26.494-15.318 38.424-55.703 38.424-40.385 0-63.75-11.93-63.75-46.168h23.21c0 16.73 9.903 24.478 40.54 24.478 24.448 0 32.493-4.648 32.493-15.184 0-15.182-18.877-15.647-45.183-19.675-23.52-3.564-47.967-8.676-47.967-35.943 0-21.069 13.152-34.548 54.002-34.548 43.946 0 60.81 11.93 60.81 39.97h-23.21c0-13.635-9.592-18.28-37.6-18.28-24.912 0-30.792 4.648-30.792 12.858 0 11.31 16.093 13.635 32.805 16.113 32.493 4.801 60.345 6.816 60.345 37.955zm29.378-87.07v123.942h-23.21V72.451zm41.112 50.352v-15.03c0-10.535-.927-13.634-5.88-13.634-5.105 0-5.88 3.099-5.88 13.635v53.294c0 10.536.775 13.635 5.88 13.635 5.105 0 5.88-3.096 5.88-13.635v-5.732h-5.88V132.1h29.09v64.294h-9.285l-3.715-8.831c-4.798 6.042-11.295 10.38-19.65 10.38-16.712 0-25.53-10.38-25.53-35.324v-56.391c0-24.944 10.368-35.325 29.09-35.325 18.723 0 29.09 10.38 29.09 35.325v16.576h-23.21zM480 72.451v123.942h-23.21l-19.96-61.197v61.197h-23.21V72.451h23.21l19.96 61.195V72.451zM47.017 9.004H28.325V51.45h-9.633V9.004H0V0h47.017zM77.782 0v51.45h-9.635V30.549H62.11V51.45h-9.635V0h9.635v20.901h6.037V0zm15.16 9.004v12.22h28.263v9.004H92.942v12.22h28.263v9.004H83.308V0h37.897v9.004z" fill="#FFF"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("thumbs_down.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 21.62 21.36"><path d="M8 21.36a2.12 2.12 0 0 1-1.06-.29c-2.5-1.42-1-5-.16-6.95.11-.27.25-.6.31-.77a.78.78 0 0 0-.6-.36H2.37A2.29 2.29 0 0 1 0 10.64c0-.82 1.59-5.4 2.92-9.09A2.39 2.39 0 0 1 5.1.07h10.56v12.79l-.84.13A3.45 3.45 0 0 0 13 14.08a13.16 13.16 0 0 0-.82 1.85c-1.06 2.69-2 4.79-3.49 5.31a2.06 2.06 0 0 1-.69.12zM5.1 2.07a.48.48 0 0 0-.31.17C3.48 5.89 2.07 10.06 2 10.68c0 .22.1.32.37.32h4.1a2.61 2.61 0 0 1 2.61 2.4 4.29 4.29 0 0 1-.48 1.51c-.46 1.09-1.65 3.89-.7 4.42.52 0 1.3-1.4 2.38-4.14a10 10 0 0 1 1.13-2.38 5.27 5.27 0 0 1 2.25-1.56V2.07zM16.76 0h4.86v12.96h-4.86z"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("thumbs_up.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 21.62 21.36"><path d="M16.52 21.29H6V8.5l.84-.13a3.45 3.45 0 0 0 1.82-1.09 13.16 13.16 0 0 0 .82-1.85c1.06-2.69 2-4.78 3.52-5.31a2.06 2.06 0 0 1 1.74.17c2.5 1.42 1 5 .16 6.95-.11.27-.25.6-.31.77a.78.78 0 0 0 .6.36h4.1a2.29 2.29 0 0 1 2.37 2.37c0 .82-1.59 5.4-2.92 9.09a2.39 2.39 0 0 1-2.22 1.46zm-8.52-2h8.56a.48.48 0 0 0 .31-.17c1.31-3.65 2.73-7.82 2.79-8.44 0-.22-.1-.32-.37-.32h-4.1A2.61 2.61 0 0 1 12.54 8 4.29 4.29 0 0 1 13 6.46c.45-1.06 1.64-3.89.7-4.43-.52 0-1.3 1.4-2.38 4.14a10 10 0 0 1-1.13 2.38A5.28 5.28 0 0 1 8 10.11zM0 8.4h4.86v12.96H0z"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("twitter.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 16.43"><path d="M20 1.89l-2.3 2.16v.68a12.28 12.28 0 0 1-3.65 8.92c-5 5.13-13.1 1.76-14.05.81 0 0 3.78.14 5.81-1.76A4.15 4.15 0 0 1 2.3 9.86h2S.81 9.05.81 5.81A11 11 0 0 0 3 6.35S-.14 4.05 1.49.95a11.73 11.73 0 0 0 8.37 4.19A3.69 3.69 0 0 1 13.51 0a3.19 3.19 0 0 1 2.57 1.08 12.53 12.53 0 0 0 3.24-.81l-1.75 1.89A10.46 10.46 0 0 0 20 1.89z"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("two_documents.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18.59 22"><path d="M16.76 5.87v14.3H6.22V5.87h10.54M18.59 4H4.39v18h14.2V4z"/><path d="M7.73 8.45h7.44V9.9H7.73zm0 7.7h7.44v1.45H7.73zm0-3.85h7.44v1.45H7.73z"/><path d="M3.45 19.89H0V0h16.13v3.12H14.2V1.93H1.93v16.03h1.52v1.93"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("unlock.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16.56 22"><path d="M14.56 11.26V20H2v-8.74h12.56M8.28 0a6.12 6.12 0 0 0-6.12 6.12v3.14H0V22h16.56V9.26H4.49V6.12a3.79 3.79 0 0 1 7.58 0h2.33A6.12 6.12 0 0 0 8.28 0z"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("up_arrow.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 21.32 10.91"><path d="M20 10.91l-9.34-8.24-9.34 8.24L0 9.41 10.66 0l10.66 9.41-1.32 1.5"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("upload_image.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 23"><path d="M17.13 9.726c.447 0 .81.358.81.798 0 .44-.363.8-.81.8-.447 0-.81-.36-.81-.8 0-.44.363-.798.81-.798zM6.75 6.228H22V23H0V6.228h3.05v2.02H1.94V20.98h18.12V8.248H6.75v-2.02zM11 19.364c-2.576 0-4.673-2.044-4.7-4.583-.02-1.876 1.112-3.58 2.866-4.312 1.755-.733 3.785-.35 5.14.972 1.354 1.32 1.765 3.316 1.04 5.053-.724 1.737-2.44 2.87-4.346 2.87zm0-7.352v.01c-.74 0-1.447.292-1.966.81-.52.52-.805 1.22-.794 1.95.027 1.495 1.275 2.688 2.793 2.67 1.517-.018 2.735-1.24 2.726-2.736-.01-1.496-1.242-2.703-2.76-2.704zM5.69 3.508h3.56v1.557H5.69v3.508H4.11V5.065H.55V3.508h3.56V0h1.58v3.508z"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("verified.svg",'<svg viewBox="0 0 500 80" xmlns="http://www.w3.org/2000/svg"><path d="M60.133 0h16.91L46.795 79.78h-16.79L0 0h17.147l16.91 48.82c1.308 4.168 3.69 10.718 4.643 14.647h.237c.953-3.81 3.216-10.36 4.764-14.646L60.135 0zm82.163 0v13.812H101.69V30.84h37.867v13.813H101.69v21.315h41.2V79.78H85.855V0h56.442zm29.77 79.78h-15.838V0h31.198c18.933 0 27.03 12.86 27.03 25.72 0 12.384-6.906 21.553-18.337 24.292l23.336 28.577v1.19h-17.504l-29.888-36.914V79.78zm0-56.68l14.407 15.838c7.026-.596 12.146-5.478 12.146-13.218 0-6.668-4.17-11.907-13.338-11.907h-13.218V23.1zm57.514 56.68V0h15.837v79.78H229.58zM317.22 0v13.812H278.4V30.96h35.96v13.693H278.4V79.78h-15.836V0h54.655zm12.145 79.78V0h15.837v79.78h-15.837zM418.79 0v13.812h-40.605V30.84h37.867v13.813h-37.867v21.315h41.2V79.78H362.35V0h56.44zm39.296 0C488.57 0 500 19.17 500 40.128c0 25.602-14.646 39.653-41.795 39.653h-25.482V0h25.363zm-9.884 13.813v52.155h10.48c16.312 0 25.48-6.788 25.48-25.84 0-18.576-9.882-26.315-25.48-26.315H448.2z" fill="#FFF" fill-rule="evenodd"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("wordmark.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 15"><path d="M11.7 2.9s0-.1 0 0c-.8-.8-1.7-1.2-2.8-1.2-1.1 0-2.1.4-2.8 1.1-.2.2-.3.4-.5.6v.1c0 .1.1.1.1.1.4-.2.9-.3 1.4-.3 1.1 0 2.2.5 2.9 1.2h1.6c.1 0 .1-.1.1-.1V2.9c.1 0 0 0 0 0zm-.1 4.6h-1.5c-.8 0-1.4-.6-1.5-1.4.1 0 0-.1 0-.1-.3 0-.6.2-.8.4v.2c-.6 1.8.1 2.4.9 2.4h1.1c.1 0 .1.1.1.1v.4c0 .1.1.1.1.1.6-.1 1.2-.4 1.7-.8V7.6c.1 0 0-.1-.1-.1z"/><path d="M11.6 11.9s-.1 0 0 0c-.1 0-.1 0 0 0-.1 0-.1 0 0 0-.8.3-1.6.5-2.5.5-3.7 0-6.8-3-6.8-6.8 0-.9.2-1.7.5-2.5 0-.1-.1-.1-.2-.1h-.1C1.4 4.2.8 5.7.8 7.5c0 3.6 2.9 6.4 6.4 6.4 1.7 0 3.3-.7 4.4-1.8V12c.1 0 0-.1 0-.1zm13.7-3.1h3.5c.8 0 1.4-.5 1.4-1.3v-.2c0-.1-.1-.1-.1-.1h-4.8c-.1 0-.1.1-.1.1v1.4c-.1 0 0 .1.1.1zm5.1-6.7h-5.2c-.1 0-.1.1-.1.1v1.4c0 .1.1.1.1.1H29c.8 0 1.4-.5 1.4-1.3v-.2c.1-.1.1-.1 0-.1z"/><path d="M30.4 12.3h-6.1c-1 0-1.6-.6-1.6-1.6V1c0-.1-.1-.1-.1-.1-1.1 0-1.8.7-1.8 1.8V12c0 1.1.7 1.8 1.8 1.8H29c.8 0 1.4-.6 1.4-1.3v-.1c.1 0 .1-.1 0-.1zm12 0c-.6-.1-.9-.6-.9-1.3V1.1s0-.1-.1-.1H41c-.9 0-1.5.6-1.5 1.5v9.9c0 .9.6 1.5 1.5 1.5.8 0 1.4-.6 1.5-1.5 0-.1 0-.1-.1-.1zm8.2 0h-.2c-.9 0-1.4-.4-1.8-1.1l-4.5-7.4-.1-.1c-.1 0-.1.1-.1.1V8l2.8 4.7c.4.6.9 1.2 2 1.2 1 0 1.7-.5 2-1.4 0-.2-.1-.2-.1-.2zm-.9-3.8c.1 0 .1-.1.1-.1V1.1c0-.1 0-.1-.1-.1h-.4c-.9 0-1.5.6-1.5 1.5v3.1l1.7 2.8c.1 0 .1.1.2.1zm13 3.8c-.6-.1-.9-.6-.9-1.2v-10c0-.1 0-.1-.1-.1h-.3c-.9 0-1.5.6-1.5 1.5v9.9c0 .9.6 1.5 1.5 1.5.8 0 1.4-.6 1.5-1.5l-.2-.1zm18.4-.5H81c-.7.3-1.5.5-2.5.5-1.6 0-2.9-.5-3.7-1.4-.9-1-1.4-2.4-1.4-4.2V1c0-.1 0-.1-.1-.1H73c-.9 0-1.5.6-1.5 1.5V8c0 3.7 2 5.9 5.4 5.9 1.9 0 3.4-.7 4.3-1.9v-.1c0-.1 0-.1-.1-.1z"/><path d="M81.2.9h-.3c-.9 0-1.5.6-1.5 1.5v5.7c0 .7-.1 1.3-.3 1.8 0 .1.1.1.1.1 1.4-.3 2.1-1.4 2.1-3.3V1c0-.1-.1-.1-.1-.1zm12.7 7.6l1.4.3c1.5.3 1.6.8 1.6 1.2 0 .1.1.1.1.1 1.1-.1 1.8-.7 1.8-1.5s-.6-1.2-1.9-1.5l-1.4-.3c-3.2-.6-3.8-2.3-3.8-3.6 0-.7.2-1.3.6-1.9v-.2c0-.1-.1-.1-.1-.1-1.5.7-2.3 1.9-2.3 3.4-.1 2.3 1.3 3.7 4 4.1zm5.2 3.2c-.1.1-.1.1 0 0-.9.4-1.8.6-2.8.6-1.6 0-3-.5-4.3-1.4-.3-.3-.5-.6-.5-1 0-.1 0-.1-.1-.1s-.3-.1-.4-.1c-.4 0-.8.2-1.1.6-.2.3-.4.7-.3 1.1.1.4.3.7.6 1 1.4 1 2.8 1.5 4.5 1.5 2 0 3.7-.7 4.5-1.9v-.1c0-.1 0-.2-.1-.2z"/><path d="M94.1 3.2c0 .1.1.1.1.1h.2c1.1 0 1.7.3 2.4.8.3.2.6.3 1 .3s.8-.2 1.1-.6c.2-.3.3-.6.3-.9 0-.1 0-.1-.1-.1-.2 0-.3-.1-.5-.2-.8-.6-1.4-.9-2.6-.9-1.2 0-2 .6-2 1.4.1 0 .1 0 .1.1z"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("x.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 22"><path d="M22 1.39L20.61 0 11 9.62 1.39 0 0 1.39 9.62 11 0 20.61 1.39 22 11 12.38 20.61 22 22 20.61 12.38 11 22 1.39"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("x_small.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12.18 12.18"><path d="M12.18 1.41L10.77 0 6.09 4.68 1.41 0 0 1.41l4.68 4.68L0 10.77l1.41 1.41L6.09 7.5l4.68 4.68 1.41-1.41L7.5 6.09l4.68-4.68z"/></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("youtube.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20.01 14.07"><path d="M19.81 3A4.32 4.32 0 0 0 19 1a2.86 2.86 0 0 0-2-.8C14.21 0 10 0 10 0S5.8 0 3 .2A2.87 2.87 0 0 0 1 1a4.32 4.32 0 0 0-.8 2S0 4.51 0 6.06V8a30 30 0 0 0 .2 3 4.33 4.33 0 0 0 .8 2 3.39 3.39 0 0 0 2.2.85c1.46.14 5.9.19 6.68.2h.4c1 0 4.35 0 6.72-.21a2.87 2.87 0 0 0 2-.84 4.32 4.32 0 0 0 .8-2 30.31 30.31 0 0 0 .2-3.21V6.28A30.31 30.31 0 0 0 19.81 3zM7.94 9.63V4l5.41 2.82z"/></svg>\n')}])},function(t,e,n){"use strict";n(249),n(144),n(250),n(251),n(252),n(253);$((function(){FastClick.attach(document.body)}));n(69),n(255),n(256),n(257),n(258),n(259),n(260),n(261),n(262),n(263),n(264);$(document).on("click",".atwho-container",(function(t){t.stopPropagation()}));n(265),n(266),n(267);_.mixin({eachCons:function(t,e,n){return _.zipWith.apply(null,_.times(e,(function(n){return _.slice(t,n,t.length-e+n+1)})).concat(n))},flattenObject:function(t){return _.reduce(t,(function(t,e,n){return _.isPlainObject(e)?_.each(_.flattenObject(e),(function(e,r){t[n+"."+r]=e})):t[n]=e,t}),{})}});var r=n(79),i=n.n(r);window.I18n=Object.assign(i.a,{defaultLocale:"en",translations:{en:{authlogic:{error_messages:{login_not_found:"^User does not exist.",password_invalid:"^Incorrect password."},errors:{models:{user_session:{attributes:{second_factor_credential:{required:"^To help ensure account security, we've sent an email to confirm your login. Please enter the confirmation code below."}}}}},attributes:{user_session:{second_factor_credential:"Confirmation code"}}},datetime:{distance_in_words:{about_x_hours:{one:"an hour",other:"%{count} hours"},about_x_months:{one:"a month",other:"%{count} months"},about_x_years:{one:"a year",other:"%{count} years"},over_x_years:{one:"a year",other:"%{count} years"},almost_x_years:{one:"a year",other:"%{count} years"}}},about:{heading:"About"},sign_up:"Sign Up",annotation:{present_tense:"annotate",past_tense:"annotated",singular_present:"annotates",present_participle:"annotating",singular_noun:"annotation",singular_noun_capitalized:"Annotation",one:"annotation",plural_noun:"annotations",other:"annotations",zero:"annotations",community_brand_name:"Genius Annotation",verified_brand_name:"Verified Annotation",prompt:"Write an Annotation",placeholder:"Dont just put the lyric in your own wordsdrop some knowledge!",description_placeholder:"Say something interesting",offsite_placeholder:"Add your annotation",new_community_prompt:"Start the Genius Annotation",new_verified_prompt:"Add your Verified Annotation",propose_edit_prompt:"Edit",sign_up_to_annotate:"Sign Up to Start Annotating",creating:"Creating annotation",empty_validation:"Can't save an empty annotation",cannot_annotate_on_locked_song:"You need 600 IQ to add annotations to locked songs.",currently_annotating:{header:"Annotation In Progress",default_body:"%{name} is currently annotating this line.",taking_awhile_body:"%{name} is currently annotating this line but it might be taking awhile or something could have gone wrong. It might be best to delete this and start over."},prompts:{default:"Add knowledge to earn IQ",description:"Start the %{annotation_name}"},share:"Share",unreviewed_notice:{notice_fragment:"This annotation is",notice_description_fragment:"This {{annotation_name}} is",notice_adjective:"unreviewed",tooltip:"Genius is a crowdsourced websitethis annotation has not yet been edited, reviewed, or fact checked by the Genius Editorial Board.",tooltip_link:"Learn more about editorial review"}},auth_form:{title_sign_up:"Sign Up",title_sign_in:"Sign In",facebook_sign_in_button:"Sign In With Facebook",google_sign_in_button:"Sign In With Google",twitter_sign_in_button:"Sign In With Twitter",facebook_sign_up_button:"Sign Up With Facebook",google_sign_up_button:"Sign Up With Google",twitter_sign_up_button:"Sign Up With Twitter",or_sign_up_with_email:"Or sign up with email",already_have_account:"Already have an account? ",sign_in_here:"Sign in here",need_an_account:"Need to create an account? ",sign_up_here:"Sign up here",terms_of_service_agreement:"By clicking Sign Up, you are indicating that you have read and agree to the ",terms_of_service:"Terms of Service",sign_up:"Sign Up",sign_in:"Sign In",form_label_username:"Username",form_label_password:"Password",form_label_email_address:"Email address",password_required:"Must enter a password.",username_required:"Must enter a username.",email_required:"Must enter an email address.",email_invalid:"Entered value does not match email format.",close:"Close",forgot_password:"I forgot my password",forgot_password_form:{title:"Forgot Password?",instructions:"Enter your email address or username to reset your password.",username_or_email:{label:"Username or email address",required:"Must enter an username or email address"},submit:"Reset Password",cancel:"Cancel"}},annotation_edit:{one:"Proposed Edit",other:"Proposed Edits",show_message:"Show",resolve_message:"Resolve",hide_message:"Hide Proposed Edits"},article:{zero:"articles",one:"article",other:"articles",sponsor:{phrase:"Presented by:"}},video:{zero:"videos",one:"video",other:"videos"},album:{zero:"albums",one:"album",other:"albums",metadata:{name:"Name",release_date:"Release Date",custom_cover_art_url:"Cover Art URL",custom_header_image_url:"Header Image URL",artist:"Artist",album_performances:"Credits"},actions:{destroy:"Delete",lock:"Lock",super_lock:"Super Lock",unlock:"Unlock",sort_songs:"Sort Songs By Unreviewed Annotations"},action_confirmations:{destroy:"Are you sure you want to delete this album?",lock:"Are you sure you want to lock this album?",super_lock:"Are you sure you want to super lock this album?",unlock:"Are you sure you want to unlock this album?",admin_default:"Are you sure you want to perform this admin action?"},lock_state:{locked:"locked",super_locked:"super locked"}},comment:{signup_prompt_header:"Sign up for Genius",signup_prompt_preamble:"Tired of entering your email address? Create a Genius account and you'll never have to worry about it (or anything else) ever again:",state:{rejected:"rejected",marked_spam:"marked spam",archived:"archived",accepted:"accepted",integrated:"integrated"}},voting:{upvote:{annotation:"This is a good %{name}",comment:"This is a good suggestion",forumpost:""},downvote:{annotation:"This needs improvement",comment:"This is a bad suggestion  it should be deleted",forumpost:""}},annotator:{already_annotated_referent:"An annotation cannot contain another annotation",unable_to_anchor:"Whoops, couldn't find that line!",referent_mismatch:"Whoops, couldn't find that line!"},embed:{unable_to_anchor:"Sorry, we couldn't find where this annotation belongs on the page. But you can read it here:",click_underlying_link:"Go to the original link:"},asset_remover:{invalid_uri:"That url doesn't seem to be valid.",not_found:"Whoops, couldn't find that url!"},follow_message:{user:"Follow %{name} to see their annotations and pyongs in your newsfeed",discussion:"Follow this discussion to get notified when there are new posts",group:"Following %{name} is the same as following all of its discussions",artist:"Follow %{name} to see their new songs, texts, and annotations in your newsfeed",song:"Follow %{name} to get notified of new annotations and comments",webpage:"Follow %{name} to get notified of new annotations"},pyong_tooltip_text:"PYONG this %{text_type} to promote it to your Genius followers!",pressed_pyong_tooltip_text:"You pyonged this %{text_type} recently! You'll be able to pyong it again in a bit",manage_tags:{just_delete_warning:"AHHH! Do you really want to just delete that tag (instead of choosing a replacement to transfer associated songs to)?",delete_and_transfer_warning:"BEWARE! Do you really want to delete that tag, and transfer everything associated with it to this one??",tag_transfer_finished:"Successfully transferred everything associated with <b>%{from_tag}</b> to <b>%{to_tag}</b> and deleted <b>%{from_tag}</b>."},body_content_conflict_message:"This text has been changed by someone else. Copy your work to your clipboard and <a href='%{url}'>click here to reload</a>",media_player_error_message:"There was a problem loading the player media. <a href='#' id='fix_audio'>Fix it!</a>",recaptcha_explanation:"Sorry, but this %{model_name} looks like it might be spam! Prove to us you're a human with the form below.",cloudflare_always_on_message:"Genius is experiencing a service disruption. Some features or pages may not work. We're working hard to fix it, so check back soon!",iq:"IQ",load_more:"Load More",sle:{edit_instruction:"Edit the song bio to add:",name:"%{type_name} Bio",prependable_to_name:"About"},editing:{dirty_unload:"You have unsaved edits!",dirty_unload_confirm_box:"You have unsaved edits! Do you want to discard changes?"},mark_spam:{confirm:"Are you sure you want to mark user as spam?"},mark_ham:{confirm:"Are you sure you want to mark user as ham?"},mass_delete_unreviewed_activity:{confirm:"Are you sure you want to delete all unreviewed annotations, all unreviewed comments, and all forum posts?"},mass_delete_votes:{votes:{confirm:"Are you sure you want to delete all votes?"},upvotes:{confirm:"Are you sure you want to delete all upvotes?"},downvotes:{confirm:"Are you sure you want to delete all downvotes?"}},forum_post:{deleted_body:"This post has been deleted."},question:{placeholder:"Ask a question",question:{one:"%{name} asked a question",other:"%{name} asked %{count} questions"},answer:{contributor:"{{count}} contributor",contributor_plural:"{{count}} contributors",one:"%{name} answered a question",other:"%{name} answered %{count} questions"},form:{body:{label:"Ask a question"},author_name:{label:"Name",placeholder:"Your name"},author_email:{label:"Email",placeholder:"Your email"},submit:"Submit",submitting:"Submitting",cancel:"Cancel",success:"Thanks for the question!"},moderate:{pin:"Pin",unpin:"Unpin",archive:"Archive Question",archive_confirmation:"Are you sure you want to archive this question?",edit:"Edit Question"},edit:{success:"Question successfully edited",failure:"An unexpected error ocurred"}},answer:{placeholder:"Answer this question",question:"Answer question <iq>{{ answerIq }}</iq>",form:{markdown:{label:"Answer this question"},add_source:{label:"Add source?"},artist_name:{label:"Artist name",prompt:"Start typing to search existing artists"},source_name:{label:"Source name"},source_url:{label:"Source URL"},pin_question:{label:"Pin this question?"},submit:"Submit",submitting:"Submitting",cancel:"Cancel"},moderate:{edit:"Edit Answer",clear:"Clear Answer",clear_confirmation:"Are you sure you want to clear this answer?"},create:{success:"Question successfully answered",failure:"An unexpected error ocurred"},edit:{success:"Answer successfully edited",failure:"An unexpected error ocurred"},clear:{success:"Answer successfully cleared",failure:"An unexpected error ocurred"}},example_featured_artists:"e.g. JAY Z, Karen O, Mariah Carey",example_producer_artists:"e.g. J Dilla, Kanye West, Avicii",example_writer_artists:"e.g. Pharrell Williams, Sean Garrett, John Lennon",name_for_body_content:{music:"lyrics",nonmusic:"text"},text_type:{music:"song",nonmusic:"text"},name_for_artist:{music:"artist",nonmusic:"author"},manage_accomplishments:{all:"All",hidden:"Hidden",visible:"Visible"},description_annotation:{song:"bio",artist:"bio",album:"bio",cover_art:"annotation"},will_paginate:{previous_label:"&laquo; Previous",next_label:"Next &raquo;",page_gap:"&hellip;"},report_abuse:{report_song:"Report Song",reported_song:"Reported Song",report_annotation:"Report Annotation",reported_annotation:"Reported Annotation",report_album:"Report Album",report:"Report",reported:"Reported",cancel:"Cancel",close:"Close",submit:"Submit",submitting:"Submitting form...",error:"Sorry, something went wrong, please try again.",learn_more:"Learn more about our moderation policies",reason_error:"Must enter reason",details_error:"Must enter details",details_placeholder:"Enter report details",reasons:{harmful:"Harmful or abusive content",discrimination:"Hate speech or discrimination",misleading:"Misleading information",suspicious:"Suspicious or Spam",other:"Other"}},clear_votes:"Clear Votes",no_voters:"No voters yet!",seo_title:"{{title}} Lyrics",charts:{title:"Charts",subtitle:"Trending on Genius",songs:{title:"Top Songs"},artists:{title:"Top Artists"},referents:{title:"Top Lyrics"},albums:{title:"Top Albums"},actions:{allow_in_charts:"Allow in charts",exclude_from_charts:"Exclude from charts"},filter:{header:{type:{songs:"Songs",albums:"Albums",artists:"Artists",referents:"Lyrics"},genre:{all:"All Genres",rap:"Rap",pop:"Pop",rb:"R&B",rock:"Rock",country:"Country"},time_period:{day:"Today",week:"This Week",month:"This Month",all_time:"All Time"}},select:{type:{name:"Type",songs:"Songs",albums:"Albums",artists:"Artists",referents:"Lyrics"},genre:{name:"Genre",all:"All",rap:"Rap",pop:"Pop",rb:"R&B",rock:"Rock",country:"Country"},time_period:{name:"Time",day:"Day",week:"Week",month:"Month",all_time:"All Time"}}}},contribution_type:{all_activity:{name:"All Contributions"},annotations:{name:"Annotations",sort:{chronologically:"Recent",popularity:"Popular"}},unreviewed_annotations:{name:"Unreviewed",sort:{chronologically:"Recent",popularity:"Popular"}},pyongs:{name:"Pyongs",sort:{chronologically:"Recent"}},transcriptions:{name:"Transcriptions",sort:{chronologically:"Recent",popularity:"Popular"}},articles:{name:"Articles",sort:{chronologically:"Recent",popularity:"Popular"}},comments:{name:"Suggestions",sort:{chronologically:"Recent"}},questions_and_answers:{name:"Q+A"}},editorial_placement:{label:{news:"news",video:"video",feature:"feature"},author_prefix:"by"},can_can:{access_denied:"Sorry, you're not allowed to do that"},activemodel:{activity_stream_line_item_message:{message:{default:"%{actors} %{verb} %{target} %{context}",user:{hit_pageview_threshold:{song:"%{target} %{message} (%{threshold} pageviews)"},make_editor:{user:{one:"%{actors} made %{target} an editor",other:"%{actors} made %{target} editors"}},make_mediator:{user:{one:"%{actors} made %{target} a mediator",other:"%{actors} made %{target} mediators"}},make_moderator:{user:{one:"%{actors} made %{target} a moderator",other:"%{actors} made %{target} moderators"}},make_educator:{user:{one:"%{actors} made %{target} an educator",other:"%{actors} made %{target} educators"}},make_transcriber:{user:{one:"%{actors} made %{target} a transcriber",other:"%{actors} made %{target} a transcriber"}},make_staff:{user:{one:"%{actors} made %{target} staff",other:"%{actors} made %{target} staff"}},create:{identity:"Your %{provider} friend %{name} is on %{service_name}!",question:"%{actors} asked %{target} on <em>%{context}</em>",answer:"%{actors} %{verb} %{target} on <em>%{context}</em>",cover_art:"%{actors} added %{target} to <em>%{context}</em>",lyrics_edit:"%{actors} %{verb} %{target} on <em>%{context}</em>"},delete:{answer:"%{actors} %{verb} %{target} on <em>%{context}</em>",cover_art:"%{actors} removed %{target} from <em>%{context}</em>"},Follow:{artist:"%{actors} followed %{target}",web_page:"%{actors} followed <em>%{title}</em>"},Pyong:{song:"%{actors} %{verb} %{target} %{note_preview}",annotation:"%{actors} %{verb} %{target} %{context} %{note_preview}",article:"%{actors} %{verb} %{target} %{note_preview}",video:"%{actors} %{verb} %{target} %{note_preview}",album:"%{actors} %{verb} %{target} %{note_preview}"},Mention:{user:{ForumPost:"%{actors} %{verb} %{target} in <em>%{context}</em>",Comment:"%{actors} %{verb} %{target} in a %{comment_noun} on <em>%{context}</em>"},group:{ForumPost:"%{actors} %{verb} %{target} in <em>%{context}</em>",Comment:"%{actors} %{verb} %{target} in a %{comment_noun} on <em>%{context}</em>"}},GroupInvitation:{user:"%{actors} just gave %{target} access to the %{group_human_name} <em>%{context}</em>"},incorporate:{annotation:"%{actors} incorporated %{target} into a Genius Annotation"},move:{discussion:"%{actors} %{verb} %{target} to <em>%{context}</em>"},accept_offsite_beta_invitation:{user:"%{actors} accepted your beta invitation"},pin:{discussion:"%{actors} %{verb} %{target} to <em>%{group_name}</em>",question:"%{actors} %{verb} %{target} on <em>%{context}</em>"},unpin:{discussion:"%{actors} %{verb} %{target} from <em>%{group_name}</em>",question:"%{actors} %{verb} %{target} on <em>%{context}</em>"},merge:{artist:"%{actors} %{verb} %{artist_name_at_time_of_merge}'s discography into %{target_artist_name}'s"},edit:{question:"%{actors} edited %{target} on <em>%{context}</em>",answer:"%{actors} %{verb} %{target} on <em>%{context}</em>",cover_art:"%{actors} edited %{target} on <em>%{context}</em>"},archive:{question:"%{actors} archived %{target} on <em>%{context}</em>",lyrics_edit:"%{actors} automatically archived %{target} on <em>%{context}</em>"},Vote:{question:"%{actors} %{verb} %{target} on <em>%{context}</em>",answer:"%{actors} %{verb} %{target} on <em>%{context}</em>",video:"%{actors} %{verb} %{target}"},recognized:{song:{transcriber:"Thanks! We've been looking for the lyrics to %{target}",other:"%{actors} marked %{target} as a real song"}},accept:{lyrics_edit:"%{actors} %{verb} %{target} on <em>%{context}</em>"},reject:{lyrics_edit:"%{actors} %{verb} %{target} on <em>%{context}</em>"},marked_complete:{song:"%{actors} marked the lyrics complete on %{target}"},unmarked_complete:{song:"%{actors} un-marked the lyrics complete on %{target}"},marked_high_transcription_priority:{song:"%{actors} marked %{target} as a high-priority transcription"}}}}},activerecord:{models:{album_appearance:"Album",album:"Album",annotation_edit:"Annotation Edit",annotation:"Annotation",article:"Article",artist_name:"Artist name",artist:"Artist",cover_art:"Cover Art",forum_post:"Post",group:"Forum",facebook_identity:"Facebook",twitter_identity:"Twitter",edx_identity:"edX",google_identity:"Google",spotify_identity:"Spotify",apple_identity:"Apple",lyrics_edit:"Lyrics edit proposal",performance:"Artist",song_derivation:"Song Derivation",song:"Song",tagging:"Tag"},group:{access_policy:{human_description:{public:"Public Forum",role_based:"Private Forum accessible by certain roles (e.g. 'All Editors')",invite_only:"Private invitation only Forum"}}},errors:{models:{user_session:{attributes:{second_factor_credential:{required:"^To help ensure account security, we've sent an email to confirm your login. Please enter the confirmation code below."}}}}}},api_scopes:{me:"access your profile",create_annotation:"create annotations",manage_annotation:"update and delete annotations",vote:"vote on annotations",ifttt:"access your profile, be alerted of your activity, and follow new pages and songs"},artist:{merge_request_complete_message:"Submitted! The merge might take a minute to complete."},contribution_opportunity:{message:{answer_question:"Unanswered question on",review_annotation:"Unreviewed annotation on",missing_writer_artists_song:"Missing writer(s) on",missing_producer_artists_song:"Missing producer(s) on",missing_albums_song:"Missing album(s) on",missing_release_date_song:"Missing release date on",missing_media_song:"Missing media on",high_priority_transcription_song:"Missing transcription for"}},mentions:{trello_card_title:{annotation:"Mention of %{mention_string} in an annotation comment on %{title}",song:"Mention of %{mention_string} in a song-level comment on %{title}",discussion:"Mention of %{mention_string} in a post in %{title}",article:"Mention of %{mention_string} in an article comment on %{title}"},jira_issue_title:{annotation:"Mention of %{mention_string} in an annotation comment on %{title}",song:"Mention of %{mention_string} in a song-level comment on %{title}",discussion:"Mention of %{mention_string} in a post in %{title}",article:"Mention of %{mention_string} in an article comment on %{title}"}},preference:{mention_notifications:"Mention Notifications",creation_comment_notifications:"Create Comment Notifications",mentioned_forum_notifications:"Mentioned Forum Notifications",discussion_creation_notifications:"Discussion Creation Notifications",followed_thread_notifications:"Followed Thread Notifications",message_notifications:"Message Notifications",editorial_suggestion_notifications:"Editorial Suggestion Notifications",forum_post_creation_notifications:"Forum Post Creation Notifications",description:{mention_notifications:"Receive an email when someone @mentions you in a suggestion.",creation_comment_notifications:"Receive an email when someone comments on something you created.",mentioned_forum_notifications:"Receive an email when a forum you follow is mentioned.",discussion_creation_notifications:"Receive an email whenever someone posts a new thread in a forum you follow.",followed_thread_notifications:"Receive an email whenever someone posts in an individual forum thread you follow.",message_notifications:"Receive an email whenever someone sends you an onsite message.",editorial_suggestion_notifications:"Receive an email whenever someone integrates or archives your suggestions.",forum_post_creation_notifications:"Receive an email whenever someone posts a new thread or replies to a thread in a forum you follow."}},reason:{sentence_intro:"Marked this as",sentence_intro_react:"Marked as ",sentence:"Marked this as %{inline_reason}",inline:{"restates-the-line":"restating the line","its-a-stretch":"a stretch","missing-something":"missing something",other:"other",confusing:"confusing",boring:"boring",offensive:"offensive",obvious:"obvious",wordy:"wordy",needs_more_media:"lacking media",paraphrases_lyric:"paraphrasing lyric"}},role:{actions:{remove:"Remove role",confirm_remove:"Are you sure you want to remove the %{role} role from %{login}?",confirm_grant:"Are you sure you want to grant the %{role} role to %{login}?"},types:{contributor:{one:"Contributor",other:"Contributors"},moderator:{one:"Moderator",other:"Moderators"},postlet_editor:{one:"Postlet Editor",other:"Postlet Editors"},post_editor:{one:"Post Editor",other:"Post Editors"},comment_moderator:{one:"Comment Moderator",other:"Comment Moderators"},contrib:{one:"Contributor",other:"Contributors"},lyric_editor:{one:"Lyric Editor",other:"Lyric Editors"},boss:{one:"Boss",other:"Bosses"},mega_boss:{one:"Mega Boss",other:"Mega Bosses"},in_house_staff:{one:"In-house staff",other:"In-house staff"},community_artist:{one:"Community Artist",other:"Community Artists"},verified_artist:{one:"Verified Artist",other:"Verified Artists"},meme_artist:{one:"Meme Artist",other:"Meme Artists"},user_admin:{one:"User Administrator",other:"User Administrators"},message_admin:{one:"Message Administrator",other:"Message Administrators"},verifier:{one:"Verifier",other:"Verifiers"},weak_impersonator:{one:"Weak Impersonator",other:"Weak Impersonators"},engineer:{one:"Engineer",other:"Engineers"},editor:{one:"Editor",other:"Editors"},newb:{one:"Newb",other:"Newbs"},deactivated:{one:"Deactivated",other:"Deactivated"},message_receiver:{one:"Message Receiver",other:"Message Receivers"},educator:{one:"Educator",other:"Educators"},groups_admin:{one:"Groups Administrator",other:"Groups Administrators"},full_time_intern:{one:"Full-time Intern",other:"Full-time Interns"},founder:{one:"Founder",other:"Founders"},edx_student:{one:"Student",other:"Students"},edu_groups_admin:{one:"Class Group Admin",other:"Class Group Admins"},staff:{one:"Staff",other:"Staff"},bugkeeper:{one:"Bugkeeper",other:"Bugkeepers"},whitehat:{one:"Whitehat",other:"Whitehats"},tech_liaison:{one:"Tech Liason",other:"Tech Liasons"},offsite_tester:{one:"Offsite Tester",other:"Offsite Testers"},mediator:{one:"Mediator",other:"Mediators"},outside_song_ids_validator:{one:"Outside Song ID Validator",other:"Outside Song ID Validators"},design_contractor:{one:"Design Contractor",other:"Design Contractors"},spotify_annotation_nominator:{one:"Spotify Annotation Nominator",other:"Spotify Annotation Nominators"},spotify_annotation_editor:{one:"Spotify Annotation Editor",other:"Spotify Annotation Editors"},spotify_annotation_finalizer:{one:"Spotify Annotation Finalizer",other:"Spotify Annotation Finalizers"},custom_app_notification_author:{one:"Custom App Notification Author",other:"Custom App Notification Authors"},bagon_tester:{one:"Bagon Tester",other:"Bagon Testers"},transcriber:{one:"Transcriber",other:"Transcribers"}}},song_derivation:{verb:{sample:"samples",interpolation:"interpolates",cover:"cover of",remix:"remix of",live:"live version of"}},song_relationship:{title:{samples:"Samples",sampled_in:"Sampled In",interpolates:"Interpolates",interpolated_by:"Interpolated By",cover_of:"Cover Of",covered_by:"Cover By",remix_of:"Remix Of",remixed_by:"Remixed By",live_version_of:"Live Version Of",performed_live_as:"Performed Live As"}},song:{actions:{destroy:"Delete",publish:"Lock",unpublish:"Unlock",disable_media:"Disable media",enable_media:"Enable media",hide:"Hide",unhide:"Unhide",reindex:"Reindex in search",mark_as_hot:"Mark as hot song",unmark_as_hot:"Unmark as hot song",view_annotation_engagement_data:"Toggle annotation opens",edit_spotify_annotations_for:"Spotify Annotations",view_lyrics_synchronization:"Synchronize Lyrics",verify_lyrics:"Verify Lyrics",unverify_lyrics:"Unverify Lyrics",award_transcription_iq:"Award transcription IQ",remove_transcription_iq:"Remove transcription IQ",hide_apple_player:"Hide Apple Player",unhide_apple_player:"Unhide Apple Player",trigger_apple_match:"Trigger Apple Match Attempt",mark_lyrics_evaluation_as_complete:"Mark lyrics complete",mark_lyrics_evaluation_as_staff_approved:"Staff approve lyrics quality",unmark_lyrics_evaluation_as_complete:"Un-mark lyrics complete",mark_lyrics_evaluation_as_un_staff_approved:"Un-mark lyrics quality as staff approved",copy_song_id:"Copy short ID (song:{{ id }})",copy_artist_id:"Copy short ID (artist:{{ id }})",lyrics_export_preview:"Preview Lyrics For Export"},action_confirmations:{publish:"Are you sure? Locking a song prevents lyrics changes and new annotations.",unpublish:"Do you really want to unlock this song?",dismiss_dirty:"Are you sure? You'll lose your unsaved changes.",unhide:"Are you sure?",destroy:" Are you absolutely sure you want to delete this song? This cannot be undone.",trigger_apple_match:"This will take a minute. The player will appear if successful.",admin_default:"Are you sure you want to perform this admin action?"},hide:{instructions:"Select who should be able to see this song",success:"Successfully hid the song"},copied_success:"Copied to clipboard",deleted:"Successfully deleted song",verified:{desktop:{commentary:"Verified commentary",lyrics:"Verified lyrics",commentary_and_lyrics:"Verified commentary & lyrics"},mobile:{commentary:"Verified commentary by",lyrics:"Verified lyrics by",commentary_and_lyrics:"Verified commentary & lyrics by"}},fact_tracks:{app_link_text:"Behind the Lyrics in Spotify",app_help_link_text:"What's a Fact Track?"},one:"song",other:"%{count} songs",metadata:{title_and_artists:"Title and Artists",title:"Title",primary_artist:"Artist",song_info:"Credits",writer_artists:"Written By",featured_artists:"Featuring",producer_artists:"Produced By",album_date_and_tags:"Albums, Date, Location & Tags",albums:"Album(s)",release_date:"Release Date",release_date_components:"Release Date",recording_location:"Recorded At",primary_tag:"Primary Tag",tags:"Tags",song_relationships:"Song Relationships",audio_video_and_images:"Audio, Video & Images",spotify_uuid:"Spotify UUID",soundcloud_url:"SoundCloud URL",youtube_url:"YouTube URL",youtube_start:"Start",custom_song_art_image_url:"Song Art URL",featured_video:"Feature Video?",custom_header_image_url:"Header Background URL",apple_match_overrides:"Apple Match Overrides",apple_song_for_streaming_service_lyrics:"Apple song to match (ID or view URL) for lyrics",apple_song_for_streaming_service_player:"Apple song to match (ID or view URL) for player",song_color_gradient:"Song Color Gradient",song_art_primary_color:"Primary Color",song_art_secondary_color:"Secondary Color"},lyrics_state:{unreleased:{indicator:"(Unreleased)",message:"Lyrics for this song have yet to be released. Please check back once the song has been released.",confirm:"This box should only be checked if this song is a highly anticipated song that has not been released. If the song has been released, you should transcribe the lyrics. Are you sure you want to mark this song as unreleased?"},incomplete:{indicator:"(Missing Lyrics)",message:"The lyrics for this song have yet to be transcribed."},instrumental:{message:"This song is an instrumental"}}},page_footer:{section:{description:"Genius is the worlds biggest collection of song lyrics and musical knowledge",about:"About Genius",contributor_guidelines:"Contributor Guidelines",press:"Press",shop:"Shop",advertise:"Advertise",event_space:"Event Space",privacy_policy:"Privacy Policy",privacy_preferences:"Privacy Preferences",licensing:"Licensing",jobs:"Jobs",developers:"Developers",copyright_policy:"Copyright Policy",contact_us:"Contact Us",ccpa:"Do Not Sell My Personal Information",sign_in:"Sign In",sign_out:"Sign Out",signing_out:"Signing Out...",delete_account:"Delete Account"},fine_print:{company:"Genius Media Group Inc.",terms:"Terms of Use"},all_artists:"All Artists:",hot_songs:{title:"Hot Songs:",view_all:"View All"}},page_header:{section:{genius_live:"Live",featured:"Featured",charts:"Charts",videos:"Videos",shop:"Shop",artist_promo_portal:{default:"Promote Your Music",logged_in:"Promote"},forums:"Forums",add_a_song:"Add A Song"},auth_links:{sign_up:"Sign Up",sign_in:"Sign In"},search_bar:{placeholder:"Search lyrics & more"}},search:{sections:{top_hit:{title:"Top Result"},song:{title:"Songs"},lyric:{title:"Lyric Matches"},artist:{title:"Artists"},album:{title:"Albums"},tag:{title:"Tags"},user:{title:"Users"},article:{title:"Articles"},video:{title:"Videos"}}},site:{default_title:"%{service_name} | Song Lyrics & Knowledge",default_meta_description:"Genius is the worlds biggest collection of song lyrics and musical knowledge."},song_page_header:{nav:{lyrics:"Lyrics",about:"About",contributions:"Contributions",comments:"Comments","primary-album":"Tracklist"},metadata:{edit:"Edit Metadata",album_label:"Album",feature_label:"Featuring",producer_label:"Produced by",release_label:"Release Date",lyrics_completed_by:"Lyrics marked complete by ",lyrics_staff_approved_by:"Lyrics approved by ",locked:"Locked",play_video:"Play Video"},hidden_tooltip:{is_hidden:"This song is hidden.",viewable_by:"It is viewable by:",verified_artists_on_song:"Verified artists on the song"},section_cta:"Read More",credits_cta:"View All Credits",tracklist_cta:"View Tracklist",cover_art_alt:"Cover art for {{title}} by {{artistName}}",admin:"Admin"},song_stories:{gallery_title:"%{service_name} | Song Stories",gallery_intro_headline:"Everything you need to know about your favorite music.",gallery_intro_body:"Tap through for essential videos, interviews, playlists, and more.",gallery_learn_more_link_text:"Read More",featured_placement_prompt:{mobile:"Watch the story",desktop:"Watch the story"},sticky_placement_prompt:"Watch song story"},sort:{popularity:"Pageviews",title:"A-Z",release_date:"Release Date",unreviewed_annotations:"Unreviewed Annotations",probably_spam:"Probably Spam",probably_ham:"Probably Ham",definitely_spam:"Definitely Spam",definitely_ham:"Definitely Ham",unclassified_spam_state:"Unclassified"},terms:{contributor:{one:"contributor",other:"contributors"},scholar:{one:"1 Scholar",other:"%{count} Scholars"},album:{one:"Album",other:"Albums"}},annotation_edits:{current_version:"Current Version",edit_history:"Edit History",view_all_edits:"View All Edits",revert:{submit:"Revert to this version",success:"Annotations successfully reverted",error:"Error: {{ errorMessage }}"}},annotations:{edit:"Edit",delete:"Delete",show_lyrics:"Show full lyrics",confirm_delete:"Are you sure you want to delete this annotation?",show_proposals:"Show Proposed Edit",show_proposals_plural:"Show {{ count }} Proposed Edits",hide_proposals:"Hide Proposed Edits",proposals_title:"Proposed Edits",share:"Share this annotation",form:{body:"Body",edit_note:"Edit description",edit_note_cta:"Add an edit description (optional)",edit_note_placeholder:"Briefly describe your edit",save:"Save",save_propose_edit:"Propose Edit"},moderation:{accept:"Accept",reject:"Reject",coaching:"Coaching guide",accept_success:"Annotation accepted",reject_success:"Annotation rejected",confirm_accept:"Are you sure you want to merge this edit?",confirm_reject:"Are you sure you want to reject this edit?",proposal_accept_success:"Accepted annotation edit proposal",proposal_reject_success:"Rejected annotation edit proposal",body:{placeholder:"Enter an explanation",label:"Explain your rejection",required:"Explaination is required"}},comment:{integrate:"Integrate",archive:"Archive",title:"Help us improve this annotation",subtitle:"Read our contributor guidelines",reasons:{label:"Select a reason",required:"Reason is required"},name:{label:"Name",required:"Name is required",placeholder:"Enter your name"},email:{label:"Email",required:"Email is required",placeholder:"Enter your email address"},cancel:"Cancel",submit:"Submit",submitting:"Submitting"},suggestion:{cta:"Suggest an improvement to earn IQ",save_success:"Annotation suggestion submitted",body:{placeholder:"Enter a suggestion",label:"Suggest an improvement",required:"Suggestion is required"}},song_description:{cta_1:"Have the inside scoop on this song?",cta_2:{logged_in:"Drop some knowledge",logged_out:"Sign up and drop some knowledge"},form:{body:{label:"Body",placeholder:"Start the song bio"},edit:"Edit",submit:"Submit",submitting:"Submitting",save:"Save",save_propose_edit:"Propose Edit",cancel:"Cancel",propose_success:"Edit proposal submitted"}}},artists:{page_title:"%{artist_name} Lyrics, Songs, and Albums"},attribution:{created_by:"Created by",annotation:{heading:"Genius Annotation",created_by:"Created by",accepted_by:"Accepted by"},question:{one:"%{name} asked a question",other:"%{name} asked %{count} questions",asked_by:"Asked by"},answer:{heading:"Genius Answer"},contributor:"{{count}} contributor",contributor_plural:"{{count}} contributors",one:"%{name} answered a question",other:"%{name} answered %{count} questions"},comments:{feedback_noun:"improvement",show_more:"Show more ",form:{body:{field:"comment",placeholder:"Add a comment"},name:{field:"name",placeholder:"Your Name"},email:{field:"email",placeholder:"Email Address"},submit:"Submit",submitting:"Submitting",cancel:"Cancel",success:"Thanks for your comment!",failure:"An unexpected error occurred"},placeholder:{annotation:"Add a comment",genius_annotation:"Suggest an improvement to earn IQ",song:"Suggest an improvement or correction to earn IQ",verified_annotation:"Add a comment",song_comment:"Add a comment",cta_1:"Get the conversation started",cta_2:"Be the first to comment",sign_up_header:"Sign Up And Drop Knowledge ",sign_up_body:"Genius is the ultimate source of music knowledge, created by scholars like you who share facts and insight about the songs and artists they love.",expand:"Expand"},noun:{annotation:"reply",genius_annotation:"suggestion",song:"reply",verified_annotation:"reply"},past_tense_verb:{annotation:"replied",genius_annotation:"added a suggestion",song:"added a suggestion",verified_annotation:"replied"},empty_validation:"Please enter a comment",moderate:{mark_spam:{submit:"Mark as Spam",confirm:"Are you sure you want to mark this comment as spam?",success:"Successfully marked as spam!",failure:"An unexpected error occurred"},delete:{submit:"Delete Comment",confirm:"Are you sure you want to delete this comment?",success:"Successfully deleted!",failure:"An unexpected error occurred"}}},commentables:{noun:{annotation:"annotation",genius_annotation:"annotation",song:"song",verified_annotation:"annotation",description:"bio"}},comment_notifications:{comment_type:{annotation:"comment",genius_annotation:"suggestion",song:"reply",verified_annotation:"reply",description:"suggestion",article:"comment",video:"comment",album:"comment"},commentable_type:{annotation:"annotation",genius_annotation:"annotation",song:"song",verified_annotation:"annotation",description:"bio",article:"article",video:"video",album:"album"},action:{annotation:"added a comment to",genius_annotation:"added a suggestion for",song:"added a suggestion for",verified_annotation:"replied to",description:"added a suggestion for"}},community:{title:"Community",subtitle:"Geniuss community of contributors powers the worlds biggest collection of song lyrics and musical knowledge.",get_involved:"Get Involved",join:"Join Our Community",learn:"Learn How Genius Works",chart:{headers:{rank:"Rank",scholar:"Top Scholars Today",iq:"Iq Earned Today"}}},contributions:{title:"Contributions",transcribed_by:"Transcribed by {{count}} scholar",transcribed_by_plural:"Transcribed by {{count}} scholars",annotated_by:"Annotated by {{count}} scholar",annotated_by_plural:"Annotated by {{count}} scholars",load_cta:"Load more contributors",loading:"Loading",recent_activity:"Recent Activity"},contributor_strategies:{newest:"The newest users with activity",losing:"These users are about to lose their active contributor streak",gaining:"These users are about to become active contributors",coachees:"These are your coachees, try to help them grow as contributors"},contributor_classifications:{losing:"Becoming Inactive",gaining:"Almost Active",active:"Active Contributor",inactive:"Inactive"},controls:{modal:{cancel:"Cancel",close:"Close",save:"Save"},tag_input:{clear_all:"Clear All"},text_editor:{image:"Add image",tips:"Tips",formatting:"Formatting"}},date_input:{loading:"Loading...",show:"Show Calendar",hide:"Hide Calendar",day:"Day",month:"Month",year:"Year",months:{1:"January",2:"February",3:"March",4:"April",5:"May",6:"June",7:"July",8:"August",9:"September",10:"October",11:"November",12:"December"}},edit_metadata:{required:"This field is required",unsaved:"You have unsaved edits! Do you want to discard changes?",save_success:"Changes successfully saved!",save_failure:"An error occurred saving your changes. Please try again!",locked:"This field is locked because the song is approved.",validation_error:"There was a problem saving your changes. Please correct the highlighted fields and submit again.",artist_prefix:"Artist: ",gradient:{update:"Update",reset:"Reset",primary_contrast:"Primary Color Contrast",secondary_contrast:"Secondary Color Contrast",low_contrast:"Contrast too low",invalid:"Invalid contrast"},sections:{title_artists:"Title & Artists",media_audio:"Media & Audio",tags_albums:"Tags, Albums & Metadata",relationships:"Song Relationships",admin:"Admin"},tags_albums:{primary_tag:"Primary Tag",recorded_at:"Recorded At",recorded_at_placeholder:"Where this song was recorded",release_date:"Release Date",tags:"Tags",albums:"Albums",tags_prompt:"Start typing to search existing tags",albums_prompt:"Start typing to search existing albums"},credits:{primary_artist:"Primary artist on this song",expand:"Expand",collapse:"Hide",add:"Add additional credits",additional_role:"Additional role",artists_in_this_role:"Artists in this role",additional_roles:"{{count}} additional role",additional_roles_plural:"{{count}} additional roles",title:"Title",title_placeholder:"Song title",artist:"Artist",featuring:"Featuring",written_by:"Written by",produced_by:"Produced by",artist_prompt:"Start typing to search existing artists",role_prompt:"Start typing to search existing roles",validation:{role_missing_values:"A role and artist(s) are required"}},relationships:{full_title:"{{title}} by {{artist}}",add:"Add additional song relationship",song_relationship:"Song Relationship",song_relationships:"{{count}} song relationship",song_relationships_plural:"{{count}} song relationships",related_songs:"Related Song(s)",song_prompt:"Start typing to search existing songs",validation:{relationship_missing_values:"A relationship and song(s) are required"}},media:{youtube:"YouTube URL",youtube_start:"Start Time",start_help:"In total seconds",start_error_min:"Must be 0 or greater",soundcloud:"SoundCloud URL",gradient:"Song Gradient",gradient_edit:"Edit",gradient_hide:"Hide",gradient_alt:"{{title}} cover art",gradient_no_artist:"Add an artist",gradient_no_title:"Add a title",art:"Song Art",art_help:"Enter a URL",art_invalid:"This URL is not a valid image"},admin:{spotify_uuid:"Spotify UUID",apple_match_lyrics:"Apple Song to Match ID for Lyrics",apple_match_player:"Apple Song to Match ID for Player",apple_help:"ID or View URL",apple_invalid:"Please use a valid Apple ID or URL"}},form:{validation:{required:"{{ field }} is required",maxLength:"Cannot be longer than {{ count }} characters",email:"Please enter a valid email"}},header:{groups_inbox:"Forums",newsfeed_inbox:"Feed",main_activity_inbox:"Me",messages_inbox:"Messages",iq_inbox:"Earn IQ"},latest:{title:"Latest",subtitle:"Most Recent News"},leaderboards:{periods:{day:"Daily",week:"Weekly",month:"Monthly",all_time:"All-time"}},live:{birthday_modal:{heading:"We need to<br/>check your age first",sub_head:"Enter your birthday to continue"},under_eighteen:{heading:"Sorry!",body:"Genius Live is currently only available to users over the age of 18. Please feel free to check back in the future!"}},lyrics:{save_success:"Your changes have been saved!",save_error:"Sorry, we couldn't save your changes",reload_instructions:"Copy your changes and reload the page.",editing_stale:"The lyrics have changed since you started editing. Copy your work and then press Cancel to see the updated lyrics.",unmatched_parens_error:"Oops! It looks like you might have an uneven number of parentheses or square brackets. Check the lyrics to make sure that they match up.",added_block_level_html_to_music_error:"Music lyrics can only include <strong>, <b>, <em>, <i>, and <br> HTML tags.",tagged_block_level_html_as_music_error:"Lyrics that include HTML tags besides <strong>, <b>, <em>, <i>, or <br> cannot be tagged as music.",didnt_remove_block_level_html_from_music_error:"Music lyrics can only include <strong>, <b>, <em>, <i>, and <br> HTML tags. Please remove any unsupported HTML tags in order to save your edit.",manage:"Manage Lyrics",edit:"Edit Lyrics",resolve_lyrics_edit_proposals:"Resolve {{ count }} Proposed Lyrics Edit",resolve_lyrics_edit_proposals_plural:"Resolve {{ count }} Proposed Lyrics Edits",save:"Save",save_and_exit:"Save & Exit",propose:"Propose Edit",confirm_propose:"Are you sure you want to propose this edit?",cancel:"Cancel",confirm_cancel:"Are you sure you want to cancel lyric editing?",section_header:"Section Header",open_tips:"How to Format Lyrics",hide_tips:"Hide Tips",out_of_sync:"Your browser's copy of the lyrics is out of sync. Try reloading the page.",edit_proposal_title:"Proposed Lyrics Edit {{ index }}",expand_lines:"Show {{ count }} more lines",accept:"Accept",reject:"Reject",inapplicable_proposal:"Inapplicable Edit",no_lyrics_edit_proposals:"No lyrics edit proposals",iq:"{{ valueWithSign }} IQ",accepted_edit_proposal:"Accepted Lyrics Edit Proposal",rejected_edit_proposal:"Rejected Lyrics Edit Proposal",edit_annotation_brackets:"Edit Annotation Brackets",edit_proposed:"Lyrics Edit Proposed",unexpected_error:"An unexpected error occurred. Copy your work and try again.",evaluation:{staff_approved:'These lyrics have been approved by Staff member <styledLink href="{{ userUrl }}">{{ userName }}</styledLink> meaning they are locked and can only be edited by Genius staff, but you can still propose edits.',marked_complete:'These lyrics have been marked complete by <styledLink href="{{ userUrl }}">{{ userName }}</styledLink> meaning they are locked and can only be edited by Transcribers, Editors, Moderators, and Staff, but you can still propose edits. <styledLink href="{{ transcriberGuideUrl }}">Learn more about this process</styledLink>.'}},nav:{sign_up:"Sign Up",sign_out:"Sign Out",scroll_top:"Back to Top"},profile_page:{songs:{all:"All Songs",search:{one:"%{count} search result",other:"%{count} search results"}},top_scholar:{one:"Top Scholar",other:"Top Scholars"},top_accomplishment:{one:"Top Accomplishment",other:"Top Accomplishments"},about_me:{default:"%{user_login} is keeping quiet for now",placeholder:"Do you like long walks on the beach?"}},pyong:{form:{submit:"Add note",submitting:"Submitting...",cancel:"No thanks",pyong_note:{placeholder:"Add a note for your followers",required:"Please fill out this field"}},tooltip:{new_pyong:"PYONG this to promote it to your Genius followers!",has_pyonged:"You pyonged this recently! You'll be able to pyong it again in a bit"},pyong_note_success:"Your note was submitted!"},recommended_songs:{header:"Related Songs",cover_art_alt:"Cover art for {{title}} by {{artistName}}"},relative_timestamp:{seconds:"a second ago",seconds_plural:"a few seconds ago",minutes:"a minute ago",minutes_plural:"{{count}} minutes ago",hours:"an hour ago",hours_plural:"{{count}} hours ago",days:"a day ago",days_plural:"{{count}} days ago",months:"a month ago",months_plural:"{{count}} months ago",years:"a year ago",years_plural:"{{count}} years ago"},share_buttons:{embed:"Embed",share_url:"Share URL"},copy_button:{copy:"Copy",copied:"Copied"},song_card:{read_lyrics:"Read the lyrics",read_lyrics_title:"{{song_title}} Lyrics"},song_relationships:{index_page_title:"%{song_title} Samples | %{service_name}",index_social_title:"%{song_title} Samples",index_description:"See all of %{song_title}s samples, covers, remixes, interpolations and live versions",sample_page_title:"%{song_title} Samples | %{service_name}",sample_social_title:"%{song_title} Samples",sample_description:"See all of %{song_title}s samples",cover_page_title:"%{song_title} Covers | %{service_name}",cover_social_title:"%{song_title} Covers",cover_description:"See all of %{song_title}s covers",interpolation_page_title:"%{song_title} Interpolations | %{service_name}",interpolation_social_title:"%{song_title} Interpolations",interpolation_description:"See all of %{song_title}s interpolations",remix_page_title:"%{song_title} Remixes | %{service_name}",remix_social_title:"%{song_title} Remixes",remix_description:"See all of %{song_title}s remixes",live_page_title:"%{song_title} Live Versions | %{service_name}",live_social_title:"%{song_title} Live Versions",live_description:"See all of %{song_title}s live versions",seo:{title:"{{title}} Samples",lyrics_link:"Read the Lyrics"},section_title:{samples:"{{song_title}} Samples",sampled_in:"Songs That Sample {{song_title}}",interpolates:"{{song_title}} Interpolations",interpolated_by:"Songs That Interpolate {{song_title}}",cover_of:"{{song_title}} Is A Cover Of",covered_by:"{{song_title}} Covers",remix_of:"{{song_title}} Is A Remix Of",remixed_by:"{{song_title}} Remixes",live_version_of:"{{song_title}} Is A Live Version Of",performed_live_as:"{{song_title}} Live Performances"},view_all_verbose:"View {{song_title}} samples",nav:{index:"All Song Relationships",sample:"Samples",interpolation:"Interpolations",cover:"Covers",remix:"Remixes",live:"Live Versions"},section:{view_all:"View all"}},songs:{hidden_album_count:"Appears on %{count} more",editing_stale:"The song has been modified since you started editing. Copy your work and then press Cancel to see the updated info."},users:{page_title:"%{user_name}",identity:{unlink:"Unlink",unlinking:"Unlinking..."},authentication:{invalid_credentials:"Invalid username or password"}},videos:{title:"Videos",subtitle:"Genius Original Series",read_more:"read more &raquo;"}}}});var o;n(269),n(45),n(270),n(271),n(272),n(273),n(119),n(276),n(277),n(278),n(950),n(951);window["Genius.css_loaded"]=window["Genius.css_loaded"]||{push:function(t){t()}},setImmediate((function(){var t=new Map;$("[initial-content-for]").each((function(e,n){var r=$(n);r.attr("ng-non-bindable",!0),t.set(r.attr("initial-content-for"),r)})),angular.module("genius").value("initial_placeholder_content",t),angular.module("genius").value("initial_image_urls",new Set(_([_.map($("img"),(function(t){return t.currentSrc})),_.map($("[style]"),(function(t){return _.get(t.style.backgroundImage.match(/^url\("(.*)"\)$/),1)}))]).flatten().compact().value())),window.performance&&performance.mark&&window.performance.mark("angular_bootstrap_start");var e=Date.now();window["Genius.css_loaded"].push((function(){angular.bootstrap(document.body,["genius"],{strictDi:!0}).invoke(["$window","application_bootstrap","Librato","PageDataClient","performance_mark",function(t,n,r,i,o){if(o.create("angular_bootstrap_complete"),t.ga&&t.ANALYTICS_CONFIG){var a=Date.now()-e;r.set_page_type(_.get(i.preloaded(),"page_type","other")),r.measure("angular_bootstrap_time",a),t.ga("send","timing","Initial Load","Angular Bootstrap",a,{nonInteraction:!0})}setImmediate(n.done)}])}))})),window.performance&&performance.mark&&window.performance.mark("bundle_load_end"),$("html").toggleClass("windows",!!bowser.windows),angular.module("genius",["ngSanitize","ngAnimate","ngTagsInput","angularMoment","angular-rich-text-diff","angular-inview","angular-svg-round-progressbar","ngComponentRouter","youtube-embed","ngSticky","cfp.loadingBar","fayzaan.gRecaptcha.v3"]).config(["$locationProvider","$httpProvider","$animateProvider","$compileProvider","tagsInputConfigProvider","AppConfig","$anchorScrollProvider","cfpLoadingBarProvider","$qProvider",function(t,e,n,r,i,o,a,s,c){t.html5Mode({enabled:!0,rewriteLinks:!1}),t.hashPrefix("!"),e.interceptors.push("OnsiteInterceptor"),e.interceptors.push("RetryFailureInterceptor"),e.interceptors.push("GlobalErrorInterceptor"),n.classNameFilter(/nganimate-/),r.debugInfoEnabled(o.enable_angular_debug),r.commentDirectivesEnabled(!1),r.cssClassDirectivesEnabled(!1),a.disableAutoScrolling(),i.setDefaults("tagsInput",{placeholder:""}).setActiveInterpolation("tagsInput",{placeholder:!0}),s.includeSpinner=!1,r.preAssignBindingsEnabled(!0),c.errorOnUnhandledRejections(!1)}]).value("$routerRootComponent","routablePage").run(["AppConfig","Tracking","NewRelic",function(t,e,n){$.embedly.defaults.key=t.embedly_key,e.start_tracking(),n.init($('meta[name="newrelic-resource-path"]').attr("content"))}]),(o=n(279)).keys().forEach(o)},function(t,e,n){"use strict";n.r(e);n(894);var r="session_end_tracking_events",i=function(){this.enabled=!1,this.reset_counters()};i.arrange_arguments=function(t){return function(e,n,r){return"function"==typeof n&&(r=n,n={}),t.call(this,e,n,r)}},i.if_enabled=function(t){return function(){var e=arguments[arguments.length-1];return this.enabled?t.apply(this,arguments):("function"==typeof e&&setTimeout(e),!1)}},i.prototype={start_tracking:function(){if("undefined"==typeof mixpanel||void 0===mixpanel.register)return!1;var t;if(this.enabled=!0,this.tracking_data=window.TRACKING_DATA,"undefined"!=typeof CURRENT_TAG&&CURRENT_TAG&&(t=CURRENT_TAG.tag.slug),mixpanel.register({"Logged In":!!CURRENT_USER,"Is Editor":CURRENT_USER&&CURRENT_USER.is_editor,"Is Moderator":CURRENT_USER&&CURRENT_USER.is_moderator,"Mobile Site":MOBILE_DEVICE,AMP:!1,Tag:t,genius_platform:"web"}),["AB Test - apple_desktop_static_cta","AB Test - apple_player_position","AB Test - apple_player_position_mobile","Annotatable ID","Annotatable Type","Comment Count","Has Apple Match","Has Description","Has Recirculated Articles","Has Translation Q&A","Has Youtube URL","Lyrics Language","Music?","NRM Target Date","NRM Tier","Primary Album","Primary Album ID","Primary Artist","Primary Artist ID","Primary Tag","Primary Tag ID","Release Date","Song ID","Title","amp_cache","cohort_ids","containing_frame_is_fullbleed","created_at","created_month","created_year","distinct_id","featured_video","has_featured_annotation","has_verified_callout","hot","platform_variant","provider","provider_id","react","song","song_id","song_tier","web_interstitial_variant"].forEach((function(t){mixpanel.unregister(t)})),CURRENT_USER?mixpanel.identify(CURRENT_USER.id):window.ga((function(t){return mixpanel.identify(t.get("clientId"))})),app.is_on_song_page&&app.is_on_song_page()&&this.track("Song Page Load"),$("body.act-new.cont-users").length>0){var e=$.deparam(location.search.substring(1)).from_question_email;e&&this.track("Question email signup clicked",{question_id:e})}var n={"from url":document.location.href};mixpanel.track_links(".android_interstitial-download","clicked_download_from_android_interstitial",n),window["Genius.cmp"]=window["Genius.cmp"]||[],window["Genius.cmp"].push(function(t){t.resolve_with_tracking(this)}.bind(this))},set_tacking_data:function(t){this.tracking_data=t},reset_counters:function(){this.annotations_opened=0,this.line_item_opens={},this.song_page_loaded_from_direct_link_to_un_annotated_line=!1,this.annotation_id_opened_from_permalink=null},registered_properties:{},register:function(t){_.extend(this.registered_properties,t)},build_event_data:function(t,e){var n;return n=(e=e||{}).properties?e.properties:this.is_old_preprocessed_event(t)?this.preprocess_options(t,e):e,$.extend({},this.registered_properties,this.tracking_data,_.flattenObject(n),{dfp_enabled:"googletag"in window})},is_old_preprocessed_event:function(t){return _.includes(["Song Page Load","Wrapped Web Page Load","Annotated Web Page Load","Open Annotation","Engaged Annotation View","Offsite Filter Selection","Inbox Open","Line Item Open"],t)},preprocess_options:function(t,e){if("Song Page Load"===t)return _.merge(e,{"Un-annotated direct link":!!this.song_page_loaded_from_direct_link_to_un_annotated_line,"Un-annotated line":this.song_page_loaded_from_direct_link_to_un_annotated_line});if("Wrapped Web Page Load"===t||"Annotated Web Page Load"===t)return{"Source location":e.source_location,script_source:e.script_source,script_source_version:e.script_source_version,"Host Page Referrer":e.referrer};if("Open Annotation"===t||"Engaged Annotation View"===t){this.annotations_opened++;var n={"Annotation ID":e.annotation_id,"Annotator Login":e.annotator_login,"Annotatable Type":e.annotatable_type,script_source:e.script_source,script_source_version:e.script_source_version};return e.skip_counters||$.extend(n,{"Cumulative Annos Opened":this.annotations_opened,"Anno Opened from Permalink":e.annotation_id===this.annotation_id_opened_from_permalink,"First Anno was Permalink":!!this.annotation_id_opened_from_permalink}),n}return"Offsite Filter Selection"===t?{"Filter Type":e.filter_type,"Filter Arguments":e.filter_args,"Filter Reason":e.reason,script_source:e.script_source,script_source_version:e.script_source_version}:"Inbox Open"===t?{"Inbox Name":e.inbox_name,"Unread Count When Opened":e.unread_count}:"Line Item Open"===t?(void 0===this.line_item_opens[e.inbox_name]&&(this.line_item_opens[e.inbox_name]=0),{"Inbox Name":e.inbox_name,"Line Item Index":e.index,"Action Name":e.action_name,"Target Type":e.target_type,"Viewing Context":e.viewing_context,"Cumulative Line Items Opened":this.line_item_opens[e.inbox_name]++,"Line Item Strategy":e.strategy_name,Bagon:!!e.bagon,iframe:!!e.iframe}):void 0},track:i.arrange_arguments(i.if_enabled((function(t,e,n){var r=this.build_event_data(t,e);mixpanel.track(t,r,n),window.FS&&window.FS.from_mixpanel(t,r)}))),track_with_delayed_handling:i.arrange_arguments(i.if_enabled((function(t,e,n){bowser.mobile||bowser.tablet?JSONStore.modify_store(r,function(n){return(n=n||[]).concat({event_name:t,event_options:this.build_event_data(t,e),event_occurred_at:Date.now()})}.bind(this)):this.track(t,e,n)}))),track_with_timeout:i.arrange_arguments(i.if_enabled((function(t,e,n){var r=this.fetch_mixpanel_config("track_links_timeout",0);n=_.once(n),setTimeout(n,r),this.track(t,e,n)}))),track_link_click:function(t){var e=2,n=$(t.target).closest("a"),r=n.attr("href"),i=t.which===e||t.metaKey||t.ctrlKey||"_blank"===n.attr("target"),o=Array.prototype.slice.call(arguments,1);if(i)return this.track.apply(this,o);t.preventDefault();var a=o[o.length-1],s="function"==typeof a?o.pop():null;return this.track_with_timeout.apply(this,o.concat((function(){s&&s(),window.location.href=r})))},set_annotation_opened_from_permalink:function(t){this.annotation_id_opened_from_permalink=t},set_song_page_loaded_from_direct_link_to_un_annotated_line:function(t){this.song_page_loaded_from_direct_link_to_un_annotated_line=t},fetch_mixpanel_config:function(t,e){return this.enabled&&"function"==typeof mixpanel.get_config?mixpanel.get_config(t):e}},$.extend(window.app,{tracking:new i}),$((function(){$(document.body).on("annotation:open","a[data-id]",(function(){app.tracking.track("Open Annotation",{annotation_id:$(this).attr("data-id")})})),$(document).on("click",".show_help:not(.pressed)",(function(){app.tracking.track("opened_what_is_genius_dropdown",{standalone_annotation:$(this).closest(".stand_alone_annotation_container").length>0})})),JSONStore.modify_store(r,(function(t){return _.each(t,(function(t){Date.now()-t.event_occurred_at<1e3*APP_CONFIG.mixpanel_delayed_events_timeout&&mixpanel.track(t.event_name,t.event_options)})),[]}))})),angular.module("genius").factory("Tracking",["$window","AbTest","$timeout",function(t,e,n){var r=t.app.tracking,i=e.get_ab_tests().then((function(t){var e={};_.forIn(t,(function(t,n){e["AB Test - ".concat(n)]=t})),r.register(e)})),o=[];return _.assign(r,{delayed_track:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o.push({event:t,properties:e}),i.finally((function(){return n((function(){r.track(t,e),_.remove(o,{event:t})}),3e3)}))},attach_to_delayed_track:function(t,e){_.forEach(o,(function(n){_.forEach(e,(function(e,r){n.properties["".concat(t," - ").concat(r)]=e}))}))}}),r}])},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){var r=n(1144);r.keys().forEach(r)},function(t,e,n){var r={"./add_annotation.html":1145,"./additional_artists.html":1146,"./admin_task.html":1147,"./admin_tasks_page.html":1148,"./admin_user_info.html":1149,"./adwords_ad_form.html":1150,"./adwords_ad_group_form.html":1151,"./adwords_ad_group_list.html":1152,"./adwords_campaign_form.html":1153,"./adwords_campaign_list.html":1154,"./adwords_editor.html":1155,"./album_admin_menu.html":1156,"./album_grid.html":1157,"./album_metadata_form.html":1158,"./album_page.html":1159,"./album_tracklist_row.html":1160,"./annotatable_image.html":1161,"./annotation.html":1162,"./annotation_edit.html":1163,"./annotation_edits.html":1164,"./annotation_embed.html":1165,"./annotation_history.html":1166,"./annotation_placeholder.html":1167,"./annotation_share_menu.html":1168,"./annotation_sidebar.html":1169,"./answer.html":1170,"./apple_match_evaluations_page.html":1171,"./apple_music_player.html":1172,"./article_admin_bar.html":1173,"./article_authors.html":1174,"./article_content_actions.html":1175,"./article_contributor_badge.html":1176,"./article_index_arrangeable.html":1177,"./article_index_item.html":1178,"./article_page.html":1179,"./artist_badge.html":1180,"./artist_opportunities.html":1181,"./artist_songs.html":1182,"./artist_songs_and_albums.html":1183,"./artist_songs_modal.html":1184,"./artist_tooltip.html":1185,"./artist_verification.html":1186,"./audio_source_label.html":1187,"./authentication_form.html":1188,"./autocomplete_result.html":1189,"./autocomplete_tags_input.html":1190,"./autocomplete_word.html":1191,"./breadcrumbs.html":1192,"./click_to_load.html":1193,"./collapsible_content.html":1194,"./comment.html":1195,"./comment_form.html":1196,"./comment_list.html":1197,"./comments.html":1198,"./comments_placeholder.html":1199,"./component_date_input.html":1200,"./compose_message.html":1201,"./contact_button.html":1202,"./contribution_opportunity.html":1203,"./conversation_messages.html":1204,"./conversations.html":1205,"./cosigns.html":1206,"./cover_art_form.html":1207,"./cover_art_modal.html":1208,"./deleted_answer.html":1209,"./description_annotation.html":1210,"./detailed_song_search.html":1211,"./dfp_ad.html":1212,"./edit_artist_profile.html":1213,"./edit_user_email_preferences.html":1214,"./edit_user_profile.html":1215,"./editable_markdown.html":1216,"./editable_tracklist.html":1217,"./editable_tracklist_number.html":1218,"./email_confirmation_banner.html":1219,"./embedly_embed.html":1220,"./embedly_player.html":1221,"./embedly_youtube.html":1222,"./expandable_accordion_section.html":1223,"./expandable_container.html":1224,"./expandable_diff.html":1225,"./facebook_share_button.html":1226,"./fact_track_simulator.html":1227,"./flash_messages.html":1228,"./follow_button.html":1229,"./global_error_message.html":1230,"./global_message.html":1231,"./hang_initial_quote.html":1232,"./header_actions.html":1233,"./header_admin.html":1234,"./header_auth.html":1235,"./header_menu_item.html":1236,"./header_with_cover_art.html":1237,"./hidden_fields.html":1238,"./hide_song_form.html":1239,"./image_upload_button.html":1240,"./inbox.html":1241,"./inbox_container.html":1242,"./inbox_icon.html":1243,"./inbox_line_item.html":1244,"./inbox_line_item_action_icon.html":1245,"./inbox_line_item_detail/actions.html":1246,"./inbox_line_item_detail/actors.html":1247,"./inbox_line_item_detail/annotations_with_comments.html":1248,"./inbox_line_item_detail/annotations_with_rejection_comments.html":1249,"./inbox_line_item_detail/context.html":1250,"./inbox_line_item_detail/context_commentable.html":1251,"./inbox_line_item_detail/lyrics_diffs.html":1252,"./inbox_line_item_detail/lyrics_edit_acceptor.html":1253,"./inbox_line_item_detail/lyrics_edit_archive_info.html":1254,"./inbox_line_item_detail/merged_artist.html":1255,"./inbox_line_item_detail/metadata_changes.html":1256,"./inbox_line_item_detail/targets.html":1257,"./inbox_line_item_detail/user_acted_on_user.html":1258,"./inbox_line_item_detail_discussion.html":1259,"./inbox_line_item_detail_discussion_header.html":1260,"./inbox_line_item_detail_forum_post.html":1261,"./inbox_line_item_detail_forum_post_single.html":1262,"./inbox_line_item_detail_lyrics_diff.html":1263,"./inbox_line_item_detail_object.html":1264,"./inbox_line_items/generic.html":1265,"./inbox_line_items/pyong.html":1266,"./iq_inbox.html":1267,"./iq_notification_list.html":1268,"./leaderboard.html":1269,"./leaderboard_ad.html":1270,"./lyrics.html":1271,"./lyrics_edit_proposal.html":1272,"./lyrics_edit_proposal_moderation.html":1273,"./lyrics_export_preview.html":1274,"./lyrics_sync_editor.html":1275,"./lyrics_sync_home.html":1276,"./lyrics_sync_keyboard.html":1277,"./manage_chart_item.html":1278,"./manage_roles.html":1279,"./markdown_preview.html":1280,"./marquee_ad.html":1281,"./media_controls.html":1282,"./media_player.html":1283,"./merge_artist_form.html":1284,"./messages_inbox.html":1285,"./metadata_custom_performance_role_input.html":1286,"./metadata_input_and_label.html":1287,"./mini_album_card.html":1288,"./mini_annotatable_card.html":1289,"./mini_article_card.html":1290,"./mini_artist_card.html":1291,"./mini_song_card.html":1292,"./mini_user_card.html":1293,"./mini_video_card.html":1294,"./missing_metadata_form.html":1295,"./modal_window.html":1296,"./new_conversation.html":1297,"./other_users_with_ip.html":1298,"./paginated_accomplishments.html":1299,"./paginated_leaderboard.html":1300,"./placeholder_spinner.html":1301,"./placeholder_text.html":1302,"./play_pause_button.html":1303,"./primis_player.html":1304,"./profile_admin_pane.html":1305,"./profile_all_activity.html":1306,"./profile_annotation.html":1307,"./profile_artist_pane.html":1308,"./profile_contributions_annotations.html":1309,"./profile_contributions_answers.html":1310,"./profile_contributions_articles.html":1311,"./profile_contributions_comments.html":1312,"./profile_contributions_group.html":1313,"./profile_contributions_pyongs.html":1314,"./profile_contributions_questions.html":1315,"./profile_contributions_transcriptions.html":1316,"./profile_followers.html":1317,"./profile_identity.html":1318,"./profile_page.html":1319,"./profile_user_pane.html":1320,"./pyong_button_for_header.html":1321,"./pyong_button_square_button.html":1322,"./pyong_form.html":1323,"./question.html":1324,"./question_form.html":1325,"./question_list.html":1326,"./reasons_toggle.html":1327,"./recent_signups_page.html":1328,"./recirculated_content.html":1329,"./referent_editorial_indicator.html":1330,"./referent_fragment_container.html":1331,"./release_date.html":1332,"./relevant_videos.html":1333,"./report_abuse.html":1334,"./role_icon.html":1335,"./role_selection_dialog.html":1336,"./scrollable_data.html":1337,"./search_form.html":1338,"./search_result_item.html":1339,"./search_result_items.html":1340,"./search_result_paginated_section.html":1341,"./search_result_section.html":1342,"./search_results.html":1343,"./search_results_page.html":1344,"./select_dropdown.html":1345,"./share_buttons.html":1346,"./simple_datetime_input.html":1347,"./solidarity_banner.html":1348,"./song_activity.html":1349,"./song_activity_stream.html":1350,"./song_admin_menu.html":1351,"./song_album.html":1352,"./song_albums.html":1353,"./song_attribution_visualization.html":1354,"./song_color_gradient_picker.html":1355,"./song_metadata.html":1356,"./song_metadata_form.html":1357,"./song_metadata_preview.html":1358,"./song_metadata_song_relationships_input.html":1359,"./song_missing_metadata.html":1360,"./song_page.html":1361,"./song_page_sidebar_multi_placement.html":1362,"./song_preview.html":1363,"./song_primary_album.html":1364,"./song_relationships.html":1365,"./song_story_featured_story_placement.html":1366,"./song_story_gallery_page.html":1367,"./song_story_lead_story_placement.html":1368,"./song_story_modal.html":1369,"./song_verified_artists.html":1370,"./song_verified_artists_section.html":1371,"./song_verified_artists_section_single.html":1372,"./soundcloud.html":1373,"./spam_status.html":1374,"./square_item_and_iq.html":1375,"./standalone_inbox.html":1376,"./standalone_referent.html":1377,"./standalone_search.html":1378,"./standard_rich_content.html":1379,"./statistics_panel.html":1380,"./statistics_panel_item.html":1381,"./text_corrector.html":1382,"./time_ago.html":1383,"./twitter_share_button.html":1384,"./user_attribution.html":1385,"./user_badge.html":1386,"./user_badge_and_timestamp.html":1387,"./user_identities.html":1388,"./user_info_with_actions.html":1389,"./user_moderation.html":1390,"./user_tooltip.html":1391,"./vertical_album_card.html":1392,"./vertical_search_result_item.html":1393,"./vertical_search_result_items.html":1394,"./video_carousel.html":1395,"./video_edit_form.html":1396,"./video_list_edit_form.html":1397,"./video_list_page.html":1398,"./video_list_video.html":1399,"./video_page.html":1400,"./videos_modal.html":1401,"./voters.html":1402,"./voting.html":1403,"./web_annotator_manager.html":1404,"./web_annotator_manager_errors.html":1405,"./web_annotator_role_row.html":1406,"./web_annotator_roles_table.html":1407,"./youtube_subscribe_button.html":1408};function i(t){var e=o(t);return n(e)}function o(t){if(!n.o(r,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return r[t]}i.keys=function(){return Object.keys(r)},i.resolve=o,t.exports=i,i.id=1144},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("add_annotation.html",'<div ng-if="can_add_community_annotation">\n  <square-item-and-iq event_type="created_community_annotation">\n    <button\n      ng-disabled="creating_referent"\n      ng-click="start_new_community_referent()"\n      ng-class="{\'square_button--waiting\': enable_waiting_class && creating_referent}"\n      class="square_button square_button--white_background"\n      ng-bind="::\'annotation.new_community_prompt\' | i18n"\n    ></button>\n  </square-item-and-iq>\n</div>\n\n<div ng-if="can_add_pinned_annotation">\n  <square-item-and-iq event_type="created_pinned_annotation">\n    <button\n      ng-disabled="creating_referent"\n      ng-click="start_new_referent()"\n      class="square_button square_button--white_background square_button--green"\n      ng-class="{\'u-top_margin\': can_add_community_annotation, \'square_button--waiting\': enable_waiting_class && creating_referent}"\n      ng-bind="::\'annotation.new_verified_prompt\' | i18n"\n    ></button>\n  </square-item-and-iq>\n</div>\n\n<div ng-if="ctrl.user_signed_in && !(can_add_community_annotation || can_add_pinned_annotation)">\n  <button\n    ng-disabled="true"\n    class="square_button square_button--disabled"\n    ng-bind="::\'annotation.cannot_annotate_on_locked_song\' | i18n"\n  ></button>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("additional_artists.html",'<div\n  class="metadata_unit"\n  ng-class="{\'metadata_unit--table_row\': variants.table}"\n  ng-if="collection.length > 0"\n>\n  <span class="metadata_unit-label">{{label}}</span>\n\n  <span class="metadata_unit-info">\n    <span\n      ng-repeat="artist in collection | limitTo: limit track by artist.id"\n    >\n      <a\n        ng-href="{{artist.url}}"\n        tether-drop-target\n      >\n        <tether-drop show-on="hover" position="bottom center">\n          <artist-tooltip artist="artist"></artist-tooltip>\n        </tether-drop>\n\n        {{ artist.name | withoutZeroWidthSpaces }}</a>{{ $last ? \'\' : $index === collection.length - 2 && !ctrl.more_to_show() ? \' &amp;\' : \',\' }}\n    </span>\n\n    <span ng-if="ctrl.more_to_show()">\n      &amp; <a href ng-click="ctrl.show_more()" class="metadata_unit-show_more">{{collection.length - limit}} more</a>\n    </span>\n  </span>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("admin_task.html",'<form ng-submit="$ctrl.perform_task()" submit-on-cmd-enter>\n  <div ng-if="$ctrl.success_message" class="form_message form_message--success">{{$ctrl.success_message}}</div>\n  <div ng-repeat="error in $ctrl.validation_errors.base" class="form_message form_message--error">{{error}}</div>\n  <div ng-repeat="property in $ctrl.task.task_properties track by property.name">\n    <div ng-switch="property.type">\n      <div ng-switch-when="string">\n        <metadata-input-and-label label="{{property.human_name}}" errors="$ctrl.validation_errors[property.name]">\n          <input\n              ng-model="$ctrl.property_values[property.name]"\n              class="square_input square_form-standard_element_margin"\n              placeholder=""\n          />\n        </metadata-input-and-label>\n      </div>\n      <div ng-switch-when="text">\n        <metadata-input-and-label label="{{property.human_name}}" errors="$ctrl.validation_errors[property.name]">\n          <textarea\n              ng-model="$ctrl.property_values[property.name]"\n              class="square_input square_form-standard_element_margin"\n              placeholder=""\n          /></textarea>\n        </metadata-input-and-label>\n      </div>\n      <div ng-switch-when="boolean">\n        <metadata-input-and-label label="{{property.human_name}}" errors="$ctrl.validation_errors[property.name]">\n          <input\n            type="checkbox"\n            ng-model="$ctrl.property_values[property.name]"\n            class="square_form-standard_element_margin"\n          />\n        </metadata-input-and-label>\n      </div>\n      <div ng-switch-when="select">\n        <metadata-input-and-label label="{{property.human_name}}" errors="$ctrl.validation_errors[property.name]">\n          <div class="square_select_group">\n            <div class="square_select_group-single">\n              <select\n                ng-model="$ctrl.property_values[property.name]"\n                class="select_input"\n              >\n                <option ng-repeat="option in property.options" value="{{option}}">{{option}}</option>\n              </select>\n            </div>\n          </div>\n        </metadata-input-and-label>\n      </div>\n      <div ng-switch-default>\n        ERROR!!! Misconfigured and unrecognized task property type\n      </div>\n    </div>\n  </div>\n  <button\n    type="submit"\n    class="modal_window-save_button square_button square_button--purple"\n    ng-class="{\'square_button--waiting\': $ctrl.saving}"\n    ng-disabled="$ctrl.saving"\n    ng-bind="$ctrl.saving ? \'Running\' : \'Run task\'"\n  ></button>\n\n  <table ng-if="$ctrl.tabular_data" class="admin_table rich_text_formatting">\n    <tr>\n      <th ng-repeat="(header_key, _) in $ctrl.tabular_data[0] track by header_key">\n        {{header_key}}\n      </th>\n    </tr>\n    <tr ng-repeat="row in $ctrl.tabular_data track by $index">\n      <td ng-repeat="(_, value) in row track by $index">\n        <span ng-if="$ctrl.is_url(value)">\n          <a ng-href="{{value}}" target="_blank">{{value}}</a>\n        </span>\n        <span ng-if="!$ctrl.is_url(value)">{{value}}</span>\n      </td>\n    </tr>\n  </table>\n  </div>\n</form>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("admin_tasks_page.html",'<div class="admin_tasks_list">\n  <div class="column_layout u-xx_large_vertical_margins">\n    <div class="column_layout-column_span--full">\n      <h1>Admin Tasks</h1>\n      <div class="square_select_group">\n        <div class="square_select_group-single u-width_100">\n          <select ng-options="task as task.label for task in $ctrl.select_tasks track by task.name" ng-model="selected_task" class="select_input"></select>\n        </div>\n      </div>\n\n      <div ng-if="selected_task.name !== $ctrl.no_task.name">\n        <placeholder-spinner ng-if="!admin_task"></placeholder-spinner>\n        <admin-task ng-if="admin_task" task="admin_task"></admin-task>\n      </div>\n    </div>\n  </div>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("admin_user_info.html",'<div class="u-vertical_margins">\n  <span class="text_label u-display_block">Email</span>\n  <a href="mailto:{{$ctrl.user.email}}">{{$ctrl.user.email}}</a>\n</div>\n\n<div class="u-vertical_margins">\n  <span class="text_label u-display_block">Linked Accounts</span>\n  <user-identities ng-if="$ctrl.user.identities.length" user="$ctrl.user"></user-identities>\n  <span ng-if="!$ctrl.user.identities.length">No linked accounts</span>\n</div>\n\n<div class="u-vertical_margins">\n  <span class="text_label u-display_block">Browser Info</span>\n  <p><span class="u-bold">Browser: </span>{{$ctrl.user.browser || \'No info\'}}</p>\n  <p><span class="u-bold">Platform: </span>{{$ctrl.user.platform || \'No info\'}}</p>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("adwords_ad_form.html",'<form ng-submit="$ctrl.save($ctrl.model)" class="square_form">\n  <div class="text_label text_label--purple form_section_label">Add an Ad</div>\n\n  <div class="square_form-input_and_label square_form-input_and_label--full_width">\n    <div class="text_label">Theme</div>\n    <div class="square_select_group">\n      <div class="square_select_group-single u-width_100">\n        <select\n          ng-model="$ctrl.model.theme_name"\n          ng-options="theme as theme for theme in $root.themes"\n          ng-init="$ctrl.model.theme_name = $root.themes[0]"\n          autofocus\n        ></select>\n      </div>\n    </div>\n  </div>\n\n  <div class="square_form-input_and_label square_form-input_and_label--full_width">\n    <div class="text_label">Body</div>\n    <textarea class="square_input square_form-standard_element_margin" ng-model="$ctrl.model.body" placeholder="The body of this ad"></textarea>\n  </div>\n\n  <button type="submit" class="modal_window-save_button square_button square_button--purple u-small_vertical_margins" ng-class="{\'square_button--waiting\': $ctrl.saving}" ng-disabled="$ctrl.saving" ng-bind="$ctrl.saving ? \'Saving\' : \'Save\'"></button>\n</form>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("adwords_ad_group_form.html",'<form ng-submit="$ctrl.save($ctrl.model)" class="square_form">\n  <div class="text_label text_label--purple form_section_label">Add an Ad Group</div>\n\n  <div class="square_form-input_and_label square_form-input_and_label--full_width">\n    <div class="text_label">Song ID</div>\n    <input class="square_input square_form-standard_element_margin" ng-model="$ctrl.model.song_id" placeholder="The ID of the song to link back to" autofocus/>\n  </div>\n\n  <div class="square_form-input_and_label square_form-input_and_label--full_width">\n    <div class="text_label">YouTube ID</div>\n    <input class="square_input square_form-standard_element_margin" ng-model="$ctrl.model.youtube_video_id" placeholder="The ID part of the YouTube URL to traffic against"/>\n  </div>\n\n  <button type="submit" class="modal_window-save_button square_button square_button--purple u-small_vertical_margins" ng-class="{\'square_button--waiting\': $ctrl.saving}" ng-disabled="$ctrl.saving" ng-bind="$ctrl.saving ? \'Saving\' : \'Save\'"></button>\n</form>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("adwords_ad_group_list.html",'<modal-window ng-if="$ctrl.adding_ad_group" on-close="$ctrl.adding_ad_group = false">\n  <adwords-ad-group-form campaign="$ctrl.campaign" on-save="$ctrl.load_ad_groups()" on-close="$ctrl.adding_ad_group = undefined"></adwords-ad-group-form>\n</modal-window>\n\n<modal-window ng-if="$ctrl.adding_ad_to_group" on-close="$ctrl.adding_ad_to_group = undefined">\n  <adwords-ad-form ad-group="$ctrl.adding_ad_to_group" on-save="$ctrl.load_ad_groups()" on-close="$ctrl.adding_ad_to_group = undefined"></adwords-ad-form>\n</modal-window>\n\n<div ng-repeat="ad_group in $ctrl.ad_groups" class="u-vertical_margins" ng-if="!$ctrl.loading">\n  <div class="text_label">\n    <a ng-href="{{ ad_group.song.url }}">{{ ad_group.song.title }} by {{ ad_group.song.primary_artist.name }}</a>\n    <a ng-href="{{ ad_group.youtube_url }}" target="_blank">({{ ad_group.youtube_video_id }})</a>\n  </div>\n\n  <ul>\n    <li ng-repeat="ad in ad_group.adwords_ads">\n      <a ng-click="$ctrl.change_ad_status(ad, ad.status === \'ENABLED\' ? \'PAUSED\' : \'ENABLED\')" prevent-default-click href="#" ng-switch="ad.status" confirm="Are you sure?">\n        <svg ng-switch-when="PAUSED" class="inline_icon inline_icon--red" src="circle.svg"></svg>\n        <svg ng-switch-when="ENABLED" class="inline_icon inline_icon--green" src="circle.svg"></svg>\n      </a>\n\n      <a class="u-hair_left_margin" ng-href="{{ ad.image_url }}" target="_blank" title="Preview (theme: {{ ad.theme_name }})">\n        <svg class="inline_icon" src="eye.svg"></svg>\n      </a>\n\n      <span class="u-half_left_margin" ng-bind="ad.body"></span>\n    </li>\n\n    <li>\n      <span class="text_label text_label--button text_label--purple" ng-click="$ctrl.adding_ad_to_group = ad_group">+ Ad</span>\n    </li>\n  </ul>\n</div>\n\n<div class="u-vertical_margins">\n  <span class="text_label text_label--button text_label--purple" ng-click="$ctrl.adding_ad_group = true">+ Ad Group</span>\n</div>\n\n<placeholder-spinner ng-if="$ctrl.loading"></placeholder-spinner>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("adwords_campaign_form.html",'<form ng-submit="$ctrl.save($ctrl.model)" class="square_form">\n  <div class="text_label text_label--purple form_section_label">Add a Campaign</div>\n\n  <div class="square_form-input_and_label square_form-input_and_label--full_width">\n    <div class="text_label">Name</div>\n    <input class="square_input square_form-standard_element_margin" ng-model="$ctrl.model.name" placeholder="Name of the campaign" autofocus/>\n  </div>\n\n  <div class="square_form-input_and_label square_form-input_and_label--full_width">\n    <div class="text_label">Network</div>\n    <div class="square_select_group">\n      <div class="square_select_group-single u-width_100">\n        <select ng-options="network as network.name for network in $ctrl.available_adwords_networks" ng-model="$ctrl.model.adwords_network" class="select_input"></select>\n      </div>\n    </div>\n  </div>\n\n  <div class="square_form-input_and_label square_form-input_and_label--full_width">\n    <div class="text_label">Budget (in USD)</div>\n    <input class="square_input square_form-standard_element_margin" ng-model="$ctrl.model.budget" placeholder="50.00" autofocus/>\n  </div>\n\n  <button type="submit" class="modal_window-save_button square_button square_button--purple u-small_vertical_margins" ng-class="{\'square_button--waiting\': $ctrl.saving}" ng-disabled="$ctrl.saving" ng-bind="$ctrl.saving ? \'Saving\' : \'Save\'"></button>\n</form>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("adwords_campaign_list.html",'<modal-window ng-if="$ctrl.adding_campaign" on-close="$ctrl.adding_campaign = false">\n  <adwords-campaign-form on-save="$ctrl.load_campaigns()" on-close="$ctrl.adding_campaign = false"></adwords-campaign-form>\n</modal-window>\n\n<div ng-repeat="campaigns in $ctrl.grouped_campaigns" ng-if="!$ctrl.loading" class="u-vertical_margins">\n  <div class="text_label" ng-bind="campaigns[0].adwords_network.name"></div>\n\n  <ul>\n    <li ng-repeat="campaign in campaigns">\n      <div ng-switch="campaign === $ctrl.selected_campaign">\n        <span ng-switch-when="true" ng-bind="campaign.name"></span>\n        <a ng-switch-when="false" href="#" ng-click="$ctrl.select(campaign)" prevent-default-click ng-bind="campaign.name"></a>\n      </div>\n    </li>\n  </ul>\n</div>\n\n<div class="u-vertical_margins">\n  <span class="text_label text_label--button text_label--purple" ng-click="$ctrl.adding_campaign = true">+ Campaign</span>\n</li>\n\n<placeholder-spinner ng-if="$ctrl.loading"></placeholder-spinner>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("adwords_editor.html",'<div class="column_layout u-vertical_margins">\n  <div class="column_layout-column_span column_layout-column_span--secondary">\n    <span class="tag_label tag_label--large tag_label--black_background">Campaigns</span>\n    <adwords-campaign-list selected-campaign="$ctrl.campaign" on-select="$ctrl.campaign = campaign"></adwords-campaign-list>\n  </div>\n\n  <div class="column_layout-column_span column_layout-column_span--primary" ng-if="$ctrl.campaign">\n    <span class="tag_label tag_label--large tag_label--black_background">Advertisements</span>\n    <adwords-ad-group-list campaign="$ctrl.campaign" ng-if="$ctrl.campaign"></adwords-ad-group-list>\n  </div>\n</div>\n\n<modal-window ng-if="$ctrl.adding_ad" on-close="$ctrl.adding_ad = false">\n  <adwords-ad-form on-save="$ctrl.create_ad(data)"></adwords-ad-group-form>\n</modal-window>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("album_admin_menu.html",'<div\n  ng-show="$ctrl.has_admin_items"\n  class="square_button square_button--transparent u-half_horizontal_margins u-bottom_margin"\n  tether-drop-target\n>\n  More\n  <svg src="down_arrow.svg" class="inline_icon inline_icon--short inline_icon--up_1"></svg>\n  <tether-drop\n    show-on="click"\n    position="bottom left"\n    yields-api="$ctrl.tether_api = tetherApi"\n  >\n    <div class="tooltip tooltip--no_padding">\n      <div\n        ng-repeat="action in $ctrl.actions"\n        ng-if="$ctrl.can_perform(action)"\n        class="tooltip-list_item"\n        ng-click="$ctrl.attempt_admin_action(action); $ctrl.tether_api.hide()"\n      >\n        <span ng-switch="action">\n          <svg ng-switch-when="destroy" class="inline_icon tooltip-list_item-icon" src="x.svg"></svg>\n          <svg ng-switch-when="unlock" class="inline_icon inline_icon--reading_size inline_icon--up_1 tooltip-list_item-icon" src="unlock.svg"></svg>\n          <svg ng-switch-when="lock" class="inline_icon tooltip-list_item-icon" src="lock.svg"></svg>\n          <svg ng-switch-when="super_lock" class="inline_icon tooltip-list_item-icon" src="lock.svg"></svg>\n        </span>\n        {{ \'album.actions.\' + action | i18n }}\n        <span ng-if="action === \'unlock\'">&nbsp;({{ \'album.lock_state.\' + $ctrl.album.lock_state | i18n }})</span>\n      </div>\n      <div\n        class="tooltip-list_item"\n        copy-to-clipboard="$ctrl.tracklist_markup()"\n        text-to-show-after-copy="Copied to clipboard"\n      >\n        Copy Tracklist Markup\n      </div>\n      <div\n        ng-if="$ctrl.can_perform(\'see_short_id\')"\n        class="tooltip-list_item"\n        copy-to-clipboard="\'album:{{$ctrl.album.id}}\'"\n        text-to-show-after-copy="Copied to clipboard"\n      >\n        Copy Short ID (<code>album:{{$ctrl.album.id}}</code>)\n      </div>\n    </div>\n  </tether-drop>\n</div>\n\n<modal-window\n  ng-if="$ctrl.show_sorted_modal"\n  on-close="$ctrl.show_sorted_modal = false"\n  variants="{narrow_width: true}"\n>\n  <div\n    ng-repeat="album_appearance in $ctrl.album_appearances | orderBy:\'song.stats.unreviewed_annotations\':true track by album_appearance.id"\n    class="u-bottom_margin"\n  >\n    <mini-song-card\n      object="album_appearance.song"\n      variants="{show_unreviewed_count: true}"\n    ></mini-song-card>\n  </div>\n</modal-window>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("album_grid.html",'<div class="thumbnail_grid white_container" ng-if="$ctrl.albums.length > 0">\n  <div\n    class="thumbnail_grid-grid_element thumbnail_grid-grid_element--{{ $ctrl.variants.item_size || \'third\' }}"\n    ng-repeat="album in $ctrl.albums | limitTo: $ctrl.count track by $id(album)"\n  >\n    <vertical-album-card object="album"></vertical-album-card>\n  </div>\n</div>\n\n<div\n  class="full_width_button u-clickable u-quarter_top_margin"\n  ng-if="$ctrl.albums.length > 0"\n  ng-click="$ctrl.all_albums_pane_open = true"\n>\n  Show all albums by {{ $ctrl.artist.name }}\n  <svg class="inline_icon inline_icon--reading_size inline_icon--up_1" src="right_arrow.svg"></svg>\n</div>\n\n<modal-window\n  ng-if="$ctrl.all_albums_pane_open"\n  on-close="$ctrl.all_albums_pane_open = undefined; $ctrl.artist_album_scrollable_data.reset()"\n  variants="{narrow_width: true, white_background: true}"\n>\n  <scrollable-data\n    src="$ctrl.artist_album_scrollable_data"\n    scroll-mechanism="infinite_scroll"\n    repeat-with="album"\n  >\n    <div class="profile_list_item" ng-class="{\'profile_list_item--last\': $last}">\n      <mini-album-card object="album" variants="{small: true}"></mini-album-card>\n    </div>\n  </scrollable-data>\n</modal-window>\n\n<div ng-if="$ctrl.albums.length == 0">\n  <div class="text_label text_label--gray u-xx_large_vertical_margins">\n    There are no albums by this artist on Genius\n  </div>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("album_metadata_form.html",'<form ng-submit="$ctrl.save()" ng-model-options="{updateOn: \'submit\'}" submit-on-cmd-enter dirtyable yields-is-dirty="$ctrl.yields_is_dirty({is_dirty})">\n  <div ng-if="$ctrl.error" class="form_message form_message--error text_label">\n    {{ $ctrl.error.message }}\n    <span ng-repeat="base_error in $ctrl.error.response.validation_errors.base">\n      <br>\n      {{ base_error }}\n    </span>\n  </div>\n\n  <div class="square_form">\n    <metadata-input-and-label label="{{:: \'album.metadata.name\' | i18n}}" full="true" errors="$ctrl.error.response.validation_errors.name">\n      <input name="name" ng-model="$ctrl.album.name" placeholder="Album name" class="square_input square_form-standard_element_margin">\n    </metadata-input-and-label>\n\n    <metadata-input-and-label label="{{:: \'album.metadata.artist\' | i18n}}" errors="$ctrl.error.response.validation_errors.artist">\n      <input\n          ng-model="$ctrl.album.artist"\n          autocomplete-with="artist"\n          class="square_input square_form-standard_element_margin"\n          placeholder="Artist"\n          ng-value="$ctrl.album.artist.name"\n          display-field="name"\n      ></input>\n    </metadata-input-and-label>\n\n    <metadata-input-and-label label="{{:: \'album.metadata.release_date\' | i18n}}" full="true" errors="$ctrl.error.response.validation_errors.release_date_components">\n      <div class="u-bottom_margin">\n        <component-date-input ng-model="$ctrl.album.release_date_components"></component-date-input>\n      </div>\n    </metadata-input-and-label>\n\n    <metadata-input-and-label label="{{:: \'album.metadata.custom_header_image_url\' | i18n}}" full="true" errors="$ctrl.error.response.validation_errors.header_image_url">\n      <image-upload-button\n        default-image="$ctrl.album.custom_header_image_url"\n        on-file-picked="$ctrl.album.custom_header_image_url = url"\n      ></image-upload-button>\n    </metadata-input-and-label>\n\n\n    <metadata-input-and-label label="{{:: \'album.metadata.album_performances\' | i18n}}" full="true" errors="$ctrl.error.response.validation_errors.album_performances">\n      <metadata-custom-performance-role-input\n        custom-performance-roles="$ctrl.album.performance_groups"\n        role-field-placeholder="e.g. Executive Producer"\n        artist-field-placeholder="Phil Spector"\n        validation-errors="$ctrl.error.response.validation_errors"\n        class="u-width_100"\n      ></metadata-custom-performance-role-input>\n    </metadata-input-and-label>\n\n    <div class="u-small_vertical_margins">\n      <button\n        class="square_button square_button--green"\n        type="submit"\n      >Save</button>\n      <button ng-click="$ctrl.close()" class="square_button square_button--transparent square_button--gray">Cancel</button>\n    </div>\n  </div>\n</form>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("album_page.html",'<div class="leaderboard_ad_container">\n  <leaderboard-ad name="desktop_album_leaderboard"></leaderboard-ad>\n</div>\n\n<header-with-cover-art\n  type="album"\n  object="$ctrl.page_data.album"\n  cover-arts="$ctrl.page_data.album.cover_arts"\n  header-image-url="$ctrl.page_data.album.header_image_url"\n  cover-art-url="$ctrl.page_data.album.cover_art_url"\n  title-label="$ctrl.page_data.album.name"\n  artist="$ctrl.page_data.album.artist"\n  can-edit="$ctrl.has_permission(\'edit\')"\n  on-edit="$ctrl.editing = true; $ctrl.current_edit_panel = \'cover_art\'"\n  focused-cover-art-id="$ctrl.focused_cover_art_id"\n  on-close-cover-art-modal="$ctrl.unfocus_cover_art()"\n  variants="{\n    white_title: true,\n    type_label: \'Album\',\n    large_cover_art: true,\n    wide_primary_column: true\n  }"\n>\n  <metadata>\n    <div\n      ng-if="$ctrl.page_data.album.release_date_components"\n      class="metadata_unit"\n    >\n      {{$ctrl.is_released() ? \'Released\' : \'Expected\'}} {{$ctrl.page_data.album.release_date_components | imprecise_date }}\n    </div>\n  </metadata>\n  <secondary>\n    <div class="header_with_cover_art-metadata_preview u-small_top_margin u-right_margin">\n      <div\n        class="header_with_cover_art-metadata_preview-unit"\n        ng-if="$ctrl.page_data.album.song_pageviews"\n        title="{{ $ctrl.page_data.album.song_pageviews | number }} views of songs on this album"\n      >\n        <svg class="inline_icon inline_icon--gray" src="eye.svg"></svg>\n        <span class="text_label text_label--gray text_label--x_small_text_size">{{ $ctrl.page_data.album.song_pageviews | abbreviateBigNumber }}</span>\n      </div>\n    </div>\n  </secondary>\n</header-with-cover-art>\n\n<modal-window\n  hidden="$ctrl.saving"\n  ng-if="$ctrl.editing || $ctrl.saving"\n  on-close="$ctrl.attempt_close(!$ctrl.is_form_dirty(), $ctrl.close_form)"\n>\n  <div class="column_layout" ng-init="$ctrl.current_edit_panel = $ctrl.current_edit_panel || \'album_info\'">\n    <div class="column_layout-column_span column_layout-column_span--secondary">\n      <div\n        class="toggleable_list_item"\n        ng-class="{\'toggleable_list_item--selected\': $ctrl.current_edit_panel === \'album_info\'}"\n        ng-click="$ctrl.current_edit_panel = \'album_info\'"\n      >Edit Info</div>\n      <div\n        class="toggleable_list_item"\n        ng-class="{\'toggleable_list_item--selected\': $ctrl.current_edit_panel === \'cover_art\'}"\n        ng-click="$ctrl.current_edit_panel = \'cover_art\'"\n      >Edit Cover Art</div>\n    </div>\n\n    <div class="column_layout-column_span column_layout-column_span--primary" ng-switch="$ctrl.current_edit_panel">\n      <album-metadata-form\n        ng-switch-when="album_info"\n        album="$ctrl.page_data.album"\n        on-save="$ctrl.save(album)"\n        close="$ctrl.close_form()"\n        yields-is-dirty="$ctrl.is_form_dirty = is_dirty"\n      ></album-metadata-form>\n\n      <cover-art-form\n        ng-switch-when="cover_art"\n        cover-artable="$ctrl.page_data.album"\n        cover-arts="$ctrl.page_data.album.cover_arts"\n        type="album"\n        close="$ctrl.close_form()"\n        yields-is-dirty="$ctrl.is_form_dirty = is_dirty"\n      ></cover-art-form>\n    </div>\n  </div>\n</modal-window>\n\n<div class="column_layout u-top_margin">\n  <div class="column_layout-column_span column_layout-column_span--primary">\n    <div ng-hide="$ctrl.editing_tracklist">\n      <div class="square_button u-bottom_margin" ng-click="$ctrl.editing_tracklist = !$ctrl.editing_tracklist" ng-if="$ctrl.has_permission(\'edit\')">Edit Tracklist</div>\n      <div class="square_button u-bottom_margin" ng-click="$ctrl.editing = true" ng-if="$ctrl.has_permission(\'edit\')">Edit Album Info</div>\n      <album-admin-menu ng-if="$ctrl.user_signed_in" album="$ctrl.page_data.album" album-appearances="$ctrl.page_data.album_appearances"></album-admin-menu>\n      <h2\n        class="text_label text_label--gray u-half_bottom_margin"\n      >{{ $ctrl.page_data.album.name }} Tracklist</h2>\n      <album-tracklist-row\n        ng-repeat="album_appearance in $ctrl.page_data.album_appearances track by album_appearance.id"\n        album-appearance="album_appearance"\n        show-artist="$ctrl.page_data.album.artist.id !== album_appearance.song.primary_artist.id"\n      ></album-tracklist-row>\n    </div>\n    <editable-tracklist\n      ng-if="$ctrl.editing_tracklist"\n      album="$ctrl.page_data.album"\n      album-appearances="$ctrl.page_data.album_appearances"\n      editing="$ctrl.editing_tracklist"\n      on-update="$ctrl.page_data.album_appearances = album_appearances"\n      close="$ctrl.editing_tracklist = false"\n    ></editable-tracklist>\n\n    <recirculated-content\n      stories="$ctrl.page_data.related_articles"\n    ></recirculated-content>\n\n    <comments type="albums" commentable="$ctrl.page_data.album"></comments>\n  </div>\n\n  <div class="column_layout-column_span column_layout-column_span--secondary">\n    <primis-player name="desktop_sitewide_primis_video"></primis-player>\n\n    <div class="white_container u-x_large_top_margin">\n      <description-referent\n        object="$ctrl.page_data.album.description_annotation"\n        variants="{truncated: true}"\n      ></description-referent>\n    </div>\n\n    <dfp-ad\n      class="u-display_block"\n      name="desktop_album_sidebar"\n      ad-classes="[\'u-top_margin\']"\n    ></dfp-ad>\n\n    <h4\n      class="text_label text_label--gray u-x_large_top_margin u-half_bottom_margin"\n    >{{ $ctrl.page_data.album.name }} Q&amp;A</h4>\n    <div class="white_container">\n      <defer-compile\n        use-initial-content-with-key="question_list"\n        within-visibility-range="150px"\n        delay="500"\n      >\n        <question-list\n          questionable="$ctrl.page_data.album"\n          pinned-questions="$ctrl.page_data.pinned_questions"\n          pending-question-count="$ctrl.page_data.pending_question_count"\n          featured-question="$ctrl.page_data.featured_question"\n        ></question-list>\n      </defer-compile>\n    </div>\n\n    <div ng-if="!$ctrl.hide_leaderboard">\n      <h4\n        class="text_label text_label--gray u-x_large_top_margin u-half_bottom_margin"\n      >Top {{$ctrl.page_data.album.name}} scholars</h4>\n      <div class="white_container">\n        <paginated-leaderboard\n          source="$ctrl.get_leaderboard_page"\n          per-page="10"\n          on-empty="$ctrl.hide_leaderboard = true"\n          ng-attr-extra-info="{{$ctrl.page_data.album.current_user_metadata.iq_on_object ? \'Your IQ on \' + $ctrl.page_data.album.name + \': \' + ($ctrl.page_data.album.current_user_metadata.iq_on_object | number:0) : undefined}}"\n        ></paginated-leaderboard>\n      </div>\n    </div>\n\n    <div ng-if="$ctrl.page_data.album.performance_groups.length > 0">\n      <div class="white_container u-x_large_top_margin">\n        <h4\n          class="text_label u-half_bottom_margin"\n        >Album Credits</h4>\n        <div\n          ng-repeat="label_artists in $ctrl.page_data.album.performance_groups track by $index"\n        >\n          <expandable-list\n            collection="label_artists.artists"\n            template="additional_artists"\n            limit="3"\n            label="{{label_artists.label}}"\n            variants="{table: true}"\n          ></expandable-list>\n        </div>\n      </div>\n    </div>\n\n    <div ng-if="$ctrl.page_data.album.song_performances.length > 0">\n      <div class="white_container u-x_large_top_margin">\n        <h4\n          class="text_label u-half_bottom_margin"\n        >Song Credits</h4>\n        <div\n          ng-repeat="label_artists in $ctrl.page_data.album.song_performances | limitTo: $ctrl.album_credits_expanded ? null : 5 track by $index"\n        >\n          <expandable-list\n            collection="label_artists.artists"\n            template="additional_artists"\n            limit="3"\n            label="{{label_artists.label}}"\n            variants="{table: true}"\n          ></expandable-list>\n        </div>\n        <a\n          class="test_label text_label--purple u-top_margin u-display_block u-clickable"\n          ng-if="$ctrl.page_data.album.song_performances.length > 5"\n          ng-click="$ctrl.album_credits_expanded = !$ctrl.album_credits_expanded"\n        >\n          {{$ctrl.album_credits_expanded ? \'Show Fewer\' : \'Show \' + ($ctrl.page_data.album.song_performances.length - 5) + \' More\' }}\n          <svg ng-show="!$ctrl.album_credits_expanded" src="down_arrow.svg" class="inline_icon inline_icon--gray inline_icon--short"></svg>\n          <svg ng-show="$ctrl.album_credits_expanded" src="up_arrow.svg" class="inline_icon inline_icon--gray inline_icon--short"></svg>\n        </a>\n      </div>\n    </div>\n\n    <div ng-if="$ctrl.page_data.other_albums_by_artist.length > 0">\n      <h4\n        class="text_label text_label--gray u-x_large_top_margin u-half_bottom_margin"\n      >More {{$ctrl.page_data.album.artist.name}} albums</h4>\n\n      <album-grid\n        albums="$ctrl.page_data.other_albums_by_artist"\n        artist="$ctrl.page_data.album.artist"\n        count="2"\n        variants="{item_size: \'half\'}"\n      ></album-grid>\n    </div>\n\n    <div class="white_container u-top_margin" ng-if="$ctrl.show_report_abuse">\n      <report-abuse\n        type="albums"\n        object="$ctrl.page_data.album"\n        button-text="Report Album"\n      ></report-abuse>\n    </div>\n  </div>\n</div>\n\n<div class="gray_container u-xx_large_top_margin">\n  <breadcrumbs order="[$ctrl.page_data.album.artist, $ctrl.page_data.album]"></breadcrumbs>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("album_tracklist_row.html",'<div class="chart_row chart_row--light_border chart_row--full_bleed_left chart_row--align_baseline chart_row--no_hover">\n  <div class="chart_row-number_container chart_row-number_container--align_left">\n    <span class="chart_row-number_container-number chart_row-number_container-number--gray">\n      <span>{{$ctrl.album_appearance.track_number}}</span>\n    </span>\n  </div>\n  <div class="chart_row-content">\n    <a ng-if="$ctrl.can(\'view\')" ng-href="{{$ctrl.album_appearance.song.url}}" class="u-display_block">\n      <h3 class="chart_row-content-title">\n        {{$ctrl.show_artist ? $ctrl.album_appearance.song.full_title : $ctrl.album_appearance.song.title_with_featured}}\n        <span class="chart_row-content-title-subtitle">Lyrics</span>\n        <svg src="checky.svg" class="checky checky--up_1 u-quarter_horizontal_margins" ng-if="$ctrl.album_appearance.song.has_verified_artists"></svg>\n      </h3>\n    </a>\n    <h3 ng-if="!$ctrl.can(\'view\')" class="chart_row-content-title">\n      {{$ctrl.show_artist ? $ctrl.album_appearance.song.full_title : $ctrl.album_appearance.song.title_with_featured}}\n      <span class="chart_row-content-title-subtitle">Lyrics</span>\n      <svg src="checky.svg" class="checky checky--up_1 u-quarter_horizontal_margins" ng-if="$ctrl.album_appearance.song.has_verified_artists"></svg>\n    </h3>\n    <div ng-if="$ctrl.expanded">\n      <div ng-if="$ctrl.has_credits()" class="u-half_top_margin">\n        <expandable-list\n          collection="$ctrl.album_appearance.song.featured_artists"\n          label="Featuring"\n          limit="2"\n          template="additional_artists"\n        ></expandable-list>\n        <expandable-list\n          collection="$ctrl.album_appearance.song.producer_artists"\n          label="Produced by"\n          limit="2"\n          template="additional_artists"\n        ></expandable-list>\n        <expandable-list\n          collection="$ctrl.album_appearance.song.writer_artists"\n          label="Written by"\n          limit="2"\n          template="additional_artists"\n        ></expandable-list>\n      </div>\n      <div ng-if="$ctrl.album_appearance.song.description_preview" class="rich_text_formatting u-half_top_margin">\n        <span>{{ $ctrl.album_appearance.song.description_preview | truncateToBoundary:125:{with_ellipsis: true} }}</span>\n        <a class="chart_row-content-read_more" ng-href="{{$ctrl.album_appearance.song.url}}">\n          <span>read more</span>\n          <svg src="external.svg" class="inline_icon inline_icon--dark_purple inline_icon--half_height"></svg>\n        </a>\n      </div>\n      <song-missing-metadata\n        ng-if="$ctrl.can(\'edit_anything\')"\n        song="$ctrl.album_appearance.song"\n        possible-missing-info="[\'writer_artists\', \'producer_artists\', \'release_date_components\']"\n      ></song-missing-metadata>\n    </div>\n  </div>\n  <div\n    class="chart_row-metadata_element chart_row-metadata_element--large"\n    ng-if="$ctrl.album_appearance.song.lyrics_state === \'unreleased\'"\n    tether-drop-target\n  >\n    {{:: \'song.lyrics_state.unreleased.indicator\' | i18n }}\n    <tether-drop show-on="hover">\n      <div class="tooltip u-half_left_margin">{{:: \'song.lyrics_state.unreleased.message\' | i18n }}</div>\n    </tether-drop>\n  </div>\n  <div\n    class="chart_row-metadata_element chart_row-metadata_element--large"\n    ng-if="$ctrl.album_appearance.song.lyrics_state === \'incomplete\'"\n    tether-drop-target\n  >\n    {{:: \'song.lyrics_state.incomplete.indicator\' | i18n }}\n    <tether-drop show-on="hover">\n      <div class="tooltip u-half_left_margin">{{:: \'song.lyrics_state.incomplete.message\' | i18n }}</div>\n    </tether-drop>\n  </div>\n  <div\n    class="chart_row-metadata_element chart_row-metadata_element--hot chart_row-metadata_element--large"\n    ng-if="$ctrl.album_appearance.song.lyrics_state === \'complete\' && $ctrl.album_appearance.song.stats.concurrents + 1 > 50"\n  >\n    <svg src="fire.svg" class="inline_icon inline_icon--pink inline_icon--reading_size inline_icon--up_2"></svg>\n    {{$ctrl.album_appearance.song.stats.concurrents + 1 | number}}\n  </div>\n  <div\n    class="chart_row-metadata_element chart_row-metadata_element--large"\n    ng-if="$ctrl.album_appearance.song.lyrics_state === \'complete\' && $ctrl.album_appearance.song.stats.pageviews"\n  >\n    <svg src="eye.svg" class="inline_icon inline_icon--up_1"></svg>\n    {{$ctrl.album_appearance.song.stats.pageviews | abbreviateBigNumber}}\n  </div>\n  <div\n    class="chart_row-expand u-increase_tap_area_full_space"\n    ng-class="{\'chart_row-expand--expanded\': $ctrl.expanded}"\n    ng-click="$ctrl.expanded = !$ctrl.expanded"\n  >\n    <svg\n      src="down_arrow.svg"\n      ng-if="($ctrl.album_appearance.song.description_preview || $ctrl.has_credits() || $ctrl.can(\'edit_anything\'))"\n      class="inline_icon inline_icon--gray inline_icon--up_1 inline_icon--short"\n    ></svg>\n  </div>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("annotatable_image.html",'<div class="annotatable_image" on-hover-with-no-digest="ctrl.set_current_hover_and_digest(hover)">\n  <div class="annotatable_image-add_annotation_button" ng-if="hovering_over_image">\n    <add-annotation\n      ng-if="!creating_image_referent && !image_referent_created"\n      creating-referent="false"\n      can-add-pinned-annotation="can_perform(\'add_pinned_annotation_to\', song)"\n      can-add-community-annotation="can_perform(\'add_community_annotation_to\', song)"\n      song="song"\n      annotation="annotation"\n      start-new-community-referent="ctrl.create_image_referent({community: true})"\n      start-new-referent="ctrl.create_image_referent()"\n    ></add-annotation>\n    <placeholder-spinner ng-if="creating_image_referent"></placeholder-spinner>\n  </div>\n  <img sized-src="src"/>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("annotation.html",'<div\n  ng-if="annotation.state === \'pending\'"\n  class="dashed_background_message u-clickable"\n  tether-drop-target\n>\n  <svg class="inline_icon inline_icon--pink" src="alert.svg"></svg>\n  <span ng-if="variants.isDescription">{{ \'annotation.unreviewed_notice.notice_description_fragment\' | i18n:{annotation_name: (referent.annotatable._type | descriptionAnnotationName)} }}</span>\n  <span ng-if="!variants.isDescription">{{ \'annotation.unreviewed_notice.notice_fragment\' | i18n }}</span>\n  <span class="dashed_background_message-underlined_word">{{ \'annotation.unreviewed_notice.notice_adjective\' | i18n }}</span>\n\n  <tether-drop\n    show-on="hover"\n    position="bottom center"\n  >\n    <div\n      class="tooltip tooltip--tiny u-half_vertical_margins u-half_horizontal_margins"\n      stop-propagation="click"\n    >\n      <p>\n        {{ \'annotation.unreviewed_notice.tooltip\' | i18n }}\n        <a ng-href="{{ctrl.unreviewed_annotation_tooltip_info_url}}" target="_blank">{{ \'annotation.unreviewed_notice.tooltip_link\' | i18n }}</a>.\n      </p>\n    </div>\n  </tether-drop>\n</div>\n\n<user-badge\n  ng-if="annotation.verified && annotation.new"\n  size="medium"\n  object="annotation.authors[0].user"\n  pinned-role="annotation.authors[0].pinned_role"\n  sponsor="annotation.source && annotation.source.name"\n  variants="{\'hide_iq\': annotation.source && annotation.source.name}"\n></user-badge>\n\n<user-badge-and-timestamp\n  ng-if="annotation.verified && !annotation.new"\n  size="medium"\n  user="annotation.authors[0].user"\n  pinned-role="annotation.authors[0].pinned_role"\n  time="annotation.created_at"\n  sponsor="annotation.source && annotation.source.name"\n  variants="{\'hide_iq\': annotation.source && annotation.source.name}"\n></user-badge-and-timestamp>\n\n<div\n  class="annotation_label"\n  ng-class="{\'u-clickable\': !ctrl.annotation_is_unwritten()}"\n  ng-if="ctrl.show_annotation_label() && annotation.state !== \'pending\'"\n  ng-click="toggle_contributors()"\n>\n  <h3 ng-if="variants.isDescription" class="u-inline">{{:: ctrl.annotation_title() }}</h3>\n  <span ng-if="!variants.isDescription">{{:: ctrl.annotation_title() }}</span>\n  <span class="annotation_label-underline" ng-if="!ctrl.annotation_is_unwritten()">\n    {{ annotation.authors.length }} {{ \'terms.contributor\' | i18n:{count:annotation.authors.length} }}\n  </span>\n</div>\n\n<div ng-if="ctrl.show_placeholder_annotation_label()" class="placeholder">\n  <div class="placeholder-pulsing_content u-bottom_margin">\n    <placeholder-user-badge size="x_small"></placeholder-user-badge>\n  </div>\n</div>\n\n<user-badge-and-timestamp\n  ng-if="annotation.state === \'pending\'"\n  size="x_small"\n  user="annotation.authors[0].user"\n  pinned-role="annotation.authors[0].pinned_role"\n  time="annotation.created_at"\n></user-badge-and-timestamp>\n\n<div ng-if="showing_contributors && !ctrl.annotation_is_unwritten()">\n  <leaderboard collection="annotation.authors"></leaderboard>\n  <div class="u-half_vertical_margins">\n    <span ng-click="ctrl.showing_all_versions = true" class="u-float_right text_label text_label--x_small_text_size text_label--button">View all edits</span>\n    <div class="leaderboard_footer">\n      <p>\n        Created by\n        <a href="{{ annotation.created_by.url }}">{{ annotation.created_by.name }}</a>\n        <time-ago time="annotation.created_at"></time-ago>\n      </p>\n      <p ng-if="annotation.state !== \'pending\' && annotation.accepted_by">\n        Accepted by\n        <a href="{{ annotation.accepted_by.url }}">{{ annotation.accepted_by.name }}</a>\n      </p>\n    </div>\n  </div>\n</div>\n\n<div ng-if="ctrl.annotation_is_being_created_by_someone_else()">\n  <div class="annotation_label u-half_bottom_margin">{{ \'annotation.currently_annotating.header\' | i18n }}</div>\n  {{\n    {\n      \'annotation.currently_annotating.default_body\': !can(\'destroy\'),\n      \'annotation.currently_annotating.taking_awhile_body\': can(\'destroy\')\n    } | i18n:{name: annotation.created_by.login}\n  }}\n  <div class="u-top_margin" ng-if="can(\'destroy\')">\n    <square-item-and-iq\n      event-type="you_deleted_an_annotation"\n      show-pill="!ctrl.is_authored_by_current_user()"\n    >\n      <button\n        ng-click="delete()"\n        confirm="Are you sure?"\n        class="square_button square_button--red"\n      >Delete</button>\n    </square-item-and-iq>\n  </div>\n</div>\n\n<div\n  ng-if="\n    ctrl.annotation_is_unwritten() &&\n    (annotation.needs_exegesis || can(\'edit\')) &&\n    !annotation._editing._form_visible &&\n    ctrl.user_signed_in &&\n    !annotation.deleted\n  "\n  class="u-bottom_margin"\n>\n  <div ng-if="disable_saving_with !== \'Saving\'">\n    <square-item-and-iq\n      event-type="{{ annotation.verified ? \'created_pinned_annotation\' : \'created_community_annotation\' }}"\n      variants="{full_width: true}"\n    >\n      <textarea\n        ng-click="start_editing()"\n        class="square_input square_input--full_width square_input--single_line_height"\n        placeholder="{{(\'annotation.prompts.\' + (variants.isDescription ? \'description\' : \'default\') | i18n:{annotation_name: (referent.annotatable._type | descriptionAnnotationName)})}}"\n        autosize-off\n      ></textarea>\n    </square-item-and-iq>\n\n    <div ng-if="can(\'destroy\')" class="u-half_top_margin">\n      <square-item-and-iq\n        event-type="you_deleted_an_annotation"\n        show-pill="!ctrl.is_authored_by_current_user()"\n      >\n        <button\n          ng-click="delete()"\n          confirm="Are you sure?"\n          class="square_button square_button--red"\n        >Delete</button>\n      </square-item-and-iq>\n    </div>\n  </div>\n\n  <placeholder-spinner ng-if="disable_saving_with === \'Saving\'"></placeholder-spinner>\n</div>\n\n<cosigns ng-if="annotation.cosigned_by.length"></cosigns>\n\n<div\n  class="truncated_annotation_text"\n  ng-if="ctrl.content_is_truncated && !annotation._editing._form_visible && !ctrl.annotation_is_unwritten()"\n>\n  <span\n    embedly\n    class="truncated_annotation_text-body rich_text_formatting"\n    ng-bind-html="annotation.body.html | truncateToBoundary:ctrl.truncation_length:{with_ellipsis: true}"\n  ></span>\n  <span\n    class="truncated_annotation_text-read_more"\n    ng-click="ctrl.content_is_truncated = false"\n  >read more &raquo;</span>\n</div>\n\n<standard-rich-content\n  html="annotation.body.html"\n  ng-show="!annotation._editing._form_visible && !ctrl.annotation_is_unwritten() && !ctrl.content_is_truncated"\n  watch-images-loaded="annotation.body.html"\n  open-links-in-new-window\n  handle-intra-page-links\n></standard-rich-content>\n\n<div\n  ng-if="annotation.source"\n  ng-hide="annotation._editing._form_visible"\n  class="u-bottom_margin "\n>\n  <a\n    ng-if="annotation.source.url"\n    target="_blank"\n    ng-href="{{annotation.source.url}}"\n    class="text_label text_label--button text_label--purple"\n  >\n    <span ng-if="annotation.source.name !== \'Billboard\'">via {{annotation.source.name}}</span>\n    <span ng-if="annotation.source.name === \'Billboard\'">\n      read the full interview on\n      <svg src="billboard.svg" class="inline_icon inline_icon--reading_size inline_icon--up_3"></svg>\n    </span>\n  </a>\n  <span\n    ng-if="!annotation.source.url && annotation.source.name !== \'Billboard\'"\n    class="text_label text_label--purple"\n  >via {{annotation.source.name}}</span>\n  <span\n    ng-if="!annotation.source.url && annotation.source.name === \'Billboard\'"\n    class="text_label text_label--purple"\n  >read the full interview on\n    <svg src="billboard.svg" class="inline_icon inline_icon--reading_size inline_icon--up_3"></svg>\n  </span>\n</div>\n\n<form\n  name="form"\n  ng-if="annotation._editing._form_visible"\n  ng-submit="finish_editing()"\n  ng-model-options="{updateOn: \'submit blur\'}"\n  submit-on-cmd-enter\n  dirtyable\n>\n  <div\n    ng-if="form.$submitted && form.$invalid"\n    class="form_message form_message--error text_label"\n  >{{:: \'annotation.empty_validation\' | i18n}}</div>\n\n  <editable-markdown\n    is-required="true"\n    html="annotation._editing.html"\n    markdown="annotation._editing.markdown"\n    placeholder="{{:: (variants.isDescription ? \'annotation.description_placeholder\' : \'annotation.placeholder\') | i18n }}"\n  ></editable-markdown>\n\n  <div ng-if="can(\'edit_custom_preview\', annotation)">\n    <button\n      ng-if="!ctrl.show_annotation_custom_preview_form()"\n      type="button"\n      class="square_button"\n      ng-click="ctrl.initialize_annotation_custom_preview()"\n    >Add a custom annotation preview</button>\n\n    <div ng-if="ctrl.show_annotation_custom_preview_form()">\n      <label class="text_label">\n        Custom annotation preview\n        <textarea\n          autosize-init-on-focus\n          ng-model="annotation._editing.custom_preview"\n          class="square_input square_input--full_width"\n        ></textarea>\n      </label>\n\n      <button\n        type="button"\n        class="square_button u-top_margin"\n        ng-click="ctrl.clear_annotation_custom_preview()"\n      >Use default preview</button>\n    </div>\n  </div>\n\n  <hr>\n\n  <textarea\n    ng-if="annotation.body.markdown && !annotation.new && !annotation.verified"\n    ng-model="annotation._editing.edit_note"\n    class="square_input square_input--full_width"\n    placeholder="Briefly describe your edit"></textarea>\n\n  <label\n    ng-if="can(\'update_source\', annotation)"\n    class="square_checkbox u-half_top_margin"\n  >\n    <input\n      type="checkbox"\n      stop-propagation="click"\n      ng-model-options="{updateOn: \'default\'}"\n      ng-model="annotation._editing._has_source"\n      mousetrap-input\n    >\n    <div class="text_label">Include Source?</div>\n  </label>\n  <div ng-if="annotation._editing._has_source && can(\'update_source\', annotation)">\n    <input\n      ng-model="annotation._editing.source.name"\n      class="square_input square_input--full_width u-half_top_margin"\n      placeholder="Source"\n    />\n    <input\n      ng-model="annotation._editing.source.url"\n      class="square_input square_input--full_width u-half_top_margin"\n      placeholder="Source URL"\n    />\n  </div>\n\n  <div class="u-top_margin u-xx_large_bottom_margin">\n    <square-item-and-iq\n      event-type="{{ annotation.verified ? \'created_pinned_annotation\' : \'created_community_annotation\' }}"\n      show-pill="annotation.needs_exegesis || annotation.being_created"\n    >\n      <button\n        type="submit"\n        class="square_button square_button--green"\n        ng-class="{\'square_button--waiting\': disable_saving_with}"\n        ng-disabled="disable_saving_with"\n      >{{ disable_saving_with || \'Save\' }}</button>\n    </square-item-and-iq>\n    <button\n      ng-click="cancel_editing()"\n      class="square_button square_button--transparent square_button--gray"\n      ng-hide="disable_saving_with"\n    >Cancel</button>\n  </div>\n</form>\n\n<div\n  ng-if="annotation.body.html"\n  ng-hide="variants.hide_moderation || annotation.needs_exegesis || annotation._editing._form_visible || annotation.deleted"\n  class="u-vertical_margins"\n>\n  <kb shortcut="shift+e" action="start_editing()" ng-if="can(\'edit\')"></kb>\n  <button\n    ng-click="start_editing()"\n    ng-if="can(\'edit\') && !ctrl.content_is_truncated"\n    title="shortcut: shift+e"\n    class="square_button"\n  >Edit</button>\n\n  <button ng-click="toggle_cosign(true)"\n    ng-if="can(\'cosign\') && !saving_cosign || can(\'uncosign\') && saving_cosign && !ctrl.content_is_truncated"\n    class="square_button square_button--green"\n    ng-disabled="saving_cosign"\n  >Cosign</button>\n\n  <button\n    ng-click="toggle_cosign(false)"\n    ng-if="can(\'uncosign\') && !saving_cosign || can(\'cosign\') && saving_cosign && !ctrl.content_is_truncated"\n    class="square_button square_button--transparent square_button--gray"\n    ng-disabled="saving_cosign"\n  >Un-cosign</button>\n\n  <button\n    ng-if="!ctrl.showing_edits && ctrl.edits_to_show_count()"\n    ng-click="ctrl.showing_edits = true"\n    class="square_button"\n    ng-class="{\'square_button--red\': can(\'edit\')}"\n  >\n    {{can(\'edit\') ? \'annotation_edit.resolve_message\' : \'annotation_edit.show_message\' | i18n}} {{ctrl.edits_to_show_count()}} {{ \'annotation_edit\' | i18n:{count: ctrl.edits_to_show_count()} }}\n  </button>\n\n  <button ng-click="ctrl.showing_edits = false" ng-if="ctrl.showing_edits && ctrl.edits_to_show_count()" class="square_button" class="square_button">\n    {{\'annotation_edit.hide_message\' | i18n}}\n  </button>\n\n  <kb shortcut="shift+e" action="start_editing({proposed_edit: true})" ng-if="can(\'propose_edit_to\')"></kb>\n  <button\n    ng-click="start_editing({proposed_edit: true})"\n    ng-if="can(\'propose_edit_to\') && !ctrl.content_is_truncated"\n    title="shortcut: shift+e"\n    class="square_button"\n  >\n    {{ \'annotation.propose_edit_prompt\' | i18n }}\n  </button>\n\n\n  <square-item-and-iq\n    event-type="you_deleted_an_annotation"\n    ng-if="can(\'destroy\') && !ctrl.content_is_truncated"\n    show-pill="!ctrl.is_authored_by_current_user()"\n  >\n    <button ng-click="delete()" confirm="Are you sure?" class="square_button square_button--gray square_button--transparent">Delete</button>\n  </square-item-and-iq>\n\n  <button ng-click-disabled="toggling_pin_status" ng-click="toggle_pin_status()" ng-if="can(\'pin_to_profile\') && !ctrl.content_is_truncated" class="square_button square_button--gray square_button--transparent">\n    <placeholder-spinner ng-show="toggling_pin_status" variants=":: {inline: true}"></placeholder-spinner>\n    Pin To Profile\n  </button>\n\n  <button ng-click-disabled="toggling_pin_status" ng-click="toggle_pin_status()" ng-if="can(\'unpin_from_profile\') && !ctrl.content_is_truncated" class="square_button square_button--gray square_button--transparent">\n    <placeholder-spinner ng-show="toggling_pin_status" variants=":: {inline: true}"></placeholder-spinner>\n    Unpin From Profile\n  </button>\n\n  <button ng-click="clear_votes()" ng-if="can(\'clear_votes\') && !ctrl.content_is_truncated" ng-show="annotation.votes_total < 0" confirm="Are you sure?" class="square_button square_button--gray square_button--transparent">Clear Votes</button>\n</div>\n\n<annotation-edits\n  ng-if="ctrl.showing_edits && ctrl.edits_to_show_count()"\n  object="annotation"\n  on-resolution="ctrl.update_editorial_action_count()"\n  context-updated-at="context_updated_at"\n></annotation-edits>\n\n<div\n  ng-if="rejecting"\n  slide-down\n  slide-down-callback="focus_comment_textarea()"\n  class="comments gray_container u-top_margin"\n>\n  <comment-form\n    on-save="reject_with_comment(comment)"\n    save-text="Submit rejection"\n    saving-text="Rejecting"\n    textarea-placeholder="Explain your rejection"\n    allow-reasons="true"\n    commentable="annotation"\n    show-full-form-by-default="true"\n  ></comment-form>\n</div>\n\n<div ng-if="can(\'accept\') && !variants.hide_moderation && !annotation.deleted" slide-up-on="rejecting">\n  <square-item-and-iq event-type="you_accepted_an_annotation" ng-if="can(\'accept\')">\n    <span\n      ng-click="accept()"\n      class="square_button square_button--green"\n    >Accept</span>\n  </square-item-and-iq>\n  <square-item-and-iq event-type="you_rejected_an_annotation" ng-if="can(\'reject\')">\n    <span\n      ng-click="begin_rejection()"\n      class="square_button square_button--transparent square_button--gray"\n    >Reject</span>\n  </square-item-and-iq>\n  <a\n    href="/Genius-coaching-best-practices-annotated"\n    target="_blank"\n    class="square_button square_button--transparent square_button--x_small_text_size"\n  >Coaching guide</a>\n</div>\n\n<div ng-if="!ctrl.annotation_is_unwritten() && !variants.hide_social" class="u-vertical_margins">\n  <voting\n    vote-total-clicked="toggle_voters()"\n    type="annotation"\n    object="annotation"\n    on-unauthorized="ctrl.prompt_auth = true"\n    variants="{\'hide_upvote_text\': ctrl.content_is_truncated}"\n  ></voting>\n\n  <span\n    ng-click="start_editing()"\n    ng-if="can(\'edit\') && ctrl.content_is_truncated"\n    title="shortcut: shift+e"\n    class="annotation_label"\n  >\n    <span class="annotation_label-underline">\n      {{ variants.isDescription && !annotation.body.html ? (\'annotation.empty_description_prompt\' | i18n:{type_name: (referent.annotatable._type | modelHumanName | withIndefiniteArticle)}) : \'Edit\' }}\n    </span>\n  </span>\n\n  <div class="u-float_right">\n    <div\n      ng-if="variants.hideComments"\n      class="square_button square_button--transparent"\n      ng-class="{\'square_button--purple\': ctrl.hiding_comments, \'square_button--gray\': !ctrl.hiding_comments}"\n      ng-click="ctrl.hiding_comments = !ctrl.hiding_comments"\n    >\n      <svg class="inline_icon inline_icon--reading_size inline_icon--down_1" src="comment.svg"></svg>\n      {{ annotation.comment_count ? annotation.comment_count : \'\' }}\n    </div>\n    <pyong-button\n      ng-if="!ctrl.content_is_truncated"\n      type="annotation"\n      object="annotation"\n      variants="{\'transparent\': true, \'purple\': true}"\n      on-unauthorized="ctrl.prompt_auth = true"\n    ></pyong-button>\n    <div\n      ng-if="!ctrl.content_is_truncated"\n      class="square_button square_button--transparent square_button--gray"\n      ng-click="toggle_ellipsis_menu()"\n    >\n      <svg\n        src="share.svg"\n        class="inline_icon inline_icon--reading_size inline_icon--up_2 inline_icon--gray square_button-right_icon_margin"\n      ></svg>\n      Share\n    </div>\n    <div\n      class="square_button square_button--transparent square_button--gray"\n      tether-drop-target\n    >\n      <svg\n        src="down_arrow.svg"\n        class="inline_icon inline_icon--up_1 inline_icon--short inline_icon--gray"\n      ></svg>\n\n      <tether-drop\n        show-on="click"\n        position="bottom center"\n        yields-api="ctrl.tether_api = tetherApi"\n      >\n        <div class="tooltip tooltip--no_padding tooltip--tiny" stop-propagation="click">\n          <ng-container ng-if="ctrl.show_report_abuse">\n            <report-abuse\n              type="annotations"\n              object="annotation"\n              on-click="ctrl.tether_api.hide()"\n              button-class="annotation-report_abuse-button"\n              button-text="Report Annotation"\n            ></report-abuse>\n          </ng-container>\n          <ng-container ng-if="!ctrl.show_report_abuse">\n            <span\n              ng-if="!ctrl.reported_abuse"\n              confirm="Are you sure?"\n              ng-click="ctrl.report_as_abusive()"\n              class="tooltip-list_item"\n            >report abuse</span>\n            <span\n              ng-if="ctrl.reported_abuse"\n              class="tooltip-list_item tooltip-list_item--disabled"\n            >reported</span>\n          </ng-container>\n        </div>\n      </tether-drop>\n    </div>\n  </div>\n</div>\n\n<div class="u-vertical_margins" ng-show="showing_ellipsis_menu">\n  <annotation-share-menu\n    annotation="annotation"\n    variants="variants"\n  ></annotation-share-menu>\n</div>\n\n<voters ng-if="showing_voters" type="annotation" object="annotation"></voters>\n\n<authentication-form\n  ng-if="ctrl.prompt_auth"\n  on-cancel="ctrl.prompt_auth = false"\n  variants="{display_in_context: true}"\n></authentication-form>\n\n<div ng-if="focused_comments" class="gray_container">\n  <comment-list\n    comments="focused_comments"\n    commentable="annotation"\n    variants="{first_element_in_container: true}"\n  ></comment-list>\n</div>\n\n<comments\n  ng-if="ctrl.should_show_comments() && !focused_comments"\n  prevent-compose="annotation.needs_exegesis"\n  allow-reasons="!annotation.verified && !variants.isDescription"\n  are-suggestions="!annotation.verified"\n  type="annotations"\n  commentable="annotation"\n  context-updated-at="context_updated_at"\n  on-dirty="on_dirty()"\n  on-clean="on_clean()"\n></comments>\n\n<dfp-ad\n  ng-if="variants.showAd && !ctrl.annotation_is_being_created_by_someone_else()"\n  name="desktop_song_annotation"\n  ad-classes="[\'dfp_unit--in_read u-top_margin\']"\n  instance-id="annotation_{{annotation.id}}"\n></dfp-ad>\n\n<modal-window ng-if="ctrl.showing_all_versions" on-close="ctrl.showing_all_versions = false">\n  <annotation-history annotation="annotation" on-revert="ctrl.showing_all_versions = false"></annotation-history>\n</modal-window>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("annotation_edit.html",'<user-badge-and-timestamp size="x_small" user=":: edit.created_by" time=":: edit.created_at"></user-badge-and-timestamp>\n<div class="note_bubble u-small_top_margin" ng-if=":: edit.note" ng-bind-html=":: edit.note"></div>\n\n<rich-text-diff detect-image-diffs ng-if="edit.annotation_before && edit.annotation_after" class="rich_text_formatting" left=":: before_html" right=":: edit.annotation_after.body.html"></rich-text-diff>\n\n<div ng-hide="ctrl.working">\n  <square-item-and-iq\n    event-type="you_merged_an_annotation_edit"\n    ng-if=":: ctrl.can_moderate"\n  >\n    <span\n      class="square_button square_button--green"\n      ng-click="ctrl.merging = true"\n    >Merge</span>\n  </square-item-and-iq>\n  <square-item-and-iq\n    event-type="you_rejected_an_annotation_edit"\n    ng-if=":: ctrl.can_moderate"\n  >\n    <span\n      class="square_button square_button--gray square_button--transparent"\n      confirm="Are you sure?"\n      ng-click="ctrl.reject()"\n    >Reject</span>\n  </square-item-and-iq>\n</div>\n\n<modal-window ng-if="ctrl.merging" on-close="ctrl.merging = false">\n  <div class="proposed_edits">\n    <div class="proposed_edits-before_diff">\n      <div class="text_label text_label--purple form_section_label">Before</div>\n      <standard-rich-content html=":: before_html"></standard-rich-content>\n    </div>\n\n    <div class="proposed_edits-after_diff">\n      <div class="text_label text_label--purple form_section_label">After</div>\n      <standard-rich-content html=":: edit.annotation_after.body.html"></standard-rich-content>\n    </div>\n  </div>\n\n  <div class="u-small_vertical_margins">\n    <span class="square_button square_button--green" ng-click="ctrl.merge()" ng-disabled="working">{{ working ? \'Confirming\' : \'Confirm Merge\' }}</span>\n    <span class="square_button square_button--transparent" ng-click="ctrl.merging = false" ng-hide="working">Cancel</span>\n  </div>\n</modal-window>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("annotation_edits.html",'<div class="gray_container u-vertical_margins">\n  <annotation-placeholder ng-if="ctrl.loading_edits && (!annotation.edits || !annotation.edits.length)" no-label="true"></annotation-placeholder>\n  <annotation-edit\n    ng-if="!ctrl.loading_edits"\n    ng-repeat="edit in annotation.edits | filter:{_deleted: \'!\', _merged: \'!\'} track by edit.id"\n    object="edit"\n    before-html="annotation.body.html"\n    on-merge="ctrl.on_merge(edit)"\n    on-resolution="on_resolution()"\n    class="comment"\n    ng-class="{\'comment--no_top_margin\': $first}"\n  ></annotation-edit>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("annotation_embed.html",'<div class="annotation_embed annotation_embed--{{$ctrl.display_mode}}_border">\n  <standalone-referent variants="{largeReferent: true, disableTooltips: true, hide_moderation: $ctrl.simple, hide_social: $ctrl.simple, show_full_referent: $ctrl.simple}" object="$ctrl.referent"></standalone-referent>\n  <a\n    ng-href="{{$ctrl.referent.url}}"\n    target="_blank" class="annotation_embed-deep_link"\n    ng-if="!$ctrl.simple"\n  >\n    <svg src="wordmark.svg" class="annotation_embed-wordmark"></svg>\n  </a>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("annotation_history.html",'<div class="annotation_history">\n  <div class="text_label text_label--purple form_section_label">Edit History</div>\n\n  <div class="annotation_history-versions">\n    <placeholder-spinner ng-if="!versions"></placeholder-spinner>\n\n    <div class="annotation_history-version" ng-repeat="version in versions track by version.id">\n      <div class="text_label text_label--purple u-small_vertical_margins" ng-if="$first">Current Version:</div>\n\n      <user-badge-and-timestamp size="x_small" user="version.user" time="version.created_at"></user-badge-and-timestamp>\n\n      <standard-rich-content html="version.body.html"></standard-rich-content>\n\n      <div ng-if="!$first && ctrl.can_revert">\n        <button\n          ng-click="ctrl.revert_to(version.id)"\n          class="square_button square_button--purple"\n          ng-class="{\'square_button--disabled\': reverting_to}"\n          ng-disabled="reverting_to"\n        >\n          {{ reverting_to === version.id ? \'Reverting\' : \'Revert to this version\' }}\n        </button>\n      </div>\n    </div>\n  </div>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("annotation_placeholder.html",'<div class="placeholder" ng-class="[\'annotation_placeholder\', {\'annotation_placeholder--hide\': !showCondition}]">\n  <div class="annotation_label" ng-hide="noLabel">\n    {{:: placeholder_title || (\'annotation.community_brand_name\' | i18n) }}\n  </div>\n\n  <div class="rich_text_formatting placeholder-pulsing_content u-top_margin">\n    <placeholder-text></placeholder-text>\n  </div>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("annotation_share_menu.html",'<div class="ellipsis_menu gray_container">\n  <div class="u-bottom_margin">\n    <facebook-share-button\n      url="$ctrl.annotation.share_url"\n      variants="{ \'showText\': true }"\n    ></facebook-share-button>\n    <twitter-share-button\n      url="$ctrl.annotation.share_url"\n      variants="{ \'showText\': true }"\n      message="$ctrl.annotation.twitter_share_message"\n    ></twitter-share-button>\n  </div>\n  <div class="ellipsis_menu-row">\n    <label for="share_url_{{ $ctrl.annotation.id }}" class="text_label ellipsis_menu-label">Share URL</label>\n    <input\n      id="share_url_{{ $ctrl.annotation.id }}"\n      class="square_input ellipsis_menu-input"\n      value="{{ $ctrl.annotation.share_url }}"\n      readonly\n      select-all-on-click\n    />\n    <div\n      class="square_button"\n      copy-to-clipboard="$ctrl.annotation.share_url"\n      text-to-show-after-copy="Copied!"\n    >Copy</div>\n  </div>\n  <div class="ellipsis_menu-row">\n    <label for="embed_content_{{ $ctrl.annotation.id }}" class="text_label ellipsis_menu-label">Embed</label>\n    <input\n      id="embed_content_{{ $ctrl.annotation.id }}"\n      class="square_input ellipsis_menu-input"\n      value="{{ $ctrl.annotation.embed_content }}"\n      readonly\n      select-all-on-click\n    />\n    <div\n      class="square_button"\n      copy-to-clipboard="$ctrl.annotation.embed_content"\n      text-to-show-after-copy="Copied!"\n    >Copy</div>\n  </div>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("annotation_sidebar.html",'<div\n  class="annotation_sidebar_arrow"\n  position-beside="$ctrl.lyrics_positioning_target"\n  apply-annotation-arrow-class\n  ng-show="referent && !referent.stub"\n>\n  <svg src="left_arrow.svg"></svg>\n</div>\n\n<div\n  class="u-relative"\n  ng-class="{\'nganimate-fade_slide_from_left\': referent}"\n  position-beside="$ctrl.lyrics_positioning_target"\n  position-for-maximum-visibility=":: true"\n  click-outside="ctrl.close()"\n  suppress-click-outside-if-handled\n>\n  <div class="annotation_sidebar_unit" ng-show="referent && referent.stub">\n    <annotation-placeholder></annotation-placeholder>\n  </div>\n\n  <div\n    class="annotation_sidebar_unit"\n    ng-class="{\'annotation_sidebar_unit--center_items\': ctrl.can_create_referent_from_selection() || sidebar.signing_up}"\n    ng-if="(!ctrl.referent_creation_failed && ctrl.can_create_referent_from_selection() && !referent) || sidebar.signing_up"\n  >\n    <button ng-if="!ctrl.user_signed_in" class="square_button" ng-hide="sidebar.signing_up" ng-click="sidebar.signing_up = true" ng-bind="\'annotation.sign_up_to_annotate\' | i18n"></button>\n    <authentication-form ng-if="sidebar.signing_up" header-text="\'annotation.sign_up_to_annotate\' | i18n"></authentication-form>\n\n    <add-annotation\n      ng-if="ctrl.can_create_referent_from_selection()"\n      creating-referent="$ctrl.creating_referent"\n      can-add-pinned-annotation="can_perform(\'add_pinned_annotation_to\', song)"\n      can-add-community-annotation="can_perform(\'add_community_annotation_to\', song)"\n      song="song"\n      annotation="annotation"\n      start-new-community-referent="ctrl.start_new_referent_annotation({community: true})"\n      start-new-referent="ctrl.start_new_referent_annotation()"\n      enable-waiting-class="::true"\n    ></add-annotation>\n  </div>\n\n  <div\n    class="annotation_sidebar_unit annotation_sidebar_unit--error"\n    ng-if="ctrl.referent_creation_failed"\n  >\n    <div class="u-vertical_margins">\n      <div class="text_label text_label--red u-half_bottom_margin">Error Saving</div>\n      Something went wrong and your work may not be saved. Please copy your work and reload the page to try again.\n    </div>\n  </div>\n\n  <div\n    ng-if="!ctrl.referent_creation_failed && ctrl.can_create_annotation_type_on_referent(\'verified\')"\n    class="annotation_sidebar_unit annotation_sidebar_unit--verified"\n  >\n    <square-item-and-iq event_type="created_pinned_annotation">\n      <button class="square_button square_button--green" ng-click="ctrl.add_pinned_annotation()">\n        {{::\'annotation.new_verified_prompt\' | i18n}}\n      </button>\n    </square-item-and-iq>\n  </div>\n\n  <div\n    ng-if="referent && !ctrl.referent_creation_failed"\n    ng-repeat="annotation in referent.annotations | filter:{_deleted: \'!\'} track by annotation.id"\n    class="annotation_sidebar_unit"\n    ng-class="{\'annotation_sidebar_unit--verified\': annotation.pinned}"\n    empty-copy-content="referent.fragment_from_lyrics"\n    show-arrow-at-offset\n  >\n    <annotation\n      object="annotation"\n      referent="referent"\n      variants="{showAd: true}"\n      on-dirty="ctrl.annotation_dirty = true"\n      on-clean="ctrl.annotation_dirty = false"\n    ></annotation>\n  </div>\n\n  <div\n    ng-if="!ctrl.referent_creation_failed && ctrl.can_create_community_annotation_on_referent()"\n    class="annotation_sidebar_unit"\n  >\n    <square-item-and-iq event_type="created_community_annotation">\n      <button class="square_button square_button" ng-click="ctrl.add_community_annotation()">\n        {{::\'annotation.new_community_prompt\' | i18n}}\n      </button>\n    </square-item-and-iq>\n  </div>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("answer.html",'<div ng-show="$ctrl.show_answer() && $ctrl.answer.answer_source">\n  <div class="verified_answer">\n    <a ng-href="{{$ctrl.answer.answer_source.artist.url}}">\n      <div\n        class="verified_answer-artist_avatar user_avatar user_avatar--x_large clipped_background_image--background_fill"\n        clipped-background-image=":: $ctrl.answer.answer_source.artist.image_url"\n      ></div>\n    </a>\n\n    <div class="verified_answer-main">\n      <a\n        class="text_label verified_answer-artist"\n        ng-href="{{$ctrl.answer.answer_source.artist.url}}"\n      >\n        {{$ctrl.answer.answer_source.artist.name}}\n        <span ng-if="!$ctrl.answer.answer_source.source_name">:</span>\n      </a>\n\n      <span\n        ng-if="$ctrl.answer.answer_source.source_name"\n        class="tag_label tag_label--lowercase tag_label--gray_background"\n      >via {{ $ctrl.answer.answer_source.source_name }}</span>\n\n      <standard-rich-content\n        html="$ctrl.answer.body.html"\n        watch-images-loaded="$ctrl.answer.body.html"\n        open-links-in-new-window\n        handle-intra-page-links\n        variants="{\'no_vertical_margins\': true}"\n      ></standard-rich-content>\n\n      <div ng-if="$ctrl.answer.editorial_state == \'sourced\'" class="verified_answer-attribution">\n        <a\n          target="_blank"\n          ng-href="{{$ctrl.answer.answer_source.source_url}}"\n          class="text_label text_label--button text_label--purple"\n        >\n          <span ng-if="$ctrl.answer.answer_source.source_name !== \'Billboard\'">via {{$ctrl.answer.answer_source.source_name}}</span>\n          <span ng-if="$ctrl.answer.answer_source.source_name === \'Billboard\'">\n            read the full interview on\n            <svg src="billboard.svg" class="inline_icon inline_icon--reading_size inline_icon--up_3"></svg>\n          </span>\n        </a>\n      </div>\n    </div>\n  </div>\n</div>\n\n<div ng-show="$ctrl.show_answer() && !$ctrl.answer.answer_source">\n  <standard-rich-content\n    html="$ctrl.answer.body.html"\n    watch-images-loaded="$ctrl.answer.body.html"\n    open-links-in-new-window\n    handle-intra-page-links\n    variants="{\'no_vertical_margins\': true}"\n  ></standard-rich-content>\n</div>\n\n<div ng-if="$ctrl.show_blank_answer_message()">\n  <em>This question does not yet have an answer.</em>\n</div>\n\n<form\n  name="answer_form"\n  ng-if="$ctrl.show_answer_edit_form()"\n  ng-submit="$ctrl.finish_editing()"\n  ng-model-options="{updateOn: \'submit blur\'}"\n  submit-on-cmd-enter\n  dirtyable\n>\n  <div\n    ng-if="$ctrl.errors"\n    ng-repeat="error in $ctrl.errors"\n    class="form_message form_message--error text_label"\n  >{{ error }}</div>\n\n  <square-item-and-iq\n    ng-if="$ctrl.answer._editing._form_active || !$ctrl.variants.no_answer_prompt"\n    show-pill="!$ctrl.answer._editing._form_active && !$ctrl.answer.id"\n    iq-params="$ctrl.iq_api.answer"\n    variants="{full_width: true}"\n  >\n    <textarea\n      required\n      ng-autofocus="$ctrl.answer._editing._form_active"\n      autosize-init-on-focus\n      ng-focus="$ctrl.start_editing()"\n      ng-model="$ctrl.answer._editing.markdown"\n      class="square_input square_input--full_width square_input--single_line_height"\n      placeholder="{{ \'answer.placeholder\' | i18n }}"\n    ></textarea>\n  </square-item-and-iq>\n\n  <label\n    ng-if="$ctrl.can(\'update_answer_source\', $ctrl.question) && $ctrl.answer._editing._form_active"\n    class="square_checkbox u-half_top_margin"\n  >\n    <input\n      type="checkbox"\n      stop-propagation="click"\n      ng-checked="$ctrl.answer.answer_source || $ctrl.source_form_open"\n      ng-click="$ctrl.source_form_open = !$ctrl.source_form_open"\n      mousetrap-input\n    >\n    <div class="text_label">Add source?</div>\n  </label>\n\n  <label\n    ng-if="$ctrl.can(\'pin\', $ctrl.question) && $ctrl.answer._editing._form_active && !$ctrl.source_form_open && !$ctrl.question_is_pinned()"\n    class="square_checkbox u-half_top_margin"\n  >\n    <input\n      type="checkbox"\n      ng-model="$ctrl.answer._editing.pin_question"\n      ng-model-options="{updateOn: \'default\'}"\n      ng-init="$ctrl.answer._editing.pin_question = true"\n    >\n    <div class="text_label">Pin this answer?</div>\n  </label>\n\n  <div ng-if="$ctrl.source_form_open && $ctrl.can(\'update_answer_source\', $ctrl.question)">\n    <input\n      required\n      autocomplete-with="artist"\n      ng-model="$ctrl.answer.answer_source.artist_name"\n      class="square_input square_input--full_width u-half_top_margin"\n      placeholder="Artist name"\n    />\n    <input\n      ng-model="$ctrl.answer.answer_source.source_name"\n      class="square_input square_input--full_width u-half_top_margin"\n      placeholder="Source"\n    />\n    <input\n      ng-model="$ctrl.answer.answer_source.source_url"\n      class="square_input square_input--full_width u-half_top_margin"\n      placeholder="Source URL"\n    />\n  </div>\n\n  <div class="u-small_top_margin" ng-show="$ctrl.answer._editing._form_active">\n    <square-item-and-iq\n      show-pill="!$ctrl.answer.id"\n      iq-params="$ctrl.iq_api.answer"\n    >\n      <button\n        type="submit"\n        class="square_button"\n        ng-class="{\'square_button--waiting\': $ctrl.disable_saving_with}"\n        ng-disabled="$ctrl.disable_saving_with"\n      >{{ $ctrl.disable_saving_with || \'Save\' }}</button>\n    </square-item-and-iq>\n    <span\n      ng-click="$ctrl.cancel_editing()"\n      class="square_button square_button--transparent square_button--gray"\n      ng-hide="$ctrl.disable_saving_with"\n    >Cancel</span>\n  </div>\n</form>\n\n<div class="question-footer">\n  <voting\n    ng-if="$ctrl.show_answer()"\n    object="$ctrl.answer"\n    variants="{\'hide_upvote_text\': true}"\n    type="answer"\n    on-unauthorized="$ctrl.prompt_auth = true"\n    vote-total-clicked="$ctrl.show_voters = !$ctrl.show_voters"\n    class="u-half_right_margin"\n  ></voting>\n\n  <div\n    class="annotation_label"\n    ng-if="$ctrl.show_contributors()"\n    ng-click="$ctrl.toggle_contributors()"\n  >\n    <span class="annotation_label-underline">\n      {{ $ctrl.question.contributors_count }} {{ \'terms.contributor\' | i18n:{count:$ctrl.question.contributors_count} }}\n    </span>\n  </div>\n</div>\n\n<voters ng-if="$ctrl.show_voters" type="answer" object="$ctrl.answer"></voters>\n\n<authentication-form\n  ng-if="$ctrl.prompt_auth"\n  on-cancel="$ctrl.prompt_auth = false"\n  variants="{display_in_context: true}"\n></authentication-form>\n\n<div ng-if="$ctrl.showing_contributors">\n  <leaderboard collection="$ctrl.answer.authors"></leaderboard>\n  <div ng-if="$ctrl.question.author" class="leaderboard_footer u-half_top_margin">\n    Asked by\n    <a ng-if="$ctrl.question.author.url" ng-href="{{$ctrl.question.author.url}}">{{$ctrl.question.author.name}}</a>\n    <span ng-if="!$ctrl.question.author.url">{{$ctrl.question.author.name}}</span>\n    <time-ago time="$ctrl.question.created_at"></time-ago>\n  </div>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("apple_match_evaluations_page.html",'<div class="apple_match_evaluations_page">\n  <div class="column_layout u-xx_large_vertical_margins">\n    <div class="column_layout-column_span--half">\n      <song-preview song="$ctrl.song"></song-preview>\n    </div>\n    <div class="column_layout-column_span--half">\n      <iframe\n        allow="autoplay *; encrypted-media *;"\n        frameborder="0"\n        width="100%"\n        sandbox="allow-forms allow-popups allow-same-origin allow-scripts"\n        ng-src="{{ $ctrl.apple_embed_url }}"\n        ng-if="$ctrl.apple_embed_url"\n      ></iframe>\n      <div\n        class="metadata_unit"\n        ng-if="$ctrl.apple_albums.length > 0"\n      >\n        <span class="metadata_unit-label">Apple albums:</span>\n        <span class="metadata_unit-info">\n          <span ng-repeat="album in $ctrl.apple_albums">\n            <a ng-href="{{ album.url }}">{{ album.name }}</a>{{ !$last ? \',\' : \'\' }}\n          </span>\n        </span>\n      </div>\n      <h2 ng-if="!$ctrl.apple_embed_url">No apple song matched.</h2>\n      <div class="apple_match_evaluation--form square_form">\n        <textarea\n          class="square_input square_form-standard_element_margin"\n          ng-model="$ctrl.model.notes"\n          placeholder="Details on the match (Why is it bad? What\'s the right apple url? Is it good, but borderline?)"\n          ng-autofocus\n        ></textarea>\n        <div\n          ng-if="$ctrl.evaluation.state != \'pending\'"\n          class="u-width_100 text_label square_form-standard_element_margin"\n          ng-class="{\n            good: \'text_label--green\',\n            bad: \'text_label--red\',\n          }[$ctrl.evaluation.state] || \'text_label--purple\'"\n        >Current State: {{ $ctrl.evaluation.state }}</div>\n        <button\n          ng-click="$ctrl.submit(\'good\')"\n          class="square_button square_button--green"\n          ng-class="{\'square_button--disabled\': $ctrl.saving == \'good\'}"\n        >\n          <placeholder-spinner ng-show="$ctrl.saving == \'good\'" variants=":: {inline: true}"></placeholder-spinner>\n          Mark good\n        </button>\n        <button\n          ng-click="$ctrl.submit(\'bad\')"\n          class="square_button square_button--red"\n          ng-class="{\'square_button--disabled\': $ctrl.saving == \'bad\'}"\n        >\n          <placeholder-spinner ng-show="$ctrl.saving == \'bad\'" variants=":: {inline: true}"></placeholder-spinner>\n          Mark bad\n        </button>\n        <button\n          ng-click="$ctrl.skip()"\n          class="square_button square_button--purple"\n          ng-class="{\'square_button--disabled\': $ctrl.saving == \'skip\'}"\n        >\n          <placeholder-spinner ng-show="$ctrl.saving == \'skip\'" variants=":: {inline: true}"></placeholder-spinner>\n          Skip!\n        </button>\n      </div>\n      <expandable-container class="u-display_block u-top_margin" title="Match Instructions">\n        <ul class="u-bullet_list apple_match_instructions">\n          <li>If the audio is <em>different</em>, mark it bad. You don\'t have to listen to the actual audio, just determine whether the song is of a type that could reasonably thought off as having different audioremixes, radio edits, live versions, etc.</li>\n          <li>If the <em>Apple</em> song is on a compilation, re-release, or "greatest hits" album and the Genius one is not, mark it <em>good</em> with a note.</li>\n          <li>If there is a better <em>Genius</em> song we could have matched, mark it <em>good</em> with a note. For example, a 100 view pressburg duplicate vs 10k view actual page.</li>\n        </ul>\n      </expandable-container>\n    </div>\n  </div>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("apple_music_player.html",'<div\n  class="apple_music_player_desktop_positioning_container"\n  ng-class="{\n    \'apple_music_player_desktop_positioning_container--visible\': $ctrl.in_apple_music_deal,\n  }"\n>\n  <div class="apple_music_player_iframe_wrapper">\n    <div ng-if="!$ctrl.loaded" class="apple_music_player_iframe_wrapper-loader">\n      <placeholder-spinner></placeholder-spinner>\n    </div>\n    <iframe\n      ng-style="{width: $ctrl.dismissed ? \'185px\' : \'100vw\'}"\n      class="apple_music_player_iframe"\n      width="100%"\n      height="64px"\n      sandbox="allow-scripts allow-same-origin allow-popups allow-forms allow-popups-to-escape-sandbox"\n      allow="encrypted-media"\n      ng-src="{{$ctrl.src}}"\n      amp-iframe-resizable\n      on-amp-iframe-resize="$ctrl.on_resize({width})"\n      on-iframe-load="$ctrl.loaded = true"\n    ></iframe>\n  </div>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("article_admin_bar.html",'<div\n  ng-if="\n    $ctrl.can(\'edit_article\', $ctrl.video) ||\n    $ctrl.can(\'edit\', $ctrl.article)\n  "\n  class="article_info_and_action_box u-top_margin"\n>\n  <span\n    ng-if="$ctrl.video ? $ctrl.can(\'edit_article\', $ctrl.video) : $ctrl.can(\'edit\', $ctrl.article)"\n    class="article_info_and_action_box-action"\n    title="Edit (shift+e)"\n    ng-click="$ctrl.edit_article()"\n  >\n    <svg src="pencil.svg" class="inline_icon inline_icon--large_reading_size"></svg>\n    <kb\n      shortcut="shift+e"\n      action="$ctrl.edit_article()"\n    ></kb>\n  </span>\n  <span\n    ng-if="$ctrl.video ? $ctrl.can(\'destroy_article\', $ctrl.video) : $ctrl.can(\'destroy\', $ctrl.article)"\n    class="article_info_and_action_box-action u-clickable"\n    ng-click="$ctrl.delete()"\n    title="Delete"\n  >\n    <svg src="x.svg" class="inline_icon inline_icon--red inline_icon--large_reading_size"></svg>\n  </span>\n  <a\n    ng-if="$ctrl.can(\'create_article\', $ctrl.current_user)"\n    class="article_info_and_action_box-action"\n    href="/articles/new"\n    title="New article"\n  >\n    <svg src="new_message.svg" class="inline_icon inline_icon--large_reading_size"></svg>\n  </a>\n  <span\n    ng-if="$ctrl.can(\'manage_articles\', $ctrl.current_user)"\n    class="article_info_and_action_box-action"\n    ng-click="$ctrl.manage_articles()"\n    title="Manage articles (shift+m)"\n  >\n    <svg src="two_documents.svg" class="inline_icon inline_icon--large_reading_size"></svg>\n    <kb\n      shortcut="shift+m"\n      action="$ctrl.manage_articles()"\n    ></kb>\n  </span>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("article_authors.html",'<div class="article_credit text_label u-vertical_margins">\n  By:\n  <span ng-repeat-start="author in $ctrl.authors track by author.id">{{ $first ? "" : $last ? " &amp; " : ", "}}</span>\n  <a ng-repeat-end ng-href="{{author.url}}" class="text_label--button">{{ author.name }}</a>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("article_content_actions.html",'<div class="article_info_and_action_box">\n  <div class="article_info_and_action_box-action article_info_and_action_box-action--no_padding article_info_and_action_box-action--fill_box">\n    <facebook-share-button\n      url="$ctrl.object.url"\n      variants="{\'transparent\': true}"\n    ></facebook-share-button>\n  </div>\n\n  <div class="article_info_and_action_box-action article_info_and_action_box-action--no_padding article_info_and_action_box-action--fill_box">\n    <twitter-share-button\n      url="$ctrl.object.url"\n      message="$ctrl.object.twitter_share_message"\n      variants="{\'transparent\': true}"\n    ></twitter-share-button>\n  </div>\n\n  <div class="article_info_and_action_box-action article_info_and_action_box-action--no_padding article_info_and_action_box-action--fill_box">\n    <pyong-button\n      type="{{$ctrl.type}}"\n      object="$ctrl.object"\n      on-unauthorized="$ctrl.prompt_auth = true"\n      variants="{\'transparent\': true}"\n    ></pyong-button>\n  </div>\n\n  <div\n    ng-if="!$ctrl.variants.two_rows"\n    class="article_info_and_action_box-action article_info_and_action_box-action--no_padding article_info_and_action_box-action--double_width"\n  >\n    <voting\n      type="{{$ctrl.type}}"\n      object="$ctrl.object"\n      on-unauthorized="$ctrl.prompt_auth = true"\n    ></voting>\n  </div>\n</div>\n\n<div\n  ng-if="$ctrl.variants.two_rows"\n  class="u-vertical_margins u-text_center"\n>\n  <voting\n    vote-total-clicked="$ctrl.toggle_voters()"\n    type="{{$ctrl.type}}"\n    object="$ctrl.object"\n    on-unauthorized="$ctrl.prompt_auth = true"\n  ></voting>\n\n  <voters ng-if="$ctrl.showing_voters" type="{{$ctrl.type}}" object="$ctrl.object"></voters>\n</div>\n\n<modal-window\n  ng-if="$ctrl.prompt_auth"\n  on-close="$ctrl.prompt_auth = false"\n  variants="{narrow_width: true}"\n>\n  <authentication-form></authentication-form>\n</modal-window>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("article_contributor_badge.html",'<a ng-href="{{:: $ctrl.contributor.url }}" class="user_badge">\n  <div\n    class="user_avatar user_avatar--large u-quarter_right_margin"\n    clipped-background-image="$ctrl.contributor.avatar.small.url"\n  ></div>\n  <div class="user_badge-text">\n    <div class="user_badge-text-emphasis">by {{:: $ctrl.contributor.name }}</div>\n    <div>@{{:: $ctrl.contributor.login }}</div>\n  </div>\n</a>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("article_index_arrangeable.html",'<div class="articles_list_arrangeable-container">\n  <div\n    ng-if="$ctrl.error"\n    class="form_message form_message--error text_label"\n  >{{ $ctrl.error }}</div>\n  <div class="articles_list-header">\n    <div>Homepage Arrangement</div>\n    <div class="articles_list-controls">\n      <button\n        ng-if="$ctrl.arrange_mode_locked()"\n        class="square_button articles_list-button"\n        ng-click="$ctrl.enable_rearranging()"\n      >Enable Arranging</button>\n      <button\n        ng-if="!$ctrl.arrange_mode_locked()"\n        class="square_button square_button--green articles_list-button"\n        ng-class="{\'square_button--waiting\': $ctrl.arrange_mode_saving()}"\n        ng-click="$ctrl.save_arrangement()"\n        ng-disabled="$ctrl.arrange_mode_saving()"\n      >{{ $ctrl.arrange_mode_saving() ? "Saving..." : "Save Arrangement" }}</button>\n      <button\n        ng-if="$ctrl.arrange_mode_active()"\n        class="square_button articles_list-button"\n        ng-click="$ctrl.cancel_rearrange()"\n        ng-disabled="$ctrl.arrange_mode_saving()"\n      >Cancel Rearranging</button>\n    </div>\n  </div>\n  <div ng-repeat="slot_section in $ctrl.slot_sections track by slot_section.name">\n    <div class="articles_list-section_title">\n      {{ slot_section.name }}\n    </div>\n    <div\n      ng-if="slot_section.error"\n      class="form_message form_message--error text_label"\n    >{{ slot_section.error }}</div>\n    <div ng-repeat="slot in slot_section.slots track by slot">\n      <div\n        class="articles_list-visibility_label"\n        ng-if="slot === \'home_top_hero\'"\n      >Desktop & Mobile:</div>\n      <div\n        class="articles_list-visibility_label"\n        ng-if="slot === \'home_desktop_second\'"\n      >Desktop Only:</div>\n      <div\n        class="editable_article-row-entry-container"\n        ng-if="$ctrl.article_for_slot(slot)"\n        drag-and-drop\n        on-drop="$ctrl.place_article_into_slot(data.id, slot)"\n      >\n        <div\n          ng-if="$ctrl.arrange_mode_active()"\n          class="editable_article-row-entry"\n          drag-and-drop="$ctrl.article_for_slot(slot)"\n          draggable="{{ $ctrl.arrange_mode_active() }}"\n        >\n          <article-index-item\n            article="$ctrl.article_for_slot(slot)"\n            unfeature="$ctrl.clear_slot(slot)"\n            disable-go-to-article="true"\n          ></article-index-item>\n        </div>\n        <article-index-item\n          article="$ctrl.article_for_slot(slot)"\n          ng-if="!$ctrl.arrange_mode_active()"\n        ></article-index-item>\n      </div>\n      <div\n        ng-if="!$ctrl.article_for_slot(slot)"\n        class="articles_list-empty_slot-container"\n        ng-class="{\'articles_list-home-promo-unit\': slot === \'home_promo_unit\'}"\n        drag-and-drop\n        cant-drop="slot === \'home_promo_unit\'"\n        on-drop="$ctrl.place_article_into_slot(data.id, slot)"\n      >\n        <span>{{ $ctrl.slot_holder_text($index + 1, slot) }}</span>\n      </div>\n    </div>\n  </div>\n\n  <div class="articles_list-section_title">\n    Recently Published\n  </div>\n\n  <div\n    ng-repeat="article in $ctrl.unfeatured_articles() track by article.id"\n  >\n    <div\n      ng-if="$ctrl.arrange_mode_active()"\n      class="editable_article-row-entry"\n      drag-and-drop="article"\n      draggable="true"\n    >\n      <article-index-item\n        article="article"\n        feature="$ctrl.place_article_into_slot(article.id, \'home_top_hero\')"\n        feature-video="$ctrl.place_article_into_slot(article.id, \'home_video_hero\')"\n        disable-go-to-article="true"\n      ></article-index-item>\n    </div>\n    <article-index-item\n      article="article"\n      ng-if="!$ctrl.arrange_mode_active()"\n    ></article-index-item>\n  </div>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("article_index_item.html",'<div\n  class="articles_list-item"\n  ng-class="{\'articles_list-item--unpublished\': $ctrl.article.draft}"\n>\n  <div ng-click="$ctrl.goToArticle()" class="articles_list-item-link">\n    <div class="articles_list-item-information">\n      <div ng-if="$ctrl.can(\'edit\')" class="text_label text_label--x_small_text_size">\n        <div ng-if="$ctrl.article.published">Published</div>\n        <div ng-if="$ctrl.article.scheduled">Scheduled</div>\n        <div ng-if="$ctrl.article.draft">Draft</div>\n      </div>\n\n      <div class="text_label text_label--x_small_text_size">\n        {{ $ctrl.article.article_type }}\n      </div>\n\n      <div ng-if="$ctrl.article.published_at" class="text_label text_label--x_small_text_size">\n        <span class="u-no_break">{{$ctrl.article.published_at | human_readable_datetime}}</span> \n        <span class="u-no_break">\n          <time-ago time="$ctrl.article.published_at"></time-ago>\n        </span>\n      </div>\n\n      <div class="articles_list-item-article_info">\n        <div class="articles_list-item-article_info-title">{{$ctrl.article.title}}</div>\n        <div ng-if="$ctrl.article.dek" class="articles_list-item-article_info-dek">{{$ctrl.article.dek}}</div>\n      </div>\n\n      <div class="text_label text_label--x_small_text_size">\n        {{$ctrl.article.author_list_for_display}}\n      </div>\n\n      <div\n        ng-if="$ctrl.article.hero_caption"\n        class="text_label text_label--x_small_text_size"\n        ng-bind-html="$ctrl.article.hero_caption.html"\n      ></div>\n    </div>\n    <div class="articles_list-item-actions">\n      <a\n        ng-if="$ctrl.can(\'edit\')"\n        ng-href="/articles/{{$ctrl.article.id}}/edit"\n        class="square_button square_button--small_text_size"\n      >Edit</a>\n      <a\n        ng-if="$ctrl.displayFeatureButton()"\n        ng-click="$ctrl.feature()"\n        class="square_button square_button--small_text_size"\n        prevent-default-click\n      >Feature</a>\n      <a\n        ng-if="$ctrl.displayFeatureVideoButton()"\n        ng-click="$ctrl.featureVideo()"\n        class="square_button square_button--small_text_size"\n        prevent-default-click\n      >Feature Video</a>\n      <a\n        ng-if="$ctrl.displayUnfeatureButton()"\n        ng-click="$ctrl.unfeature()"\n        prevent-default-click\n        class="square_button square_button--small_text_size"\n      >Un-Feature</a>\n    </div>\n  </div>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("article_page.html",'<div class="white_container white_container--no_padding">\n  <div class="grid_layout">\n    <div class="grid_layout--full u-xxx_large_bottom_margin">\n      <dfp-ad\n        class="u-display_block"\n        name="desktop_article_leaderboard"\n        ad-classes="[\'u-xx_large_top_margin\', \'dfp_unit--centered_billboard\']"\n      ></dfp-ad>\n\n      <div ng-if="$ctrl.article_params" class="u-flex_directive u-xx_large_vertical_margins">\n        <form action="{{$ctrl.article_update_url}}" method="post" class="u-width_100">\n          <input type="hidden" name="_method" value="put">\n          <input type="hidden" name="authenticity_token" value="{{$ctrl.authenticity_token}}">\n          <hidden-fields key="article" value="$ctrl.article_params"></hidden-fields>\n          <input type="submit" class="square_button square_button--purple u-width_100" value="Save Changes">\n        </form>\n\n        <form action="{{$ctrl.article_edit_url}}" method="post" class="u-width_100">\n          <input type="hidden" name="authenticity_token" value="{{$ctrl.authenticity_token}}">\n          <hidden-fields key="article" value="$ctrl.article_params"></hidden-fields>\n          <input type="submit" class="square_button u-width_100 u-left_margin" value="Continue Editing">\n        </form>\n      </div>\n\n      <h1 class="article_title article_title--outlined u-xx_large_top_margin">{{$ctrl.page_data.article.title}}</h1>\n\n      <div class="u-text_center u-small_top_margin u-x_large_bottom_margin">\n        <div class="article_info_bar">\n          <div class="article_type">{{$ctrl.page_data.article.article_type}}</div>\n\n          <div class="article_info_bar-text u-half_left_margin">\n            <div ng-if="$ctrl.page_data.article.published">\n              {{$ctrl.page_data.article.published_at * 1000 | date:\'mediumDate\'}}\n            </div>\n            <div ng-if="!$ctrl.page_data.article.published && $ctrl.page_data.article.published_at">\n              Scheduled for {{$ctrl.page_data.article.published_at | human_readable_datetime}}\n            </div>\n            <div ng-if="!$ctrl.page_data.article.published && !$ctrl.page_data.article.published_at">\n              Draft\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div ng-if="$ctrl.page_data.article.sponsored" class="u-top_margin u-x_large_bottom_margin">\n        <div ng-if="!$ctrl.page_data.article.sponsor_link" class="article_sponsor">\n          <span ng-if="!$ctrl.page_data.article.generic_sponsorship" class="text_label text_label--gray">{{$ctrl.page_data.article.sponsor_phrase || (\'article.sponsor.phrase\' | i18n)}}</span>\n          <div\n            class="article_sponsor-logo"\n\t    ng-class="{\'article_sponsor-logo--larger\': $ctrl.page_data.article.sponsor_image_style === \'larger\'}"\n            clipped-background-image="$ctrl.page_data.article.sponsor_image"\n            clipped-background-image-fit-height\n          ></div>\n        </div>\n\n        <a\n          ng-if="$ctrl.page_data.article.sponsor_link"\n          ng-href="{{$ctrl.page_data.article.sponsor_link}}"\n          target="_blank"\n          class="article_sponsor"\n        >\n          <span class="text_label text_label--gray">{{$ctrl.page_data.article.sponsor_phrase || (\'article.sponsor.phrase\' | i18n)}}</span>\n          <div\n            class="article_sponsor-logo"\n\t    ng-class="{\'article_sponsor-logo--larger\': $ctrl.page_data.article.sponsor_image_style === \'larger\'}"\n            clipped-background-image="$ctrl.page_data.article.sponsor_image"\n            clipped-background-image-fit-height\n          ></div>\n        </a>\n      </div>\n\n      <div class="article_hero" ng-class="{\'article_hero--full_width\': $ctrl.page_data.article.hero_style === \'full\'}">\n        <video\n          brightcove\n          ng-if="$ctrl.video.provider === \'brightcove\'"\n          object="$ctrl.video"\n          player-name="standard"\n          class="article_hero-asset video-js"\n          ng-attr-poster="{{$ctrl.page_data.article.preview_image}}"\n          autoplays-on-page-load="true"\n        ></video>\n\n        <div ng-if="$ctrl.video.provider !== \'brightcove\'">\n          <div\n            ng-if="!$ctrl.player_state.is_loaded"\n            clipped-background-image="$ctrl.page_data.article.preview_image"\n            clipped-background-image-fit-height\n            class="article_hero-asset article_hero-asset--background_image"\n          ></div>\n\n          <embedly-player\n            controls="true"\n            ng-if="$ctrl.video"\n            ng-show="$ctrl.player_state.is_loaded"\n            media="$ctrl.video"\n            player-class="article_hero-embedly_player_container"\n            yields-api="$ctrl.player_api = api"\n            yields-state="$ctrl.player_state = state"\n            allow-full-screen="true"\n            preload="true"\n          ></embedly-player>\n        </div>\n      </div>\n\n      <div\n        ng-if="$ctrl.page_data.article.hero_caption"\n        class="u-text_center text_label text_label--light text_label--x_small_text_size text_label--gray text_label--underline_links u-top_margin"\n        ng-bind-html="$ctrl.page_data.article.hero_caption.html"\n      ></div>\n    </div>\n\n    <div class="grid_layout--sidebar">\n      <div class="article_info_and_action_box article_info_and_action_box--full_padding u-bottom_margin">\n        <div>\n          <div\n            ng-repeat="author in $ctrl.page_data.article.authors track by author.id"\n            ng-class="{\'u-bottom_margin\': !$last}"\n          >\n            <article-contributor-badge object="author"></article-contributor-badge>\n          </div>\n        </div>\n      </div>\n\n      <article-admin-bar article="$ctrl.page_data.article"></article-admin-bar>\n\n      <div class="u-top_margin">\n        <article-content-actions\n          type="article"\n          object="$ctrl.page_data.article"\n          variants="{\'two_rows\': true}"\n        ></article-content-actions>\n      </div>\n\n\n      <div\n        ng-repeat="(section, options) in {artists: {title: \'Artists\', link_title: \'name\'}, albums: {title: \'Albums\', link_title: \'name\'}, songs: {title: \'Songs\', link_title: \'title\'}} track by section"\n        ng-if="$ctrl.page_data.article[\'referenced_\' + section].length > 0" class="u-xx_large_vertical_margins"\n      >\n        <div class="text_label text_label--light text_label--x_small_text_size text_label--gray u-bottom_margin">Referenced {{options.title}}</div>\n\n        <div ng-repeat="reference in $ctrl.page_data.article[\'referenced_\' + section] track by reference.id" class="u-half_bottom_margin">\n          <a ng-href="{{reference.url}}" class="article_reference_link" target="_blank">\n            {{reference[options.link_title]}}\n          </a>\n        </div>\n      </div>\n\n      <div ng-if="!$ctrl.page_data.article.published && $ctrl.page_data.article.preview_url" class="u-xx_large_vertical_margins">\n        <div class="text_label text_label--light text_label--x_small_text_size text_label--gray u-half_bottom_margin">External Preview URL</div>\n        <a ng-href="{{$ctrl.page_data.article.preview_url}}" class="article_reference_link article_reference_link--no_text_transform" target="_blank">{{$ctrl.page_data.article.preview_url}}</a>\n      </div>\n\n      <dfp-ad\n        class="u-display_block"\n        name="desktop_article_sidebar"\n        ad-classes="[\'u-vertical_margins\']"\n      ></dfp-ad>\n    </div>\n\n    <div class="grid_layout--main u-xxx_large_bottom_margin">\n      <div>\n        <h2 class="article_dek">\n          <hang-initial-quote content="$ctrl.page_data.article.dek"></hang-initial-quote>\n        </h2>\n\n        <standard-rich-content\n          html="$ctrl.page_data.article.body.html"\n          variants="{article: true}"\n          open-links-in-new-window\n        ></standard-rich-content>\n      </div>\n\n      <div tracking="scroll_into_view" tracking-event="Article Page View Footer"></div>\n\n      <div class="u-xxx_large_top_margin">\n        <div class="u-large_bottom_margin">\n          <span class="text_label text_label--x_small_text_size text_label--gray">Share</span>\n        </div>\n\n        <div class="u-top_margin">\n          <article-content-actions type="article" object="$ctrl.page_data.article"></article-content-actions>\n        </div>\n\n        <div class="u-xxx_large_top_margin u-large_bottom_margin">\n          <span class="text_label text_label--x_small_text_size text_label--gray">Comments</span>\n        </div>\n\n        <comments\n          variants="{no_background: true}"\n          type="articles"\n          commentable="$ctrl.page_data.article"\n        ></comments>\n      </div>\n    </div>\n  </div>\n</div>\n\n<div ng-if="$ctrl.page_data.article.suggested_articles.length" class="grid_layout grid_layout--gray_background">\n  <div class="grid_layout--full u-xxx_large_vertical_margins">\n    <div class="article_title u-text_uppercase u-xx_large_bottom_margin">Next Up</div>\n    <div class="article_next_up">\n      <a\n        ng-repeat="suggested_article in $ctrl.page_data.article.suggested_articles track by suggested_article.id"\n        ng-href="{{suggested_article.url}}"\n        class="article_next_up-article"\n        ng-class="{\'u-xx_large_left_margin\': !$first}"\n      >\n        <div\n          clipped-background-image="suggested_article.preview_image"\n          ng-attr-clipped-background-image-fit-height="{{$ctrl.page_data.article.suggested_articles.length === 1 ? \'true\' : undefined}}"\n          class="article_next_up-article-image"\n        ></div>\n        <div class="u-text_center u-vertical_margins">\n          <div class="article_type">{{suggested_article.article_type}}</div>\n        </div>\n        <div\n          class="article_next_up-article-title"\n          ng-class="{\'article_next_up-article-title--large\': $ctrl.page_data.article.suggested_articles.length === 1 }"\n        >{{suggested_article.title}}</div>\n      </a>\n    </div>\n  </div>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("artist_badge.html",'<a ng-href="{{:: $ctrl.artist.url}}" class="user_badge">\n  <div class="user_avatar user_avatar--x_small" clipped-background-image=":: $ctrl.artist.image_url"></div>\n  <div class="user_badge-text">\n    <span class="user_badge-login">{{:: $ctrl.artist.name }}</span>\n    <svg ng-if=":: $ctrl.artist.is_verified" class="checky" src="checky.svg"></svg>\n    <span class="user_badge-iq tag_label tag_label--yellow_background" ng-if=":: $ctrl.artist.iq">{{:: $ctrl.artist.iq | number:0 }}</span>\n  </div>\n</a>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("artist_opportunities.html",'<scrollable-data\n  src="$ctrl.scrollable_data"\n  repeat-with="opp"\n  scroll-mechanism="infinite_scroll"\n>\n  <contribution-opportunity\n    contribution-opportunity="opp"\n    source="artist_opportunities"\n  ></contribution-opportunity>\n</scrollable-data>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("artist_songs.html",'<div class="square_input_and_icon">\n  <svg src="magnifying_glass.svg" class="square_input_and_icon-icon"></svg>\n  <input\n    ng-change="$ctrl.search()"\n    ng-model="$ctrl.search_text"\n    type="text"\n    class="square_input"\n    placeholder="Search {{ $ctrl.artist.name }} Songs"\n    ng-autofocus="true"\n  >\n</div>\n\n<div class="profile_list_item profile_list_item--large_padding">\n  <span class="text_label text_label--x_small_text_size text_label--gray">\n    <span ng-if="$ctrl.search_text.length">\n      <span ng-if="$ctrl.searching">Searching...</span>\n      <span ng-if="!$ctrl.searching">\n        {{ \'profile_page.songs.search\' | i18n:{count: $ctrl.artist_song_infinite_scrollable_data.total_entries} }}\n      </span>\n    </span>\n    <span ng-if="!$ctrl.search_text.length">{{:: \'profile_page.songs.all\' | i18n }}</span>\n  </span>\n  <span ng-if="!$ctrl.search_text.length" class="u-float_right u-clickable">\n    <span class="text_label text_label--pink text_label--x_small_text_size" ng-click="$ctrl.sort_dropdown_opened = !$ctrl.sort_dropdown_opened" click-outside="$ctrl.sort_dropdown_opened = false">\n      {{\'sort.\' + $ctrl.sort_method | i18n}}\n      <svg class="inline_icon inline_icon--short inline_icon--up_1 inline_icon--pink" src="down_arrow.svg"></svg>\n    </span>\n    <div\n      class="tooltip tooltip--tiny tooltip--no_padding tooltip--dock_top_right"\n      ng-show="$ctrl.sort_dropdown_opened"\n      ng-click="$ctrl.sort_dropdown_opened = false"\n    >\n      <div class="tooltip-list_item" ng-click="$ctrl.sort_songs_by(\'popularity\');" ng-show="$ctrl.sort_method !== \'popularity\'">\n        {{:: \'sort.popularity\' | i18n }}\n      </div>\n      <div class="tooltip-list_item" ng-click="$ctrl.sort_songs_by(\'title\');" ng-show="$ctrl.sort_method !== \'title\'">\n        {{:: \'sort.title\' | i18n }}\n      </div>\n      <div class="tooltip-list_item" ng-click="$ctrl.sort_songs_by(\'release_date\');" ng-show="$ctrl.sort_method !== \'release_date\'">\n        {{:: \'sort.release_date\' | i18n }}\n      </div>\n      <div class="tooltip-list_item" ng-click="$ctrl.sort_songs_by(\'unreviewed_annotations\');" ng-show="$ctrl.can(\'sort_artist_songs\', $ctrl.artist) && $ctrl.sort_method !== \'unreviewed_annotations\'">\n        {{:: \'sort.unreviewed_annotations\' | i18n }}\n      </div>\n    </div>\n  </span>\n</div>\n<scrollable-data src="$ctrl.artist_song_infinite_scrollable_data" scroll-mechanism="infinite_scroll" repeat-with="song">\n  <div class="profile_list_item" ng-class="{\'profile_list_item--last\': $last}">\n    <mini-song-card object="song" variants="{small: true, show_unreviewed_count: $ctrl.sort_method == \'unreviewed_annotations\'}"></mini-song-card>\n  </div>\n</scrollable-data>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("artist_songs_and_albums.html",'<div ng-if="$ctrl.artist_songs.length > 0" class="text_label text_label--gray u-xx_large_top_margin u-half_bottom_margin">Popular {{$ctrl.artist.name}} songs</div>\n\n<div class="mini_card_grid">\n  <div class="mini_card_grid-song" ng-if="$ctrl.artist_songs.length > 0" ng-repeat="song in $ctrl.artist_songs">\n    <mini-song-card object="song" artist="$ctrl.artist"></mini-song-card>\n  </div>\n</div>\n\n<div\n  ng-if="$ctrl.artist_has_more_songs && $ctrl.artist_songs.length > 0"\n  class="full_width_button u-clickable"\n  ng-class="{\'u-bottom_margin\' :$ctrl.artist_songs.length >= 10}"\n  ng-click="$ctrl.open_all_songs_pane()"\n>\n  Show all songs by {{ $ctrl.artist.name }} <svg class="inline_icon inline_icon--reading_size inline_icon--up_1" src="right_arrow.svg"></svg>\n</div>\n\n<div ng-if="$ctrl.artist_songs && $ctrl.artist_songs.length == 0">\n  <div class="text_label text_label--gray u-xx_large_vertical_margins">\n    There are no songs by this artist on Genius\n  </div>\n</div>\n\n<div ng-if="$ctrl.artist_albums.length" class="text_label text_label--gray u-xx_large_top_margin u-half_bottom_margin">Popular {{$ctrl.artist.name}} albums</div>\n\n<album-grid\n  albums="$ctrl.artist_albums"\n  artist="$ctrl.artist"\n  count="6"\n></album-grid>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("artist_songs_modal.html",'<modal-window\n  ng-if="$ctrl.modal_open"\n  on-close="$ctrl.modal_open = undefined; $ctrl.artist_song_infinite_scrollable_data.reset()"\n  variants="{narrow_width: true, white_background: true}"\n>\n  <artist-songs artist="$ctrl.artist"></artist-songs>\n</modal-window>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("artist_tooltip.html",'<div class="tooltip user_info_with_actions u-half_vertical_margins u-half_horizontal_margins" stop-propagation="click">\n  <div class="user_badge">\n    <div class="user_avatar user_avatar--xx_large" clipped-background-image="$ctrl.artist.image_url"></div>\n    <div class="user_badge-text">\n      <div class="user_badge-login_and_iq user_badge-login_and_iq--large">\n        <a href="{{ $ctrl.artist.url }}" class="user_badge-login">{{ $ctrl.artist.name }}</a>\n        <span class="user_badge-iq tag_label tag_label--yellow_background" ng-if=":: $ctrl.artist.iq">{{ $ctrl.artist.iq | number:0 }}</span>\n      </div>\n      <div class="user_info_with_actions-user_badge_actions" ng-if=":: $ctrl.artist.user">\n        <a ng-href="{{$ctrl.artist.user.url}}" target="_blank" class="square_button square_button--green">See verified profile</a>\n      </div>\n    </div>\n  </div>\n  <div class="u-top_margin placeholder" ng-if="!$ctrl.artist.description">\n    <div class="placeholder-pulsing_content">\n      <placeholder-text></placeholder-text>\n    </div>\n  </div>\n  <div class="rich_text_formatting u-top_margin" ng-if="$ctrl.artist.description_preview">{{ $ctrl.artist.description_preview | truncateToBoundary:150:{with_ellipsis: true} }}</p>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("artist_verification.html",'<form\n  name="form"\n  ng-submit="form.$valid && $ctrl.verify()"\n  dirtyable\n  exports-form-api="$ctrl.form = api"\n>\n  <div\n    ng-if="$ctrl.errors"\n    ng-repeat="error in $ctrl.errors"\n    class="form_message form_message--error text_label"\n  >{{ error }}</div>\n\n  <div ng-if="!$ctrl.artist" class="square_form-input_and_label u-vertical_margins">\n    <div class="text_label">Verify this user as</div>\n    <input\n      required\n      autocomplete-with="artist"\n      ng-model="$ctrl.name"\n      class="square_input square_form-standard_element_margin"\n      placeholder="Artist name"\n    />\n  </div>\n  <div ng-if="$ctrl.artist" class="u-vertical_margins">\n    Verified as <a ng-href="{{$ctrl.artist.url}}">{{$ctrl.artist.name}}</a>\n  </div>\n\n  <div class="square_form-input_and_label u-vertical_margins">\n    <div class="text_label">Verification Level</div>\n    <div ng-repeat="role in $ctrl.user_verification_roles" class="u-x_small_vertical_margins">\n      <label>\n        <input\n          required\n          name="role"\n          ng-model="$ctrl.role"\n          value="{{role}}"\n          type="radio"\n        />\n        {{role | roleHumanName}}\n      </label>\n    </div>\n  </div>\n\n  <button\n    class="square_button square_button--green u-small_bottom_margin"\n    ng-class="{\'square_button--waiting\': $ctrl.updating()}"\n    ng-disabled="$ctrl.updating()"\n    type="submit"\n  >{{ $ctrl.verifying ? \'Verifying\' : \'Verify\' }}</button>\n  <button\n    ng-if="$ctrl.artist"\n    ng-click="$ctrl.unverify()"\n    class="square_button square_button--red u-small_bottom_margin"\n    ng-class="{\'square_button--waiting\': $ctrl.updating()}"\n    ng-disabled="$ctrl.updating()"\n  >{{ $ctrl.unverifying ? \'Unverifying\' : \'Unverify\' }}</button>\n</form>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("audio_source_label.html",'<p>\n<small>{{ $ctrl.external_song.title }} <strong>on</strong> {{$ctrl.external_song.album}} <strong>by</strong> <span ng-repeat="artist in $ctrl.external_song.artists">{{ artist }}{{$last ? \'\' : \', \'}}</span> <strong>from</strong> <a ng-href="{{$ctrl.external_song.provider_url}}" target="_blank">{{ $ctrl.external_song.provider | capitalize }}</a></small>\n</p>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("authentication_form.html",'<div class="authentication_form" ng-class="{\'authentication_form--display_in_context\': variants.display_in_context}">\n  <a ng-click="on_cancel()" href="#" prevent-default-click class="u-float_right" ng-if="variants.display_in_context">\n    <svg class="inline_icon inline_icon--purple inline_icon--up_2" src="x.svg"></svg>\n  </a>\n\n  <form ng-submit="ctrl.submit()" ng-model-options="{updateOn: \'submit\'}" submit-on-cmd-enter>\n    <div class="text_label text_label--purple form_section_label">\n      <span ng-if="!header_text">Sign {{ ctrl.signing_in ? \'in to\' : \'up for\' }} Genius</span>\n      <span ng-if="header_text">{{ header_text }}</span>\n    </div>\n\n    <div ng-if="preamble_text" class="u-half_vertical_margins">\n      <p>{{ preamble_text }}</p>\n    </div>\n\n    <div ng-if="include_social !== false">\n      <div class="u-half_vertical_margins">\n        <a href="/auth/facebook" http-method="post" set-desired-location prevent-default-click class="square_button square_button--facebook">\n          <span class="square_button-padded_icon">\n            <svg class="inline_icon" src="facebook.svg"></svg>\n          </span>\n          Sign in with Facebook\n        </a>\n      </div>\n\n      <div class="u-half_vertical_margins">\n        <a href="/auth/twitter" http-method="post" set-desired-location prevent-default-click class="square_button square_button--twitter">\n          <span class="square_button-padded_icon">\n            <svg class="inline_icon" src="twitter.svg"></svg>\n          </span>\n          Sign in with Twitter\n        </a>\n      </div>\n\n      <div class="u-half_vertical_margins">\n        <a href="/auth/google" http-method="post" set-desired-location prevent-default-click class="square_button square_button--google">\n          <span class="square_button-padded_icon">\n            <svg class="inline_icon" src="google.svg"></svg>\n          </span>\n          Sign in with Google\n        </a>\n      </div>\n    </div>\n\n    <div class="u-half_vertical_margins" ng-show="!ctrl.show_email_fields && !ctrl.signing_in">\n      <a href="#" ng-click="ctrl.show_email_fields = true" prevent-default-click class="square_button square_button--email">\n        <span class="square_button-padded_icon">\n          <svg class="inline_icon" src="envelope.svg"></svg>\n        </span>\n        Sign up with email\n      </a>\n    </div>\n\n    <div ng-show="ctrl.show_email_fields || ctrl.signing_in">\n      <div class="hr" ng-if="include_social !== false"></div>\n      <div class="text_label">\n        <ul ng-if="ctrl.errors" class="form_message form_message--error">\n          <li ng-repeat="error in ctrl.errors">\n            {{error}}\n          </li>\n        </ul>\n      </div>\n\n      <input\n        name="login"\n        type="text"\n        ng-autofocus="ctrl.signing_in"\n        required\n        placeholder="Username"\n        ng-model="user_session.login"\n        class="square_input square_form-standard_element_margin"\n      >\n      <input\n        name="email"\n        type="email"\n        required\n        placeholder="Email"\n        ng-if="!ctrl.signing_in"\n        ng-model="user_session.email"\n        class="square_input square_form-standard_element_margin"\n      >\n      <input\n        name="password"\n        type="password"\n        required\n        placeholder="Password"\n        ng-model="user_session.password"\n        class="square_input square_form-standard_element_margin"\n      >\n\n      <div class="rich_text_formatting" ng-if=\'!ctrl.signing_in\'>\n        <small class="square_form-standard_element_margin">\n          By clicking &ldquo;Sign Up&rdquo;, you are indicating that you have\n          read and agree to the <a href=\'/static/terms\' target="_blank">Terms of Service</a>.\n        </small>\n      </div>\n\n      <button\n        ng-disabled="user_session_form.$invalid || ctrl.saving"\n        class="square_button"\n        ng-class="{\'square_button--disabled\': user_session_form.$invalid, \'square_button--waiting\': ctrl.saving}"\n        type="submit"\n      >{{ ctrl.signing_in ? \'Sign In\' : \'Sign Up\'}}</button>\n    </div>\n\n    <div class="u-top_margin">\n      <a\n        href="/signup"\n        ng-if="ctrl.signing_in"\n        prevent-default-click\n        ng-click="ctrl.toggle_signup_signin()"\n        class="text_label text_label--button text_label--gray"\n      >Create an account</a>\n\n      <a\n        href="/password_resets/new"\n        ng-if="ctrl.signing_in"\n        class="text_label text_label--button text_label--gray"\n      >I forgot my password</a>\n\n      <a\n        href="/login"\n        ng-if="!ctrl.signing_in"\n        prevent-default-click\n        ng-click="ctrl.toggle_signup_signin()"\n        class="text_label text_label--button text_label--gray"\n      >Already have an account? Sign in here</a>\n    </div>\n  </form>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("autocomplete_result.html",'<strong ng-if="::data._new">Create new:</strong> {{:: $getDisplayText()}}\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("autocomplete_tags_input.html",'<tags-input\n  ng-disabled="disabled"\n  min-length="1"\n  template="autocomplete_word.html"\n  key-property="{{ display_property }}"\n  display-property="{{ display_property }}"\n  replace-spaces-with-dashes="false"\n  ng-model="bindTo"\n  placeholder="{{ placeholder() }}"\n  class="{{ inputClasses }}"\n  add-from-autocomplete-only="true"\n  prevent-default-keydown="13"\n>\n  <auto-complete\n    source="autocomplete($query)"\n    template="autocomplete_result.html"\n    min-length="1"\n    max-results-to-show="{{:: max_results }}"\n  ></auto-complete>\n</tags-input>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("autocomplete_word.html",'<span class="autocomplete-word" ng-bind=":: $getDisplayText()"></span>\n<svg src="x.svg" class="tag_item-remove_button" ng-click="$removeTag()"></svg>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("breadcrumbs.html",'<ul class="breadcrumbs" itemscope itemtype="https://schema.org/BreadcrumbList">\n  <li\n    ng-repeat="item in $ctrl.hierarchy"\n    ng-class="{\'breadcrumb-current_page\': $last}"\n    class="breadcrumb"\n    itemprop="itemListElement"\n    itemscope\n    itemtype="https://schema.org/ListItem"\n  >\n    <a ng-href="{{ item.url }}" itemprop="item">\n      <span itemprop="name">{{ item.title }}</span>\n      <meta itemprop="position" content="1" />\n    </a>\n  </li>\n</ul>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("click_to_load.html",'<div ng-if="loading" ng-transclude></div>\n<span ng-if="!loading" ng-click="load()" class="square_button" ng-bind="message"></button>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("collapsible_content.html",'<div\n  ng-class="{\'referent_container-excerpt_container\': $ctrl.max_height}"\n  ng-style="{maxHeight: $ctrl.max_height}"\n  yields-bounding-box-height="$ctrl.content_height_changed(height)"\n  ng-transclude\n></div>\n\n<p class="text_label u-clickable" ng-if="$ctrl.max_height" ng-click="$ctrl.expand()">\n  {{ $ctrl.text }}\n  <svg class="inline_icon inline_icon--short inline_icon--up_1" src="down_arrow.svg"></svg>\n</p>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("comment.html",'<div\n  class="comment"\n  ng-class="{\n    \'comment--animate_slide_down comment--animate_flash\': comment._new,\n    \'comment--no_top_divider\': variants.first_element_in_container,\n    \'comment--no_top_margin\': variants.first_element_in_container\n  }"\n>\n  <div ng-if="is_removed()" class="dashed_background_message">\n    This {{comment.disposition}} has been {{comment.deleted_at ? \'deleted\' : (\'comment.state.\' + comment.state | i18n)}}.\n  </div>\n\n  <user-badge-and-timestamp\n    size="x_small"\n    user="comment.author"\n    anonymous-user="comment.anonymous_author"\n    time="comment.created_at"\n    pinned-role="comment.pinned_role"\n  ></user-badge-and-timestamp>\n\n  <a class="comment-reason" target="_blank" ng-href="{{ comment.reason.context_url }}" ng-if="comment.reason">\n    {{ \'reason.sentence_intro\' | i18n }}\n    <span class="comment-reason-title">{{ \'reason.inline.\' + comment.reason.name | i18n }}</span>\n  </a>\n\n  <standard-rich-content html="comment.body.html" ng-show="!!comment.body.html"></standard-rich-content>\n\n  <authentication-form\n    on-cancel="ctrl.hide_auth = true"\n    ng-if="comment._new && comment.anonymous_author && !ctrl.hide_auth"\n    user-session="comment.anonymous_author"\n    social="false"\n    sign-in="false"\n    show-email="true"\n    header-text="\'comment.signup_prompt_header\' | i18n"\n    preamble-text="\'comment.signup_prompt_preamble\' | i18n"\n    variants="{display_in_context: true}"\n  ></authentication-form>\n\n  <div ng-if="!is_removed()">\n    <voting\n      vote-total-clicked="toggle_voters()"\n      type="comment"\n      object="comment"\n      on-unauthorized="ctrl.prompt_auth = true"\n      variants="{\'hide_upvote_text\': true}"\n    ></voting>\n\n    <div class="u-float_right">\n      <div\n        ng-if="can_perform(\'accept\')"\n        ng-click="perform_action(\'accept\', \'accepted\')"\n        confirm="Are you sure?"\n        class="square_button square_button--gray square_button--x_small_text_size square_button--transparent"\n      >Accept</div>\n      <div\n        ng-if="can_perform(\'reject\')"\n        ng-click="perform_action(\'reject\', \'rejected\')"\n        class="square_button square_button--gray square_button--x_small_text_size square_button--transparent"\n      >Reject</div>\n      <square-item-and-iq\n        ng-if="can_perform(\'integrate\')"\n        event_type="you_integrated_a_comment"\n      >\n        <div\n          ng-click="integrate()"\n          class="square_button square_button--gray square_button--x_small_text_size square_button--transparent"\n        >Integrate</div>\n      </square-item-and-iq>\n      <square-item-and-iq\n        ng-if="can_perform(\'archive\')"\n        event_type="you_archived_a_comment"\n      >\n        <div\n          ng-if="can_perform(\'archive\')"\n          ng-click="perform_action(\'archive\', \'archived\')"\n          class="square_button square_button--gray square_button--x_small_text_size square_button--transparent"\n        >Archive</div>\n      </square-item-and-iq>\n\n      <div\n        ng-if="can_perform(\'destroy\') || can_perform(\'mark_spam\')"\n        class="square_button square_button--transparent square_button--gray"\n        tether-drop-target\n      >\n        <svg\n          src="down_arrow.svg"\n          class="inline_icon inline_icon--up_2 inline_icon--short inline_icon--gray"\n        ></svg>\n\n        <tether-drop show-on="click" position="bottom center">\n          <div class="tooltip tooltip--no_padding tooltip--tiny" stop-propagation="click">\n            <span\n              class="tooltip-list_item"\n              ng-if="can_perform(\'mark_spam\')"\n              ng-click="perform_action(\'mark_spam\', \'marked_spam\')"\n              confirm="Are you sure you want to mark this comment as spam?"\n            >Mark spam!</span>\n            <span\n              class="tooltip-list_item"\n              ng-if="can_perform(\'destroy\')"\n              ng-click="destroy()"\n              confirm="Are you sure?"\n            >Delete</span>\n          </div>\n        </tether-drop>\n      </div>\n    </div>\n\n    <voters ng-if="showing_voters" type="comment" object="comment"></voters>\n  </div>\n\n  <authentication-form\n    ng-if="ctrl.prompt_auth"\n    on-cancel="ctrl.prompt_auth = false"\n    variants="{display_in_context: true}"\n  ></authentication-form>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("comment_form.html",'<form\n  name="form"\n  ng-submit="form.$valid && ctrl.save()"\n  ng-model-options="{updateOn: \'submit\'}"\n  class="u-large_bottom_margin"\n  submit-on-cmd-enter\n  dirtyable\n>\n  <div\n    ng-if="form.$submitted && form.$invalid"\n    class="form_message form_message--error text_label"\n  >{{:: \'comments.empty_validation\' | i18n}}</div>\n\n  <div ng-if="allowReasons">\n    <div ng-if="ctrl.show_reasons_form()" slide-down no-slide-when="ctrl.show_full_form_by_default || ctrl.show_reasons_by_default">\n      <reasons-toggle reason-changed="comment.reason = reason"></reasons-toggle>\n    </div>\n  </div>\n\n  <div ng-class="{\'u-quarter_top_margin u-small_bottom_margin\': ctrl.showing_full_form}">\n    <div class="square_input_with_avatar">\n      <div class="square_input_with_avatar-avatar" ng-if="!ctrl.showing_full_form && ctrl.current_user">\n        <div class="user_avatar user_avatar--small" clipped-background-image="ctrl.current_user.avatar.small.url"></div>\n      </div>\n      <div class="square_input_with_caret square_input_with_avatar-input">\n        <span\n          ng-if="allowReasons && ctrl.body_is_required() && ctrl.showing_full_form"\n          class="square_input_with_caret-caret"\n        ></span>\n        <textarea\n          mentionable\n          ng-required="ctrl.body_is_required()"\n          ng-model="comment.body.markdown"\n          ng-model-options="{updateOn: \'default\'}"\n          focus-on-change="comment.reason"\n          class="square_input square_input--full_width square_input--single_line_height"\n          ng-attr-placeholder="{{ textareaPlaceholder }}{{ ctrl.body_is_required() ? \'\' : \' (optional)\' }}"\n          ng-focus="ctrl.show_full_form()"\n          autosize-init-on-focus\n        ></textarea>\n      </div>\n    </div>\n\n    <div\n      ng-if="!ctrl.user_signed_in"\n      ng-show="ctrl.showing_full_form"\n    >\n      <input\n        required\n        ng-model="comment.name"\n        class="square_input square_input--full_width u-small_vertical_margins"\n        placeholder="Your name"\n      />\n      <input\n        required\n        ng-model="comment.email"\n        type="email"\n        class="square_input square_input--full_width"\n        placeholder="Your email address"\n      />\n    </div>\n  </div>\n\n  <div ng-show="ctrl.showing_full_form">\n    <button\n      class="square_button square_button--green"\n      ng-class="{\'square_button--waiting\': saving}"\n      ng-disabled="saving"\n      type="submit"\n      ng-bind="saving ? savingText : saveText"\n    ></button>\n  </div>\n</form>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("comment_list.html",'<div ng-repeat="comment in $ctrl.comments | filter:{_deleted:\'!true\'} track by comment.id">\n  <comment object="comment" variants="{first_element_in_container: $ctrl.variants.first_element_in_container && $first}"></comment>\n  <dfp-ad\n    ng-if="$ctrl.intersperse_ads && $index % 5 === 0"\n    instance-id="after-comment-{{ comment.id }}"\n    name="{{$ctrl.intersperse_ads}}"\n    ad-classes="[\'comment\']"\n  ></dfp-ad>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("comments.html",'<div\n  ng-hide="$ctrl.prevent_compose && !$ctrl.visible_comments().length"\n  class="comments u-vertical_margins"\n  ng-class="{\'gray_container\': !$ctrl.variants.no_background}"\n>\n  <comment-form\n    ng-show="$ctrl.can_create_comment()"\n    on-save="$ctrl.save_comment(comment)"\n    save-text="Submit"\n    saving-text="Submitting"\n    textarea-placeholder="{{ \'comments.placeholder.\' + ($ctrl.are_suggestions ? \'genius_annotation\' : \'annotation\') | i18n }}"\n    allow-reasons="$ctrl.allow_reasons"\n    show-reasons-by-default="$ctrl.commentable.state === \'pending\'"\n    commentable="$ctrl.commentable"\n    on-dirty="$ctrl.on_dirty()"\n    on-clean="$ctrl.on_clean()"\n  ></comment-form>\n\n  <comment-list\n    commentable="commentable"\n    variants="{first_element_in_container: !$ctrl.can_create_comment()}"\n    intersperse-ads="{{$ctrl.intersperse_ads}}"\n    comments="$ctrl.comments"\n  ></comment-list>\n\n  <comments-placeholder ng-if="$ctrl._loading"></comments-placeholder>\n  <div\n    ng-if="$ctrl.has_next() && !$ctrl._loading"\n    ng-click="$ctrl.load_more()"\n    class="u-top_margin"\n  >\n    <span class="text_label text_label--button text_label--purple">Show More ({{$ctrl.commentable.comment_count - $ctrl.visible_comments().length}})</span>\n  </div>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("comments_placeholder.html",'<div class="comment placeholder placeholder--slide_down">\n  <div class="comment-header">\n    <div class="comment-user_badge"><placeholder-user-badge size="x_small"></placeholder-user-badge></div>\n  </div>\n  <div class="comment-body rich_text_formatting placeholder-pulsing_content u-top_margin">\n    <placeholder-text></placeholder-text>\n  </div>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("component_date_input.html",'<div class="square_select_group">\n  <div class="square_select_group-single">\n    <select\n      ng-disabled="disabled"\n      ng-options="month.number as month.name for month in ctrl.months"\n      ng-model="ngModel.month"\n      ng-model-options="{updateOn: \'default\'}"\n      class="select_input"\n    >\n      <option value="" disabled selected>Month</option>\n    </select>\n  </div>\n  <span\n    class="square_select_group-separator u-clickable u-quarter_left_margin"\n    ng-click="ngModel.month = \'\'"\n  >\n    <svg src="x.svg" class="inline_icon inline_icon--gray"></svg>\n  </span>\n\n  <div class="square_select_group-single">\n    <select\n      ng-disabled="disabled"\n      ng-options="day as day for day in ctrl.days"\n      ng-model="ngModel.day"\n      ng-model-options="{updateOn: \'default\'}"\n      class="select_input"\n    >\n      <option value="" disabled selected>Day</option>\n    </select>\n  </div>\n  <span\n    class="square_select_group-separator u-clickable u-quarter_left_margin"\n    ng-click="ngModel.day = \'\'"\n  >\n    <svg src="x.svg" class="inline_icon inline_icon--gray"></svg>\n  </span>\n\n  <div class="square_select_group-single">\n    <select\n      ng-disabled="disabled"\n      ng-options="year as year for year in ctrl.years"\n      ng-model="ngModel.year"\n      ng-model-options="{updateOn: \'default\'}"\n      class="select_input"\n    >\n      <option value="" disabled selected>Year</option>\n    </select>\n  </div>\n  <span\n    class="square_select_group-separator u-clickable u-quarter_left_margin"\n    ng-click="ngModel.year = \'\'"\n  >\n    <svg src="x.svg" class="inline_icon inline_icon--gray"></svg>\n  </span>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("compose_message.html",'<form\n  dirtyable\n  yields-is-dirty="yields_is_dirty({is_dirty: is_dirty})"\n  exports-form-api="ctrl.form = api"\n  class="conversation-compose_area"\n  ng-class="{\'conversation-compose_area--tall\': ctrl.new_message}"\n  ng-submit="ctrl.send()"\n  submit-on-cmd-enter\n>\n  <div class="conversation-compose_area-recipient" ng-if="ctrl.new_message">\n    <label for="recipient" class="text_label">To</label>\n    <input\n      ng-model="message.recipient"\n      autocomplete-with="user"\n      autofocus\n      class="square_input square_form-standard_element_margin"\n      placeholder="Enter the recipient\'s name"\n    ></input>\n  </div>\n\n  <div class="u-bottom_margin">\n    <span\n      class="text_label text_label--no_margin"\n      ng-class="{\'text_label--purple text_label--button\': ctrl.showing_markdown_preview}"\n      ng-click="ctrl.hide_markdown_preview()"\n    >Write</span>\n    <span\n      class="text_label text_label--no_margin u-small_horizontal_margins"\n      ng-class="{\'text_label--purple text_label--button\': !ctrl.showing_markdown_preview}"\n      ng-click="ctrl.show_markdown_preview()"\n    >Preview</span>\n  </div>\n\n  <div class="u-bottom_margin">\n    <div ng-if="error" class="form_message form_message--error">{{error}}</div>\n  </div>\n\n  <textarea\n    mentionable\n    ng-hide="ctrl.showing_markdown_preview"\n    focus-on-change="message.recipient_id && sending"\n    class="square_input square_input--full_width conversation-message_textarea"\n    placeholder="Enter your message"\n    ng-model="message.body"\n    ng-model-options="{debounce: 300}"\n  ></textarea>\n\n  <div\n    class="conversation-compose_area-markdown_preview"\n    ng-if="ctrl.markdown_preview_initialized"\n    ng-show="ctrl.showing_markdown_preview"\n  >\n    <div ng-cloak class="conversation-message conversation-message--right">\n      <div class="user_avatar user_avatar--medium" clipped-background-image="ctrl.current_user.avatar.small.url"></div>\n      <markdown-preview markdown-content="message.body"></markdown-preview>\n      <span class="conversation-message-timestamp">now</span>\n    </div>\n  </div>\n\n  <div class="u-small_top_margin">\n    <input\n      type="submit"\n      class="square_button square_button--purple modal_window-save_button"\n      ng-class="{\'square_button--disabled\': sending}"\n      ng-disabled="sending"\n      ng-value="sending ? \'Sending\' : \'Send Message\'"\n    />\n  </div>\n</form>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("contact_button.html",'<a href ng-click="$ctrl.open_contact_form = true" ng-bind="\'Contact us\'"></a>\n<modal-window ng-if="$ctrl.open_contact_form" on-close="$ctrl.close()">\n  <div class="u-text_center u-vertical_margins">\n    <a href="/press" class="text_label text_label--purple text_label--button">Press</a>\n    <a href="mailto:inquiry@genius.com" class="text_label text_label--purple text_label--button">Advertising</a>\n  </div>\n\n  <hr>\n\n  <div ng-if="$ctrl.success">\n    <div class="text_label u-vertical_margins">Feedback received! Thank you! :)</div>\n    <div ng-click="$ctrl.close()" class="square_button square_button--transparent square_button--gray">Close</div>\n  </div>\n\n  <form\n      ng-if="!$ctrl.success"\n      ng-submit="$ctrl.submit()"\n      dirtyable\n  >\n    <div class="square_form-input_and_label">\n      <div class="text_label">Send us your feedback</div>\n      <textarea\n          class="square_input square_form-standard_element_margin"\n          ng-model="$ctrl.feedback_body"\n      ></textarea>\n    </div>\n\n    <div>\n      <button\n          class="square_button square_button--green u-small_bottom_margin"\n          ng-class="{\'square_button--waiting\': $ctrl.sending}"\n          ng-disabled="$ctrl.sending"\n          type="submit"\n      >Save</button>\n      <div ng-click="$ctrl.close()" class="square_button square_button--transparent square_button--gray">Cancel</div>\n    </div>\n  </form>\n</modal-window>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("contribution_opportunity.html",'<div class="contribution_opportunity nganimate-fade_slide_out_right" ng-if="!$ctrl.optimistically_removed">\n  <div class="contribution_opportunity-content">\n    <div class="contribution_opportunity-header">\n      <inbox-line-item-action-icon action-name="\'created\'"></inbox-line-item-action-icon>\n      <div class="u-left_margin contribution_opportunity-message">\n        {{ \'contribution_opportunity.message.\' + $ctrl.contribution_opportunity.message.key | i18n }}\n        <a\n          ng-href="{{$ctrl.contribution_opportunity.target.url}}"\n          target="_blank"\n          ng-click="$ctrl.track_open($event)"\n        >{{ $ctrl.contribution_opportunity.message.params.context }}</a>\n      </div>\n      <div ng-if="$ctrl.contribution_opportunity.message.params.is_double_iq" class="contribution_opportunity-flair">\n        <svg src="double_iq_flair.svg" />\n      </div>\n    </div>\n    <div\n      ng-if="!$ctrl.contribution_opportunity.message.params.hide_inline_form"\n      ng-switch="$ctrl.contribution_opportunity.message.key"\n      class="u-large_top_margin"\n    >\n      <div ng-switch-when="answer_question">\n        <question\n          question="$ctrl.contribution_opportunity.target"\n          on-pending-event="$ctrl.on_pending_event(event, result)"\n          yields-iq="$ctrl.iq_api = iq_api"\n          yields-api="$ctrl.question_api = api"\n          variants="{no_drop_down: true, no_answer_prompt: true, no_expansion: true}"\n        ></question>\n      </div>\n\n      <div ng-switch-when="review_annotation">\n        <standalone-referent\n          object="$ctrl.contribution_opportunity.target"\n          on-pending-event="$ctrl.on_pending_event(event, result)"\n          yields-iq="$ctrl.iq_api = iq_api"\n          yields-api="$ctrl.annotation_api = api"\n          variants="{hide_moderation: true}"\n        ></standalone-referent>\n      </div>\n\n      <div ng-switch-when="missing_writer_artists_song">\n        <missing-metadata-form\n          missing-params="{writer_artists: \'autocomplete_artists\'}"\n          object="$ctrl.contribution_opportunity.target"\n          placeholder="e.g., Pharrell Williams, Sean Garrett"\n          type="song"\n          source="IQ Opps"\n          on-pending-event="$ctrl.on_pending_event(event, result)"\n          yields-iq="$ctrl.iq_api = iq_api"\n          yields-api="$ctrl.missing_metadata_api = api"\n        ></missing-metadata-form>\n      </div>\n\n      <div ng-switch-when="missing_producer_artists_song">\n        <missing-metadata-form\n          missing-params="{producer_artists: \'autocomplete_artists\'}"\n          object="$ctrl.contribution_opportunity.target"\n          placeholder="e.g., J Dilla, No I.D."\n          type="song"\n          source="IQ Opps"\n          on-pending-event="$ctrl.on_pending_event(event, result)"\n          yields-iq="$ctrl.iq_api = iq_api"\n          yields-api="$ctrl.missing_metadata_api = api"\n        ></missing-metadata-form>\n      </div>\n\n      <div ng-switch-when="missing_albums_song">\n        <missing-metadata-form\n          missing-params="{albums: \'autocomplete_albums\'}"\n          object="$ctrl.contribution_opportunity.target"\n          type="song"\n          source="IQ Opps"\n          on-pending-event="$ctrl.on_pending_event(event, result)"\n          yields-iq="$ctrl.iq_api = iq_api"\n          yields-api="$ctrl.missing_metadata_api = api"\n        ></missing-metadata-form>\n      </div>\n\n      <div ng-switch-when="missing_release_date_song">\n        <missing-metadata-form\n          missing-params="{release_date_components: \'date_components\'}"\n          object="$ctrl.contribution_opportunity.target"\n          type="song"\n          source="IQ Opps"\n          on-pending-event="$ctrl.on_pending_event(event, result)"\n          yields-iq="$ctrl.iq_api = iq_api"\n          yields-api="$ctrl.missing_metadata_api = api"\n        ></missing-metadata-form>\n      </div>\n\n      <div ng-switch-when="missing_media_song">\n        <missing-metadata-form\n          missing-params="{youtube_url: \'text\', soundcloud_url: \'text\'}"\n          object="$ctrl.contribution_opportunity.target"\n          type="song"\n          source="IQ Opps"\n          on-pending-event="$ctrl.on_pending_event(event, result)"\n          yields-iq="$ctrl.iq_api = iq_api"\n          yields-api="$ctrl.missing_metadata_api = api"\n        ></missing-metadata-form>\n      </div>\n    </div>\n  </div>\n  <div ng-switch="$ctrl.contribution_opportunity.message.key" class="contribution_opportunity-actions">\n    <div ng-switch-when="answer_question">\n      <square-item-and-iq\n        ng-if="$ctrl.can(\'add_answer\')"\n        ng-click="$ctrl.question_api.answer()"\n        iq-params="$ctrl.iq_api.answer"\n      >\n        <span class="square_button square_button--green">Answer</span>\n      </square-item-and-iq>\n      <square-item-and-iq\n        ng-if="$ctrl.can(\'archive\')"\n        ng-click="$ctrl.question_api.archive()"\n        iq-params="$ctrl.iq_api.archive"\n      >\n        <span class="square_button square_button--gray square_button--transparent">Archive</span>\n      </square-item-and-iq>\n    </div>\n    <div ng-switch-when="review_annotation">\n      <square-item-and-iq\n        ng-click="$ctrl.annotation_api.accept()"\n        iq-params="$ctrl.iq_api.accept"\n      >\n        <span class="square_button square_button--green">Accept</span>\n      </square-item-and-iq>\n      <square-item-and-iq\n        ng-click="$ctrl.annotation_api.reject()"\n        iq-params="$ctrl.iq_api.reject"\n      >\n        <span class="square_button square_button--gray square_button--transparent">Reject</span>\n      </square-item-and-iq>\n    </div>\n    <div ng-switch-when="high_priority_transcription_song">\n      <square-item-and-iq event-type="created_a_real_high_priority_song">\n        <a\n          class="square_button"\n          ng-click="$ctrl.track_open($event)"\n          ng-href="{{$ctrl.contribution_opportunity.target.url}}"\n        >\n          Transcribe now\n        </a>\n      </square-item-and-iq>\n    </div>\n    <div ng-if="[\'missing_writer_artists_song\', \'missing_producer_artists_song\', \'missing_albums_song\', \'missing_release_date_song\', \'missing_media_song\'].indexOf($ctrl.contribution_opportunity.message.key) !== -1">\n      <square-item-and-iq\n        ng-if="$ctrl.can(\'edit_anything\')"\n        ng-click="$ctrl.missing_metadata_api.edit()"\n        iq-params="$ctrl.iq_api.edit_metadata"\n      >\n        <span class="square_button square_button--green">Edit</span>\n      </square-item-and-iq>\n    </div>\n    <div class="u-text_right">\n      <a\n        ng-if="!$ctrl.contribution_opportunity.message.params.hide_inline_form"\n        ng-href="{{$ctrl.contribution_opportunity.target.url}}"\n        target="_blank"\n        ng-click="$ctrl.track_open($event)"\n        class="square_button square_button--gray square_button--transparent square_button--x_small_text_size"\n      >Open</a>\n      <span\n        ng-if="$ctrl.assignment"\n        ng-click="$ctrl.dismiss()"\n        class="square_button square_button--gray square_button--transparent square_button--x_small_text_size"\n      >Skip</span>\n    </div>\n  </div>\n\n  <div ng-if="$ctrl.submitted" class="local_overlay">\n    <div class="contribution_opportunity-completed_message">Completed!</div>\n  </div>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("conversation_messages.html",'<div class="conversation">\n  <div class="text_label text_label--purple form_section_label">\n    Conversation with <a ng-href="{{ conversation.contacts[0].url }}" target="_blank">{{ conversation.contacts[0].name }}</a>\n  </div>\n\n  <div\n    class="conversation-message_list"\n    scroll-from-bottom\n    upwards-infinite-scroll="ctrl.load_next_page()"\n    infinite-scroll-disabled="!ctrl.should_paginate()"\n    scroll-to-bottom-when="messages.length > 0"\n    scroll-only-this-element\n  >\n    <placeholder-spinner ng-if="!finished_paginating" placeholder-classes="u-vertical_margins"></placeholder-spinner>\n    <div\n      ng-cloak\n      ng-repeat="message in messages track by message.id"\n      ng-class="{\n        \'conversation-message--left\': message.sender.id === conversation.contacts[0].id,\n        \'conversation-message--right\': message.sender.id !== conversation.contacts[0].id\n      }"\n      class="conversation-message"\n    >\n      <a ng-href="{{ message.sender.url }}">\n        <div class="user_avatar user_avatar--medium" clipped-background-image="message.sender.avatar.small.url"></div>\n      </a>\n      <standard-rich-content html="message.body.html"></standard-rich-content>\n      <span class="conversation-message-timestamp"><time-ago time="message.sent_at"></time-ago></span>\n    </div>\n  </div>\n\n  <compose-message\n    recipient="conversation.contacts[0]"\n    on-sent="ctrl.message_sent(message)"\n    yields-is-dirty="yields_is_dirty({is_dirty: is_dirty})"\n  ></compose-message>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("conversations.html",'<div infinite-scroll="ctrl.load_page()" infinite-scroll-disabled="!ctrl.should_paginate()">\n  <div ng-repeat="conversation in conversations track by conversation.id" ng-click="ctrl.open(conversation.id, $event)" class="feed_dropdown-item" ng-class="{\'feed_dropdown-item--unread\': conversation.unread}">\n    <div class="inbox_line_item">\n      <div class="inbox_line_item-avatars">\n        <div class="user_avatar user_avatar--medium" clipped-background-image="conversation.contacts[0].avatar.small.url"></div>\n        <span class="feed_dropdown-item-unread_indicator numbered_indicator" ng-if="conversation.unread">\n          {{ conversation.unread_messages_count }}\n        </span>\n      </div>\n      <div class="inbox_line_item-content">\n        <div class="inbox_line_item-content-sender">{{ conversation.contacts[0].name }}</div>\n        <span ng-if="conversation.latest_message.sender.id !== conversation.contacts[0].id">&lsh; </span>\n        <span ng-bind="conversation.latest_message.body_preview | truncateToBoundary:100:{with_ellipsis: true}"></span>\n      </div>\n      <div class="inbox_line_item-timestamp">\n        <time-ago time="conversation.latest_message.sent_at"></time-ago>\n      </div>\n    </div>\n    <modal-window\n      ng-if="open_conversation_id == conversation.id"\n      on-close="attempt_close(reason.close_button || !ctrl.is_form_dirty(), ctrl.close)"\n      variants="{full_height: !embed, no_margin: embed, internal_close: embed}"\n      content-dimensions="modal_dimensions"\n    >\n      <conversation-messages conversation="conversation" yields-is-dirty="ctrl.is_form_dirty = is_dirty"></conversation-messages>\n    </modal-window>\n  </div>\n\n  <div ng-if="!conversations.length && ctrl.all_pages_loaded" class="u-vertical_margins u-horizontal_margins">\n    No messages\n  </div>\n\n  <placeholder-spinner ng-if="!ctrl.all_pages_loaded" placeholder-classes="feed_dropdown-item"></placeholder-spinner>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("cosigns.html",'<div class="cosigns u-bottom_margin">\n  <a ng-repeat="user in annotation.cosigned_by" ng-href="{{ user.url }}" class="user_badge">\n    <div class="user_avatar" ng-class="{\'user_avatar--large\': user.is_meme_verified, \'user_avatar--medium\': !user.is_meme_verified}" clipped-background-image="user.avatar.medium.url"></div>\n    <div class="user_badge-text">\n      <div class="user_badge-subhead u-quarter_bottom_margin">Cosigned by</div>\n      <span class="user_badge-login">{{ user.name }}</span>\n      <svg class="checky" src="checky.svg" ng-if="user.is_meme_verified"></svg>\n    </div>\n  </a>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("cover_art_form.html",'<div ng-if="$ctrl.error" class="form_message form_message--error text_label">\n  {{ $ctrl.error.message }}\n  <span ng-repeat="error in $ctrl.error.response.errors track by error"><br>{{ error }}</span>\n</div>\n\n<div class="text_label text_label--gray text_label--x_small_text_size u-small_bottom_margin">Drag to reorder</div>\n\n<div class="cover_art_form">\n  <div\n    ng-repeat="cover_art in $ctrl.visible_cover_arts() track by cover_art.id"\n    class="cover_art_form-cover_art_container"\n    drag-and-drop\n    on-drop="$ctrl.move_before(cover_art, data)"\n    cant-drop="$ctrl.cant_drop(cover_art)"\n  >\n    <div\n      class="cover_art_form-cover_art"\n      drag-and-drop="cover_art"\n      draggable="true"\n      on-dragstart="$ctrl.cover_art_being_dragged = cover_art"\n      on-dragend="$ctrl.cover_art_being_dragged = null"\n    >\n      <image-upload-button\n        default-image="cover_art.image_url"\n        on-file-picked="$ctrl.update(cover_art, url)"\n        allow-clear="$ctrl.can(\'destroy\', cover_art)"\n        clear-confirm="Are you sure you want to delete this cover art and its associated annotation?"\n        on-clear="$ctrl.destroy(cover_art)"\n        allow-crop-to-square="true"\n      ></image-upload-button>\n    </div>\n  </div>\n\n  <div\n    class="cover_art_form-cover_art_container"\n    drag-and-drop\n    on-drop="$ctrl.move_before(null, data)"\n    cant-drop="$ctrl.cover_art_being_dragged.id === $ctrl.visible_cover_arts()[$ctrl.visible_cover_arts().length - 1].id"\n  >\n    <div class="cover_art_form-cover_art">\n      <image-upload-button\n        on-file-picked="$ctrl.create(url)"\n        allow-crop-to-square="true"\n      ></image-upload-button>\n    </div>\n  </div>\n\n  <div ng-if="$ctrl.saving" class="local_overlay local_overlay--gray">\n    <placeholder-spinner></placeholder-spinner>\n  </div>\n</div>\n\n<button\n  class="square_button square_button--transparent square_button--gray"\n  ng-disabled="true"\n>{{$ctrl.autosaving || $ctrl.saving ? \'Saving\' : \'Saved\'}}</button>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("cover_art_modal.html",'<modal-window\n  on-close="$ctrl.close()"\n  variants="{window_width: true, width_of_contents: true, vertically_center_self: true}"\n>\n  <div class="cover_art_annotation">\n    <div class="cover_art_annotation-cover_art">\n      <div class="cover_art">\n        <img\n          class="cover_art-image"\n          sized-src="$ctrl.focused_cover_art().image_url"\n          class-for-browser="{msie: \'cover_art-image_ie\', _default: \'cover_art-image\'}"\n        ></img>\n      </div>\n      <div\n        ng-if="$ctrl.focused_cover_art_index() > 0"\n        class="cover_art_annotation-cover_art-arrow cover_art_annotation-cover_art-arrow--left"\n        ng-click="$ctrl.move_cover_art_focus(-1)"\n      >\n        <svg src="left_arrow.svg"></svg>\n        <kb shortcut="left" action="$ctrl.move_cover_art_focus(-1)"></kb>\n      </div>\n      <div\n        class="cover_art_annotation-cover_art-arrow cover_art_annotation-cover_art-arrow--right"\n        ng-if="$ctrl.focused_cover_art_index() < $ctrl.cover_arts().length - 1"\n        ng-click="$ctrl.move_cover_art_focus(1)"\n      >\n        <svg src="right_arrow.svg"></svg>\n        <kb shortcut="right" action="$ctrl.move_cover_art_focus(1)"></kb>\n      </div>\n    </div>\n    <div class="cover_art_annotation-annotation">\n      <description-referent\n        ng-if="$ctrl.focused_cover_art().description_annotation"\n        object="$ctrl.focused_cover_art().description_annotation"\n        variants="{force_genius_annotation_title: true}"\n      ></description-referent>\n      <placeholder-spinner ng-if="!$ctrl.focused_cover_art().description_annotation"></placeholder-spinner>\n\n      <authentication-form\n        ng-if="!$ctrl.user_signed_in && $ctrl.focused_cover_art().description_annotation.classification === \'needs_exegesis\'"\n        header-text="\'annotation.sign_up_to_annotate\' | i18n"\n      ></authentication-form>\n    </div>\n  </div>\n</modal-window>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("deleted_answer.html",'<div class="u-bottom_padding">\n  <div class="annotation_label">{{$ctrl.answer.question.body}}</div>\n\n  <standard-rich-content\n    html="$ctrl.answer.body.html"\n    watch-images-loaded="$ctrl.answer.body.html"\n    open-links-in-new-window\n    handle-intra-page-links\n    variants="{\'no_vertical_margins\': true}"\n  ></standard-rich-content>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("description_annotation.html",'<annotation\n  variants="{\n    isDescription: true,\n    hideComments: true,\n    truncate_content: variants.truncated,\n    force_genius_annotation_title: variants.force_genius_annotation_title\n  }"\n  object="referent.annotations[0]"\n  referent="referent"\n  annotatable-title="referent.annotatable.title"\n></annotation>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("detailed_song_search.html",'<div class="rich_text_formatting detailed_song_search">\n  <p class="detailed_song_search-error_message" ng-if="$ctrl.error">{{ $ctrl.error.message }}</p>\n  <input\n    ng-model="$ctrl.url"\n    placeholder="genius.com URL"\n    class="square_input square_input--full_width square_form-text_input half u-half_vertical_margins"\n  >\n\n  <input\n    ng-model="$ctrl.autocompleted_song"\n    autocomplete-with="song"\n    display-field="full_title"\n    placeholder="Search"\n    class="square_input square_input--full_width square_form-text_input half u-half_vertical_margins"\n  >\n    <table ng-if="$ctrl.song_data">\n      <tbody>\n        <tr>\n          <th class="detailed_song_search-table_cell">Title</th>\n          <td class="detailed_song_search-table_cell">\n            <a href="/songs/{{$ctrl.song_data.id}}" target="_blank">\n              {{ $ctrl.song_data.title }}\n            </a>\n          </td>\n        </tr>\n        <tr>\n          <th class="detailed_song_search-table_cell">Albums</th>\n          <td class="detailed_song_search-table_cell">\n            <ul class="detailed_song_search-table_artist_list">\n              <li ng-repeat="album in $ctrl.song_data.albums">\n                {{ album.name }}\n              </li>\n            </ul>\n          </td>\n        </tr>\n        <tr>\n          <th class="detailed_song_search-table_cell">Artists</th>\n          <td class="detailed_song_search-table_cell">\n            <ul class="detailed_song_search-table_artist_list">\n              <li ng-repeat="artist in $ctrl.song_data.artists">\n                {{ artist.name }}\n              </li>\n            </ul>\n          </td>\n        </tr>\n      </tbody>\n    </table>\n    <button\n      ng-disabled="!$ctrl.song.id || $ctrl.saving"\n      ng-class="{\'square_button--disabled\': !$ctrl.song.id || $ctrl.saving}"\n      ng-click="$ctrl.submit({song: this.song})"\n      confirm="Are you sure?"\n      class="square_button square_button--green"\n    >{{ $ctrl.saving ? \'Updating...\' : \'Confirm\' }}</button>\n\n    <button\n      ng-click="$ctrl.cancel()"\n      class="square_button"\n    >Cancel</button>\n  </div>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("dfp_ad.html",'<div\n  ng-if="!$ctrl.no_ad"\n  class="dfp_unit {{$ctrl.compiled_ad_unit_classes()}}"\n>\n  <div\n    id="{{$ctrl.id}}"\n    class="dfp_unit-ad_container"\n    ng-style="!$ctrl.filled && {\n      \'width\': $ctrl.creative_size[0],\n      \'height\': $ctrl.creative_size[1]\n    }"\n  ></div>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("edit_artist_profile.html",'<form\n  name="form"\n  ng-submit="form.$valid && $ctrl.update_artist()"\n  ng-model-options="{updateOn: \'submit\'}"\n  dirtyable\n>\n  <div\n    ng-if="$ctrl.errors"\n    ng-repeat="error in $ctrl.errors"\n    class="form_message form_message--error text_label"\n  >{{ error }}</div>\n\n  <div class="square_form">\n    <div ng-if="$ctrl.can(\'edit\')" class="square_form-input_and_label">\n      <div class="text_label">Artist Name</div>\n      <input\n        required\n        ng-model="$ctrl.editable_artist.name"\n        class="square_input square_form-standard_element_margin"\n        placeholder="Artist\'s name"\n      />\n    </div>\n\n    <div ng-if="$ctrl.can(\'edit_names\')" class="square_form-input_and_label">\n      <div class="text_label">Alternate Names</div>\n      <div class="text_label text_label--x_small_text_size text_label--gray">\n        Separate multiple alternate names with commas\n      </div>\n      <input\n        ng-model="$ctrl.editable_artist.alternate_names"\n        class="square_input square_form-standard_element_margin"\n        placeholder="Artist\'s alternate names"\n      />\n    </div>\n\n    <div class="square_form-input_and_label square_form-input_and_label--half_width" ng-if="$ctrl.can(\'edit_images\')">\n      <div class="text_label">Avatar</div>\n      <image-upload-button\n        default-image="$ctrl.editable_artist.image_url"\n        on-file-picked="$ctrl.editable_artist.image_url = url"\n        allow-crop-to-square="true"\n        variants="{avatar: true}"\n      ></image-upload-button>\n    </div>\n\n    <div class="square_form-input_and_label square_form-input_and_label--half_width" ng-if="$ctrl.can(\'edit_images\')">\n      <div class="text_label">Cover Art</div>\n      <image-upload-button\n        default-image="$ctrl.editable_artist.header_image_url"\n        on-file-picked="$ctrl.editable_artist.header_image_url = url"\n        variants="{dock_tooltip_right: true}"\n      ></image-upload-button>\n    </div>\n\n    <div ng-if="$ctrl.can(\'edit\')" class="square_form-input_and_label">\n      <div class="text_label">Instagram Name</div>\n      <input\n        ng-model="$ctrl.editable_artist.instagram_name"\n        class="square_input square_form-standard_element_margin"\n        placeholder="Artist\'s instagram name"\n      />\n    </div>\n\n    <div ng-if="$ctrl.can(\'edit\')" class="square_form-input_and_label">\n      <div class="text_label">Twitter Name</div>\n      <input\n        ng-model="$ctrl.editable_artist.twitter_name"\n        class="square_input square_form-standard_element_margin"\n        placeholder="Artist\'s twitter name"\n      />\n    </div>\n\n    <div ng-if="$ctrl.can(\'edit\')" class="square_form-input_and_label">\n      <div class="text_label">Facebook Name</div>\n      <input\n        ng-model="$ctrl.editable_artist.facebook_name"\n        class="square_input square_form-standard_element_margin"\n        placeholder="Artist\'s facebook name"\n      />\n    </div>\n\n    <div\n      ng-if="$ctrl.can(\'edit_translation_artist\')"\n      class="square_form-standard_element_margin"\n    >\n      <div class="text_label">Translation Artist?</div>\n      <input\n        type="checkbox"\n        ng-model="$ctrl.editable_artist.translation_artist"\n      />\n    </div>\n\n    <div>\n      <button\n        class="square_button square_button--green u-small_bottom_margin"\n        ng-class="{\'square_button--waiting\': $ctrl.saving}"\n        ng-disabled="$ctrl.saving"\n        type="submit"\n      >Save</button>\n      <button ng-click="$ctrl.close()" class="square_button square_button--transparent square_button--gray">Cancel</button>\n    </div>\n  </div>\n</form>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("edit_user_email_preferences.html",'<form\n  name="form"\n  ng-submit="form.$valid && $ctrl.update_user()"\n  ng-model-options="{updateOn: \'submit\'}"\n  dirtyable\n>\n  <div\n    ng-if="$ctrl.errors"\n    ng-repeat="error in $ctrl.errors"\n    class="form_message form_message--error text_label"\n  >{{ error }}</div>\n\n  <div class="square_form">\n    <label for="{{preference}}" class="square_checkbox u-quarter_vertical_margins" ng-repeat="(preference, val) in $ctrl.editable_user.preferences track by preference">\n      <input id="{{preference}}" type="checkbox" ng-model="$ctrl.editable_user.preferences[preference]"/>\n      <span class="text_label u-half_right_margin">{{\'preference.\' + preference | i18n}}</span>\n      <span for="{{preference}}" class="text_label--gray u-display_block">{{\'preference.description.\' + preference | i18n}}</span>\n    </div>\n\n    <div class="u-vertical_margins">\n      <button\n        class="square_button square_button--green u-small_bottom_margin"\n        ng-class="{\'square_button--waiting\': $ctrl.saving}"\n        ng-disabled="$ctrl.saving"\n        type="submit"\n      >Save</button>\n      <button ng-click="$ctrl.close()" class="square_button square_button--transparent square_button--gray">Cancel</button>\n    </div>\n  </div>\n</form>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("edit_user_profile.html",'<form\n  name="form"\n  ng-submit="form.$valid && $ctrl.update_user()"\n  ng-model-options="{updateOn: \'submit\'}"\n  dirtyable\n>\n  <div\n    ng-if="$ctrl.errors"\n    ng-repeat="error in $ctrl.errors"\n    class="form_message form_message--error text_label"\n  >{{ error }}</div>\n\n  <div class="square_form">\n    <div class="square_form-input_and_label">\n      <div class="text_label">Username</div>\n      <div class="text_label text_label--x_small_text_size text_label--gray">\n        {{$ctrl.can(\'change_login\') ? \'You can only change this once a month\' : \'Moderators can\\\'t change their username\'}}\n      </div>\n      <input\n        required\n        ng-model="$ctrl.editable_user.login"\n        class="square_input square_form-standard_element_margin"\n        placeholder="Username"\n        ng-disabled="!$ctrl.can(\'change_login\')"\n      />\n    </div>\n\n    <div ng-if="!$ctrl.user.artist" class="square_form-input_and_label square_form-input_and_label--half_width" ng-if="!$ctrl.disable_image_edit">\n      <div class="text_label">Avatar</div>\n      <image-upload-button\n        default-image="$ctrl.editable_user.photo_url"\n        on-file-picked="$ctrl.editable_user.photo_url = url"\n        allow-crop-to-square="true"\n        variants="{avatar: true}"\n      ></image-upload-button>\n    </div>\n\n    <div ng-if="!$ctrl.user.artist" class="square_form-input_and_label square_form-input_and_label--half_width" ng-if="!$ctrl.disable_image_edit">\n      <div class="text_label">Cover Art</div>\n      <image-upload-button\n        default-image="$ctrl.editable_user.custom_header_image_url"\n        on-file-picked="$ctrl.editable_user.custom_header_image_url = url"\n        variants="{dock_tooltip_right: true}"\n      ></image-upload-button>\n    </div>\n\n    <div class="square_form-input_and_label" ng-if="!$ctrl.disable_user_bio_edit">\n      <div class="text_label">Change Bio</div>\n      <editable-markdown\n        html="$ctrl.editable_user.about_me.html"\n        markdown="$ctrl.editable_user.about_me.markdown"\n        placeholder="{{:: \'profile_page.about_me.placeholder\' | i18n }}"\n      ></editable-markdown>\n    </div>\n\n    <div class="square_form-input_and_label">\n      <div class="text_label">Change Email</div>\n      <input\n        required\n        ng-model="$ctrl.editable_user.email"\n        class="square_input square_form-standard_element_margin"\n        placeholder="Email"\n      />\n    </div>\n\n    <div class="square_form-input_and_label">\n      <div class="text_label">Change Password</div>\n      <input\n        ng-model="$ctrl.editable_user.password"\n        class="square_input square_form-standard_element_margin"\n        placeholder="New password"\n        type="password"\n      />\n    </div>\n\n    <div class="square_form-input_and_label">\n      <div class="text_label">Confirm Password</div>\n      <input\n        ng-model="$ctrl.editable_user.confirm_password"\n        class="square_input square_form-standard_element_margin"\n        placeholder="Confirm password"\n        type="password"\n      />\n    </div>\n\n    <div>\n      <button\n        class="square_button square_button--green u-small_bottom_margin"\n        ng-class="{\'square_button--waiting\': $ctrl.saving}"\n        ng-disabled="$ctrl.saving"\n        type="submit"\n      >Save</button>\n      <button ng-click="$ctrl.close()" class="square_button square_button--transparent square_button--gray">Cancel</button>\n    </div>\n  </div>\n</form>\n\n<user-identities user="$ctrl.user" editable="true"></user-identities>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("editable_markdown.html",'<div class="editable_markdown u-bottom_margin">\n  <textarea\n    ng-required="is_required"\n    ng-init="resize_textarea()"\n    ng-model="editable.markdown"\n    insertable-at-cursor="ctrl.insert_at_markdown_cursor = insertFn"\n    class="wysiwyg_input wysiwyg_input--full_width u-vertical_margins"\n    placeholder="{{ placeholder }}"\n    autofocus\n    ng-autofocus="true"\n    rows="8"\n  ></textarea>\n\n  <div class="editable_markdown-tools">\n    <div><span class="text_label text_label--gray editable_markdown-text_label_header">Tools:</span></div>\n    <div>\n      <span ng-click="ctrl.pick_image()" class="text_label text_label--purple editable_markdown-text_label">Add image</span>\n      <span ng-click="ctrl.show_formatting_help = !ctrl.show_formatting_help" class="text_label editable_markdown-text_label" ng-class="{\'text_label--purple\': !ctrl.show_formatting_help, \'text_label--gray\': ctrl.show_formatting_help}">Formatting help</span>\n      <a href="/Genius-how-genius-works-annotated" target="_blank" class="text_label text_label--purple editable_markdown-text_label" tabindex="-1">How to annotate</a>\n    </div>\n  </div>\n\n  <div class="gray_container u-vertical_margins" ng-show="ctrl.show_formatting_help">\n    <p>Add an image, video, or tweet by pasting the URL</p>\n    <pre class="gray_container rich_text_formatting u-vertical_margins"><code>http://genius.com/logo.png</code></pre>\n    <p>Add a link</p>\n    <pre class="gray_container rich_text_formatting u-vertical_margins"><code>[Check out my fave website](http://genius.com)</code></pre>\n    <p>Simple formatting</p>\n    <pre class="gray_container rich_text_formatting u-top_margin"><code>*Italicize*\n**Bold**\n&gt; Blockquote</code></pre>\n  </div>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("editable_tracklist.html",'<div ng-if="$ctrl.editing" class="u-bottom_margin">\n  <div\n    class="square_button square_button--green"\n    ng-click="$ctrl.save()"\n    ng-class="{\'square_button--disabled\': $ctrl.saving}"\n  >{{$ctrl.saving ? \'Saving\' : \'Save\'}}</div>\n  <div\n    class="square_button square_button--gray square_button--transparent"\n    ng-click="$ctrl.close()"\n    ng-class="{\'square_button--disabled\': $ctrl.saving}"\n  >Cancel</div>\n</div>\n\n<div ng-if="$ctrl.error" class="form_message form_message--error text_label">{{ $ctrl.error }}</div>\n\n<div class="editable_tracklist" always-dirty>\n  <div\n    ng-repeat="slot in $ctrl.numbered_slots track by $index"\n    class="editable_tracklist-row u-vertical_margins nganimate-fade_in nganimate-fade_out"\n  >\n    <editable-tracklist-number track-number="slot.track_number" on-update="$ctrl.update_slot_number(slot, input)"></editable-tracklist-number>\n    <div\n      class="editable_tracklist-row-entry-container"\n      ng-if="slot.song_id"\n      drag-and-drop\n      on-drop="$ctrl.place_song_into_slot(data, slot)"\n      cant-drop="$ctrl.slot_being_dragged.track_number === slot.track_number"\n    >\n      <div\n        class="editable_tracklist-row-entry"\n        drag-and-drop="slot"\n        draggable="true"\n        on-dragstart="$ctrl.slot_being_dragged = slot"\n        on-dragend="$ctrl.slot_being_dragged = null; $ctrl.remove_trailing_empty_slots()"\n      >\n        <div class="editable_tracklist-row-entry-title">{{slot.title}}</div>\n        <div ng-if="slot.lyrics_state" class="text_label text_label--gray">\n          <input\n            type="checkbox"\n            ng-checked="slot.lyrics_state === \'unreleased\'"\n          >\n          <label ng-click="$ctrl.toggle_unreleased(slot)" class="editable_tracklist-row-entry-unreleased_label u-clickable">Unreleased</label>\n        </div>\n        <div>\n          <svg src="drag.svg" class="inline_icon inline_icon--gray u-small_left_margin"></svg>\n        </div>\n        <div>\n          <svg src="x.svg" ng-click="$ctrl.clear_slot(slot); $ctrl.remove_trailing_empty_slots()" class="u-clickable inline_icon inline_icon--gray inline_icon--small_reading_size u-small_left_margin"></svg>\n        </div>\n      </div>\n    </div>\n    <div\n      ng-if="!slot.song_id"\n      class="editable_tracklist-row-placeholder"\n      drag-and-drop\n      on-drop="$ctrl.place_song_into_slot(data, slot)"\n    ></div>\n  </div>\n\n  <div class="editable_tracklist-row u-vertical_margins">\n    <div class="editable_tracklist-row-number"></div>\n    <div\n      class="editable_tracklist-row-placeholder"\n      drag-and-drop\n      on-dragenter="$ctrl.add_slot_after_delay()"\n      on-dragleave="$ctrl.cancel_add_slot()"\n      on-drop="$ctrl.add_slot_and_fill(data)"\n    >\n      <div class="text_label text_label--gray">Drop here to add as track {{$ctrl.numbered_slots.length + 1}}</div>\n    </div>\n  </div>\n\n  <div class="text_label text_label--gray">Unnumbered</div>\n\n  <div\n    ng-repeat="slot in $ctrl.unnumbered_slots track by $index"\n    class="editable_tracklist-row u-vertical_margins nganimate-fade_in nganimate-fade_out"\n  >\n    <editable-tracklist-number track-number="slot.track_number" on-update="$ctrl.update_slot_number(slot, input)"></editable-tracklist-number>\n    <div class="editable_tracklist-row-entry-container">\n      <div\n        class="editable_tracklist-row-entry"\n        draggable="true"\n        drag-and-drop="slot"\n        on-dragstart="$ctrl.slot_being_dragged = slot"\n        on-dragend="$ctrl.slot_being_dragged = null; $ctrl.remove_trailing_empty_slots()"\n      >\n        <div class="editable_tracklist-row-entry-title">{{slot.title}}</div>\n        <div ng-if="slot.lyrics_state" class="text_label text_label--gray">\n          <input\n            type="checkbox"\n            ng-checked="slot.lyrics_state === \'unreleased\'"\n          >\n          <label ng-click="$ctrl.toggle_unreleased(slot)" class="editable_tracklist-row-entry-unreleased_label u-clickable">Unreleased</label>\n        </div>\n        <div>\n          <svg src="drag.svg" class="inline_icon inline_icon--gray u-small_left_margin"></svg>\n        </div>\n        <div>\n          <svg src="x.svg" ng-click="$ctrl.clear_slot(slot); $ctrl.remove_trailing_empty_slots()" class="u-clickable inline_icon inline_icon--gray inline_icon--small_reading_size u-small_left_margin"></svg>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <div class="editable_tracklist-row u-vertical_margins">\n    <div class="editable_tracklist-row-number"></div>\n    <div\n      class="editable_tracklist-row-placeholder"\n      drag-and-drop\n      on-drop="$ctrl.clear_slot(data); $ctrl.make_unnumbered(data); $ctrl.remove_trailing_empty_slots()"\n      cant-drop="!$ctrl.slot_being_dragged.track_number"\n    >\n      <div class="text_label text_label--gray">Drop here to clear track number</div>\n    </div>\n  </div>\n\n  <div class="editable_tracklist-row u-vertical_margins">\n    <div class="editable_tracklist-row-number"></div>\n    <input\n      autocomplete-with="song"\n      on-select="$ctrl.add_song(data)"\n      class="square_input square_input--full_width"\n      placeholder="Add a song"\n      create-result="$ctrl.create_result(term)"\n    >\n  </div>\n\n  <div ng-if="$ctrl.saving" class="local_overlay local_overlay--page_background_color">\n    <placeholder-spinner></placeholder-spinner>\n  </div>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("editable_tracklist_number.html",'<div class="editable_tracklist-row-number">\n  <div ng-click="$ctrl.editing = true" ng-hide="$ctrl.editing">\n    {{$ctrl.track_number}}\n    <div\n      class="editable_tracklist-row-number-edit_icon"\n      ng-class="{\n        \'editable_tracklist-row-number-edit_icon--no_number\': $ctrl.track_number === undefined\n      }"\n    >\n      <button class="button--unstyled" aria-label="edit">\n        <svg src="pencil.svg" class="inline_icon inline_icon--gray"></svg>\n      </button>\n    </div>\n  </div>\n  <form ng-if="$ctrl.editing" ng-submit="$ctrl.submit()" submit-on-cmd-enter>\n    <input ng-model="$ctrl.editable_track_number" class="square_input editable_tracklist-row-number-input u-x_small_right_margin" ng-autofocus>\n    <button class="button--unstyled" aria-label="submit">\n      <svg\n        src="checkmark.svg"\n        class="inline_icon inline_icon--gray u-x_small_right_margin u-clickable"\n        ng-click="$ctrl.submit()"\n      ></svg>\n    </button>\n    <button class="button--unstyled" aria-label="cancel">\n      <svg\n        src="x.svg"\n        class="inline_icon inline_icon--gray u-x_small_right_margin u-clickable"\n        ng-click="$ctrl.reset()"\n        aria-label="cancel"\n      ></svg>\n    </button>\n  </form>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("email_confirmation_banner.html",'<div class="global_message-message">\n  <span ng-hide="$ctrl.success || $ctrl.error_message">\n    As part of our recent push to improve site security, we\'re asking all moderators to verify their email. <a href prevent-default-click ng-click="$ctrl.request()" ng-hide="$ctrl.loading">Click here to get started.</a> <img src="/images/ajax-loader-button-white.gif" ng-show="$ctrl.loading">\n  </span>\n  <span ng-show="$ctrl.error_message">{{ $ctrl.error_message }}</span>\n  <strong ng-show="$ctrl.success">\n    Success! Please check your email for further instructions.\n  </strong>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("embedly_embed.html",'<div\n  class="embedly_preview"\n  ng-class="{\n    \'embedly_preview--video\': $ctrl.embed.type === \'video\' && $ctrl.embed.provider_name !== \'Instagram\',\n    \'embedly_preview--instagram_video\': $ctrl.embed.type === \'video\' && $ctrl.embed.provider_name === \'Instagram\',\n  }"\n>\n  <div ng-if=":: $ctrl.embed.html" ng-bind-html=":: $ctrl.trusted_html()"></div>\n  <div ng-if=":: !$ctrl.embed.html" class="gray_container gray_container--full_padding">\n    <div class="embedly_preview-thumb" ng-if=":: $ctrl.embed.thumbnail_url">\n      <img ng-src="{{:: $ctrl.embed.thumbnail_url}}" style="{{:: $ctrl.embed.style}}"/>\n    </div>\n    <div class="embedly_preview-text">\n      <a ng-href="{{:: $ctrl.embed.original_url}}" class="embedly_preview-title">{{:: $ctrl.embed.title}}</a>\n      <a ng-if=":: $ctrl.embed.provider_name" href="{{:: $ctrl.embed.provider_url }}" class="embedly_preview-provider">{{:: $ctrl.embed.provider_name }}</a>\n      <div class="embedly_preview-description" ng-if=":: $ctrl.embed.description">{{:: $ctrl.embed.description}}</div>\n    </div>\n  </div>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("embedly_player.html",'<div ng-class="playerClass" ng-bind-html="media_html" ng-show="state.is_loaded" ng-if="media && is_initialized"></div>\n<div ng-class="playerClass" ng-if="!media" ng-transclude></div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("embedly_youtube.html",'<div class="embedly_preview embedly_preview--video">\n  <youtube-video\n    video-id="$ctrl.video_id"\n    player-vars="{modestbranding: 1, start: $ctrl.start, showinfo:0}"\n    player="youtubePlayer"\n  ></youtube-video>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("expandable_accordion_section.html",'<div class="expandable_accordion_section" ng-class="{\'expandable_accordion_section--expanded\':expanded}">\n  <div class="accordion_label form_section_label" ng-click="expand_content()">\n    <div class="accordion_label-text text_label text_label--purple">\n      {{::label}}\n      <span class="text_label text_label--x_small_text_size">({{::shortcut}})</span>\n    </div>\n\n    <svg class="inline_icon inline_icon--purple inline_icon--short" ng-src="expanded ? \'up_arrow.svg\' : \'down_arrow.svg\'"></svg>\n  </div>\n  <ng-transclude class="expandable_accordion_section-content"></ng-transclude>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("expandable_container.html",'<div\n  class="accordion_label"\n  ng-click="$ctrl.toggle_expand()"\n>\n  <div class="accordion_label-text">\n    <ng-transclude ng-transclude-slot="expandable_container_title">\n      <span class="text_label text_label--gray" ng-bind="$ctrl.title"></span>\n    </ng-transclude>\n  </div>\n  <svg\n    ng-if="!$ctrl.variants.no_arrow"\n    class="inline_icon inline_icon--short"\n    ng-src="$ctrl.expanded ? \'up_arrow.svg\' : \'down_arrow.svg\'"\n  ></svg>\n</div>\n\n<ng-transclude ng-if="$ctrl.start_initialized || $ctrl.expanded" ng-show="$ctrl.expanded"></ng-transclude>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("expandable_diff.html",'<div ng-repeat="range in $ctrl.ranges track by [range.start, range.end]">\n  <div\n    class="square_button square_button--transparent square_button--gray"\n    ng-if="$index > 0 || range.start > 0"\n    ng-click="$ctrl.expand_range_start($index)"\n  >\n    <span class="text_label text_label--link text_label--x_small_text_size text_label--gray">\n      <svg src="up_arrow.svg" class="inline_icon u-quarter_right_margin inline_icon--half_height inline_icon--up_1"></svg>\n      Show {{$ctrl.expand_amount}} more lines\n    </span>\n  </div>\n  <div ng-bind-html="$ctrl.render_lines(range.start, range.end)"></div>\n</div>\n<div\n  ng-if="$ctrl.ranges[$ctrl.ranges.length - 1].end < $ctrl.lines.length"\n  ng-click="$ctrl.expand_range_end($ctrl.ranges.length - 1)"\n  class="square_button square_button--transparent square_button--gray"\n>\n  <span class="text_label text_label--x_small_text_size text_label--gray">\n    <svg src="down_arrow.svg" class="inline_icon u-quarter_right_margin inline_icon--half_height inline_icon--up_1"></svg>\n    Show {{$ctrl.expand_amount}} more lines\n  </span>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("facebook_share_button.html",'<a\n  ng-click="$ctrl.share_on_facebook()"\n  class="square_button"\n  ng-class="{\n    \'square_button--transparent square_button--facebook_inverse nganimate-disable_transition\': $ctrl.variants.transparent,\n    \'square_button--facebook\': !$ctrl.variants.transparent\n  }"\n>\n  <svg class="inline_icon" src="facebook.svg"></svg>\n  <span ng-if="$ctrl.variants.showText">Share</span>\n</a>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("fact_track_simulator.html",'<div class="fact_track_card fact_track_card-{{ current_annotation.content_type }}_card fact_track_card--front" ng-click="ctrl.card_clicked()">\n  <div class="fact_track_card-album_image" ng-show="album.images.length && current_annotation.content_type === \'intro\'" ng-attr-style="background-image: url(\'{{ album.images[0].url }}\')"></div>\n  <div class="fact_track_card-headline" ng-switch="current_annotation.content_type">\n    <span ng-switch-when="lyrics">Lyrics</span>\n    <span ng-switch-when="verified">Lyrics</span>\n    <span ng-switch-when="verified_annotation">\n      <span class="fact_track_card-headline-artist_name">{{ (current_annotation.spotify_artist_uuid | spotify_artist_metadata).name }}</span> Exclusive\n    </span>\n    <span ng-switch-when="annotation">Behind the Lyrics</span>\n    <span ng-switch-when="iq">Track Fact</span>\n    <span ng-switch-when="credits">Credits</span>\n  </div>\n  <div class="fact_track_card-body fact_track_card-body--{{ current_annotation.content_type }}">\n    <span class="fact_track_card-body-highlight" ng-bind-html="current_annotation.content | highlight_braced:{class_name:\'fact_track_card-emphasis\'}"></span>\n  </div>\n  <div class="fact_track_card-verified_headline" ng-show="current_annotation.content_type == \'verified_annotation\'">\n    <div class="user_avatar user_avatar--xxx_large" clipped-background-image="((current_annotation.spotify_artist_uuid | spotify_artist_metadata).images | minBy:\'width\').url"></div>\n  </div>\n  <div class="fact_track_card-countdown_timer">\n    <div class="fact_track_card-countdown_timer-time_remaining" style="width:{{ (ctrl.annotation_percentage() * 100).toFixed(3) }}%"></div>\n  </div>\n</div>\n\n<div class="fact_track_controls media_control">\n  <div class="media_control-button_group" ng-click="ctrl.toggle_play_pause()">\n    <play-pause-button playing="playing"></play-pause-button>\n  </div>\n  <div class="media_control-scrubber">\n    <div class="media_control-scubber-handle_container" scrubber scrub-percentage="scrub_percentage" scrubbed="ctrl.seek_to_percentage(percentage)">\n      <span class="media_control-scubber-handle" style="left:{{ ((scrub_percentage || (time / duration)) * 100).toFixed(3) }}%"></span>\n    </div>\n  </div>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("flash_messages.html",'<div ng-repeat="message in flash_messages" ng-click="$parent.ctrl.close_message(message)" class="global_message global_message--{{ message.type }}">\n  <div class="global_message-message" ng-bind-html="message.message"></div>\n  <div class="global_message-close"><svg src="x.svg" class="global_message-x_icon x_icon"></svg></div>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("follow_button.html",'<a\n  ng-click="toggle_following()"\n  class="square_button"\n  ng-class="{\n    \'square_button--purple\': variants.purple,\n    \'square_button--transparent\': variants.transparent,\n    \'square_button--active\': following,\n    \'square_button--disabled\': disabled\n  }"\n  ng-disabled="disabled"\n  ng-if=":: can_follow()"\n>\n  <span ng-bind="label()"></span>\n</a>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("global_error_message.html",'<modal-window ng-if="ctrl.message_html" on-close="ctrl.message_html = null" ng-cloak>\n  <div ng-bind-html="ctrl.message_html" class="rich_text_formatting"></div>\n</modal-window>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("global_message.html",'<div class="global_message global_message--error">\n  <div class="global_message-message" ng-transclude></div>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("hang_initial_quote.html","<div\n  ng-class=\"{\n    'u-hang_initial_single_quote': $ctrl.hang_initial_single_quote,\n    'u-hang_initial_double_quote': $ctrl.hang_initial_double_quote\n  }\"\n  ng-bind=\"$ctrl.content\"\n></div>\n")}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("header_actions.html",'<mutually-exclusive-switches property="open_header_menus">\n  <div ng-if="$ctrl.user_signed_in" class="header-actions">\n    <inbox-container inbox-name="groups_inbox" open-inboxes="open_header_menus"></inbox-container>\n    <inbox-container inbox-name="newsfeed_inbox" abbreviate-after="20" open-inboxes="open_header_menus"></inbox-container>\n    <inbox-container inbox-name="main_activity_inbox" sync-count-to-title="true" open-inboxes="open_header_menus"></inbox-container>\n    <inbox-container inbox-name="messages_inbox" use-messages-inbox="true" open-inboxes="open_header_menus"></inbox-container>\n    <inbox-container\n      ng-if="$ctrl.can(\'view_contribution_opportunity_assignments\')"\n      inbox-name="iq_inbox"\n      use-iq-inbox="true"\n      open-inboxes="open_header_menus"\n    ></inbox-container>\n    <header-admin open-header-menus="open_header_menus"></header-admin>\n  </div>\n  <header-auth ng-if="!$ctrl.user_signed_in"></header-auth>\n</mutually-exclusive-switches>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("header_admin.html",'<div\n  class="header-action"\n  ng-class="{\'header-action--active\': $ctrl.open_header_menus.admin_menu}"\n  ng-click="$ctrl.open_header_menus.admin_menu = !$ctrl.open_header_menus.admin_menu"\n  stop-propagation="click"\n>\n  <div\n    class="header-user_avatar"\n    clipped-background-image=":: $ctrl.user.avatar.thumb.url"\n  ></div>\n  <div class="header-action-label">{{ $ctrl.user.iq | number:0 }} IQ</div>\n</div>\n\n<div\n  click-outside="$ctrl.open_header_menus.admin_menu = false"\n  class="feed_dropdown feed_dropdown--narrow_width"\n  ng-show="$ctrl.open_header_menus.admin_menu"\n  scroll-only-this-element=""\n>\n  <div class="feed_dropdown-header">\n    <span class="text_label">Account</span>\n  </div>\n\n  <a\n    ng-href="{{$ctrl.user.url}}"\n    class="feed_dropdown-item feed_dropdown-item--link"\n  >View Profile</a>\n\n  <a\n    href="/feedback/new"\n    class="feed_dropdown-item feed_dropdown-item--link"\n  >Report a Problem</a>\n\n  <a\n    ng-click="$ctrl.logout()"\n    class="feed_dropdown-item feed_dropdown-item--link"\n  >Sign out</a>\n\n  <a\n    ng-if="$ctrl.can(\'view_activity_stream_firehose\')"\n    href="/firehose"\n    class="feed_dropdown-item feed_dropdown-item--link"\n  >Firehose</a>\n\n  <a\n    ng-if="$ctrl.can(\'manage_messages\')"\n    href="/messages/all"\n    class="feed_dropdown-item feed_dropdown-item--link"\n  >MsgSnoop</a>\n\n  <a\n    ng-if="$ctrl.can(\'impersonate\')"\n    ng-click="$ctrl.impersonate_user()"\n    class="feed_dropdown-item feed_dropdown-item--link"\n  >Impersonate Another User</a>\n  <modal-window ng-if="$ctrl.impersonating">\n    <p><b>Hang tight!</b> We\'re trying to log you in to the account you specified...</p>\n  </modal-window>\n\n  <a\n    ng-if="$ctrl.can(\'remove_asset\')"\n    ng-click="$ctrl.remove_asset()"\n    class="feed_dropdown-item feed_dropdown-item--link"\n  >Remove Asset</a>\n\n  <a\n    ng-if="$ctrl.can(\'view_rate_limits\')"\n    href="/rate_limits"\n    class="feed_dropdown-item feed_dropdown-item--link"\n  >View Rate Limits</a>\n\n  <a\n    ng-if="$ctrl.can(\'view_penalties\')"\n    href="/penalties"\n    class="feed_dropdown-item feed_dropdown-item--link"\n  >View Penalties</a>\n\n  <a\n    ng-if="$ctrl.can(\'search_user_aliases\')"\n    ng-click="$ctrl.search_user_aliases()"\n    class="feed_dropdown-item feed_dropdown-item--link"\n  >Search User Aliases</a>\n\n  <a\n    ng-if="$ctrl.can(\'manage_incoming_emails\')"\n    href="/incoming_emails/manage"\n    class="feed_dropdown-item feed_dropdown-item--link"\n  >Manage Incoming Emails</a>\n\n  <a\n    ng-if="$ctrl.can(\'view_probably_spam_songs\')"\n    href="/songs/probably_spam"\n    class="feed_dropdown-item feed_dropdown-item--link"\n  >View Probably Spam Songs</a>\n\n  <div ng-if="$ctrl.can(\'view_chartbeat\')">\n    <a\n      href="/chartbeat"\n      class="feed_dropdown-item feed_dropdown-item--link"\n    >View Chartbeat</a>\n\n    <a\n      href="/chartbeat?bigboard=1"\n      class="feed_dropdown-item feed_dropdown-item--link"\n    >View Chartbeat Top Pages</a>\n\n    <a\n      href="/chartbeat?ios=1"\n      class="feed_dropdown-item feed_dropdown-item--link"\n    >View iOS Chartbeat</a>\n  </div>\n\n  <div ng-if="$ctrl.loading" class="local_overlay">\n    <placeholder-spinner></placeholder-spinner>\n  </div>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("header_auth.html",'<div class="header-actions">\n  <a\n    href="/signup"\n    class="header-action"\n    ng-class="{\'header-action--active\': $ctrl.prompt_auth === \'signing_up\'}"\n    ng-click="$ctrl.prompt_auth = \'signing_up\'"\n    prevent-default-click="true"\n  >Sign Up</a>\n  <a\n    href="/login"\n    class="header-action header-action--sign_in"\n    ng-class="{\'header-action--active\': $ctrl.prompt_auth === \'signing_in\'}"\n    ng-click="$ctrl.prompt_auth = \'signing_in\'"\n    prevent-default-click="true"\n  >Sign In</a>\n</div>\n\n<modal-window\n  ng-if="$ctrl.prompt_auth"\n  on-close="$ctrl.prompt_auth = false"\n  variants="{narrow_width: true}"\n>\n  <authentication-form signing-in="$ctrl.prompt_auth === \'signing_in\'"></authentication-form>\n</modal-window>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("header_menu_item.html",'<li class="nav_menu-item" click-outside="opened = false" ng-if="!url">\n  <a ng-click="opened = !opened" class="nav_menu-link nav_menu-link--has_dropdown" ng-class="{pressed: opened}">{{ name }}</a>\n  <div ng-transclude ng-show="opened"></div>\n</li>\n\n<li class="nav_menu-item" ng-if="url">\n  <a class="nav_menu-link" ng-href="{{ url }}">{{ name }}</a>\n</li>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("header_with_cover_art.html",'<div\n  class="header_with_cover_art"\n  ng-class="{\'header_with_cover_art--fade_in_background\': $ctrl.header_image_url}"\n  clipped-background-image="$ctrl.header_image_url"\n  clipped-background-image-width-increment="10"\n>\n  <div class="header_with_cover_art-inner column_layout">\n    <div\n      class="column_layout-column_span"\n      ng-class="{\n        \'column_layout-column_span--primary\': !$ctrl.variants.wide_primary_column,\n        \'column_layout-column_span--three_quarter column_layout-column_span--force_padding\': $ctrl.variants.wide_primary_column\n      }"\n    >\n      <pyong-button\n        for-header\n        type="{{$ctrl.type}}"\n        object="$ctrl.object"\n        on-unauthorized="$ctrl.prompt_auth = true"\n        variants="{\n          tooltip_position: \'bottom left\',\n          far_hang: $ctrl.cover_arts.length > 1\n        }"\n      ></pyong-button>\n      <modal-window ng-if="$ctrl.prompt_auth" on-close="$ctrl.prompt_auth = false" variants="{narrow_width: true}">\n        <authentication-form></authentication-form>\n      </modal-window>\n\n      <div\n        class="header_with_cover_art-cover_art show_tiny_edit_button_on_hover"\n        ng-class="{\n          \'header_with_cover_art-cover_art--large\': $ctrl.variants.large_cover_art,\n          \'header_with_cover_art-cover_art--annotated\': $ctrl.cover_arts.length\n        }"\n      >\n        <a\n          ng-if="$ctrl.cover_arts.length"\n          ng-href="{{$ctrl.cover_arts[0].url}}"\n        >\n          <div\n            ng-repeat="cover_art in $ctrl.cover_arts | limitTo:3 track by cover_art.id"\n            class="cover_art"\n            ng-class="{\'u-absolute\': !$first}"\n          >\n            <img\n              class="cover_art-image"\n              sized-src="cover_art.image_url"\n              class-for-browser="{msie: \'cover_art-image_ie\', _default: \'cover_art-image\'}"\n            ></img>\n            <div ng-if="$first" class="cover_art-cta">\n              <svg src="expand.svg" class="u-quarter_horizontal_margins inline_icon inline_icon--white inline_icon--small_reading_size inline_icon--up_1"></svg>\n              {{$ctrl.cover_art_cta_text()}}\n            </div>\n          </div>\n        </a>\n\n        <div ng-if="!$ctrl.cover_arts.length" class="cover_art">\n          <img\n            class="cover_art-image"\n            sized-src="$ctrl.cover_art_url"\n            class-for-browser="{msie: \'cover_art-image_ie\', _default: \'cover_art-image\'}"\n          ></img>\n        </div>\n\n        <div\n          class="tiny_edit_button"\n          ng-if="$ctrl.can_edit"\n          ng-click="$ctrl.on_edit()"\n          stop-propagation="click"\n        >\n          <svg src="pencil.svg" class="tiny_edit_button-svg"></svg>\n        </div>\n      </div>\n\n      <div class="header_with_cover_art-primary_info_container">\n        <div class="header_with_cover_art-primary_info">\n          <div ng-if="$ctrl.variants.type_label" class="text_label text_label--yellow text_label--x_small_text_size u-small_bottom_margin">{{$ctrl.variants.type_label}}</div>\n          <h1\n            class="header_with_cover_art-primary_info-title"\n            ng-class="{\'header_with_cover_art-primary_info-title--white\': $ctrl.variants.white_title}"\n          >\n            {{$ctrl.titleLabel}}\n            <svg ng-if="$ctrl.has_instagram_reels" src="instagram_reels.svg" class="inline_icon inline_icon--verified inline_icon--small_reading_size inline_icon--up_3"></svg>\n          </h1>\n          <h2>\n            <span tether-drop-target>\n              <a\n                ng-href="{{$ctrl.artist.url}}"\n                class="header_with_cover_art-primary_info-primary_artist"\n              >{{$ctrl.artist.name}}</a>\n              <tether-drop show-on="hover">\n                <artist-tooltip artist="$ctrl.artist"></artist-tooltip>\n              </tether-drop>\n            </span>\n          </h2>\n          <ng-transclude ng-transclude-slot="metadata"></ng-transclude>\n        </div>\n      </div>\n      <song-verified-artists\n        ng-if="$ctrl.verified_contributors"\n        verified-contributors="$ctrl.verified_contributors"\n      ></song-verified-artists>\n    </div>\n    <div\n      class="column_layout-column_span"\n      ng-class="{\n        \'column_layout-column_span--secondary\': !$ctrl.variants.wide_primary_column,\n        \'column_layout-column_span--one_quarter\': $ctrl.variants.wide_primary_column\n      }"\n    >\n      <ng-transclude ng-transclude-slot="secondary"></ng-transclude>\n    </div>\n  </div>\n</div>\n\n<cover-art-modal\n  ng-if="$ctrl.focused_cover_art_id"\n  focused-cover-art-id="$ctrl.focused_cover_art_id"\n  close="$ctrl.close_cover_art_modal()"\n  cover-artable="$ctrl.object"\n  tiny-cover-arts="$ctrl.cover_arts"\n  type="album"\n></cover-art-modal>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("hidden_fields.html",'<div ng-switch="$ctrl.type">\n  <hidden-fields ng-switch-when="object" ng-repeat="(key, value) in $ctrl.value track by key" key="{{$ctrl.key + \'[\' + key + \']\'}}" value="value"></hidden-fields>\n  <hidden-fields ng-switch-when="array" ng-repeat="value in $ctrl.value track by $index" key="{{$ctrl.key + \'[]\'}}" value="value"></hidden-fields>\n  <input ng-switch-when="constant" type="hidden" name="{{$ctrl.key}}" value="{{$ctrl.value}}">\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("hide_song_form.html",'<modal-window on-close="on_close()">\n  <role-selection-dialog\n    save="ctrl.save(selected_roles)"\n    error="error"\n    prompt="Select who should be able to see this song"\n    saving="ctrl.saving"\n  ></role-selection-dialog>\n</modal-window>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("image_upload_button.html",'<div click-outside="$ctrl.tooltip_opened = false" class="image_upload_button-container">\n  <div\n    class="image_upload_button"\n    ng-class="{\'image_upload_button--avatar\': $ctrl.variants.avatar, \'image_upload_button--active\': $ctrl.tooltip_opened}"\n    clipped-background-image="$ctrl.default_image"\n    ng-click="$ctrl.pick_image_for_artist(\'COMPUTER\')"\n  >\n    <svg src="upload_image.svg" class="inline_icon inline_icon--large_reading_size inline_icon--white"></svg>\n  </div>\n  <div\n    ng-if="$ctrl.allow_clear"\n    ng-click="$ctrl.on_clear()"\n    confirm="{{$ctrl.clear_confirm || \'Are you sure you want to delete this image?\'}}"\n    class="image_upload_button-clear u-clickable"\n  >\n    <svg\n      src="x.svg"\n      class="inline_icon inline_icon--short inline_icon--gray"\n    ></svg>\n  </div>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("inbox.html",'<div class="feed_dropdown-header">\n  <span class="text_label">{{:: \'header.\' + $ctrl.inbox_name | i18n }}</span>\n</div>\n<div infinite-scroll="$ctrl.load_next_page()" infinite-scroll-disabled="!$ctrl.should_paginate()">\n  <div ng-repeat="line_item in $ctrl.line_items track by line_item.event_ids">\n    <inbox-line-item inbox-name=":: $ctrl.inbox_name" object=":: line_item" eager-load-details="$first && $ctrl.opened"></inbox-line-item>\n  </div>\n  <placeholder-spinner ng-if="!$ctrl.done_loading" placeholder-classes="feed_dropdown-item"></placeholder-spinner>\n\n  <div ng-if="$ctrl.done_loading && !$ctrl.line_items.length" class="feed_dropdown-item feed_dropdown-item--active">\n    No notifications\n  </div>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("inbox_container.html",'<inbox-icon\n  ng-click="$ctrl.opened_once = true; $ctrl.open_inboxes[$ctrl.inbox_name] = !$ctrl.open_inboxes[$ctrl.inbox_name]"\n  stop-propagation="click"\n  inbox-name="{{$ctrl.inbox_name}}"\n  opened="$ctrl.open_inboxes[$ctrl.inbox_name]"\n  sync-count-to-title="$ctrl.sync_count_to_title"\n  abbreviate-after="$ctrl.abbreviate_after"\n  yields-api="$ctrl.unread_count_api = api"\n></inbox-icon>\n\n<div\n  class="feed_dropdown"\n  ng-if="$ctrl.opened_once"\n  ng-show="$ctrl.open_inboxes[$ctrl.inbox_name]"\n  click-outside="$ctrl.open_inboxes[$ctrl.inbox_name] = false"\n  stop-propagation="click"\n  scroll-only-this-element=""\n>\n  <iq-inbox\n    ng-if="$ctrl.use_iq_inbox"\n    opened="$ctrl.open_inboxes[$ctrl.inbox_name]"\n    clear-unread-count="$ctrl.unread_count_api.clear()"\n  ></iq-inbox>\n  <messages-inbox\n    ng-if="$ctrl.use_messages_inbox"\n    opened="$ctrl.open_inboxes[$ctrl.inbox_name]"\n    decrement-unread-count="$ctrl.unread_count_api.decrement(unread_messages_count)"\n  ></messages-inbox>\n  <inbox\n    ng-if="!$ctrl.use_messages_inbox && !$ctrl.use_iq_inbox"\n    inbox-name="{{$ctrl.inbox_name}}"\n    opened="$ctrl.open_inboxes[$ctrl.inbox_name]"\n    clear-unread-count="$ctrl.unread_count_api.clear()"\n  ></inbox>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("inbox_icon.html",'<span class="header-action" ng-class="{\'header-action--active\': $ctrl.opened}">\n  <span class="header-action-icon header-action-icon--{{ $ctrl.inbox_name }}"></span>\n  <span class="header-action-label">{{ \'header.\' + $ctrl.inbox_name | i18n }}</span>\n  <span ng-if="$ctrl.unread_count" class="header-action-count numbered_indicator numbered_indicator--pink_filled">{{ $ctrl.unread_count | boundedCount:$ctrl.abbreviate_after }}</span>\n</span>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("inbox_line_item.html",'<div\n  class="feed_dropdown-item"\n  ng-class="{\n    \'feed_dropdown-item--unread\': line_item.unread && !variants.active_display,\n    \'feed_dropdown-item--active\': ctrl.state.show_details || variants.active_display\n  }"\n  ng-click="ctrl.toggle_visible()"\n>\n  <div class="inbox_line_item">\n    <div class="inbox_line_item-avatars">\n      <div\n        class="user_avatar user_avatar--medium"\n        ng-class=":: {\'inbox_line_item-avatars-stacked_avatar--over\': line_item.actor_avatars.length > 1}"\n        clipped-background-image=":: line_item.actor_avatars[0].small.url"\n      ></div>\n      <div\n        class="user_avatar user_avatar--medium inbox_line_item-avatars-stacked_avatar--under"\n        ng-if=":: line_item.actor_avatars.length > 1"\n        clipped-background-image=":: line_item.actor_avatars[1].thumb.url"\n      ></div>\n    </div>\n    <div class="inbox_line_item-action">\n      <div class="inbox_line_item-action-center">\n        <div class="feed_dropdown-item-unread_indicator numbered_indicator" ng-if=":: line_item.event_ids.length > 1" ng-class="{\'numbered_indicator--gray\': !line_item.unread}">\n          {{:: line_item.event_ids.length > ctrl.max_line_item_event_count && ctrl.truncate_line_item_event_count ? ctrl.max_line_item_event_count + \'+\' : line_item.event_ids.length }}\n        </div>\n        <inbox-line-item-action-icon action-name="line_item.action_name"></inbox-line-item-action-icon>\n        <div\n          ng-if=":: line_item.iq_gained"\n          class="inbox_line_item-action-iq_difference text_label"\n          ng-class=":: {\n            \'text_label--red\': line_item.iq_gained < 0,\n            \'text_label--green\': line_item.iq_gained > 0\n          }"\n        >{{:: (line_item.iq_gained | signed_number) }}</div>\n      </div>\n    </div>\n    <div class="inbox_line_item-content inbox_line_item-content--emphasized_title">\n      <inbox-line-item-message\n        template="ctrl.message_template"\n        key="ctrl.message_components.key"\n        params="ctrl.message_components.params"\n        state="ctrl.state"\n      ></inbox-line-item-message>\n    </div>\n    <div class="inbox_line_item-timestamp">\n      <time-ago time=":: line_item.timestamp"></time-ago>\n    </div>\n  </div>\n</div>\n\n<div\n  ng-if="ctrl.state.load_details"\n  ng-show="ctrl.state.show_details"\n  class="feed_dropdown-expanded_section"\n>\n  <inbox-line-item-detail\n    ng-if="ctrl.formation && ctrl.line_item_detail"\n    line-item-detail="ctrl.line_item_detail"\n    formation="ctrl.formation"\n  ></inbox-line-item-detail>\n\n  <div class="u-vertical_margins" ng-if="!ctrl.iframe_loaded && !ctrl.line_item_detail">\n    <placeholder-spinner></placeholder-spinner>\n  </div>\n\n  <iframe\n    ng-if=":: !ctrl.formation"\n    on-load="ctrl.iframe_loaded = true"\n    auto-resize-iframe\n    ng-src="{{:: details_url}}"\n    class="feed_dropdown-expanded_section-legacy_iframe_content"\n  ></iframe>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("inbox_line_item_action_icon.html",'<div ng-switch=":: action_name">\n  <svg ng-switch-when="upvoted" src="thumbs_up.svg" class="inline_icon inline_icon--green"></svg>\n  <svg ng-switch-when="downvoted" src="thumbs_down.svg" class="inline_icon inline_icon--red"></svg>\n  <svg ng-switch-when="replied_to" src="comment.svg" class="inline_icon inline_icon--gray"></svg>\n  <svg ng-switch-when="added_a_suggestion_to" src="comment.svg" class="inline_icon inline_icon--gray"></svg>\n  <svg ng-switch-when="mentioned" src="at_symbol.svg" class="inline_icon inline_icon--gray"></svg>\n  <svg ng-switch-when="posted_in" src="pin.svg" class="inline_icon inline_icon--gray"></svg>\n  <svg ng-switch-when="pinned" src="pin.svg" class="inline_icon inline_icon--green"></svg>\n  <svg ng-switch-when="unpinned" src="pin.svg" class="inline_icon inline_icon--red"></svg>\n  <svg ng-switch-when="created" src="blockquote.svg" class="inline_icon inline_icon--gray"></svg>\n  <svg ng-switch-when="pyonged" src="lightning.svg" class="inline_icon inline_icon--gray"></svg>\n  <svg ng-switch-when="edited" src="pencil.svg" class="inline_icon inline_icon--gray"></svg>\n  <svg ng-switch-when="edited_the_lyrics_of" src="pencil.svg" class="inline_icon inline_icon--gray"></svg>\n  <svg ng-switch-when="edited_the_metadata_of" src="pencil.svg" class="inline_icon inline_icon--gray"></svg>\n  <svg ng-switch-when="proposed_an_edit_to" src="pencil.svg" class="inline_icon inline_icon--gray"></svg>\n  <svg ng-switch-when="accepted" src="checkmark.svg" class="inline_icon inline_icon--green"></svg>\n  <svg ng-switch-when="archived" src="checkmark.svg" class="inline_icon inline_icon--green"></svg>\n  <svg ng-switch-when="rejected" src="x.svg" class="inline_icon inline_icon--red"></svg>\n  <svg ng-switch-when="deleted" src="x.svg" class="inline_icon inline_icon--red"></svg>\n  <svg ng-switch-when="marked_as_spam" src="x.svg" class="inline_icon inline_icon--red"></svg>\n  <svg ng-switch-when="followed" src="eye.svg" class="inline_icon inline_icon--gray"></svg>\n  <svg ng-switch-when="are_commanded_to_follow" src="eye.svg" class="inline_icon inline_icon--gray"></svg>\n  <svg ng-switch-when="added_a_photo" src="eye.svg" class="inline_icon inline_icon--gray"></svg>\n  <svg ng-switch-when="cosigned" src="checky.svg" class="inline_icon checky"></svg>\n  <svg ng-switch-when="verified_the_lyrics_of" src="checky.svg" class="inline_icon checky"></svg>\n  <svg ng-switch-when="unverified_the_lyrics_of" src="x.svg" class="inline_icon inline_icon--red"></svg>\n  <svg ng-switch-when="locked" src="lock.svg" class="inline_icon inline_icon--gray"></svg>\n  <svg ng-switch-when="unpublished" src="eye_cross.svg" class="inline_icon inline_icon--gray"></svg>\n  <svg ng-switch-when="integrated" src="checkmark.svg" class="inline_icon inline_icon--green"></svg>\n  <svg ng-switch-when="transcribered" src="up_arrow.svg" class="inline_icon inline_icon--green"></svg>\n  <svg ng-switch-when="made_an_editor_out_of" src="up_arrow.svg" class="inline_icon inline_icon--green"></svg>\n  <svg ng-switch-when="made_a_moderator_out_of" src="up_arrow.svg" class="inline_icon inline_icon--green"></svg>\n  <svg ng-switch-when="staffed" src="up_arrow.svg" class="inline_icon inline_icon--green"></svg>\n  <svg ng-switch-when="mediatored" src="up_arrow.svg" class="inline_icon inline_icon--green"></svg>\n  <svg ng-switch-when="made_an_educator_out_of" src="up_arrow.svg" class="inline_icon inline_icon--green"></svg>\n  <svg ng-switch-when="de-modded" src="down_arrow.svg" class="inline_icon inline_icon--red"></svg>\n  <svg ng-switch-when="de-staffed" src="down_arrow.svg" class="inline_icon inline_icon--red"></svg>\n  <svg ng-switch-when="accepted_the_invitation" src="envelope.svg" class="inline_icon inline_icon--gray"></svg>\n  <svg ng-switch-when="invited" src="envelope.svg" class="inline_icon inline_icon--gray"></svg>\n  <svg ng-switch-when="unlocked" src="unlock.svg" class="inline_icon inline_icon--gray"></svg>\n  <svg ng-switch-when="moved" src="right_arrow.svg" class="inline_icon inline_icon--gray"></svg>\n  <svg ng-switch-when="marked" src="circle.svg" class="inline_icon inline_icon--purple"></svg>\n  <svg ng-switch-when="incorporated" src="two_documents.svg" class="inline_icon inline_icon--green"></svg>\n  <svg ng-switch-when="merged" src="two_documents.svg" class="inline_icon inline_icon--green"></svg>\n  <svg ng-switch-when="recognized" src="one_document.svg" class="inline_icon inline_icon--green"></svg>\n  <svg ng-switch-when="marked_complete" src="checkmark.svg" class="inline_icon inline_icon--green"></svg>\n  <svg ng-switch-when="unmarked_complete" src="x.svg" class="inline_icon inline_icon--red"></svg>\n  <svg ng-switch-when="marked_as_high_transcription_priority" src="up_arrow.svg" class="inline_icon inline_icon--green"></svg>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("inbox_line_item_detail/actions.html",'<div\n  ng-repeat="action in $ctrl.detail.actions track by $index"\n  ng-class="{\'u-bottom_margin\': !$last}"\n>\n  <inbox-line-item-detail-object\n    object="action"\n    variants="{deleted: $ctrl.detail.action_name === \'deleted\'}"\n  ></inbox-line-item-detail-object>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("inbox_line_item_detail/actors.html",'<div class="gray_container">\n  <div\n    class="inbox_line_item_detail-actor"\n    ng-repeat="user in $ctrl.detail.actors track by user.id"\n  >\n    <inbox-line-item-action-icon action_name=":: $ctrl.detail.action_name"></inbox-line-item-action-icon>\n    <user-badge-and-timestamp\n      size="x_small"\n      user=":: user"\n      time=":: $ctrl.detail.timestamp"\n      class="u-flex_directive"\n    ></user-badge-and-timestamp>\n  </div>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("inbox_line_item_detail/annotations_with_comments.html",'<div\n  ng-repeat="target in $ctrl.detail.targets track by $index"\n  ng-class="{\'u-bottom_margin\': !$last}"\n>\n  <standalone-referent object=":: target" focused-comments="$ctrl.detail.actions"></standalone-referent>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("inbox_line_item_detail/annotations_with_rejection_comments.html",'<div\n  ng-repeat="target in $ctrl.detail.targets track by $index"\n  ng-class="{\'u-bottom_margin\': !$last}"\n>\n  <standalone-referent object=":: target" focused-comments="target.rejection_comments"></standalone-referent>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("inbox_line_item_detail/context.html",'<inbox-line-item-detail-object\n  object="$ctrl.detail.context"\n  variants="{deleted: $ctrl.detail.action_name === \'deleted\'}"\n></inbox-line-item-detail-object>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("inbox_line_item_detail/context_commentable.html",'<div ng-if="$ctrl.detail.context._type === \'comment\'">\n  <inbox-line-item-detail-object object="$ctrl.detail.context.commentable"></inbox-line-item-detail-object>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("inbox_line_item_detail/lyrics_diffs.html",'<div\n  ng-repeat="lyrics_diff in $ctrl.lyrics_diffs track by $index"\n  ng-class="{\'u-bottom_margin\': !$last}"\n>\n  <inbox-line-item-detail-lyrics-diff\n    before="lyrics_diff.before"\n    after="lyrics_diff.after"\n    state="lyrics_diff.state"\n  ></inbox-line-item-detail-lyrics-diff>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("inbox_line_item_detail/lyrics_edit_acceptor.html",'<div ng-if="$ctrl.detail.metadata[0].lyrics_edit_acceptor" class="gray_container">\n  <div class="inbox_line_item_detail-actor">\n    <inbox-line-item-action-icon action_name="\'accepted\'"></inbox-line-item-action-icon>\n    <user-badge-and-timestamp\n      size="x_small"\n      user=":: $ctrl.detail.metadata[0].lyrics_edit_acceptor"\n      time=":: $ctrl.detail.timestamp"\n      class="u-flex_directive"\n    ></user-badge-and-timestamp>\n  </div>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("inbox_line_item_detail/lyrics_edit_archive_info.html","<div class=\"gray_container rich_text_formatting\">\n  The lyrics have changed significantly since your edit{{$ctrl.detail.targets.length > 1 ? 's' : ''}}, and the lyrics you proposed changing no longer appear on the page. Try reviewing the current lyrics and proposing another edit.\n</div>\n")}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("inbox_line_item_detail/merged_artist.html",'<div class="gray_container">\n  Merged {{$ctrl.detail.metadata[0].artist_name_at_time_of_merge}} (Artist ID: {{$ctrl.detail.targets[0].id}})\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("inbox_line_item_detail/metadata_changes.html",'<div\n   ng-repeat="metadata in $ctrl.detail.metadata track by $index"\n   ng-class="{\'u-bottom_margin\': !$last}"\n>\n  <div\n    ng-repeat="(attribute, changes) in metadata.changes track by attribute"\n    ng-class="{\'u-bottom_margin\': !$last}"\n    class="gray_container"\n  >\n    <div class="text_label text_label--gray u-half_bottom_margin">{{attribute}}</div>\n    <div>Before:</div>\n    <div class="rich_text_formatting" ng-bind-html="changes[0]"></div>\n    <div>After:</div>\n    <div class="rich_text_formatting" ng-bind-html="changes[1]"></div>\n  </div>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("inbox_line_item_detail/targets.html",'<div\n  ng-repeat="target in $ctrl.detail.targets track by $index"\n  ng-class="{\'u-bottom_margin\': !$last}"\n>\n  <inbox-line-item-detail-object\n    object="target"\n    variants="{deleted: $ctrl.detail.action_name === \'deleted\'}"\n  ></inbox-line-item-detail-object>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("inbox_line_item_detail/user_acted_on_user.html",'<div\n  class="user_acts_on_user"\n  ng-repeat="target in $ctrl.detail.targets track by $index"\n  ng-class="{\'u-bottom_margin\': !$last}"\n>\n  <div class="user_acts_on_user-user u-half_horizontal_margins">\n    <user-badge variants="::{show_user_role: true}" size="medium" object=":: $ctrl.detail.actors[0]"></user-badge>\n  </div>\n  <div class="user_acts_on_user-user u-half_horizontal_margins">\n    <user-badge variants="::{show_user_role: true}" size="medium" object=":: target"></user-badge>\n  </div>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("inbox_line_item_detail_discussion.html",'<div class="inbox_line_item_detail_forum_post">\n  <inbox-line-item-detail-discussion-header discussion="$ctrl.discussion"></inbox-line-item-detail-discussion-header>\n\n  <span\n    ng-if="$ctrl.has_next() && !$ctrl.loading"\n    ng-click="$ctrl.load_more()"\n    class="text_label text_label--purple text_label--button text_label--x_small_text_size"\n  >\n    Load older replies\n  </span>\n  <div class="u-bottom_margin">\n    <placeholder-spinner ng-if="$ctrl.loading"></placeholder-spinner>\n  </div>\n\n  <inbox-line-item-detail-forum-post-single\n    ng-repeat="forum_post in $ctrl.forum_posts | orderBy:\'-\' track by forum_post.id"\n    forum-post="forum_post"\n  ></inbox-line-item-detail-forum-post-single>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("inbox_line_item_detail_discussion_header.html",'<div class="inbox_line_item_detail_forum_post-titles">\n  <div class="inbox_line_item_detail_forum_post-titles-post_title">\n    <a ng-href="{{:: $ctrl.discussion.url }}">\n      {{:: $ctrl.discussion.title }}\n    </a>\n  </div>\n  <div>\n    <a\n      ng-href="{{:: $ctrl.discussion.group.url }}"\n      class="text_label text_label--gray text_label--x_small_text_size"\n    >{{:: $ctrl.discussion.group.name }}</a>\n  </div>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("inbox_line_item_detail_forum_post.html",'<div class="inbox_line_item_detail_forum_post">\n  <inbox-line-item-detail-discussion-header discussion="$ctrl.forum_post.discussion"></inbox-line-item-detail-discussion-header>\n  <inbox-line-item-detail-forum-post-single forum-post="$ctrl.forum_post"></inbox-line-item-detail-forum-post-single>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("inbox_line_item_detail_forum_post_single.html",'<div class="inbox_line_item_detail_forum_post-body_container u-top_margin">\n  <user-badge-and-timestamp\n    size="medium"\n    variants="::{show_user_role: true}"\n    user=":: $ctrl.forum_post.author"\n    time=":: $ctrl.forum_post.created_at"\n  ></user-badge-and-timestamp>\n\n  <standard-rich-content\n    ng-if="$ctrl.forum_post.body"\n    html="$ctrl.forum_post.body.html"\n  ></standard-rich-content>\n  <div\n    ng-if="!$ctrl.forum_post.body"\n    class="rich_text_formatting rich_text_formatting--small rich_text_formatting--no_vertical_margins"\n  >\n    <p>{{ $ctrl.forum_post.deleted_body | i18n }}</p>\n  </div>\n\n  <div class="u-top_margin">\n    <voting\n      type="forum_post"\n      object="$ctrl.forum_post"\n      variants="{\'hide_upvote_text\': true}"\n    ></voting>\n  </div>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("inbox_line_item_detail_lyrics_diff.html",'<div class="gray_container">\n  <div\n    ng-if="$ctrl.state"\n    class="text_label u-half_bottom_margin"\n  >{{$ctrl.state}}</div>\n  <div class="lyrics lyrics--no_margin">\n    <expandable-diff html="$ctrl.diff_html"></expandable-diff>\n  </div>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("inbox_line_item_detail_object.html",'<div ng-switch="$ctrl.object._type">\n  <div ng-switch-when="referent">\n    <standalone-referent object=":: $ctrl.object"></standalone-referent>\n  </div>\n\n  <inbox-line-item-detail-forum-post object=":: $ctrl.object" ng-switch-when="forum_post"></inbox-line-item-detail-forum-post>\n\n  <inbox-line-item-detail-discussion object=":: $ctrl.object" ng-switch-when="discussion"></inbox-line-item-detail-discussion>\n\n  <mini-song-card object=":: $ctrl.object" ng-switch-when="song"></mini-song-card>\n\n  <mini-album-card object=":: $ctrl.object" ng-switch-when="album"></mini-album-card>\n\n  <mini-video-card object=":: $ctrl.object" ng-switch-when="video"></mini-video-card>\n\n  <mini-article-card object=":: $ctrl.object" ng-switch-when="article"></mini-article-card>\n\n  <mini-artist-card object=":: $ctrl.object" ng-switch-when="artist"></mini-artist-card>\n\n  <div ng-switch-when="question" class="gray_container">\n    <question question=":: $ctrl.object" variants="{link: true}"></question>\n  </div>\n\n  <div ng-switch-when="answer">\n    <deleted-answer ng-if="$ctrl.variants.deleted" answer=":: $ctrl.object"></deleted-answer>\n    <div ng-if="!$ctrl.variants.deleted" class="gray_container">\n      <question question=":: $ctrl.object.question" variants="{link: true}"></question>\n    </div>\n  </div>\n\n  <div ng-switch-when="cover_art">\n    <a ng-href="{{$ctrl.object.url}}">\n      <img sized-src="$ctrl.object.image_url">\n    </a>\n  </div>\n\n  <div ng-switch-when="comment" class="gray_container">\n    <comment\n      object=":: $ctrl.object"\n      variants="{first_element_in_container: true, only_delete: true}"\n    ></comment>\n  </div>\n\n  <div ng-switch-when="annotation_edit" class="gray_container">\n    <annotation-edit\n      object=":: $ctrl.object"\n      before-html="$ctrl.object.annotation_before.body.html"\n    ></annotation-edit>\n  </div>\n\n  <div ng-switch-when="group">\n    <a ng-href="{{$ctrl.object.url}}" class="mini_card">\n      <div\n        class="mini_card-thumbnail clipped_background_image--background_fill"\n        clipped-background-image="$ctrl.object.image_url"\n      ></div>\n\n      <div class="mini_card-info">\n        <div class="mini_card-title_and_subtitle">\n          <div class="mini_card-title">{{$ctrl.object.name}}</div>\n        </div>\n      </div>\n    </a>\n  </div>\n\n  <div ng-switch-when="web_page">\n    <a ng-href="{{$ctrl.object.url}}">{{$ctrl.object.title}}</a>\n  </div>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("inbox_line_items/generic.html",'<span ng-bind-html=":: $ctrl.key | genericLineItemMessage:$ctrl.params"></span>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("inbox_line_items/pyong.html",'<span>\n  {{:: $ctrl.params.actors }}\n  {{:: $ctrl.params.verb }}\n  <span ng-bind-html=":: $ctrl.params.target"></span>\n  <span ng-bind-html=":: $ctrl.params.context"></span>\n\n  <span ng-if=":: $ctrl.params.note">\n    <span ng-if="!$ctrl.state.show_details" class=\'inbox_line_item-content-note note_bubble\' ng-bind-html=":: $ctrl.params.note | richContentPreview"></span>\n    <span ng-if="$ctrl.state.show_details" class=\'inbox_line_item-content-note note_bubble\' ng-bind-html=":: $ctrl.params.note"></span>\n  </span>\n</span>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("iq_inbox.html",'<div class="u-horizontal_margins u-vertical_margins">\n  <span class="text_label text_label--gray u-half_left_margin">\n    IQ Opportunities\n  </span>\n\n  <div ng-if="$ctrl.show_explanation" class="feed_dropdown-notice feed_dropdown-notice--fill_full_space">\n    <div class="feed_dropdown-notice-header">\n      <span class="feed_dropdown-notice-header-title">What\'s this?</span>\n      <svg\n        src="x.svg"\n        class="u-clickable inline_icon inline_icon--white inline_icon--reading_size"\n        ng-click="$ctrl.dismiss_explanation()"\n      ></svg>\n    </div>\n    <div class="rich_text_formatting">\n      <p>The Earn IQ feed provides an ongoing stream of IQ opportunities personalized just for you based on artists you follow or have contributed to. You can find questions to answer, metadata to fill in, and more that will all help boost your IQ. Want more opportunities? Follow more artists!</p>\n    </div>\n  </div>\n\n  <div\n    ng-repeat="assignment in $ctrl.assignments track by assignment.id"\n    class="nganimate-fade_slide_from_left nganimate-short_stagger nganimate-fade_slide_out_right"\n  >\n    <contribution-opportunity\n      contribution-opportunity="assignment.contribution_opportunity"\n      assignment="assignment"\n      on-dismiss="$ctrl.remove(assignment)"\n      source="iq_inbox"\n    ></contribution-opportunity>\n  </div>\n\n  <placeholder-spinner ng-if="!$ctrl.loaded"></placeholder-spinner>\n  <div\n    ng-if="$ctrl.loaded && !$ctrl.assignments.length"\n    class="u-half_left_margin u-top_margin"\n  >No IQ opportunities.</div>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("iq_notification_list.html",'<div class="iq_notification_list">\n  <div\n    class="iq_notification_list-list_item nganimate-fade_slide_from_left nganimate-fade_out nganimate-stagger"\n    ng-repeat="notification in $ctrl.notifications track by $id(notification)"\n    ng-switch=":: notification._type"\n  >\n    <div ng-switch-when="activity_stream/line_item" class="iq_notification">\n      <div\n        class="iq_notification-action"\n        ng-class=":: {\'iq_notification-action--positive\': notification.iq_gained > 0, \'iq_notification-action--negative\': notification.iq_gained < 0}"\n      >\n        <inbox-line-item-action-icon action-name=":: notification.action_name">\n        </inbox-line-item-action-icon>\n        <div>{{:: notification.iq_gained | signed_number }} IQ</div>\n      </div>\n      <div class="iq_notification-message">\n        <div\n          class="user_avatar user_avatar--x_small"\n          clipped-background-image=":: notification.actor_avatars[0].thumb.url"\n        ></div>\n        <span ng-bind-html=":: notification.message_components.key | genericLineItemMessage:notification.message_components.params"></span>\n      </div>\n    </div>\n\n    <div ng-switch-when="user" class="iq_notification iq_notification--user">\n      <div\n        class="user_avatar user_avatar--small"\n        clipped-background-image=":: $ctrl.user.avatar.thumb.url"\n      ></div>\n      <div class="u-half_left_margin">\n        <odometer value="$ctrl.user.iq" options="{format: \',ddd\'}"></odometer> IQ\n      </div>\n    </div>\n  </div>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("leaderboard.html",'<div class="leaderboard u-half_top_margin">\n  <user-attribution rank="$index + 1" object="leaderboard_row" class="leaderboard-row" ng-class="{\'leaderboard-row--no_border\': $last}" ng-repeat="leaderboard_row in leaderboard_rows track by leaderboard_row.user.id"></user-attribution>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("leaderboard_ad.html",'<div\n  class="leaderboard_ad_placeholder u-vertical_margins"\n  ng-show="$ctrl.should_stick()"\n  ng-style="{\n    width: $ctrl.bounding_client_rect.width,\n    height: $ctrl.bounding_client_rect.height,\n  }"\n></div>\n\n<dfp-ad\n  name="{{ $ctrl.name }}"\n  ad-classes="[\n    \'dfp_unit--centered_billboard\',\n    {\n      \'dfp_unit--sticky\': $ctrl.should_stick(),\n      \'u-vertical_margins\': !$ctrl.empty,\n      \'dfp_unit--sticky_animate\': $ctrl.can_stick() && $ctrl.loaded_when_not_naturally_in_view,\n    }\n  ]"\n  on-filled="$ctrl.on_filled(render_event)"\n></dfp-ad>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("lyrics.html",'<div>\n    <a\n      class="square_button react_song_page_preview_link"\n      href="{{lyrics_ctrl.react_song_page_link}}"\n    >\n      Click here to go to the new song page\n    </a>\n\n  <div\n    class="lyrics_controls"\n    ng-if="can_perform(\'edit_anything\') || can_perform(\'propose_lyrics_edit\')"\n  >\n    <span ng-if="!lyrics_ctrl.saving">\n      <span ng-if="lyrics_ctrl.should_show_full_lyrics_start_edit_button()">\n        <kb shortcut="shift+l" action="lyrics_ctrl.start_editing()"></kb>\n\n        <button\n          ng-click="lyrics_ctrl.start_editing()"\n          ng-disabled="lyrics_ctrl.edit_blocked"\n          title="shortcut: shift+l"\n          class="square_button"\n          ng-class="{\'square_button--disabled\': lyrics_ctrl.edit_blocked}"\n        >Edit Lyrics</button>\n      </span>\n\n      <button\n        ng-click="lyrics_ctrl.start_proposing_edit()"\n        ng-if="lyrics_ctrl.should_show_full_lyrics_start_propose_button()"\n        ng-disabled="lyrics_ctrl.edit_blocked"\n        class="square_button"\n        ng-class="{\'square_button--disabled\': lyrics_ctrl.edit_blocked}"\n      >Edit Lyrics</button>\n\n      <span ng-if="lyrics_ctrl.should_show_full_lyrics_save_cancel_buttons()">\n        <button\n          tabindex="2"\n          ng-click="lyrics_ctrl.lyrics_form.submit()"\n          class="square_button square_button--green"\n          ng-disabled="lyrics_ctrl.editable_lyrics_stale"\n          ng-class="{\'square_button--disabled\': lyrics_ctrl.editable_lyrics_stale}"\n          title="(shift+enter)"\n        >\n          <span ng-if="lyrics_ctrl.editing">Save</span>\n          <span ng-if="lyrics_ctrl.proposing_edit">Propose This Edit</span>\n        </button>\n\n        <button\n          tabindex="3"\n          ng-click="lyrics_ctrl.cancel_edit_or_proposal()"\n          class="square_button"\n        >Cancel</button>\n      </span>\n    </span>\n\n    <button\n      ng-disabled\n      ng-if="lyrics_ctrl.saving"\n      class="square_button square_button--waiting"\n    >\n      <span ng-if="lyrics_ctrl.saving === \'saving_edit\'">Saving</span>\n      <span ng-if="lyrics_ctrl.saving === \'saving_proposal\'">Proposing</span>\n    </button>\n\n    <button\n      ng-disabled="song_ctrl.edit_blocked"\n      ng-if="can_perform(\'edit_anything\')"\n      class="square_button"\n      ng-click="song_ctrl.show_metadata_form(\'title_and_artists\')"\n      stop-propagation="click"\n      ng-hide="lyrics_ctrl.editing || lyrics_ctrl.proposing_edit"\n      title="(shift+a)"\n      ng-disabled="song_ctrl.saving"\n      ng-class="{\'square_button--disabled\': song_ctrl.saving || song_ctrl.edit_blocked}"\n    >Edit Song Facts</button>\n\n    <lyrics-edit-proposal-moderation\n      song="song"\n      lyrics-html="canonical_lyrics_html"\n      on-lyrics-update="lyrics_ctrl.apply_lyrics_update(lyrics_data)"\n      ng-if="can_perform(\'view_lyrics_edit_proposals_on_song\')"\n    ></lyrics-edit-proposal-moderation>\n\n    <song-admin-menu ng-if="user_signed_in" ng-cloak>\n      <additional-buttons>\n        <div\n          ng-if="lyrics_ctrl.should_show_edit_annotation_brackets_button()"\n          ng-click="lyrics_ctrl.start_editing()"\n          class="tooltip-list_item"\n        >Edit Annotation Brackets</div>\n        <lyrics-export-preview song="song"></lyrics-export-preview>\n      </additional-buttons>\n    </song-admin-menu>\n\n    <div\n      ng-if="lyrics_ctrl.edit_proposal_submitted"\n      class="text_label text_label--x_small_text_size text_label--green u-float_right u-half_top_margin"\n    >\n      <svg\n        src="checkmark.svg"\n        class="inline_icon inline_icon--green inline_icon--up_1"\n      />\n      Proposed\n    </div>\n\n    <div\n      ng-if="lyrics_ctrl.errors.length && !lyrics_ctrl.correcting"\n      class="u-top_margin form_message form_message--error form_message--block"\n    >\n      <div class="text_label">{{:: \'lyrics.save_error\' | i18n }}</div>\n      <ul class="u-half_top_margin">\n        <li ng-repeat="error in lyrics_ctrl.errors" ng-bind-html="error"></li>\n        <li ng-if="lyrics_ctrl.edit_blocked">\n          {{:: \'lyrics.reload_instructions\' | i18n }}\n        </li>\n      </ul>\n    </div>\n\n    <div\n      class="u-vertical_margins form_message form_message--error form_message--block"\n      ng-if="lyrics_ctrl.editing && lyrics_ctrl.editable_lyrics_stale"\n      ng-bind=":: \'lyrics.editing_stale\' | i18n"\n    ></div>\n  </div>\n\n  <div\n    class="form_message form_message--notify form_message--block"\n    ng-if="lyrics_ctrl.proposing_edit && song.lyrics_marked_staff_approved_by"\n  >\n    These lyrics have been approved by Staff member <a ng-href="{{ song.lyrics_marked_staff_approved_by.url }}">{{ song.lyrics_marked_staff_approved_by.name }}</a> meaning they are locked and can only be edited by Genius staff, but you can still propose edits.\n  </div>\n\n  <div\n    class="form_message form_message--notify form_message--block"\n    ng-if="lyrics_ctrl.proposing_edit && song.lyrics_marked_complete_by && !song.lyrics_marked_staff_approved_by"\n  >\n    These lyrics have been marked complete by <a ng-href="{{ song.lyrics_marked_complete_by.url }}">{{ song.lyrics_marked_complete_by.name }}</a> meaning they are locked and can only be edited by Transcribers, Editors, Moderators, and Staff, but you can still propose edits. <a ng-href="{{ lyrics_ctrl.transcriber_guide_url }}">Learn more about this process</a>.\n  </div>\n\n  <div\n    class="form_message form_message--error form_message--block"\n    ng-if="lyrics_ctrl.should_show_lyrics_sync_warning()"\n  >\n    Editing the lyrics of a staff approved song will invalidate all of its lyric synchronizations until they\'re manually updated. After saving your changes, please also update the lyrics synchronizations!\n  </div>\n\n  <div class="lyrics">\n    <div ng-if="!lyrics_ctrl.editing && !canonical_lyrics_html">\n      <span ng-if="song.lyrics_state === \'unreleased\'">\n        {{:: \'song.lyrics_state.unreleased.message\' | i18n }}\n      </span>\n      <span ng-if="song.lyrics_state === \'incomplete\'">\n        {{:: \'song.lyrics_state.incomplete.message\' | i18n }}\n      </span>\n    </div>\n\n    <form\n      ng-submit="lyrics_ctrl.finish_editing()"\n      ng-model-options="{updateOn: \'submit\'}"\n      submit-on-cmd-enter\n      dirtyable\n      exports-form-api="lyrics_ctrl.lyrics_form = api"\n    >\n      <textarea\n        ng-show="lyrics_ctrl.should_show_lyrics_edit_form()"\n        ng-disabled="lyrics_ctrl.edit_blocked"\n        tabindex="1"\n        ng-model="editable.markdown"\n        class="wysiwyg_input wysiwyg_input--full_width u-vertical_margins"\n        ng-class="{\'wysiwyg_input--warning\': lyrics_ctrl.editable_lyrics_stale}"\n      ></textarea>\n      <textarea\n        ng-show="lyrics_ctrl.should_show_lyrics_edit_proposal_form()"\n        ng-disabled="lyrics_ctrl.edit_blocked"\n        tabindex="1"\n        ng-model="lyrics_ctrl.lyrics_for_edit_proposal.markdown"\n        class="wysiwyg_input wysiwyg_input--full_width u-vertical_margins"\n        ng-class="{\'wysiwyg_input--warning\': lyrics_ctrl.editable_lyrics_stale}"\n      ></textarea>\n    </form>\n\n    <section\n      ng-hide="lyrics_ctrl.should_show_lyrics_edit_form() || lyrics_ctrl.should_show_lyrics_edit_proposal_form()"\n      text-selection-changed="lyrics_ctrl.update_selection_range(ranges[0])"\n    ></section>\n\n    <div\n      ng-if="can_perform(\'edit_lyrics\') || can_perform(\'propose_lyrics_edit\')"\n      class="lyrics-correct_line"\n      position-beside="$ctrl.lyrics_positioning_target || lyrics_ctrl.correction.rect"\n    >\n      <span\n        ng-if="lyrics_ctrl.can_correct_line()"\n        ng-click="lyrics_ctrl.start_correcting()"\n        class="lyrics-correct_line-button"\n        click-outside="lyrics_ctrl.text_corrector.cancel_edit_or_proposal()"\n        tether-drop-target\n        title="Correct this line"\n      >\n        <svg\n          ng-hide="lyrics_ctrl.correction"\n          src="pencil.svg"\n          class="inline_icon inline_icon--purple inline_icon--reading_size inline_icon--up_1"\n        ></svg>\n        <tether-drop visible="lyrics_ctrl.correction" position="bottom left">\n          <div\n            stop-propagation="click"\n            ng-if="lyrics_ctrl.correction"\n            class="tooltip u-large_top_vertical_margin u-half_horizontal_margins tooltip--wide"\n          >\n            <p>Correct This Line</p>\n            <div\n              ng-if="lyrics_ctrl.errors"\n              class="u-vertical_margins form_message form_message--error form_message--block"\n            >\n              <ul>\n                <li ng-repeat="error in lyrics_ctrl.errors" ng-bind-html="error"></li>\n              </ul>\n            </div>\n            <text-corrector\n              yields-text-corrector="lyrics_ctrl.text_corrector = text_corrector"\n              text="lyrics_ctrl.correction.replacement.markdown"\n              proposing-edit="lyrics_ctrl.proposing_edit"\n              submit="lyrics_ctrl.submit_line_correction(corrected)"\n              cancel="lyrics_ctrl.cancel_edit_or_proposal()"\n            ></text-corrector>\n          </div>\n        </tether-drop>\n      </span>\n    </div>\n  </div>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("lyrics_edit_proposal.html",'<div>\n  <div class="lyrics_edit_proposal-user_badge_and_timestamp">\n    <user-badge-and-timestamp\n      size="medium"\n      variants="::{show_user_role: true}"\n      user=":: $ctrl.edit_proposal.user"\n      time=":: $ctrl.edit_proposal.created_at"\n    ></user-badge-and-timestamp>\n  </div>\n\n  <div\n    ng-if="$ctrl.error"\n    class="form_message form_message--error u-bottom_margin"\n  >{{ $ctrl.error }}</div>\n\n  <div class="lyrics lyrics--no_margin">\n    <expandable-diff html="$ctrl.diff_html"></expandable-diff>\n  </div>\n\n  <div class="lyrics_edit_proposal-actions">\n    <square-item-and-iq\n      event-type="accepted_a_lyrics_edit"\n      ng-if="$ctrl.can(\'accept\')"\n      ng-hide="$ctrl.moderated_state && $ctrl.moderated_state !== \'accepted\'"\n      ng-click="$ctrl.accept()"\n    >\n      <button\n        ng-disabled="$ctrl.moderated_state"\n        ng-class="{\'lyrics_edit_proposal-actions-pulse\': $ctrl.moderated_state}"\n        class="square_button square_button--green"\n      >{{ $ctrl.moderated_state === \'accepted\' ? \'Accepted\' : \'Accept\' }}</button>\n    </square-item-and-iq>\n    <square-item-and-iq\n      event-type="rejected_a_lyrics_edit"\n      ng-if="$ctrl.can(\'reject\')"\n      ng-hide="$ctrl.moderated_state && $ctrl.moderated_state !== \'rejected\'"\n      ng-click="$ctrl.reject()"\n    >\n      <button\n        ng-disabled="$ctrl.moderated_state"\n        ng-class="{\'lyrics_edit_proposal-actions-pulse\': $ctrl.moderated_state}"\n        class="square_button square_button--transparent square_button--gray"\n      >{{ $ctrl.moderated_state === \'rejected\' ? \'Rejected\' : \'Reject\' }}</button>\n    </square-item-and-iq>\n    <button\n      ng-if="$ctrl.moderated_state === \'inapplicable\'"\n      ng-disabled="true"\n      class="square_button lyrics_edit_proposal-actions-pulse"\n    >Inapplicable</button>\n  <div>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("lyrics_edit_proposal_moderation.html",'<button\n  ng-if="$ctrl.pending_count()"\n  class="square_button square_button--red"\n  ng-click="$ctrl.show()"\n>Lyrics Edits ({{$ctrl.pending_count()}})</button>\n<modal-window\n  ng-if="$ctrl.showing"\n  on-close="$ctrl.close()"\n  media="$ctrl.song.media"\n>\n  <div ng-if="$ctrl.pending_count() === 0">No lyrics edit proposals</div>\n  <div\n    class="lyrics_edit_proposal nganimate-fade_out"\n    ng-hide="edit_proposal._moderated"\n    ng-repeat="edit_proposal in $ctrl.lyrics_edit_proposals track by edit_proposal.id"\n  >\n    <lyrics-edit-proposal\n      edit-proposal="edit_proposal"\n      editable="$ctrl.editable"\n      accept-with="$ctrl.accept(params)"\n    ></lyrics-edit-proposal>\n  </div>\n</modal-window>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("lyrics_export_preview.html",'<div\n  ng-if="$ctrl.can_perform(\'preview_lyrics_for_export\')"\n  ng-click="$ctrl.show_modal()"\n  class="tooltip-list_item"\n>Preview Lyrics For Export</div>\n\n<modal-window\n  ng-if="$ctrl.should_show_modal()"\n  on-close="$ctrl.hide_modal()"\n>\n  <div class="u-white_space_pre_line">{{ $ctrl.preview_lyrics_for_export }}</div>\n</modal-window>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("lyrics_sync_editor.html",'<div class="lyrics_sync_editor column_layout column_layout--no_max_width u-body_bottom_padding">\n  <div class="column_layout-column_span column_layout-column_span--primary">\n    <table\n      ng-if="$ctrl.lyrics_synchronization.song_id"\n      class="lyrics_sync_editor-lyrics-table">\n      <tbody>\n        <tr\n          class="lyrics_sync_editor-start_row"\n          ng-class="{\'lyrics_sync_editor-start_row--focused\': $ctrl.current_line_index === -1 && !$ctrl.lyrics_synchronization.preview,\'lyrics_sync_editor-start_row--pulsing\': $ctrl.position === 0 && !$ctrl.lyrics_synchronization.preview, \'lyrics_sync_editor-start_row--preview\': $ctrl.lyrics_synchronization.preview }"\n        >\n          <td ng-if="$ctrl.can(\'sync\') && $ctrl.can(\'submit\')" class="lyrics_sync_editor-timestamp_cell lyrics_sync_editor-timestamp--gray">\n            <span class="lyrics_sync_editor-timestamp">0:00.000</span>\n          </td>\n          <td class="lyrics_sync_editor-timestamp_cell lyrics_sync_editor-timestamp--gray">\n            <span class="lyrics_sync_editor-timestamp">0:00.000</span>\n          </td>\n          <td\n            class="lyrics_sync_editor-start_cell u-clickable"\n            ng-click="$ctrl.seek_to_index_and_play(-1)"\n          >{{ $ctrl.lyrics_synchronization.preview ? \'Preview\' : \'Start\' }}</td>\n          <td\n            ng-if="$ctrl.can(\'edit\')"\n            class="lyrics_sync_editor-line_control_cell"\n          >\n            <button\n              ng-if="$ctrl.can(\'sync\')"\n              ng-click="$ctrl.lyrics_synchronization.add_line_at_index(0)"\n              class="lyrics_sync_editor-line_control square_button lyrics_sync_editor-tiny_square_button square_button--gray"\n            >&darr;&nbsp;Break</button>\n          </td>\n          <td\n            ng-if="$ctrl.can(\'edit\')"\n            class="lyrics_sync_editor-state_visibility_cell"\n          ></td>\n        </tr>\n        <tr\n          keep-in-view="$index === $ctrl.current_line_index"\n          ng-class="{\'lyrics_sync_editor-line_row--focused\': $index === $ctrl.current_line_index, \'lyrics_sync_editor-line_row--marked\': line.marked, \'lyrics_sync_editor-line_row--fixed\': line.fixed}"\n          ng-repeat="line in $ctrl.lyrics_synchronization.lines"\n          class="lyrics_sync_editor-line_row"\n          ng-if="!line.hidden || $ctrl.showing_hidden_lines"\n        >\n          <td ng-if="$ctrl.can(\'sync\') && $ctrl.can(\'submit\')" class="lyrics_sync_editor-timestamp_cell">\n            <span\n              class="lyrics_sync_editor-timestamp"\n              ng-if="($ctrl.lyrics_synchronization.next_visible_line_index_after_index($ctrl.current_line_index) === $index && $ctrl.position > 0) || ($index === 0 && $ctrl.position === 0)">\n              {{ $ctrl.position | timestamp_for_display:{always_millis: true} }}\n            </span>\n          </td>\n          <td class="lyrics_sync_editor-timestamp_cell">\n            <div\n              class="lyrics_sync_editor-timestamp"\n              ng-class="{\'u-clickable\': $ctrl.can(\'edit\')}"\n              ng-click="$ctrl.edit_line_timestamp_at_index($index)"\n              ng-if="!line._editing_time">\n              <span\n                ng-if="line.timestamp !== null || $index === 0">\n                {{ (line.timestamp || 0) | timestamp_for_display:{always_millis: true} }}\n              </span>\n            </div>\n            <form\n              ng-if="line._editing_time"\n              ng-submit="$ctrl.after_edit_line_timestamp_at_index($index)">\n              <input\n                ng-autofocus\n                lyric-sync-timestamp-input\n                class="square_input u-width_100 lyrics_sync_editor-table_input lyrics_sync_editor-timestamp_input"\n                validators="{in_order: $ctrl.in_order_validator_for_index($index)}"\n                ng-blur="$ctrl.after_edit_line_timestamp_at_index($index)"\n                ng-model="line.timestamp"/>\n            </form>\n          </td>\n          <td\n            class="lyrics_sync_editor-lyric_cell"\n            ng-class="{\'u-clickable\': !line._editing_lyrics, \'lyrics_sync_editor-lyric_cell--gray\': line.hidden}"\n            ng-mousedown="(line._editing_lyrics || $ctrl.is_editing_timestamp) ? null : $ctrl.seek_to_index($index)"\n          >\n            <span\n              class="lyrics_sync_editor-lyric"\n              ng-if="!line._editing_lyrics"\n              ng-dblclick="$ctrl.edit_line_lyrics_at_index($index)"\n            >{{ line.lyrics }}</span>\n            <form\n              ng-if="line._editing_lyrics"\n              ng-submit="$ctrl.after_edit_line_lyrics_at_index($index)">\n              <input\n                ng-autofocus\n                type="text"\n                class="square_input u-width_100 lyrics_sync_editor-table_input"\n                ng-blur="$ctrl.after_edit_line_lyrics_at_index($index)"\n                ng-model="line.lyrics">\n            </form>\n          </td>\n          <td ng-if="$ctrl.can(\'edit\')" class="lyrics_sync_editor-line_control_cell">\n            <div ng-if="$ctrl.can(\'approve\') || $ctrl.can(\'staff_approve\')">\n             <button\n                ng-click="$ctrl.lyrics_synchronization.set_line_at_index_marked($index, !line.marked)"\n                class="lyrics_sync_editor-line_control square_button lyrics_sync_editor-tiny_square_button square_button--gray"\n              >{{ line.marked ? \'&check;&nbsp;Unmark\' : \'&cross;&nbsp;Mark\' }}</button>\n            </div>\n            <div ng-if="$ctrl.can(\'sync\')">\n              <button\n                ng-if="!line.added && !line.marked"\n                ng-click="$ctrl.lyrics_synchronization.set_line_at_index_hidden($index, !line.hidden)"\n                class="lyrics_sync_editor-line_control square_button lyrics_sync_editor-tiny_square_button square_button--gray"\n              >{{ line.hidden ? \'&check;&nbsp;Show\' : \'&cross;&nbsp;Hide\' }}</button>\n\n              <button\n                ng-if="line.added && !line.marked"\n                ng-click="$ctrl.lyrics_synchronization.remove_line_at_index($index)"\n                class="lyrics_sync_editor-line_control square_button lyrics_sync_editor-tiny_square_button square_button--gray"\n              >&cross;&nbsp;Remove</button>\n\n              <button\n                ng-if="!line.marked"\n                ng-click="$ctrl.lyrics_synchronization.add_line_at_index($index + 1)"\n                class="lyrics_sync_editor-line_control square_button lyrics_sync_editor-tiny_square_button square_button--gray"\n              >&darr;&nbsp;Break</button>\n\n              <button\n                ng-if="line.marked"\n                ng-click="$ctrl.lyrics_synchronization.set_line_at_index_fixed($index)"\n                class="lyrics_sync_editor-line_control square_button lyrics_sync_editor-tiny_square_button square_button--gray"\n              >&check;&nbsp;Fixed</button>\n            </div>\n          </td>\n          <td\n            ng-if="$ctrl.can(\'edit\')"\n            class="lyrics_sync_editor-state_visibility_cell"\n          ></td>\n        </tr>\n      </tbody>\n    </table>\n  </div>\n\n  <div class="u-horizontal_margins u-vertical_margins column_layout-column_span column_layout-column_span--secondary rich_text_formatting">\n    <div sticky class="lyrics_sync_editor-controls" sticky-class="lyrics_sync_editor-controls--stuck">\n      <p>\n        <a href ng-click="$ctrl.go_to_home()">&larr; Back to Dashboard</a> |\n        <a ng-href="{{$ctrl.instructions_url}}" target="_blank">View Instructions</a>\n        <span ng-if="$ctrl.lyrics_synchronization.song_id">\n          | <a ng-href="/songs/{{$ctrl.lyrics_synchronization.song_id}}">Song Page</a>\n        </span>\n        <span ng-if="$ctrl.can(\'edit\')">\n          | <a href ng-click="$ctrl.showing_keyboard_shortcuts = !$ctrl.showing_keyboard_shortcuts">Keyboard Shortcuts (?)</a>\n        </span>\n      </p>\n\n      <lyrics-sync-keyboard\n        ng-if="$ctrl.lyrics_synchronization"\n        showing="$ctrl.showing_keyboard_shortcuts"\n      ></lyrics-sync-keyboard>\n\n      <hr>\n\n      <div ng-if="!$ctrl.lyrics_synchronization.song_id">\n        <p><strong>No song page associated with this audio.</strong> Use the "Change Lyrics" tool below to associate a song page with search or by URL.</p>\n      </div>\n\n      <div ng-if="$ctrl.lyrics_synchronization.state === \'preview\'">\n        <p><strong>Previewing new lyrics taken from "{{ $ctrl.lyrics_synchronization.title_with_artists }}".</strong></p>\n      </div>\n\n      <div ng-if="$ctrl.lyrics_synchronization.checked_out_by_other_user">\n        <p><strong>{{ $ctrl.lyrics_synchronization.checked_out_by.login }}</strong> is currently working on this song.</p>\n        <div ng-if="$ctrl.can(\'check_in\')">\n          <button\n            ng-disabled="saving"\n            ng-class="{\'square_button--disabled\': saving}"\n            ng-click="$ctrl.submit(\'check_in\')"\n            class="square_button u-quarter_vertical_margins"\n          >Unlock from {{ $ctrl.lyrics_synchronization.checked_out_by.login }}</button>\n        </div>\n        <hr>\n      </div>\n\n      <div ng-if="$ctrl.can(\'clean_up\') && !$ctrl.redirecting">\n        <div ng-if="$ctrl.can(\'submit\')">\n          <p>Cleaning Up "{{ $ctrl.lyrics_synchronization.title_with_artists }}"</p>\n          <p>Visit the <a href="/songs/{{$ctrl.lyrics_synchronization.song_id}}">main song page</a> to edit the lyrics for synchronization.</p>\n          <button\n            ng-disabled="saving"\n            ng-class="{\'square_button--disabled\': saving}"\n            ng-click="$ctrl.submit(\'clean_up\').then($ctrl.go_to_home)"\n            class="square_button square_button--green u-quarter_vertical_margins"\n          >Submit Clean Up</button>\n\n          <button\n            ng-disabled="saving"\n            ng-class="{\'square_button--disabled\': saving}"\n            ng-click="$ctrl.submit(\'check_in\').then($ctrl.go_to_home)"\n            class="square_button u-quarter_vertical_margins"\n          >Cancel Clean Up</button>\n\n          <button\n            ng-disabled="saving"\n            ng-class="{\'square_button--disabled\': saving}"\n            ng-click="$ctrl.skipping = \'clean_up\'"\n            class="square_button u-quarter_vertical_margins"\n          >Skip This Song</button>\n        </div>\n        <div ng-if="$ctrl.can(\'check_out\')">\n          <p>This song is available to <strong>clean up</strong>.</p>\n          <button\n            ng-disabled="saving"\n            ng-class="{\'square_button--disabled\': saving}"\n            ng-click="$ctrl.submit(\'check_out\')"\n            class="square_button u-quarter_vertical_margins">Lock for Clean Up</button>\n        </div>\n        <hr>\n      </div>\n\n      <div ng-if="$ctrl.can(\'sync\') && !$ctrl.redirecting">\n        <div ng-if="$ctrl.can(\'submit\')">\n          <p>Syncing "{{ $ctrl.lyrics_synchronization.title_with_artists }}"</p>\n          <p>Use the player and line selection controls to assign timestamps.</p>\n          <div ng-if="$ctrl.can(\'sync_and_staff_approve\')">\n            <label class="square_checkbox">\n              <input\n                type="checkbox"\n                stop-propagation="click"\n                ng-model="$ctrl.sync_and_staff_approve"\n                mousetrap-input\n              />\n              <div class="text_label">Staff Approve?</div>\n            </label>\n          </div>\n          <button\n            ng-disabled="!$ctrl.lyrics_synchronization.all_lines_timestamped || saving"\n            ng-class="{\'square_button--disabled\': !$ctrl.lyrics_synchronization.all_lines_timestamped || saving}"\n            ng-click="$ctrl.submit_sync().then($ctrl.go_to_home)"\n            class="square_button u-quarter_vertical_margins square_button--green"\n          >Submit Sync</button>\n\n          <button\n            ng-disabled="saving"\n            ng-class="{\'square_button--disabled\': saving}"\n            ng-click="$ctrl.submit(\'check_in\').then($ctrl.go_to_home)"\n            class="square_button u-quarter_vertical_margins"\n          >Cancel Sync</button>\n\n          <button\n            ng-disabled="saving"\n            ng-class="{\'square_button--disabled\': saving}"\n            ng-click="$ctrl.skipping = \'sync\'"\n            class="square_button u-quarter_vertical_margins"\n          >Skip This Song</button>\n\n          <button\n            ng-disabled="saving"\n            ng-class="{\'square_button--disabled\': saving}"\n            ng-click="$ctrl.update_state(\'pristine\').then($ctrl.go_to_home)"\n            class="square_button square_button--red u-quarter_vertical_margins"\n            confirm="Are you sure? This will clear existing sync data."\n          >Needs Clean Up</button>\n        </div>\n        <div ng-if="$ctrl.can(\'check_out\')">\n          <p>This song is available to <strong>sync</strong>.</p>\n          <button\n            ng-disabled="saving"\n            ng-class="{\'square_button--disabled\': saving}"\n            ng-click="$ctrl.submit(\'check_out\')"\n            class="square_button u-quarter_vertical_margins"\n          >Lock for Sync</button>\n        </div>\n        <hr>\n      </div>\n\n      <div ng-if="$ctrl.can(\'approve\') && !$ctrl.redirecting">\n        <div ng-if="$ctrl.can(\'submit\')">\n          <p>Approve "{{ $ctrl.lyrics_synchronization.title_with_artists }}"?</p>\n          <button\n            ng-disabled="saving"\n            ng-class="{\'square_button--disabled\': saving}"\n            ng-click="$ctrl.submit(\'approve\').then($ctrl.go_to_home)"\n            class="square_button square_button--green u-quarter_vertical_margins"\n          >Approve</button>\n\n          <button\n            ng-disabled="saving"\n            ng-class="{\'square_button--disabled\': saving}"\n            ng-click="$ctrl.submit(\'reject\', {note: $ctrl.note}).then($ctrl.go_to_home)"\n            class="square_button square_button--red u-quarter_vertical_margins"\n          >Reject</button>\n\n          <button\n            ng-disabled="saving"\n            ng-class="{\'square_button--disabled\': saving}"\n            ng-click="$ctrl.submit(\'check_in\').then($ctrl.go_to_home)"\n            class="square_button u-quarter_vertical_margins"\n          >Cancel Approve</button>\n\n          <button\n            ng-disabled="saving"\n            ng-class="{\'square_button--disabled\': saving}"\n            ng-click="$ctrl.skipping = \'approve\'"\n            class="square_button u-quarter_vertical_margins"\n          >Skip This Song</button>\n\n          <textarea class="square_input square_input--full_width u-vertical_margins" ng-model="$ctrl.note"></textarea>\n          <small>Note required for rejection.</small>\n        </div>\n        <div ng-if="$ctrl.can(\'check_out\')">\n          <p>This song is available to <strong>approve</strong>.</p>\n          <button\n            ng-disabled="saving"\n            ng-class="{\'square_button--disabled\': saving}"\n            ng-click="$ctrl.submit(\'check_out\')"\n            class="square_button u-quarter_vertical_margins"\n          >Lock to Approve</button>\n        </div>\n        <hr>\n      </div>\n\n      <div ng-if="$ctrl.can(\'staff_approve\') && !$ctrl.redirecting">\n        <div ng-if="$ctrl.can(\'submit\')">\n          <p>Approve "{{ $ctrl.lyrics_synchronization.title_with_artists }}" as staff?</p>\n          <button\n            ng-disabled="saving"\n            ng-class="{\'square_button--disabled\': saving}"\n            ng-click="$ctrl.submit(\'staff_approve\').then($ctrl.go_to_home)"\n            class="square_button square_button--green u-quarter_vertical_margins"\n          >Approve</button>\n\n          <button\n            ng-disabled="saving"\n            ng-class="{\'square_button--disabled\': saving}"\n            ng-click="$ctrl.submit(\'staff_reject\', {note: $ctrl.note}).then($ctrl.go_to_home)"\n            class="square_button square_button--red u-quarter_vertical_margins"\n          >Reject</button>\n\n          <button\n            ng-disabled="saving"\n            ng-class="{\'square_button--disabled\': saving}"\n            ng-click="$ctrl.submit(\'check_in\').then($ctrl.go_to_home)"\n            class="square_button u-quarter_vertical_margins"\n          >Cancel Approve</button>\n\n          <textarea class="square_input square_input--full_width u-vertical_margins" ng-model="$ctrl.note"></textarea>\n          <small>Note required for rejection.</small>\n        </div>\n        <div ng-if="$ctrl.can(\'check_out\')">\n          <p>This song is available to <strong>staff approve</strong>.</p>\n          <button\n            ng-disabled="saving"\n            ng-class="{\'square_button--disabled\': saving}"\n            ng-click="$ctrl.submit(\'check_out\')"\n            class="square_button u-quarter_vertical_margins"\n          >Lock to Approve</button>\n        </div>\n        <hr>\n      </div>\n\n      <div ng-if="$ctrl.error">\n        <p class=lyrics_sync_editor-error_message>{{$ctrl.error.message}}</p>\n        <hr>\n      </div>\n\n      <media-controls\n        ng-if="$ctrl.media_player"\n        class="u-flex_directive lyrics_sync_editor-media_control"\n        media-player="$ctrl.media_player"\n        variants="{show_time_elapsed: true}"\n      ></media-controls>\n\n      <audio-source-label\n        external-song="$ctrl.lyrics_synchronization.external_song"\n        ng-if="$ctrl.lyrics_synchronization.external_song"\n      ></audio-source-label>\n\n      <button\n        ng-if="!$ctrl.reassociating && $ctrl.can(\'change_song\')"\n        class="square_button square_button--red"\n        ng-click="$ctrl.reassociating = true"\n      >Change Lyrics</button>\n\n      <detailed-song-search\n        class="u-vertical_margins u-display_block"\n        ng-if="$ctrl.reassociating"\n        on-cancel="$ctrl.cancel_reassociation()"\n        on-select="$ctrl.preview_with_song(song)"\n        on-confirm="$ctrl.change_song(song)"\n      ></detailed-song-search>\n\n      <div\n        class="square_form-input_and_label"\n        ng-if="$ctrl.lyrics_synchronization.lines"\n      >\n        <label class="square_checkbox">\n          <input type="checkbox" stop-propagation="click" ng-model="$ctrl.auto_advance" mousetrap-input>\n          <div class="text_label">Auto Advance?</div>\n        </label>\n      </div>\n\n      <button\n        ng-if="$ctrl.can(\'edit\') && !$ctrl.redirecting"\n        class="square_button square_button--green"\n        ng-disabled="$ctrl.saving || !$ctrl.lyrics_synchronization._dirty"\n        ng-class="{\'square_button--disabled\': $ctrl.saving || !$ctrl.lyrics_synchronization._dirty}"\n        ng-click="$ctrl.save()"\n      >{{ $ctrl.saving ? \'Saving...\' : \'Save\' }}</button>\n\n      <button\n        ng-if="$ctrl.can(\'sync\') && $ctrl.can(\'edit\') && !$ctrl.redirecting"\n        class="square_button"\n        ng-disabled="saving"\n        ng-class="{\'square_button--disabled\': saving}"\n        ng-click="$ctrl.showing_hidden_lines = !$ctrl.showing_hidden_lines"\n      >{{ $ctrl.showing_hidden_lines ? \'Stop Showing Hidden\' : \'Show Hidden Lines\' }}</button>\n\n      <hr>\n\n      <table>\n        <tbody>\n          <tr ng-repeat="action in $ctrl.lyrics_synchronization.actions">\n            <td class="lyrics_sync_editor-history_table_cell">\n              Marked <strong>{{action.label}}</strong> by {{action.performed_by_login}}\n              <div ng-if="action.note">\n                <small>"{{action.note}}"</small>\n              </div>\n            </td>\n            <td class="lyrics_sync_editor-history_table_cell">{{action.performed_at | human_readable_datetime:{year: \'numeric\', month: \'numeric\', day: \'numeric\', hour: \'2-digit\', minute: \'2-digit\'} }}</td>\n            <td class="lyrics_sync_editor-history_table_undo_cell"><a href ng-if="$last && $ctrl.can(\'revert_last\') && !$ctrl.redirecting" confirm="Are you sure?" ng-click="$ctrl.revert_action(action)" ng-hide="saving">Revert</a></td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n  </div>\n  <modal-window ng-if="$ctrl.skipping" on-close="$ctrl.skipping = false">\n    <div class="rich_text_formatting">\n      <h1>What Made You Skip This Song?</h1>\n      <textarea ng-disabled="$ctrl.saving" class="square_input square_input--full_width u-vertical_margins" ng-model="$ctrl.skip_note"></textarea>\n      <button\n        class="square_button u-vertical_margins"\n        ng-disabled="!$ctrl.skip_note || $ctrl.saving"\n        ng-class="{\'square_button--disabled\': !$ctrl.skip_note}"\n        ng-click="$ctrl.skip({verb: $ctrl.skipping, note: $ctrl.skip_note}).then($ctrl.go_to_home)"\n      >Skip</button>\n    </div>\n  </modal-window>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("lyrics_sync_home.html",'<div>\n  <lyrics-sync-editor\n    ng-if="$ctrl.id"\n    model-id="$ctrl.id"\n    instructions-url="{{ $ctrl.instructions_url }}"\n    go-to-home="$ctrl.navigate_to(\'home\')"\n  ></lyrics-sync-editor>\n  <div ng-if="!$ctrl.id" class="rich_text_formatting lyrics_sync_editor column_layout u-body_bottom_padding">\n    <div class="u-width_100">\n      <h1>Lyrics Synchronization Dashboard</h1>\n      <p ng-if="!$ctrl.navigating">\n        <a ng-href="{{:: $ctrl.instructions_url }}" target="_blank">Instructions</a>\n      </p>\n\n      <div ng-if="$ctrl.tasks.length">\n        <hr>\n        <button\n          class="square_button u-quarter_vertical_margins u-quarter_horizontal_margins"\n          ng-repeat="task in $ctrl.tasks"\n          ng-click="$ctrl.start(task.verb)"\n          ng-disabled="!task.verb || $ctrl.checked_out.length || $ctrl.assignments.length"\n          ng-class="{\'square_button--disabled\': !task.verb || $ctrl.checked_out.length || $ctrl.assignments.length}"\n        >{{ task.label }}</button>\n        <small\n          class="u-display_block u-quarter_vertical_margins u-quarter_horizontal_margins"\n          ng-if="$ctrl.checked_out.length">\n          Can\'t start a new task until current one is completed, skipped, or unlocked.\n        </small>\n\n        <small\n          class="u-display_block u-quarter_vertical_margins u-quarter_horizontal_margins"\n          ng-if="$ctrl.assignments.length && !$ctrl.checked_out.length">\n          Can\'t start a new task until assigned ones have been completed.\n        </small>\n      </div>\n      <div ng-if="$ctrl.checked_out.length">\n        <hr>\n        <h2>Currently Locked Tasks:</h2>\n        <table class="lyrics_sync-task_table">\n          <tbody>\n            <tr ng-repeat="sync in $ctrl.checked_out">\n              <td class="lyrics_sync-task_table_song_name">\n                <a href ng-click="$ctrl.navigate_to(sync.id)">\n                  {{ sync.title_with_artists }}\n                </a>\n              </td>\n              <td>\n                <button class="square_button" ng-click="$ctrl.check_in(sync)">\n                  Unlock\n                </button>\n                <br>\n                <small ng-if="sync.assigned">Assigned</span>\n              </td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n      <div ng-if="$ctrl.assignments.length">\n        <hr>\n        <h2>Assigned Tasks:</h2>\n        <table class="lyrics_sync-task_table">\n          <tbody>\n            <tr ng-repeat="sync in $ctrl.assignments">\n              <td class="lyrics_sync-task_table_song_name">\n                <a href ng-click="$ctrl.navigate_to(sync.id)">\n                  {{ sync.title_with_artists }}\n                </a>\n              </td>\n              <td>\n                <button class="square_button" ng-click="$ctrl.check_out(sync)">\n                  Start\n                </button>\n              </td>\n              <td></td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n    </div>\n  </div>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("lyrics_sync_keyboard.html",'<table ng-show="showing">\n  <tbody>\n    <tr ng-if=":: definition.label" ng-repeat="definition in :: definitions">\n      <td><em ng-bind-html=":: definition.label"></em></td>\n      <td>{{:: definition.description }}</td>\n    </tr>\n  </tbody>\n</table>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("manage_chart_item.html","<div>\n  <placeholder-spinner ng-if=\"$ctrl.loading\"></placeholder-spinner>\n  <div ng-if=\"!$ctrl.loading\">\n    <div ng-click=\"$ctrl.toggle_excluded()\">\n      {{ 'charts.actions.' + ($ctrl.excluded ? 'allow_in_charts' : 'exclude_from_charts') | i18n }}\n    </div>\n  </div>\n</div>\n")}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("manage_roles.html",'<div class="u-vertical_margins">\n  <div ng-repeat="role in $ctrl.user.roles_for_display" class="text_label text_label--gray">\n    {{ role | roleHumanName }}<role-icon role="role" has-checky="role == \'verified_artist\'"></role-icon>\n  </div>\n</div>\n\n<div class="u-vertical_margins rich_text_formatting">\n  <ul>\n    <li ng-repeat="role in $ctrl.user.calculated_roles">{{role}}</li>\n  </ul>\n</div>\n\n<div ng-repeat="role in $ctrl.user_authority_roles" ng-if="$ctrl.has_role(role)">\n  <hr class="hr hr--gray">\n  <div class="u-vertical_margins">\n    <div class="manage_roles-role">\n      <div class="text_label text_label--gray manage_roles-role_label">{{ role | roleHumanName }}<role-icon role="role"></role-icon></div>\n      <button\n        ng-click="$ctrl.grant(role, false)"\n        ng-if="$ctrl.can_toggle(role)"\n        class="square_button square_button--purple"\n      >{{ \'role.actions.remove\' | i18n }}</button>\n    </div>\n    <p class="u-half_top_margin rich_text_formatting" ng-if="$ctrl.role_grant(role)">\n      <a ng-href="{{$ctrl.role_grant(role).actor.url}}">{{$ctrl.role_grant(role).actor.login}}</a> granted {{$ctrl.user.login}} the {{ role | roleHumanName }} role <span am-time-ago="$ctrl.role_grant(role).occurred_at*1000"></span>.\n    </p>\n    <p class="u-half_top_margin" ng-if="!$ctrl.role_grant(role)">\n      Unfortunately, we don\'t know who granted {{$ctrl.user.login}} the {{ role | roleHumanName }} role.\n    </p>\n  </div>\n</div>\n\n<div ng-repeat="role in $ctrl.user_authority_roles" ng-if="!$ctrl.has_role(role) && $ctrl.can_toggle(role)">\n  <hr class="hr hr--gray">\n  <div class="u-vertical_margins">\n    <div\n      ng-if="$ctrl.errors[role]"\n      ng-repeat="error in $ctrl.errors[role]"\n      class="form_message form_message--error text_label"\n    >{{ error }}</div>\n\n    <button\n      ng-click="$ctrl.grant(role, true)"\n      class="square_button square_button--purple"\n    ><role-icon role="role"></role-icon>Grant {{$ctrl.user.login}} the {{ role | roleHumanName }} role</button>\n  </div>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("markdown_preview.html",'<standard-rich-content html="html_content"></standard-rich-content>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("marquee_ad.html",'<div\n  class="marquee_ad"\n  ng-class="{\n    \'marquee_ad--permanently_collapsed\': $ctrl.permanently_collapsed,\n    \'marquee_ad--marquee_not_ready\': !$ctrl.marquee_ready\n  }"\n>\n  <dfp-ad\n    name="{{$ctrl.name}}"\n    on-filled="$ctrl.on_filled(render_event, custom_values)"\n  ></dfp-ad>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("media_controls.html",'<div class="media_control">\n  <div\n    class="media_control-button_group"\n    stop-propagation="click"\n    ng-click="media.api.playpause()"\n    ng-if="!hide_playpause"\n  >\n    <play-pause-button playing="media.state.is_playing" loading="media.state.is_loading"></play-pause-button>\n  </div>\n\n  <div\n    ng-if="variants.show_time_elapsed"\n    class="media_control-timer media_control-timer--left_side"\n    ng-bind="(media.state.time_elapsed || 0) | timestamp_for_display:{skip_millis:true}"\n  ></div>\n\n  <div class="media_control-scrubber">\n    <div\n      class="media_control-scubber-handle_container"\n      scrubber\n      scrub-percentage="scrub_percentage"\n      scrubbed="media.api.seek_to(percentage)"\n    >\n      <span\n        class="media_control-scubber-handle"\n        ng-style="{left: ((scrub_percentage !== undefined ? scrub_percentage : media.state.percentage) * 100).toFixed(2) + \'%\'}"\n      ></span>\n    </div>\n  </div>\n  <div class="media_control-timer" ng-bind="(media.state.time_remaining || 0) | timestamp_for_display:{skip_millis:true}"></div>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("media_player.html",'<div\n  class="song_media_controls u-bottom_margin show_tiny_edit_button_on_hover"\n  ng-if="$ctrl.media"\n  ng-switch="$ctrl.media.provider"\n>\n  <div\n    class="song_media_controls-controls"\n    ng-class="{\n      \'song_media_controls-controls--half_width\': !$ctrl.sticky_offset && $ctrl.show_video_player && $ctrl.media.provider === \'youtube\'\n    }"\n    sticky="$ctrl.sticky_offset && $ctrl.played_once"\n    sticky-use-parent-as-wrapper\n    sticky-class="song_media_controls-controls--docked"\n    sticky-offset="{{$ctrl.sticky_offset}}"\n  >\n    <div class="song_media_controls-playpause_container">\n      <div\n        class="song_media_controls-playpause"\n        stop-propagation="click"\n        ng-click="$ctrl.play(); $ctrl.show_video_player = true"\n      >\n        <play-pause-button\n          loading="$ctrl.media_player.state.is_loading"\n          playing="$ctrl.media_player.state.is_playing"\n        ></play-pause-button>\n      </div>\n    </div>\n\n    <media-controls\n      class="u-flex_directive"\n      media-player="$ctrl.media_player"\n      hide-playpause="true"\n    ></media-controls>\n\n    <div class="song_media_controls-provider">\n      <a\n        href="{{ $ctrl.media.url }}"\n        target="_blank"\n        stop-propagation="click"\n      >\n        <div class="song_media_controls-provider-icon">\n          <svg class="inline_icon inline_icon--purple inline_icon--x_small_reading_size" ng-src="$ctrl.media.provider + \'.svg\'"></svg>\n          <div\n            ng-if="$ctrl.media.provider === \'soundcloud\'"\n            class="song_media_controls-provider-icon-soundcloud_text"\n          >\n            <div class="song_media_controls-provider-icon-soundcloud_text-line_1">powered by</div>\n            <div class="text_label song_media_controls-provider-icon-soundcloud_text-line_2">SOUNDCLOUD</div>\n          </div>\n        </div>\n\n        <span\n          ng-bind="$ctrl.media.attribution"\n          class="text_label song_media_controls-provider-attribution"\n        ></span>\n      </a>\n    </div>\n  </div>\n\n  <div\n    class="tiny_edit_button song_media_controls-edit_button"\n    ng-if="$ctrl.can_edit"\n    ng-click="$ctrl.on_edit()"\n    stop-propagation="click"\n  >\n    <svg src="pencil.svg" class="tiny_edit_button-svg"></svg>\n  </div>\n\n  <div\n    ng-switch-when="youtube"\n    class="song_media_controls-docked_video"\n    ng-show="$ctrl.media_player.state.is_loaded && $ctrl.show_video_player"\n  >\n    <youtube-player\n      controls="true"\n      fullscreen="true"\n      src="$ctrl.media.url"\n      start="$ctrl.media.start"\n      yields-api="$ctrl.media_player.api = api"\n      yields-state="$ctrl.media_player.state = state"\n    ></youtube-player>\n    <div\n      class="song_media_controls-close_player u-clickable"\n      ng-click="$ctrl.media_player.api.pause(); $ctrl.show_video_player = false"\n      stop-propagation="click"\n    >\n      <svg class="inline_icon inline_icon--white" src="x.svg"></svg>\n    </div>\n  </div>\n\n  <soundcloud\n    ng-switch-when="soundcloud"\n    soundcloud-src="$ctrl.media.url"\n    ng-hide="::true"\n    yields-api="$ctrl.media_player.api = api"\n    yields-state="$ctrl.media_player.state = state"\n  ></soundcloud>\n\n  <global-message ng-if="$ctrl.can_edit && $ctrl.media_player.state.has_errored" ng-cloak>\n    <span>There was a problem loading the media player</span>\n    <span class="text_label text_label--white text_label--button" ng-click="$ctrl.on_edit()" stop-propagation="click">Fix it</span>\n  </global-message>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("merge_artist_form.html",'<div\n    ng-if="$ctrl.errors"\n    ng-repeat="error in $ctrl.errors"\n    class="form_message form_message--error text_label u-bottom_margin"\n>{{ error }}</div>\n\n<div\n    ng-if="$ctrl.artist_merge_complete"\n    class="form_message form_message--success text_label u-bottom_margin"\n>{{ \'artist.merge_request_complete_message\' | i18n }}</div>\n\n<form\n    name="merge_form"\n    ng-submit="$ctrl.merge_artist()"\n    ng-model-options="{updateOn: \'submit\'}"\n    ng-if="$ctrl.can(\'merge\', $ctrl.artist) && !$ctrl.artist_merge_complete"\n>\n\n  <div\n      class="square_form-standard_element_margin"\n  >\n    If {{:: $ctrl.artist.name }} is an alternate name for another artist (e.g., "Tupac" is an alternate name for "2Pac"),\n    you can move {{:: $ctrl.artist.name }}\'s songs into that artist and DELETE {{:: $ctrl.artist.name }}.\n  </div>\n\n  <div ng-if="$ctrl.show_warning" class="u-bottom_margin">\n    <input\n        ng-model="$ctrl.artist_name_to_merge_with"\n        autocomplete-with="artist"\n        autofocus\n        class="square_input square_form-standard_element_margin"\n        placeholder="Enter the artist\'s name">\n\n    <span class="form_message form_message--error text_label">\n      (this action cannot be undone! If you abuse this tool you will corrupt data and will immediately lose your moderator status.)\n    </span>\n  </div>\n\n  <button\n      class="square_button square_button--red u-small_bottom_margin"\n      ng-class="{\'square_button--waiting\': $ctrl.saving}"\n      ng-disabled="$ctrl.saving"\n      type="submit"\n  >\n    <span ng-if="!$ctrl.show_warning">I Understand, Let me do it</span>\n    <span ng-if="$ctrl.show_warning">Submit</span>\n  </button>\n</form>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("messages_inbox.html",'<div ng-style="{minHeight: $ctrl.modal_open && $ctrl.modal_dimensions.height + 32}">\n  <div class="feed_dropdown-header">\n    <span class="text_label">{{:: \'header.messages_inbox\' | i18n }}</span>\n    <span ng-click="$ctrl.composing = true; $ctrl.on_modal_open()" class="feed_dropdown-header_action">Send a new message</span>\n    <modal-window\n      ng-if="$ctrl.composing"\n      on-close="$ctrl.attempt_close(reason.close_button || !$ctrl.is_form_dirty())"\n      variants="{full_height: !$ctrl.embed, no_margin: $ctrl.embed, internal_close: $ctrl.embed}"\n      content-dimensions="$ctrl.modal_dimensions"\n    >\n      <new-conversation yields-is-dirty="$ctrl.is_form_dirty = is_dirty"></new-conversation>\n    </modal-window>\n  </div>\n  <conversations\n    refresh-at="$ctrl.refresh_at"\n    visible="$ctrl.opened"\n    on-conversation-read="$ctrl.on_conversation_read(unread_messages_count)"\n    on-modal-open="$ctrl.on_modal_open()"\n    on-modal-close="$ctrl.on_modal_close()"\n    embed="$ctrl.embed"\n    modal-dimensions="$ctrl.modal_dimensions"\n  ></conversations>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("metadata_custom_performance_role_input.html",'<div ng-repeat="customPerformanceRole in customPerformanceRoles" class="square_form-sub_section">\n  <metadata-input-and-label label="Additional role" is-disabled="is_disabled" errors="ctrl.errors_for_label(customPerformanceRole.label)">\n    <input\n      ng-model="customPerformanceRole.label"\n      autocomplete-with="customPerformanceRole"\n      class="square_input square_form-standard_element_margin"\n      placeholder="{{role_field_placeholder}}"\n      ng-disabled="isDisabled">\n    </input>\n  </metadata-input-and-label>\n\n  <metadata-input-and-label label="Artists in the role" is-disabled="is_disabled">\n    <autocomplete-tags-input\n      bind-to="customPerformanceRole.artists"\n      name="artist"\n      autocomplete-model="artist"\n      placeholder="{{artist_field_placeholder}}"\n      input-classes="tags_input square_input square_form-standard_element_margin"\n      ng-disabled="isDisabled">\n    </autocomplete-tags-input>\n  </metadata-input-and-label>\n\n  <div\n    class="square_form-sub_section-remove"\n    ng-click="ctrl.remove_custom_performance(customPerformanceRole)"\n  >\n    <svg class="inline_icon" src="x.svg"></svg>\n  </div>\n</div>\n\n<span class="text_label text_label--button text_label--purple" ng-click="ctrl.add_new_custom_performance()" ng-if="customPerformanceRoles && !isDisabled">+ Add Additional Credits</span>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("metadata_input_and_label.html",'<div class="square_form-input_and_label" ng-class="{\'square_form-input_and_label--half_width\': !full, \'square_form-input_and_label--error\': errors.length}">\n  <div class="text_label" ng-class="{\'text_label--gray\': is_disabled}">\n    {{label}}\n    <span ng-if="is_disabled" tether-drop-target>\n      <svg src="lock.svg" class="inline_icon inline_icon--reading_size inline_icon--up_3 inline_icon--gray"></svg>\n      <tether-drop show-on="hover">\n        <div class="tag_label tag_label--purple_background u-hair_horizontal_margins">{{\'can_can.access_denied\' | i18n}}</div>\n      </tether-drop>\n    </span>\n    <div ng-repeat="error in errors" class="form_message form_message--error">{{error}}</div>\n  </div>\n  <ng-transclude></ng-transclude>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("mini_album_card.html",'<a href="{{$ctrl.album.url}}" title="{{$ctrl.album.name}}" class="mini_card" ng-class="{\'mini_card--small\': $ctrl.variants.small}">\n  <div\n    class="mini_card-thumbnail clipped_background_image--background_fill"\n    clipped-background-image=":: $ctrl.album.cover_art_thumbnail_url"\n  ></div>\n  <div class="mini_card-info">\n    <div class="mini_card-title_and_subtitle">\n      <div class="mini_card-title">{{$ctrl.album.name}}</div>\n      <div class="mini_card-subtitle">{{$ctrl.album.release_date_components.year}}</div>\n    </div>\n  </div>\n</a>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("mini_annotatable_card.html",'<a ng-href="{{ $ctrl.object.url }}" class="mini_card--transparent mini_card" ng-class="{\'mini_card--small\': $ctrl.variants.small}" set-class-before-navigate="mini_card--active">\n  <div\n    class="mini_card-thumbnail clipped_background_image--background_fill"\n    clipped-background-image=":: $ctrl.object.image_url"\n  ></div>\n  <div class="mini_card-info">\n    <div class="mini_card-title_and_subtitle">\n      <div class="mini_card-title">{{:: $ctrl.object.title }}</div>\n      <div class="mini_card-subtitle">{{ $ctrl.object.context }}</div>\n    </div>\n  </div>\n</a>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("mini_article_card.html",'<a\n  ng-href="{{$ctrl.article.url}}"\n  title="{{$ctrl.article.title}}"\n  class="mini_article_card"\n>\n  <div\n    class="mini_article_card-thumbnail clipped_background_image--background_fill"\n    clipped-background-image=":: $ctrl.article.preview_image"\n  ></div>\n\n  <div class="mini_article_card-title">{{$ctrl.article.title}}</div>\n</a>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("mini_artist_card.html",'<a ng-href="{{ $ctrl.artist.url }}" class="mini_card" set-class-before-navigate="mini_card--active">\n  <div class="mini_card-thumbnail">\n    <div\n      class="user_avatar user_avatar--large clipped_background_image--background_fill"\n      clipped-background-image=":: $ctrl.artist.image_url"\n    ></div>\n  </div>\n  <div class="mini_card-info mini_card-info--centered">\n    <div class="mini_card-title">{{:: $ctrl.artist.name }}</div>\n  </div>\n</a>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("mini_song_card.html",'<a ng-href="{{ $ctrl.song.url }}" class="mini_card" ng-class="{\'mini_card--small\': $ctrl.variants.small}">\n  <div\n    class="mini_card-thumbnail clipped_background_image--background_fill"\n    clipped-background-image=":: $ctrl.song.song_art_image_thumbnail_url"\n  >\n    <div class="mini_card-chart_number" ng-if="$ctrl.number">\n      <div class="mini_card-chart_number-square">\n        <div>{{$ctrl.number}}</div>\n      </div>\n    </div>\n  </div>\n  <div class="mini_card-info">\n    <div class="mini_card-title_and_subtitle">\n      <div class="mini_card-title">{{:: $ctrl.song.title }}</div>\n      <div class="mini_card-subtitle">\n        {{ $ctrl.song.primary_artist.name }}<span ng-if="$ctrl.non_primary_artist_present">, <span class="mini_card-muted_subtitle">{{$ctrl.artist.name}}</span></span>\n      </div>\n    </div>\n    <div\n      ng-if="$ctrl.excerpt_with_markup"\n      class="mini_card-lyric_excerpt"\n      ng-bind-html="$ctrl.excerpt_with_markup"\n    ></div>\n    <div ng-if="!$ctrl.excerpt_with_markup">\n      <div ng-if="$ctrl.song.lyrics_state === \'complete\'" class="mini_card-metadata">\n        <svg\n          ng-if=":: $ctrl.song.verified_annotations"\n          src="checky.svg"\n          class="mini_card-artist_and_metadata-checky checky"\n        ></svg>\n        <span\n          ng-if=":: $ctrl.song.stats.hot"\n          class="mini_card-artist_and_metadata-hot"\n        >\n          <svg src="fire.svg" class="inline_icon inline_icon--reading_size"></svg>\n          {{ $ctrl.song.stats.concurrents + 1 | abbreviateBigNumber }}\n        </span>\n        <span ng-if=":: $ctrl.song.stats.pageviews">\n          <svg src="eye.svg" class="inline_icon inline_icon--up_1"></svg>\n          {{ $ctrl.song.stats.pageviews | abbreviateBigNumber }}\n        </span>\n        <span\n          ng-if="$ctrl.variants.show_unreviewed_count"\n          class="mini_card-artist_and_metadata-unreviewed_annotations"\n        >\n          <svg src="circle.svg" class="inline_icon inline_icon--up_1"></svg>\n          {{$ctrl.song.stats.unreviewed_annotations}}\n        </span>\n      </div>\n      <div ng-if="$ctrl.song.lyrics_state === \'unreleased\'" class="mini_card-metadata">\n        {{ \'song.lyrics_state.unreleased.indicator\' | i18n }}\n      </div>\n      <div ng-if="$ctrl.song.lyrics_state === \'incomplete\'" class="mini_card-metadata">\n        {{ \'song.lyrics_state.incomplete.indicator\' | i18n }}\n      </div>\n    </div>\n  </div>\n</a>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("mini_user_card.html",'<a ng-href="{{ $ctrl.user.url }}" class="mini_card" set-class-before-navigate="mini_card--active">\n  <div class="mini_card-thumbnail">\n    <div\n      class="user_avatar user_avatar--large clipped_background_image--background_fill"\n      clipped-background-image=":: $ctrl.user.avatar.medium.url"\n    ></div>\n  </div>\n  <div class="mini_card-info mini_card-info--centered">\n    <div class="mini_card-title">{{:: $ctrl.user.name }}</div>\n  </div>\n</a>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("mini_video_card.html",'<a\n  ng-href="{{:: $ctrl.video.url}}"\n  title="{{:: $ctrl.video.title}}"\n  class="mini_card"\n>\n  <div\n    class="mini_card-thumbnail mini_card-thumbnail--video clipped_background_image--background_fill"\n    clipped-background-image=":: $ctrl.video.poster_url"\n  >\n    <svg src="play.svg" class="play_button"></svg>\n  </div>\n\n  <div class="mini_card-info">\n    <div class="mini_card-title">{{:: $ctrl.video.title}}</div>\n    <div class="mini_card-metadata">\n      <span>\n        <svg src="clock.svg" class="inline_icon inline_icon--reading_size inline_icon--up_1"></svg>\n        {{:: $ctrl.video.duration | millisToDuration }}\n      </span>\n    </div>\n  </div>\n</a>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("missing_metadata_form.html",'<form ng-submit="$ctrl.submit()" submit-on-cmd-enter>\n  <div ng-repeat="error in $ctrl.errors" class="form_message form_message--error">{{error}}</div>\n\n  <div\n    ng-repeat="(key, type) in $ctrl.missing_params track by key"\n    class="missing_metadata-row"\n  >\n    <div class="u-half_bottom_margin">{{$ctrl.object._type + \'.metadata.\' + key | i18n}}</div>\n\n    <div class="missing_metadata-input" ng-click="$ctrl.show_full_form = true">\n      <square-item-and-iq\n        show-pill="!$ctrl.show_full_form && $ctrl.params.length === 1"\n        iq-params="$ctrl.iq_api.edit_metadata"\n        variants="{full_width: true}"\n      >\n        <div ng-switch="type">\n          <div ng-switch-when="autocomplete_artists">\n            <autocomplete-tags-input\n              bind-to="$ctrl.changes[key]"\n              autocomplete-model="artist"\n              placeholder="{{$ctrl.placeholder}}"\n              input-classes="tags_input square_input u-display_block"\n            ></autocomplete-tags-input>\n          </div>\n          <div ng-switch-when="autocomplete_albums">\n            <autocomplete-tags-input\n              bind-to="$ctrl.changes[key]"\n              autocomplete-model="album"\n              autocomplete-options="{only_editable: true}"\n              placeholder="{{$ctrl.placeholder}}"\n              input-classes="tags_input square_input u-display_block"\n            ></autocomplete-tags-input>\n          </div>\n          <div ng-switch-when="date_components">\n            <component-date-input ng-model="$ctrl.changes[key]"></component-date-input>\n          </div>\n          <div ng-switch-default>\n            <input\n              ng-model="$ctrl.changes[key]"\n              class="square_input square_input--full_width"\n              type="{{type}}"\n            >\n          </div>\n        </div>\n      </square-item-and-iq>\n    </div>\n  </div>\n\n  <div ng-if="$ctrl.show_full_form" class="u-small_top_margin">\n    <square-item-and-iq\n      show-pill="$ctrl.show_full_form"\n      iq-params="$ctrl.iq_api.edit_metadata"\n    >\n      <button\n        type="submit"\n        class="square_button"\n        ng-class="{\'square_button--waiting\': $ctrl.saving}"\n        ng-disabled="$ctrl.saving"\n      >{{$ctrl.saving ? \'Saving\' : \'Save\'}}</button>\n    </square-item-and-iq>\n    <span\n      ng-if="!$ctrl.saving"\n      ng-click="$ctrl.cancel()"\n      class="square_button square_button--transparent square_button--gray"\n    >Cancel</span>\n  </div>\n</form>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("modal_window.html",'<div\n  class="modal_window"\n  ng-class="{\'modal_window--center_content_width_window\': variants.width_of_contents}"\n  ng-hide="hidden"\n  ng-body-class="{\'u-noscroll\': !hidden, \'u-dark_overlay\': !hidden}"\n  ng-click="close({clicked_outside_modal: true})"\n  stop-propagation="click"\n>\n  <kb shortcut="esc" action="close({esc: true})"></kb>\n  <div\n    class="modal_window-content"\n    ng-class="{\n      \'modal_window-content--full_height\': variants.full_height || !!media,\n      \'modal_window-content--narrow_width\': variants.narrow_width,\n      \'modal_window-content--window_width\': variants.window_width,\n      \'modal_window-content--no_max_width\': variants.no_max_width,\n      \'modal_window-content--no_background\': variants.no_background,\n      \'modal_window-content--white_background\': variants.white_background,\n      \'modal_window-content--dark_background\': variants.dark_background,\n      \'modal_window-content--vertically_center_contents\': variants.vertically_center_contents,\n      \'modal_window-content--vertically_center_self\': variants.vertically_center_self,\n      \'modal_window-content--width_of_contents\': variants.width_of_contents,\n      \'modal_window-content--with_media\': !!media,\n    }"\n    stop-propagation="click"\n    click-outside-target\n    ng-style="{\n      top: content_dimensions.top + \'px\',\n      height: content_dimensions.height + \'px\',\n      width: content_dimensions.width + \'px\',\n    }"\n  >\n    <ng-transclude\n      ng-class="{\n        \'u-width_100\': variants.full_width_parent,\n        \'modal_window-content-transclude\': !!media\n      }"\n    ></ng-transclude>\n    <div ng-if="media" class="modal_window-content-media">\n      <media-player\n        media-sources="media"\n        can-edit="false"\n      ></media-player>\n    </div>\n\n    <div\n      ng-if="variants.internal_close"\n      class="modal_window-close_button modal_window-close_button--internal"\n      ng-click="close({close_button: true})"\n    >\n      <svg src="x.svg" class="modal_window-close_button-svg"></svg>\n    </div>\n  </div>\n\n  <div\n    ng-if="!variants.internal_close"\n    class="modal_window-close_button"\n    ng-click="close({close_button: true})"\n  >\n    <svg src="x.svg" class="modal_window-close_button-svg"></svg>\n  </div>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("new_conversation.html",'<div ng-if="!conversation">\n  <div class="text_label text_label--purple form_section_label">Send a new message</div>\n  <compose-message on-sent="ctrl.did_send(message)" yields-is-dirty="yields_is_dirty({is_dirty: is_dirty})"></compose-message>\n</div>\n<conversation-messages ng-if="conversation" conversation="conversation"></conversation-messages>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("other_users_with_ip.html",'<scrollable-data src="$ctrl.infinite_scroll_data" repeat-with="user" scroll-mechanism="button">\n  <a class="u-display_block u-break_word" ng-href="{{user.url}}">{{user.login}}</a>\n  <empty>\n    <div class="u-top_margin">No other users with IP.</div>\n  </empty>\n</scrollable-data>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("paginated_accomplishments.html",'<div class="top_accomplishments u-horizontal_margins u-vertical_margins ng-scope">\n  <span class="top_accomplishments-title text_label text_label--gray">{{:: \'profile_page.top_accomplishment.other\' | i18n }}</span>\n  <div class="u-horizontal_margins">\n    <select-dropdown\n      ng-if="$ctrl.managing"\n      on-select="$ctrl.visibility = selection.value"\n      options="$ctrl.filter_options"\n      variants=":: {right_aligned: true}"\n    ></select-dropdown>\n  </div>\n  <span\n    ng-if="$ctrl.can(\'manage_accomplishments\')"\n    class="text_label text_label--button text_label--purple"\n    ng-click="$ctrl.toggle_managing()"\n  >{{ $ctrl.managing ? \'Done\' : \'Manage\' }}</span>\n</div>\n\n<div class="white_container">\n  <div class="leaderboard">\n    <div class="leaderboard-row leaderboard-row--no_padding">\n      <span class="leaderboard-rank leaderboard-label">Rank</span>\n      <span class="leaderboard-user leaderboard-label">Artist</span>\n      <span class="leaderboard-sort_value leaderboard-label">Artist IQ</span>\n      <span ng-if="$ctrl.managing" class="leaderboard-actions text_label text_label--x_small_text_size text_label--gray">Actions</span>\n    </div>\n    <scrollable-data\n      src="$ctrl.scrollable_data"\n      repeat-with="leaderboard_row"\n      scroll-mechanism="button"\n      button-classes="leaderboard-load_more"\n    >\n      <div\n        ng-if="(leaderboard_row.hidden ? \'hidden\' : \'visible\') === $ctrl.visibility || $ctrl.visibility === \'all\'"\n        class="leaderboard-row leaderboard-row--no_padding"\n        ng-class="{\'leaderboard-row--no_border\': $last, \'leaderboard-row--disabled\': leaderboard_row.hidden}"\n      >\n        <span class="leaderboard-rank" ng-bind="leaderboard_row.iq_rank"></span>\n        <span class="leaderboard-user"><artist-badge artist="leaderboard_row.artist"></artist-badge></span>\n        <span class="leaderboard-sort_value"><span ng-if="$first">+</span>{{leaderboard_row.iq_earned | number:0 }}</span>\n        <span ng-if="$ctrl.managing" class="leaderboard-actions">\n          <span class="text_label u-clickable" ng-click="$ctrl.toggle(leaderboard_row)" ng-class="{\'text_label--purple\': !leaderboard_row.hidden, \'text_label--gray\': leaderboard_row.hidden}">\n            {{ leaderboard_row.hidden ? \'Unhide\' : \'Hide\' }}\n          </span>\n        </span>\n      </div>\n    </scrollable-data>\n  </div>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("paginated_leaderboard.html",'<div class="leaderboard">\n  <scrollable-data\n    src="$ctrl.scrollable_data"\n    repeat-with="leaderboard_row"\n    scroll-mechanism="button"\n    button-classes="leaderboard-load_more"\n    on-empty="$ctrl.on_empty()"\n  >\n    <user-attribution class="leaderboard-row" rank="$index + 1" object="leaderboard_row" ng-class="{\'leaderboard-row--no_border\': $last}"></user-attribution>\n  </scrollable-data>\n  <div\n    ng-if="$ctrl.extra_info"\n    class="text_label text_label--purple text_label--x_small_text_size leaderboard-extra_info"\n    ng-class="{\'leaderboard-extra_info--has_next\': $ctrl.scrollable_data.has_next()}"\n  >{{$ctrl.extra_info}}</div>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("placeholder_spinner.html",'<div\n  class="{{ placeholderClasses }} placeholder"\n  ng-class="{\'placeholder-spinner--inline\': variants.inline}"\n>\n  <svg\n    class="{{ variants.inline? \'placeholder-spinner placeholder-spinner--inline\' : \'placeholder-spinner\' }}"\n    src="circle.svg"\n  ></svg>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("placeholder_text.html",'<p class="placeholder-text">\n  <div class="placeholder-text-line placeholder-text-line--short"></div>\n  <div class="placeholder-text-line placeholder-text-line--long"></div>\n  <div class="placeholder-text-line placeholder-text-line--medium"></div>\n</p>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("play_pause_button.html",'<span ng-hide="playing">\n  <svg src="play_transparent.svg" class="media_control-button"></svg>\n</span>\n<span ng-show="playing">\n  <svg src="pause_transparent.svg" class="media_control-button"></svg>\n</span>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("primis_player.html",'<div\n  ng-if="show_player"\n  class="primis_player-container {{ container_classes }}"\n>\n  <div class="primis_player-player"></div>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("profile_admin_pane.html",'<div ng-if="$ctrl.can(\'view_admin_info\')">\n  <div class="text_label text_label--gray u-horizontal_margins u-top_margin u-half_bottom_margin">Admin Info</div>\n  <div class="white_container">\n    <admin-user-info user="$ctrl.user"></admin-user-info>\n  </div>\n</div>\n\n<div ng-if="$ctrl.can(\'view_roles\')">\n  <div class="text_label text_label--gray u-horizontal_margins u-top_margin u-half_bottom_margin">Manage Roles</div>\n  <div class="white_container">\n    <manage-roles user="$ctrl.user"></manage-roles>\n  </div>\n</div>\n\n<div ng-if="$ctrl.can(\'toggle_verification_status\')">\n  <div class="text_label text_label--gray u-horizontal_margins u-top_margin u-half_bottom_margin">Manage Verification</div>\n  <div class="white_container">\n    <artist-verification user="$ctrl.user" artist="$ctrl.user.artist"></artist-verification>\n  </div>\n</div>\n\n<div ng-if="$ctrl.can_moderate">\n  <div class="text_label text_label--gray u-horizontal_margins u-top_margin u-half_bottom_margin">Moderation</div>\n  <div class="white_container">\n    <user-moderation user="$ctrl.user"></user-moderation>\n  </div>\n</div>\n\n<div class="u-top_margin white_container" ng-if="$ctrl.can(\'view_admin_info\')">\n  <expandable-container title="Other Users With IP" class="u-top_margin">\n    <other-users-with-ip user="$ctrl.user"></other-users-with-ip>\n  </expandable-container>\n</div>\n\n<div class="u-top_margin white_container" ng-if="$ctrl.can(\'view_spam_status\')">\n  <expandable-container title="Spam Status">\n    <spam-status user="$ctrl.user"></spam-status>\n  </expandable-container>\n</div>\n\n<div ng-if="$ctrl.can(\'view_tracked_errors\')" class="u-top_margin white_container">\n  <a\n    class="text_label text_label--purple text_label--button"\n    ng-href="{{$ctrl.view_errors_link}}"\n    target="_blank"\n  >View Bugsnag Errors &rarr;</a>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("profile_all_activity.html",'<div class="profile_list_item profile_list_item--large_padding u-x_large_top_margin">\n  <select-dropdown\n    ng-model="$ctrl.activity_type"\n    options="$ctrl.activity_types"\n  ></select-dropdown>\n</div>\n\n<scrollable-data src="$ctrl.activity_type.profile_activity_scrollable_data" repeat-with="line_item" scroll-mechanism="infinite_scroll" auto-reset="true">\n  <inbox-line-item object=":: line_item" variants="::{active_display:true}"></inbox-line-item>\n</scrollable-data>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("profile_annotation.html",'<div class="standalone_annotation" ng-if="!$ctrl.deleted">\n  <div class="u-large_bottom_margin" ng-if="!($ctrl.variants && $ctrl.variants.hide_annotatable)">\n    <mini-annotatable-card object="$ctrl.referent.annotatable"></mini-annotatable-card>\n  </div>\n\n  <div class="standalone_annotation-referent_fragment" ng-class="{\'standalone_annotation-referent_fragment--with_caret\': !($ctrl.variants && $ctrl.variants.hide_annotatable)}">\n    <referent-fragment>\n      <a\n        ng-href="{{ $ctrl.referent.url }}"\n        class="referent referent--accent_font referent--line_break"\n        ng-class="[\'referent--\' + $ctrl.referent_display_mode]"\n      >{{ $ctrl.referent.is_image ? \'[Image]\' : $ctrl.referent.fragment }}</a>\n    </referent-fragment>\n  </div>\n  <div class="standalone_annotation-annotation">\n    <annotation\n      variants="{hideComments: true}"\n      object="$ctrl.annotation"\n      referent="$ctrl.referent"\n      annotatable-title="$ctrl.referent.annotatable.title"\n    ></annotation>\n  </div>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("profile_artist_pane.html",'<primis-player\n  name="desktop_sitewide_primis_video"\n  container-classes="u-bottom_margin"\n></primis-player>\n\n<div class="white_container" ng-if="$ctrl.user_signed_in || $ctrl.artist.description_preview">\n  <description-referent object="$ctrl.artist.description_annotation" variants="{truncated: true}"></description-referent>\n</div>\n\n<dfp-ad\n  name="desktop_artist_sidebar"\n  ad-classes="[\'u-top_margin u-bottom_margin\']"\n></dfp-ad>\n\n<div ng-init="$ctrl.show_leaderboard = true">\n  <div ng-if="$ctrl.show_leaderboard">\n    <div class="text_label text_label--gray u-horizontal_margins u-top_margin u-half_bottom_margin">Top {{$ctrl.artist.name}} scholars</div>\n\n    <div class="white_container">\n      <paginated-leaderboard\n        source="$ctrl.get_leaderboard_page"\n        per-page="10"\n        on-empty="$ctrl.show_leaderboard = false"\n      ></paginated-leaderboard>\n    </div>\n  </div>\n</div>\n\n<div class="u-text_center u-vertical_margins">\n  <a ng-if="$ctrl.artist.facebook_name" target="_blank" href="{{$ctrl.facebook_url}}" class="square_button square_button--facebook u-quarter_vertical_margins">\n    <svg class="inline_icon" src="facebook.svg"></svg>\n    {{$ctrl.artist.facebook_name}}\n  </a>\n  <a ng-if="$ctrl.artist.twitter_name" target="_blank" href="{{$ctrl.twitter_url}}" class="square_button square_button--twitter u-quarter_vertical_margins">\n    <svg class="inline_icon" src="twitter.svg"></svg>\n    @{{$ctrl.artist.twitter_name}}\n  </a>\n  <a ng-if="$ctrl.artist.instagram_name" target="_blank" href="{{$ctrl.instagram_url}}" class="square_button square_button--instagram u-quarter_vertical_margins">\n    <svg class="inline_icon" src="instagram.svg"></svg>\n    @{{$ctrl.artist.instagram_name}}\n  </a>\n</div>\n\n<div ng-if="$ctrl.can(\'see_short_id\', $ctrl.artist)">\n  <div class="white_container u-top_margin">\n    Artist ID: {{$ctrl.artist.id}}\n  </div>\n</div>\n\n<div class="white_container u-top_margin" ng-if="$ctrl.show_report_abuse">\n  <report-abuse\n    type="artists"\n    object="$ctrl.artist"\n    button-text="Report Artist"\n  ></report-abuse>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("profile_contributions_annotations.html",'<div class="profile_contributions_group-rollup_content">\n  <div ng-if="$ctrl.annotations.length > 1" class="profile_contributions_group-count numbered_indicator numbered_indicator--purple_filled"><span>{{ $ctrl.annotations.length }}</span></div>\n  <profile-annotation\n    ng-repeat="annotation in $ctrl.annotations | limitTo: $ctrl.limit track by annotation.id"\n    annotation="annotation"\n    referent="annotation.referent"\n    variants="::{ hide_annotatable: !$first }"></profile-annotation>\n</div>\n<div\n  ng-if="$ctrl.annotations.length > $ctrl.limit"\n  ng-click="$ctrl.limit = $ctrl.annotations.length"\n  class="full_width_button u-clickable u-quarter_top_margin"\n>\n  {{ $ctrl.annotations.length - 1 }} more {{ \'annotation\' | i18n: {count: $ctrl.annotations.length - 1} }} by {{ $ctrl.user.name }}\n  <svg class="inline_icon inline_icon--short inline_icon--up_1" src="down_arrow.svg"></svg>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("profile_contributions_answers.html",'<div class="profile_contribution">\n  <svg src="comment.svg" class="profile_contribution-icon"></svg>\n\n  <div class="profile_contribution-content">\n    {{:: \'question.answer\' | i18n:{count: $ctrl.answers.length, name: $ctrl.user.name} }} on {{:: $ctrl.answers[0].question.questionable_type | modelHumanName | lowercase | indefinitize }}:\n\n    <div class="profile_contribution-target u-bottom_margin">\n      <a\n        ng-href="{{$ctrl.answers[0].question.questionable.url}}"\n        target="_blank"\n        ng-bind="$ctrl.answers[0].question.questionable.full_title"\n      ></a>\n    </div>\n\n    <div ng-repeat="answer in $ctrl.answers track by answer.id">\n      <question question="answer.question" variants="{link: true, bottom_border: !$last}"></question>\n    </div>\n  </div>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("profile_contributions_articles.html",'<a href="{{:: $ctrl.article.url }}" class="profile_contribution" class="u-horizontal_margins">\n  <svg src="one_document.svg" class="profile_contribution-icon"></svg>\n\n  <div class="profile_contribution-content">\n    <span>{{:: $ctrl.user.name }} wrote an article </span>\n\n    <div class="profile_contribution-target">\n      {{:: $ctrl.article.title }}\n    </div>\n  </div>\n</a>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("profile_contributions_comments.html",'<a href="{{:: $ctrl.commentable.url }}" class="profile_contribution">\n  <svg src="comment.svg" class="profile_contribution-icon"></svg>\n\n  <div class="profile_contribution-content">\n    {{:: $ctrl.comments[0].author.name }}\n\n    <span ng-if="$ctrl.comments[0].disposition === \'comment\'">commented on</span>\n    <span ng-if="$ctrl.comments[0].disposition === \'suggestion\'">added a suggestion to</span>\n\n    <span ng-if="$ctrl.commentable.author">{{:: $ctrl.commentable.author.name}}\'s</span>\n    <span ng-if="!$ctrl.commentable.author">{{:: $ctrl.commentable.type == \'Song\' || $ctrl.commentable.type == \'Video\' ? \'a\' : \'an\'}}</span>\n\n    {{:: ($ctrl.commentable.type | snakeCase) | i18n:{count: 1} }}<span ng-if="$ctrl.commentable.type == \'Annotation\'"> on</span>:\n\n    <div class="profile_contribution-target">{{:: $ctrl.commentable.title }}</div>\n\n    <div class="profile_contribution-content" ng-repeat="comment in $ctrl.comments track by comment.id">\n      <div class="note_bubble u-small_top_margin">\n        <span ng-if="comment.reason">\n          <span class="note_bubble-label">Marked as: </span>{{:: comment.reason.raw_name}}\n        </span>\n        <div ng-bind-html=":: comment.body.html"></div>\n      </div>\n    </div>\n  </div>\n</a>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("profile_contributions_group.html",'<div class="profile_contributions_group" ng-switch="$ctrl.contributions_group.contribution_type">\n\n  <profile-contributions-articles\n    ng-switch-when="article"\n    user="$ctrl.user"\n    contributions-group="$ctrl.contributions_group"\n  ></profile-contributions-articles>\n\n  <profile-contributions-annotations\n    ng-switch-when="annotation"\n    user="$ctrl.user"\n    contributions-group="$ctrl.contributions_group"\n  ></profile-contributions-annotations>\n\n  <profile-contributions-comments\n    ng-switch-when="comment"\n    user="$ctrl.user"\n    contributions-group="$ctrl.contributions_group"\n  ></profile-contributions-comments>\n\n  <profile-contributions-pyongs\n    ng-switch-when="pyong"\n    user="$ctrl.user"\n    contributions-group="$ctrl.contributions_group"\n  ></profile-contributions-pyongs>\n\n  <profile-contributions-transcriptions\n    ng-switch-when="song"\n    user="$ctrl.user"\n    contributions-group="$ctrl.contributions_group"\n  ></profile-contributions-transcriptions>\n\n  <profile-contributions-questions\n    ng-switch-when="question"\n    user="$ctrl.user"\n    contributions-group="$ctrl.contributions_group"\n  ></profile-contributions-questions>\n\n  <profile-contributions-answers\n    ng-switch-when="answer"\n    user="$ctrl.user"\n    contributions-group="$ctrl.contributions_group"\n  ></profile-contributions-answers>\n\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("profile_contributions_pyongs.html",'<a href="{{:: $ctrl.pyong.pyongable.url }}" class="profile_contribution" class="u-horizontal_margins">\n  <svg src="lightning.svg" class="profile_contribution-icon profile_contribution-icon--thin"></svg>\n\n  <div class="profile_contribution-content" ng-switch="$ctrl.pyong.pyongable_type">\n\n    <span ng-switch-when="song">{{:: $ctrl.user.name }} pyonged a song</span>\n    <span ng-switch-when="annotation">{{:: $ctrl.user.name }} pyonged an annotation on</span>\n    <span ng-switch-when="article">{{:: $ctrl.user.name }} pyonged an article</span>\n    <span ng-switch-when="video">{{:: $ctrl.user.name }} pyonged a video</span>\n    <span ng-switch-when="album">{{:: $ctrl.user.name }} pyonged an album</span>\n\n    <div class="profile_contribution-target">\n      {{:: $ctrl.pyong.pyongable.context_title }}\n    </div>\n\n    <div\n      class="note_bubble u-small_top_margin"\n      ng-if="$ctrl.pyong.note.html"\n      ng-bind-html=":: $ctrl.pyong.note.html"\n    ></div>\n  </div>\n</a>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("profile_contributions_questions.html",'<div class="profile_contribution">\n\n  <svg src="comment.svg" class="profile_contribution-icon"></svg>\n\n  <div class="profile_contribution-content">\n    {{:: \'question.question\' | i18n:{count: $ctrl.questions.length, name: $ctrl.user.name} }} on a song:\n\n    <div class="profile_contribution-target u-bottom_margin">\n      <a\n        ng-href="{{$ctrl.questions[0].song.url}}"\n        target="_blank"\n        ng-bind="$ctrl.questions[0].song.full_title"\n      ></a>\n    </div>\n\n    <div ng-repeat="question in $ctrl.questions track by question.id">\n      <question question="question" variants="{link: true, bottom_border: !$last}"></question>\n    </div>\n  </div>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("profile_contributions_transcriptions.html",'<a href="{{:: $ctrl.song.url }}" class="profile_contribution" class="u-horizontal_margins">\n  <svg src="one_document.svg" class="profile_contribution-icon"></svg>\n\n  <div class="profile_contribution-content">\n    <span>{{:: $ctrl.user.name }} {{ $ctrl.user.id === $ctrl.song.lyrics_owner_id && $ctrl.song.lyrics_state === \'complete\' ? \'transcribed\' : \'created a page\' }}</span>\n\n    <div class="profile_contribution-target">\n      {{:: $ctrl.song.full_title }}\n    </div>\n  </div>\n</a>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("profile_followers.html",'<scrollable-data src="$ctrl.scrollable_data" repeat-with="user" scroll-mechanism="infinite_scroll">\n  <div class="profile_list_item profile_list_item--large_padding">\n    <div class="u-float_left">\n      <user-badge size="x_small" object="user"></user-badge>\n    </div>\n  </div>\n</scrollable-data>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("profile_identity.html",'<div class="profile_identity">\n  <div class="profile_identity-text">\n    <h1 class="profile_identity-name_iq_and_role_icon u-hair_bottom_margin">\n      {{ $ctrl.artist.name || \'@\' + $ctrl.user.login }}\n      <span ng-if="$ctrl.user" class="profile_identity-iq tag_label tag_label--yellow_background" ng-bind="$ctrl.user.iq | number:0"></span>\n    </h1>\n    <div ng-if="$ctrl.artist.alternate_names.length" class="profile_identity-alternate_names">\n      AKA: <span ng-repeat="name in $ctrl.artist.alternate_names | limitTo: $ctrl.alternate_name_limit">{{name}}{{($last) ? \'\' : \', \'}}</span><span ng-if="$ctrl.more_alternate_names_to_show()">...</span>\n      <span\n        ng-click="$ctrl.show_all_alternate_names()"\n        ng-if="$ctrl.more_alternate_names_to_show()"\n        class="profile_identity-alternate_names-see_all u-clickable"\n      >See All </span>\n    </div>\n    <span class="profile_identity-subhead">\n      <span ng-if="$ctrl.artist && $ctrl.user">@{{$ctrl.user.login}}</span>\n      <span ng-if="$ctrl.artist && $ctrl.user.role_for_display"> | </span>\n      <span ng-if="$ctrl.user.role_for_display" tether-drop-target ng-class="{\'u-clickable\':$ctrl.user_has_more_than_one_role()}">\n        <role-icon\n          ng-if="$ctrl.user.role_for_display"\n          role="$ctrl.user.role_for_display"\n          has-checky="$ctrl.user.is_verified"\n        ></role-icon>\n        {{ \'role.types.\' + $ctrl.user.role_for_display | i18n: {count:1, defaultValue: $ctrl.user.role_for_display} }}\n        <svg ng-if="$ctrl.user_has_more_than_one_role()" src="down_arrow.svg" class="inline_icon inline_icon--short inline_icon--up_1 inline_icon--gray"></svg>\n        <tether-drop ng-if="$ctrl.user_has_more_than_one_role()" show-on="click" position="bottom center">\n          <div class="tooltip tooltip--tiny">\n            <div class="tooltip-plain_text_list_item" ng-repeat="role in $ctrl.user.roles_for_display">\n              <span>\n                <role-icon\n                  role="role"\n                  has-checky="role === \'verified_artist\'"\n                ></role-icon>\n                {{ \'role.types.\' + role  | i18n: {count:1} }}\n              </span>\n            </div>\n          </div>\n        </tether-drop>\n      </span>\n    </span>\n  </div>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("profile_page.html",'<div class="leaderboard_ad_container">\n  <leaderboard-ad\n    name="{{$ctrl.display_as_artist() ? \'desktop_artist_leaderboard\' : \'desktop_user_leaderboard\'}}"\n  ></leaderboard-ad>\n</div>\n\n<div class="profile_header">\n  <div class="banner_image banner_image--more_transparent_gradient">\n    <div class="banner_image-blurred_image" clipped-background-image="$ctrl.header_url()"></div>\n  </div>\n  <div class="column_layout">\n    <div class="column_layout-column_span column_layout-column_span--secondary">\n      <div\n        class="user_avatar profile_header-avatar clipped_background_image--background_fill"\n        ng-class="{\'profile_header-avatar--verified\': $ctrl.user.is_verified}"\n        clipped-background-image="$ctrl.avatar_url()"\n        ng-show="!$ctrl.show_artist_pane"\n      ></div>\n    </div>\n    <div class="column_layout-column_span column_layout-column_span--primary">\n      <div class="profile_header-tabs profile_tabs" ng-init="$ctrl.change_state(\'description\')">\n        <h3\n          ng-click="$ctrl.change_state(\'description\')"\n          class="profile_tabs-tab"\n          ng-class="{\'profile_tabs-tab--selected\': $ctrl.state === \'description\'}"\n        ><svg src="star.svg" class="inline_icon inline_icon--white inline_icon--reading_size inline_icon--up_3 u-right_half_margin"></svg> Featured</h3>\n        <h3\n          ng-if="$ctrl.display_as_artist() && $ctrl.can(\'view_contribution_opportunities\', $ctrl.artist)"\n          ng-click="$ctrl.change_state(\'opportunities\')"\n          class="profile_tabs-tab"\n          ng-class="{\'profile_tabs-tab--selected\': $ctrl.state === \'opportunities\'}"\n        >Earn IQ</h3>\n        <h3\n          ng-click="$ctrl.change_state(\'followers\')"\n          class="profile_tabs-tab"\n          ng-class="{\'profile_tabs-tab--selected\': $ctrl.state === \'followers\'}"\n        ><span class="profile_tabs-tab-count">{{ ($ctrl.artist || $ctrl.user).followers_count | number:0 }}</span> Followers</h3>\n        <h3\n          ng-if="$ctrl.display_as_user()"\n          ng-click="$ctrl.change_state(\'follows\')"\n          class="profile_tabs-tab"\n          ng-class="{\'profile_tabs-tab--selected\': $ctrl.state === \'follows\'}"\n        ><span class="profile_tabs-tab-count">{{ $ctrl.user.followed_users_count | number:0 }}</span> Following</h3>\n        <h3\n            ng-if="$ctrl.can(\'view_activity_stream\', $ctrl.user) || $ctrl.can(\'view_activity_stream\', $ctrl.artist)"\n            ng-click="$ctrl.change_state(\'all_activity\')"\n            class="profile_tabs-tab"\n            ng-class="{\'profile_tabs-tab--selected\': $ctrl.state === \'all_activity\'}"\n        >All Activity</h3>\n      </div>\n    </div>\n  </div>\n</div>\n\n<div class="column_layout" ng-show="!$ctrl.show_artist_pane" ng-switch="$ctrl.state">\n  <div class="column_layout-column_span column_layout-column_span--secondary">\n    <div class="profile_identity_and_description">\n      <profile-identity artist="$ctrl.artist" user="$ctrl.user"></profile-identity>\n      <div class="profile_identity_and_description-action_row">\n        <follow-button\n          ng-if="$ctrl.artist"\n          type="artist"\n          object="$ctrl.artist"\n        ></follow-button>\n        <follow-button\n          ng-if="!$ctrl.artist && $ctrl.user"\n          type="user"\n          object="$ctrl.user"\n        ></follow-button>\n        <div\n          class="square_button"\n          ng-click="$ctrl.show_conversation_modal = true"\n          ng-if="$ctrl.can_message_user"\n        >Message</div>\n        <div\n          class="square_button"\n          ng-if="$ctrl.can_edit_profile"\n          ng-click="$ctrl.show_edit_artist_profile_modal = true"\n        ><svg class="inline_icon inline_icon--reading_size inline_icon--up_1" src="pencil.svg"></svg> Edit</div>\n      </div>\n      <div\n        ng-if="$ctrl.artist.is_verified && $ctrl.user.is_verified && $ctrl.user.annotations_count > 0"\n        class="u-quarter_top_margin u-text_center"\n        ng-click="$ctrl.change_state(\'description\'); $ctrl.scroll_to(\'verified_annotations\')"\n      >\n        <span class="text_label text_label--button text_label--verified text_label--x_small_text_size">\n          Read {{ $ctrl.artist.name }}\'s Verified Annotations\n        </span>\n      </div>\n      <div\n        ng-click="$ctrl.open_all_songs_pane()"\n        ng-if="$ctrl.artist_has_more_songs && !$ctrl.artist_songs.length"\n        class="u-text_center u-top_margin"\n      >\n        <span class="text_label text_label--button text_label--purple">\n          Show all songs {{:: $ctrl.artist.name }} appears on\n        </span>\n      </div>\n      <div class="u-top_margin" ng-switch="$ctrl.display_as_artist()">\n        <profile-artist-pane ng-switch-when="true" artist="$ctrl.artist"></profile-artist-pane>\n        <profile-user-pane\n          ng-switch-when="false"\n          user="$ctrl.user"\n          on-statistics-select="$ctrl.change_state(\'description\'); $ctrl.filter_activity_by_type(statistics_type)"\n        ></profile-user-pane>\n      </div>\n      <profile-admin-pane\n        ng-if="$ctrl.user"\n        user="$ctrl.user"\n        view-errors-link="$ctrl.bugsnag_link"\n      ></profile-admin-pane>\n    </div>\n  </div>\n\n  <artist-songs-modal\n    ng-if="$ctrl.artist"\n    artist="$ctrl.artist"\n    yields-open="$ctrl.open_all_songs_pane = open"\n  ></artist-songs-modal>\n  <div class="column_layout-column_span column_layout-column_span--primary" ng-switch-when="description">\n    <artist-songs-and-albums\n      ng-if="$ctrl.artist"\n      artist="$ctrl.artist"\n      artist-songs="$ctrl.artist_songs"\n      artist-albums="$ctrl.artist_albums"\n      artist-has-more-songs="$ctrl.artist_has_more_songs"\n      open-all-songs-pane="$ctrl.open_all_songs_pane()"\n    ></artist-songs-and-albums>\n\n    <div ng-if="$ctrl.user" scroll-point="verified_annotations">\n      <div ng-if="$ctrl.pinned_annotations.length" class="text_label text_label--gray u-xx_large_top_margin">\n        <svg src="star.svg" class="inline_icon inline_icon--gray inline_icon--reading_size inline_icon--up_3"></svg>\n        Pinned {{ \'annotation\' | i18n: { count: $ctrl.pinned_annotations.length } }}\n      </div>\n\n      <div ng-repeat="annotation in $ctrl.pinned_annotations" class="u-half_vertical_margins">\n        <profile-annotation annotation="annotation" referent="annotation.referent"></profile-annotation>\n      </div>\n\n      <div class="profile_list_item profile_list_item--large_padding u-x_large_top_margin" scroll-point="user_activity">\n        <span class="text_label text_label--gray">\n          {{ $ctrl.user.name }}\'s Contributions\n        </span>\n        <div class="profile_list_item-dropdown_container">\n          <span class="u-half_right_margin" ng-if="$ctrl.filter_by_contribution_type.sort.length > 0">\n            <select-dropdown\n              on-select="$ctrl.filter_activity_by($ctrl.filter_by_contribution_type, selection)"\n              options="$ctrl.filter_by_contribution_type.sort"\n              variants=":: {right_aligned: true, gray: true}"\n            ></select-dropdown>\n          </span>\n          <select-dropdown\n            on-select="$ctrl.filter_activity_by(selection)"\n            options="$ctrl.user_activity_sort_options_by_filter"\n            selection="$ctrl.filter_by_contribution_type"\n            variants=":: {right_aligned: true}"\n          ></select-dropdown>\n        </div>\n      </div>\n\n      <scrollable-data\n        src="$ctrl.user_contributions_scrollable_data"\n        scroll-mechanism="infinite_scroll"\n        repeat-with="contributions_group"\n        preload="$ctrl.filter_by_contribution_type.filter ? [] : $ctrl.preloaded_user_activity"\n        auto-reset="true"\n      >\n        <div\n          ng-if="!$ctrl.filter_by_contribution_type.filter && (($scrollable_data_ctrl.models[$index - 1].date | millisecondsToSeconds | date: \'longDate\') !== (contributions_group.date | millisecondsToSeconds | date: \'longDate\'))"\n          class="text_label text_label--gray u-x_large_top_margin u-hair_bottom_margin"\n        >\n          <svg src="calendar.svg" class="inline_icon inline_icon--gray inline_icon--reading_size inline_icon--up_3"></svg> {{:: contributions_group.date | millisecondsToSeconds | date: "longDate" }}\n        </div>\n        <profile-contributions-group user="$ctrl.user" contributions-group="contributions_group"></profile-contributions-group>\n        <empty>\n          <div class="u-top_margin">\n            Looks like {{$ctrl.user.name}} doesn\'t have any {{\n            $ctrl.filter_by_contribution_type.filter ?\n            ($ctrl.filter_by_contribution_type.i18n_key | i18n | lowercase) :\n            \'contributions\'\n            }}.\n          </div>\n        </empty>\n      </scrollable-data>\n    </div>\n  </div>\n\n  <div class="column_layout-column_span column_layout-column_span--primary" ng-switch-when="opportunities">\n    <div class="u-x_large_top_margin u-right_margin">\n      <artist-opportunities artist="$ctrl.artist"></artist-opportunities>\n    </div>\n  </div>\n\n  <div class="column_layout-column_span column_layout-column_span--primary" ng-switch-when="followers">\n    <div class="u-x_large_top_margin u-right_margin">\n      <profile-followers artist="$ctrl.artist" user="$ctrl.user"></profile-followers>\n    </div>\n  </div>\n\n  <div class="column_layout-column_span column_layout-column_span--primary" ng-switch-when="follows">\n    <div class="u-x_large_top_margin u-right_margin">\n      <profile-followers artist="$ctrl.artist" user="$ctrl.user" follows="true"></profile-followers>\n    </div>\n  </div>\n\n  <div class="column_layout-column_span column_layout-column_span--primary" ng-switch-when="all_activity">\n    <div class="u-x_large_top_margin u-right_margin">\n      <profile-all-activity user="$ctrl.user" artist="$ctrl.artist"></profile-all-activity>\n    </div>\n  </div>\n\n</div>\n\n<modal-window\n  ng-if="$ctrl.show_edit_artist_profile_modal"\n  on-close="$ctrl.show_edit_artist_profile_modal = undefined"\n>\n  <div class="column_layout" ng-init="$ctrl.current_edit_panel = $ctrl.can_edit_artist_profile ? \'show_edit_artist_profile_modal\' : \'show_edit_user_profile_modal\'">\n    <div class="column_layout-column_span column_layout-column_span--secondary">\n      <div\n        ng-if="$ctrl.can_edit_artist_profile"\n        ng-click="$ctrl.current_edit_panel = \'show_edit_artist_profile_modal\'"\n        ng-class="{\'toggleable_list_item--selected\':$ctrl.current_edit_panel === \'show_edit_artist_profile_modal\'}"\n        class="toggleable_list_item"\n      >Edit Artist Profile</div>\n      <div\n        ng-if="$ctrl.can_edit_user_profile"\n        ng-click="$ctrl.current_edit_panel = \'show_edit_user_profile_modal\'"\n        ng-class="{\'toggleable_list_item--selected\':$ctrl.current_edit_panel === \'show_edit_user_profile_modal\'}"\n        class="toggleable_list_item"\n      >Edit User Profile</div>\n      <div\n          ng-if="$ctrl.can_edit_user_profile"\n          ng-click="$ctrl.current_edit_panel = \'show_edit_user_email_preferences_modal\'"\n          ng-class="{\'toggleable_list_item--selected\':$ctrl.current_edit_panel === \'show_edit_user_email_preferences_modal\'}"\n          class="toggleable_list_item"\n      >Edit Email Preferences</div>\n      <div\n        ng-if="$ctrl.can(\'merge\', $ctrl.artist)"\n        ng-click="$ctrl.current_edit_panel = \'show_merge_artist_modal\'"\n        ng-class="{\'toggleable_list_item--selected\':$ctrl.current_edit_panel === \'show_merge_artist_modal\'}"\n        class="toggleable_list_item toggleable_list_item--last"\n      >Merge artists</div>\n    </div>\n\n    <div class="column_layout-column_span column_layout-column_span--primary" ng-switch="$ctrl.current_edit_panel">\n      <div ng-switch-when="show_edit_artist_profile_modal">\n        <edit-artist-profile\n          artist="$ctrl.artist"\n          close="$ctrl.show_edit_artist_profile_modal = undefined"\n        ></edit-artist-profile>\n      </div>\n\n      <div ng-switch-when="show_edit_user_profile_modal">\n        <edit-user-profile\n          user="$ctrl.user"\n          disable-image-edit="$ctrl.artist && !$ctrl.community_artist"\n          disable-user-bio-edit="$ctrl.artist && !$ctrl.community_artist"\n          close="$ctrl.show_edit_artist_profile_modal = undefined"\n        ></edit-user-profile>\n      </div>\n\n      <div ng-switch-when="show_merge_artist_modal">\n        <merge-artist-form artist="$ctrl.artist"></merge-artist-form>\n      </div>\n\n      <div ng-switch-when="show_edit_user_email_preferences_modal">\n        <edit-user-email-preferences\n          user="$ctrl.user"\n          close="$ctrl.show_edit_artist_profile_modal = undefined"\n        ></edit-user-email-preferences>\n      </div>\n    </div>\n  </div>\n</modal-window>\n\n<modal-window\n  ng-if="$ctrl.show_conversation_modal"\n  on-close="$ctrl.attempt_close(!$ctrl.is_conversation_dirty(), $ctrl.close_conversation_modal)"\n  variants="{full_height: true}"\n>\n  <conversation-with-user user="$ctrl.user" yields-is-dirty="$ctrl.is_conversation_dirty = is_dirty"></conversation-with-user>\n</modal-window>\n\n<global-error-message></global-error-message>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("profile_user_pane.html",'<div class="white_container">\n  <div class="rich_text_formatting">\n    <div ng-if="$ctrl.user.about_me.html" ng-bind-html="$ctrl.user.about_me.html"></div>\n    <span ng-if="!$ctrl.user.about_me.html">{{\'profile_page.about_me.default\' | i18n:{user_login: $ctrl.user.login} }}</span>\n  </div>\n</div>\n\n<div class="text_label text_label--gray u-horizontal_margins u-vertical_margins">Stats</div>\n<div class="u-vertical_margins">\n  <statistics-panel user="$ctrl.user" on-select="$ctrl.on_statistics_select({statistics_type: type})"></statistics-panel>\n</div>\n\n<dfp-ad\n  name="desktop_user_sidebar"\n  ad-classes="[\'u-top_margin u-bottom_margin\']"\n></dfp-ad>\n\n<paginated-accomplishments user="$ctrl.user"></paginated-accomplishments>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("pyong_button_for_header.html",'<div\n  class="pyong_button header_with_cover_art-pyong_button"\n  ng-class="{\n    \'header_with_cover_art-pyong_button--disabled\': ctrl.pyonged(),\n    \'header_with_cover_art-pyong_button--far_hang\': variants.far_hang\n  }"\n  ng-click="ctrl.pyong()"\n  ng-disabled="ctrl.pyonged()"\n  tether-drop-target\n>\n  <span ng-class="{\'nganimate-cycle_upwards\': ctrl.clicked_pyong}">\n    <svg class="header_with_cover_art-pyong_button-icon" src="lightning.svg"></svg>\n  </span>\n  <span ng-bind="pyongable.pyongs_count" class="header_with_cover_art-pyongs_count"></span>\n\n  <tether-drop\n    show-on="always"\n    position="{{ variants.tooltip_position ? variants.tooltip_position : \'bottom center\' }}"\n    ng-if="ctrl.show_pyong_form"\n  >\n    <pyong-form type="type" id="pyongable.id" on-complete="ctrl.show_pyong_form = false"></pyong-form>\n  </tether-drop>\n\n  <tether-drop\n    position="{{ variants.tooltip_position ? variants.tooltip_position : \'bottom center\' }}"\n    ng-if="!ctrl.show_pyong_form"\n    show-on="hover"\n  >\n    <div class="tooltip tooltip--tiny u-half_vertical_margins" ng-cloak stop-propagation="click">\n      <span ng-if="ctrl.pyonged()">{{ \'pressed_pyong_tooltip_text\' | i18n:{text_type: type} }}</span>\n      <span ng-if="!ctrl.pyonged()">{{ \'pyong_tooltip_text\' | i18n:{text_type: type} }}</span>\n    </div>\n  </tether-drop>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("pyong_button_square_button.html",'<div\n  class="pyong_button square_button"\n  ng-click="ctrl.pyong()"\n  ng-disabled="ctrl.pyonged()"\n  ng-class="{\n    \'square_button--transparent nganimate-disable_transition\': variants.transparent,\n    \'square_button--purple\': variants.purple,\n    \'square_button--disabled\': ctrl.pyonged(),\n    \'square_button--depress_on_click\': !ctrl.pyonged(),\n  }"\n  tether-drop-target\n>\n  <span ng-class="{\'nganimate-cycle_upwards\': ctrl.clicked_pyong}">\n    <svg class="inline_icon inline_icon--reading_size inline_icon--up_1" src="lightning.svg"></svg>\n  </span>\n  <span ng-bind="pyongable.pyongs_count"></span>\n\n  <tether-drop\n    show-on="always"\n    position="{{ variants.tooltip_position ? variants.tooltip_position : \'bottom center\' }}"\n    ng-if="ctrl.show_pyong_form"\n  >\n    <pyong-form type="type" id="pyongable.id" on-complete="ctrl.show_pyong_form = false"></pyong-form>\n  </tether-drop>\n\n  <tether-drop\n    position="{{ variants.tooltip_position ? variants.tooltip_position : \'bottom center\' }}"\n    ng-if="!ctrl.show_pyong_form"\n    show-on="hover"\n  >\n    <div class="tooltip tooltip--tiny u-half_vertical_margins" ng-cloak stop-propagation="click">\n      <span ng-if="ctrl.pyonged()">{{ \'pressed_pyong_tooltip_text\' | i18n:{text_type: type} }}</span>\n      <span ng-if="!ctrl.pyonged()">{{ \'pyong_tooltip_text\' | i18n:{text_type: type} }}</span>\n    </div>\n  </tether-drop>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("pyong_form.html",'<form name="form" class="tooltip u-vertical_margins" ng-submit="form.$valid && submit(pyong_note)" submit-on-cmd-enter stop-propagation="click" click-outside="submit(null)" ng-model-options="{updateOn: \'submit\'}">\n  <div ng-if="form.$submitted && form.$invalid" class="form_message form_message--error text_label">\n    Please enter a note to go with your Pyong.\n  </div>\n\n  <div class="u-small_bottom_margin">\n    <textarea required placeholder="Add a note for your followers" ng-disabled="disabled" ng-model="pyong_note" class="square_input square_input--full_width" autofocus="disabled"></textarea>\n  </div>\n\n  <button ng-disabled="disabled" class="square_button square_button--depress_on_click" ng-class="{\'square_button--disabled\': disabled}" type="submit">{{ disabled ? \'Saving\' : \'Add note\' }}</button>\n  <button class="square_button square_button--depress_on_click square_button--transparent square_button--gray" ng-if="!disabled" ng-click="submit(null)" prevent-default-click>No Thanks</button>\n</form>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("question.html",'<li\n  ng-attr-id="{{$ctrl.featured ? $ctrl.question.id : undefined}}"\n  class="question"\n  ng-class="{\n    \'question--top_border\': $ctrl.variants.top_border,\n    \'question--bottom_border\': $ctrl.variants.bottom_border\n  }"\n  class-for-duration="{\'question--animate_flash\': $ctrl.featured ? 3000 : 0}"\n>\n  <div class="question-hanging_actions" ng-if="$ctrl.variants.hanging_actions">\n    <span\n      class="question-hanging_actions-action question-hanging_actions-action--empty_star question-hanging_actions-action--show_on_hover"\n      ng-if="$ctrl.can(\'pin\', $ctrl.question) && !$ctrl.is_pinned()"\n      ng-click="$ctrl.pin()"\n      title="pin"\n    >\n      <svg src="star.svg" class="inline_icon inline_icon--reading_size inline_icon--up_3"></svg>\n    </span>\n    <span\n      class="question-hanging_actions-action"\n      ng-if="$ctrl.can(\'unpin\', $ctrl.question) && $ctrl.is_pinned()"\n      ng-click="$ctrl.unpin()"\n      title="unpin"\n    >\n      <svg src="star.svg" class="inline_icon inline_icon--reading_size inline_icon--up_3"></svg>\n    </span>\n    <span\n      class="question-hanging_actions-action question-hanging_actions-action--show_on_hover"\n      ng-if="$ctrl.can(\'move\', $ctrl.question) && $ctrl.is_pinned()"\n      ng-click="$ctrl.move(\'up\')"\n      title="move up"\n    >\n      <svg src="up_arrow.svg" class="inline_icon inline_icon--gray "></svg>\n    </span>\n    <span\n      class="question-hanging_actions-action question-hanging_actions-action--show_on_hover"\n      ng-if="$ctrl.can(\'move\', $ctrl.question) && $ctrl.is_pinned()"\n      ng-click="$ctrl.move(\'down\')"\n      title="move down"\n    >\n      <svg src="down_arrow.svg" class="inline_icon inline_icon--gray "></svg>\n    </span>\n  </div>\n  <div\n    ng-if="!$ctrl.variants.no_drop_down && !$ctrl.question._editing._form_visible && ($ctrl.can(\'edit\', $ctrl.question) || $ctrl.can(\'archive\', $ctrl.question))"\n    class="question-drop_down square_button square_button--transparent square_button--gray u-float_right"\n    tether-drop-target\n  >\n    <svg\n      src="down_arrow.svg"\n      class="inline_icon inline_icon--up_2 inline_icon--short inline_icon--gray"\n    ></svg>\n\n    <tether-drop show-on="click" position="bottom center" yields-api="$ctrl.tetherApi = tetherApi">\n      <div class="tooltip tooltip--no_padding tooltip--tiny" stop-propagation="click">\n        <span\n          class="tooltip-list_item"\n          ng-if="$ctrl.can(\'edit\', $ctrl.question)"\n          ng-class="{\'tooltip-list_item--disabled\': $ctrl.question._editing._form_visible}"\n          ng-click="$ctrl.start_editing()"\n        >\n          <svg src="pencil.svg" class="inline_icon tooltip-list_item-icon"></svg>\n          Edit Question\n        </span>\n        <square-item-and-iq\n          ng-if="$ctrl.can(\'archive\', $ctrl.question)"\n          iq-params="$ctrl.question.current_user_metadata.iq_by_action.archive"\n          variants="{full_width: true}"\n        >\n          <span\n            class="tooltip-list_item tooltip-list_item--bottom_border"\n            ng-click="$ctrl.archive()"\n          >\n            <svg src="checkmark.svg" class="inline_icon inline_icon--red tooltip-list_item-icon"></svg>\n            Archive Question\n          </span>\n        </square-item-and-iq>\n        <span\n          class="tooltip-list_item"\n          ng-if="$ctrl.answerApi.can_edit()"\n          ng-click="$ctrl.answerApi.start_editing(); $ctrl.tetherApi.hide()"\n        >\n          <svg src="pencil.svg" class="inline_icon tooltip-list_item-icon"></svg>\n          Edit Answer\n        </span>\n        <span\n          class="tooltip-list_item"\n          ng-if="$ctrl.answerApi.can_clear()"\n          ng-click="$ctrl.answerApi.clear_answer(); $ctrl.tetherApi.hide()"\n        >\n          <svg src="x.svg" class="inline_icon inline_icon--red tooltip-list_item-icon"></svg>\n          Clear Answer\n        </span>\n      </div>\n    </tether-drop>\n  </div>\n\n  <div ng-show="!$ctrl.question._editing._form_visible" class="u-bottom_margin">\n    <div class="question-inline_voting">\n      <voting\n        ng-if="!$ctrl.question.answer && $ctrl.question.id"\n        object="$ctrl.question"\n        variants="{\'hide_upvote_text\': true, \'hide_downvote\': true}"\n        type="question"\n        on-unauthorized="$ctrl.prompt_auth = true"\n        vote-total-clicked="$ctrl.show_voters = !$ctrl.show_voters"\n      ></voting>\n    </div>\n    <h3 class="annotation_label">\n      <a ng-if="$ctrl.variants.link" class="annotation_label-underline" ng-href="{{$ctrl.question.url}}">{{$ctrl.question.body}}</a>\n      <span ng-if="!$ctrl.variants.link">{{$ctrl.question.body}}</span>\n    </h3>\n  </div>\n\n  <form\n    name="question_form"\n    class="u-bottom_margin"\n    ng-if="$ctrl.question._editing._form_visible"\n    ng-submit="$ctrl.finish_editing()"\n    ng-model-options="{updateOn: \'submit blur\'}"\n    submit-on-cmd-enter\n    dirtyable\n  >\n    <textarea\n      required\n      autofocus\n      ng-model="$ctrl.question._editing.body"\n      class="square_input square_input--full_width"\n      placeholder="{{ \'question.placeholder\' | i18n }}"\n      maxlength="80"\n    ></textarea>\n\n    <div class="u-small_top_margin">\n      <button\n        type="submit"\n        class="square_button"\n        ng-class="{\'square_button--waiting\': $ctrl.disable_saving_with}"\n        ng-disabled="$ctrl.disable_saving_with"\n      >{{ $ctrl.disable_saving_with || \'Save\' }}</button>\n      <span\n        ng-click="$ctrl.cancel_editing()"\n        class="square_button square_button--transparent square_button--gray"\n        ng-hide="$ctrl.disable_saving_with"\n      >Cancel</span>\n    </div>\n  </form>\n\n  <voters ng-if="$ctrl.show_voters" type="question" object="$ctrl.question"></voters>\n\n  <authentication-form\n    ng-if="$ctrl.prompt_auth"\n    on-cancel="$ctrl.prompt_auth = false"\n    variants="{display_in_context: true}"\n  ></authentication-form>\n\n  <answer\n    question="$ctrl.question"\n    answer="$ctrl.question.answer"\n    yields-api="$ctrl.answerApi = answerApi"\n    on-pending-event="$ctrl.on_pending_event({event: event, result: result})"\n    yields-iq="$ctrl.yields_iq({iq_api: iq_api})"\n    variants="{no_answer_prompt: $ctrl.variants.no_answer_prompt}"\n  ></answer>\n</li>\n\n<div\n  ng-class="{\n    \'u-margin_bottom\': $ctrl.ad_filled,\n    \'question\': $ctrl.ad_filled,\n    \'question--bottom_border\': $ctrl.ad_filled\n  }"\n>\n  <dfp-ad\n    ng-if="$ctrl.variants.monetized"\n    instance-id="question-{{ $ctrl.question.id }}"\n    name="desktop_song_q_and_a"\n    ad-classes="[\'dfp_unit--in_read u-top_margin\']"\n    on-filled="$ctrl.ad_filled = true"\n  ></dfp-ad>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("question_form.html",'<form\n  name="question_form"\n  ng-submit="$ctrl.save()"\n  ng-model-options="{updateOn: \'submit\'}"\n  submit-on-cmd-enter\n  dirtyable\n>\n  <div\n    ng-if="$ctrl.error.validation_errors.body.length"\n    class="form_message form_message--error text_label"\n  >Question {{:: $ctrl.error.validation_errors.body[0]}}</div>\n\n  <div\n    ng-if="$ctrl.thank_you && !$ctrl.saving"\n    class="form_message form_message--success text_label"\n  >Thanks! Your question has been posted.</div>\n\n  <div ng-class="{\'square_form-input_and_label--error\': $ctrl.error.validation_errors.body.length}">\n    <square-item-and-iq\n      show_pill="!$ctrl.showing_full_form"\n      event_type="asked_a_question"\n      variants="{full_width: true}"\n    >\n      <textarea\n        required\n        autosize-init-on-focus\n        placeholder="{{ \'question.placeholder\' | i18n }}"\n        ng-model="$ctrl.question.body"\n        class="square_input square_input--full_width square_input--single_line_height"\n        ng-focus="$ctrl.showing_full_form = true"\n        maxlength="80"\n      ></textarea>\n    </square-item-and-iq>\n  </div>\n\n  <div\n    ng-if="!$ctrl.user_signed_in"\n    ng-show="$ctrl.showing_full_form"\n  >\n    <input\n      required\n      ng-model="$ctrl.question.author_name"\n      class="square_input square_input--full_width u-small_vertical_margins"\n      placeholder="Your name"\n    />\n    <input\n      required\n      ng-model="$ctrl.question.author_email"\n      type="email"\n      class="square_input square_input--full_width"\n      placeholder="Your email address"\n    />\n  </div>\n\n  <div ng-show="$ctrl.showing_full_form" class="u-small_top_margin">\n    <square-item-and-iq event-type="asked_a_question">\n      <button\n        class="square_button"\n        ng-class="{\'square_button--waiting\': $ctrl.saving}"\n        ng-disabled="$ctrl.saving"\n        type="submit"\n      >{{ $ctrl.saving ? \'Submitting\' : \'Submit\' }}</button>\n    </square-item-and-iq>\n    <span\n      ng-click="$ctrl.showing_full_form = false"\n      class="square_button square_button--transparent square_button--gray"\n      ng-hide="$ctrl.saving"\n    >Cancel</span>\n  </div>\n</form>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("question_list.html",'<ul>\n  <question\n    ng-repeat="question in $ctrl.questions | orderBy : $ctrl.sorting_predicates"\n    ng-if="!question._deleted"\n    question="question"\n    variants="{\n      \'bottom_border\': true,\n      \'hanging_actions\': true,\n      monetized: $ctrl.is_monetized(question)\n    }"\n    move-question="$ctrl.move_question(direction, question)"\n    featured="$ctrl.is_featured_question(question)"\n  ></question>\n</ul>\n\n<div class="u-bottom_margin" ng-if="$ctrl.has_next()">\n  <div ng-click="$ctrl.load_more()" class="square_button" ng-hide="$ctrl._loading">Show {{ $ctrl.questions.length > 0 ? \'More\' : \'Questions\' }} ({{ $ctrl.pending_question_count }})</div>\n  <div class="u-vertical_margins" ng-if="$ctrl._loading">\n    <placeholder-spinner></placeholder-spinner>\n  </div>\n</div>\n\n<div class="question">\n  <div class="annotation_label">Ask us a question about this {{ $ctrl.questionable._type | modelHumanName | lowercase }}</div>\n  <question-form\n    on-new-question="$ctrl.questions.push(question)"\n    questionable="$ctrl.questionable"\n  ></question-form>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("reasons_toggle.html",'<div class="reasons">\n  <div class="reasons-help_text">\n    <p>Help us improve this annotation</p>\n    <a href="{{ $ctrl.comment_reasons_help_url }}" target="_blank" class="reasons-help_text-link">Read our contributor guidelines</a>\n  </div>\n  <div class="reasons-columns">\n    <div\n      class="reasons-reason"\n      ng-repeat="reason in $ctrl.comment_reasons track by reason.slug"\n      ng-class="{\'reasons-reason--active\': $ctrl.selectedReason === reason || (!$ctrl.selectedReason && reason.slug === \'other\')}"\n      ng-click="$ctrl.change_reason(reason)"\n    >\n      <div\n        class="reasons-reason-icon reasons-reason-icon--{{ reason.slug }}"\n        title="{{ reason.handle }}"\n      ></div>\n      <div class="reasons-reason-title">{{ reason.handle }}</div>\n    </div>\n  </div>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("recent_signups_page.html",'<div class="recent_signups">\n  <div class="recent_signup-container u-vertical_margins">\n    <div>\n      <span>Recent Signups</span>\n      <span class="u-float_right">\n        <span\n            class="text_label text_label--pink text_label--x_small_text_size"\n            ng-click="$ctrl.filter_spam_state_dropdown_opened = !$ctrl.filter_spam_state_dropdown_opened"\n            click-outside="$ctrl.filter_spam_state_dropdown_opened = false">\n          {{\'sort.\' + $ctrl.filtering_spam_state | i18n}}\n          <svg class="inline_icon inline_icon--short inline_icon--up_1 inline_icon--pink" src="down_arrow.svg"></svg>\n        </span>\n        <div\n          class="tooltip tooltip--tiny tooltip--no_padding tooltip--dock_top_right"\n          ng-show="$ctrl.filter_spam_state_dropdown_opened"\n          ng-click="$ctrl.filter_spam_state_dropdown_opened = false">\n          <div class="tooltip-list_item" ng-repeat="spam_state in [\'unclassified_spam_state\', \'probably_spam\', \'probably_ham\', \'definitely_spam\', \'definitely_ham\']" ng-click="$ctrl.filter_by_spam_state(spam_state);" ng-show="$ctrl.filtering_spam_state !== spam_state">\n            {{:: \'sort.\' + spam_state | i18n }}\n          </div>\n        </div>\n      </span>\n    </div>\n  </div>\n\n  <div class="recent_signup-container">\n    <scrollable-data\n        src="$ctrl.recent_signups_scrollable_data"\n        repeat-with="user_spam_evaluation"\n        scroll-mechanism="infinite_scroll"\n    >\n      <div ng-if="!user_spam_evaluation.marked_spam_state" class="u-vertical_margins">\n        <div class="recent_signup-row">\n          <span class="recent_signup-column">\n            <a ng-href="{{:: user_spam_evaluation.user.url}}">{{:: user_spam_evaluation.user.login }}</a>\n            <br>\n            <div class="recent_signup-date">\n              <small>{{ user_spam_evaluation.signed_up_at | human_readable_datetime }}</small>\n            </div>\n          </span>\n          <span\n            class="recent_signup-column text_label"\n            ng-class="{\'text_label--green\': user_spam_evaluation.spam_state == \'probably_ham\', \'text_label--red\': user_spam_evaluation.spam_state == \'probably_spam\'}" tether-drop-target>\n            {{:: user_spam_evaluation.spam_state }}\n            <tether-drop show-on="hover" position="bottom center">\n              <div class="tooltip tooltip--tiny" stop-propagation="click">\n                <table>\n                  <tr\n                    ng-class="{\n                      \'spam_check_feature--bold\': spam_check_feature.value != 0,\n                      \'spam_check_feature--green\': spam_check_feature.outcome == \'probably_ham\',\n                      \'spam_check_feature--red\': spam_check_feature.outcome == \'probably_spam\'\n                    }"\n                    ng-repeat="spam_check_feature in user_spam_evaluation.spam_check_features | filter:{label: \'!!\'}"\n                    class="spam_check_feature"\n                  >\n                    <td>\n                      <span class="u-horizontal_margins">{{:: spam_check_feature.value }}</span>\n                    </td>\n                    <td>{{:: spam_check_feature.label }}</td>\n                  </tr>\n                </table>\n              </div>\n            </tether-drop>\n          </span>\n          <span class="recent_signup-column">\n            <button\n                ng-disabled="user_spam_evaluation.marking_spam_state"\n                ng-click="$ctrl.mark(\'ham\', user_spam_evaluation)"\n                ng-class="{\'square_button--waiting\': user_spam_evaluation.marking_spam_state}"\n                class="square_button square_button--green square_button--white_background"\n            >Mark {{:: user_spam_evaluation.user.login }} as ham</button>\n          </span>\n          <span class="recent_signup-column">\n            <button\n                ng-disabled="user_spam_evaluation.marking_spam_state"\n                ng-click="$ctrl.mark(\'spam\', user_spam_evaluation)"\n                ng-class="{\'square_button--waiting\': user_spam_evaluation.marking_spam_state}"\n                class="square_button square_button--red square_button--white_background"\n            >Mark {{:: user_spam_evaluation.user.login }} as spam</button>\n          </span>\n        </div>\n      </div>\n    </scrollable-data>\n  </div>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("recirculated_content.html",'<div class="u-xx_large_vertical_margins" ng-if="$ctrl.video_placement.videos.length || $ctrl.stories.length">\n  <div class="text_label text_label--gray">More on Genius</div>\n\n  <div ng-repeat="video in $ctrl.video_placement.videos track by $id(video)">\n    <a\n      ng-href="{{ video.url }}?utm_source=recirculated_content"\n      class="recirculated_content"\n      tracking="click"\n      tracking-event="Recirculated Content"\n      tracking-options="{\n        \'recirculated_content_story\': {target: \'video\', provider: video.provider, provider_id: video.provider_id, id: video.id},\n        \'recirculated_content_type\': \'video\'\n      }"\n    >\n      <div class="recirculated_content-image recirculated_content-image--with_play_button">\n        <img sized-src="video.poster_url" />\n        <svg\n          src="play.svg"\n          class="play_button play_button--small"\n        ></svg>\n      </div>\n      <div class="recirculated_content-info">\n        <div class="recirculated_content-title">\n          {{ video.title }}\n        </div>\n      </div>\n    </a>\n  </div>\n\n  <div ng-repeat="story in $ctrl.stories track by $id(story)">\n    <a\n      ng-href="{{story.behavior.attributes.url}}"\n      class="recirculated_content"\n      tracking="click"\n      tracking-event="Recirculated Content"\n      tracking-options="{\n        \'recirculated_content_story\': story.metadata,\n        \'recirculated_content_url\': story.behavior.attributes.url,\n        \'recirculated_content_type\': story.metadata.target\n      }"\n    >\n      <div class="recirculated_content-image" clipped-background-image="story.appearance.image_url"></div>\n      <div class="recirculated_content-info">\n        <div class="recirculated_content-title">{{ story.appearance.title }}</div>\n      </div>\n    </a>\n  </div>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("referent_editorial_indicator.html",'<div\n  ng-show="highlighted_fragment_id !== fragment_id"\n  ng-if="!referent._deleted && referent.pending_editorial_actions_count > 0"\n  class="referent_editorial_indicator numbered_indicator numbered_indicator--red"\n  data-count="{{ referent.pending_editorial_actions_count }}"\n></div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("referent_fragment_container.html",'<div class="referent_container referent_container--inverse"\n  ng-class="[\'referent_container--\' + referent.display_mode || \'yellow\']"\n>\n  <div ng-transclude="referentHeader"></div>\n\n  <collapsible-content\n    max-collapsed-height="80"\n    min-expansion-height="40"\n    text="show full {{ referent.annotatable.type === \'Song\' ? \'lyric\' : \'quote\' }}"\n    auto-expand="variants.show_full_referent"\n  >\n    <div ng-transclude="referentFragment"></div>\n  </collapsible-content>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("release_date.html",'<div\n  class="metadata_unit"\n  ng-class="{\'metadata_unit--table_row\': variants.table}"\n  ng-if="date_components"\n>\n  <span class="metadata_unit-label">{{\'song.metadata.release_date\' | i18n}}</span>\n  <span class="metadata_unit-info metadata_unit-info--text_only">{{ date_components | imprecise_date }}</span>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("relevant_videos.html",'<div\n  ng-if="$ctrl.video_placement.videos.length > 0"\n  class="videos {{ $ctrl.container_classes }}"\n>\n  <div\n    ng-if="$ctrl.variants.show_container_label"\n    class="text_label text_label--x_small_text_size u-half_bottom_margin"\n  >Recommended Video</div>\n\n  <div ng-class="{\'thumbnail_grid\': $ctrl.variants.two_across}">\n    <div\n      ng-repeat="video in $ctrl.video_placement.videos track by video.id"\n      ng-click="$ctrl.selected_video = video"\n      class="u-clickable"\n      ng-class="{\n        \'thumbnail_grid-grid_element thumbnail_grid-grid_element--half thumbnail_grid-grid_element--no_bottom_margin\': $ctrl.variants.two_across\n      }"\n    >\n      <div\n        class="videos-video_element clipped_background_image--background_fill"\n        clipped-background-image="video.poster_url"\n      >\n        <svg\n          src="play.svg"\n          class="play_button"\n        ></svg>\n      </div>\n      <h3 class="videos-title" ng-bind="video.short_title"></h3>\n    </div>\n  </div>\n</div>\n\n<videos-modal\n  ng-if="$ctrl.selected_video"\n  object="$ctrl.object"\n  initial-video="$ctrl.selected_video"\n  on-close="$ctrl.selected_video = null"\n  build-tracking-data="$ctrl.video_placement.tracking_data(video)"\n></videos-modal>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("report_abuse.html",'<button\n  class="{{ ctrl.buttonClass || \'square_button\' }}"\n  ng-click="ctrl.show_form = !ctrl.show_form; ctrl.onClick && ctrl.onClick()"\n  ng-disabled="ctrl.reported_abuse"\n  ng-class="{\'square_button--disabled\': ctrl.reported_abuse}"\n>{{ ctrl.reported_abuse ? \'Reported\' : (ctrl.buttonText || \'Report\') }}</button>\n\n<modal-window\n  ng-if="ctrl.show_form"\n  on-close="ctrl.show_form = false"\n  variants="{narrow_width: true, white_background: true}"\n>\n  <form\n    ng-submit="ctrl.submit()"\n    class="report_abuse-form"\n    name="ctrl.report_abuse_form"\n    submit-on-cmd-enter\n    dirtyable\n    novalidate\n  >\n    <div\n      ng-if="ctrl.has_error"\n      class="report_abuse-error_msg"\n    >An unexpected error occurred</div>\n\n    <div class="report_abuse-input_group">\n      <label\n        for="report_abuse_reason_{{ ctrl.reportable.id }}"\n        class="report_abuse-input_group-label"\n      >Reason</label>\n      <div class="square_select_group">\n        <div class="square_select_group-single u-width_100">\n          <select\n            id="report_abuse_reason_{{ ctrl.reportable.id }}"\n            name="reason"\n            ng-options="reason.label as reason.value for reason in ctrl.reasons"\n            ng-model="ctrl.reason"\n            class="select_input"\n            required\n          >\n            <option value="" disabled selected>Select Reason</option>\n          </select>\n        </div>\n      </div>\n      <div class="report_abuse-input_error" ng-show="ctrl.report_abuse_form.$submitted || ctrl.report_abuse_form.reason.$touched">\n        <div ng-show="ctrl.report_abuse_form.reason.$error.required">Report reason is required</div>\n      </div>\n    </div>\n\n    <div class="report_abuse-input_group">\n      <label\n        for="report_abuse_details_{{ ctrl.reportable.id }}"\n        class="report_abuse-input_group-label"\n      >Details</label>\n      <textarea\n        id="report_abuse_details_{{ ctrl.reportable.id }}"\n        class="square_input square_input--full_width"\n        name="details"\n        ng-model="ctrl.details"\n        placeholder="Enter abuse report details"\n        ng-required="ctrl.reason === \'other\'"\n      ></textarea>\n      <div class="report_abuse-input_error" ng-show="ctrl.report_abuse_form.$submitted || ctrl.report_abuse_form.details.$touched">\n        <div ng-show="ctrl.report_abuse_form.details.$error.required">Report details are required</div>\n      </div>\n    </div>\n\n    <div class="report_abuse-input_group">\n      <button\n        type="submit"\n        class="square_button"\n        ng-class="{\'square_button--disabled\': ctrl.submitting}"\n        ng-disabled="ctrl.submitting"\n      >Submit</button>\n      <button\n        type="button"\n        class="square_button square_button--transparent square_button--gray"\n        ng-click="ctrl.show_form = false"\n      >Cancel</button>\n    </div>\n\n    <ng-container ng-if="!ctrl.loggedIn">\n      <div class="report_abuse-recaptcha_info">\n       This site is protected by reCAPTCHA and the Google\n         <a href="https://policies.google.com/privacy">Privacy Policy</a> and\n         <a href="https://policies.google.com/terms">Terms of Service</a> apply.\n      </div>\n    </ng-container>\n  </form>\n\n</modal-window>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("role_icon.html",'<svg ng-if="hasChecky" class="checky" src="checky.svg"></svg>\n<span ng-if="!hasChecky" ng-switch="role" class="user_badge-role_icon user_badge-role_icon--{{ role }}">\n  <svg ng-switch-when="mediator" src="role_icon_mediator_square.svg"></svg>\n  <svg ng-switch-when="transcriber" src="role_icon_transcriber_square.svg"></svg>\n  <svg ng-switch-when="editor" src="role_icon_editor_star.svg"></svg>\n  <svg ng-switch-when="moderator" src="role_icon_moderator_diamond.svg"></svg>\n  <svg ng-switch-when="staff" src="role_icon_staff_circle.svg"></svg>\n  <svg ng-switch-when="contributor" src="role_icon_contributor_equilateral_triangle.svg"></svg>\n</span>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("role_selection_dialog.html",'<form name="song_form" ng-submit="submit()">\n  <div class="form_section_label text_label text_label--purple" ng-bind="prompt"></div>\n  <div class="square_form">\n    <div ng-repeat="role in available_roles | orderBy:role" class="square_form-input_and_label square_form-input_and_label--half_width">\n      <label class="square_checkbox square_form-standard_element_margin">\n        <input type="checkbox" stop-propagation="click" ng-model="backing[role]">\n        <div class="text_label">{{ \'role.types.\' + role | i18n:{count:2} }}</div>\n      </label>\n    </div>\n  </div>\n  <button type="submit" class="modal_window-save_button square_button square_button--purple u-small_vertical_margins" ng-class="{\'square_button--waiting\': saving}" ng-bind="saving ? \'Saving\' : \'Save\'"></button>\n  <div ng-if="error" ng-bind="error" class="form_message form_message--error"></div>\n</form>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("scrollable_data.html",'<ng-transclude ng-transclude-slot="empty" ng-if="!$scrollable_data_ctrl.loading && $scrollable_data_ctrl.models.length === 0">\n  <div>{{ $scrollable_data_ctrl.empty_message || \'Nothing here.\' }}</div>\n</ng-transclude>\n\n<div ng-if="$scrollable_data_ctrl.models.length" class="{{$scrollable_data_ctrl.container_classes}}">\n  <transclude-injecting-local-scope\n    ng-repeat="scrollable_data_model in $scrollable_data_ctrl.models track by $id(scrollable_data_model)"\n    copy-value-to-scope="{key: $scrollable_data_ctrl.repeat_with, value: scrollable_data_model}"\n    class="u-display_block {{$scrollable_data_ctrl.item_classes}}"\n  ></transclude-injecting-local-scope>\n</div>\n\n<div ng-if="$scrollable_data_ctrl.has_next()" ng-switch="$scrollable_data_ctrl.scroll_mechanism">\n  <ng-transclude\n    ng-switch-when="button"\n    ng-transclude-slot="show_more"\n    ng-click="$scrollable_data_ctrl.load_next()"\n    ng-hide="$scrollable_data_ctrl.loading"\n  >\n    <div class="{{$scrollable_data_ctrl.button_classes || \'square_button\'}}">Show More</div>\n  </ng-transclude>\n\n  <div ng-switch-when="infinite_scroll">\n    <div\n      infinite-scroll="$scrollable_data_ctrl.load_next()"\n      infinite-scroll-disabled="!$scrollable_data_ctrl.has_next()"\n      yields-on-load-more="$scrollable_data_ctrl.more_loaded_callback = callback"\n    ></div>\n  </div>\n</div>\n\n<div class="u-vertical_margins" ng-if="$scrollable_data_ctrl.loading">\n  <placeholder-spinner></placeholder-spinner>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("search_form.html",'<form\n  action="/search"\n  method="get"\n  class="global_search global_search--{{ style }}"\n  ng-class="{\'global_search--high_z_index\': focused}"\n  click-outside="unfocus()"\n>\n  <kb shortcut="/" action="focus()"></kb>\n\n  <input\n    autocomplete="off"\n    ng-click="focus()"\n    ng-model="search_text"\n    ng-readonly="submitting"\n    name="q"\n    type="text"\n    class="quick_search autocomplete search quick_search--{{ style }}"\n    placeholder="Search lyrics &amp; more"\n    required\n  />\n\n  <div class="global_search-submit_button u-clickable" ng-click="submit_form()">\n    <svg src="magnifying_glass.svg" class="global_search-search_icon"></svg>\n  </div>\n\n  <div\n    ng-show="focused && search_text"\n    class="search_results_autocomplete_container"\n    links-navigable-by-arrow-keys="$ctrl.refresh_links = refresh"\n  >\n    <div\n      class="feed_dropdown feed_dropdown--medium_width feed_dropdown--left_align feed_dropdown--darker_background"\n      stop-propagation="click"\n      scroll-only-this-element=""\n    >\n      <search-results\n        search-text="search_text"\n        sections="sections"\n        scroll-container-selector=".feed_dropdown"\n        on-filter="$ctrl.refresh_links()"\n        on-sections-change="$ctrl.refresh_links()"\n        on-load-next="$ctrl.refresh_links(false)"\n        on-animation-end="$ctrl.refresh_links()"\n      ></search-results>\n    </div>\n  </div>\n</form>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("search_result_item.html",'<div\n  class="u-quarter_vertical_margins u-clickable"\n  ng-switch="$ctrl.hit.type"\n  tracking="click"\n  tracking-event="Search Result Tap"\n>\n  <mini-song-card\n    object="$ctrl.hit.result"\n    ng-switch-when="song"\n    search-highlights="$ctrl.hit.highlights"\n  ></mini-song-card>\n  <mini-artist-card object="$ctrl.hit.result" ng-switch-when="artist"></mini-artist-card>\n  <mini-user-card object="$ctrl.hit.result" ng-switch-when="user"></mini-user-card>\n  <mini-article-card object="$ctrl.hit.result" ng-switch-when="article"></mini-article-card>\n  <mini-video-card object="$ctrl.hit.result" ng-switch-when="video"></mini-article-card>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("search_result_items.html",'<div ng-repeat="hit in $ctrl.results | limitTo: $ctrl.limit_to">\n  <search-result-item hit="hit"></search-result-item>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("search_result_paginated_section.html",'<div class="text_label u-text_center u-large_vertical_margins">\n  All {{:: $ctrl.section_type }} results\n</div>\n\n<scrollable-data\n  src="$ctrl.infinite_scroll_data"\n  repeat-with="hit"\n  scroll-mechanism="infinite_scroll"\n  container-classes="{{$ctrl.section_type === \'album\' ? \'thumbnail_grid white_container\' : \'\'}}"\n  item-classes="{{$ctrl.section_type === \'album\' ? \'thumbnail_grid-grid_element thumbnail_grid-grid_element--third u-clickable\' : \'\'}}"\n>\n  <vertical-search-result-item\n    ng-if="$ctrl.section_type === \'album\'"\n    hit="hit"\n  ></vertical-search-result-item>\n\n  <search-result-item\n    ng-if="$ctrl.section_type !== \'album\'"\n    hit="hit"\n  ></search-result-item>\n\n  <empty>\n    <div class="u-horizontal_margins">\n      No search results found.\n    </div>\n  </empty>\n</scrollable-data>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("search_result_section.html",'<div ng-if="$ctrl.section.hits.length > 0">\n  <div\n    class="search_results_label text_label text_label--x_small_text_size text_label--gray"\n    ng-class="{\'search_results_label--no_horizontal_padding\': $ctrl.variants.no_horizontal_label_padding}"\n    ng-bind=":: \'search.sections.\' + $ctrl.section.type + \'.title\' | i18n"\n  ></div>\n  <div ng-switch="$ctrl.section.type === \'album\' || ($ctrl.section.type === \'top_hit\' && $ctrl.section.hits[0].index === \'album\')">\n    <vertical-search-result-items\n      ng-switch-when="true"\n      results="$ctrl.section.hits"\n      limit-to="$ctrl.limit_to"\n    ></vertical-search-result-items>\n\n    <search-result-items\n      ng-switch-default\n      results="$ctrl.section.hits"\n      limit-to="$ctrl.limit_to"\n    ></search-result-items>\n  </div>\n\n  <a\n    href=""\n    prevent-default-click\n    ng-if="$ctrl.section.type !== \'top_hit\'"\n    ng-click="$ctrl.on_show_more({section_type: $ctrl.section.type})"\n    class="full_width_button u-bottom_margin"\n    tracking="click"\n    tracking-event="Search More Results Page View"\n  >\n    Show more {{:: \'search.sections.\' + $ctrl.section.type + \'.title\' | i18n | lowercase }}\n    <svg class="inline_icon inline_icon--reading_size inline_icon--up_1" src="right_arrow.svg"></svg>\n  </a>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("search_results.html",'<div class="feed_dropdown-header feed_dropdown-header--bottom_border">\n  <span class="text_label">Search results</span>\n</div>\n\n<div class="u-xxx_large_vertical_margins" ng-if="!$ctrl.sections">\n  <placeholder-spinner></placeholder-spinner>\n</div>\n\n<div class="global_search-search_results">\n  <div ng-hide="$ctrl.filter" class="global_search-search_results-sections nganimate-slide_out_left nganimate-slide_from_left">\n    <search-result-section\n      ng-repeat="section in $ctrl.sections"\n      section="section"\n      limit-to="section.type === \'top_hit\' ? 1 : 3"\n      on-show-more="$ctrl.filter = section_type; $ctrl.save_scroll_and_scroll_top(); $ctrl.on_filter()"\n    ></search-result-section>\n\n    <div ng-if="$ctrl.sections && !$ctrl.has_results()" class="u-xxx_large_vertical_margins u-text_center">\n      No results\n    </div>\n  </div>\n\n  <div\n    ng-if="$ctrl.filter"\n    class="global_search-search_results-show_more nganimate-slide_out_right nganimate-slide_from_right"\n  >\n    <a\n      href=""\n      prevent-default-click\n      ng-click="$ctrl.filter = null; $ctrl.restore_scroll(); $ctrl.on_filter()"\n      class="global_search-search_results-back"\n    >\n      <svg class="inline_icon inline_icon--reading_size inline_icon--up_1" src="left_arrow.svg"></svg>\n      Back\n    </a>\n\n    <search-result-paginated-section\n      section-type="{{$ctrl.filter}}"\n      search-text="{{$ctrl.search_text}}"\n      on-load-next="$ctrl.on_load_next()"\n    ></search-result-paginated-section>\n  </div>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("search_results_page.html",'<leaderboard-ad\n  name="desktop_search_leaderboard"\n></leaderboard-ad>\n\n<div class="u-xx_large_vertical_margins">\n  <div ng-if="$ctrl.q" class="u-text_center">\n    <h2 class="search_results_page-header">{{$ctrl.q}}</h2>\n    <div class="text_label">All Results</div>\n  </div>\n\n  <div ng-if="!$ctrl.sections" class="placeholder placeholder--full_height">\n    <placeholder-spinner></placeholder-spinner>\n  </div>\n\n  <div ng-if="$ctrl.sections && $ctrl.has_results" class="column_layout">\n    <div class="column_layout-column_span column_layout-column_span--primary">\n      <div ng-repeat="section in $ctrl.sections">\n        <search-result-section\n          ng-if="[\'top_hit\', \'song\', \'lyric\'].includes(section.type)"\n          section="section"\n          on-show-more="$ctrl.filter = section_type"\n          limit-to="section.type === \'top_hit\' ? 1 : 5"\n          variants="{no_horizontal_label_padding: true}"\n        ></search-result-section>\n      </div>\n    </div>\n\n    <div class="column_layout-column_span column_layout-column_span--secondary">\n      <div ng-repeat="section in $ctrl.sections">\n        <search-result-section\n          ng-if="![\'top_hit\', \'song\', \'lyric\'].includes(section.type)"\n          section="section"\n          on-show-more="$ctrl.filter = section_type"\n          limit-to="3"\n          variants="{no_horizontal_label_padding: true}"\n        ></search-result-section>\n      </div>\n      <dfp-ad name="desktop_search_sidebar"></dfp-ad>\n    </div>\n\n    <modal-window\n      ng-if="$ctrl.filter"\n      on-close="$ctrl.filter = null"\n      variants="{narrow_width: true, white_background: true}"\n    >\n      <search-result-paginated-section\n        section-type="{{$ctrl.filter}}"\n        search-text="{{$ctrl.q}}"\n      ></search-result-paginated-section>\n    </modal-window>\n  </div>\n\n  <div ng-if="$ctrl.sections && !$ctrl.has_results" class="u-xxx_large_vertical_margins u-text_center">\n    No results\n  </div>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("select_dropdown.html",'<span\n  class="text_label"\n  ng-class="{\n    \'text_label--pink\': !$ctrl.variants.gray,\n    \'text_label--gray\': $ctrl.variants.gray,\n    \'text_label--x_small_text_size\': $ctrl.variants.small,\n    \'u-clickable\': $ctrl.is_clickable()\n  }"\n  ng-click="$ctrl.dropdown_opened = !$ctrl.dropdown_opened"\n  ng-click-disabled="!$ctrl.is_clickable()"\n  click-outside="$ctrl.dropdown_opened = false"\n>\n  {{ $ctrl.selected.i18n_key | i18n:{defaultValue: $ctrl.selected.label} }}\n\n  <svg\n    class="inline_icon inline_icon--short inline_icon--up_1"\n    ng-class="{\'inline_icon--pink\': !$ctrl.variants.gray, \'inline_icon--gray\': $ctrl.variants.gray}"\n    src="down_arrow.svg"\n    ng-if="$ctrl.is_clickable()"\n  ></svg>\n</span>\n<div\n  class="tooltip tooltip--tiny tooltip--no_padding"\n  ng-show="$ctrl.dropdown_opened"\n  ng-click="$ctrl.dropdown_opened = false"\n  ng-class="{\n    \'tooltip--dock_top_left\': $ctrl.variants.left_aligned,\n    \'tooltip--dock_top_right\': $ctrl.variants.right_aligned\n  }"\n>\n  <div\n      ng-repeat="option in $ctrl.options"\n      class="tooltip-list_item"\n      ng-click="$ctrl.selected = option; $ctrl.on_select({ selection: option })"\n      ng-show="$ctrl.selected !== option"\n  >\n    {{ option.i18n_key | i18n:{defaultValue: option.label} }}\n  </div>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("share_buttons.html",'<div class="share_buttons u-vertical_margins">\n  <facebook-share-button url="song.share_url"></facebook-share-button>\n  <twitter-share-button url="song.share_url" message="song.twitter_share_message_without_url"></twitter-share-button>\n  <span ng-cloak>\n    <pyong-button\n      type="song"\n      object="song"\n      on-unauthorized="ctrl.prompt_auth = true"\n    ></pyong-button>\n    <follow-button type="song" object="song" on-unauthorized="ctrl.prompt_auth = true"></follow-button>\n    <span class="square_button" ng-click="ctrl.showing_ellipsis_menu = !ctrl.showing_ellipsis_menu" ng-class="{\'square_button--active\': ctrl.showing_ellipsis_menu}">Embed</span>\n\n    <ng-container ng-if="ctrl.show_report_abuse">\n      <report-abuse\n        type="songs"\n        object="song"\n        button-text="Report Song"\n      ></report-abuse>\n    </ng-container>\n\n    <modal-window ng-if="ctrl.prompt_auth" on-close="ctrl.prompt_auth = false" variants="{narrow_width: true}">\n      <authentication-form></authentication-form>\n    </modal-window>\n  </span>\n</div>\n<div class="ellipsis_menu gray_container" ng-if="ctrl.showing_ellipsis_menu" ng-cloak>\n  <div class="ellipsis_menu-row">\n    <label for="share_url_{{ song.id }}" class="text_label ellipsis_menu-label">Share URL:</label>\n    <input id="share_url_{{ song.id }}" class="square_input ellipsis_menu-input" value="{{ song.share_url }}" readonly select-all-on-click />\n    <div class="square_button" copy-to-clipboard="song.share_url" text-to-show-after-copy="Copied!">Copy</div>\n  </div>\n  <div class="ellipsis_menu-row">\n    <label for="embed_content_{{ song.id }}" class="text_label ellipsis_menu-label">Embed on your website:</label>\n    <input id="embed_content_{{ song.id }}" class="square_input ellipsis_menu-input" value="{{ song.embed_content }}" readonly select-all-on-click />\n    <div class="square_button" copy-to-clipboard="song.embed_content" text-to-show-after-copy="Copied!">Copy</div>\n  </div>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("simple_datetime_input.html",'<div class="square_select_group">\n  <div class="square_select_group-single">\n    <select ng-options="month.number as month.name for month in months" ng-model="datetime.month"></select>\n  </div>\n  <div class="square_select_group-single">\n    <select ng-options="day as day for day in days" ng-model="datetime.day"></select>\n  </div>\n  <div class="square_select_group-single">\n    <select ng-options="year as year for year in years" ng-model="datetime.year"></select>\n  </div>\n  <span class="square_select_group-separator u-quarter_left_margin"></span>\n  <div class="square_select_group-single">\n    <select ng-options="hour as hour for hour in hours" ng-model="datetime.hour"></select>\n  </div>\n  <span class="square_select_group-separator u-quarter_left_margin">:</span>\n  <div class="square_select_group-single">\n    <select ng-options="minute as minute for minute in minutes" ng-model="datetime.minute"></select>\n  </div>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("solidarity_banner.html",'<div class="solidarity_banner-wrapper" ng-show="$ctrl.visible">\n  <div class="solidarity_banner-text" data-nosnippet>\n    {{$ctrl.solidarity_text}}&nbsp;\n    <a class="solidarity_banner-link" href="{{$ctrl.solidarity_url}}" ng-attr-target="{{$ctrl.is_link_external ? \'_blank\' : undefined}}">Learn More</a>\n  </div>\n  <div class="solidarity_banner-dismiss" ng-click="$ctrl.hide()">\n    <svg src="x_small.svg"></svg>\n  </div>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("song_activity.html",'<div class="song_activity-title">Contributions & Activity</div>\n<div class="text_label u-bottom_margin">Annotation stats</div>\n<span class="annotation_stat">\n  <span class="annotation_stat-pill annotation_stat-pill--green">\n    <svg class="inline_icon inline_icon--up_1" src="checkmark.svg"></svg>\n    {{ song.stats.accepted_annotations }}\n  </span>\n  Accepted {{ \'annotation\' | i18n:{count:song.stats.accepted_annotations} }}\n</span>\n<span class="annotation_stat">\n  <span class="annotation_stat-pill annotation_stat-pill--red">\n    <svg class="inline_icon inline_icon--up_1" src="x.svg"></svg>\n    {{ song.stats.unreviewed_annotations }}\n  </span>\n  Unreviewed {{ \'annotation\' | i18n:{count:song.stats.unreviewed_annotations} }}\n</span>\n<span class="annotation_stat">\n  <span class="annotation_stat-pill">\n    <svg class="checky" src="checky.svg"></svg>\n    {{ song.stats.verified_annotations }}\n  </span>\n  Verified {{ \'annotation\' | i18n:{count:song.stats.verified_annotations} }}\n</span>\n<div ng-if="song.stats.transcribers" class="u-xx_large_vertical_margins">\n  <div class="text_label">Transcribed by {{ \'terms.scholar\' | i18n:{count:song.stats.transcribers} }}</div>\n  <leaderboard collection="contributors.transcribers"></leaderboard>\n  <span class="leaderboard-load_more" ng-show="ctrl.loading_contributors">Loading</span>\n</div>\n<div ng-if="song.stats.iq_earners" class="u-xx_large_vertical_margins">\n  <div class="text_label">Annotated by {{ \'terms.scholar\' | i18n:{count:song.stats.iq_earners} }}</div>\n  <leaderboard collection="contributors.iq_earners"></leaderboard>\n  <a class="leaderboard-load_more" ng-click="ctrl.load_more_iq_earners()" ng-show="has_more_iq_earners && !ctrl.loading_iq_earners">Load more {{ \'terms.contributor\' | i18n:{count:2} }}</a>\n  <span class="leaderboard-load_more" ng-show="ctrl.loading_iq_earners">Loading</span>\n</div>\n<div class="song_activity-activity_stream">\n  <div class="text_label">Recent Activity</div>\n  <song-activity-stream song-id="song.id"></song-activity-stream>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("song_activity_stream.html",'<div infinite-scroll="ctrl.load_next_page()" infinite-scroll-disabled="!ctrl.should_paginate()" infinite-scroll-load-trigger="intersection">\n  <div ng-repeat="line_item in line_items track by line_item.event_ids">\n    <inbox-line-item object=":: line_item" eager-load-details="$first && opened" variants="::{active_display:true}"></inbox-line-item>\n  </div>\n  <placeholder-spinner ng-if="!done_loading" placeholder-classes="feed_dropdown-item"></placeholder-spinner>\n\n  <div ng-if="done_loading && !line_items.length" class="u-vertical_margins u-horizontal_margins">\n    No activity\n  </div>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("song_admin_menu.html",'<div\n  ng-show="has_admin_items"\n  class="square_button square_button--transparent"\n  tether-drop-target\n>\n  Admin\n  <svg src="down_arrow.svg" class="inline_icon inline_icon--short inline_icon--up_1"></svg>\n  <tether-drop\n    show-on="click"\n    position="bottom left"\n    yields-api="$ctrl.tetherApi = tetherApi"\n  >\n    <div class="tooltip tooltip--no_padding">\n      <div\n        ng-repeat="action in actions"\n        ng-if="can_perform(action)"\n        class="tooltip-list_item"\n        ng-click="attempt_admin_action(action); $ctrl.tetherApi.hide()"\n      >\n        <svg ng-if="action === \'unpublish\'" class="inline_icon inline_icon--reading_size inline_icon--up_1 tooltip-list_item-icon" src="unlock.svg"></svg>\n        <svg ng-if="action === \'publish\'" class="inline_icon tooltip-list_item-icon" src="lock.svg"></svg>\n        <svg ng-if="action === \'hide\'" class="inline_icon tooltip-list_item-icon" src="eye_cross.svg"></svg>\n        <svg ng-if="action === \'unhide\'" class="inline_icon tooltip-list_item-icon" src="eye.svg"></svg>\n        <svg ng-if="action === \'destroy\'" class="inline_icon tooltip-list_item-icon" src="x.svg"></svg>\n        <svg ng-if="action === \'edit_spotify_annotations_for\'" class="inline_icon tooltip-list_item-icon" src="spotify.svg"></svg>\n        {{ \'song.actions.\' + action | i18n }}\n      </div>\n      <div\n        ng-if="can_perform(\'see_short_id\')"\n        class="tooltip-list_item"\n        copy-to-clipboard="\'song:{{song.id}}\'"\n        text-to-show-after-copy="Copied to clipboard"\n      >\n        Copy short ID (<code>song:{{song.id}}</code>)\n      </div>\n      <div\n        ng-if="can_perform(\'see_short_id\')"\n        class="tooltip-list_item"\n        copy-to-clipboard="\'artist:{{song.primary_artist.id}}\'"\n        text-to-show-after-copy="Copied to clipboard"\n      >\n        Copy artist ID (<code>artist:{{song.primary_artist.id}}</code>)\n      </div>\n      <div class="tooltip-list_item" ng-if="can_perform(\'manage_chart_item\')">\n        <manage-chart-item type="\'songs\'" id="song.id"></manage-chart-item>\n      </div>\n      <div\n        ng-transclude="additional_buttons"\n        ng-click="$ctrl.tetherApi.hide()"\n      ></div>\n    </div>\n  </tether-drop>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("song_album.html",'<div class="u-xx_large_vertical_margins">\n  <div class="song_album u-bottom_margin">\n    <a\n      ng-href="{{:: $ctrl.album.url}}"\n      title="{{:: $ctrl.album.name}}"\n      class="song_album-album_art"\n    >\n      <img sized-src=":: $ctrl.album.cover_art_url">\n    </a>\n\n    <div class="song_album-info">\n      <a\n        ng-href="{{:: $ctrl.album.url}}"\n        title="{{:: $ctrl.album.name}}"\n        class="song_album-info-title"\n      >\n      {{:: $ctrl.album.name}}\n      <span class="song_album-info-release_year" ng-if=":: $ctrl.album.release_date_components.year">({{:: $ctrl.album.release_date_components.year }})</span>\n      </a>\n      <a\n        ng-href="{{:: $ctrl.album.artist.url}}"\n        title="{{:: $ctrl.album.name}}"\n        class="song_album-info-artist"\n      >{{:: $ctrl.album.artist.name}}</a>\n    </div>\n  </div>\n\n  <div\n    class="track_listing"\n    ng-class="{\'track_listing--columns\': $ctrl.tracks.length > 7}"\n  >\n    <div ng-repeat="track in $ctrl.tracks track by $index">\n      <div\n        class="track_listing-track"\n        ng-class="{\'track_listing-track--current\': $ctrl.is_current_song(track.song)}"\n      >\n        <span\n          ng-if=":: track.number"\n          class="track_listing-track_number"\n        >{{:: track.number}}.&nbsp;&nbsp;</span>\n        <a\n          ng-if=":: $ctrl.should_link_to_track(track)"\n          ng-href="{{:: track.song.url}}"\n          title="{{:: track.song.title}}"\n        >\n          {{:: track.song.title}}\n          <span ng-if=":: track.song.lyrics_state === \'unreleased\'">{{:: \'song.lyrics_state.unreleased.indicator\' | i18n }}</span>\n          <span ng-if=":: track.song.lyrics_state === \'incomplete\'">{{:: \'song.lyrics_state.incomplete.indicator\' | i18n }}</span>\n        </a>\n        <span ng-if=":: !$ctrl.should_link_to_track(track)">\n          {{:: track.song.title}}\n          <span ng-if=":: track.song.lyrics_state === \'unreleased\'">{{:: \'song.lyrics_state.unreleased.indicator\' | i18n }}</span>\n          <span ng-if=":: track.song.lyrics_state === \'incomplete\'">{{:: \'song.lyrics_state.incomplete.indicator\' | i18n }}</span>\n        </span>\n      </div>\n    </div>\n  </div>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("song_albums.html",'<song-album\n  ng-if="$ctrl.primary_album()"\n  album="$ctrl.primary_album()"\n  tracks="$ctrl.primary_album_tracks"\n  current-song="$ctrl.song"\n></song-album>\n\n<song-album\n  ng-repeat="album in ($ctrl.other_albums() | drop:-$ctrl.hidden_album_count()) track by album.id"\n  album="album"\n></song-album>\n\n<a\n  href\n  class="text_label text_label--button text_label--purple"\n  ng-if="$ctrl.hidden_album_count()"\n  ng-click="$ctrl.show_all()"\n>{{ \'songs.hidden_album_count\' | i18n:{count:$ctrl.hidden_album_count()} }}</a>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("song_attribution_visualization.html",'<div class="u-vertical_margins" ng-if="!$ctrl.words">\n  <placeholder-spinner></placeholder-spinner>\n</div>\n\n<div ng-if="$ctrl.words" class="u-half_vertical_margins">\n  <div class="u-half_vertical_margins">\n    <span class="text_label">Version {{$ctrl.current_time_index + 1}} / {{$ctrl.change_times.length}} ({{$ctrl.change_times[$ctrl.current_time_index] * 1000 | date:"h:mma MM/dd/yyyy"}})</span>\n  </div>\n  <button class="square_button" ng-click="$ctrl.adjust_current_time_index(-1)">&larr; Back</button>\n  <button class="square_button" ng-click="$ctrl.adjust_current_time_index(1)">Forward &rarr; </button>\n</div>\n\n<span tether-drop-target ng-repeat="word in $ctrl.words_to_show()">\n  <span ng-style="{backgroundColor: $ctrl.color(word)}">{{ word.word }}</span>\n  <tether-drop ng-if="word.user_id" show-on="hover">\n    <user-tooltip user="$ctrl.users[word.user_id]"></user-tooltip>\n  </tether-drop>\n</span>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("song_color_gradient_picker.html",'<div ng-repeat="error in $ctrl.errors" class="form_message form_message--error">{{error}}</div>\n<div class="song_color_gradient_picker-container">\n  <div>\n    <div>\n      <div class="song_color_gradient_picker-song_art">\n        <img sized-src="$ctrl.song_art_image_url"></img>\n      </div>\n      <div class="song_color_gradient_picker-inputs">\n        <metadata-input-and-label label="{{\'song.metadata.song_art_primary_color\' | i18n}}" full="true">\n          <input\n            type="color"\n            name="song_art_primary_color"\n            ng-model="$ctrl.song_art_primary_color"\n            ng-model-options="{updateOn: \'default\'}"\n          >\n        </metadata-input-and-label>\n        <metadata-input-and-label label="{{\'song.metadata.song_art_secondary_color\' | i18n}}" full="true">\n          <input\n            type="color"\n            name="song_art_secondary_color"\n            ng-model="$ctrl.song_art_secondary_color"\n            ng-model-options="{updateOn: \'default\'}"\n          >\n        </metadata-input-and-label>\n      </div>\n    </div>\n    <div class="song_color_gradient_picker-instructions">\n      <p>The colors you select should come from the album/song art. Try using the color pickers to find good colors in the art above.</p>\n      <p>Both contrast values must be at least 4.5.</p>\n    </div>\n  </div>\n  <div>\n    <div\n      class="song_color_gradient_picker-gradient_preview u-vertically_center_contents"\n      ng-style="{\n        \'color\': $ctrl.song_art_text_color,\n        \'background-image\': \'linear-gradient(\' + $ctrl.song_art_primary_color + \',\' + $ctrl.song_art_secondary_color + \')\'\n      }"\n    >\n      This is a preview of text over the gradient\n    </div>\n    <div class="u-flex_directive">\n      <div>\n        <div\n          class="song_color_gradient_picker-single_preview u-vertically_center_contents"\n          ng-style="{\n            \'color\': $ctrl.song_art_text_color,\n            \'background\': $ctrl.song_art_primary_color\n          }"\n        >\n          Primary\n        </div>\n        <span class="song_color_gradient_picker-contrast">Contrast: {{$ctrl.text_on_primary_contrast}}</span>\n      </div>\n      <div>\n        <div\n          class="song_color_gradient_picker-single_preview u-vertically_center_contents"\n          ng-style="{\n            \'color\': $ctrl.song_art_text_color,\n            \'background\': $ctrl.song_art_secondary_color\n          }"\n        >\n          Secondary\n        </div>\n        <span class="song_color_gradient_picker-contrast">Contrast: {{$ctrl.text_on_secondary_contrast}}</span>\n      </div>\n      <div ng-if="!$ctrl.song_art_primary_color || !$ctrl.song_art_secondary_color" class="u-vertically_center_contents song_color_gradient_picker-empty">\n        PLEASE CHOOSE COLORS\n      </div>\n      <div ng-if="$ctrl.song_art_primary_color && $ctrl.song_art_secondary_color" class="u-vertically_center_contents u-width_100 ">\n        <div ng-if="$ctrl.valid_song_art_contrast" class="song_color_gradient_picker-success">\n          VALID CONTRAST\n        </div>\n        <div ng-if="!$ctrl.valid_song_art_contrast" class="song_color_gradient_picker-error">\n          INVALID CONTRAST\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("song_metadata.html",'<div class="song_metadata">\n  <div>\n    <div class="metadata_with_icon" ng-class="{\'metadata_with_icon--hot\': song.stats.concurrents + 1 > 50}">\n      <span class="metadata_with_icon-icon_wrapper">\n        <svg ng-if="song.stats.concurrents + 1 <= 50" class="metadata_with_icon-icon" src="clock.svg"></svg>\n      </span>\n      <span class="metadata_with_icon-icon_wrapper">\n        <svg ng-if="song.stats.concurrents + 1 > 50" class="metadata_with_icon-icon" src="fire.svg"></svg>\n      </span>\n      {{ song.stats.concurrents + 1 | number }} <span class="text_label text_label--x_small_text_size">viewing</span>\n    </div>\n    <div class="metadata_with_icon metadata_with_icon-views" ng-if="song.stats.pageviews">\n      <span class="metadata_with_icon-icon_wrapper">\n        <svg class="metadata_with_icon-icon" src="eye.svg"></svg>\n      </span>\n      {{ song.stats.pageviews | number }} <span class="text_label text_label--x_small_text_size">views</span>\n    </div>\n  </div>\n  <div>\n    <div class="metadata_with_icon metadata_with_icon-contributors u-clickable" ng-click="ctrl.showing_all_metadata = true">\n      <span class="metadata_with_icon-icon_wrapper">\n        <svg class="metadata_with_icon-icon" src="people.svg"></svg>\n      </span>\n      <span class="metadata_with_icon-link">\n        {{ song.stats.contributors | number }}\n        <span class="text_label text_label--x_small_text_size">\n          {{ \'terms.contributor\' | i18n:{count:song.stats.contributors} }}\n        </span>\n      </span>\n    </div>\n    <div\n      class="metadata_with_icon metadata_with_icon-contributors u-clickable"\n      ng-click="ctrl.show_attribution_visualization = true"\n      ng-if="ctrl.has_permission(\'view_attribution_visualization\')"\n    >\n      <span class="metadata_with_icon-icon_wrapper">\n        <svg class="metadata_with_icon-icon" src="pencil.svg"></svg>\n      </span>\n      <span class="metadata_with_icon-link">\n        <span class="text_label text_label--x_small_text_size">Attribution Visualization</span>\n      </span>\n    </div>\n    <div class="metadata_with_icon" ng-if="song.tags.length">\n      <span class="metadata_with_icon-icon_wrapper">\n        <svg class="metadata_with_icon-icon" src="tag.svg"></svg>\n      </span>\n      <div class="metadata_with_icon-tags">\n        <span ng-repeat="tag in song.tags track by tag.id">\n          <a\n            class="metadata_with_icon-link"\n            ng-href="{{ tag.url }}"\n          ><span ng-class="{\'metadata_with_icon-tags-primary_tag\': tag.primary}">{{ tag.name }}</span></a>{{ $last ? \'\' : \', \' }}\n        </span>\n      </div>\n    </div>\n  </div>\n</div>\n\n<modal-window ng-if="ctrl.showing_all_metadata" on-close="ctrl.showing_all_metadata = false">\n  <song-activity song="song"></song-activity>\n</modal-window>\n\n<modal-window ng-if="ctrl.show_attribution_visualization" on-close="ctrl.show_attribution_visualization = false">\n  <song-attribution-visualization id="song.id"></attribution-visualization>\n</modal-window>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("song_metadata_form.html",'<form name="ctrl.song_form" ng-submit="ctrl.submit()" ng-model-options="{updateOn: \'submit\'}" submit-on-cmd-enter dirtyable yields-is-dirty="yields_is_dirty({is_dirty: is_dirty})">\n  <div class="u-vertical_margins form_message form_message--error" ng-if="ctrl.editable_metadata_stale" ng-bind=":: \'songs.editing_stale\' | i18n"></div>\n  <div ng-if="ctrl.error" class="form_message form_message--error u-bottom_margin">\n    <div class="text_label">\n      {{ ctrl.error.message }}\n      <span ng-repeat="base_error in ctrl.error.validation_errors.base">\n        <br>\n        {{ base_error }}\n      </span>\n    </div>\n  </div>\n  <expandable-accordion-section label="{{\'song.metadata.title_and_artists\' | i18n}}" shortcut="shift+a" expanded="expanded_sections.title_and_artists">\n    <div class="square_form">\n      <metadata-input-and-label label="{{\'song.metadata.title\' | i18n}}" full="true" errors="ctrl.error.validation_errors.title" is-disabled="!ctrl.has_permission(\'rename\')">\n        <input ng-disabled="!ctrl.has_permission(\'rename\')" name="title" ng-model="song.title" placeholder="Song title" class="square_input square_form-standard_element_margin">\n      </metadata-input-and-label>\n\n      <metadata-input-and-label label="{{\'song.metadata.primary_artist\' | i18n}}" errors="ctrl.error.validation_errors.primary_artist" is-disabled="!ctrl.has_permission(\'rename\')">\n        <input\n            ng-model="song.primary_artist"\n            autocomplete-with="artist"\n            class="square_input square_form-standard_element_margin"\n            placeholder="Primary artist on this song"\n            ng-value="song.primary_artist.name"\n            display-field="name"\n            ng-disabled="!ctrl.has_permission(\'rename\')">\n        </input>\n      </metadata-input-and-label>\n\n      <metadata-input-and-label label="{{\'song.metadata.writer_artists\' | i18n}}" errors="ctrl.error.validation_errors.writer_artists" is-disabled="!ctrl.has_permission(\'edit\')">\n        <autocomplete-tags-input\n          ng-disabled="!ctrl.has_permission(\'edit\')"\n          bind-to="song.writer_artists"\n          name="writer_artists"\n          autocomplete-model="artist"\n          placeholder="e.g. Pharrell Williams, Sean Garrett"\n          input-classes="tags_input square_input square_form-standard_element_margin">\n        </autocomplete-tags-input>\n      </metadata-input-and-label>\n\n      <metadata-input-and-label label="{{\'song.metadata.featured_artists\' | i18n}}" errors="ctrl.error.validation_errors.featured_artists" is-disabled="!ctrl.has_permission(\'rename\')">\n        <autocomplete-tags-input\n          ng-disabled="!ctrl.has_permission(\'rename\')"\n          bind-to="song.featured_artists"\n          name="featured_artists"\n          autocomplete-model="artist"\n          placeholder="e.g. JAY Z, Lil Wayne, T.I."\n          input-classes="tags_input square_input square_form-standard_element_margin">\n        </autocomplete-tags-input>\n      </metadata-input-and-label>\n\n      <metadata-input-and-label label="{{\'song.metadata.producer_artists\' | i18n}}" errors="ctrl.error.validation_errors.producer_artists" is-disabled="!ctrl.has_permission(\'edit\')">\n        <autocomplete-tags-input\n          ng-disabled="!ctrl.has_permission(\'edit\')"\n          bind-to="song.producer_artists"\n          name="producer_artists"\n          autocomplete-model="artist"\n          placeholder="e.g. J Dilla, No I.D."\n          input-classes="tags_input square_input square_form-standard_element_margin">\n        </autocomplete-tags-input>\n      </metadata-input-and-label>\n\n      <metadata-custom-performance-role-input\n        custom-performance-roles="song.custom_performances"\n        role-field-placeholder="e.g. mastered by, arranged by"\n        artist-field-placeholder="e.g. Bob Katz, Van Dyke Parks"\n        is-disabled="!ctrl.has_permission(\'edit\')"\n        validation-errors="ctrl.error.validation_errors"\n        class="u-width_100"\n      ></metadata-custom-performance-role-input>\n    </div>\n  </expandable-accordion-section>\n\n  <expandable-accordion-section label="{{\'song.metadata.audio_video_and_images\' | i18n}}" shortcut="shift+m" expanded="expanded_sections.audio_video_and_images">\n    <div class="square_form">\n      <metadata-input-and-label label="{{\'song.metadata.spotify_uuid\' | i18n}}"  errors="ctrl.error.validation_errors.spotify_uuid" ng-if="ctrl.has_permission(\'edit_spotify_details\')">\n        <input name="spotify_uuid" ng-model="song.spotify_uuid" class="square_input square_form-standard_element_margin">\n      </metadata-input-and-label>\n\n      <metadata-input-and-label errors="ctrl.error.validation_errors.soundcloud_url" label="{{\'song.metadata.soundcloud_url\' | i18n}}" is-disabled="!ctrl.has_permission(\'edit_soundcloud_url\')">\n        <input ng-disabled="!ctrl.has_permission(\'edit_soundcloud_url\')" name="soundcloud_url" ng-model="song.soundcloud_url" class="square_input square_form-standard_element_margin">\n      </metadata-input-and-label>\n\n      <metadata-input-and-label label="{{\'song.metadata.youtube_url\' | i18n}}" errors="ctrl.error.validation_errors.youtube_url" class="square_form-input_and_label--combo_large" is-disabled="!ctrl.has_permission(\'edit_youtube_url\')">\n        <input ng-disabled="!ctrl.has_permission(\'edit_youtube_url\')" name="youtube_url" ng-model="song.youtube_url" class="square_input square_form-standard_element_margin">\n      </metadata-input-and-label>\n\n      <metadata-input-and-label label="{{\'song.metadata.youtube_start\' | i18n}}" class="square_form-input_and_label--combo_small" is-disabled="!ctrl.has_permission(\'edit_youtube_url\')">\n        <input ng-disabled="!ctrl.has_permission(\'edit_youtube_url\') || !song.youtube_url" name="youtube_start" placeholder="00:00" ng-model="song.youtube_start" class="square_input square_form-standard_element_margin">\n      </metadata-input-and-label>\n\n      <metadata-input-and-label errors="ctrl.error.validation_errors.custom_song_art_image_url" label="{{\'song.metadata.custom_song_art_image_url\' | i18n}}" is-disabled="!ctrl.has_permission(\'edit\')">\n        <input ng-disabled="!ctrl.has_permission(\'edit\')" name="custom_song_art_image_url" ng-model="song.custom_song_art_image_url" class="square_input square_form-standard_element_margin" proxied-image>\n      </metadata-input-and-label>\n\n      <div class="square_form-input_and_label square_form-input_and_label--bottom_aligned square_form-input_and_label--half_width" ng-click="song.featured_video = !song.featured_video">\n        <div class="square_checkbox square_form-standard_element_margin">\n          <input\n            mousetrap-input\n            ng-disabled="!ctrl.has_permission(\'toggle_featured_video\')"\n            type="checkbox"\n            stop-propagation="click"\n            ng-click="song.featured_video = !song.featured_video"\n            name="featured_video"\n            ng-model="song.featured_video"\n          >\n          <div class="text_label">{{\'song.metadata.featured_video\' | i18n}}</div>\n        </div>\n      </div>\n\n      <metadata-input-and-label errors="ctrl.error.validation_errors.custom_header_image_url" label="{{\'song.metadata.custom_header_image_url\' | i18n}}" is-disabled="!ctrl.has_permission(\'edit\')">\n        <input ng-disabled="!ctrl.has_permission(\'edit\')" name="custom_header_image_url" ng-model="song.custom_header_image_url" class="square_input square_form-standard_element_margin" proxied-image>\n      </metadata-input-and-label>\n    </div>\n  </expandable-accordion-section>\n\n  <expandable-accordion-section label="{{\'song.metadata.album_date_and_tags\' | i18n}}" shortcut="shift+t" expanded="expanded_sections.album_date_and_tags">\n    <div class="square_form">\n      <metadata-input-and-label label="{{\'song.metadata.albums\' | i18n}}" is-disabled="!ctrl.has_permission(\'edit\')">\n        <autocomplete-tags-input\n          ng-disabled="!ctrl.has_permission(\'edit\')"\n          bind-to="song.albums"\n          name="albums"\n          autocomplete-model="album"\n          autocomplete-options="{artist_id: song.primary_artist.id, only_editable: true}"\n          input-classes="tags_input square_input square_form-standard_element_margin">\n        </autocomplete-tags-input>\n      </metadata-input-and-label>\n\n      <metadata-input-and-label label="{{\'song.metadata.release_date\' | i18n}}" errors="ctrl.error.validation_errors.release_date" is-disabled="!ctrl.has_permission(\'edit\')">\n        <component-date-input ng-model="song.release_date_components" disabled="!ctrl.has_permission(\'edit\')"></component-date-input>\n      </metadata-input-and-label>\n\n      <metadata-input-and-label label="{{\'song.metadata.recording_location\' | i18n}}" is-disabled="!ctrl.has_permission(\'edit\')">\n        <input ng-disabled="!ctrl.has_permission(\'edit\')" name="recording_location" ng-model="song.recording_location" placeholder="Where this song was recorded" class="square_input square_form-standard_element_margin">\n      </metadata-input-and-label>\n\n      <metadata-input-and-label label="{{\'song.metadata.primary_tag\' | i18n}}" errors="ctrl.error.validation_errors.primary_tag" is-disabled="!ctrl.has_permission(\'edit_tags\')">\n        <div class="square_select_group">\n          <div class="square_select_group-single u-width_100">\n            <select ng-disabled="!ctrl.has_permission(\'edit_tags\')" ng-options="tag as tag.name for tag in available_primary_tags" ng-model="song.primary_tag" class="select_input"></select>\n          </div>\n        </div>\n      </metadata-input-and-label>\n\n      <metadata-input-and-label label="{{\'song.metadata.tags\' | i18n}}" is-disabled="!ctrl.has_permission(\'edit_tags\')">\n        <autocomplete-tags-input\n          ng-disabled="!ctrl.has_permission(\'edit_tags\')"\n          bind-to="song.tags"\n          name="tags"\n          autocomplete-model="tag"\n          require-existing="!ctrl.has_permission(\'create_tag\')"\n          input-classes="tags_input square_input square_form-standard_element_margin">\n        </autocomplete-tags-input>\n      </metadata-input-and-label>\n    </div>\n  </expandable-accordion-section>\n\n  <expandable-accordion-section label="{{\'song.metadata.song_relationships\' | i18n}}" shortcut="shift+r" expanded="expanded_sections.song_relationships">\n    <div class="square_form">\n      <song-metadata-song-relationships-input\n          song-relationships="song.song_relationships"\n          is-disabled="!ctrl.has_permission(\'edit\')"\n          class="u-width_100"\n      ></song-metadata-song-relationships-input>\n    </div>\n  </expandable-accordion-section>\n\n  <expandable-accordion-section\n    ng-if="ctrl.has_permission(\'override_apple_match\')"\n    label="{{\'song.metadata.apple_match_overrides\' | i18n}}"\n    shortcut="shift+p"\n    expanded="expanded_sections.apple_match_overrides"\n  >\n    <div class="square_form">\n      <metadata-input-and-label ng-repeat="purpose in ctrl.apple_purposes track by purpose" label="{{\'song.metadata.apple_song_for_\' + purpose | i18n}}" errors="ctrl.error.validation_errors[\'apple_song_for_\' + purpose]" full="true">\n        <input name="apple_song_for_{{purpose}}" ng-model="song[\'apple_song_for_\' + purpose]" class="square_input square_form-standard_element_margin">\n      </metadata-input-and-label>\n    </div>\n  </expandable-accordion-section>\n\n  <expandable-accordion-section\n    ng-if="ctrl.has_permission(\'set_song_color_gradient\')"\n    label="{{\'song.metadata.song_color_gradient\' | i18n}}"\n    shortcut="shift+c"\n    expanded="expanded_sections.song_color_gradient"\n  >\n    <div class="square_form">\n      <song-color-gradient-picker\n        class="u-width_100"\n        song-art-primary-color="song.song_art_primary_color"\n        song-art-secondary-color="song.song_art_secondary_color"\n        song-art-text-color="song.song_art_text_color"\n        valid-song-art-contrast="song.valid_song_art_contrast"\n        song-art-image-url="song.song_art_image_url"\n        errors="ctrl.error.validation_errors.song_color_gradient"\n      >\n      </song-color-gradient-picker>\n    </div>\n  </expandable-accordion-section>\n\n  <button type="submit" class="modal_window-save_button square_button square_button--purple u-small_vertical_margins">\n    Save\n  </button>\n</form>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("song_metadata_preview.html",'<div class="header_with_cover_art-metadata_preview header_with_cover_art-metadata_preview--bottom_left">\n  <div class="header_with_cover_art-metadata_preview-unit" title="{{ song.stats.concurrents + 1 | number}} viewing">\n    <svg ng-if="song.stats.concurrents + 1 <= 50" class="inline_icon inline_icon--gray inline_icon--small_reading_size inline_icon--up_1" src="clock.svg"></svg>\n    <svg ng-if="song.stats.concurrents + 1 > 50" class="inline_icon inline_icon--pink inline_icon--reading_size inline_icon--up_2" src="fire.svg"></svg>\n    <span\n      class="text_label text_label--x_small_text_size"\n      ng-class="{\n        \'text_label--gray\': song.stats.concurrents + 1 <= 50,\n        \'text_label--pink\': song.stats.concurrents + 1 > 50\n      }"\n    >{{ song.stats.concurrents + 1 | number }}</span>\n  </div>\n  <div class="header_with_cover_art-metadata_preview-unit" ng-if="song.stats.pageviews" title="{{ song.stats.pageviews | number }} views">\n    <svg class="inline_icon inline_icon--gray" src="eye.svg"></svg>\n    <span class="text_label text_label--gray text_label--x_small_text_size">{{ song.stats.pageviews | abbreviateBigNumber }}</span>\n  </div>\n  <div\n    class="u-clickable header_with_cover_art-metadata_preview-unit"\n    ng-click="ctrl.showing_all_metadata = true"\n    title="{{ song.stats.contributors | number }} {{ \'terms.contributor\' | i18n:{count:song.stats.contributors} }}"\n  >\n    <svg class="inline_icon inline_icon--gray" src="people.svg"></svg>\n    <span class="text_label text_label--gray text_label--x_small_text_size text_label--button">\n      {{ song.stats.contributors | number }}\n    </span>\n  </div>\n</div>\n\n<modal-window ng-if="ctrl.showing_all_metadata" on-close="ctrl.showing_all_metadata = false">\n  <song-activity song="song"></song-activity>\n</modal-window>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("song_metadata_song_relationships_input.html",'<div ng-repeat="song_relationship in $ctrl.visible_relationships track by song_relationship.type" class="square_form-sub_section">\n  <div class="text_label text_label--link" ng-click="$ctrl.dropdown_opened = song_relationship.type === $ctrl.dropdown_opened ? undefined : song_relationship.type" click-outside="$ctrl.dropdown_opened = undefined" suppress-click-outside-if-handled prevent-default-click>\n    {{ \'song_relationship.title.\' + song_relationship.type | i18n }}\n    <svg ng-if="!$ctrl.isDisabled" class="inline_icon inline_icon--short inline_icon--up_1" src="down_arrow.svg" viewBox="0 0 34 15"></svg>\n  </div>\n  <div class="tooltip tooltip--tiny tooltip--no_padding tooltip--dock_top_left" ng-if="!$ctrl.isDisabled && song_relationship.type === $ctrl.dropdown_opened" ng-click="$ctrl.dropdown_opened = undefined">\n    <div class="tooltip-list_item" ng-repeat="available_relationship in $ctrl.available_relationships()" value="{{ available_relationship.type }}" ng-click="$ctrl.change_relationship_to(song_relationship, available_relationship)">{{ \'song_relationship.title.\' + available_relationship.type | i18n }}</div>\n  </div>\n\n  <metadata-input-and-label is-disabled="$ctrl.isDisabled">\n    <div class="u-large_top_margin">\n      <autocomplete-tags-input\n          ng-disabled="$ctrl.isDisabled"\n          bind-to="song_relationship.songs"\n          name="song_relationships"\n          autocomplete-model="song"\n          placeholder="e.g. Dust a Soundboy"\n          input-classes="tags_input square_input square_form-standard_element_margin"\n          require-existing="true"\n          exclude-if="result.id === song.id"\n      ></autocomplete-tags-input>\n    </div>\n\n    <div\n      class="square_form-sub_section-remove"\n      ng-if="!$ctrl.isDisabled"\n      ng-click="$ctrl.remove_song_relationship(song_relationship)"\n    >\n      <svg class="inline_icon" src="x.svg"></svg>\n    </div>\n  </metadata-input-and-label>\n</div>\n\n<span class="text_label text_label--button text_label--purple" ng-click="$ctrl.add_new_song_relationship()" ng-if="$ctrl.available_relationships().length && !$ctrl.isDisabled">+ Add New</span>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("song_missing_metadata.html",'<div class="u-xx_large_vertical_margins song_missing_metadata" ng-if="$ctrl.has_missing_info()">\n  <div class="text_label song_missing_metadata-title" ng-cloak>Missing Track Info</div>\n\n  <missing-metadata-form\n    ng-if="$ctrl.missing_info(\'writer_artists\')"\n    missing-params="{writer_artists: \'autocomplete_artists\'}"\n    object="$ctrl.song"\n    type="song"\n    placeholder="e.g., Pharrell Williams, Sean Garrett"\n    source="Missing"\n  ></missing-metadata-form>\n\n  <missing-metadata-form\n    ng-if="$ctrl.missing_info(\'producer_artists\')"\n    missing-params="{producer_artists: \'autocomplete_artists\'}"\n    object="$ctrl.song"\n    type="song"\n    placeholder="e.g., J Dilla, No I.D."\n    source="Missing"\n  ></missing-metadata-form>\n\n  <missing-metadata-form\n    ng-if="$ctrl.missing_info(\'albums\')"\n    missing-params="{albums: \'autocomplete_albums\'}"\n    object="$ctrl.song"\n    type="song"\n    source="Missing"\n  ></missing-metadata-form>\n\n    <missing-metadata-form\n    ng-if="$ctrl.missing_info(\'release_date_components\')"\n    missing-params="{release_date_components: \'date_components\'}"\n    object="$ctrl.song"\n    type="song"\n    source="Missing"\n  ></missing-metadata-form>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("song_page.html",'<div\n  ng-if="song"\n  ng-controller="SongCtrl as song_ctrl"\n>\n  <div>\n    <div class="leaderboard_ad_container">\n      <leaderboard-ad\n        class="u-display_block"\n        name="desktop_song_leaderboard"\n      ></leaderboard-ad>\n    </div>\n\n    <header-with-cover-art\n      type="song"\n      object="song"\n      header-image-url="song.header_image_url"\n      cover-art-url="song.song_art_image_url"\n      title-label="song.title"\n      artist="song.primary_artist"\n      can-edit="can_perform(\'edit_any_media\')"\n      on-edit="song_ctrl.show_metadata_form(\'audio_video_and_images\')"\n      verified-contributors="song.verified_contributors"\n      has-instagram-reels="song.has_instagram_reel_annotations"\n    >\n      <metadata>\n        <h3>\n          <expandable-list\n            collection="song.featured_artists"\n            label="Featuring"\n            limit="3"\n            template="additional_artists"\n          ></expandable-list>\n        </h3>\n        <h3>\n          <expandable-list\n            collection="song.producer_artists"\n            label="Produced by"\n            limit="3"\n            template="additional_artists"\n          ></expandable-list>\n        </h3>\n        <h3>\n          <song-primary-album album="song.album" ng-if="song.album"></song-primary-album>\n        </h3>\n      </metadata>\n      <secondary>\n        <div class="column_layout-column_span-initial_content u-height_100">\n          <media-player\n            ng-if="!song_ctrl.is_apple_music_player_enabled() || can_perform(\'view_transcriber_media_player\')"\n            media-sources="song.media"\n            on-edit="song_ctrl.show_metadata_form(\'audio_video_and_images\')"\n            can-edit="can_perform(\'edit_any_media\')"\n            sticky-offset="song_ctrl.media_player_sticky_offset"\n          ></media-player>\n          <song-metadata-preview song="song"></song-metadata-preview>\n        </div>\n      </secondary>\n    </header-with-cover-art>\n\n    <div class="song_body column_layout">\n      <div class="column_layout-column_span column_layout-column_span--primary">\n        <div class="song_body-lyrics">\n          <h2\n            ng-if="!user_signed_in"\n            class="text_label text_label--gray text_label--x_small_text_size u-top_margin"\n          >{{song.title}} Lyrics</h2>\n\n          <defer-compile use-initial-content-with-key="lyrics">\n            <lyrics\n              class="lyrics"\n              remove-class-on-angular-load="lyrics"\n              yields-api="$ctrl.lyrics_interface = api"\n              canonical-lyrics-html="$ctrl.page_data.lyrics_data.body.html"\n              on-selection-range-updated="$ctrl.update_lyrics_selection_range(range)"\n            ></lyrics>\n          </defer-compile>\n\n          <share-buttons song="song"></share-buttons>\n\n          <defer-compile\n            use-initial-content-with-key="recirculated_content"\n            within-visibility-range="150px"\n          >\n            <recirculated-content\n              song="song"\n              stories="recirculated_content"\n              placement="recirculated"\n            ></recirculated-content>\n          </defer-compile>\n\n          <dfp-ad\n            name="desktop_song_lyrics_footer"\n            ad-classes="[\'dfp_unit--in_read u-top_margin\']"\n          ></dfp-ad>\n\n          <div class="u-vertical_margins">\n            <defer-compile within-visibility-range="150px">\n              <comments type="songs" commentable="song" intersperse-ads="desktop_song_comments"></comments>\n            </defer-compile>\n          </div>\n        </div>\n      </div>\n\n      <div\n        class="column_layout-column_span column_layout-column_span--secondary u-top_margin column_layout-flex_column"\n      >\n        <div class="column_layout-column_span-initial_content">\n          <div ng-show="initial_sidebar_content_showing()">\n            <song-page-sidebar-multi-placement\n              song="song"\n              show-song-story="song_ctrl.show_song_story = true"\n            ></song-page-sidebar-multi-placement>\n\n            <description-referent\n              object="song.description_annotation"\n              variants="{truncated: true}"\n            ></description-referent>\n\n            <defer-compile\n              use-initial-content-with-key="question_list"\n              within-visibility-range="150px"\n              delay="500"\n            >\n              <question-list\n                questionable="song"\n                pinned-questions="pinned_questions"\n                default-questions="default_questions"\n                featured-question="featured_question"\n                pending-question-count="pending_question_count"\n              ></question-list>\n            </defer-compile>\n\n            <button\n              ng-if="!user_signed_in && song.description_annotation.annotations[0].needs_exegesis"\n              ng-init="song_ctrl.signing_up = false"\n              class="square_button"\n              ng-hide="song_ctrl.signing_up"\n              ng-click="song_ctrl.signing_up = true"\n              ng-bind=":: \'annotation.sign_up_to_annotate\' | i18n"\n            ></button>\n\n            <authentication-form\n              ng-if="song_ctrl.signing_up"\n              header-text=":: \'annotation.sign_up_to_annotate\' | i18n"\n            ></authentication-form>\n\n            <defer-compile delay="500" within-visibility-range="150px">\n              <div class="show_tiny_edit_button_on_hover u-xx_large_bottom_margin u-top_margin gray_container">\n                <song-metadata song="song"></song-metadata>\n\n                <div class="song_metadata song_metadata--no_min_height">\n                  <div>\n                    <div\n                      tether-drop-target\n                      ng-if="song.hidden"\n                      class="metadata_with_icon"\n                    >\n                      <span class="metadata_with_icon-icon_wrapper">\n                        <svg src="eye_cross.svg" class="metadata_with_icon-icon"></svg>\n                      </span>\n                      <span class="metadata_with_icon-value">Hidden</span>\n                      <tether-drop show-on="hover" position="bottom center">\n                        <div class="tooltip tooltip--tiny rich_text_formatting rich_text_formatting--no_vertical_margins">\n                          <p><strong>This page is accessible to</strong></p>\n                          <ul>\n                            <li>Verified artists on the song</li>\n                            <li ng-repeat="role in song.viewable_by_roles" ng-bind="\'role.types.\' + role | i18n:{count:2, defaultValue: role}"></li>\n                          </ul>\n                        </div>\n                      </tether-drop>\n                    </div>\n                    <div\n                      tether-drop-target\n                      ng-if="song.published"\n                      class="metadata_with_icon"\n                    >\n                      <span class="metadata_with_icon-icon_wrapper">\n                        <svg src="lock.svg" class="metadata_with_icon-icon"></svg>\n                      </span>\n                      <span class="metadata_with_icon-value">Locked</span>\n                      <tether-drop show-on="hover" position="bottom center">\n                        <div class="tooltip tooltip--tiny">\n                          <p>This song has been locked and is considered "done". You need <u>600 IQ</u> to add annotations to locked songs.</p>\n                        </div>\n                      </tether-drop>\n                    </div>\n                    <div\n                      ng-if="song.lyrics_marked_staff_approved_by"\n                      class="metadata_with_icon"\n                      tether-drop-target\n                    >\n                      <span class="metadata_with_icon-icon_wrapper">\n                        <svg src="checkmark.svg" class="metadata_with_icon-icon"></svg>\n                      </span>\n                      <span class="metadata_with_icon-value">Lyrics Approved</span>\n                      <tether-drop show-on="hover" position="bottom center">\n                        <div class="tooltip tooltip--tiny">\n                          <p>These lyrics have been approved by Staff member <a ng-href="{{ song.lyrics_marked_staff_approved_by.url }}">{{ song.lyrics_marked_staff_approved_by.name }}</a> meaning they are locked and can only be edited by Genius staff, but you can still propose edits.</p>\n                        </div>\n                      </tether-drop>\n                    </div>\n                    <div\n                      ng-if="song.lyrics_marked_complete_by"\n                      class="metadata_with_icon"\n                      tether-drop-target\n                    >\n                      <span class="metadata_with_icon-icon_wrapper">\n                        <svg src="checkmark.svg" class="metadata_with_icon-icon"></svg>\n                      </span>\n                      <span class="metadata_with_icon-value">Lyrics Complete</span>\n                      <tether-drop show-on="hover" position="bottom center" ng-if="!song.lyrics_marked_staff_approved_by">\n                        <div class="tooltip tooltip--tiny">\n                          <p>These lyrics have been marked complete by <a ng-href="{{ song.lyrics_marked_complete_by.url }}">{{ song.lyrics_marked_complete_by.name }}</a> meaning they are locked and can only be edited by Transcribers, Editors, Moderators, and Staff, but you can still propose edits. <a ng-href="{{ transcriber_guide_url }}">Learn more about this process</a>.</p>\n                        </div>\n                      </tether-drop>\n                    </div>\n                  </div>\n                </div>\n\n                <div\n                  class="tiny_edit_button"\n                  ng-click="song_ctrl.show_metadata_form(\'album_date_and_tags\')"\n                  ng-hide="song_ctrl.saving"\n                  ng-if="can_perform(\'edit_anything\')"\n                  stop-propagation="click"\n                >\n                  <svg src="pencil.svg" class="tiny_edit_button-svg"></svg>\n                </div>\n              </div>\n            </defer-compile>\n\n            <dfp-ad\n              name="desktop_song_medium1"\n              ad-classes="[\'dfp_unit--in_read u-top_margin\']"\n            ></dfp-ad>\n\n            <defer-compile\n              use-initial-content-with-key="track_info"\n              within-visibility-range="150px"\n              delay="500"\n            >\n              <div\n                class="u-xx_large_vertical_margins show_tiny_edit_button_on_hover"\n                ng-if="song_ctrl.has_track_info(\'writer_artists\', \'release_date_components\', \'recording_location\', \'custom_performances\') || song_ctrl.has_song_relationships()"\n              >\n                <h3 class="text_label u-x_small_bottom_margin">"<span ng-bind="song.title"></span>" Track Info</h3>\n                <div\n                  class="tiny_edit_button"\n                  ng-if="can_perform(\'edit_anything\')"\n                  ng-hide="song_ctrl.saving"\n                  ng-click="song_ctrl.show_metadata_form(\'title_and_artists\')"\n                  stop-propagation="click"\n                >\n                  <svg src="pencil.svg" class="tiny_edit_button-svg"></svg>\n                </div>\n\n                <expandable-list\n                  collection="song.writer_artists"\n                  label="Written By"\n                  limit="3"\n                  template="additional_artists"\n                  variants="{table: true}"\n                ></expandable-list>\n\n                <div\n                  ng-repeat="label_artists in song.custom_performances track by $index"\n                >\n                  <expandable-list\n                    collection="label_artists.artists"\n                    template="additional_artists"\n                    limit="3"\n                    label="{{label_artists.label}}"\n                    variants="{table: true}"\n                  ></expandable-list>\n                </div>\n\n                <div class="metadata_unit metadata_unit--table_row" ng-if="song.recording_location">\n                  <span class="metadata_unit-label">{{ \'song.metadata.recording_location\' | i18n }}</span>\n                  <span class="metadata_unit-info metadata_unit-info--text_only" ng-bind="song.recording_location"></span>\n                </div>\n\n                <release-date\n                  date-components="song.release_date_components"\n                  variants="{table: true}"\n                ></release-date>\n\n                <div class="show_tiny_edit_button_on_hover">\n                  <div\n                    class="tiny_edit_button"\n                    ng-if="can_perform(\'edit_anything\') && song_ctrl.has_song_relationships()"\n                    ng-hide="song_ctrl.saving"\n                    ng-click="song_ctrl.show_metadata_form(\'song_relationships\')"\n                    stop-propagation="click"\n                  >\n                    <svg src="pencil.svg" class="tiny_edit_button-svg"></svg>\n                  </div>\n                </div>\n\n                <expandable-list\n                  ng-repeat="song_relationship in song.song_relationships" collection="song_relationship.songs"\n                  template="song_relationships"\n                  limit="1"\n                  label="{{:: song_relationship.type }}"\n                  variants="{table: true}"\n                ></expandable-list>\n              </div>\n            </defer-compile>\n\n            <defer-compile within-visibility-range="150px" delay="500">\n              <song-missing-metadata\n                ng-if="$ctrl.page_data.show_edit_form && can_perform(\'edit_anything\')"\n                song="song"\n                possible-missing-info="[\'writer_artists\', \'producer_artists\', \'albums\', \'release_date_components\']"\n              ></song-missing-metadata>\n            </defer-compile>\n\n            <div\n              class="videos bordered_media_container bordered_media_container--sidebar"\n              ng-if="$ctrl.youtube_media() && can_perform(\'view_apple_music_player\')"\n            >\n              <div class="text_label text_label--x_small_text_size u-half_bottom_margin">Music Video</div>\n              <div\n                class="videos-video_element clipped_background_image--background_fill"\n              >\n                <youtube-player\n                  class="u-fill_parent"\n                  src="$ctrl.youtube_media().url"\n                  eager-load="true"\n                  controls="true"\n                  fullscreen="true"\n                  start="$ctrl.youtube_media().start"\n                  on-playing="$ctrl.track_youtube_play()"\n                ></youtube-player>\n              </div>\n            </div>\n\n            <defer-compile\n              use-initial-content-with-key="album"\n              within-visibility-range="150px"\n              delay="500"\n            >\n              <song-albums\n                song="song"\n                primary-album-tracks="primary_album_tracks"\n              ></song-albums>\n            </defer-compile>\n          </div>\n        </div>\n        <div class="column_layout-flex_column-fill_column">\n          <annotation-sidebar referent="current_referent"></annotation-sidebar>\n        </div>\n      </div>\n    </div>\n\n    <breadcrumbs order="[song.primary_artist, song]"></breadcrumbs>\n\n    <global-message ng-if="can_perform(\'mark_as_not_spam\') && $ctrl.page_data.probably_spam">\n      <span>This song is considered probable spam</span>\n      <span><a href="/songs/probably_spam" class="text_label text_label--white text_label--button" target="_blank">view more probable spam</a></span>\n      <span ng-click="perform_admin_action(\'destroy\')" ng-if="can_perform(\'destroy\')" class="text_label text_label--white text_label--button" confirm="Are you sure? This cannot be undone">delete it</span>\n      <span ng-click="perform_admin_action(\'mark_as_not_spam\')" class="text_label text_label--white text_label--button">not spam</span>\n    </global-message>\n\n    <kb shortcut="shift+a" action="song_ctrl.show_metadata_form(\'title_and_artists\', \'from_keyboard_shortcut\')"></kb>\n    <kb shortcut="shift+m" action="song_ctrl.show_metadata_form(\'audio_video_and_images\', \'from_keyboard_shortcut\')"></kb>\n    <kb shortcut="shift+t" action="song_ctrl.show_metadata_form(\'album_date_and_tags\', \'from_keyboard_shortcut\')"></kb>\n    <kb shortcut="shift+r" action="song_ctrl.show_metadata_form(\'song_relationships\', \'from_keyboard_shortcut\')"></kb>\n    <kb ng-if="can_perform(\'override_apple_match\')" shortcut="shift+p" action="song_ctrl.show_metadata_form(\'apple_match_overrides\', \'from_keyboard_shortcut\')"></kb>\n    <kb ng-if="can_perform(\'set_song_color_gradient\')" shortcut="shift+c" action="song_ctrl.show_metadata_form(\'song_color_gradient\', \'from_keyboard_shortcut\')"></kb>\n    <modal-window hidden="song_ctrl.saving" ng-if="song_ctrl.show_metadata_form_sections" on-close="attempt_close(reason.close_button || !song_ctrl.is_form_dirty(), song_ctrl.close)">\n      <song-metadata-form object="song" expanded-sections="song_ctrl.show_metadata_form_sections" on-save="song_ctrl.save(song)" yields-is-dirty="song_ctrl.is_form_dirty = is_dirty"></song-metadata-form>\n    </modal-window>\n\n    <song-story-modal\n      ng-if="song_ctrl.show_song_story"\n      story="song.song_story"\n      song="song"\n      on-close="song_ctrl.show_song_story = false"\n    ></song-story-modal>\n\n    <hide-song-form song="song" ng-if="song_ctrl.hiding_prompt_visible" on-close="song_ctrl.hiding_prompt_visible = false"></hide-song-form>\n\n    <global-message ng-if="song.hidden">\n      <span ng-bind=":: \'This song is hidden\'"></span>\n    </global-message>\n\n    <global-error-message></global-error-message>\n  </div>\n\n  <apple-music-player\n    ng-if="song_ctrl.should_load_apple_music_player()"\n    url="song.apple_music_player_url"\n    apple-music-id="song.apple_music_id"\n  ></apple-music-player>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("song_page_sidebar_multi_placement.html",'<div ng-class="{\n  \'u-x_large_bottom_margin\': !$ctrl.is_empty()\n}">\n  <song-story-featured-story-placement\n    ng-if="$ctrl.song.song_story"\n    ng-click="$ctrl.show_song_story()"\n    story="$ctrl.song.song_story"\n    label="Song Story"\n  ></song-story-featured-story-placement>\n\n  <relevant-videos\n    ng-if="!$ctrl.song.song_story"\n    ng-show="$ctrl.should_render_video_component()"\n    object="$ctrl.song"\n    placement="sidebar"\n    container-classes="bordered_media_container bordered_media_container--sidebar"\n    variants="{show_container_label: true}"\n    on-filled="$ctrl.video_did_fill(videos)"\n    on-no-video="$ctrl.no_video(videos)"\n  ></relevant-videos>\n\n  <relevant-videos\n    ng-if="$ctrl.should_render_video_component()"\n    object="$ctrl.song"\n    placement="sidebar_thumb"\n    container-classes="bordered_media_container bordered_media_container--sidebar"\n    variants="{two_across: true}"\n  ></relevant-videos>\n\n  <dfp-ad\n    ng-if="$ctrl.should_show_ad()"\n    name="desktop_song_sidebar_top"\n    on-no-ad="$ctrl.no_ad()"\n    ad-classes="[\'dfp_unit--in_read\']"\n  ></dfp-ad>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("song_preview.html",'<div>\n  <div class="song_preview">\n    <div class="song_preview--art">\n      <img sized-src="$ctrl.song.album.cover_art_url || $ctrl.song.song_art_image_url">\n    </div>\n    <h1><a ng-href="{{ $ctrl.song.url }}">{{ $ctrl.song.title }}</a></h1>\n    <h2><a ng-href="{{ $ctrl.song.primary_artist.url }}">{{ $ctrl.song.primary_artist.name }}</a></h2>\n    <h3>\n      <expandable-list\n        collection="$ctrl.song.featured_artists"\n        label="Featuring"\n        limit="3"\n        template="additional_artists"\n      ></expandable-list>\n    </h3>\n    <h3>\n      <expandable-list\n        collection="$ctrl.song.producer_artists"\n        label="Produced by"\n        limit="3"\n        template="additional_artists"\n      ></expandable-list>\n    </h3>\n    <h3>\n      <song-primary-album album="$ctrl.song.album" ng-if="$ctrl.song.album"></song-primary-album>\n    </h3>\n    <div\n      ng-if="$ctrl.song.stats.pageviews"\n      title="{{ $ctrl.song.stats.pageviews | number }} views"\n    >\n      <svg class="inline_icon inline_icon--gray" src="eye.svg"></svg>\n      <span class="text_label text_label--gray text_label--x_small_text_size">{{ $ctrl.song.stats.pageviews | abbreviateBigNumber }} views</span>\n    </div>\n  </div>\n  <media-player\n    class="song_preview--genius_player"\n    media-sources="$ctrl.song.media"\n    sticky-offset="-1"\n  ></media-player>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("song_primary_album.html",'<div class="metadata_unit">\n  <span class="metadata_unit-label">{{:: (\'terms.album\' | i18n:{count:1}) }}</span>\n  <span class="metadata_unit-info">\n    <a ng-href="{{ album.url }}" ng-bind="album.name"></a>\n  </span>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("song_relationships.html",'<div\n  ng-if="collection.length"\n  class="metadata_unit"\n  ng-class="{\'metadata_unit--table_row\': variants.table}"\n>\n  <span class="metadata_unit-label">{{ \'song_relationship.title.\' + label | i18n }}</span>\n  <span class="metadata_unit-info">\n    <div ng-repeat="song in collection | limitTo: limit track by song.id" class="u-x_small_bottom_margin">\n      <a ng-href="{{:: song.path}}" tether-drop-target>\n        {{:: song.full_title}}\n\n        <tether-drop show-on="hover" position="bottom center">\n          <div class="tooltip tooltip--no_padding u-half_vertical_margins u-half_horizontal_margins">\n            <mini-song-card object="song"></mini-song-card>\n          </div>\n        </tether-drop>\n      </a>\n    </div>\n    <div ng-if="ctrl.more_to_show()">\n      <a href ng-click="ctrl.show_more()" class="metadata_unit-show_more">{{collection.length - limit}} more</a>\n    </div>\n  </span>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("song_story_featured_story_placement.html",'<div\n  class="song_story_featured_story_placement"\n  ng-class="{\n    \'song_story_featured_story_placement--shadow\': $ctrl.variants.shadow\n  }"\n>\n  <div\n    class="song_story_featured_story_placement-text"\n    ng-class="{\n      \'song_story_featured_story_placement-text--large_padding\': $ctrl.variants.size === \'large\'\n    }"\n  >\n    <div class="song_story_featured_story_placement-text-top">\n      <div ng-if="$ctrl.label" class="song_story_featured_story_placement-label">\n        <div class="text_label text_label--x_small_text_size text_label--no_margin">{{$ctrl.label}}</div>\n      </div>\n      <div\n        ng-bind="$ctrl.story.title"\n        class="song_story_featured_story_placement-title"\n      ></div>\n      <div\n        ng-if="$ctrl.story.subtitle"\n        ng-bind="$ctrl.story.subtitle"\n        ng-class="{\n          \'u-quarter_top_margin\': $ctrl.variants.size === \'large\'\n        }"\n      ></div>\n      <div\n        ng-bind="$ctrl.story.featured_placement_text"\n        class="song_story_featured_story_placement-text-description"\n        ng-class="{\n          \'song_story_featured_story_placement-text-description--headline\': $ctrl.variants.size === \'large\'\n        }"\n      ></div>\n    </div>\n    <div class="song_story_featured_story_placement-cta">\n      <svg class="song_story_play_icon" src="play.svg"></svg>\n      <div\n        ng-bind="\'song_stories.featured_placement_prompt.desktop\' | i18n"\n        class="text_label text_label--x_small_text_size text_label--no_margin"\n      ></div>\n    </div>\n  </div>\n  <div\n    class="song_story_featured_story_placement-image"\n    ng-class="{\n      \'song_story_featured_story_placement-image--medium\': $ctrl.variants.size === \'medium\',\n      \'song_story_featured_story_placement-image--large\': $ctrl.variants.size === \'large\',\n    }"\n  >\n    <img ng-src="{{$ctrl.story.gallery_cover_image_url}}">\n  </div>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("song_story_gallery_page.html",'<div class="full_page_width_banner full_page_width_banner--large_top_margin">\n  <img\n    ng-src="{{$ctrl.page_data.banner_image_url}}"\n    class="full_page_width_banner-image"\n  />\n</div>\n\n<div class="u-xxx_large_vertical_margins">\n  <song-story-lead-story-placement\n    show-story="$ctrl.active_story = $ctrl.page_data.featured_story"\n    story="$ctrl.page_data.featured_story"\n  >\n    <div class="song_story_lead_story_placement-black_box">\n      <div class="text_label text_label--white">Song Stories</div>\n      <h1 class="song_story_lead_story_placement-black_box-headline">{{$ctrl.page_data.intro_headline}}</h1>\n      <h2 class="song_story_lead_story_placement-black_box-body">\n        <span>{{$ctrl.page_data.intro_body}}</span>\n        <a\n          ng-href="{{$ctrl.page_data.learn_more_link.url}}"\n          class="song_story_gallery-learn_more_link"\n        >\n          <span ng-bind="$ctrl.page_data.learn_more_link.text"></span>\n          <svg src="external.svg" class="inline_icon inline_icon--white inline_icon--up_1 inline_icon--half_height u-hair_left_margin">\n        </a>\n      </h2>\n    </div>\n  </song-story-lead-story-placement>\n</div>\n\n<div class="song_stories_list">\n  <div\n    ng-repeat="story in $ctrl.page_data.latest_stories track by story.id"\n    class="song_stories_list-item"\n  >\n    <song-story-featured-story-placement\n      ng-click="$ctrl.active_story = story"\n      story="story"\n      label="Song Story"\n      variants="{size: \'medium\'}"\n    ></song-story-featured-story-placement>\n  </div>\n</div>\n\n<song-story-modal\n  ng-if="$ctrl.active_story"\n  story="$ctrl.active_story"\n  on-close="$ctrl.active_story = null"\n></song-story-modal>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("song_story_lead_story_placement.html",'<div class="song_story_lead_story_placement column_layout">\n  <ng-transclude></ng-transclude>\n\n  <song-story-featured-story-placement\n    ng-click="$ctrl.show_story()"\n    story="$ctrl.story"\n    label="Featured Song Story"\n    variants="{size: \'large\', shadow: true}"\n  ></song-story-featured-story-placement>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("song_story_modal.html",'<modal-window\n  variants="{no_background: true, width_of_contents: true, vertically_center_self: true}"\n  on-close="$ctrl.on_close()"\n>\n  <div class="song_story_modal">\n    <div class="u-bottom_margin u-accept_pointer_events" ng-switch="$ctrl.placement">\n      <div ng-if="$ctrl.song">\n        <span class="text_label text_label--x_small_text_size text_label--white">{{$ctrl.title}}</span>\n        <a\n          ng-if="$ctrl.can(\'view_song_story_gallery\', $ctrl.song)"\n          class="text_label text_label--x_small_text_size text_label--white text_label--button u-left_margin"\n          href="/song-stories?utm_source=genius_modal"\n        >Visit Gallery</a>\n      </div>\n      <div ng-if="!$ctrl.song">\n        <a\n          class="text_label text_label--x_small_text_size text_label--white text_label--button"\n          ng-if="$ctrl.title_url"\n          ng-href="{{$ctrl.title_url}}"\n        >{{$ctrl.title}}</a>\n        <span class="text_label text_label--x_small_text_size text_label--white" ng-if="!$ctrl.title_url">{{$ctrl.title}}</span>\n      </div>\n    </div>\n    <iframe\n      ng-src="{{$ctrl.src}}"\n      class="u-black_background u-display_block u-accept_pointer_events"\n      scrolling="no"\n      frameborder="0"\n      width="375"\n      height="667"\n    ></iframe>\n  </div>\n</modal-window>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("song_verified_artists.html",'<div class="song_verified_artists">\n  <song-verified-artists-section contributors="$ctrl.commentary_and_lyrics_by" label="{{ \'song.verified.desktop.commentary_and_lyrics\' | i18n }}" featured="$ctrl.featured"></song-verified-artists-section>\n  <song-verified-artists-section contributors="$ctrl.commentary_by" label="{{ \'song.verified.desktop.commentary\' | i18n }}" featured="$ctrl.featured"></song-verified-artists-section>\n  <song-verified-artists-section contributors="$ctrl.lyrics_by" label="{{ \'song.verified.desktop.lyrics\' | i18n }}" featured="$ctrl.featured"></song-verified-artists-section>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("song_verified_artists_section.html",'<div class="song_verified_artists-section" ng-if="$ctrl.contributors.length">\n  <div class="text_label text_label--gray u-quarter_bottom_margin" ng-if="!$ctrl.featured">{{:: $ctrl.label}} by</div>\n  <div class="song_verified_artists-users">\n    <song-verified-artists-section-single\n      ng-repeat="contributor in $ctrl.contributors track by $id(contributor)"\n      contributor="contributor"\n      variants="{first: $first}"\n      label="{{$ctrl.label}}"\n      featured="$ctrl.featured"\n    ></song-verified-artists-section-single>\n  </div>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("song_verified_artists_section_single.html",'<a ng-href="{{ $ctrl.url }}" class="song_verified_artists-user_badge user_badge" tether-drop-target>\n  <div\n    class="user_avatar user_avatar--x_small clipped_background_image--background_fill"\n    ng-class="{\n              \'user_avatar--medium\': $ctrl.variants.first,\n              \'u-left_margin\': !$ctrl.variants.first,\n              \'user_avatar--large\': $ctrl.featured,\n              \'song_verified_artists-user_avatar--featured\': $ctrl.featured,\n              \'song_verified_artists-user_avatar--is_meme_verified\': $ctrl.is_meme_verified\n              }"\n    clipped-background-image="$ctrl.image_url"\n  ></div>\n  <div class="user_badge-text">\n    <div class="user_badge-subhead u-quarter_bottom_margin" ng-if="$ctrl.featured">{{:: $ctrl.label}} by</div>\n    <span class="user_badge-login">{{ $ctrl.name }}</span>\n    <svg class="checky" src="checky.svg" ng-if="$ctrl.is_meme_verified"></svg>\n  </div>\n\n  <tether-drop show-on="hover">\n    <user-tooltip ng-if="$ctrl.contributor.user" user="$ctrl.contributor.user"></user-tooltip>\n    <artist-tooltip ng-if="!$ctrl.contributor.user" artist="$ctrl.contributor.artist"></artist-tooltip>\n  </tether-drop>\n</a>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("soundcloud.html",'<iframe class="iframe" width="100%" height="465" scrolling="no" frameborder="no"></iframe>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("spam_status.html",'<div ng-if="$ctrl.user_spam_evaluation">\n  <div class="gray_container u-vertical_margins">\n    <div class="text_label">\n      Spam State: {{:: $ctrl.user_spam_evaluation.spam_state || \'?\' }}\n    </div>\n    <div class="spam_check_feature--red text_label" ng-if="$ctrl.user_spam_evaluation.spam_score >= 0">\n      Spam Score: {{:: $ctrl.user_spam_evaluation.spam_score == null ? \'?\' : $ctrl.user_spam_evaluation.spam_score }}\n    </div>\n    <div class="spam_check_feature--green text_label" ng-if="$ctrl.user_spam_evaluation.trust_score >= 0">\n      Trust Score: {{:: $ctrl.user_spam_evaluation.trust_score == null ? \'?\' : $ctrl.user_spam_evaluation.trust_score }}\n    </div>\n  </div>\n\n  <table>\n    <tr\n      ng-class="{\n        \'spam_check_feature--bold\': spam_check_feature.value != 0,\n        \'spam_check_feature--green\': spam_check_feature.outcome == \'probably_ham\',\n        \'spam_check_feature--red\': spam_check_feature.outcome == \'probably_spam\'\n      }"\n      ng-repeat="spam_check_feature in $ctrl.user_spam_evaluation.spam_check_features | filter:{label: \'!!\'}"\n      class="spam_check_feature text_label"\n    >\n      <td><span class="u-horizontal_margins">{{:: spam_check_feature.value }}</span></td>\n      <td>{{:: spam_check_feature.label }}</td>\n    </tr>\n  </table>\n</div>\n\n<placeholder-spinner ng-if="!$ctrl.user_spam_evaluation"></placeholder-spinner>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("square_item_and_iq.html","<span\n  ng-class=\"{\n    'square_item_and_iq': $ctrl.show_pill(),\n    'square_item_and_iq--full_width': $ctrl.variants.full_width,\n    'square_item_and_iq--two_digits': $ctrl.show_pill() && $ctrl.iq().toString().length === 2,\n    'square_item_and_iq--three_digits': $ctrl.show_pill() && $ctrl.iq().toString().length === 3,\n  }\"\n>\n  <ng-transclude></ng-transclude>\n  <div ng-if=\"$ctrl.show_pill()\" class=\"iq_pill\">\n    ({{ $ctrl.iq() | signed_number }} IQ)\n  </div>\n</span>\n")}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("standalone_inbox.html",'<div\n  ng-class="{\'standalone_inbox--embed\': $ctrl.embed}"\n  ng-style="$ctrl.embed && {maxHeight: $ctrl.max_height}"\n  ng-transclude\n  scroll-only-this-element\n></div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("standalone_referent.html",'<referent-fragment-container object="referent" variants="{show_full_referent: variants.show_full_referent}">\n  <referent-header>\n    <a ng-href="{{ referent.annotatable.url }}" class="referent-annotatable_title">\n      {{ referent.annotatable.link_title }}\n    </a>\n  </referent-header>\n  <referent-fragment>\n    <a\n      ng-href="{{ referent.url }}"\n      class="referent referent--white referent--accent_font"\n      ng-class="{\'referent--large\': variants.largeReferent}"\n    >{{ referent.is_image ? \'[Image]\' : referent.fragment }}</a>\n  </referent-fragment>\n</referent-fragment-container>\n<div class="u-vertical_margins">\n  <annotation\n    ng-repeat="annotation in referent.annotations track by annotation.id"\n    object="annotation"\n    referent="referent"\n    variants="{hideComments: !focused_comments.length, hide_moderation: variants.hide_moderation, hide_social: variants.hide_social}"\n    yields-api="yields_api({api: api, id: annotation.id})"\n    on-pending-event="on_pending_event({event: event, result: result})"\n    yields-iq="yields_iq({iq_api: iq_api, id: annotation.id})"\n    focused-comments="focused_comments"\n  ></annotation>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("standalone_search.html",'<div\n  class="standalone_search"\n  ng-style="{maxHeight: $ctrl.max_height}"\n  scroll-only-this-element\n>\n  <search-results\n    search-text="$ctrl.search_text"\n    sections="$ctrl.sections"\n    scroll-container-selector=".standalone_search"\n  ></search-results>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("standard_rich_content.html","<div\n  ng-class=\"{\n    'article_rich_text_formatting': variants.article,\n    'rich_text_formatting': !variants.article,\n    'rich_text_formatting--large': variants.isLarge,\n    'rich_text_formatting--no_vertical_margins': variants.no_vertical_margins,\n  }\"\n  ng-bind-html=\"trusted_html\"\n  embedly\n></div>\n")}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("statistics_panel.html",'<div class="statistics_panel">\n  <statistics-panel-item class="statistics_panel-item" ng-click="$ctrl.on_select({type: \'annotations\'})" label="Annotations" value=":: $ctrl.user.stats.annotations_count" icon="blockquote.svg"></statistics-panel-item>\n  <statistics-panel-item class="statistics_panel-item" ng-click="$ctrl.on_select({type: \'comments\'})" label="Suggestions" value=":: $ctrl.user.stats.comments_count" icon="comment.svg"></statistics-panel-item>\n  <statistics-panel-item class="statistics_panel-item" ng-click="$ctrl.on_select({type: \'transcriptions\'})" label="Transcriptions" value=":: $ctrl.user.stats.transcriptions_count" icon="one_document.svg"></statistics-panel-item>\n  <statistics-panel-item class="statistics_panel-item" ng-click="$ctrl.on_select({type: \'questions_and_answers\'})" label="Questions" value=":: $ctrl.user.stats.questions_count" icon="magnifying_glass.svg"></statistics-panel-item>\n  <statistics-panel-item class="statistics_panel-item" ng-click="$ctrl.on_select({type: \'questions_and_answers\'})" label="Answers" value=":: $ctrl.user.stats.answers_count" icon="star.svg"></statistics-panel-item>\n  <statistics-panel-item class="statistics_panel-item" ng-click="$ctrl.on_select({type: \'pyongs\'})" label="Pyongs" value=":: $ctrl.user.stats.pyongs_count" icon="lightning.svg"></statistics-panel-item>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("statistics_panel_item.html",'<div title="{{:: $ctrl.value | number:0 }}">\n  <div class="statistic_and_label">\n    <div class="statistic_and_label-primary">\n      <svg\n        class="inline_icon inline_icon--reading_size"\n        ng-class="{\n          \'inline_icon--down_2\': $ctrl.icon === \'comment.svg\',\n          \'inline_icon--down_1\': $ctrl.icon === \'blockquote.svg\' || $ctrl.icon === \'one_document.svg\' || $ctrl.icon === \'magnifying_glass.svg\'\n        }"\n        src="{{:: $ctrl.icon }}"\n      ></svg>\n      <span class="statistic_and_label-number">{{:: $ctrl.value | abbreviateBigNumber}}</span>\n    </div>\n    <div class="statistic_and_label-subtext">{{:: $ctrl.label }}</div>\n  </div>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("text_corrector.html",'<form \n  dirtyable \n  yields-is-dirty="$ctrl.is_dirty = is_dirty" \n  ng-submit="$ctrl.submit_form()" \n  submit-on-cmd-enter \n  exports-form-api="$ctrl.correction_form = api"\n>\n  <textarea \n    autofocus \n    ng-show="$ctrl.text || $ctrl.text == \'\'" \n    ng-model="$ctrl.text" \n    ng-model-options="{updateOn: \'submit\'}" \n    class="square_input square_input--full_width u-vertical_margins"\n  ></textarea>\n  <button \n    ng-disabled="ctrl.saving" \n    ng-hide="$ctrl.proposing_edit" \n    class="square_button square_button--green" \n    ng-class="{\'square_button--disabled\': $ctrl.saving}" \n    type="submit"\n  >{{ $ctrl.saving ? \'Saving\' : \'Save\' }}</button>\n  <button \n    ng-disabled="ctrl.saving" \n    ng-show="$ctrl.proposing_edit" \n    class="square_button square_button--green" \n    ng-class="{\'square_button--disabled\': $ctrl.saving}" \n    type="submit"\n  >{{ $ctrl.saving ? \'Proposing Edit\' : \'Propose Edit\' }}</button>\n  <button \n    ng-disabled="ctrl.saving" \n    class="square_button square_button--transparent square_button--gray" \n    ng-click="$ctrl.cancel_correction()" \n    prevent-default-click\n  >Cancel</button>\n</form>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("time_ago.html",'<span title="{{ time*1000 | date: \'medium\' }}" am-time-ago="time * 1000"></span>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("twitter_share_button.html",'<a\n  ng-click="$ctrl.share_on_twitter()"\n  class="square_button"\n  ng-class="{\n    \'square_button--transparent square_button--twitter_inverse nganimate-disable_transition\': $ctrl.variants.transparent,\n    \'square_button--twitter\': !$ctrl.variants.transparent\n  }"\n>\n  <svg class="inline_icon" src="twitter.svg"></svg>\n  <span ng-if="$ctrl.variants.showText">Tweet</span>\n</a>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("user_attribution.html",'<div class="leaderboard-percentage_fill" ng-if="$ctrl.object.attribution" style="width: {{ ($ctrl.object.attribution * 100) | number:2 }}%"></div>\n<span class="leaderboard-rank" ng-bind="$ctrl.rank"></span>\n<span class="leaderboard-user">\n  <user-badge size="x_small" object="$ctrl.object.user"></user-badge>\n</span>\n<span class="leaderboard-sort_value">\n  <span ng-if="$ctrl.object.attribution">{{ ($ctrl.object.attribution * 100) | number:0 }}%</span>\n  <span ng-if="$ctrl.object.attribution_value"><span ng-if="$index === 0">+</span>{{ $ctrl.object.attribution_value | number:0 }}</span>\n</span>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("user_badge.html",'<a ng-href="{{ variants.no_profile_link ? undefined : user.url }}" class="user_badge" ng-if="user" tether-drop-target>\n  <div\n    ng-class=":: [\'user_avatar\', \'user_avatar--\' + size]"\n    clipped-background-image="avatar_url"\n  ></div>\n  <div class="user_badge-text">\n    <div\n      ng-if=":: is_two_lines"\n      class="user_badge-subhead"\n      ng-class="{\'user_badge-subhead--green\': user.is_verified && !sponsor}"\n    >\n      <div ng-if=":: !variants.show_user_role">\n        <span>{{:: pinned_role}}</span>\n        <svg class="checky" src="checky.svg" ng-if=":: user.is_verified && !sponsor"></svg>\n      </div>\n      <div ng-if=":: variants.show_user_role && user.role_for_display">\n        <span>{{:: \'role.types.\' + user.role_for_display | i18n:{count:1, defaultValue: user.role_for_display} }}</span>\n        <role-icon ng-if="user.role_for_display" role="user.role_for_display" has-checky="user.is_meme_verified"></role-icon>\n      </div>\n    </div>\n    <div class="user_badge-login_and_iq" ng-class=":: {\'user_badge-login_and_iq--one_line\': !is_two_lines}">\n      <span class="user_badge-login">{{:: user.name }}</span>\n      <role-icon ng-if="user.role_for_display && !is_two_lines" role="user.role_for_display" has-checky="::user.is_verified"></role-icon>\n      <span\n        class="user_badge-iq"\n        ng-class=":: {\n          \'tag_label tag_label--yellow_background\': is_two_lines,\n          \'user_badge-iq--one_line\': !is_two_lines\n        }"\n        ng-if=":: !variants.hide_iq"\n      >{{:: user.iq | number:0 }}</span>\n\n      <span ng-if=":: sponsor && is_two_lines">\n        <span class="user_badge-iq tag_label tag_label--gray_background tag_label--lowercase">via {{:: sponsor }}</span>\n        <svg class="checky checky--up_1" src="checky.svg" ng-if=":: user.is_verified"></svg>\n      </span>\n    </div>\n  </div>\n  <tether-drop show-on="hover" ng-if=":: !disables_user_tooltips">\n    <user-tooltip user="user"></user-tooltip>\n  </tether-drop>\n</a>\n\n<div class="user_badge" ng-if="!user && anonymous_user">\n  <div\n    ng-class=":: [\'user_avatar\', \'user_avatar--\' + size]"\n    class="clipped_background_image clipped_background_image--background_fill"\n  ></div>\n  <div class="user_badge-text">\n    <div class="user_badge-login_and_iq" ng-class=":: {\'user_badge-login_and_iq--one_line\': !is_two_lines}">\n      <span class="user_badge-login">{{:: anonymous_user.name}}</span>\n    </div>\n  </div>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("user_badge_and_timestamp.html",'<div class="user_badge_and_timestamp">\n  <div class="user_badge_and_timestamp-badge">\n    <user-badge\n      size="{{size}}"\n      object="user"\n      anonymous-user="anonymous_user"\n      pinned-role="pinned_role"\n      sponsor=":: sponsor"\n      variants=":: variants"\n    ></user-badge>\n  </div>\n  <div class="user_badge_and_timestamp-created_at">\n    <time-ago time="time" ng-if="time"></time-ago>\n  </div>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("user_identities.html",'<div>\n  <button\n    ng-if="$ctrl.can_edit()"\n    ng-repeat="available_identity in $ctrl.user.available_identity_providers track by available_identity"\n    class="square_button square_button--with_icon square_button--{{available_identity}} u-quarter_vertical_margins u-display_block"\n    http-method="post"\n    action="{{$ctrl.identity_auth_path(available_identity)}}"\n  >\n    <span class="square_button-padded_icon">\n      <svg class="inline_icon" ng-src="available_identity | svg"></svg>\n    </span>\n    Link your {{available_identity + \'_identity\' | modelHumanName}} account!\n  </button>\n  <button\n    ng-repeat="identity in $ctrl.user.identities track by identity.id"\n    class="square_button square_button--with_icon square_button--{{identity.provider}} u-quarter_vertical_margins u-display_block square_button-right_icon_margin"\n  >\n    <span class="square_button-padded_icon">\n      <svg class="inline_icon" ng-src="identity.provider | svg"></svg>\n    </span>\n    {{identity.name}}\n    <span class="u-half_left_margin" ng-if="$ctrl.can_edit()" ng-click="$ctrl.unlink_identity(identity)">\n      <svg\n        ng-if="!$ctrl.saving_identity[identity.provider]"\n        class="inline-icon inline_icon--transparent square_button-x_icon"\n        src="x.svg"></svg>\n      <placeholder-spinner ng-if="$ctrl.saving_identity[identity.provider]" variants=":: {inline: true}"></placeholder-spinner>\n    </span>\n  </button>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("user_info_with_actions.html",'<div class="user_info_with_actions">\n  <div class="user_badge">\n    <a href="{{ $ctrl.user.url }}" class="u-block_level_link">\n      <div\n        class="user_avatar user_avatar--{{:: $ctrl.variants.avatar_size}} clipped_background_image--background_fill"\n        clipped-background-image="$ctrl.user.avatar.medium.url"\n      ></div>\n    </a>\n    <div class="user_badge-text">\n      <a href="{{ $ctrl.user.url }}" class="u-block_level_link">\n        <div\n          ng-if="$ctrl.user.role_for_display"\n          class="user_badge-subhead"\n          ng-class="{\'user_badge-subhead--green\': $ctrl.user.is_meme_verified}"\n        >\n          <span>\n            {{ \'role.types.\' + $ctrl.user.role_for_display | i18n:{count:1, defaultValue: $ctrl.user.role_for_display} }}\n          </span>\n          <role-icon\n            ng-if="$ctrl.user.role_for_display"\n            role="$ctrl.user.role_for_display"\n            has-checky="$ctrl.user.is_meme_verified"\n          ></role-icon>\n        </div>\n        <div class="user_badge-login_and_iq">\n          <span class="user_badge-login">{{ $ctrl.user.name }}</span>\n          <span class="user_badge-iq tag_label tag_label--yellow_background">{{ $ctrl.user.iq | number:0 }}</span>\n        </div>\n      </a>\n      <div class="user_info_with_actions-user_badge_actions" ng-if="$ctrl.user_signed_in && $ctrl.user.id !== $ctrl.current_user.id">\n        <follow-button\n          type="user"\n          object="$ctrl.user"\n          disabled="!$ctrl.user.current_user_metadata"\n        ></follow-button>\n        <span class="square_button" ng-click="$ctrl.sending_message = true">Message</span>\n      </div>\n    </div>\n  </div>\n\n  <p class="rich_text_formatting u-top_margin" ng-if="$ctrl.user.about_me_summary">\n    {{ $ctrl.user.about_me_summary | truncateToBoundary:100:{with_ellipsis: true} }}\n  </p>\n</div>\n\n<modal-window\n  ng-if="$ctrl.sending_message"\n  on-close="$ctrl.attempt_close(!$ctrl.is_conversation_dirty(), $ctrl.close_conversation_modal)"\n  variants="{full_height: true}"\n>\n  <conversation-with-user user="$ctrl.user" yields-is-dirty="$ctrl.is_conversation_dirty = is_dirty"></conversation-with-user>\n</modal-window>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("user_moderation.html",'<div\n  ng-if="$ctrl.errors"\n  ng-repeat="error in $ctrl.errors"\n  class="u-vertical_margins form_message form_message--error text_label"\n>{{ error }}</div>\n\n<div\n  ng-if="$ctrl.messages"\n  ng-repeat="message in $ctrl.messages"\n  class="u-vertical_margins form_message form_message--success text_label"\n>{{ message }}</div>\n\n<div class="u-break_word">\n  <div\n    class="u-vertical_margins u-clickable"\n    ng-if="$ctrl.can(\'toggle_penalty_status\')"\n    ng-click="$ctrl.toggle_penalty_status()"\n  >\n    <span class="text_label" ng-class="{\'text_label--gray\': $ctrl.updating, \'text_label--purple\': !$ctrl.updating}">\n      <svg\n        class="inline_icon inline_icon--reading_size inline_icon--up_2"\n        ng-class="{\'inline_icon--gray\': $ctrl.updating, \'inline_icon--purple\': !$ctrl.updating}"\n        src="alert.svg"\n      ></svg> {{ $ctrl.user.penalty_box_until ? \'Take \' + $ctrl.user.login + \' out of the penalty box\' : \'Put \' + $ctrl.user.login + \' in the penalty box\' }}\n    </span>\n    <span ng-if="$ctrl.user.penalty_box_until" class="u-display_block text_label--gray">\n      {{ $ctrl.user.login }} is in the penalty box until {{ $ctrl.user.penalty_box_until | human_readable_datetime }}\n    </span>\n  </div>\n\n  <div\n    class="u-vertical_margins u-clickable"\n    ng-if="$ctrl.can(\'mark_spam\') && $ctrl.user.spam_state != \'definitely_spam\'"\n    ng-click="$ctrl.update_spam_state(\'spam\')"\n  >\n    <span class="text_label" ng-class="{\'text_label--gray\': $ctrl.updating, \'text_label--purple\': !$ctrl.updating}">\n      <svg\n        class="inline_icon inline_icon--reading_size inline_icon--up_2"\n        ng-class="{\'inline_icon--gray\': $ctrl.updating, \'inline_icon--purple\': !$ctrl.updating}"\n        src="flag.svg"\n      ></svg> Mark {{$ctrl.user.login}} as spam\n    </span>\n  </div>\n\n  <div\n    class="u-vertical_margins u-clickable"\n    ng-if="$ctrl.can(\'mark_ham\') && $ctrl.user.spam_state != \'definitely_ham\'"\n    ng-click="$ctrl.update_spam_state(\'ham\')"\n  >\n    <span class="text_label" ng-class="{\'text_label--gray\': $ctrl.updating, \'text_label--purple\': !$ctrl.updating}">\n      <svg\n        class="inline_icon inline_icon--reading_size inline_icon--up_2"\n        ng-class="{\'inline_icon--gray\': $ctrl.updating, \'inline_icon--purple\': !$ctrl.updating}"\n        src="flag.svg"\n      ></svg> Mark {{$ctrl.user.login}} as ham\n    </span>\n  </div>\n\n  <div\n    class="u-vertical_margins u-clickable"\n    ng-if="$ctrl.can(\'mass_delete_unreviewed_activity\')"\n    ng-click="$ctrl.mass_delete_unreviewed_activity()"\n  >\n    <span class="text_label" ng-class="{\'text_label--gray\': $ctrl.updating, \'text_label--purple\': !$ctrl.updating}">\n      <svg\n        class="inline_icon inline_icon--reading_size inline_icon--up_2"\n        ng-class="{\'inline_icon--gray\': $ctrl.updating, \'inline_icon--purple\': !$ctrl.updating}"\n        src="x.svg"\n      ></svg> Delete all of {{$ctrl.user.login}}\'s unreviewed annotations, suggestions, and forum posts\n    </span>\n  </div>\n\n  <div\n    ng-repeat="type in $ctrl.vote_types"\n    class="u-vertical_margins u-clickable"\n    ng-if="$ctrl.can(\'mass_delete_votes\')"\n    ng-click="$ctrl.mass_delete_votes(type)"\n  >\n    <span class="text_label" ng-class="{\'text_label--gray\': $ctrl.updating, \'text_label--purple\': !$ctrl.updating}">\n      <svg\n        class="inline_icon inline_icon--reading_size inline_icon--up_2"\n        ng-class="{\'inline_icon--gray\': $ctrl.updating, \'inline_icon--purple\': !$ctrl.updating}"\n        src="{{ type == \'votes\' ? \'x\' : \'clear_\'+type | svg }}"\n      ></svg> Clear all of {{$ctrl.user.login}}\'s {{type}}\n    </span>\n  </div>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("user_tooltip.html",'<div\n  class="tooltip u-half_vertical_margins u-half_horizontal_margins"\n  stop-propagation="click"\n>\n  <user-info-with-actions object=":: user" variants="{avatar_size: \'xx_large\'}"></user-info-with-actions>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("vertical_album_card.html",'<a href="{{$ctrl.album.url}}" title="{{$ctrl.album.name}}" class="vertical_album_card" set-class-before-navigate="vertical_album_card--active">\n  <div class="cover_art">\n    <img\n      class-for-browser="{msie: \'cover_art-image_ie\', _default: \'cover_art-image\'}"\n      sized-src="$ctrl.album.cover_art_thumbnail_url"\n    />\n  </div>\n  <div class="vertical_album_card-info">\n    <h3>{{$ctrl.album.name}}</h3>\n    <div class="vertical_album_card-release_date">\n      {{$ctrl.album.release_date_components.year}}\n    </div>\n  </div>\n</a>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("vertical_search_result_item.html",'<div\n  tracking="click"\n  tracking-event="Search Result Tap"\n>\n  <vertical-album-card object="$ctrl.hit.result"></vertical-album-card>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("vertical_search_result_items.html",'<div class="thumbnail_grid white_container u-quarter_vertical_margins">\n  <div\n    ng-repeat="hit in $ctrl.results | limitTo: $ctrl.limit_to"\n    class="thumbnail_grid-grid_element u-clickable"\n    ng-class="{ \'thumbnail_grid-grid_element--third\': hit.type === \'album\' }"\n  >\n    <vertical-search-result-item hit="hit"></vertical-search-result-item>\n  </div>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("video_carousel.html",'<div\n  ng-if="!$ctrl.loaded || $ctrl.video_placement.videos.length"\n  class="video_carousel"\n  ng-class="{\n    \'video_carousel--half_black_background\': $ctrl.variants.half_black_background,\n    \'video_carousel--striped_background\': $ctrl.variants.striped_background\n  }"\n>\n  <div class="video_carousel-container">\n    <div class="video_carousel-video video_carousel-video--intro_card">\n      <a\n        ng-if="$ctrl.video_list"\n        ng-href="{{$ctrl.video_list.url}}"\n        class="video_carousel-video-card video_carousel-video-card--intro_card_text"\n      >\n        <svg\n          ng-if="$ctrl.has_logo()"\n          ng-src="$ctrl.logo_name()"\n          class="video_carousel-video-card-logo {{ $ctrl.logo_variants() }}"\n        ></svg>\n        <span ng-if="!$ctrl.has_logo()">{{ $ctrl.video_list.title }}</span>\n      </a>\n      <div\n        ng-if="!$ctrl.video_list"\n        class="video_carousel-video-card video_carousel-video-card--intro_card_text"\n      >\n        {{ $ctrl.title }}\n      </div>\n    </div>\n\n    <div ng-if="$ctrl.active_video" class="video_carousel-video video_carousel-video--active">\n      <div class="video_carousel-video-card">\n        <img class="video_carousel-video-image" sized-src="$ctrl.active_video.poster_url" />\n        <div>\n          <div class="video_carousel-video-currently_playing_label text_label text_label--x_small_text_size text_label--white">\n            Currently Playing\n          </div>\n        </div>\n      </div>\n      <div class="video_carousel-video-title">{{ $ctrl.active_video.title }}</div>\n    </div>\n\n    <a\n      ng-repeat="video in $ctrl.video_placement.videos track by video.id"\n      ng-href="{{video.url}}?utm_source=recommended"\n      class="video_carousel-video"\n    >\n      <div class="video_carousel-video-card">\n        <div class="u-relative">\n          <img class="u-display_block" sized-src="video.poster_url" />\n          <svg\n            src="play.svg"\n            class="play_button"\n          ></svg>\n        </div>\n      </div>\n      <div class="video_carousel-video-title">\n        {{ video.title }}\n      </div>\n    </a>\n  </div>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("video_edit_form.html",'<div class="text_label text_label--purple">Video Sources</div>\n\n<placeholder-spinner ng-if="!$ctrl.loaded"></placeholder-spinner>\n\n<div ng-if="$ctrl.loaded">\n  <div ng-if="$ctrl.error" class="form_message form_message--error text_label">\n    {{ $ctrl.error.message }}\n    <ul class="u-bullet_list">\n      <li ng-repeat="error in $ctrl.error.response.errors">\n        {{ error }}\n      </li>\n    </ul>\n  </div>\n\n  <table class="admin_table rich_text_formatting">\n    <tr>\n      <th>URL</th>\n      <th>Views</th>\n      <th></th>\n    </tr>\n    <tr ng-repeat="video_source in $ctrl.video_sources track by video_source.id">\n      <td>\n        <a target="_blank" ng-href="{{ video_source.external_url }}">{{ video_source.external_url }}</a>\n      </td>\n      <td>\n        {{ video_source.view_count | number }}\n      </td>\n      <td>\n        <button\n          ng-if="$ctrl.has_permission(\'destroy\', video_source)"\n          prevent-default-click\n          ng-click="$ctrl.remove_video_source(video_source)"\n          class="square_button square_button--red"\n        >Remove</button>\n      </td>\n    </tr>\n  </table>\n\n  <form ng-submit="$ctrl.add_video_source()" ng-model-options="{updateOn: \'submit\'}" submit-on-cmd-enter>\n    <input class="square_input" ng-model="$ctrl.new_source.external_url" placeholder="External URL">\n    <input class="modal_window-save_button square_button square_button--purple" type="submit" value="Add">\n  </form>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("video_list_edit_form.html",'<div ng-if="$ctrl.errors.length" class="form_message form_message--error text_label rich_text_formatting u-vertical_margins">\n  <ul>\n    <li ng-repeat="error in $ctrl.errors">{{ error }}</li>\n  </ul>\n</div>\n\n<form class="square_form" ng-submit="$ctrl.save()" ng-model-options="{updateOn: \'submit\'}" submit-on-cmd-enter>\n  <div class="square_form-input_and_label square_form-input_and_label--half_width">\n    <div class="text_label">Title Image URL</div>\n    <input class="square_input square_form-standard_element_margin" ng-model="$ctrl.editable_video_list.title_image_url" placeholder="Title Image URL">\n  </div>\n\n  <div class="square_form-input_and_label square_form-input_and_label--half_width">\n    <div class="text_label">Mobile Title Image URL</div>\n    <input class="square_input square_form-standard_element_margin" ng-model="$ctrl.editable_video_list.mobile_title_image_url">\n  </div>\n\n  <input class="modal_window-save_button square_button square_button--purple u-small_vertical_margins" type="submit" value="Save">\n</form>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("video_list_page.html",'<div class="video_list_page">\n  <div\n    ng-if="$ctrl.page_data.video_list.title_image_url"\n    class="full_page_width_banner show_tiny_edit_button_on_hover"\n  >\n    <img\n      sized-src="$ctrl.page_data.video_list.title_image_url"\n      class="full_page_width_banner-image"\n    />\n    <div\n      class="tiny_edit_button"\n      stop-propagation="click"\n      ng-click="$ctrl.show_banner_edit_modal = true"\n      ng-if="$ctrl.can_perform(\'edit\')"\n    ><svg src="pencil.svg" class="tiny_edit_button-svg"></svg></div>\n  </div>\n\n  <div\n    ng-if="$ctrl.page_data.video_list.title_image_url"\n    class="u-top_margin video_list_title_card-subscribe_button"\n  >\n    <youtube-subscribe-button></youtube-subscribe-button>\n  </div>\n\n  <div\n    ng-if="!$ctrl.page_data.video_list.title_image_url"\n    class="video_list_title_card video_list_title_card--text show_tiny_edit_button_on_hover"\n  >\n    <div class="video_list_title_card-text_and_background_container">\n      <div class="video_list_title_card-text_container">\n        <h1 class="video_list_title_card-text_container-title">{{ $ctrl.page_data.video_list.title }}</h1>\n        <p>{{ $ctrl.page_data.video_list.description }}</p>\n        <div class="u-x_large_top_margin">\n          <youtube-subscribe-button></youtube-subscribe-button>\n        </div>\n      </div>\n    </div>\n    <div\n      class="tiny_edit_button"\n      stop-propagation="click"\n      ng-click="$ctrl.show_banner_edit_modal = true"\n      ng-if="$ctrl.can_perform(\'edit\')"\n    ><svg src="pencil.svg" class="tiny_edit_button-svg"></svg></div>\n  </div>\n\n  <scrollable-data\n    src="$ctrl.scrollable_videos_data"\n    preload="$ctrl.page_data.videos"\n    repeat-with="video"\n    scroll-mechanism="infinite_scroll"\n    container-classes="video_list"\n  >\n    <video-list-video\n      class="video_list-item"\n      video="video"\n      video-list="$ctrl.page_data.video_list"\n      position="$index + 1"\n      variants="{show_dates: $ctrl.page_data.video_list.show_dates, show_numbers: $ctrl.page_data.video_list.show_numbers}"\n    ></video-list-video>\n  </scrollable-data>\n</div>\n\n<modal-window ng-if="$ctrl.show_banner_edit_modal" on-close="$ctrl.show_banner_edit_modal = false">\n  <video-list-edit-form\n    object="$ctrl.page_data.video_list"\n    on-updated="$ctrl.page_data.video_list = video_list; $ctrl.show_banner_edit_modal = false"\n  ></video-list-edit-form>\n</modal-window>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("video_list_video.html",'<div ng-if="$ctrl.variants.show_numbers">\n  <svg height="36px" class="video_list-item-numeral">\n    <text x="50%" y="34px">#{{ $ctrl.position }}</text>\n  </svg>\n</div>\n\n<a\n  ng-href="{{$ctrl.video.url}}?utm_source=video_list"\n  class="video_list-item-title"\n  ng-class="{\'video_list-item-title--small\': $ctrl.variants.show_numbers}"\n>\n  {{ $ctrl.video.short_title }}\n</a>\n\n<div class="video_list-item-video">\n  <div ng-if="$ctrl.video_played">\n    <video brightcove\n      object="$ctrl.video"\n      can-play="$ctrl.video_can_play = true"\n      tracking-data="$ctrl.tracking_data"\n      player-name="standard"\n      class="video-js"\n    ></video>\n  </div>\n  <div\n    ng-click="$ctrl.video_played = true"\n    ng-if="!$ctrl.video_played && !$ctrl.video_can_play"\n    class="video-js video_list-item-video-poster_image"\n    ng-class="{\'video_list-item-video-poster_image--cover_video\': $ctrl.video_played}"\n  >\n    <img sized-src="$ctrl.video.poster_url" class="vjs-tech" />\n    <placeholder-spinner\n      ng-show="$ctrl.video_played"\n      placeholder-classes="placeholder--centered"\n    ></placeholder-spinner>\n    <svg\n      ng-hide="$ctrl.video_played"\n      src="play.svg"\n      class="play_button play_button--large"\n    ></svg>\n  </div>\n</div>\n\n<div class="video_list-item-metadata">\n  <span class="video_list-item-metadata-item">\n    <svg src="clock.svg" class="inline_icon inline_icon--white inline_icon--up_2 inline_icon--reading_size"></svg>\n    {{ $ctrl.video.duration | millisToDuration }}\n  </span>\n\n  <span class="video_list-item-metadata-item">\n    <svg class="inline_icon inline_icon--white inline_icon--up_1 inline_icon--small_reading_size" src="eye.svg"></svg>\n    {{ $ctrl.video.view_count | number }}\n  </span>\n\n  <span class="video_list-item-metadata-item" ng-if="$ctrl.variants.show_dates">\n    <svg src="calendar.svg" class="inline_icon inline_icon--white inline_icon--up_2 inline_icon--reading_size"></svg>\n    {{ ($ctrl.video.published_at * 1000) | date: "MMM d yyyy" }}\n  </span>\n</div>\n\n<div class="video_list-item-description video_list-item-description--truncated">\n  {{ $ctrl.video.description }}\n</div>\n\n<div class="video_list-item-read_more">\n  <a\n    ng-href="{{ $ctrl.video.url }}"\n    class="video_list-item-read_more-link"\n    ng-bind-html=":: \'videos.read_more\' | i18n"\n  ></a>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("video_page.html",'<div class="video_page video_page--black_background">\n  <div class="video_page-video">\n    <div ng-show="$ctrl.video_can_play">\n      <video brightcove\n        object="$ctrl.page_data.video"\n        can-play="$ctrl.video_can_play = true"\n        on-time-change="$ctrl.update_progress(current, duration)"\n        on-finish="$ctrl.countdown_to_next_video()"\n        tracking-data="$ctrl.tracking_data"\n        player-name="standard"\n        yields-api="$ctrl.add_video_api($ctrl.page_data.video.id, api)"\n        class="video-js"\n        ng-attr-autoplay="true"\n        autoplays-on-page-load="true"\n      ></video>\n    </div>\n\n    <div ng-show="!$ctrl.video_can_play" class="video-js video_page-video-poster_image">\n      <img sized-src="$ctrl.page_data.video.poster_url" class="u-width_100" />\n      <placeholder-spinner placeholder-classes="placeholder--centered"></placeholder-spinner>\n    </div>\n\n    <div class="video_page-video-next_video" ng-if="$ctrl.seconds_until_next_video">\n      <svg\n        ng-click="$ctrl.navigate_to_next_video()"\n        src="circle.svg"\n        class="video_page-video-next_video-loader"\n      ></svg>\n      <div\n        class="video_page-video-next_video-title"\n        ng-click="$ctrl.navigate_to_next_video()"\n      >Up next: {{ $ctrl.next_video.title }}</div>\n      <div\n        class="video_page-video-next_video-cancel"\n        ng-click="$ctrl.stop_countdown_to_next_video()"\n      >cancel</div>\n    </div>\n  </div>\n\n  <video-carousel\n    object="$ctrl.page_data.video"\n    placement="{{$ctrl.page_data.video.primary_video_list ? \'series_related\' : \'related\'}}"\n    variants="{half_black_background: true}"\n    title="Recommended"\n    active-video="$ctrl.page_data.video"\n    on-load="$ctrl.next_video = videos[0]"\n    video-list="$ctrl.page_data.video.primary_video_list"\n  ></video-carousel>\n</div>\n\n<div class="white_container white_container--no_padding">\n  <div class="grid_layout">\n    <div class="grid_layout--full">\n      <h1 class="article_title article_title--outlined u-xx_large_top_margin">{{$ctrl.page_data.video.title}}</h1>\n\n      <div ng-if="$ctrl.page_data.article.sponsored" class="u-top_margin u-x_large_bottom_margin">\n        <div ng-if="!$ctrl.page_data.article.sponsor_link" class="article_sponsor">\n          <span class="text_label text_label--gray">{{$ctrl.page_data.article.sponsor_phrase || (\'article.sponsor.phrase\' | i18n)}}</span>\n          <div\n            class="article_sponsor-logo"\n\t    ng-class="{\'article_sponsor-logo--larger\': $ctrl.page_data.article.sponsor_image_style === \'larger\'}"\n            clipped-background-image="$ctrl.page_data.article.sponsor_image"\n            clipped-background-image-fit-height\n          ></div>\n        </div>\n\n        <a\n          ng-if="$ctrl.page_data.article.sponsor_link"\n          ng-href="{{$ctrl.page_data.article.sponsor_link}}"\n          target="_blank"\n          class="article_sponsor"\n        >\n          <span class="text_label text_label--gray">{{$ctrl.page_data.article.sponsor_phrase || (\'article.sponsor.phrase\' | i18n)}}</span>\n          <div\n            class="article_sponsor-logo"\n\t    ng-class="{\'article_sponsor-logo--larger\': $ctrl.page_data.article.sponsor_image_style === \'larger\'}"\n            clipped-background-image="$ctrl.page_data.article.sponsor_image"\n            clipped-background-image-fit-height\n          ></div>\n        </a>\n      </div>\n\n      <div class="u-text_center u-small_top_margin u-x_large_bottom_margin">\n        <div class="article_info_bar">\n          <div class="article_info_bar-text">\n            <svg class="inline_icon inline_icon--reading_size inline_icon--up_2" src="clock.svg"></svg>\n            {{ $ctrl.page_data.video.duration | millisToDuration }}\n          </div>\n\n          <div class="article_info_bar-text u-small_horizontal_margins">\n            <svg class="inline_icon inline_icon--small_reading_size inline_icon--up_2" src="eye.svg"></svg>\n            {{ $ctrl.page_data.video.view_count | number }}\n          </div>\n\n          <div\n            ng-if="$ctrl.page_data.video.primary_video_list && $ctrl.page_data.video.primary_video_list.show_dates"\n            class="article_info_bar-text"\n          >\n            <svg src="calendar.svg" class="inline_icon inline_icon--up_2 inline_icon--reading_size"></svg>\n            {{ ($ctrl.page_data.video.published_at * 1000) | date:\'mediumDate\' }}\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <div class="grid_layout--sidebar">\n      <div\n        ng-if="$ctrl.page_data.video.authors.length"\n        class="article_info_and_action_box article_info_and_action_box--full_padding u-bottom_margin"\n      >\n        <div>\n          <div\n            ng-repeat="author in $ctrl.page_data.video.authors track by author.id"\n            ng-class="{\'u-bottom_margin\': !$last}"\n          >\n            <article-contributor-badge object="author"></article-contributor-badge>\n          </div>\n        </div>\n      </div>\n\n      <article-admin-bar ng-if="$ctrl.page_data.article" article="$ctrl.page_data.article" video="$ctrl.page_data.video"></article-admin-bar>\n\n      <div class="article_info_and_action_box u-top_margin">\n        <span\n          ng-if=":: $ctrl.can(\'view_video_sources\', $ctrl.page_data.video)"\n          ng-click="$ctrl.showing_sources = true"\n          class="article_info_and_action_box-action"\n          title="View video sources (shift+s)"\n        >\n          <svg src="gear.svg" class="inline_icon inline_icon--large_reading_size u-quarter_right_margin"></svg>\n          <kb shortcut="shift+s" action="$ctrl.showing_sources = true"></kb>\n          View Video Sources (shift+s)\n        </span>\n      </div>\n\n      <modal-window\n        ng-if="$ctrl.showing_sources"\n        on-close="$ctrl.showing_sources = false"\n      >\n        <video-edit-form object="$ctrl.page_data.video"></video-edit-form>\n      </modal-window>\n\n      <div class="u-top_margin">\n        <article-content-actions\n          type="video"\n          object="$ctrl.page_data.video"\n          variants="{\'two_rows\': true}"\n        ></article-content-actions>\n      </div>\n\n      <div class="u-text_center">\n        <youtube-subscribe-button></youtube-subscribe-button>\n      </div>\n\n      <dfp-ad\n        name="desktop_video_sidebar"\n        ad-classes="[\'u-top_margin\', \'u-bottom_margin\']"\n      ></dfp-ad>\n    </div>\n\n    <div class="grid_layout--main">\n      <div>\n        <h2 class="article_dek">\n          <hang-initial-quote content="$ctrl.page_data.article.dek"></hang-initial-quote>\n        </h2>\n\n        <standard-rich-content\n          ng-if="$ctrl.page_data.video.body"\n          html="$ctrl.page_data.video.body.html"\n          variants="{article: true}"\n          open-links-in-new-window\n        ></standard-rich-content>\n\n        <div class="article_rich_text_formatting" ng-if="!$ctrl.page_data.video.body">\n          <p ng-bind-html="$ctrl.page_data.video.description"></p>\n        </div>\n      </div>\n\n      <div class="u-xxx_large_vertical_margins">\n        <div class="u-xxx_large_top_margin u-x_large_bottom_margin">\n          <span class="text_label text_label--x_small_text_size text_label--gray">Comments</span>\n        </div>\n\n        <comments\n          variants="{no_background: true}"\n          type="videos"\n          commentable="$ctrl.page_data.video"\n        ></comments>\n      </div>\n    </div>\n  </div>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("videos_modal.html",'<modal-window\n  on-close="$ctrl.on_close()"\n  variants="{\n    no_background: true,\n    no_max_width: true,\n    full_width_parent: true,\n    vertically_center_contents: true\n  }"\n>\n  <div class="video_page">\n    <div class="video_page-video">\n      <div ng-show="$ctrl.video_can_play">\n        <video brightcove\n          ng-repeat="video in [$ctrl.active_video] track by video.id"\n          object="$ctrl.active_video"\n          can-play="$ctrl.video_can_play = true"\n          on-time-change="$ctrl.update_progress(current, duration)"\n          on-finish="$ctrl.next_video()"\n          tracking-data="$ctrl.tracking_data($ctrl.active_video)"\n          player-name="modal"\n          yields-api="$ctrl.add_video_api($ctrl.active_video.id, api)"\n          class="video-js u-accept_pointer_events"\n          ng-attr-autoplay="true"\n        ></video>\n      </div>\n      <div ng-show="!$ctrl.video_can_play" class="video-js video_page-video-poster_image">\n        <img ng-src="{{ $ctrl.active_video.poster_url }}" class="vjs-tech" />\n        <placeholder-spinner placeholder-classes="placeholder--centered"></placeholder-spinner>\n      </div>\n    </div>\n    <a ng-href="{{ $ctrl.active_video.url }}" class="video_page-caption u-accept_pointer_events">{{ $ctrl.active_video.title }}</a>\n    <div class="video_carousel u-accept_pointer_events">\n      <div class="video_carousel-container">\n        <div class="video_carousel-video video_carousel-video--intro_card">\n          <div class="video_carousel-video-card video_carousel-video-card--intro_card_text video_carousel-video-card--dark_background">Now Playing</div>\n        </div>\n        <div\n          ng-repeat="video in $ctrl.carousel_videos track by video.id"\n          ng-click="$ctrl.select_video(video)"\n          class="video_carousel-video"\n          ng-class="{\n            \'video_carousel-video--active\': $ctrl.active_video.id === video.id,\n            \'u-clickable\': $ctrl.active_video.id !== video.id\n          }"\n        >\n          <div class="video_carousel-video-card">\n            <div class="u-relative">\n              <img class="u-display_block video_carousel-video-image" sized-src="video.poster_url" />\n              <svg\n                ng-if="!($ctrl.active_video.id === video.id)"\n                src="play.svg"\n                class="play_button"\n              ></svg>\n            </div>\n            <div ng-if="$ctrl.active_video.id === video.id">\n              <div class="video_carousel-video-progress_bar" ng-style="{width: $ctrl.play_pct + \'%\'}"></div>\n              <div class="video_carousel-video-currently_playing_label text_label text_label--x_small_text_size text_label--white">\n                Currently Playing\n              </div>\n            </div>\n          </div>\n          <div class="video_carousel-video-title">\n            {{ video.title }}\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</modal-window>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("voters.html",'<div class="voters gray_container u-vertical_margins">\n  <placeholder-spinner ng-if="!loaded_voters"></placeholder-spinner>\n\n  <div ng-if="loaded_voters" class="voters-loaded">\n    <p ng-if="voters.up.length + voters.down.length === 0">No voters.</p>\n\n    <ul class="voters-list voters--up" ng-if="voters.up.length">\n      <li class="voters-vote_count voters-vote_count--up">{{ voters.up.length | signed_number }}</li>\n      <li ng-repeat="user in voters.up track by user.id">\n        <user-badge object="user" size="x_small"></user-badge>\n      </li>\n    </ul>\n    <ul class="voters-list voters--down" ng-if="voters.down.length">\n      <li class="voters-vote_count voters-vote_count--down">{{ -voters.down.length | signed_number }}</li>\n      <li ng-repeat="user in voters.down track by user.id">\n        <user-badge object="user" size="x_small"></user-badge>\n      </li>\n    </ul>\n  </div>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("voting.html",'<div class="voting">\n  <div\n    class="voting-button voting-upvote square_button square_button--transparent square_button--depress_on_click"\n    ng-class="{\'voting-upvote--active\': voteable.current_user_metadata.interactions.vote === \'up\'}"\n    ng-click="ctrl.submit_vote(\'up\')"\n  >\n    <svg class="inline_icon inline_icon--reading_size inline_icon--up_1" src="thumbs_up.svg"></svg>\n    <span ng-if="!variants.hide_upvote_text">Upvote</span>\n  </div>\n  <div\n    ng-if="voteable.has_voters"\n    class="voting-total square_button square_button--transparent"\n    ng-class="{\n      \'voting-total--positive\': voteable.votes_total > 0,\n      \'voting-total--negative\': voteable.votes_total < 0,\n      \'voting-total--animate_press\': !!voteable.current_user_metadata.interactions.vote\n    }"\n    ng-click="voteTotalClicked()"\n  >{{ voteable.votes_total | signed_number }}</div>\n  <div\n    ng-if="!variants.hide_downvote"\n    class="voting-button voting-downvote square_button square_button--transparent square_button--depress_on_click"\n    ng-class="{\'voting-downvote--active\': voteable.current_user_metadata.interactions.vote === \'down\'}"\n    ng-click="ctrl.submit_vote(\'down\')"\n  >\n    <svg class="inline_icon inline_icon--reading_size inline_icon--up_1" src="thumbs_down.svg"></svg>\n  </div>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("web_annotator_manager.html",'<div ng-if="$ctrl.web_page">\n  <h3>Managing</h3>\n  <h1 class="web_annotator_manager-web_page_title">{{ $ctrl.web_page.title }}</h1>\n  <p>\n    <a ng-href="{{ $ctrl.web_page.share_url }}" target="_blank">\n      <code>http:{{ $ctrl.web_page.normalized_url }}</code>\n    </a>\n    <br>{{ $ctrl.web_page.annotation_count}} annotations\n  </p>\n\n  <hr class="web_annotator-hr">\n\n  <web-annotator-manager-errors\n    yields-on-error="$ctrl.on_error = on_error"\n  ></web-annotator-manager-errors>\n\n  <button\n    class="square_button"\n    ng-click="$ctrl.protect(!$ctrl.web_page.protected)"\n  >{{ $ctrl.web_page.protected ? \'Un-protect This Page\' : \'Protect This Page\' }}</button>\n  <button\n    class="square_button"\n    ng-click="$ctrl.publish_drafts()"\n    ng-disabled="!$ctrl.web_page.draft_annotation_count"\n    ng-class="{\'square_button--green\': !!$ctrl.web_page.draft_annotation_count, \'square_button--disabled\': !$ctrl.web_page.draft_annotation_count}"\n  >Publish All Draft Annotations ({{ $ctrl.web_page.draft_annotation_count }})</button>\n\n  <hr class="web_annotator-hr">\n\n  <web-annotator-roles-table\n    header="Annotator Roles on This Page"\n    web-location-id="$ctrl.web_page.id"\n    web-location-type="web_page"\n  ></web-annotator-roles-table>\n\n  <web-annotator-roles-table\n    header="Annotator Roles on All of \'{{$ctrl.web_page.domain}}\'"\n    web-location-id="$ctrl.web_page.web_site_id"\n    web-location-type="web_site"\n  ></web-annotator-pages-role-table>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("web_annotator_manager_errors.html",'<div\n  class="web_annotator_manager-error nganimate-fade_out"\n  ng-repeat="error in $ctrl.errors"\n>\n  <p\n    class="web_annotator_manager-error-message"\n  ><strong>{{ error.message }}</strong></p>\n  <ul\n    class="web_annotator_manager-error-errors"\n    ng-if="error.response.errors.length"\n  >\n    <li ng-repeat="e in error.response.errors">{{ e }}</li>\n  </ul>\n</div>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("web_annotator_role_row.html",'<form>\n  <td tether-drop-target>\n    <span ng-if="$ctrl.user_role.id">\n       {{ $ctrl.user_role.user.name }}\n      <tether-drop show-on="hover" ng-if="$ctrl.user_role.user">\n        <user-tooltip user="$ctrl.user_role.user"></user-tooltip>\n      </tether-drop>\n    </span>\n    <input\n      required\n      ng-if="!$ctrl.user_role.id"\n      autocomplete-with="user"\n      ng-model="$ctrl.user_role.user_login"\n      class="square_input square_input--full_width web_annotator_manager-role_table_input"\n      placeholder="User Name"\n    >\n\n    <tether-drop show-on="hover" ng-if="!$ctrl.user_role.user">\n  </td>\n\n  <td>\n    <span ng-if="!$ctrl.editing">{{ $ctrl.user_role.role }}</span>\n    <input\n      ng-if="$ctrl.editing"\n      class="square_input square_input--full_width web_annotator_manager-role_table_input"\n      ng-model="$ctrl.user_role.role"\n      placeholder="Role Name"\n    >\n  </td>\n\n  <td>\n    <span\n      ng-if="!$ctrl.editing"\n    >{{ $ctrl.user_role.page_moderator ? \'&#x2714;\' : \'\' }}</span>\n    <input\n      ng-if="$ctrl.editing"\n      type="checkbox"\n      ng-model="$ctrl.user_role.page_moderator"\n    >\n  </td>\n\n  <td class="web_annotator_manager-role_table_cell">\n    <span\n      ng-if="!$ctrl.editing"\n    >{{ $ctrl.user_role.auto_feature ? \'&#x2714;\' : \'\' }}</span>\n    <input\n      ng-if="$ctrl.editing"\n      type="checkbox"\n      ng-model="$ctrl.user_role.auto_feature"\n    >\n  </td>\n\n  <td\n    ng-if="$ctrl.user_role.id"\n\n  >\n    <button\n      class="square_button"\n      ng-click="$ctrl.editing = true"\n      ng-if="!$ctrl.editing && $ctrl.user_role.id"\n    >Edit</button>\n\n    <button\n      class="square_button square_button--green"\n      ng-click="$ctrl.save()"\n      ng-if="$ctrl.editing && $ctrl.user_role.id"\n      ng-class="{\'square_button--disabled\': $ctrl.saving}"\n      ng-disabled="$ctrl.saving"\n    >{{ $ctrl.saving ? \'Saving...\' : \'Save\' }}</button>\n  </td>\n\n  <td\n    ng-if="$ctrl.user_role.id"\n  >\n    <button\n      class="square_button"\n      ng-click="$ctrl.editing = false"\n      ng-if="$ctrl.editing"\n    >Cancel</button>\n\n    <button\n      class="square_button square_button--red"\n      ng-click="$ctrl.destroy()"\n      ng-if="!$ctrl.editing"\n      confirm="Are you sure?"\n    >Delete</button>\n  </td>\n\n  <td\n    colspan="2"\n    ng-if="!$ctrl.user_role.id"\n  >\n    <button\n      class="square_button square_button--green"\n      ng-click="$ctrl.create()"\n      ng-class="{\'square_button--disabled\': $ctrl.saving}"\n      ng-disabled="$ctrl.saving"\n    >{{ $ctrl.saving ? \'Creating...\' : \'Create\' }}</button>\n  </td>\n</form>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("web_annotator_roles_table.html",'<h3\n  class="web_annotator_manager-table_header"\n>{{ $ctrl.header }}</h3>\n\n<web-annotator-manager-errors\n  yields-on-error="$ctrl.on_error = on_error"\n></web-annotator-manager-errors>\n\n<table class="admin_table web_annotator_manager-role_table">\n  <thead>\n    <th>Name</th>\n    <th>Role</th>\n    <th>Moderator</th>\n    <th>Auto Feature</th>\n    <th colspan="2"></th>\n  </thead>\n  <tbody>\n    <tr web-annotator-role-row\n      class="web_annotator_manager-role_table_row"\n      ng-repeat="user_role in $ctrl.user_roles | filter:{_deleted: \'!\'}"\n      on-error="$ctrl.on_error(error)"\n      user-role="user_role"\n    ></tr>\n    <tr web-annotator-role-row\n      ng-if="$ctrl.user_roles"\n      class="web_annotator_manager-role_table_row"\n      on-create="$ctrl.create(params)"\n      on-error="$ctrl.on_error(error)"\n      user-role="{auto_feature: true}"\n    ></tr>\n  </tbody>\n</table>\n<placeholder-spinner\n  ng-if="!$ctrl.user_roles"\n  placeholder-classes="u-vertical_margins"\n></placeholder-spinner>\n')}])},function(t,e){angular.module("genius").run(["$templateCache",function(t){t.put("youtube_subscribe_button.html",'<div class="g-ytsubscribe" data-channel="RapGeniusVideo" data-layout="default" data-count="default"></div>\n')}])},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){"use strict";n.r(e);n(1047),n(952),n(1143)}]);